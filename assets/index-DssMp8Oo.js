(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();function uS(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var fp={exports:{}},mc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var L_;function dS(){if(L_)return mc;L_=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,a,l){var u=null;if(l!==void 0&&(u=""+l),a.key!==void 0&&(u=""+a.key),"key"in a){l={};for(var f in a)f!=="key"&&(l[f]=a[f])}else l=a;return a=l.ref,{$$typeof:n,type:i,key:u,ref:a!==void 0?a:null,props:l}}return mc.Fragment=e,mc.jsx=t,mc.jsxs=t,mc}var U_;function hS(){return U_||(U_=1,fp.exports=dS()),fp.exports}var m=hS(),mp={exports:{}},je={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var z_;function fS(){if(z_)return je;z_=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),b=Symbol.iterator;function T(P){return P===null||typeof P!="object"?null:(P=b&&P[b]||P["@@iterator"],typeof P=="function"?P:null)}var N={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,k={};function D(P,ae,he){this.props=P,this.context=ae,this.refs=k,this.updater=he||N}D.prototype.isReactComponent={},D.prototype.setState=function(P,ae){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,ae,"setState")},D.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function $(){}$.prototype=D.prototype;function Q(P,ae,he){this.props=P,this.context=ae,this.refs=k,this.updater=he||N}var U=Q.prototype=new $;U.constructor=Q,A(U,D.prototype),U.isPureReactComponent=!0;var ne=Array.isArray,le={H:null,A:null,T:null,S:null,V:null},pe=Object.prototype.hasOwnProperty;function j(P,ae,he,ce,_e,Oe){return he=Oe.ref,{$$typeof:n,type:P,key:ae,ref:he!==void 0?he:null,props:Oe}}function C(P,ae){return j(P.type,ae,void 0,void 0,void 0,P.props)}function R(P){return typeof P=="object"&&P!==null&&P.$$typeof===n}function M(P){var ae={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(he){return ae[he]})}var z=/\/+/g;function B(P,ae){return typeof P=="object"&&P!==null&&P.key!=null?M(""+P.key):ae.toString(36)}function O(){}function ft(P){switch(P.status){case"fulfilled":return P.value;case"rejected":throw P.reason;default:switch(typeof P.status=="string"?P.then(O,O):(P.status="pending",P.then(function(ae){P.status==="pending"&&(P.status="fulfilled",P.value=ae)},function(ae){P.status==="pending"&&(P.status="rejected",P.reason=ae)})),P.status){case"fulfilled":return P.value;case"rejected":throw P.reason}}throw P}function Pe(P,ae,he,ce,_e){var Oe=typeof P;(Oe==="undefined"||Oe==="boolean")&&(P=null);var ee=!1;if(P===null)ee=!0;else switch(Oe){case"bigint":case"string":case"number":ee=!0;break;case"object":switch(P.$$typeof){case n:case e:ee=!0;break;case v:return ee=P._init,Pe(ee(P._payload),ae,he,ce,_e)}}if(ee)return _e=_e(P),ee=ce===""?"."+B(P,0):ce,ne(_e)?(he="",ee!=null&&(he=ee.replace(z,"$&/")+"/"),Pe(_e,ae,he,"",function(it){return it})):_e!=null&&(R(_e)&&(_e=C(_e,he+(_e.key==null||P&&P.key===_e.key?"":(""+_e.key).replace(z,"$&/")+"/")+ee)),ae.push(_e)),1;ee=0;var ve=ce===""?".":ce+":";if(ne(P))for(var oe=0;oe<P.length;oe++)ce=P[oe],Oe=ve+B(ce,oe),ee+=Pe(ce,ae,he,Oe,_e);else if(oe=T(P),typeof oe=="function")for(P=oe.call(P),oe=0;!(ce=P.next()).done;)ce=ce.value,Oe=ve+B(ce,oe++),ee+=Pe(ce,ae,he,Oe,_e);else if(Oe==="object"){if(typeof P.then=="function")return Pe(ft(P),ae,he,ce,_e);throw ae=String(P),Error("Objects are not valid as a React child (found: "+(ae==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":ae)+"). If you meant to render a collection of children, use an array instead.")}return ee}function Z(P,ae,he){if(P==null)return P;var ce=[],_e=0;return Pe(P,ce,"","",function(Oe){return ae.call(he,Oe,_e++)}),ce}function ue(P){if(P._status===-1){var ae=P._result;ae=ae(),ae.then(function(he){(P._status===0||P._status===-1)&&(P._status=1,P._result=he)},function(he){(P._status===0||P._status===-1)&&(P._status=2,P._result=he)}),P._status===-1&&(P._status=0,P._result=ae)}if(P._status===1)return P._result.default;throw P._result}var ye=typeof reportError=="function"?reportError:function(P){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ae=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof P=="object"&&P!==null&&typeof P.message=="string"?String(P.message):String(P),error:P});if(!window.dispatchEvent(ae))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",P);return}console.error(P)};function Fe(){}return je.Children={map:Z,forEach:function(P,ae,he){Z(P,function(){ae.apply(this,arguments)},he)},count:function(P){var ae=0;return Z(P,function(){ae++}),ae},toArray:function(P){return Z(P,function(ae){return ae})||[]},only:function(P){if(!R(P))throw Error("React.Children.only expected to receive a single React element child.");return P}},je.Component=D,je.Fragment=t,je.Profiler=a,je.PureComponent=Q,je.StrictMode=i,je.Suspense=p,je.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=le,je.__COMPILER_RUNTIME={__proto__:null,c:function(P){return le.H.useMemoCache(P)}},je.cache=function(P){return function(){return P.apply(null,arguments)}},je.cloneElement=function(P,ae,he){if(P==null)throw Error("The argument must be a React element, but you passed "+P+".");var ce=A({},P.props),_e=P.key,Oe=void 0;if(ae!=null)for(ee in ae.ref!==void 0&&(Oe=void 0),ae.key!==void 0&&(_e=""+ae.key),ae)!pe.call(ae,ee)||ee==="key"||ee==="__self"||ee==="__source"||ee==="ref"&&ae.ref===void 0||(ce[ee]=ae[ee]);var ee=arguments.length-2;if(ee===1)ce.children=he;else if(1<ee){for(var ve=Array(ee),oe=0;oe<ee;oe++)ve[oe]=arguments[oe+2];ce.children=ve}return j(P.type,_e,void 0,void 0,Oe,ce)},je.createContext=function(P){return P={$$typeof:u,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null},P.Provider=P,P.Consumer={$$typeof:l,_context:P},P},je.createElement=function(P,ae,he){var ce,_e={},Oe=null;if(ae!=null)for(ce in ae.key!==void 0&&(Oe=""+ae.key),ae)pe.call(ae,ce)&&ce!=="key"&&ce!=="__self"&&ce!=="__source"&&(_e[ce]=ae[ce]);var ee=arguments.length-2;if(ee===1)_e.children=he;else if(1<ee){for(var ve=Array(ee),oe=0;oe<ee;oe++)ve[oe]=arguments[oe+2];_e.children=ve}if(P&&P.defaultProps)for(ce in ee=P.defaultProps,ee)_e[ce]===void 0&&(_e[ce]=ee[ce]);return j(P,Oe,void 0,void 0,null,_e)},je.createRef=function(){return{current:null}},je.forwardRef=function(P){return{$$typeof:f,render:P}},je.isValidElement=R,je.lazy=function(P){return{$$typeof:v,_payload:{_status:-1,_result:P},_init:ue}},je.memo=function(P,ae){return{$$typeof:y,type:P,compare:ae===void 0?null:ae}},je.startTransition=function(P){var ae=le.T,he={};le.T=he;try{var ce=P(),_e=le.S;_e!==null&&_e(he,ce),typeof ce=="object"&&ce!==null&&typeof ce.then=="function"&&ce.then(Fe,ye)}catch(Oe){ye(Oe)}finally{le.T=ae}},je.unstable_useCacheRefresh=function(){return le.H.useCacheRefresh()},je.use=function(P){return le.H.use(P)},je.useActionState=function(P,ae,he){return le.H.useActionState(P,ae,he)},je.useCallback=function(P,ae){return le.H.useCallback(P,ae)},je.useContext=function(P){return le.H.useContext(P)},je.useDebugValue=function(){},je.useDeferredValue=function(P,ae){return le.H.useDeferredValue(P,ae)},je.useEffect=function(P,ae,he){var ce=le.H;if(typeof he=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ce.useEffect(P,ae)},je.useId=function(){return le.H.useId()},je.useImperativeHandle=function(P,ae,he){return le.H.useImperativeHandle(P,ae,he)},je.useInsertionEffect=function(P,ae){return le.H.useInsertionEffect(P,ae)},je.useLayoutEffect=function(P,ae){return le.H.useLayoutEffect(P,ae)},je.useMemo=function(P,ae){return le.H.useMemo(P,ae)},je.useOptimistic=function(P,ae){return le.H.useOptimistic(P,ae)},je.useReducer=function(P,ae,he){return le.H.useReducer(P,ae,he)},je.useRef=function(P){return le.H.useRef(P)},je.useState=function(P){return le.H.useState(P)},je.useSyncExternalStore=function(P,ae,he){return le.H.useSyncExternalStore(P,ae,he)},je.useTransition=function(){return le.H.useTransition()},je.version="19.1.0",je}var B_;function yg(){return B_||(B_=1,mp.exports=fS()),mp.exports}var V=yg();const va=uS(V);var pp={exports:{}},pc={},gp={exports:{}},yp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var q_;function mS(){return q_||(q_=1,function(n){function e(Z,ue){var ye=Z.length;Z.push(ue);e:for(;0<ye;){var Fe=ye-1>>>1,P=Z[Fe];if(0<a(P,ue))Z[Fe]=ue,Z[ye]=P,ye=Fe;else break e}}function t(Z){return Z.length===0?null:Z[0]}function i(Z){if(Z.length===0)return null;var ue=Z[0],ye=Z.pop();if(ye!==ue){Z[0]=ye;e:for(var Fe=0,P=Z.length,ae=P>>>1;Fe<ae;){var he=2*(Fe+1)-1,ce=Z[he],_e=he+1,Oe=Z[_e];if(0>a(ce,ye))_e<P&&0>a(Oe,ce)?(Z[Fe]=Oe,Z[_e]=ye,Fe=_e):(Z[Fe]=ce,Z[he]=ye,Fe=he);else if(_e<P&&0>a(Oe,ye))Z[Fe]=Oe,Z[_e]=ye,Fe=_e;else break e}}return ue}function a(Z,ue){var ye=Z.sortIndex-ue.sortIndex;return ye!==0?ye:Z.id-ue.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var u=Date,f=u.now();n.unstable_now=function(){return u.now()-f}}var p=[],y=[],v=1,b=null,T=3,N=!1,A=!1,k=!1,D=!1,$=typeof setTimeout=="function"?setTimeout:null,Q=typeof clearTimeout=="function"?clearTimeout:null,U=typeof setImmediate<"u"?setImmediate:null;function ne(Z){for(var ue=t(y);ue!==null;){if(ue.callback===null)i(y);else if(ue.startTime<=Z)i(y),ue.sortIndex=ue.expirationTime,e(p,ue);else break;ue=t(y)}}function le(Z){if(k=!1,ne(Z),!A)if(t(p)!==null)A=!0,pe||(pe=!0,B());else{var ue=t(y);ue!==null&&Pe(le,ue.startTime-Z)}}var pe=!1,j=-1,C=5,R=-1;function M(){return D?!0:!(n.unstable_now()-R<C)}function z(){if(D=!1,pe){var Z=n.unstable_now();R=Z;var ue=!0;try{e:{A=!1,k&&(k=!1,Q(j),j=-1),N=!0;var ye=T;try{t:{for(ne(Z),b=t(p);b!==null&&!(b.expirationTime>Z&&M());){var Fe=b.callback;if(typeof Fe=="function"){b.callback=null,T=b.priorityLevel;var P=Fe(b.expirationTime<=Z);if(Z=n.unstable_now(),typeof P=="function"){b.callback=P,ne(Z),ue=!0;break t}b===t(p)&&i(p),ne(Z)}else i(p);b=t(p)}if(b!==null)ue=!0;else{var ae=t(y);ae!==null&&Pe(le,ae.startTime-Z),ue=!1}}break e}finally{b=null,T=ye,N=!1}ue=void 0}}finally{ue?B():pe=!1}}}var B;if(typeof U=="function")B=function(){U(z)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,ft=O.port2;O.port1.onmessage=z,B=function(){ft.postMessage(null)}}else B=function(){$(z,0)};function Pe(Z,ue){j=$(function(){Z(n.unstable_now())},ue)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Z){Z.callback=null},n.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<Z?Math.floor(1e3/Z):5},n.unstable_getCurrentPriorityLevel=function(){return T},n.unstable_next=function(Z){switch(T){case 1:case 2:case 3:var ue=3;break;default:ue=T}var ye=T;T=ue;try{return Z()}finally{T=ye}},n.unstable_requestPaint=function(){D=!0},n.unstable_runWithPriority=function(Z,ue){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var ye=T;T=Z;try{return ue()}finally{T=ye}},n.unstable_scheduleCallback=function(Z,ue,ye){var Fe=n.unstable_now();switch(typeof ye=="object"&&ye!==null?(ye=ye.delay,ye=typeof ye=="number"&&0<ye?Fe+ye:Fe):ye=Fe,Z){case 1:var P=-1;break;case 2:P=250;break;case 5:P=1073741823;break;case 4:P=1e4;break;default:P=5e3}return P=ye+P,Z={id:v++,callback:ue,priorityLevel:Z,startTime:ye,expirationTime:P,sortIndex:-1},ye>Fe?(Z.sortIndex=ye,e(y,Z),t(p)===null&&Z===t(y)&&(k?(Q(j),j=-1):k=!0,Pe(le,ye-Fe))):(Z.sortIndex=P,e(p,Z),A||N||(A=!0,pe||(pe=!0,B()))),Z},n.unstable_shouldYield=M,n.unstable_wrapCallback=function(Z){var ue=T;return function(){var ye=T;T=ue;try{return Z.apply(this,arguments)}finally{T=ye}}}}(yp)),yp}var F_;function pS(){return F_||(F_=1,gp.exports=mS()),gp.exports}var vp={exports:{}},dn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var H_;function gS(){if(H_)return dn;H_=1;var n=yg();function e(p){var y="https://react.dev/errors/"+p;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)y+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+p+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(p,y,v){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:b==null?null:""+b,children:p,containerInfo:y,implementation:v}}var u=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(p,y){if(p==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return dn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,dn.createPortal=function(p,y){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return l(p,y,null,v)},dn.flushSync=function(p){var y=u.T,v=i.p;try{if(u.T=null,i.p=2,p)return p()}finally{u.T=y,i.p=v,i.d.f()}},dn.preconnect=function(p,y){typeof p=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,i.d.C(p,y))},dn.prefetchDNS=function(p){typeof p=="string"&&i.d.D(p)},dn.preinit=function(p,y){if(typeof p=="string"&&y&&typeof y.as=="string"){var v=y.as,b=f(v,y.crossOrigin),T=typeof y.integrity=="string"?y.integrity:void 0,N=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;v==="style"?i.d.S(p,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:b,integrity:T,fetchPriority:N}):v==="script"&&i.d.X(p,{crossOrigin:b,integrity:T,fetchPriority:N,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},dn.preinitModule=function(p,y){if(typeof p=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var v=f(y.as,y.crossOrigin);i.d.M(p,{crossOrigin:v,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&i.d.M(p)},dn.preload=function(p,y){if(typeof p=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var v=y.as,b=f(v,y.crossOrigin);i.d.L(p,v,{crossOrigin:b,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},dn.preloadModule=function(p,y){if(typeof p=="string")if(y){var v=f(y.as,y.crossOrigin);i.d.m(p,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:v,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else i.d.m(p)},dn.requestFormReset=function(p){i.d.r(p)},dn.unstable_batchedUpdates=function(p,y){return p(y)},dn.useFormState=function(p,y,v){return u.H.useFormState(p,y,v)},dn.useFormStatus=function(){return u.H.useHostTransitionStatus()},dn.version="19.1.0",dn}var G_;function yS(){if(G_)return vp.exports;G_=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),vp.exports=gS(),vp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $_;function vS(){if($_)return pc;$_=1;var n=pS(),e=yg(),t=yS();function i(r){var s="https://react.dev/errors/"+r;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function l(r){var s=r,o=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,(s.flags&4098)!==0&&(o=s.return),r=s.return;while(r)}return s.tag===3?o:null}function u(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function f(r){if(l(r)!==r)throw Error(i(188))}function p(r){var s=r.alternate;if(!s){if(s=l(r),s===null)throw Error(i(188));return s!==r?null:r}for(var o=r,c=s;;){var h=o.return;if(h===null)break;var g=h.alternate;if(g===null){if(c=h.return,c!==null){o=c;continue}break}if(h.child===g.child){for(g=h.child;g;){if(g===o)return f(h),r;if(g===c)return f(h),s;g=g.sibling}throw Error(i(188))}if(o.return!==c.return)o=h,c=g;else{for(var x=!1,w=h.child;w;){if(w===o){x=!0,o=h,c=g;break}if(w===c){x=!0,c=h,o=g;break}w=w.sibling}if(!x){for(w=g.child;w;){if(w===o){x=!0,o=g,c=h;break}if(w===c){x=!0,c=g,o=h;break}w=w.sibling}if(!x)throw Error(i(189))}}if(o.alternate!==c)throw Error(i(190))}if(o.tag!==3)throw Error(i(188));return o.stateNode.current===o?r:s}function y(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r;for(r=r.child;r!==null;){if(s=y(r),s!==null)return s;r=r.sibling}return null}var v=Object.assign,b=Symbol.for("react.element"),T=Symbol.for("react.transitional.element"),N=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),D=Symbol.for("react.profiler"),$=Symbol.for("react.provider"),Q=Symbol.for("react.consumer"),U=Symbol.for("react.context"),ne=Symbol.for("react.forward_ref"),le=Symbol.for("react.suspense"),pe=Symbol.for("react.suspense_list"),j=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),z=Symbol.iterator;function B(r){return r===null||typeof r!="object"?null:(r=z&&r[z]||r["@@iterator"],typeof r=="function"?r:null)}var O=Symbol.for("react.client.reference");function ft(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===O?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case A:return"Fragment";case D:return"Profiler";case k:return"StrictMode";case le:return"Suspense";case pe:return"SuspenseList";case R:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case N:return"Portal";case U:return(r.displayName||"Context")+".Provider";case Q:return(r._context.displayName||"Context")+".Consumer";case ne:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case j:return s=r.displayName||null,s!==null?s:ft(r.type)||"Memo";case C:s=r._payload,r=r._init;try{return ft(r(s))}catch{}}return null}var Pe=Array.isArray,Z=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ue=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ye={pending:!1,data:null,method:null,action:null},Fe=[],P=-1;function ae(r){return{current:r}}function he(r){0>P||(r.current=Fe[P],Fe[P]=null,P--)}function ce(r,s){P++,Fe[P]=r.current,r.current=s}var _e=ae(null),Oe=ae(null),ee=ae(null),ve=ae(null);function oe(r,s){switch(ce(ee,s),ce(Oe,r),ce(_e,null),s.nodeType){case 9:case 11:r=(r=s.documentElement)&&(r=r.namespaceURI)?h_(r):0;break;default:if(r=s.tagName,s=s.namespaceURI)s=h_(s),r=f_(s,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}he(_e),ce(_e,r)}function it(){he(_e),he(Oe),he(ee)}function xe(r){r.memoizedState!==null&&ce(ve,r);var s=_e.current,o=f_(s,r.type);s!==o&&(ce(Oe,r),ce(_e,o))}function Ve(r){Oe.current===r&&(he(_e),he(Oe)),ve.current===r&&(he(ve),cc._currentValue=ye)}var He=Object.prototype.hasOwnProperty,mt=n.unstable_scheduleCallback,_r=n.unstable_cancelCallback,Ds=n.unstable_shouldYield,al=n.unstable_requestPaint,yn=n.unstable_now,ff=n.unstable_getCurrentPriorityLevel,ol=n.unstable_ImmediatePriority,Da=n.unstable_UserBlockingPriority,js=n.unstable_NormalPriority,mf=n.unstable_LowPriority,ja=n.unstable_IdlePriority,ll=n.log,cu=n.unstable_setDisableYieldValue,Tt=null,et=null;function Pn(r){if(typeof ll=="function"&&cu(r),et&&typeof et.setStrictMode=="function")try{et.setStrictMode(Tt,r)}catch{}}var cn=Math.clz32?Math.clz32:Ps,uu=Math.log,pf=Math.LN2;function Ps(r){return r>>>=0,r===0?32:31-(uu(r)/pf|0)|0}var Ms=256,ks=4194304;function ar(r){var s=r&42;if(s!==0)return s;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function Pa(r,s,o){var c=r.pendingLanes;if(c===0)return 0;var h=0,g=r.suspendedLanes,x=r.pingedLanes;r=r.warmLanes;var w=c&134217727;return w!==0?(c=w&~g,c!==0?h=ar(c):(x&=w,x!==0?h=ar(x):o||(o=w&~r,o!==0&&(h=ar(o))))):(w=c&~g,w!==0?h=ar(w):x!==0?h=ar(x):o||(o=c&~r,o!==0&&(h=ar(o)))),h===0?0:s!==0&&s!==h&&(s&g)===0&&(g=h&-h,o=s&-s,g>=o||g===32&&(o&4194048)!==0)?s:h}function Vs(r,s){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&s)===0}function cl(r,s){switch(r){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ul(){var r=Ms;return Ms<<=1,(Ms&4194048)===0&&(Ms=256),r}function dl(){var r=ks;return ks<<=1,(ks&62914560)===0&&(ks=4194304),r}function Yr(r){for(var s=[],o=0;31>o;o++)s.push(r);return s}function Kr(r,s){r.pendingLanes|=s,s!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function hl(r,s,o,c,h,g){var x=r.pendingLanes;r.pendingLanes=o,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=o,r.entangledLanes&=o,r.errorRecoveryDisabledLanes&=o,r.shellSuspendCounter=0;var w=r.entanglements,I=r.expirationTimes,G=r.hiddenUpdates;for(o=x&~o;0<o;){var J=31-cn(o),ie=1<<J;w[J]=0,I[J]=-1;var Y=G[J];if(Y!==null)for(G[J]=null,J=0;J<Y.length;J++){var K=Y[J];K!==null&&(K.lane&=-536870913)}o&=~ie}c!==0&&br(r,c,0),g!==0&&h===0&&r.tag!==0&&(r.suspendedLanes|=g&~(x&~s))}function br(r,s,o){r.pendingLanes|=s,r.suspendedLanes&=~s;var c=31-cn(s);r.entangledLanes|=s,r.entanglements[c]=r.entanglements[c]|1073741824|o&4194090}function fl(r,s){var o=r.entangledLanes|=s;for(r=r.entanglements;o;){var c=31-cn(o),h=1<<c;h&s|r[c]&s&&(r[c]|=s),o&=~h}}function Di(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function Ma(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function ji(){var r=ue.p;return r!==0?r:(r=window.event,r===void 0?32:D_(r.type))}function du(r,s){var o=ue.p;try{return ue.p=r,s()}finally{ue.p=o}}var pt=Math.random().toString(36).slice(2),kt="__reactFiber$"+pt,It="__reactProps$"+pt,Hn="__reactContainer$"+pt,ml="__reactEvents$"+pt,gf="__reactListeners$"+pt,Pi="__reactHandles$"+pt,hu="__reactResources$"+pt,Ls="__reactMarker$"+pt;function Mi(r){delete r[kt],delete r[It],delete r[ml],delete r[gf],delete r[Pi]}function Qr(r){var s=r[kt];if(s)return s;for(var o=r.parentNode;o;){if(s=o[Hn]||o[kt]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(r=y_(r);r!==null;){if(o=r[kt])return o;r=y_(r)}return s}r=o,o=r.parentNode}return null}function Er(r){if(r=r[kt]||r[Hn]){var s=r.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return r}return null}function xr(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r.stateNode;throw Error(i(33))}function vn(r){var s=r[hu];return s||(s=r[hu]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function St(r){r[Ls]=!0}var pl=new Set,ka={};function or(r,s){Wr(r,s),Wr(r+"Capture",s)}function Wr(r,s){for(ka[r]=s,r=0;r<s.length;r++)pl.add(s[r])}var fu=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),mu={},Us={};function pu(r){return He.call(Us,r)?!0:He.call(mu,r)?!1:fu.test(r)?Us[r]=!0:(mu[r]=!0,!1)}function ki(r,s,o){if(pu(s))if(o===null)r.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":r.removeAttribute(s);return;case"boolean":var c=s.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){r.removeAttribute(s);return}}r.setAttribute(s,""+o)}}function Tr(r,s,o){if(o===null)r.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(s);return}r.setAttribute(s,""+o)}}function Jt(r,s,o,c){if(c===null)r.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(o);return}r.setAttributeNS(s,o,""+c)}}var zs,gu;function Xr(r){if(zs===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);zs=s&&s[1]||"",gu=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+zs+r+gu}var Va=!1;function La(r,s){if(!r||Va)return"";Va=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(s){var ie=function(){throw Error()};if(Object.defineProperty(ie.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ie,[])}catch(K){var Y=K}Reflect.construct(r,[],ie)}else{try{ie.call()}catch(K){Y=K}r.call(ie.prototype)}}else{try{throw Error()}catch(K){Y=K}(ie=r())&&typeof ie.catch=="function"&&ie.catch(function(){})}}catch(K){if(K&&Y&&typeof K.stack=="string")return[K.stack,Y.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=c.DetermineComponentFrameRoot(),x=g[0],w=g[1];if(x&&w){var I=x.split(`
`),G=w.split(`
`);for(h=c=0;c<I.length&&!I[c].includes("DetermineComponentFrameRoot");)c++;for(;h<G.length&&!G[h].includes("DetermineComponentFrameRoot");)h++;if(c===I.length||h===G.length)for(c=I.length-1,h=G.length-1;1<=c&&0<=h&&I[c]!==G[h];)h--;for(;1<=c&&0<=h;c--,h--)if(I[c]!==G[h]){if(c!==1||h!==1)do if(c--,h--,0>h||I[c]!==G[h]){var J=`
`+I[c].replace(" at new "," at ");return r.displayName&&J.includes("<anonymous>")&&(J=J.replace("<anonymous>",r.displayName)),J}while(1<=c&&0<=h);break}}}finally{Va=!1,Error.prepareStackTrace=o}return(o=r?r.displayName||r.name:"")?Xr(o):""}function gl(r){switch(r.tag){case 26:case 27:case 5:return Xr(r.type);case 16:return Xr("Lazy");case 13:return Xr("Suspense");case 19:return Xr("SuspenseList");case 0:case 15:return La(r.type,!1);case 11:return La(r.type.render,!1);case 1:return La(r.type,!0);case 31:return Xr("Activity");default:return""}}function Ua(r){try{var s="";do s+=gl(r),r=r.return;while(r);return s}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function _n(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function yl(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function yf(r){var s=yl(r)?"checked":"value",o=Object.getOwnPropertyDescriptor(r.constructor.prototype,s),c=""+r[s];if(!r.hasOwnProperty(s)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var h=o.get,g=o.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return h.call(this)},set:function(x){c=""+x,g.call(this,x)}}),Object.defineProperty(r,s,{enumerable:o.enumerable}),{getValue:function(){return c},setValue:function(x){c=""+x},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function za(r){r._valueTracker||(r._valueTracker=yf(r))}function vl(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var o=s.getValue(),c="";return r&&(c=yl(r)?r.checked?"true":"false":r.value),r=c,r!==o?(s.setValue(r),!0):!1}function Bs(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var vf=/[\n"\\]/g;function Ot(r){return r.replace(vf,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Mn(r,s,o,c,h,g,x,w){r.name="",x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?r.type=x:r.removeAttribute("type"),s!=null?x==="number"?(s===0&&r.value===""||r.value!=s)&&(r.value=""+_n(s)):r.value!==""+_n(s)&&(r.value=""+_n(s)):x!=="submit"&&x!=="reset"||r.removeAttribute("value"),s!=null?Vi(r,x,_n(s)):o!=null?Vi(r,x,_n(o)):c!=null&&r.removeAttribute("value"),h==null&&g!=null&&(r.defaultChecked=!!g),h!=null&&(r.checked=h&&typeof h!="function"&&typeof h!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?r.name=""+_n(w):r.removeAttribute("name")}function qs(r,s,o,c,h,g,x,w){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(r.type=g),s!=null||o!=null){if(!(g!=="submit"&&g!=="reset"||s!=null))return;o=o!=null?""+_n(o):"",s=s!=null?""+_n(s):o,w||s===r.value||(r.value=s),r.defaultValue=s}c=c??h,c=typeof c!="function"&&typeof c!="symbol"&&!!c,r.checked=w?r.checked:!!c,r.defaultChecked=!!c,x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(r.name=x)}function Vi(r,s,o){s==="number"&&Bs(r.ownerDocument)===r||r.defaultValue===""+o||(r.defaultValue=""+o)}function Zr(r,s,o,c){if(r=r.options,s){s={};for(var h=0;h<o.length;h++)s["$"+o[h]]=!0;for(o=0;o<r.length;o++)h=s.hasOwnProperty("$"+r[o].value),r[o].selected!==h&&(r[o].selected=h),h&&c&&(r[o].defaultSelected=!0)}else{for(o=""+_n(o),s=null,h=0;h<r.length;h++){if(r[h].value===o){r[h].selected=!0,c&&(r[h].defaultSelected=!0);return}s!==null||r[h].disabled||(s=r[h])}s!==null&&(s.selected=!0)}}function st(r,s,o){if(s!=null&&(s=""+_n(s),s!==r.value&&(r.value=s),o==null)){r.defaultValue!==s&&(r.defaultValue=s);return}r.defaultValue=o!=null?""+_n(o):""}function Fs(r,s,o,c){if(s==null){if(c!=null){if(o!=null)throw Error(i(92));if(Pe(c)){if(1<c.length)throw Error(i(93));c=c[0]}o=c}o==null&&(o=""),s=o}o=_n(s),r.defaultValue=o,c=r.textContent,c===o&&c!==""&&c!==null&&(r.value=c)}function Gn(r,s){if(s){var o=r.firstChild;if(o&&o===r.lastChild&&o.nodeType===3){o.nodeValue=s;return}}r.textContent=s}var Hs=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function yu(r,s,o){var c=s.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?c?r.setProperty(s,""):s==="float"?r.cssFloat="":r[s]="":c?r.setProperty(s,o):typeof o!="number"||o===0||Hs.has(s)?s==="float"?r.cssFloat=o:r[s]=(""+o).trim():r[s]=o+"px"}function _l(r,s,o){if(s!=null&&typeof s!="object")throw Error(i(62));if(r=r.style,o!=null){for(var c in o)!o.hasOwnProperty(c)||s!=null&&s.hasOwnProperty(c)||(c.indexOf("--")===0?r.setProperty(c,""):c==="float"?r.cssFloat="":r[c]="");for(var h in s)c=s[h],s.hasOwnProperty(h)&&o[h]!==c&&yu(r,h,c)}else for(var g in s)s.hasOwnProperty(g)&&yu(r,g,s[g])}function bl(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _f=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),bf=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ba(r){return bf.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}var Jr=null;function $n(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var ei=null,ti=null;function El(r){var s=Er(r);if(s&&(r=s.stateNode)){var o=r[It]||null;e:switch(r=s.stateNode,s.type){case"input":if(Mn(r,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),s=o.name,o.type==="radio"&&s!=null){for(o=r;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Ot(""+s)+'"][type="radio"]'),s=0;s<o.length;s++){var c=o[s];if(c!==r&&c.form===r.form){var h=c[It]||null;if(!h)throw Error(i(90));Mn(c,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(s=0;s<o.length;s++)c=o[s],c.form===r.form&&vl(c)}break e;case"textarea":st(r,o.value,o.defaultValue);break e;case"select":s=o.value,s!=null&&Zr(r,!!o.multiple,s,!1)}}}var wr=!1;function vu(r,s,o){if(wr)return r(s,o);wr=!0;try{var c=r(s);return c}finally{if(wr=!1,(ei!==null||ti!==null)&&(dd(),ei&&(s=ei,r=ti,ti=ei=null,El(s),r)))for(s=0;s<r.length;s++)El(r[s])}}function Gs(r,s){var o=r.stateNode;if(o===null)return null;var c=o[It]||null;if(c===null)return null;o=c[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(r=r.type,c=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!c;break e;default:r=!1}if(r)return null;if(o&&typeof o!="function")throw Error(i(231,s,typeof o));return o}var lr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Yn=!1;if(lr)try{var $s={};Object.defineProperty($s,"passive",{get:function(){Yn=!0}}),window.addEventListener("test",$s,$s),window.removeEventListener("test",$s,$s)}catch{Yn=!1}var Ar=null,Li=null,ni=null;function xl(){if(ni)return ni;var r,s=Li,o=s.length,c,h="value"in Ar?Ar.value:Ar.textContent,g=h.length;for(r=0;r<o&&s[r]===h[r];r++);var x=o-r;for(c=1;c<=x&&s[o-c]===h[g-c];c++);return ni=h.slice(r,1<c?1-c:void 0)}function Sr(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function Nr(){return!0}function Tl(){return!1}function Ht(r){function s(o,c,h,g,x){this._reactName=o,this._targetInst=h,this.type=c,this.nativeEvent=g,this.target=x,this.currentTarget=null;for(var w in r)r.hasOwnProperty(w)&&(o=r[w],this[w]=o?o(g):g[w]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Nr:Tl,this.isPropagationStopped=Tl,this}return v(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Nr)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Nr)},persist:function(){},isPersistent:Nr}),s}var Ze={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},qa=Ht(Ze),Ys=v({},Ze,{view:0,detail:0}),_u=Ht(Ys),Fa,Ha,Cr,Ks=v({},Ys,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xs,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Cr&&(Cr&&r.type==="mousemove"?(Fa=r.screenX-Cr.screenX,Ha=r.screenY-Cr.screenY):Ha=Fa=0,Cr=r),Fa)},movementY:function(r){return"movementY"in r?r.movementY:Ha}}),Kn=Ht(Ks),bu=v({},Ks,{dataTransfer:0}),Ef=Ht(bu),Qs=v({},Ys,{relatedTarget:0}),Ga=Ht(Qs),wl=v({},Ze,{animationName:0,elapsedTime:0,pseudoElement:0}),$a=Ht(wl),Eu=v({},Ze,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Ya=Ht(Eu),xf=v({},Ze,{data:0}),Al=Ht(xf),Ws={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Tu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sl(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=Tu[r])?!!s[r]:!1}function Xs(){return Sl}var wu=v({},Ys,{key:function(r){if(r.key){var s=Ws[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=Sr(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?xu[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xs,charCode:function(r){return r.type==="keypress"?Sr(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Sr(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Ka=Ht(wu),Au=v({},Ks,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Nl=Ht(Au),ri=v({},Ys,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xs}),Su=Ht(ri),Nu=v({},Ze,{propertyName:0,elapsedTime:0,pseudoElement:0}),Cu=Ht(Nu),Ru=v({},Ks,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Qa=Ht(Ru),bn=v({},Ze,{newState:0,oldState:0}),Iu=Ht(bn),Ou=[9,13,27,32],Rr=lr&&"CompositionEvent"in window,d=null;lr&&"documentMode"in document&&(d=document.documentMode);var _=lr&&"TextEvent"in window&&!d,E=lr&&(!Rr||d&&8<d&&11>=d),S=" ",F=!1;function W(r,s){switch(r){case"keyup":return Ou.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function de(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Ge=!1;function Vt(r,s){switch(r){case"compositionend":return de(s);case"keypress":return s.which!==32?null:(F=!0,S);case"textInput":return r=s.data,r===S&&F?null:r;default:return null}}function $e(r,s){if(Ge)return r==="compositionend"||!Rr&&W(r,s)?(r=xl(),ni=Li=Ar=null,Ge=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return E&&s.locale!=="ko"?null:s.data;default:return null}}var Gt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Lt(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!Gt[r.type]:s==="textarea"}function ii(r,s,o,c){ei?ti?ti.push(c):ti=[c]:ei=c,s=yd(s,"onChange"),0<s.length&&(o=new qa("onChange","change",null,o,c),r.push({event:o,listeners:s}))}var en=null,Ir=null;function Cl(r){o_(r,0)}function Du(r){var s=xr(r);if(vl(s))return r}function Cy(r,s){if(r==="change")return s}var Ry=!1;if(lr){var Tf;if(lr){var wf="oninput"in document;if(!wf){var Iy=document.createElement("div");Iy.setAttribute("oninput","return;"),wf=typeof Iy.oninput=="function"}Tf=wf}else Tf=!1;Ry=Tf&&(!document.documentMode||9<document.documentMode)}function Oy(){en&&(en.detachEvent("onpropertychange",Dy),Ir=en=null)}function Dy(r){if(r.propertyName==="value"&&Du(Ir)){var s=[];ii(s,Ir,r,$n(r)),vu(Cl,s)}}function zw(r,s,o){r==="focusin"?(Oy(),en=s,Ir=o,en.attachEvent("onpropertychange",Dy)):r==="focusout"&&Oy()}function Bw(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Du(Ir)}function qw(r,s){if(r==="click")return Du(s)}function Fw(r,s){if(r==="input"||r==="change")return Du(s)}function Hw(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var kn=typeof Object.is=="function"?Object.is:Hw;function Rl(r,s){if(kn(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var o=Object.keys(r),c=Object.keys(s);if(o.length!==c.length)return!1;for(c=0;c<o.length;c++){var h=o[c];if(!He.call(s,h)||!kn(r[h],s[h]))return!1}return!0}function jy(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Py(r,s){var o=jy(r);r=0;for(var c;o;){if(o.nodeType===3){if(c=r+o.textContent.length,r<=s&&c>=s)return{node:o,offset:s-r};r=c}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=jy(o)}}function My(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?My(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function ky(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var s=Bs(r.document);s instanceof r.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)r=s.contentWindow;else break;s=Bs(r.document)}return s}function Af(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}var Gw=lr&&"documentMode"in document&&11>=document.documentMode,Wa=null,Sf=null,Il=null,Nf=!1;function Vy(r,s,o){var c=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Nf||Wa==null||Wa!==Bs(c)||(c=Wa,"selectionStart"in c&&Af(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Il&&Rl(Il,c)||(Il=c,c=yd(Sf,"onSelect"),0<c.length&&(s=new qa("onSelect","select",null,s,o),r.push({event:s,listeners:c}),s.target=Wa)))}function Zs(r,s){var o={};return o[r.toLowerCase()]=s.toLowerCase(),o["Webkit"+r]="webkit"+s,o["Moz"+r]="moz"+s,o}var Xa={animationend:Zs("Animation","AnimationEnd"),animationiteration:Zs("Animation","AnimationIteration"),animationstart:Zs("Animation","AnimationStart"),transitionrun:Zs("Transition","TransitionRun"),transitionstart:Zs("Transition","TransitionStart"),transitioncancel:Zs("Transition","TransitionCancel"),transitionend:Zs("Transition","TransitionEnd")},Cf={},Ly={};lr&&(Ly=document.createElement("div").style,"AnimationEvent"in window||(delete Xa.animationend.animation,delete Xa.animationiteration.animation,delete Xa.animationstart.animation),"TransitionEvent"in window||delete Xa.transitionend.transition);function Js(r){if(Cf[r])return Cf[r];if(!Xa[r])return r;var s=Xa[r],o;for(o in s)if(s.hasOwnProperty(o)&&o in Ly)return Cf[r]=s[o];return r}var Uy=Js("animationend"),zy=Js("animationiteration"),By=Js("animationstart"),$w=Js("transitionrun"),Yw=Js("transitionstart"),Kw=Js("transitioncancel"),qy=Js("transitionend"),Fy=new Map,Rf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Rf.push("scrollEnd");function cr(r,s){Fy.set(r,s),or(s,[r])}var Hy=new WeakMap;function Qn(r,s){if(typeof r=="object"&&r!==null){var o=Hy.get(r);return o!==void 0?o:(s={value:r,source:s,stack:Ua(s)},Hy.set(r,s),s)}return{value:r,source:s,stack:Ua(s)}}var Wn=[],Za=0,If=0;function ju(){for(var r=Za,s=If=Za=0;s<r;){var o=Wn[s];Wn[s++]=null;var c=Wn[s];Wn[s++]=null;var h=Wn[s];Wn[s++]=null;var g=Wn[s];if(Wn[s++]=null,c!==null&&h!==null){var x=c.pending;x===null?h.next=h:(h.next=x.next,x.next=h),c.pending=h}g!==0&&Gy(o,h,g)}}function Pu(r,s,o,c){Wn[Za++]=r,Wn[Za++]=s,Wn[Za++]=o,Wn[Za++]=c,If|=c,r.lanes|=c,r=r.alternate,r!==null&&(r.lanes|=c)}function Of(r,s,o,c){return Pu(r,s,o,c),Mu(r)}function Ja(r,s){return Pu(r,null,null,s),Mu(r)}function Gy(r,s,o){r.lanes|=o;var c=r.alternate;c!==null&&(c.lanes|=o);for(var h=!1,g=r.return;g!==null;)g.childLanes|=o,c=g.alternate,c!==null&&(c.childLanes|=o),g.tag===22&&(r=g.stateNode,r===null||r._visibility&1||(h=!0)),r=g,g=g.return;return r.tag===3?(g=r.stateNode,h&&s!==null&&(h=31-cn(o),r=g.hiddenUpdates,c=r[h],c===null?r[h]=[s]:c.push(s),s.lane=o|536870912),g):null}function Mu(r){if(50<tc)throw tc=0,Vm=null,Error(i(185));for(var s=r.return;s!==null;)r=s,s=r.return;return r.tag===3?r.stateNode:null}var eo={};function Qw(r,s,o,c){this.tag=r,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vn(r,s,o,c){return new Qw(r,s,o,c)}function Df(r){return r=r.prototype,!(!r||!r.isReactComponent)}function si(r,s){var o=r.alternate;return o===null?(o=Vn(r.tag,s,r.key,r.mode),o.elementType=r.elementType,o.type=r.type,o.stateNode=r.stateNode,o.alternate=r,r.alternate=o):(o.pendingProps=s,o.type=r.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=r.flags&65011712,o.childLanes=r.childLanes,o.lanes=r.lanes,o.child=r.child,o.memoizedProps=r.memoizedProps,o.memoizedState=r.memoizedState,o.updateQueue=r.updateQueue,s=r.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=r.sibling,o.index=r.index,o.ref=r.ref,o.refCleanup=r.refCleanup,o}function $y(r,s){r.flags&=65011714;var o=r.alternate;return o===null?(r.childLanes=0,r.lanes=s,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,s=o.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),r}function ku(r,s,o,c,h,g){var x=0;if(c=r,typeof r=="function")Df(r)&&(x=1);else if(typeof r=="string")x=XA(r,o,_e.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case R:return r=Vn(31,o,s,h),r.elementType=R,r.lanes=g,r;case A:return ea(o.children,h,g,s);case k:x=8,h|=24;break;case D:return r=Vn(12,o,s,h|2),r.elementType=D,r.lanes=g,r;case le:return r=Vn(13,o,s,h),r.elementType=le,r.lanes=g,r;case pe:return r=Vn(19,o,s,h),r.elementType=pe,r.lanes=g,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case $:case U:x=10;break e;case Q:x=9;break e;case ne:x=11;break e;case j:x=14;break e;case C:x=16,c=null;break e}x=29,o=Error(i(130,r===null?"null":typeof r,"")),c=null}return s=Vn(x,o,s,h),s.elementType=r,s.type=c,s.lanes=g,s}function ea(r,s,o,c){return r=Vn(7,r,c,s),r.lanes=o,r}function jf(r,s,o){return r=Vn(6,r,null,s),r.lanes=o,r}function Pf(r,s,o){return s=Vn(4,r.children!==null?r.children:[],r.key,s),s.lanes=o,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}var to=[],no=0,Vu=null,Lu=0,Xn=[],Zn=0,ta=null,ai=1,oi="";function na(r,s){to[no++]=Lu,to[no++]=Vu,Vu=r,Lu=s}function Yy(r,s,o){Xn[Zn++]=ai,Xn[Zn++]=oi,Xn[Zn++]=ta,ta=r;var c=ai;r=oi;var h=32-cn(c)-1;c&=~(1<<h),o+=1;var g=32-cn(s)+h;if(30<g){var x=h-h%5;g=(c&(1<<x)-1).toString(32),c>>=x,h-=x,ai=1<<32-cn(s)+h|o<<h|c,oi=g+r}else ai=1<<g|o<<h|c,oi=r}function Mf(r){r.return!==null&&(na(r,1),Yy(r,1,0))}function kf(r){for(;r===Vu;)Vu=to[--no],to[no]=null,Lu=to[--no],to[no]=null;for(;r===ta;)ta=Xn[--Zn],Xn[Zn]=null,oi=Xn[--Zn],Xn[Zn]=null,ai=Xn[--Zn],Xn[Zn]=null}var En=null,wt=null,Xe=!1,ra=null,Or=!1,Vf=Error(i(519));function ia(r){var s=Error(i(418,""));throw jl(Qn(s,r)),Vf}function Ky(r){var s=r.stateNode,o=r.type,c=r.memoizedProps;switch(s[kt]=r,s[It]=c,o){case"dialog":ze("cancel",s),ze("close",s);break;case"iframe":case"object":case"embed":ze("load",s);break;case"video":case"audio":for(o=0;o<rc.length;o++)ze(rc[o],s);break;case"source":ze("error",s);break;case"img":case"image":case"link":ze("error",s),ze("load",s);break;case"details":ze("toggle",s);break;case"input":ze("invalid",s),qs(s,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0),za(s);break;case"select":ze("invalid",s);break;case"textarea":ze("invalid",s),Fs(s,c.value,c.defaultValue,c.children),za(s)}o=c.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||s.textContent===""+o||c.suppressHydrationWarning===!0||d_(s.textContent,o)?(c.popover!=null&&(ze("beforetoggle",s),ze("toggle",s)),c.onScroll!=null&&ze("scroll",s),c.onScrollEnd!=null&&ze("scrollend",s),c.onClick!=null&&(s.onclick=vd),s=!0):s=!1,s||ia(r)}function Qy(r){for(En=r.return;En;)switch(En.tag){case 5:case 13:Or=!1;return;case 27:case 3:Or=!0;return;default:En=En.return}}function Ol(r){if(r!==En)return!1;if(!Xe)return Qy(r),Xe=!0,!1;var s=r.tag,o;if((o=s!==3&&s!==27)&&((o=s===5)&&(o=r.type,o=!(o!=="form"&&o!=="button")||Jm(r.type,r.memoizedProps)),o=!o),o&&wt&&ia(r),Qy(r),s===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));e:{for(r=r.nextSibling,s=0;r;){if(r.nodeType===8)if(o=r.data,o==="/$"){if(s===0){wt=dr(r.nextSibling);break e}s--}else o!=="$"&&o!=="$!"&&o!=="$?"||s++;r=r.nextSibling}wt=null}}else s===27?(s=wt,es(r.type)?(r=rp,rp=null,wt=r):wt=s):wt=En?dr(r.stateNode.nextSibling):null;return!0}function Dl(){wt=En=null,Xe=!1}function Wy(){var r=ra;return r!==null&&(Cn===null?Cn=r:Cn.push.apply(Cn,r),ra=null),r}function jl(r){ra===null?ra=[r]:ra.push(r)}var Lf=ae(null),sa=null,li=null;function Ui(r,s,o){ce(Lf,s._currentValue),s._currentValue=o}function ci(r){r._currentValue=Lf.current,he(Lf)}function Uf(r,s,o){for(;r!==null;){var c=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),r===o)break;r=r.return}}function zf(r,s,o,c){var h=r.child;for(h!==null&&(h.return=r);h!==null;){var g=h.dependencies;if(g!==null){var x=h.child;g=g.firstContext;e:for(;g!==null;){var w=g;g=h;for(var I=0;I<s.length;I++)if(w.context===s[I]){g.lanes|=o,w=g.alternate,w!==null&&(w.lanes|=o),Uf(g.return,o,r),c||(x=null);break e}g=w.next}}else if(h.tag===18){if(x=h.return,x===null)throw Error(i(341));x.lanes|=o,g=x.alternate,g!==null&&(g.lanes|=o),Uf(x,o,r),x=null}else x=h.child;if(x!==null)x.return=h;else for(x=h;x!==null;){if(x===r){x=null;break}if(h=x.sibling,h!==null){h.return=x.return,x=h;break}x=x.return}h=x}}function Pl(r,s,o,c){r=null;for(var h=s,g=!1;h!==null;){if(!g){if((h.flags&524288)!==0)g=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var x=h.alternate;if(x===null)throw Error(i(387));if(x=x.memoizedProps,x!==null){var w=h.type;kn(h.pendingProps.value,x.value)||(r!==null?r.push(w):r=[w])}}else if(h===ve.current){if(x=h.alternate,x===null)throw Error(i(387));x.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(r!==null?r.push(cc):r=[cc])}h=h.return}r!==null&&zf(s,r,o,c),s.flags|=262144}function Uu(r){for(r=r.firstContext;r!==null;){if(!kn(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function aa(r){sa=r,li=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function un(r){return Xy(sa,r)}function zu(r,s){return sa===null&&aa(r),Xy(r,s)}function Xy(r,s){var o=s._currentValue;if(s={context:s,memoizedValue:o,next:null},li===null){if(r===null)throw Error(i(308));li=s,r.dependencies={lanes:0,firstContext:s},r.flags|=524288}else li=li.next=s;return o}var Ww=typeof AbortController<"u"?AbortController:function(){var r=[],s=this.signal={aborted:!1,addEventListener:function(o,c){r.push(c)}};this.abort=function(){s.aborted=!0,r.forEach(function(o){return o()})}},Xw=n.unstable_scheduleCallback,Zw=n.unstable_NormalPriority,Ut={$$typeof:U,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Bf(){return{controller:new Ww,data:new Map,refCount:0}}function Ml(r){r.refCount--,r.refCount===0&&Xw(Zw,function(){r.controller.abort()})}var kl=null,qf=0,ro=0,io=null;function Jw(r,s){if(kl===null){var o=kl=[];qf=0,ro=Hm(),io={status:"pending",value:void 0,then:function(c){o.push(c)}}}return qf++,s.then(Zy,Zy),s}function Zy(){if(--qf===0&&kl!==null){io!==null&&(io.status="fulfilled");var r=kl;kl=null,ro=0,io=null;for(var s=0;s<r.length;s++)(0,r[s])()}}function eA(r,s){var o=[],c={status:"pending",value:null,reason:null,then:function(h){o.push(h)}};return r.then(function(){c.status="fulfilled",c.value=s;for(var h=0;h<o.length;h++)(0,o[h])(s)},function(h){for(c.status="rejected",c.reason=h,h=0;h<o.length;h++)(0,o[h])(void 0)}),c}var Jy=Z.S;Z.S=function(r,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&Jw(r,s),Jy!==null&&Jy(r,s)};var oa=ae(null);function Ff(){var r=oa.current;return r!==null?r:dt.pooledCache}function Bu(r,s){s===null?ce(oa,oa.current):ce(oa,s.pool)}function e0(){var r=Ff();return r===null?null:{parent:Ut._currentValue,pool:r}}var Vl=Error(i(460)),t0=Error(i(474)),qu=Error(i(542)),Hf={then:function(){}};function n0(r){return r=r.status,r==="fulfilled"||r==="rejected"}function Fu(){}function r0(r,s,o){switch(o=r[o],o===void 0?r.push(s):o!==s&&(s.then(Fu,Fu),s=o),s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,s0(r),r;default:if(typeof s.status=="string")s.then(Fu,Fu);else{if(r=dt,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=s,r.status="pending",r.then(function(c){if(s.status==="pending"){var h=s;h.status="fulfilled",h.value=c}},function(c){if(s.status==="pending"){var h=s;h.status="rejected",h.reason=c}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,s0(r),r}throw Ll=s,Vl}}var Ll=null;function i0(){if(Ll===null)throw Error(i(459));var r=Ll;return Ll=null,r}function s0(r){if(r===Vl||r===qu)throw Error(i(483))}var zi=!1;function Gf(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function $f(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Bi(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function qi(r,s,o){var c=r.updateQueue;if(c===null)return null;if(c=c.shared,(tt&2)!==0){var h=c.pending;return h===null?s.next=s:(s.next=h.next,h.next=s),c.pending=s,s=Mu(r),Gy(r,null,o),s}return Pu(r,c,s,o),Mu(r)}function Ul(r,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194048)!==0)){var c=s.lanes;c&=r.pendingLanes,o|=c,s.lanes=o,fl(r,o)}}function Yf(r,s){var o=r.updateQueue,c=r.alternate;if(c!==null&&(c=c.updateQueue,o===c)){var h=null,g=null;if(o=o.firstBaseUpdate,o!==null){do{var x={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};g===null?h=g=x:g=g.next=x,o=o.next}while(o!==null);g===null?h=g=s:g=g.next=s}else h=g=s;o={baseState:c.baseState,firstBaseUpdate:h,lastBaseUpdate:g,shared:c.shared,callbacks:c.callbacks},r.updateQueue=o;return}r=o.lastBaseUpdate,r===null?o.firstBaseUpdate=s:r.next=s,o.lastBaseUpdate=s}var Kf=!1;function zl(){if(Kf){var r=io;if(r!==null)throw r}}function Bl(r,s,o,c){Kf=!1;var h=r.updateQueue;zi=!1;var g=h.firstBaseUpdate,x=h.lastBaseUpdate,w=h.shared.pending;if(w!==null){h.shared.pending=null;var I=w,G=I.next;I.next=null,x===null?g=G:x.next=G,x=I;var J=r.alternate;J!==null&&(J=J.updateQueue,w=J.lastBaseUpdate,w!==x&&(w===null?J.firstBaseUpdate=G:w.next=G,J.lastBaseUpdate=I))}if(g!==null){var ie=h.baseState;x=0,J=G=I=null,w=g;do{var Y=w.lane&-536870913,K=Y!==w.lane;if(K?(Ye&Y)===Y:(c&Y)===Y){Y!==0&&Y===ro&&(Kf=!0),J!==null&&(J=J.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var Ne=r,Te=w;Y=s;var lt=o;switch(Te.tag){case 1:if(Ne=Te.payload,typeof Ne=="function"){ie=Ne.call(lt,ie,Y);break e}ie=Ne;break e;case 3:Ne.flags=Ne.flags&-65537|128;case 0:if(Ne=Te.payload,Y=typeof Ne=="function"?Ne.call(lt,ie,Y):Ne,Y==null)break e;ie=v({},ie,Y);break e;case 2:zi=!0}}Y=w.callback,Y!==null&&(r.flags|=64,K&&(r.flags|=8192),K=h.callbacks,K===null?h.callbacks=[Y]:K.push(Y))}else K={lane:Y,tag:w.tag,payload:w.payload,callback:w.callback,next:null},J===null?(G=J=K,I=ie):J=J.next=K,x|=Y;if(w=w.next,w===null){if(w=h.shared.pending,w===null)break;K=w,w=K.next,K.next=null,h.lastBaseUpdate=K,h.shared.pending=null}}while(!0);J===null&&(I=ie),h.baseState=I,h.firstBaseUpdate=G,h.lastBaseUpdate=J,g===null&&(h.shared.lanes=0),Wi|=x,r.lanes=x,r.memoizedState=ie}}function a0(r,s){if(typeof r!="function")throw Error(i(191,r));r.call(s)}function o0(r,s){var o=r.callbacks;if(o!==null)for(r.callbacks=null,r=0;r<o.length;r++)a0(o[r],s)}var so=ae(null),Hu=ae(0);function l0(r,s){r=gi,ce(Hu,r),ce(so,s),gi=r|s.baseLanes}function Qf(){ce(Hu,gi),ce(so,so.current)}function Wf(){gi=Hu.current,he(so),he(Hu)}var Fi=0,Me=null,at=null,Dt=null,Gu=!1,ao=!1,la=!1,$u=0,ql=0,oo=null,tA=0;function Nt(){throw Error(i(321))}function Xf(r,s){if(s===null)return!1;for(var o=0;o<s.length&&o<r.length;o++)if(!kn(r[o],s[o]))return!1;return!0}function Zf(r,s,o,c,h,g){return Fi=g,Me=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Z.H=r===null||r.memoizedState===null?G0:$0,la=!1,g=o(c,h),la=!1,ao&&(g=u0(s,o,c,h)),c0(r),g}function c0(r){Z.H=Zu;var s=at!==null&&at.next!==null;if(Fi=0,Dt=at=Me=null,Gu=!1,ql=0,oo=null,s)throw Error(i(300));r===null||$t||(r=r.dependencies,r!==null&&Uu(r)&&($t=!0))}function u0(r,s,o,c){Me=r;var h=0;do{if(ao&&(oo=null),ql=0,ao=!1,25<=h)throw Error(i(301));if(h+=1,Dt=at=null,r.updateQueue!=null){var g=r.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}Z.H=lA,g=s(o,c)}while(ao);return g}function nA(){var r=Z.H,s=r.useState()[0];return s=typeof s.then=="function"?Fl(s):s,r=r.useState()[0],(at!==null?at.memoizedState:null)!==r&&(Me.flags|=1024),s}function Jf(){var r=$u!==0;return $u=0,r}function em(r,s,o){s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~o}function tm(r){if(Gu){for(r=r.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Gu=!1}Fi=0,Dt=at=Me=null,ao=!1,ql=$u=0,oo=null}function Sn(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Dt===null?Me.memoizedState=Dt=r:Dt=Dt.next=r,Dt}function jt(){if(at===null){var r=Me.alternate;r=r!==null?r.memoizedState:null}else r=at.next;var s=Dt===null?Me.memoizedState:Dt.next;if(s!==null)Dt=s,at=r;else{if(r===null)throw Me.alternate===null?Error(i(467)):Error(i(310));at=r,r={memoizedState:at.memoizedState,baseState:at.baseState,baseQueue:at.baseQueue,queue:at.queue,next:null},Dt===null?Me.memoizedState=Dt=r:Dt=Dt.next=r}return Dt}function nm(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Fl(r){var s=ql;return ql+=1,oo===null&&(oo=[]),r=r0(oo,r,s),s=Me,(Dt===null?s.memoizedState:Dt.next)===null&&(s=s.alternate,Z.H=s===null||s.memoizedState===null?G0:$0),r}function Yu(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return Fl(r);if(r.$$typeof===U)return un(r)}throw Error(i(438,String(r)))}function rm(r){var s=null,o=Me.updateQueue;if(o!==null&&(s=o.memoCache),s==null){var c=Me.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(s={data:c.data.map(function(h){return h.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),o===null&&(o=nm(),Me.updateQueue=o),o.memoCache=s,o=s.data[s.index],o===void 0)for(o=s.data[s.index]=Array(r),c=0;c<r;c++)o[c]=M;return s.index++,o}function ui(r,s){return typeof s=="function"?s(r):s}function Ku(r){var s=jt();return im(s,at,r)}function im(r,s,o){var c=r.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=o;var h=r.baseQueue,g=c.pending;if(g!==null){if(h!==null){var x=h.next;h.next=g.next,g.next=x}s.baseQueue=h=g,c.pending=null}if(g=r.baseState,h===null)r.memoizedState=g;else{s=h.next;var w=x=null,I=null,G=s,J=!1;do{var ie=G.lane&-536870913;if(ie!==G.lane?(Ye&ie)===ie:(Fi&ie)===ie){var Y=G.revertLane;if(Y===0)I!==null&&(I=I.next={lane:0,revertLane:0,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),ie===ro&&(J=!0);else if((Fi&Y)===Y){G=G.next,Y===ro&&(J=!0);continue}else ie={lane:0,revertLane:G.revertLane,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},I===null?(w=I=ie,x=g):I=I.next=ie,Me.lanes|=Y,Wi|=Y;ie=G.action,la&&o(g,ie),g=G.hasEagerState?G.eagerState:o(g,ie)}else Y={lane:ie,revertLane:G.revertLane,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},I===null?(w=I=Y,x=g):I=I.next=Y,Me.lanes|=ie,Wi|=ie;G=G.next}while(G!==null&&G!==s);if(I===null?x=g:I.next=w,!kn(g,r.memoizedState)&&($t=!0,J&&(o=io,o!==null)))throw o;r.memoizedState=g,r.baseState=x,r.baseQueue=I,c.lastRenderedState=g}return h===null&&(c.lanes=0),[r.memoizedState,c.dispatch]}function sm(r){var s=jt(),o=s.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=r;var c=o.dispatch,h=o.pending,g=s.memoizedState;if(h!==null){o.pending=null;var x=h=h.next;do g=r(g,x.action),x=x.next;while(x!==h);kn(g,s.memoizedState)||($t=!0),s.memoizedState=g,s.baseQueue===null&&(s.baseState=g),o.lastRenderedState=g}return[g,c]}function d0(r,s,o){var c=Me,h=jt(),g=Xe;if(g){if(o===void 0)throw Error(i(407));o=o()}else o=s();var x=!kn((at||h).memoizedState,o);x&&(h.memoizedState=o,$t=!0),h=h.queue;var w=m0.bind(null,c,h,r);if(Hl(2048,8,w,[r]),h.getSnapshot!==s||x||Dt!==null&&Dt.memoizedState.tag&1){if(c.flags|=2048,lo(9,Qu(),f0.bind(null,c,h,o,s),null),dt===null)throw Error(i(349));g||(Fi&124)!==0||h0(c,s,o)}return o}function h0(r,s,o){r.flags|=16384,r={getSnapshot:s,value:o},s=Me.updateQueue,s===null?(s=nm(),Me.updateQueue=s,s.stores=[r]):(o=s.stores,o===null?s.stores=[r]:o.push(r))}function f0(r,s,o,c){s.value=o,s.getSnapshot=c,p0(s)&&g0(r)}function m0(r,s,o){return o(function(){p0(s)&&g0(r)})}function p0(r){var s=r.getSnapshot;r=r.value;try{var o=s();return!kn(r,o)}catch{return!0}}function g0(r){var s=Ja(r,2);s!==null&&qn(s,r,2)}function am(r){var s=Sn();if(typeof r=="function"){var o=r;if(r=o(),la){Pn(!0);try{o()}finally{Pn(!1)}}}return s.memoizedState=s.baseState=r,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ui,lastRenderedState:r},s}function y0(r,s,o,c){return r.baseState=o,im(r,at,typeof c=="function"?c:ui)}function rA(r,s,o,c,h){if(Xu(r))throw Error(i(485));if(r=s.action,r!==null){var g={payload:h,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(x){g.listeners.push(x)}};Z.T!==null?o(!0):g.isTransition=!1,c(g),o=s.pending,o===null?(g.next=s.pending=g,v0(s,g)):(g.next=o.next,s.pending=o.next=g)}}function v0(r,s){var o=s.action,c=s.payload,h=r.state;if(s.isTransition){var g=Z.T,x={};Z.T=x;try{var w=o(h,c),I=Z.S;I!==null&&I(x,w),_0(r,s,w)}catch(G){om(r,s,G)}finally{Z.T=g}}else try{g=o(h,c),_0(r,s,g)}catch(G){om(r,s,G)}}function _0(r,s,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(c){b0(r,s,c)},function(c){return om(r,s,c)}):b0(r,s,o)}function b0(r,s,o){s.status="fulfilled",s.value=o,E0(s),r.state=o,s=r.pending,s!==null&&(o=s.next,o===s?r.pending=null:(o=o.next,s.next=o,v0(r,o)))}function om(r,s,o){var c=r.pending;if(r.pending=null,c!==null){c=c.next;do s.status="rejected",s.reason=o,E0(s),s=s.next;while(s!==c)}r.action=null}function E0(r){r=r.listeners;for(var s=0;s<r.length;s++)(0,r[s])()}function x0(r,s){return s}function T0(r,s){if(Xe){var o=dt.formState;if(o!==null){e:{var c=Me;if(Xe){if(wt){t:{for(var h=wt,g=Or;h.nodeType!==8;){if(!g){h=null;break t}if(h=dr(h.nextSibling),h===null){h=null;break t}}g=h.data,h=g==="F!"||g==="F"?h:null}if(h){wt=dr(h.nextSibling),c=h.data==="F!";break e}}ia(c)}c=!1}c&&(s=o[0])}}return o=Sn(),o.memoizedState=o.baseState=s,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:x0,lastRenderedState:s},o.queue=c,o=q0.bind(null,Me,c),c.dispatch=o,c=am(!1),g=hm.bind(null,Me,!1,c.queue),c=Sn(),h={state:s,dispatch:null,action:r,pending:null},c.queue=h,o=rA.bind(null,Me,h,g,o),h.dispatch=o,c.memoizedState=r,[s,o,!1]}function w0(r){var s=jt();return A0(s,at,r)}function A0(r,s,o){if(s=im(r,s,x0)[0],r=Ku(ui)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var c=Fl(s)}catch(x){throw x===Vl?qu:x}else c=s;s=jt();var h=s.queue,g=h.dispatch;return o!==s.memoizedState&&(Me.flags|=2048,lo(9,Qu(),iA.bind(null,h,o),null)),[c,g,r]}function iA(r,s){r.action=s}function S0(r){var s=jt(),o=at;if(o!==null)return A0(s,o,r);jt(),s=s.memoizedState,o=jt();var c=o.queue.dispatch;return o.memoizedState=r,[s,c,!1]}function lo(r,s,o,c){return r={tag:r,create:o,deps:c,inst:s,next:null},s=Me.updateQueue,s===null&&(s=nm(),Me.updateQueue=s),o=s.lastEffect,o===null?s.lastEffect=r.next=r:(c=o.next,o.next=r,r.next=c,s.lastEffect=r),r}function Qu(){return{destroy:void 0,resource:void 0}}function N0(){return jt().memoizedState}function Wu(r,s,o,c){var h=Sn();c=c===void 0?null:c,Me.flags|=r,h.memoizedState=lo(1|s,Qu(),o,c)}function Hl(r,s,o,c){var h=jt();c=c===void 0?null:c;var g=h.memoizedState.inst;at!==null&&c!==null&&Xf(c,at.memoizedState.deps)?h.memoizedState=lo(s,g,o,c):(Me.flags|=r,h.memoizedState=lo(1|s,g,o,c))}function C0(r,s){Wu(8390656,8,r,s)}function R0(r,s){Hl(2048,8,r,s)}function I0(r,s){return Hl(4,2,r,s)}function O0(r,s){return Hl(4,4,r,s)}function D0(r,s){if(typeof s=="function"){r=r();var o=s(r);return function(){typeof o=="function"?o():s(null)}}if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function j0(r,s,o){o=o!=null?o.concat([r]):null,Hl(4,4,D0.bind(null,s,r),o)}function lm(){}function P0(r,s){var o=jt();s=s===void 0?null:s;var c=o.memoizedState;return s!==null&&Xf(s,c[1])?c[0]:(o.memoizedState=[r,s],r)}function M0(r,s){var o=jt();s=s===void 0?null:s;var c=o.memoizedState;if(s!==null&&Xf(s,c[1]))return c[0];if(c=r(),la){Pn(!0);try{r()}finally{Pn(!1)}}return o.memoizedState=[c,s],c}function cm(r,s,o){return o===void 0||(Fi&1073741824)!==0?r.memoizedState=s:(r.memoizedState=o,r=Lv(),Me.lanes|=r,Wi|=r,o)}function k0(r,s,o,c){return kn(o,s)?o:so.current!==null?(r=cm(r,o,c),kn(r,s)||($t=!0),r):(Fi&42)===0?($t=!0,r.memoizedState=o):(r=Lv(),Me.lanes|=r,Wi|=r,s)}function V0(r,s,o,c,h){var g=ue.p;ue.p=g!==0&&8>g?g:8;var x=Z.T,w={};Z.T=w,hm(r,!1,s,o);try{var I=h(),G=Z.S;if(G!==null&&G(w,I),I!==null&&typeof I=="object"&&typeof I.then=="function"){var J=eA(I,c);Gl(r,s,J,Bn(r))}else Gl(r,s,c,Bn(r))}catch(ie){Gl(r,s,{then:function(){},status:"rejected",reason:ie},Bn())}finally{ue.p=g,Z.T=x}}function sA(){}function um(r,s,o,c){if(r.tag!==5)throw Error(i(476));var h=L0(r).queue;V0(r,h,s,ye,o===null?sA:function(){return U0(r),o(c)})}function L0(r){var s=r.memoizedState;if(s!==null)return s;s={memoizedState:ye,baseState:ye,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ui,lastRenderedState:ye},next:null};var o={};return s.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ui,lastRenderedState:o},next:null},r.memoizedState=s,r=r.alternate,r!==null&&(r.memoizedState=s),s}function U0(r){var s=L0(r).next.queue;Gl(r,s,{},Bn())}function dm(){return un(cc)}function z0(){return jt().memoizedState}function B0(){return jt().memoizedState}function aA(r){for(var s=r.return;s!==null;){switch(s.tag){case 24:case 3:var o=Bn();r=Bi(o);var c=qi(s,r,o);c!==null&&(qn(c,s,o),Ul(c,s,o)),s={cache:Bf()},r.payload=s;return}s=s.return}}function oA(r,s,o){var c=Bn();o={lane:c,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},Xu(r)?F0(s,o):(o=Of(r,s,o,c),o!==null&&(qn(o,r,c),H0(o,s,c)))}function q0(r,s,o){var c=Bn();Gl(r,s,o,c)}function Gl(r,s,o,c){var h={lane:c,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(Xu(r))F0(s,h);else{var g=r.alternate;if(r.lanes===0&&(g===null||g.lanes===0)&&(g=s.lastRenderedReducer,g!==null))try{var x=s.lastRenderedState,w=g(x,o);if(h.hasEagerState=!0,h.eagerState=w,kn(w,x))return Pu(r,s,h,0),dt===null&&ju(),!1}catch{}finally{}if(o=Of(r,s,h,c),o!==null)return qn(o,r,c),H0(o,s,c),!0}return!1}function hm(r,s,o,c){if(c={lane:2,revertLane:Hm(),action:c,hasEagerState:!1,eagerState:null,next:null},Xu(r)){if(s)throw Error(i(479))}else s=Of(r,o,c,2),s!==null&&qn(s,r,2)}function Xu(r){var s=r.alternate;return r===Me||s!==null&&s===Me}function F0(r,s){ao=Gu=!0;var o=r.pending;o===null?s.next=s:(s.next=o.next,o.next=s),r.pending=s}function H0(r,s,o){if((o&4194048)!==0){var c=s.lanes;c&=r.pendingLanes,o|=c,s.lanes=o,fl(r,o)}}var Zu={readContext:un,use:Yu,useCallback:Nt,useContext:Nt,useEffect:Nt,useImperativeHandle:Nt,useLayoutEffect:Nt,useInsertionEffect:Nt,useMemo:Nt,useReducer:Nt,useRef:Nt,useState:Nt,useDebugValue:Nt,useDeferredValue:Nt,useTransition:Nt,useSyncExternalStore:Nt,useId:Nt,useHostTransitionStatus:Nt,useFormState:Nt,useActionState:Nt,useOptimistic:Nt,useMemoCache:Nt,useCacheRefresh:Nt},G0={readContext:un,use:Yu,useCallback:function(r,s){return Sn().memoizedState=[r,s===void 0?null:s],r},useContext:un,useEffect:C0,useImperativeHandle:function(r,s,o){o=o!=null?o.concat([r]):null,Wu(4194308,4,D0.bind(null,s,r),o)},useLayoutEffect:function(r,s){return Wu(4194308,4,r,s)},useInsertionEffect:function(r,s){Wu(4,2,r,s)},useMemo:function(r,s){var o=Sn();s=s===void 0?null:s;var c=r();if(la){Pn(!0);try{r()}finally{Pn(!1)}}return o.memoizedState=[c,s],c},useReducer:function(r,s,o){var c=Sn();if(o!==void 0){var h=o(s);if(la){Pn(!0);try{o(s)}finally{Pn(!1)}}}else h=s;return c.memoizedState=c.baseState=h,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:h},c.queue=r,r=r.dispatch=oA.bind(null,Me,r),[c.memoizedState,r]},useRef:function(r){var s=Sn();return r={current:r},s.memoizedState=r},useState:function(r){r=am(r);var s=r.queue,o=q0.bind(null,Me,s);return s.dispatch=o,[r.memoizedState,o]},useDebugValue:lm,useDeferredValue:function(r,s){var o=Sn();return cm(o,r,s)},useTransition:function(){var r=am(!1);return r=V0.bind(null,Me,r.queue,!0,!1),Sn().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,s,o){var c=Me,h=Sn();if(Xe){if(o===void 0)throw Error(i(407));o=o()}else{if(o=s(),dt===null)throw Error(i(349));(Ye&124)!==0||h0(c,s,o)}h.memoizedState=o;var g={value:o,getSnapshot:s};return h.queue=g,C0(m0.bind(null,c,g,r),[r]),c.flags|=2048,lo(9,Qu(),f0.bind(null,c,g,o,s),null),o},useId:function(){var r=Sn(),s=dt.identifierPrefix;if(Xe){var o=oi,c=ai;o=(c&~(1<<32-cn(c)-1)).toString(32)+o,s="«"+s+"R"+o,o=$u++,0<o&&(s+="H"+o.toString(32)),s+="»"}else o=tA++,s="«"+s+"r"+o.toString(32)+"»";return r.memoizedState=s},useHostTransitionStatus:dm,useFormState:T0,useActionState:T0,useOptimistic:function(r){var s=Sn();s.memoizedState=s.baseState=r;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=o,s=hm.bind(null,Me,!0,o),o.dispatch=s,[r,s]},useMemoCache:rm,useCacheRefresh:function(){return Sn().memoizedState=aA.bind(null,Me)}},$0={readContext:un,use:Yu,useCallback:P0,useContext:un,useEffect:R0,useImperativeHandle:j0,useInsertionEffect:I0,useLayoutEffect:O0,useMemo:M0,useReducer:Ku,useRef:N0,useState:function(){return Ku(ui)},useDebugValue:lm,useDeferredValue:function(r,s){var o=jt();return k0(o,at.memoizedState,r,s)},useTransition:function(){var r=Ku(ui)[0],s=jt().memoizedState;return[typeof r=="boolean"?r:Fl(r),s]},useSyncExternalStore:d0,useId:z0,useHostTransitionStatus:dm,useFormState:w0,useActionState:w0,useOptimistic:function(r,s){var o=jt();return y0(o,at,r,s)},useMemoCache:rm,useCacheRefresh:B0},lA={readContext:un,use:Yu,useCallback:P0,useContext:un,useEffect:R0,useImperativeHandle:j0,useInsertionEffect:I0,useLayoutEffect:O0,useMemo:M0,useReducer:sm,useRef:N0,useState:function(){return sm(ui)},useDebugValue:lm,useDeferredValue:function(r,s){var o=jt();return at===null?cm(o,r,s):k0(o,at.memoizedState,r,s)},useTransition:function(){var r=sm(ui)[0],s=jt().memoizedState;return[typeof r=="boolean"?r:Fl(r),s]},useSyncExternalStore:d0,useId:z0,useHostTransitionStatus:dm,useFormState:S0,useActionState:S0,useOptimistic:function(r,s){var o=jt();return at!==null?y0(o,at,r,s):(o.baseState=r,[r,o.queue.dispatch])},useMemoCache:rm,useCacheRefresh:B0},co=null,$l=0;function Ju(r){var s=$l;return $l+=1,co===null&&(co=[]),r0(co,r,s)}function Yl(r,s){s=s.props.ref,r.ref=s!==void 0?s:null}function ed(r,s){throw s.$$typeof===b?Error(i(525)):(r=Object.prototype.toString.call(s),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r)))}function Y0(r){var s=r._init;return s(r._payload)}function K0(r){function s(q,L){if(r){var H=q.deletions;H===null?(q.deletions=[L],q.flags|=16):H.push(L)}}function o(q,L){if(!r)return null;for(;L!==null;)s(q,L),L=L.sibling;return null}function c(q){for(var L=new Map;q!==null;)q.key!==null?L.set(q.key,q):L.set(q.index,q),q=q.sibling;return L}function h(q,L){return q=si(q,L),q.index=0,q.sibling=null,q}function g(q,L,H){return q.index=H,r?(H=q.alternate,H!==null?(H=H.index,H<L?(q.flags|=67108866,L):H):(q.flags|=67108866,L)):(q.flags|=1048576,L)}function x(q){return r&&q.alternate===null&&(q.flags|=67108866),q}function w(q,L,H,te){return L===null||L.tag!==6?(L=jf(H,q.mode,te),L.return=q,L):(L=h(L,H),L.return=q,L)}function I(q,L,H,te){var ge=H.type;return ge===A?J(q,L,H.props.children,te,H.key):L!==null&&(L.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===C&&Y0(ge)===L.type)?(L=h(L,H.props),Yl(L,H),L.return=q,L):(L=ku(H.type,H.key,H.props,null,q.mode,te),Yl(L,H),L.return=q,L)}function G(q,L,H,te){return L===null||L.tag!==4||L.stateNode.containerInfo!==H.containerInfo||L.stateNode.implementation!==H.implementation?(L=Pf(H,q.mode,te),L.return=q,L):(L=h(L,H.children||[]),L.return=q,L)}function J(q,L,H,te,ge){return L===null||L.tag!==7?(L=ea(H,q.mode,te,ge),L.return=q,L):(L=h(L,H),L.return=q,L)}function ie(q,L,H){if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return L=jf(""+L,q.mode,H),L.return=q,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case T:return H=ku(L.type,L.key,L.props,null,q.mode,H),Yl(H,L),H.return=q,H;case N:return L=Pf(L,q.mode,H),L.return=q,L;case C:var te=L._init;return L=te(L._payload),ie(q,L,H)}if(Pe(L)||B(L))return L=ea(L,q.mode,H,null),L.return=q,L;if(typeof L.then=="function")return ie(q,Ju(L),H);if(L.$$typeof===U)return ie(q,zu(q,L),H);ed(q,L)}return null}function Y(q,L,H,te){var ge=L!==null?L.key:null;if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return ge!==null?null:w(q,L,""+H,te);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case T:return H.key===ge?I(q,L,H,te):null;case N:return H.key===ge?G(q,L,H,te):null;case C:return ge=H._init,H=ge(H._payload),Y(q,L,H,te)}if(Pe(H)||B(H))return ge!==null?null:J(q,L,H,te,null);if(typeof H.then=="function")return Y(q,L,Ju(H),te);if(H.$$typeof===U)return Y(q,L,zu(q,H),te);ed(q,H)}return null}function K(q,L,H,te,ge){if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return q=q.get(H)||null,w(L,q,""+te,ge);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case T:return q=q.get(te.key===null?H:te.key)||null,I(L,q,te,ge);case N:return q=q.get(te.key===null?H:te.key)||null,G(L,q,te,ge);case C:var Le=te._init;return te=Le(te._payload),K(q,L,H,te,ge)}if(Pe(te)||B(te))return q=q.get(H)||null,J(L,q,te,ge,null);if(typeof te.then=="function")return K(q,L,H,Ju(te),ge);if(te.$$typeof===U)return K(q,L,H,zu(L,te),ge);ed(L,te)}return null}function Ne(q,L,H,te){for(var ge=null,Le=null,be=L,we=L=0,Kt=null;be!==null&&we<H.length;we++){be.index>we?(Kt=be,be=null):Kt=be.sibling;var We=Y(q,be,H[we],te);if(We===null){be===null&&(be=Kt);break}r&&be&&We.alternate===null&&s(q,be),L=g(We,L,we),Le===null?ge=We:Le.sibling=We,Le=We,be=Kt}if(we===H.length)return o(q,be),Xe&&na(q,we),ge;if(be===null){for(;we<H.length;we++)be=ie(q,H[we],te),be!==null&&(L=g(be,L,we),Le===null?ge=be:Le.sibling=be,Le=be);return Xe&&na(q,we),ge}for(be=c(be);we<H.length;we++)Kt=K(be,q,we,H[we],te),Kt!==null&&(r&&Kt.alternate!==null&&be.delete(Kt.key===null?we:Kt.key),L=g(Kt,L,we),Le===null?ge=Kt:Le.sibling=Kt,Le=Kt);return r&&be.forEach(function(ss){return s(q,ss)}),Xe&&na(q,we),ge}function Te(q,L,H,te){if(H==null)throw Error(i(151));for(var ge=null,Le=null,be=L,we=L=0,Kt=null,We=H.next();be!==null&&!We.done;we++,We=H.next()){be.index>we?(Kt=be,be=null):Kt=be.sibling;var ss=Y(q,be,We.value,te);if(ss===null){be===null&&(be=Kt);break}r&&be&&ss.alternate===null&&s(q,be),L=g(ss,L,we),Le===null?ge=ss:Le.sibling=ss,Le=ss,be=Kt}if(We.done)return o(q,be),Xe&&na(q,we),ge;if(be===null){for(;!We.done;we++,We=H.next())We=ie(q,We.value,te),We!==null&&(L=g(We,L,we),Le===null?ge=We:Le.sibling=We,Le=We);return Xe&&na(q,we),ge}for(be=c(be);!We.done;we++,We=H.next())We=K(be,q,we,We.value,te),We!==null&&(r&&We.alternate!==null&&be.delete(We.key===null?we:We.key),L=g(We,L,we),Le===null?ge=We:Le.sibling=We,Le=We);return r&&be.forEach(function(cS){return s(q,cS)}),Xe&&na(q,we),ge}function lt(q,L,H,te){if(typeof H=="object"&&H!==null&&H.type===A&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case T:e:{for(var ge=H.key;L!==null;){if(L.key===ge){if(ge=H.type,ge===A){if(L.tag===7){o(q,L.sibling),te=h(L,H.props.children),te.return=q,q=te;break e}}else if(L.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===C&&Y0(ge)===L.type){o(q,L.sibling),te=h(L,H.props),Yl(te,H),te.return=q,q=te;break e}o(q,L);break}else s(q,L);L=L.sibling}H.type===A?(te=ea(H.props.children,q.mode,te,H.key),te.return=q,q=te):(te=ku(H.type,H.key,H.props,null,q.mode,te),Yl(te,H),te.return=q,q=te)}return x(q);case N:e:{for(ge=H.key;L!==null;){if(L.key===ge)if(L.tag===4&&L.stateNode.containerInfo===H.containerInfo&&L.stateNode.implementation===H.implementation){o(q,L.sibling),te=h(L,H.children||[]),te.return=q,q=te;break e}else{o(q,L);break}else s(q,L);L=L.sibling}te=Pf(H,q.mode,te),te.return=q,q=te}return x(q);case C:return ge=H._init,H=ge(H._payload),lt(q,L,H,te)}if(Pe(H))return Ne(q,L,H,te);if(B(H)){if(ge=B(H),typeof ge!="function")throw Error(i(150));return H=ge.call(H),Te(q,L,H,te)}if(typeof H.then=="function")return lt(q,L,Ju(H),te);if(H.$$typeof===U)return lt(q,L,zu(q,H),te);ed(q,H)}return typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint"?(H=""+H,L!==null&&L.tag===6?(o(q,L.sibling),te=h(L,H),te.return=q,q=te):(o(q,L),te=jf(H,q.mode,te),te.return=q,q=te),x(q)):o(q,L)}return function(q,L,H,te){try{$l=0;var ge=lt(q,L,H,te);return co=null,ge}catch(be){if(be===Vl||be===qu)throw be;var Le=Vn(29,be,null,q.mode);return Le.lanes=te,Le.return=q,Le}finally{}}}var uo=K0(!0),Q0=K0(!1),Jn=ae(null),Dr=null;function Hi(r){var s=r.alternate;ce(zt,zt.current&1),ce(Jn,r),Dr===null&&(s===null||so.current!==null||s.memoizedState!==null)&&(Dr=r)}function W0(r){if(r.tag===22){if(ce(zt,zt.current),ce(Jn,r),Dr===null){var s=r.alternate;s!==null&&s.memoizedState!==null&&(Dr=r)}}else Gi()}function Gi(){ce(zt,zt.current),ce(Jn,Jn.current)}function di(r){he(Jn),Dr===r&&(Dr=null),he(zt)}var zt=ae(0);function td(r){for(var s=r;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||np(o)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function fm(r,s,o,c){s=r.memoizedState,o=o(c,s),o=o==null?s:v({},s,o),r.memoizedState=o,r.lanes===0&&(r.updateQueue.baseState=o)}var mm={enqueueSetState:function(r,s,o){r=r._reactInternals;var c=Bn(),h=Bi(c);h.payload=s,o!=null&&(h.callback=o),s=qi(r,h,c),s!==null&&(qn(s,r,c),Ul(s,r,c))},enqueueReplaceState:function(r,s,o){r=r._reactInternals;var c=Bn(),h=Bi(c);h.tag=1,h.payload=s,o!=null&&(h.callback=o),s=qi(r,h,c),s!==null&&(qn(s,r,c),Ul(s,r,c))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var o=Bn(),c=Bi(o);c.tag=2,s!=null&&(c.callback=s),s=qi(r,c,o),s!==null&&(qn(s,r,o),Ul(s,r,o))}};function X0(r,s,o,c,h,g,x){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(c,g,x):s.prototype&&s.prototype.isPureReactComponent?!Rl(o,c)||!Rl(h,g):!0}function Z0(r,s,o,c){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,c),s.state!==r&&mm.enqueueReplaceState(s,s.state,null)}function ca(r,s){var o=s;if("ref"in s){o={};for(var c in s)c!=="ref"&&(o[c]=s[c])}if(r=r.defaultProps){o===s&&(o=v({},o));for(var h in r)o[h]===void 0&&(o[h]=r[h])}return o}var nd=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)};function J0(r){nd(r)}function ev(r){console.error(r)}function tv(r){nd(r)}function rd(r,s){try{var o=r.onUncaughtError;o(s.value,{componentStack:s.stack})}catch(c){setTimeout(function(){throw c})}}function nv(r,s,o){try{var c=r.onCaughtError;c(o.value,{componentStack:o.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function pm(r,s,o){return o=Bi(o),o.tag=3,o.payload={element:null},o.callback=function(){rd(r,s)},o}function rv(r){return r=Bi(r),r.tag=3,r}function iv(r,s,o,c){var h=o.type.getDerivedStateFromError;if(typeof h=="function"){var g=c.value;r.payload=function(){return h(g)},r.callback=function(){nv(s,o,c)}}var x=o.stateNode;x!==null&&typeof x.componentDidCatch=="function"&&(r.callback=function(){nv(s,o,c),typeof h!="function"&&(Xi===null?Xi=new Set([this]):Xi.add(this));var w=c.stack;this.componentDidCatch(c.value,{componentStack:w!==null?w:""})})}function cA(r,s,o,c,h){if(o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(s=o.alternate,s!==null&&Pl(s,o,h,!0),o=Jn.current,o!==null){switch(o.tag){case 13:return Dr===null?Um():o.alternate===null&&At===0&&(At=3),o.flags&=-257,o.flags|=65536,o.lanes=h,c===Hf?o.flags|=16384:(s=o.updateQueue,s===null?o.updateQueue=new Set([c]):s.add(c),Bm(r,c,h)),!1;case 22:return o.flags|=65536,c===Hf?o.flags|=16384:(s=o.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([c])},o.updateQueue=s):(o=s.retryQueue,o===null?s.retryQueue=new Set([c]):o.add(c)),Bm(r,c,h)),!1}throw Error(i(435,o.tag))}return Bm(r,c,h),Um(),!1}if(Xe)return s=Jn.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=h,c!==Vf&&(r=Error(i(422),{cause:c}),jl(Qn(r,o)))):(c!==Vf&&(s=Error(i(423),{cause:c}),jl(Qn(s,o))),r=r.current.alternate,r.flags|=65536,h&=-h,r.lanes|=h,c=Qn(c,o),h=pm(r.stateNode,c,h),Yf(r,h),At!==4&&(At=2)),!1;var g=Error(i(520),{cause:c});if(g=Qn(g,o),ec===null?ec=[g]:ec.push(g),At!==4&&(At=2),s===null)return!0;c=Qn(c,o),o=s;do{switch(o.tag){case 3:return o.flags|=65536,r=h&-h,o.lanes|=r,r=pm(o.stateNode,c,r),Yf(o,r),!1;case 1:if(s=o.type,g=o.stateNode,(o.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Xi===null||!Xi.has(g))))return o.flags|=65536,h&=-h,o.lanes|=h,h=rv(h),iv(h,r,o,c),Yf(o,h),!1}o=o.return}while(o!==null);return!1}var sv=Error(i(461)),$t=!1;function tn(r,s,o,c){s.child=r===null?Q0(s,null,o,c):uo(s,r.child,o,c)}function av(r,s,o,c,h){o=o.render;var g=s.ref;if("ref"in c){var x={};for(var w in c)w!=="ref"&&(x[w]=c[w])}else x=c;return aa(s),c=Zf(r,s,o,x,g,h),w=Jf(),r!==null&&!$t?(em(r,s,h),hi(r,s,h)):(Xe&&w&&Mf(s),s.flags|=1,tn(r,s,c,h),s.child)}function ov(r,s,o,c,h){if(r===null){var g=o.type;return typeof g=="function"&&!Df(g)&&g.defaultProps===void 0&&o.compare===null?(s.tag=15,s.type=g,lv(r,s,g,c,h)):(r=ku(o.type,null,c,s,s.mode,h),r.ref=s.ref,r.return=s,s.child=r)}if(g=r.child,!Tm(r,h)){var x=g.memoizedProps;if(o=o.compare,o=o!==null?o:Rl,o(x,c)&&r.ref===s.ref)return hi(r,s,h)}return s.flags|=1,r=si(g,c),r.ref=s.ref,r.return=s,s.child=r}function lv(r,s,o,c,h){if(r!==null){var g=r.memoizedProps;if(Rl(g,c)&&r.ref===s.ref)if($t=!1,s.pendingProps=c=g,Tm(r,h))(r.flags&131072)!==0&&($t=!0);else return s.lanes=r.lanes,hi(r,s,h)}return gm(r,s,o,c,h)}function cv(r,s,o){var c=s.pendingProps,h=c.children,g=r!==null?r.memoizedState:null;if(c.mode==="hidden"){if((s.flags&128)!==0){if(c=g!==null?g.baseLanes|o:o,r!==null){for(h=s.child=r.child,g=0;h!==null;)g=g|h.lanes|h.childLanes,h=h.sibling;s.childLanes=g&~c}else s.childLanes=0,s.child=null;return uv(r,s,c,o)}if((o&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},r!==null&&Bu(s,g!==null?g.cachePool:null),g!==null?l0(s,g):Qf(),W0(s);else return s.lanes=s.childLanes=536870912,uv(r,s,g!==null?g.baseLanes|o:o,o)}else g!==null?(Bu(s,g.cachePool),l0(s,g),Gi(),s.memoizedState=null):(r!==null&&Bu(s,null),Qf(),Gi());return tn(r,s,h,o),s.child}function uv(r,s,o,c){var h=Ff();return h=h===null?null:{parent:Ut._currentValue,pool:h},s.memoizedState={baseLanes:o,cachePool:h},r!==null&&Bu(s,null),Qf(),W0(s),r!==null&&Pl(r,s,c,!0),null}function id(r,s){var o=s.ref;if(o===null)r!==null&&r.ref!==null&&(s.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(i(284));(r===null||r.ref!==o)&&(s.flags|=4194816)}}function gm(r,s,o,c,h){return aa(s),o=Zf(r,s,o,c,void 0,h),c=Jf(),r!==null&&!$t?(em(r,s,h),hi(r,s,h)):(Xe&&c&&Mf(s),s.flags|=1,tn(r,s,o,h),s.child)}function dv(r,s,o,c,h,g){return aa(s),s.updateQueue=null,o=u0(s,c,o,h),c0(r),c=Jf(),r!==null&&!$t?(em(r,s,g),hi(r,s,g)):(Xe&&c&&Mf(s),s.flags|=1,tn(r,s,o,g),s.child)}function hv(r,s,o,c,h){if(aa(s),s.stateNode===null){var g=eo,x=o.contextType;typeof x=="object"&&x!==null&&(g=un(x)),g=new o(c,g),s.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=mm,s.stateNode=g,g._reactInternals=s,g=s.stateNode,g.props=c,g.state=s.memoizedState,g.refs={},Gf(s),x=o.contextType,g.context=typeof x=="object"&&x!==null?un(x):eo,g.state=s.memoizedState,x=o.getDerivedStateFromProps,typeof x=="function"&&(fm(s,o,x,c),g.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(x=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),x!==g.state&&mm.enqueueReplaceState(g,g.state,null),Bl(s,c,g,h),zl(),g.state=s.memoizedState),typeof g.componentDidMount=="function"&&(s.flags|=4194308),c=!0}else if(r===null){g=s.stateNode;var w=s.memoizedProps,I=ca(o,w);g.props=I;var G=g.context,J=o.contextType;x=eo,typeof J=="object"&&J!==null&&(x=un(J));var ie=o.getDerivedStateFromProps;J=typeof ie=="function"||typeof g.getSnapshotBeforeUpdate=="function",w=s.pendingProps!==w,J||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(w||G!==x)&&Z0(s,g,c,x),zi=!1;var Y=s.memoizedState;g.state=Y,Bl(s,c,g,h),zl(),G=s.memoizedState,w||Y!==G||zi?(typeof ie=="function"&&(fm(s,o,ie,c),G=s.memoizedState),(I=zi||X0(s,o,I,c,Y,G,x))?(J||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(s.flags|=4194308)):(typeof g.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=G),g.props=c,g.state=G,g.context=x,c=I):(typeof g.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{g=s.stateNode,$f(r,s),x=s.memoizedProps,J=ca(o,x),g.props=J,ie=s.pendingProps,Y=g.context,G=o.contextType,I=eo,typeof G=="object"&&G!==null&&(I=un(G)),w=o.getDerivedStateFromProps,(G=typeof w=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(x!==ie||Y!==I)&&Z0(s,g,c,I),zi=!1,Y=s.memoizedState,g.state=Y,Bl(s,c,g,h),zl();var K=s.memoizedState;x!==ie||Y!==K||zi||r!==null&&r.dependencies!==null&&Uu(r.dependencies)?(typeof w=="function"&&(fm(s,o,w,c),K=s.memoizedState),(J=zi||X0(s,o,J,c,Y,K,I)||r!==null&&r.dependencies!==null&&Uu(r.dependencies))?(G||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(c,K,I),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(c,K,I)),typeof g.componentDidUpdate=="function"&&(s.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof g.componentDidUpdate!="function"||x===r.memoizedProps&&Y===r.memoizedState||(s.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||x===r.memoizedProps&&Y===r.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=K),g.props=c,g.state=K,g.context=I,c=J):(typeof g.componentDidUpdate!="function"||x===r.memoizedProps&&Y===r.memoizedState||(s.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||x===r.memoizedProps&&Y===r.memoizedState||(s.flags|=1024),c=!1)}return g=c,id(r,s),c=(s.flags&128)!==0,g||c?(g=s.stateNode,o=c&&typeof o.getDerivedStateFromError!="function"?null:g.render(),s.flags|=1,r!==null&&c?(s.child=uo(s,r.child,null,h),s.child=uo(s,null,o,h)):tn(r,s,o,h),s.memoizedState=g.state,r=s.child):r=hi(r,s,h),r}function fv(r,s,o,c){return Dl(),s.flags|=256,tn(r,s,o,c),s.child}var ym={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function vm(r){return{baseLanes:r,cachePool:e0()}}function _m(r,s,o){return r=r!==null?r.childLanes&~o:0,s&&(r|=er),r}function mv(r,s,o){var c=s.pendingProps,h=!1,g=(s.flags&128)!==0,x;if((x=g)||(x=r!==null&&r.memoizedState===null?!1:(zt.current&2)!==0),x&&(h=!0,s.flags&=-129),x=(s.flags&32)!==0,s.flags&=-33,r===null){if(Xe){if(h?Hi(s):Gi(),Xe){var w=wt,I;if(I=w){e:{for(I=w,w=Or;I.nodeType!==8;){if(!w){w=null;break e}if(I=dr(I.nextSibling),I===null){w=null;break e}}w=I}w!==null?(s.memoizedState={dehydrated:w,treeContext:ta!==null?{id:ai,overflow:oi}:null,retryLane:536870912,hydrationErrors:null},I=Vn(18,null,null,0),I.stateNode=w,I.return=s,s.child=I,En=s,wt=null,I=!0):I=!1}I||ia(s)}if(w=s.memoizedState,w!==null&&(w=w.dehydrated,w!==null))return np(w)?s.lanes=32:s.lanes=536870912,null;di(s)}return w=c.children,c=c.fallback,h?(Gi(),h=s.mode,w=sd({mode:"hidden",children:w},h),c=ea(c,h,o,null),w.return=s,c.return=s,w.sibling=c,s.child=w,h=s.child,h.memoizedState=vm(o),h.childLanes=_m(r,x,o),s.memoizedState=ym,c):(Hi(s),bm(s,w))}if(I=r.memoizedState,I!==null&&(w=I.dehydrated,w!==null)){if(g)s.flags&256?(Hi(s),s.flags&=-257,s=Em(r,s,o)):s.memoizedState!==null?(Gi(),s.child=r.child,s.flags|=128,s=null):(Gi(),h=c.fallback,w=s.mode,c=sd({mode:"visible",children:c.children},w),h=ea(h,w,o,null),h.flags|=2,c.return=s,h.return=s,c.sibling=h,s.child=c,uo(s,r.child,null,o),c=s.child,c.memoizedState=vm(o),c.childLanes=_m(r,x,o),s.memoizedState=ym,s=h);else if(Hi(s),np(w)){if(x=w.nextSibling&&w.nextSibling.dataset,x)var G=x.dgst;x=G,c=Error(i(419)),c.stack="",c.digest=x,jl({value:c,source:null,stack:null}),s=Em(r,s,o)}else if($t||Pl(r,s,o,!1),x=(o&r.childLanes)!==0,$t||x){if(x=dt,x!==null&&(c=o&-o,c=(c&42)!==0?1:Di(c),c=(c&(x.suspendedLanes|o))!==0?0:c,c!==0&&c!==I.retryLane))throw I.retryLane=c,Ja(r,c),qn(x,r,c),sv;w.data==="$?"||Um(),s=Em(r,s,o)}else w.data==="$?"?(s.flags|=192,s.child=r.child,s=null):(r=I.treeContext,wt=dr(w.nextSibling),En=s,Xe=!0,ra=null,Or=!1,r!==null&&(Xn[Zn++]=ai,Xn[Zn++]=oi,Xn[Zn++]=ta,ai=r.id,oi=r.overflow,ta=s),s=bm(s,c.children),s.flags|=4096);return s}return h?(Gi(),h=c.fallback,w=s.mode,I=r.child,G=I.sibling,c=si(I,{mode:"hidden",children:c.children}),c.subtreeFlags=I.subtreeFlags&65011712,G!==null?h=si(G,h):(h=ea(h,w,o,null),h.flags|=2),h.return=s,c.return=s,c.sibling=h,s.child=c,c=h,h=s.child,w=r.child.memoizedState,w===null?w=vm(o):(I=w.cachePool,I!==null?(G=Ut._currentValue,I=I.parent!==G?{parent:G,pool:G}:I):I=e0(),w={baseLanes:w.baseLanes|o,cachePool:I}),h.memoizedState=w,h.childLanes=_m(r,x,o),s.memoizedState=ym,c):(Hi(s),o=r.child,r=o.sibling,o=si(o,{mode:"visible",children:c.children}),o.return=s,o.sibling=null,r!==null&&(x=s.deletions,x===null?(s.deletions=[r],s.flags|=16):x.push(r)),s.child=o,s.memoizedState=null,o)}function bm(r,s){return s=sd({mode:"visible",children:s},r.mode),s.return=r,r.child=s}function sd(r,s){return r=Vn(22,r,null,s),r.lanes=0,r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},r}function Em(r,s,o){return uo(s,r.child,null,o),r=bm(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function pv(r,s,o){r.lanes|=s;var c=r.alternate;c!==null&&(c.lanes|=s),Uf(r.return,s,o)}function xm(r,s,o,c,h){var g=r.memoizedState;g===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:o,tailMode:h}:(g.isBackwards=s,g.rendering=null,g.renderingStartTime=0,g.last=c,g.tail=o,g.tailMode=h)}function gv(r,s,o){var c=s.pendingProps,h=c.revealOrder,g=c.tail;if(tn(r,s,c.children,o),c=zt.current,(c&2)!==0)c=c&1|2,s.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&pv(r,o,s);else if(r.tag===19)pv(r,o,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}c&=1}switch(ce(zt,c),h){case"forwards":for(o=s.child,h=null;o!==null;)r=o.alternate,r!==null&&td(r)===null&&(h=o),o=o.sibling;o=h,o===null?(h=s.child,s.child=null):(h=o.sibling,o.sibling=null),xm(s,!1,h,o,g);break;case"backwards":for(o=null,h=s.child,s.child=null;h!==null;){if(r=h.alternate,r!==null&&td(r)===null){s.child=h;break}r=h.sibling,h.sibling=o,o=h,h=r}xm(s,!0,o,null,g);break;case"together":xm(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function hi(r,s,o){if(r!==null&&(s.dependencies=r.dependencies),Wi|=s.lanes,(o&s.childLanes)===0)if(r!==null){if(Pl(r,s,o,!1),(o&s.childLanes)===0)return null}else return null;if(r!==null&&s.child!==r.child)throw Error(i(153));if(s.child!==null){for(r=s.child,o=si(r,r.pendingProps),s.child=o,o.return=s;r.sibling!==null;)r=r.sibling,o=o.sibling=si(r,r.pendingProps),o.return=s;o.sibling=null}return s.child}function Tm(r,s){return(r.lanes&s)!==0?!0:(r=r.dependencies,!!(r!==null&&Uu(r)))}function uA(r,s,o){switch(s.tag){case 3:oe(s,s.stateNode.containerInfo),Ui(s,Ut,r.memoizedState.cache),Dl();break;case 27:case 5:xe(s);break;case 4:oe(s,s.stateNode.containerInfo);break;case 10:Ui(s,s.type,s.memoizedProps.value);break;case 13:var c=s.memoizedState;if(c!==null)return c.dehydrated!==null?(Hi(s),s.flags|=128,null):(o&s.child.childLanes)!==0?mv(r,s,o):(Hi(s),r=hi(r,s,o),r!==null?r.sibling:null);Hi(s);break;case 19:var h=(r.flags&128)!==0;if(c=(o&s.childLanes)!==0,c||(Pl(r,s,o,!1),c=(o&s.childLanes)!==0),h){if(c)return gv(r,s,o);s.flags|=128}if(h=s.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),ce(zt,zt.current),c)break;return null;case 22:case 23:return s.lanes=0,cv(r,s,o);case 24:Ui(s,Ut,r.memoizedState.cache)}return hi(r,s,o)}function yv(r,s,o){if(r!==null)if(r.memoizedProps!==s.pendingProps)$t=!0;else{if(!Tm(r,o)&&(s.flags&128)===0)return $t=!1,uA(r,s,o);$t=(r.flags&131072)!==0}else $t=!1,Xe&&(s.flags&1048576)!==0&&Yy(s,Lu,s.index);switch(s.lanes=0,s.tag){case 16:e:{r=s.pendingProps;var c=s.elementType,h=c._init;if(c=h(c._payload),s.type=c,typeof c=="function")Df(c)?(r=ca(c,r),s.tag=1,s=hv(null,s,c,r,o)):(s.tag=0,s=gm(null,s,c,r,o));else{if(c!=null){if(h=c.$$typeof,h===ne){s.tag=11,s=av(null,s,c,r,o);break e}else if(h===j){s.tag=14,s=ov(null,s,c,r,o);break e}}throw s=ft(c)||c,Error(i(306,s,""))}}return s;case 0:return gm(r,s,s.type,s.pendingProps,o);case 1:return c=s.type,h=ca(c,s.pendingProps),hv(r,s,c,h,o);case 3:e:{if(oe(s,s.stateNode.containerInfo),r===null)throw Error(i(387));c=s.pendingProps;var g=s.memoizedState;h=g.element,$f(r,s),Bl(s,c,null,o);var x=s.memoizedState;if(c=x.cache,Ui(s,Ut,c),c!==g.cache&&zf(s,[Ut],o,!0),zl(),c=x.element,g.isDehydrated)if(g={element:c,isDehydrated:!1,cache:x.cache},s.updateQueue.baseState=g,s.memoizedState=g,s.flags&256){s=fv(r,s,c,o);break e}else if(c!==h){h=Qn(Error(i(424)),s),jl(h),s=fv(r,s,c,o);break e}else{switch(r=s.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(wt=dr(r.firstChild),En=s,Xe=!0,ra=null,Or=!0,o=Q0(s,null,c,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(Dl(),c===h){s=hi(r,s,o);break e}tn(r,s,c,o)}s=s.child}return s;case 26:return id(r,s),r===null?(o=E_(s.type,null,s.pendingProps,null))?s.memoizedState=o:Xe||(o=s.type,r=s.pendingProps,c=_d(ee.current).createElement(o),c[kt]=s,c[It]=r,rn(c,o,r),St(c),s.stateNode=c):s.memoizedState=E_(s.type,r.memoizedProps,s.pendingProps,r.memoizedState),null;case 27:return xe(s),r===null&&Xe&&(c=s.stateNode=v_(s.type,s.pendingProps,ee.current),En=s,Or=!0,h=wt,es(s.type)?(rp=h,wt=dr(c.firstChild)):wt=h),tn(r,s,s.pendingProps.children,o),id(r,s),r===null&&(s.flags|=4194304),s.child;case 5:return r===null&&Xe&&((h=c=wt)&&(c=LA(c,s.type,s.pendingProps,Or),c!==null?(s.stateNode=c,En=s,wt=dr(c.firstChild),Or=!1,h=!0):h=!1),h||ia(s)),xe(s),h=s.type,g=s.pendingProps,x=r!==null?r.memoizedProps:null,c=g.children,Jm(h,g)?c=null:x!==null&&Jm(h,x)&&(s.flags|=32),s.memoizedState!==null&&(h=Zf(r,s,nA,null,null,o),cc._currentValue=h),id(r,s),tn(r,s,c,o),s.child;case 6:return r===null&&Xe&&((r=o=wt)&&(o=UA(o,s.pendingProps,Or),o!==null?(s.stateNode=o,En=s,wt=null,r=!0):r=!1),r||ia(s)),null;case 13:return mv(r,s,o);case 4:return oe(s,s.stateNode.containerInfo),c=s.pendingProps,r===null?s.child=uo(s,null,c,o):tn(r,s,c,o),s.child;case 11:return av(r,s,s.type,s.pendingProps,o);case 7:return tn(r,s,s.pendingProps,o),s.child;case 8:return tn(r,s,s.pendingProps.children,o),s.child;case 12:return tn(r,s,s.pendingProps.children,o),s.child;case 10:return c=s.pendingProps,Ui(s,s.type,c.value),tn(r,s,c.children,o),s.child;case 9:return h=s.type._context,c=s.pendingProps.children,aa(s),h=un(h),c=c(h),s.flags|=1,tn(r,s,c,o),s.child;case 14:return ov(r,s,s.type,s.pendingProps,o);case 15:return lv(r,s,s.type,s.pendingProps,o);case 19:return gv(r,s,o);case 31:return c=s.pendingProps,o=s.mode,c={mode:c.mode,children:c.children},r===null?(o=sd(c,o),o.ref=s.ref,s.child=o,o.return=s,s=o):(o=si(r.child,c),o.ref=s.ref,s.child=o,o.return=s,s=o),s;case 22:return cv(r,s,o);case 24:return aa(s),c=un(Ut),r===null?(h=Ff(),h===null&&(h=dt,g=Bf(),h.pooledCache=g,g.refCount++,g!==null&&(h.pooledCacheLanes|=o),h=g),s.memoizedState={parent:c,cache:h},Gf(s),Ui(s,Ut,h)):((r.lanes&o)!==0&&($f(r,s),Bl(s,null,null,o),zl()),h=r.memoizedState,g=s.memoizedState,h.parent!==c?(h={parent:c,cache:c},s.memoizedState=h,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=h),Ui(s,Ut,c)):(c=g.cache,Ui(s,Ut,c),c!==h.cache&&zf(s,[Ut],o,!0))),tn(r,s,s.pendingProps.children,o),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function fi(r){r.flags|=4}function vv(r,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!S_(s)){if(s=Jn.current,s!==null&&((Ye&4194048)===Ye?Dr!==null:(Ye&62914560)!==Ye&&(Ye&536870912)===0||s!==Dr))throw Ll=Hf,t0;r.flags|=8192}}function ad(r,s){s!==null&&(r.flags|=4),r.flags&16384&&(s=r.tag!==22?dl():536870912,r.lanes|=s,po|=s)}function Kl(r,s){if(!Xe)switch(r.tailMode){case"hidden":s=r.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?r.tail=null:o.sibling=null;break;case"collapsed":o=r.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:c.sibling=null}}function Et(r){var s=r.alternate!==null&&r.alternate.child===r.child,o=0,c=0;if(s)for(var h=r.child;h!==null;)o|=h.lanes|h.childLanes,c|=h.subtreeFlags&65011712,c|=h.flags&65011712,h.return=r,h=h.sibling;else for(h=r.child;h!==null;)o|=h.lanes|h.childLanes,c|=h.subtreeFlags,c|=h.flags,h.return=r,h=h.sibling;return r.subtreeFlags|=c,r.childLanes=o,s}function dA(r,s,o){var c=s.pendingProps;switch(kf(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Et(s),null;case 1:return Et(s),null;case 3:return o=s.stateNode,c=null,r!==null&&(c=r.memoizedState.cache),s.memoizedState.cache!==c&&(s.flags|=2048),ci(Ut),it(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(r===null||r.child===null)&&(Ol(s)?fi(s):r===null||r.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Wy())),Et(s),null;case 26:return o=s.memoizedState,r===null?(fi(s),o!==null?(Et(s),vv(s,o)):(Et(s),s.flags&=-16777217)):o?o!==r.memoizedState?(fi(s),Et(s),vv(s,o)):(Et(s),s.flags&=-16777217):(r.memoizedProps!==c&&fi(s),Et(s),s.flags&=-16777217),null;case 27:Ve(s),o=ee.current;var h=s.type;if(r!==null&&s.stateNode!=null)r.memoizedProps!==c&&fi(s);else{if(!c){if(s.stateNode===null)throw Error(i(166));return Et(s),null}r=_e.current,Ol(s)?Ky(s):(r=v_(h,c,o),s.stateNode=r,fi(s))}return Et(s),null;case 5:if(Ve(s),o=s.type,r!==null&&s.stateNode!=null)r.memoizedProps!==c&&fi(s);else{if(!c){if(s.stateNode===null)throw Error(i(166));return Et(s),null}if(r=_e.current,Ol(s))Ky(s);else{switch(h=_d(ee.current),r){case 1:r=h.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:r=h.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":r=h.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":r=h.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":r=h.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof c.is=="string"?h.createElement("select",{is:c.is}):h.createElement("select"),c.multiple?r.multiple=!0:c.size&&(r.size=c.size);break;default:r=typeof c.is=="string"?h.createElement(o,{is:c.is}):h.createElement(o)}}r[kt]=s,r[It]=c;e:for(h=s.child;h!==null;){if(h.tag===5||h.tag===6)r.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===s)break e;for(;h.sibling===null;){if(h.return===null||h.return===s)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}s.stateNode=r;e:switch(rn(r,o,c),o){case"button":case"input":case"select":case"textarea":r=!!c.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&fi(s)}}return Et(s),s.flags&=-16777217,null;case 6:if(r&&s.stateNode!=null)r.memoizedProps!==c&&fi(s);else{if(typeof c!="string"&&s.stateNode===null)throw Error(i(166));if(r=ee.current,Ol(s)){if(r=s.stateNode,o=s.memoizedProps,c=null,h=En,h!==null)switch(h.tag){case 27:case 5:c=h.memoizedProps}r[kt]=s,r=!!(r.nodeValue===o||c!==null&&c.suppressHydrationWarning===!0||d_(r.nodeValue,o)),r||ia(s)}else r=_d(r).createTextNode(c),r[kt]=s,s.stateNode=r}return Et(s),null;case 13:if(c=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(h=Ol(s),c!==null&&c.dehydrated!==null){if(r===null){if(!h)throw Error(i(318));if(h=s.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(i(317));h[kt]=s}else Dl(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Et(s),h=!1}else h=Wy(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=h),h=!0;if(!h)return s.flags&256?(di(s),s):(di(s),null)}if(di(s),(s.flags&128)!==0)return s.lanes=o,s;if(o=c!==null,r=r!==null&&r.memoizedState!==null,o){c=s.child,h=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(h=c.alternate.memoizedState.cachePool.pool);var g=null;c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(g=c.memoizedState.cachePool.pool),g!==h&&(c.flags|=2048)}return o!==r&&o&&(s.child.flags|=8192),ad(s,s.updateQueue),Et(s),null;case 4:return it(),r===null&&Km(s.stateNode.containerInfo),Et(s),null;case 10:return ci(s.type),Et(s),null;case 19:if(he(zt),h=s.memoizedState,h===null)return Et(s),null;if(c=(s.flags&128)!==0,g=h.rendering,g===null)if(c)Kl(h,!1);else{if(At!==0||r!==null&&(r.flags&128)!==0)for(r=s.child;r!==null;){if(g=td(r),g!==null){for(s.flags|=128,Kl(h,!1),r=g.updateQueue,s.updateQueue=r,ad(s,r),s.subtreeFlags=0,r=o,o=s.child;o!==null;)$y(o,r),o=o.sibling;return ce(zt,zt.current&1|2),s.child}r=r.sibling}h.tail!==null&&yn()>cd&&(s.flags|=128,c=!0,Kl(h,!1),s.lanes=4194304)}else{if(!c)if(r=td(g),r!==null){if(s.flags|=128,c=!0,r=r.updateQueue,s.updateQueue=r,ad(s,r),Kl(h,!0),h.tail===null&&h.tailMode==="hidden"&&!g.alternate&&!Xe)return Et(s),null}else 2*yn()-h.renderingStartTime>cd&&o!==536870912&&(s.flags|=128,c=!0,Kl(h,!1),s.lanes=4194304);h.isBackwards?(g.sibling=s.child,s.child=g):(r=h.last,r!==null?r.sibling=g:s.child=g,h.last=g)}return h.tail!==null?(s=h.tail,h.rendering=s,h.tail=s.sibling,h.renderingStartTime=yn(),s.sibling=null,r=zt.current,ce(zt,c?r&1|2:r&1),s):(Et(s),null);case 22:case 23:return di(s),Wf(),c=s.memoizedState!==null,r!==null?r.memoizedState!==null!==c&&(s.flags|=8192):c&&(s.flags|=8192),c?(o&536870912)!==0&&(s.flags&128)===0&&(Et(s),s.subtreeFlags&6&&(s.flags|=8192)):Et(s),o=s.updateQueue,o!==null&&ad(s,o.retryQueue),o=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),c=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),c!==o&&(s.flags|=2048),r!==null&&he(oa),null;case 24:return o=null,r!==null&&(o=r.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),ci(Ut),Et(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function hA(r,s){switch(kf(s),s.tag){case 1:return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return ci(Ut),it(),r=s.flags,(r&65536)!==0&&(r&128)===0?(s.flags=r&-65537|128,s):null;case 26:case 27:case 5:return Ve(s),null;case 13:if(di(s),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(i(340));Dl()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return he(zt),null;case 4:return it(),null;case 10:return ci(s.type),null;case 22:case 23:return di(s),Wf(),r!==null&&he(oa),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 24:return ci(Ut),null;case 25:return null;default:return null}}function _v(r,s){switch(kf(s),s.tag){case 3:ci(Ut),it();break;case 26:case 27:case 5:Ve(s);break;case 4:it();break;case 13:di(s);break;case 19:he(zt);break;case 10:ci(s.type);break;case 22:case 23:di(s),Wf(),r!==null&&he(oa);break;case 24:ci(Ut)}}function Ql(r,s){try{var o=s.updateQueue,c=o!==null?o.lastEffect:null;if(c!==null){var h=c.next;o=h;do{if((o.tag&r)===r){c=void 0;var g=o.create,x=o.inst;c=g(),x.destroy=c}o=o.next}while(o!==h)}}catch(w){ct(s,s.return,w)}}function $i(r,s,o){try{var c=s.updateQueue,h=c!==null?c.lastEffect:null;if(h!==null){var g=h.next;c=g;do{if((c.tag&r)===r){var x=c.inst,w=x.destroy;if(w!==void 0){x.destroy=void 0,h=s;var I=o,G=w;try{G()}catch(J){ct(h,I,J)}}}c=c.next}while(c!==g)}}catch(J){ct(s,s.return,J)}}function bv(r){var s=r.updateQueue;if(s!==null){var o=r.stateNode;try{o0(s,o)}catch(c){ct(r,r.return,c)}}}function Ev(r,s,o){o.props=ca(r.type,r.memoizedProps),o.state=r.memoizedState;try{o.componentWillUnmount()}catch(c){ct(r,s,c)}}function Wl(r,s){try{var o=r.ref;if(o!==null){switch(r.tag){case 26:case 27:case 5:var c=r.stateNode;break;case 30:c=r.stateNode;break;default:c=r.stateNode}typeof o=="function"?r.refCleanup=o(c):o.current=c}}catch(h){ct(r,s,h)}}function jr(r,s){var o=r.ref,c=r.refCleanup;if(o!==null)if(typeof c=="function")try{c()}catch(h){ct(r,s,h)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(h){ct(r,s,h)}else o.current=null}function xv(r){var s=r.type,o=r.memoizedProps,c=r.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":o.autoFocus&&c.focus();break e;case"img":o.src?c.src=o.src:o.srcSet&&(c.srcset=o.srcSet)}}catch(h){ct(r,r.return,h)}}function wm(r,s,o){try{var c=r.stateNode;jA(c,r.type,o,s),c[It]=s}catch(h){ct(r,r.return,h)}}function Tv(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&es(r.type)||r.tag===4}function Am(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||Tv(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&es(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Sm(r,s,o){var c=r.tag;if(c===5||c===6)r=r.stateNode,s?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(r,s):(s=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,s.appendChild(r),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=vd));else if(c!==4&&(c===27&&es(r.type)&&(o=r.stateNode,s=null),r=r.child,r!==null))for(Sm(r,s,o),r=r.sibling;r!==null;)Sm(r,s,o),r=r.sibling}function od(r,s,o){var c=r.tag;if(c===5||c===6)r=r.stateNode,s?o.insertBefore(r,s):o.appendChild(r);else if(c!==4&&(c===27&&es(r.type)&&(o=r.stateNode),r=r.child,r!==null))for(od(r,s,o),r=r.sibling;r!==null;)od(r,s,o),r=r.sibling}function wv(r){var s=r.stateNode,o=r.memoizedProps;try{for(var c=r.type,h=s.attributes;h.length;)s.removeAttributeNode(h[0]);rn(s,c,o),s[kt]=r,s[It]=o}catch(g){ct(r,r.return,g)}}var mi=!1,Ct=!1,Nm=!1,Av=typeof WeakSet=="function"?WeakSet:Set,Yt=null;function fA(r,s){if(r=r.containerInfo,Xm=Ad,r=ky(r),Af(r)){if("selectionStart"in r)var o={start:r.selectionStart,end:r.selectionEnd};else e:{o=(o=r.ownerDocument)&&o.defaultView||window;var c=o.getSelection&&o.getSelection();if(c&&c.rangeCount!==0){o=c.anchorNode;var h=c.anchorOffset,g=c.focusNode;c=c.focusOffset;try{o.nodeType,g.nodeType}catch{o=null;break e}var x=0,w=-1,I=-1,G=0,J=0,ie=r,Y=null;t:for(;;){for(var K;ie!==o||h!==0&&ie.nodeType!==3||(w=x+h),ie!==g||c!==0&&ie.nodeType!==3||(I=x+c),ie.nodeType===3&&(x+=ie.nodeValue.length),(K=ie.firstChild)!==null;)Y=ie,ie=K;for(;;){if(ie===r)break t;if(Y===o&&++G===h&&(w=x),Y===g&&++J===c&&(I=x),(K=ie.nextSibling)!==null)break;ie=Y,Y=ie.parentNode}ie=K}o=w===-1||I===-1?null:{start:w,end:I}}else o=null}o=o||{start:0,end:0}}else o=null;for(Zm={focusedElem:r,selectionRange:o},Ad=!1,Yt=s;Yt!==null;)if(s=Yt,r=s.child,(s.subtreeFlags&1024)!==0&&r!==null)r.return=s,Yt=r;else for(;Yt!==null;){switch(s=Yt,g=s.alternate,r=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((r&1024)!==0&&g!==null){r=void 0,o=s,h=g.memoizedProps,g=g.memoizedState,c=o.stateNode;try{var Ne=ca(o.type,h,o.elementType===o.type);r=c.getSnapshotBeforeUpdate(Ne,g),c.__reactInternalSnapshotBeforeUpdate=r}catch(Te){ct(o,o.return,Te)}}break;case 3:if((r&1024)!==0){if(r=s.stateNode.containerInfo,o=r.nodeType,o===9)tp(r);else if(o===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":tp(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=s.sibling,r!==null){r.return=s.return,Yt=r;break}Yt=s.return}}function Sv(r,s,o){var c=o.flags;switch(o.tag){case 0:case 11:case 15:Yi(r,o),c&4&&Ql(5,o);break;case 1:if(Yi(r,o),c&4)if(r=o.stateNode,s===null)try{r.componentDidMount()}catch(x){ct(o,o.return,x)}else{var h=ca(o.type,s.memoizedProps);s=s.memoizedState;try{r.componentDidUpdate(h,s,r.__reactInternalSnapshotBeforeUpdate)}catch(x){ct(o,o.return,x)}}c&64&&bv(o),c&512&&Wl(o,o.return);break;case 3:if(Yi(r,o),c&64&&(r=o.updateQueue,r!==null)){if(s=null,o.child!==null)switch(o.child.tag){case 27:case 5:s=o.child.stateNode;break;case 1:s=o.child.stateNode}try{o0(r,s)}catch(x){ct(o,o.return,x)}}break;case 27:s===null&&c&4&&wv(o);case 26:case 5:Yi(r,o),s===null&&c&4&&xv(o),c&512&&Wl(o,o.return);break;case 12:Yi(r,o);break;case 13:Yi(r,o),c&4&&Rv(r,o),c&64&&(r=o.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(o=xA.bind(null,o),zA(r,o))));break;case 22:if(c=o.memoizedState!==null||mi,!c){s=s!==null&&s.memoizedState!==null||Ct,h=mi;var g=Ct;mi=c,(Ct=s)&&!g?Ki(r,o,(o.subtreeFlags&8772)!==0):Yi(r,o),mi=h,Ct=g}break;case 30:break;default:Yi(r,o)}}function Nv(r){var s=r.alternate;s!==null&&(r.alternate=null,Nv(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&Mi(s)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var gt=null,Nn=!1;function pi(r,s,o){for(o=o.child;o!==null;)Cv(r,s,o),o=o.sibling}function Cv(r,s,o){if(et&&typeof et.onCommitFiberUnmount=="function")try{et.onCommitFiberUnmount(Tt,o)}catch{}switch(o.tag){case 26:Ct||jr(o,s),pi(r,s,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:Ct||jr(o,s);var c=gt,h=Nn;es(o.type)&&(gt=o.stateNode,Nn=!1),pi(r,s,o),sc(o.stateNode),gt=c,Nn=h;break;case 5:Ct||jr(o,s);case 6:if(c=gt,h=Nn,gt=null,pi(r,s,o),gt=c,Nn=h,gt!==null)if(Nn)try{(gt.nodeType===9?gt.body:gt.nodeName==="HTML"?gt.ownerDocument.body:gt).removeChild(o.stateNode)}catch(g){ct(o,s,g)}else try{gt.removeChild(o.stateNode)}catch(g){ct(o,s,g)}break;case 18:gt!==null&&(Nn?(r=gt,g_(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,o.stateNode),fc(r)):g_(gt,o.stateNode));break;case 4:c=gt,h=Nn,gt=o.stateNode.containerInfo,Nn=!0,pi(r,s,o),gt=c,Nn=h;break;case 0:case 11:case 14:case 15:Ct||$i(2,o,s),Ct||$i(4,o,s),pi(r,s,o);break;case 1:Ct||(jr(o,s),c=o.stateNode,typeof c.componentWillUnmount=="function"&&Ev(o,s,c)),pi(r,s,o);break;case 21:pi(r,s,o);break;case 22:Ct=(c=Ct)||o.memoizedState!==null,pi(r,s,o),Ct=c;break;default:pi(r,s,o)}}function Rv(r,s){if(s.memoizedState===null&&(r=s.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{fc(r)}catch(o){ct(s,s.return,o)}}function mA(r){switch(r.tag){case 13:case 19:var s=r.stateNode;return s===null&&(s=r.stateNode=new Av),s;case 22:return r=r.stateNode,s=r._retryCache,s===null&&(s=r._retryCache=new Av),s;default:throw Error(i(435,r.tag))}}function Cm(r,s){var o=mA(r);s.forEach(function(c){var h=TA.bind(null,r,c);o.has(c)||(o.add(c),c.then(h,h))})}function Ln(r,s){var o=s.deletions;if(o!==null)for(var c=0;c<o.length;c++){var h=o[c],g=r,x=s,w=x;e:for(;w!==null;){switch(w.tag){case 27:if(es(w.type)){gt=w.stateNode,Nn=!1;break e}break;case 5:gt=w.stateNode,Nn=!1;break e;case 3:case 4:gt=w.stateNode.containerInfo,Nn=!0;break e}w=w.return}if(gt===null)throw Error(i(160));Cv(g,x,h),gt=null,Nn=!1,g=h.alternate,g!==null&&(g.return=null),h.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)Iv(s,r),s=s.sibling}var ur=null;function Iv(r,s){var o=r.alternate,c=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:Ln(s,r),Un(r),c&4&&($i(3,r,r.return),Ql(3,r),$i(5,r,r.return));break;case 1:Ln(s,r),Un(r),c&512&&(Ct||o===null||jr(o,o.return)),c&64&&mi&&(r=r.updateQueue,r!==null&&(c=r.callbacks,c!==null&&(o=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=o===null?c:o.concat(c))));break;case 26:var h=ur;if(Ln(s,r),Un(r),c&512&&(Ct||o===null||jr(o,o.return)),c&4){var g=o!==null?o.memoizedState:null;if(c=r.memoizedState,o===null)if(c===null)if(r.stateNode===null){e:{c=r.type,o=r.memoizedProps,h=h.ownerDocument||h;t:switch(c){case"title":g=h.getElementsByTagName("title")[0],(!g||g[Ls]||g[kt]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=h.createElement(c),h.head.insertBefore(g,h.querySelector("head > title"))),rn(g,c,o),g[kt]=r,St(g),c=g;break e;case"link":var x=w_("link","href",h).get(c+(o.href||""));if(x){for(var w=0;w<x.length;w++)if(g=x[w],g.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&g.getAttribute("rel")===(o.rel==null?null:o.rel)&&g.getAttribute("title")===(o.title==null?null:o.title)&&g.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){x.splice(w,1);break t}}g=h.createElement(c),rn(g,c,o),h.head.appendChild(g);break;case"meta":if(x=w_("meta","content",h).get(c+(o.content||""))){for(w=0;w<x.length;w++)if(g=x[w],g.getAttribute("content")===(o.content==null?null:""+o.content)&&g.getAttribute("name")===(o.name==null?null:o.name)&&g.getAttribute("property")===(o.property==null?null:o.property)&&g.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&g.getAttribute("charset")===(o.charSet==null?null:o.charSet)){x.splice(w,1);break t}}g=h.createElement(c),rn(g,c,o),h.head.appendChild(g);break;default:throw Error(i(468,c))}g[kt]=r,St(g),c=g}r.stateNode=c}else A_(h,r.type,r.stateNode);else r.stateNode=T_(h,c,r.memoizedProps);else g!==c?(g===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):g.count--,c===null?A_(h,r.type,r.stateNode):T_(h,c,r.memoizedProps)):c===null&&r.stateNode!==null&&wm(r,r.memoizedProps,o.memoizedProps)}break;case 27:Ln(s,r),Un(r),c&512&&(Ct||o===null||jr(o,o.return)),o!==null&&c&4&&wm(r,r.memoizedProps,o.memoizedProps);break;case 5:if(Ln(s,r),Un(r),c&512&&(Ct||o===null||jr(o,o.return)),r.flags&32){h=r.stateNode;try{Gn(h,"")}catch(K){ct(r,r.return,K)}}c&4&&r.stateNode!=null&&(h=r.memoizedProps,wm(r,h,o!==null?o.memoizedProps:h)),c&1024&&(Nm=!0);break;case 6:if(Ln(s,r),Un(r),c&4){if(r.stateNode===null)throw Error(i(162));c=r.memoizedProps,o=r.stateNode;try{o.nodeValue=c}catch(K){ct(r,r.return,K)}}break;case 3:if(xd=null,h=ur,ur=bd(s.containerInfo),Ln(s,r),ur=h,Un(r),c&4&&o!==null&&o.memoizedState.isDehydrated)try{fc(s.containerInfo)}catch(K){ct(r,r.return,K)}Nm&&(Nm=!1,Ov(r));break;case 4:c=ur,ur=bd(r.stateNode.containerInfo),Ln(s,r),Un(r),ur=c;break;case 12:Ln(s,r),Un(r);break;case 13:Ln(s,r),Un(r),r.child.flags&8192&&r.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Pm=yn()),c&4&&(c=r.updateQueue,c!==null&&(r.updateQueue=null,Cm(r,c)));break;case 22:h=r.memoizedState!==null;var I=o!==null&&o.memoizedState!==null,G=mi,J=Ct;if(mi=G||h,Ct=J||I,Ln(s,r),Ct=J,mi=G,Un(r),c&8192)e:for(s=r.stateNode,s._visibility=h?s._visibility&-2:s._visibility|1,h&&(o===null||I||mi||Ct||ua(r)),o=null,s=r;;){if(s.tag===5||s.tag===26){if(o===null){I=o=s;try{if(g=I.stateNode,h)x=g.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none";else{w=I.stateNode;var ie=I.memoizedProps.style,Y=ie!=null&&ie.hasOwnProperty("display")?ie.display:null;w.style.display=Y==null||typeof Y=="boolean"?"":(""+Y).trim()}}catch(K){ct(I,I.return,K)}}}else if(s.tag===6){if(o===null){I=s;try{I.stateNode.nodeValue=h?"":I.memoizedProps}catch(K){ct(I,I.return,K)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===r)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break e;for(;s.sibling===null;){if(s.return===null||s.return===r)break e;o===s&&(o=null),s=s.return}o===s&&(o=null),s.sibling.return=s.return,s=s.sibling}c&4&&(c=r.updateQueue,c!==null&&(o=c.retryQueue,o!==null&&(c.retryQueue=null,Cm(r,o))));break;case 19:Ln(s,r),Un(r),c&4&&(c=r.updateQueue,c!==null&&(r.updateQueue=null,Cm(r,c)));break;case 30:break;case 21:break;default:Ln(s,r),Un(r)}}function Un(r){var s=r.flags;if(s&2){try{for(var o,c=r.return;c!==null;){if(Tv(c)){o=c;break}c=c.return}if(o==null)throw Error(i(160));switch(o.tag){case 27:var h=o.stateNode,g=Am(r);od(r,g,h);break;case 5:var x=o.stateNode;o.flags&32&&(Gn(x,""),o.flags&=-33);var w=Am(r);od(r,w,x);break;case 3:case 4:var I=o.stateNode.containerInfo,G=Am(r);Sm(r,G,I);break;default:throw Error(i(161))}}catch(J){ct(r,r.return,J)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function Ov(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var s=r;Ov(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),r=r.sibling}}function Yi(r,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)Sv(r,s.alternate,s),s=s.sibling}function ua(r){for(r=r.child;r!==null;){var s=r;switch(s.tag){case 0:case 11:case 14:case 15:$i(4,s,s.return),ua(s);break;case 1:jr(s,s.return);var o=s.stateNode;typeof o.componentWillUnmount=="function"&&Ev(s,s.return,o),ua(s);break;case 27:sc(s.stateNode);case 26:case 5:jr(s,s.return),ua(s);break;case 22:s.memoizedState===null&&ua(s);break;case 30:ua(s);break;default:ua(s)}r=r.sibling}}function Ki(r,s,o){for(o=o&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var c=s.alternate,h=r,g=s,x=g.flags;switch(g.tag){case 0:case 11:case 15:Ki(h,g,o),Ql(4,g);break;case 1:if(Ki(h,g,o),c=g,h=c.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(G){ct(c,c.return,G)}if(c=g,h=c.updateQueue,h!==null){var w=c.stateNode;try{var I=h.shared.hiddenCallbacks;if(I!==null)for(h.shared.hiddenCallbacks=null,h=0;h<I.length;h++)a0(I[h],w)}catch(G){ct(c,c.return,G)}}o&&x&64&&bv(g),Wl(g,g.return);break;case 27:wv(g);case 26:case 5:Ki(h,g,o),o&&c===null&&x&4&&xv(g),Wl(g,g.return);break;case 12:Ki(h,g,o);break;case 13:Ki(h,g,o),o&&x&4&&Rv(h,g);break;case 22:g.memoizedState===null&&Ki(h,g,o),Wl(g,g.return);break;case 30:break;default:Ki(h,g,o)}s=s.sibling}}function Rm(r,s){var o=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),r=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(r=s.memoizedState.cachePool.pool),r!==o&&(r!=null&&r.refCount++,o!=null&&Ml(o))}function Im(r,s){r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&Ml(r))}function Pr(r,s,o,c){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Dv(r,s,o,c),s=s.sibling}function Dv(r,s,o,c){var h=s.flags;switch(s.tag){case 0:case 11:case 15:Pr(r,s,o,c),h&2048&&Ql(9,s);break;case 1:Pr(r,s,o,c);break;case 3:Pr(r,s,o,c),h&2048&&(r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&Ml(r)));break;case 12:if(h&2048){Pr(r,s,o,c),r=s.stateNode;try{var g=s.memoizedProps,x=g.id,w=g.onPostCommit;typeof w=="function"&&w(x,s.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(I){ct(s,s.return,I)}}else Pr(r,s,o,c);break;case 13:Pr(r,s,o,c);break;case 23:break;case 22:g=s.stateNode,x=s.alternate,s.memoizedState!==null?g._visibility&2?Pr(r,s,o,c):Xl(r,s):g._visibility&2?Pr(r,s,o,c):(g._visibility|=2,ho(r,s,o,c,(s.subtreeFlags&10256)!==0)),h&2048&&Rm(x,s);break;case 24:Pr(r,s,o,c),h&2048&&Im(s.alternate,s);break;default:Pr(r,s,o,c)}}function ho(r,s,o,c,h){for(h=h&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var g=r,x=s,w=o,I=c,G=x.flags;switch(x.tag){case 0:case 11:case 15:ho(g,x,w,I,h),Ql(8,x);break;case 23:break;case 22:var J=x.stateNode;x.memoizedState!==null?J._visibility&2?ho(g,x,w,I,h):Xl(g,x):(J._visibility|=2,ho(g,x,w,I,h)),h&&G&2048&&Rm(x.alternate,x);break;case 24:ho(g,x,w,I,h),h&&G&2048&&Im(x.alternate,x);break;default:ho(g,x,w,I,h)}s=s.sibling}}function Xl(r,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var o=r,c=s,h=c.flags;switch(c.tag){case 22:Xl(o,c),h&2048&&Rm(c.alternate,c);break;case 24:Xl(o,c),h&2048&&Im(c.alternate,c);break;default:Xl(o,c)}s=s.sibling}}var Zl=8192;function fo(r){if(r.subtreeFlags&Zl)for(r=r.child;r!==null;)jv(r),r=r.sibling}function jv(r){switch(r.tag){case 26:fo(r),r.flags&Zl&&r.memoizedState!==null&&JA(ur,r.memoizedState,r.memoizedProps);break;case 5:fo(r);break;case 3:case 4:var s=ur;ur=bd(r.stateNode.containerInfo),fo(r),ur=s;break;case 22:r.memoizedState===null&&(s=r.alternate,s!==null&&s.memoizedState!==null?(s=Zl,Zl=16777216,fo(r),Zl=s):fo(r));break;default:fo(r)}}function Pv(r){var s=r.alternate;if(s!==null&&(r=s.child,r!==null)){s.child=null;do s=r.sibling,r.sibling=null,r=s;while(r!==null)}}function Jl(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var c=s[o];Yt=c,kv(c,r)}Pv(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Mv(r),r=r.sibling}function Mv(r){switch(r.tag){case 0:case 11:case 15:Jl(r),r.flags&2048&&$i(9,r,r.return);break;case 3:Jl(r);break;case 12:Jl(r);break;case 22:var s=r.stateNode;r.memoizedState!==null&&s._visibility&2&&(r.return===null||r.return.tag!==13)?(s._visibility&=-3,ld(r)):Jl(r);break;default:Jl(r)}}function ld(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var c=s[o];Yt=c,kv(c,r)}Pv(r)}for(r=r.child;r!==null;){switch(s=r,s.tag){case 0:case 11:case 15:$i(8,s,s.return),ld(s);break;case 22:o=s.stateNode,o._visibility&2&&(o._visibility&=-3,ld(s));break;default:ld(s)}r=r.sibling}}function kv(r,s){for(;Yt!==null;){var o=Yt;switch(o.tag){case 0:case 11:case 15:$i(8,o,s);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var c=o.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Ml(o.memoizedState.cache)}if(c=o.child,c!==null)c.return=o,Yt=c;else e:for(o=r;Yt!==null;){c=Yt;var h=c.sibling,g=c.return;if(Nv(c),c===o){Yt=null;break e}if(h!==null){h.return=g,Yt=h;break e}Yt=g}}}var pA={getCacheForType:function(r){var s=un(Ut),o=s.data.get(r);return o===void 0&&(o=r(),s.data.set(r,o)),o}},gA=typeof WeakMap=="function"?WeakMap:Map,tt=0,dt=null,Ue=null,Ye=0,nt=0,zn=null,Qi=!1,mo=!1,Om=!1,gi=0,At=0,Wi=0,da=0,Dm=0,er=0,po=0,ec=null,Cn=null,jm=!1,Pm=0,cd=1/0,ud=null,Xi=null,nn=0,Zi=null,go=null,yo=0,Mm=0,km=null,Vv=null,tc=0,Vm=null;function Bn(){if((tt&2)!==0&&Ye!==0)return Ye&-Ye;if(Z.T!==null){var r=ro;return r!==0?r:Hm()}return ji()}function Lv(){er===0&&(er=(Ye&536870912)===0||Xe?ul():536870912);var r=Jn.current;return r!==null&&(r.flags|=32),er}function qn(r,s,o){(r===dt&&(nt===2||nt===9)||r.cancelPendingCommit!==null)&&(vo(r,0),Ji(r,Ye,er,!1)),Kr(r,o),((tt&2)===0||r!==dt)&&(r===dt&&((tt&2)===0&&(da|=o),At===4&&Ji(r,Ye,er,!1)),Mr(r))}function Uv(r,s,o){if((tt&6)!==0)throw Error(i(327));var c=!o&&(s&124)===0&&(s&r.expiredLanes)===0||Vs(r,s),h=c?_A(r,s):zm(r,s,!0),g=c;do{if(h===0){mo&&!c&&Ji(r,s,0,!1);break}else{if(o=r.current.alternate,g&&!yA(o)){h=zm(r,s,!1),g=!1;continue}if(h===2){if(g=s,r.errorRecoveryDisabledLanes&g)var x=0;else x=r.pendingLanes&-536870913,x=x!==0?x:x&536870912?536870912:0;if(x!==0){s=x;e:{var w=r;h=ec;var I=w.current.memoizedState.isDehydrated;if(I&&(vo(w,x).flags|=256),x=zm(w,x,!1),x!==2){if(Om&&!I){w.errorRecoveryDisabledLanes|=g,da|=g,h=4;break e}g=Cn,Cn=h,g!==null&&(Cn===null?Cn=g:Cn.push.apply(Cn,g))}h=x}if(g=!1,h!==2)continue}}if(h===1){vo(r,0),Ji(r,s,0,!0);break}e:{switch(c=r,g=h,g){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:Ji(c,s,er,!Qi);break e;case 2:Cn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(h=Pm+300-yn(),10<h)){if(Ji(c,s,er,!Qi),Pa(c,0,!0)!==0)break e;c.timeoutHandle=m_(zv.bind(null,c,o,Cn,ud,jm,s,er,da,po,Qi,g,2,-0,0),h);break e}zv(c,o,Cn,ud,jm,s,er,da,po,Qi,g,0,-0,0)}}break}while(!0);Mr(r)}function zv(r,s,o,c,h,g,x,w,I,G,J,ie,Y,K){if(r.timeoutHandle=-1,ie=s.subtreeFlags,(ie&8192||(ie&16785408)===16785408)&&(lc={stylesheets:null,count:0,unsuspend:ZA},jv(s),ie=eS(),ie!==null)){r.cancelPendingCommit=ie(Yv.bind(null,r,s,g,o,c,h,x,w,I,J,1,Y,K)),Ji(r,g,x,!G);return}Yv(r,s,g,o,c,h,x,w,I)}function yA(r){for(var s=r;;){var o=s.tag;if((o===0||o===11||o===15)&&s.flags&16384&&(o=s.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var c=0;c<o.length;c++){var h=o[c],g=h.getSnapshot;h=h.value;try{if(!kn(g(),h))return!1}catch{return!1}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Ji(r,s,o,c){s&=~Dm,s&=~da,r.suspendedLanes|=s,r.pingedLanes&=~s,c&&(r.warmLanes|=s),c=r.expirationTimes;for(var h=s;0<h;){var g=31-cn(h),x=1<<g;c[g]=-1,h&=~x}o!==0&&br(r,o,s)}function dd(){return(tt&6)===0?(nc(0),!1):!0}function Lm(){if(Ue!==null){if(nt===0)var r=Ue.return;else r=Ue,li=sa=null,tm(r),co=null,$l=0,r=Ue;for(;r!==null;)_v(r.alternate,r),r=r.return;Ue=null}}function vo(r,s){var o=r.timeoutHandle;o!==-1&&(r.timeoutHandle=-1,MA(o)),o=r.cancelPendingCommit,o!==null&&(r.cancelPendingCommit=null,o()),Lm(),dt=r,Ue=o=si(r.current,null),Ye=s,nt=0,zn=null,Qi=!1,mo=Vs(r,s),Om=!1,po=er=Dm=da=Wi=At=0,Cn=ec=null,jm=!1,(s&8)!==0&&(s|=s&32);var c=r.entangledLanes;if(c!==0)for(r=r.entanglements,c&=s;0<c;){var h=31-cn(c),g=1<<h;s|=r[h],c&=~g}return gi=s,ju(),o}function Bv(r,s){Me=null,Z.H=Zu,s===Vl||s===qu?(s=i0(),nt=3):s===t0?(s=i0(),nt=4):nt=s===sv?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,zn=s,Ue===null&&(At=1,rd(r,Qn(s,r.current)))}function qv(){var r=Z.H;return Z.H=Zu,r===null?Zu:r}function Fv(){var r=Z.A;return Z.A=pA,r}function Um(){At=4,Qi||(Ye&4194048)!==Ye&&Jn.current!==null||(mo=!0),(Wi&134217727)===0&&(da&134217727)===0||dt===null||Ji(dt,Ye,er,!1)}function zm(r,s,o){var c=tt;tt|=2;var h=qv(),g=Fv();(dt!==r||Ye!==s)&&(ud=null,vo(r,s)),s=!1;var x=At;e:do try{if(nt!==0&&Ue!==null){var w=Ue,I=zn;switch(nt){case 8:Lm(),x=6;break e;case 3:case 2:case 9:case 6:Jn.current===null&&(s=!0);var G=nt;if(nt=0,zn=null,_o(r,w,I,G),o&&mo){x=0;break e}break;default:G=nt,nt=0,zn=null,_o(r,w,I,G)}}vA(),x=At;break}catch(J){Bv(r,J)}while(!0);return s&&r.shellSuspendCounter++,li=sa=null,tt=c,Z.H=h,Z.A=g,Ue===null&&(dt=null,Ye=0,ju()),x}function vA(){for(;Ue!==null;)Hv(Ue)}function _A(r,s){var o=tt;tt|=2;var c=qv(),h=Fv();dt!==r||Ye!==s?(ud=null,cd=yn()+500,vo(r,s)):mo=Vs(r,s);e:do try{if(nt!==0&&Ue!==null){s=Ue;var g=zn;t:switch(nt){case 1:nt=0,zn=null,_o(r,s,g,1);break;case 2:case 9:if(n0(g)){nt=0,zn=null,Gv(s);break}s=function(){nt!==2&&nt!==9||dt!==r||(nt=7),Mr(r)},g.then(s,s);break e;case 3:nt=7;break e;case 4:nt=5;break e;case 7:n0(g)?(nt=0,zn=null,Gv(s)):(nt=0,zn=null,_o(r,s,g,7));break;case 5:var x=null;switch(Ue.tag){case 26:x=Ue.memoizedState;case 5:case 27:var w=Ue;if(!x||S_(x)){nt=0,zn=null;var I=w.sibling;if(I!==null)Ue=I;else{var G=w.return;G!==null?(Ue=G,hd(G)):Ue=null}break t}}nt=0,zn=null,_o(r,s,g,5);break;case 6:nt=0,zn=null,_o(r,s,g,6);break;case 8:Lm(),At=6;break e;default:throw Error(i(462))}}bA();break}catch(J){Bv(r,J)}while(!0);return li=sa=null,Z.H=c,Z.A=h,tt=o,Ue!==null?0:(dt=null,Ye=0,ju(),At)}function bA(){for(;Ue!==null&&!Ds();)Hv(Ue)}function Hv(r){var s=yv(r.alternate,r,gi);r.memoizedProps=r.pendingProps,s===null?hd(r):Ue=s}function Gv(r){var s=r,o=s.alternate;switch(s.tag){case 15:case 0:s=dv(o,s,s.pendingProps,s.type,void 0,Ye);break;case 11:s=dv(o,s,s.pendingProps,s.type.render,s.ref,Ye);break;case 5:tm(s);default:_v(o,s),s=Ue=$y(s,gi),s=yv(o,s,gi)}r.memoizedProps=r.pendingProps,s===null?hd(r):Ue=s}function _o(r,s,o,c){li=sa=null,tm(s),co=null,$l=0;var h=s.return;try{if(cA(r,h,s,o,Ye)){At=1,rd(r,Qn(o,r.current)),Ue=null;return}}catch(g){if(h!==null)throw Ue=h,g;At=1,rd(r,Qn(o,r.current)),Ue=null;return}s.flags&32768?(Xe||c===1?r=!0:mo||(Ye&536870912)!==0?r=!1:(Qi=r=!0,(c===2||c===9||c===3||c===6)&&(c=Jn.current,c!==null&&c.tag===13&&(c.flags|=16384))),$v(s,r)):hd(s)}function hd(r){var s=r;do{if((s.flags&32768)!==0){$v(s,Qi);return}r=s.return;var o=dA(s.alternate,s,gi);if(o!==null){Ue=o;return}if(s=s.sibling,s!==null){Ue=s;return}Ue=s=r}while(s!==null);At===0&&(At=5)}function $v(r,s){do{var o=hA(r.alternate,r);if(o!==null){o.flags&=32767,Ue=o;return}if(o=r.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!s&&(r=r.sibling,r!==null)){Ue=r;return}Ue=r=o}while(r!==null);At=6,Ue=null}function Yv(r,s,o,c,h,g,x,w,I){r.cancelPendingCommit=null;do fd();while(nn!==0);if((tt&6)!==0)throw Error(i(327));if(s!==null){if(s===r.current)throw Error(i(177));if(g=s.lanes|s.childLanes,g|=If,hl(r,o,g,x,w,I),r===dt&&(Ue=dt=null,Ye=0),go=s,Zi=r,yo=o,Mm=g,km=h,Vv=c,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,wA(js,function(){return Zv(),null})):(r.callbackNode=null,r.callbackPriority=0),c=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||c){c=Z.T,Z.T=null,h=ue.p,ue.p=2,x=tt,tt|=4;try{fA(r,s,o)}finally{tt=x,ue.p=h,Z.T=c}}nn=1,Kv(),Qv(),Wv()}}function Kv(){if(nn===1){nn=0;var r=Zi,s=go,o=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||o){o=Z.T,Z.T=null;var c=ue.p;ue.p=2;var h=tt;tt|=4;try{Iv(s,r);var g=Zm,x=ky(r.containerInfo),w=g.focusedElem,I=g.selectionRange;if(x!==w&&w&&w.ownerDocument&&My(w.ownerDocument.documentElement,w)){if(I!==null&&Af(w)){var G=I.start,J=I.end;if(J===void 0&&(J=G),"selectionStart"in w)w.selectionStart=G,w.selectionEnd=Math.min(J,w.value.length);else{var ie=w.ownerDocument||document,Y=ie&&ie.defaultView||window;if(Y.getSelection){var K=Y.getSelection(),Ne=w.textContent.length,Te=Math.min(I.start,Ne),lt=I.end===void 0?Te:Math.min(I.end,Ne);!K.extend&&Te>lt&&(x=lt,lt=Te,Te=x);var q=Py(w,Te),L=Py(w,lt);if(q&&L&&(K.rangeCount!==1||K.anchorNode!==q.node||K.anchorOffset!==q.offset||K.focusNode!==L.node||K.focusOffset!==L.offset)){var H=ie.createRange();H.setStart(q.node,q.offset),K.removeAllRanges(),Te>lt?(K.addRange(H),K.extend(L.node,L.offset)):(H.setEnd(L.node,L.offset),K.addRange(H))}}}}for(ie=[],K=w;K=K.parentNode;)K.nodeType===1&&ie.push({element:K,left:K.scrollLeft,top:K.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<ie.length;w++){var te=ie[w];te.element.scrollLeft=te.left,te.element.scrollTop=te.top}}Ad=!!Xm,Zm=Xm=null}finally{tt=h,ue.p=c,Z.T=o}}r.current=s,nn=2}}function Qv(){if(nn===2){nn=0;var r=Zi,s=go,o=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||o){o=Z.T,Z.T=null;var c=ue.p;ue.p=2;var h=tt;tt|=4;try{Sv(r,s.alternate,s)}finally{tt=h,ue.p=c,Z.T=o}}nn=3}}function Wv(){if(nn===4||nn===3){nn=0,al();var r=Zi,s=go,o=yo,c=Vv;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?nn=5:(nn=0,go=Zi=null,Xv(r,r.pendingLanes));var h=r.pendingLanes;if(h===0&&(Xi=null),Ma(o),s=s.stateNode,et&&typeof et.onCommitFiberRoot=="function")try{et.onCommitFiberRoot(Tt,s,void 0,(s.current.flags&128)===128)}catch{}if(c!==null){s=Z.T,h=ue.p,ue.p=2,Z.T=null;try{for(var g=r.onRecoverableError,x=0;x<c.length;x++){var w=c[x];g(w.value,{componentStack:w.stack})}}finally{Z.T=s,ue.p=h}}(yo&3)!==0&&fd(),Mr(r),h=r.pendingLanes,(o&4194090)!==0&&(h&42)!==0?r===Vm?tc++:(tc=0,Vm=r):tc=0,nc(0)}}function Xv(r,s){(r.pooledCacheLanes&=s)===0&&(s=r.pooledCache,s!=null&&(r.pooledCache=null,Ml(s)))}function fd(r){return Kv(),Qv(),Wv(),Zv()}function Zv(){if(nn!==5)return!1;var r=Zi,s=Mm;Mm=0;var o=Ma(yo),c=Z.T,h=ue.p;try{ue.p=32>o?32:o,Z.T=null,o=km,km=null;var g=Zi,x=yo;if(nn=0,go=Zi=null,yo=0,(tt&6)!==0)throw Error(i(331));var w=tt;if(tt|=4,Mv(g.current),Dv(g,g.current,x,o),tt=w,nc(0,!1),et&&typeof et.onPostCommitFiberRoot=="function")try{et.onPostCommitFiberRoot(Tt,g)}catch{}return!0}finally{ue.p=h,Z.T=c,Xv(r,s)}}function Jv(r,s,o){s=Qn(o,s),s=pm(r.stateNode,s,2),r=qi(r,s,2),r!==null&&(Kr(r,2),Mr(r))}function ct(r,s,o){if(r.tag===3)Jv(r,r,o);else for(;s!==null;){if(s.tag===3){Jv(s,r,o);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Xi===null||!Xi.has(c))){r=Qn(o,r),o=rv(2),c=qi(s,o,2),c!==null&&(iv(o,c,s,r),Kr(c,2),Mr(c));break}}s=s.return}}function Bm(r,s,o){var c=r.pingCache;if(c===null){c=r.pingCache=new gA;var h=new Set;c.set(s,h)}else h=c.get(s),h===void 0&&(h=new Set,c.set(s,h));h.has(o)||(Om=!0,h.add(o),r=EA.bind(null,r,s,o),s.then(r,r))}function EA(r,s,o){var c=r.pingCache;c!==null&&c.delete(s),r.pingedLanes|=r.suspendedLanes&o,r.warmLanes&=~o,dt===r&&(Ye&o)===o&&(At===4||At===3&&(Ye&62914560)===Ye&&300>yn()-Pm?(tt&2)===0&&vo(r,0):Dm|=o,po===Ye&&(po=0)),Mr(r)}function e_(r,s){s===0&&(s=dl()),r=Ja(r,s),r!==null&&(Kr(r,s),Mr(r))}function xA(r){var s=r.memoizedState,o=0;s!==null&&(o=s.retryLane),e_(r,o)}function TA(r,s){var o=0;switch(r.tag){case 13:var c=r.stateNode,h=r.memoizedState;h!==null&&(o=h.retryLane);break;case 19:c=r.stateNode;break;case 22:c=r.stateNode._retryCache;break;default:throw Error(i(314))}c!==null&&c.delete(s),e_(r,o)}function wA(r,s){return mt(r,s)}var md=null,bo=null,qm=!1,pd=!1,Fm=!1,ha=0;function Mr(r){r!==bo&&r.next===null&&(bo===null?md=bo=r:bo=bo.next=r),pd=!0,qm||(qm=!0,SA())}function nc(r,s){if(!Fm&&pd){Fm=!0;do for(var o=!1,c=md;c!==null;){if(r!==0){var h=c.pendingLanes;if(h===0)var g=0;else{var x=c.suspendedLanes,w=c.pingedLanes;g=(1<<31-cn(42|r)+1)-1,g&=h&~(x&~w),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(o=!0,i_(c,g))}else g=Ye,g=Pa(c,c===dt?g:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(g&3)===0||Vs(c,g)||(o=!0,i_(c,g));c=c.next}while(o);Fm=!1}}function AA(){t_()}function t_(){pd=qm=!1;var r=0;ha!==0&&(PA()&&(r=ha),ha=0);for(var s=yn(),o=null,c=md;c!==null;){var h=c.next,g=n_(c,s);g===0?(c.next=null,o===null?md=h:o.next=h,h===null&&(bo=o)):(o=c,(r!==0||(g&3)!==0)&&(pd=!0)),c=h}nc(r)}function n_(r,s){for(var o=r.suspendedLanes,c=r.pingedLanes,h=r.expirationTimes,g=r.pendingLanes&-62914561;0<g;){var x=31-cn(g),w=1<<x,I=h[x];I===-1?((w&o)===0||(w&c)!==0)&&(h[x]=cl(w,s)):I<=s&&(r.expiredLanes|=w),g&=~w}if(s=dt,o=Ye,o=Pa(r,r===s?o:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),c=r.callbackNode,o===0||r===s&&(nt===2||nt===9)||r.cancelPendingCommit!==null)return c!==null&&c!==null&&_r(c),r.callbackNode=null,r.callbackPriority=0;if((o&3)===0||Vs(r,o)){if(s=o&-o,s===r.callbackPriority)return s;switch(c!==null&&_r(c),Ma(o)){case 2:case 8:o=Da;break;case 32:o=js;break;case 268435456:o=ja;break;default:o=js}return c=r_.bind(null,r),o=mt(o,c),r.callbackPriority=s,r.callbackNode=o,s}return c!==null&&c!==null&&_r(c),r.callbackPriority=2,r.callbackNode=null,2}function r_(r,s){if(nn!==0&&nn!==5)return r.callbackNode=null,r.callbackPriority=0,null;var o=r.callbackNode;if(fd()&&r.callbackNode!==o)return null;var c=Ye;return c=Pa(r,r===dt?c:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),c===0?null:(Uv(r,c,s),n_(r,yn()),r.callbackNode!=null&&r.callbackNode===o?r_.bind(null,r):null)}function i_(r,s){if(fd())return null;Uv(r,s,!0)}function SA(){kA(function(){(tt&6)!==0?mt(ol,AA):t_()})}function Hm(){return ha===0&&(ha=ul()),ha}function s_(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:Ba(""+r)}function a_(r,s){var o=s.ownerDocument.createElement("input");return o.name=s.name,o.value=s.value,r.id&&o.setAttribute("form",r.id),s.parentNode.insertBefore(o,s),r=new FormData(r),o.parentNode.removeChild(o),r}function NA(r,s,o,c,h){if(s==="submit"&&o&&o.stateNode===h){var g=s_((h[It]||null).action),x=c.submitter;x&&(s=(s=x[It]||null)?s_(s.formAction):x.getAttribute("formAction"),s!==null&&(g=s,x=null));var w=new qa("action","action",null,c,h);r.push({event:w,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(ha!==0){var I=x?a_(h,x):new FormData(h);um(o,{pending:!0,data:I,method:h.method,action:g},null,I)}}else typeof g=="function"&&(w.preventDefault(),I=x?a_(h,x):new FormData(h),um(o,{pending:!0,data:I,method:h.method,action:g},g,I))},currentTarget:h}]})}}for(var Gm=0;Gm<Rf.length;Gm++){var $m=Rf[Gm],CA=$m.toLowerCase(),RA=$m[0].toUpperCase()+$m.slice(1);cr(CA,"on"+RA)}cr(Uy,"onAnimationEnd"),cr(zy,"onAnimationIteration"),cr(By,"onAnimationStart"),cr("dblclick","onDoubleClick"),cr("focusin","onFocus"),cr("focusout","onBlur"),cr($w,"onTransitionRun"),cr(Yw,"onTransitionStart"),cr(Kw,"onTransitionCancel"),cr(qy,"onTransitionEnd"),Wr("onMouseEnter",["mouseout","mouseover"]),Wr("onMouseLeave",["mouseout","mouseover"]),Wr("onPointerEnter",["pointerout","pointerover"]),Wr("onPointerLeave",["pointerout","pointerover"]),or("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),or("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),or("onBeforeInput",["compositionend","keypress","textInput","paste"]),or("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),or("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),or("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var rc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),IA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(rc));function o_(r,s){s=(s&4)!==0;for(var o=0;o<r.length;o++){var c=r[o],h=c.event;c=c.listeners;e:{var g=void 0;if(s)for(var x=c.length-1;0<=x;x--){var w=c[x],I=w.instance,G=w.currentTarget;if(w=w.listener,I!==g&&h.isPropagationStopped())break e;g=w,h.currentTarget=G;try{g(h)}catch(J){nd(J)}h.currentTarget=null,g=I}else for(x=0;x<c.length;x++){if(w=c[x],I=w.instance,G=w.currentTarget,w=w.listener,I!==g&&h.isPropagationStopped())break e;g=w,h.currentTarget=G;try{g(h)}catch(J){nd(J)}h.currentTarget=null,g=I}}}}function ze(r,s){var o=s[ml];o===void 0&&(o=s[ml]=new Set);var c=r+"__bubble";o.has(c)||(l_(s,r,2,!1),o.add(c))}function Ym(r,s,o){var c=0;s&&(c|=4),l_(o,r,c,s)}var gd="_reactListening"+Math.random().toString(36).slice(2);function Km(r){if(!r[gd]){r[gd]=!0,pl.forEach(function(o){o!=="selectionchange"&&(IA.has(o)||Ym(o,!1,r),Ym(o,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[gd]||(s[gd]=!0,Ym("selectionchange",!1,s))}}function l_(r,s,o,c){switch(D_(s)){case 2:var h=rS;break;case 8:h=iS;break;default:h=lp}o=h.bind(null,s,o,r),h=void 0,!Yn||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(h=!0),c?h!==void 0?r.addEventListener(s,o,{capture:!0,passive:h}):r.addEventListener(s,o,!0):h!==void 0?r.addEventListener(s,o,{passive:h}):r.addEventListener(s,o,!1)}function Qm(r,s,o,c,h){var g=c;if((s&1)===0&&(s&2)===0&&c!==null)e:for(;;){if(c===null)return;var x=c.tag;if(x===3||x===4){var w=c.stateNode.containerInfo;if(w===h)break;if(x===4)for(x=c.return;x!==null;){var I=x.tag;if((I===3||I===4)&&x.stateNode.containerInfo===h)return;x=x.return}for(;w!==null;){if(x=Qr(w),x===null)return;if(I=x.tag,I===5||I===6||I===26||I===27){c=g=x;continue e}w=w.parentNode}}c=c.return}vu(function(){var G=g,J=$n(o),ie=[];e:{var Y=Fy.get(r);if(Y!==void 0){var K=qa,Ne=r;switch(r){case"keypress":if(Sr(o)===0)break e;case"keydown":case"keyup":K=Ka;break;case"focusin":Ne="focus",K=Ga;break;case"focusout":Ne="blur",K=Ga;break;case"beforeblur":case"afterblur":K=Ga;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":K=Kn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":K=Ef;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":K=Su;break;case Uy:case zy:case By:K=$a;break;case qy:K=Cu;break;case"scroll":case"scrollend":K=_u;break;case"wheel":K=Qa;break;case"copy":case"cut":case"paste":K=Ya;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":K=Nl;break;case"toggle":case"beforetoggle":K=Iu}var Te=(s&4)!==0,lt=!Te&&(r==="scroll"||r==="scrollend"),q=Te?Y!==null?Y+"Capture":null:Y;Te=[];for(var L=G,H;L!==null;){var te=L;if(H=te.stateNode,te=te.tag,te!==5&&te!==26&&te!==27||H===null||q===null||(te=Gs(L,q),te!=null&&Te.push(ic(L,te,H))),lt)break;L=L.return}0<Te.length&&(Y=new K(Y,Ne,null,o,J),ie.push({event:Y,listeners:Te}))}}if((s&7)===0){e:{if(Y=r==="mouseover"||r==="pointerover",K=r==="mouseout"||r==="pointerout",Y&&o!==Jr&&(Ne=o.relatedTarget||o.fromElement)&&(Qr(Ne)||Ne[Hn]))break e;if((K||Y)&&(Y=J.window===J?J:(Y=J.ownerDocument)?Y.defaultView||Y.parentWindow:window,K?(Ne=o.relatedTarget||o.toElement,K=G,Ne=Ne?Qr(Ne):null,Ne!==null&&(lt=l(Ne),Te=Ne.tag,Ne!==lt||Te!==5&&Te!==27&&Te!==6)&&(Ne=null)):(K=null,Ne=G),K!==Ne)){if(Te=Kn,te="onMouseLeave",q="onMouseEnter",L="mouse",(r==="pointerout"||r==="pointerover")&&(Te=Nl,te="onPointerLeave",q="onPointerEnter",L="pointer"),lt=K==null?Y:xr(K),H=Ne==null?Y:xr(Ne),Y=new Te(te,L+"leave",K,o,J),Y.target=lt,Y.relatedTarget=H,te=null,Qr(J)===G&&(Te=new Te(q,L+"enter",Ne,o,J),Te.target=H,Te.relatedTarget=lt,te=Te),lt=te,K&&Ne)t:{for(Te=K,q=Ne,L=0,H=Te;H;H=Eo(H))L++;for(H=0,te=q;te;te=Eo(te))H++;for(;0<L-H;)Te=Eo(Te),L--;for(;0<H-L;)q=Eo(q),H--;for(;L--;){if(Te===q||q!==null&&Te===q.alternate)break t;Te=Eo(Te),q=Eo(q)}Te=null}else Te=null;K!==null&&c_(ie,Y,K,Te,!1),Ne!==null&&lt!==null&&c_(ie,lt,Ne,Te,!0)}}e:{if(Y=G?xr(G):window,K=Y.nodeName&&Y.nodeName.toLowerCase(),K==="select"||K==="input"&&Y.type==="file")var ge=Cy;else if(Lt(Y))if(Ry)ge=Fw;else{ge=Bw;var Le=zw}else K=Y.nodeName,!K||K.toLowerCase()!=="input"||Y.type!=="checkbox"&&Y.type!=="radio"?G&&bl(G.elementType)&&(ge=Cy):ge=qw;if(ge&&(ge=ge(r,G))){ii(ie,ge,o,J);break e}Le&&Le(r,Y,G),r==="focusout"&&G&&Y.type==="number"&&G.memoizedProps.value!=null&&Vi(Y,"number",Y.value)}switch(Le=G?xr(G):window,r){case"focusin":(Lt(Le)||Le.contentEditable==="true")&&(Wa=Le,Sf=G,Il=null);break;case"focusout":Il=Sf=Wa=null;break;case"mousedown":Nf=!0;break;case"contextmenu":case"mouseup":case"dragend":Nf=!1,Vy(ie,o,J);break;case"selectionchange":if(Gw)break;case"keydown":case"keyup":Vy(ie,o,J)}var be;if(Rr)e:{switch(r){case"compositionstart":var we="onCompositionStart";break e;case"compositionend":we="onCompositionEnd";break e;case"compositionupdate":we="onCompositionUpdate";break e}we=void 0}else Ge?W(r,o)&&(we="onCompositionEnd"):r==="keydown"&&o.keyCode===229&&(we="onCompositionStart");we&&(E&&o.locale!=="ko"&&(Ge||we!=="onCompositionStart"?we==="onCompositionEnd"&&Ge&&(be=xl()):(Ar=J,Li="value"in Ar?Ar.value:Ar.textContent,Ge=!0)),Le=yd(G,we),0<Le.length&&(we=new Al(we,r,null,o,J),ie.push({event:we,listeners:Le}),be?we.data=be:(be=de(o),be!==null&&(we.data=be)))),(be=_?Vt(r,o):$e(r,o))&&(we=yd(G,"onBeforeInput"),0<we.length&&(Le=new Al("onBeforeInput","beforeinput",null,o,J),ie.push({event:Le,listeners:we}),Le.data=be)),NA(ie,r,G,o,J)}o_(ie,s)})}function ic(r,s,o){return{instance:r,listener:s,currentTarget:o}}function yd(r,s){for(var o=s+"Capture",c=[];r!==null;){var h=r,g=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||g===null||(h=Gs(r,o),h!=null&&c.unshift(ic(r,h,g)),h=Gs(r,s),h!=null&&c.push(ic(r,h,g))),r.tag===3)return c;r=r.return}return[]}function Eo(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function c_(r,s,o,c,h){for(var g=s._reactName,x=[];o!==null&&o!==c;){var w=o,I=w.alternate,G=w.stateNode;if(w=w.tag,I!==null&&I===c)break;w!==5&&w!==26&&w!==27||G===null||(I=G,h?(G=Gs(o,g),G!=null&&x.unshift(ic(o,G,I))):h||(G=Gs(o,g),G!=null&&x.push(ic(o,G,I)))),o=o.return}x.length!==0&&r.push({event:s,listeners:x})}var OA=/\r\n?/g,DA=/\u0000|\uFFFD/g;function u_(r){return(typeof r=="string"?r:""+r).replace(OA,`
`).replace(DA,"")}function d_(r,s){return s=u_(s),u_(r)===s}function vd(){}function ot(r,s,o,c,h,g){switch(o){case"children":typeof c=="string"?s==="body"||s==="textarea"&&c===""||Gn(r,c):(typeof c=="number"||typeof c=="bigint")&&s!=="body"&&Gn(r,""+c);break;case"className":Tr(r,"class",c);break;case"tabIndex":Tr(r,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Tr(r,o,c);break;case"style":_l(r,c,g);break;case"data":if(s!=="object"){Tr(r,"data",c);break}case"src":case"href":if(c===""&&(s!=="a"||o!=="href")){r.removeAttribute(o);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){r.removeAttribute(o);break}c=Ba(""+c),r.setAttribute(o,c);break;case"action":case"formAction":if(typeof c=="function"){r.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(o==="formAction"?(s!=="input"&&ot(r,s,"name",h.name,h,null),ot(r,s,"formEncType",h.formEncType,h,null),ot(r,s,"formMethod",h.formMethod,h,null),ot(r,s,"formTarget",h.formTarget,h,null)):(ot(r,s,"encType",h.encType,h,null),ot(r,s,"method",h.method,h,null),ot(r,s,"target",h.target,h,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){r.removeAttribute(o);break}c=Ba(""+c),r.setAttribute(o,c);break;case"onClick":c!=null&&(r.onclick=vd);break;case"onScroll":c!=null&&ze("scroll",r);break;case"onScrollEnd":c!=null&&ze("scrollend",r);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(o=c.__html,o!=null){if(h.children!=null)throw Error(i(60));r.innerHTML=o}}break;case"multiple":r.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":r.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){r.removeAttribute("xlink:href");break}o=Ba(""+c),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?r.setAttribute(o,""+c):r.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?r.setAttribute(o,""):r.removeAttribute(o);break;case"capture":case"download":c===!0?r.setAttribute(o,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?r.setAttribute(o,c):r.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?r.setAttribute(o,c):r.removeAttribute(o);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?r.removeAttribute(o):r.setAttribute(o,c);break;case"popover":ze("beforetoggle",r),ze("toggle",r),ki(r,"popover",c);break;case"xlinkActuate":Jt(r,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Jt(r,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Jt(r,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Jt(r,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Jt(r,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Jt(r,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Jt(r,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Jt(r,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Jt(r,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":ki(r,"is",c);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=_f.get(o)||o,ki(r,o,c))}}function Wm(r,s,o,c,h,g){switch(o){case"style":_l(r,c,g);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(o=c.__html,o!=null){if(h.children!=null)throw Error(i(60));r.innerHTML=o}}break;case"children":typeof c=="string"?Gn(r,c):(typeof c=="number"||typeof c=="bigint")&&Gn(r,""+c);break;case"onScroll":c!=null&&ze("scroll",r);break;case"onScrollEnd":c!=null&&ze("scrollend",r);break;case"onClick":c!=null&&(r.onclick=vd);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ka.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(h=o.endsWith("Capture"),s=o.slice(2,h?o.length-7:void 0),g=r[It]||null,g=g!=null?g[o]:null,typeof g=="function"&&r.removeEventListener(s,g,h),typeof c=="function")){typeof g!="function"&&g!==null&&(o in r?r[o]=null:r.hasAttribute(o)&&r.removeAttribute(o)),r.addEventListener(s,c,h);break e}o in r?r[o]=c:c===!0?r.setAttribute(o,""):ki(r,o,c)}}}function rn(r,s,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ze("error",r),ze("load",r);var c=!1,h=!1,g;for(g in o)if(o.hasOwnProperty(g)){var x=o[g];if(x!=null)switch(g){case"src":c=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:ot(r,s,g,x,o,null)}}h&&ot(r,s,"srcSet",o.srcSet,o,null),c&&ot(r,s,"src",o.src,o,null);return;case"input":ze("invalid",r);var w=g=x=h=null,I=null,G=null;for(c in o)if(o.hasOwnProperty(c)){var J=o[c];if(J!=null)switch(c){case"name":h=J;break;case"type":x=J;break;case"checked":I=J;break;case"defaultChecked":G=J;break;case"value":g=J;break;case"defaultValue":w=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(i(137,s));break;default:ot(r,s,c,J,o,null)}}qs(r,g,w,I,G,x,h,!1),za(r);return;case"select":ze("invalid",r),c=x=g=null;for(h in o)if(o.hasOwnProperty(h)&&(w=o[h],w!=null))switch(h){case"value":g=w;break;case"defaultValue":x=w;break;case"multiple":c=w;default:ot(r,s,h,w,o,null)}s=g,o=x,r.multiple=!!c,s!=null?Zr(r,!!c,s,!1):o!=null&&Zr(r,!!c,o,!0);return;case"textarea":ze("invalid",r),g=h=c=null;for(x in o)if(o.hasOwnProperty(x)&&(w=o[x],w!=null))switch(x){case"value":c=w;break;case"defaultValue":h=w;break;case"children":g=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(i(91));break;default:ot(r,s,x,w,o,null)}Fs(r,c,h,g),za(r);return;case"option":for(I in o)if(o.hasOwnProperty(I)&&(c=o[I],c!=null))switch(I){case"selected":r.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:ot(r,s,I,c,o,null)}return;case"dialog":ze("beforetoggle",r),ze("toggle",r),ze("cancel",r),ze("close",r);break;case"iframe":case"object":ze("load",r);break;case"video":case"audio":for(c=0;c<rc.length;c++)ze(rc[c],r);break;case"image":ze("error",r),ze("load",r);break;case"details":ze("toggle",r);break;case"embed":case"source":case"link":ze("error",r),ze("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(G in o)if(o.hasOwnProperty(G)&&(c=o[G],c!=null))switch(G){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:ot(r,s,G,c,o,null)}return;default:if(bl(s)){for(J in o)o.hasOwnProperty(J)&&(c=o[J],c!==void 0&&Wm(r,s,J,c,o,void 0));return}}for(w in o)o.hasOwnProperty(w)&&(c=o[w],c!=null&&ot(r,s,w,c,o,null))}function jA(r,s,o,c){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,g=null,x=null,w=null,I=null,G=null,J=null;for(K in o){var ie=o[K];if(o.hasOwnProperty(K)&&ie!=null)switch(K){case"checked":break;case"value":break;case"defaultValue":I=ie;default:c.hasOwnProperty(K)||ot(r,s,K,null,c,ie)}}for(var Y in c){var K=c[Y];if(ie=o[Y],c.hasOwnProperty(Y)&&(K!=null||ie!=null))switch(Y){case"type":g=K;break;case"name":h=K;break;case"checked":G=K;break;case"defaultChecked":J=K;break;case"value":x=K;break;case"defaultValue":w=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(i(137,s));break;default:K!==ie&&ot(r,s,Y,K,c,ie)}}Mn(r,x,w,I,G,J,g,h);return;case"select":K=x=w=Y=null;for(g in o)if(I=o[g],o.hasOwnProperty(g)&&I!=null)switch(g){case"value":break;case"multiple":K=I;default:c.hasOwnProperty(g)||ot(r,s,g,null,c,I)}for(h in c)if(g=c[h],I=o[h],c.hasOwnProperty(h)&&(g!=null||I!=null))switch(h){case"value":Y=g;break;case"defaultValue":w=g;break;case"multiple":x=g;default:g!==I&&ot(r,s,h,g,c,I)}s=w,o=x,c=K,Y!=null?Zr(r,!!o,Y,!1):!!c!=!!o&&(s!=null?Zr(r,!!o,s,!0):Zr(r,!!o,o?[]:"",!1));return;case"textarea":K=Y=null;for(w in o)if(h=o[w],o.hasOwnProperty(w)&&h!=null&&!c.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:ot(r,s,w,null,c,h)}for(x in c)if(h=c[x],g=o[x],c.hasOwnProperty(x)&&(h!=null||g!=null))switch(x){case"value":Y=h;break;case"defaultValue":K=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(i(91));break;default:h!==g&&ot(r,s,x,h,c,g)}st(r,Y,K);return;case"option":for(var Ne in o)if(Y=o[Ne],o.hasOwnProperty(Ne)&&Y!=null&&!c.hasOwnProperty(Ne))switch(Ne){case"selected":r.selected=!1;break;default:ot(r,s,Ne,null,c,Y)}for(I in c)if(Y=c[I],K=o[I],c.hasOwnProperty(I)&&Y!==K&&(Y!=null||K!=null))switch(I){case"selected":r.selected=Y&&typeof Y!="function"&&typeof Y!="symbol";break;default:ot(r,s,I,Y,c,K)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Te in o)Y=o[Te],o.hasOwnProperty(Te)&&Y!=null&&!c.hasOwnProperty(Te)&&ot(r,s,Te,null,c,Y);for(G in c)if(Y=c[G],K=o[G],c.hasOwnProperty(G)&&Y!==K&&(Y!=null||K!=null))switch(G){case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(i(137,s));break;default:ot(r,s,G,Y,c,K)}return;default:if(bl(s)){for(var lt in o)Y=o[lt],o.hasOwnProperty(lt)&&Y!==void 0&&!c.hasOwnProperty(lt)&&Wm(r,s,lt,void 0,c,Y);for(J in c)Y=c[J],K=o[J],!c.hasOwnProperty(J)||Y===K||Y===void 0&&K===void 0||Wm(r,s,J,Y,c,K);return}}for(var q in o)Y=o[q],o.hasOwnProperty(q)&&Y!=null&&!c.hasOwnProperty(q)&&ot(r,s,q,null,c,Y);for(ie in c)Y=c[ie],K=o[ie],!c.hasOwnProperty(ie)||Y===K||Y==null&&K==null||ot(r,s,ie,Y,c,K)}var Xm=null,Zm=null;function _d(r){return r.nodeType===9?r:r.ownerDocument}function h_(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function f_(r,s){if(r===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&s==="foreignObject"?0:r}function Jm(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var ep=null;function PA(){var r=window.event;return r&&r.type==="popstate"?r===ep?!1:(ep=r,!0):(ep=null,!1)}var m_=typeof setTimeout=="function"?setTimeout:void 0,MA=typeof clearTimeout=="function"?clearTimeout:void 0,p_=typeof Promise=="function"?Promise:void 0,kA=typeof queueMicrotask=="function"?queueMicrotask:typeof p_<"u"?function(r){return p_.resolve(null).then(r).catch(VA)}:m_;function VA(r){setTimeout(function(){throw r})}function es(r){return r==="head"}function g_(r,s){var o=s,c=0,h=0;do{var g=o.nextSibling;if(r.removeChild(o),g&&g.nodeType===8)if(o=g.data,o==="/$"){if(0<c&&8>c){o=c;var x=r.ownerDocument;if(o&1&&sc(x.documentElement),o&2&&sc(x.body),o&4)for(o=x.head,sc(o),x=o.firstChild;x;){var w=x.nextSibling,I=x.nodeName;x[Ls]||I==="SCRIPT"||I==="STYLE"||I==="LINK"&&x.rel.toLowerCase()==="stylesheet"||o.removeChild(x),x=w}}if(h===0){r.removeChild(g),fc(s);return}h--}else o==="$"||o==="$?"||o==="$!"?h++:c=o.charCodeAt(0)-48;else c=0;o=g}while(o);fc(s)}function tp(r){var s=r.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var o=s;switch(s=s.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":tp(o),Mi(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}r.removeChild(o)}}function LA(r,s,o,c){for(;r.nodeType===1;){var h=o;if(r.nodeName.toLowerCase()!==s.toLowerCase()){if(!c&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(c){if(!r[Ls])switch(s){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(g=r.getAttribute("rel"),g==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(g!==h.rel||r.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||r.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||r.getAttribute("title")!==(h.title==null?null:h.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(g=r.getAttribute("src"),(g!==(h.src==null?null:h.src)||r.getAttribute("type")!==(h.type==null?null:h.type)||r.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&g&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(s==="input"&&r.type==="hidden"){var g=h.name==null?null:""+h.name;if(h.type==="hidden"&&r.getAttribute("name")===g)return r}else return r;if(r=dr(r.nextSibling),r===null)break}return null}function UA(r,s,o){if(s==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!o||(r=dr(r.nextSibling),r===null))return null;return r}function np(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState==="complete"}function zA(r,s){var o=r.ownerDocument;if(r.data!=="$?"||o.readyState==="complete")s();else{var c=function(){s(),o.removeEventListener("DOMContentLoaded",c)};o.addEventListener("DOMContentLoaded",c),r._reactRetry=c}}function dr(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return r}var rp=null;function y_(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var o=r.data;if(o==="$"||o==="$!"||o==="$?"){if(s===0)return r;s--}else o==="/$"&&s++}r=r.previousSibling}return null}function v_(r,s,o){switch(s=_d(o),r){case"html":if(r=s.documentElement,!r)throw Error(i(452));return r;case"head":if(r=s.head,!r)throw Error(i(453));return r;case"body":if(r=s.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}function sc(r){for(var s=r.attributes;s.length;)r.removeAttributeNode(s[0]);Mi(r)}var tr=new Map,__=new Set;function bd(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var yi=ue.d;ue.d={f:BA,r:qA,D:FA,C:HA,L:GA,m:$A,X:KA,S:YA,M:QA};function BA(){var r=yi.f(),s=dd();return r||s}function qA(r){var s=Er(r);s!==null&&s.tag===5&&s.type==="form"?U0(s):yi.r(r)}var xo=typeof document>"u"?null:document;function b_(r,s,o){var c=xo;if(c&&typeof s=="string"&&s){var h=Ot(s);h='link[rel="'+r+'"][href="'+h+'"]',typeof o=="string"&&(h+='[crossorigin="'+o+'"]'),__.has(h)||(__.add(h),r={rel:r,crossOrigin:o,href:s},c.querySelector(h)===null&&(s=c.createElement("link"),rn(s,"link",r),St(s),c.head.appendChild(s)))}}function FA(r){yi.D(r),b_("dns-prefetch",r,null)}function HA(r,s){yi.C(r,s),b_("preconnect",r,s)}function GA(r,s,o){yi.L(r,s,o);var c=xo;if(c&&r&&s){var h='link[rel="preload"][as="'+Ot(s)+'"]';s==="image"&&o&&o.imageSrcSet?(h+='[imagesrcset="'+Ot(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(h+='[imagesizes="'+Ot(o.imageSizes)+'"]')):h+='[href="'+Ot(r)+'"]';var g=h;switch(s){case"style":g=To(r);break;case"script":g=wo(r)}tr.has(g)||(r=v({rel:"preload",href:s==="image"&&o&&o.imageSrcSet?void 0:r,as:s},o),tr.set(g,r),c.querySelector(h)!==null||s==="style"&&c.querySelector(ac(g))||s==="script"&&c.querySelector(oc(g))||(s=c.createElement("link"),rn(s,"link",r),St(s),c.head.appendChild(s)))}}function $A(r,s){yi.m(r,s);var o=xo;if(o&&r){var c=s&&typeof s.as=="string"?s.as:"script",h='link[rel="modulepreload"][as="'+Ot(c)+'"][href="'+Ot(r)+'"]',g=h;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=wo(r)}if(!tr.has(g)&&(r=v({rel:"modulepreload",href:r},s),tr.set(g,r),o.querySelector(h)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(oc(g)))return}c=o.createElement("link"),rn(c,"link",r),St(c),o.head.appendChild(c)}}}function YA(r,s,o){yi.S(r,s,o);var c=xo;if(c&&r){var h=vn(c).hoistableStyles,g=To(r);s=s||"default";var x=h.get(g);if(!x){var w={loading:0,preload:null};if(x=c.querySelector(ac(g)))w.loading=5;else{r=v({rel:"stylesheet",href:r,"data-precedence":s},o),(o=tr.get(g))&&ip(r,o);var I=x=c.createElement("link");St(I),rn(I,"link",r),I._p=new Promise(function(G,J){I.onload=G,I.onerror=J}),I.addEventListener("load",function(){w.loading|=1}),I.addEventListener("error",function(){w.loading|=2}),w.loading|=4,Ed(x,s,c)}x={type:"stylesheet",instance:x,count:1,state:w},h.set(g,x)}}}function KA(r,s){yi.X(r,s);var o=xo;if(o&&r){var c=vn(o).hoistableScripts,h=wo(r),g=c.get(h);g||(g=o.querySelector(oc(h)),g||(r=v({src:r,async:!0},s),(s=tr.get(h))&&sp(r,s),g=o.createElement("script"),St(g),rn(g,"link",r),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},c.set(h,g))}}function QA(r,s){yi.M(r,s);var o=xo;if(o&&r){var c=vn(o).hoistableScripts,h=wo(r),g=c.get(h);g||(g=o.querySelector(oc(h)),g||(r=v({src:r,async:!0,type:"module"},s),(s=tr.get(h))&&sp(r,s),g=o.createElement("script"),St(g),rn(g,"link",r),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},c.set(h,g))}}function E_(r,s,o,c){var h=(h=ee.current)?bd(h):null;if(!h)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(s=To(o.href),o=vn(h).hoistableStyles,c=o.get(s),c||(c={type:"style",instance:null,count:0,state:null},o.set(s,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){r=To(o.href);var g=vn(h).hoistableStyles,x=g.get(r);if(x||(h=h.ownerDocument||h,x={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(r,x),(g=h.querySelector(ac(r)))&&!g._p&&(x.instance=g,x.state.loading=5),tr.has(r)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},tr.set(r,o),g||WA(h,r,o,x.state))),s&&c===null)throw Error(i(528,""));return x}if(s&&c!==null)throw Error(i(529,""));return null;case"script":return s=o.async,o=o.src,typeof o=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=wo(o),o=vn(h).hoistableScripts,c=o.get(s),c||(c={type:"script",instance:null,count:0,state:null},o.set(s,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function To(r){return'href="'+Ot(r)+'"'}function ac(r){return'link[rel="stylesheet"]['+r+"]"}function x_(r){return v({},r,{"data-precedence":r.precedence,precedence:null})}function WA(r,s,o,c){r.querySelector('link[rel="preload"][as="style"]['+s+"]")?c.loading=1:(s=r.createElement("link"),c.preload=s,s.addEventListener("load",function(){return c.loading|=1}),s.addEventListener("error",function(){return c.loading|=2}),rn(s,"link",o),St(s),r.head.appendChild(s))}function wo(r){return'[src="'+Ot(r)+'"]'}function oc(r){return"script[async]"+r}function T_(r,s,o){if(s.count++,s.instance===null)switch(s.type){case"style":var c=r.querySelector('style[data-href~="'+Ot(o.href)+'"]');if(c)return s.instance=c,St(c),c;var h=v({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return c=(r.ownerDocument||r).createElement("style"),St(c),rn(c,"style",h),Ed(c,o.precedence,r),s.instance=c;case"stylesheet":h=To(o.href);var g=r.querySelector(ac(h));if(g)return s.state.loading|=4,s.instance=g,St(g),g;c=x_(o),(h=tr.get(h))&&ip(c,h),g=(r.ownerDocument||r).createElement("link"),St(g);var x=g;return x._p=new Promise(function(w,I){x.onload=w,x.onerror=I}),rn(g,"link",c),s.state.loading|=4,Ed(g,o.precedence,r),s.instance=g;case"script":return g=wo(o.src),(h=r.querySelector(oc(g)))?(s.instance=h,St(h),h):(c=o,(h=tr.get(g))&&(c=v({},o),sp(c,h)),r=r.ownerDocument||r,h=r.createElement("script"),St(h),rn(h,"link",c),r.head.appendChild(h),s.instance=h);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(c=s.instance,s.state.loading|=4,Ed(c,o.precedence,r));return s.instance}function Ed(r,s,o){for(var c=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=c.length?c[c.length-1]:null,g=h,x=0;x<c.length;x++){var w=c[x];if(w.dataset.precedence===s)g=w;else if(g!==h)break}g?g.parentNode.insertBefore(r,g.nextSibling):(s=o.nodeType===9?o.head:o,s.insertBefore(r,s.firstChild))}function ip(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.title==null&&(r.title=s.title)}function sp(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.integrity==null&&(r.integrity=s.integrity)}var xd=null;function w_(r,s,o){if(xd===null){var c=new Map,h=xd=new Map;h.set(o,c)}else h=xd,c=h.get(o),c||(c=new Map,h.set(o,c));if(c.has(r))return c;for(c.set(r,null),o=o.getElementsByTagName(r),h=0;h<o.length;h++){var g=o[h];if(!(g[Ls]||g[kt]||r==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var x=g.getAttribute(s)||"";x=r+x;var w=c.get(x);w?w.push(g):c.set(x,[g])}}return c}function A_(r,s,o){r=r.ownerDocument||r,r.head.insertBefore(o,s==="title"?r.querySelector("head > title"):null)}function XA(r,s,o){if(o===1||s.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return r=s.disabled,typeof s.precedence=="string"&&r==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function S_(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}var lc=null;function ZA(){}function JA(r,s,o){if(lc===null)throw Error(i(475));var c=lc;if(s.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var h=To(o.href),g=r.querySelector(ac(h));if(g){r=g._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(c.count++,c=Td.bind(c),r.then(c,c)),s.state.loading|=4,s.instance=g,St(g);return}g=r.ownerDocument||r,o=x_(o),(h=tr.get(h))&&ip(o,h),g=g.createElement("link"),St(g);var x=g;x._p=new Promise(function(w,I){x.onload=w,x.onerror=I}),rn(g,"link",o),s.instance=g}c.stylesheets===null&&(c.stylesheets=new Map),c.stylesheets.set(s,r),(r=s.state.preload)&&(s.state.loading&3)===0&&(c.count++,s=Td.bind(c),r.addEventListener("load",s),r.addEventListener("error",s))}}function eS(){if(lc===null)throw Error(i(475));var r=lc;return r.stylesheets&&r.count===0&&ap(r,r.stylesheets),0<r.count?function(s){var o=setTimeout(function(){if(r.stylesheets&&ap(r,r.stylesheets),r.unsuspend){var c=r.unsuspend;r.unsuspend=null,c()}},6e4);return r.unsuspend=s,function(){r.unsuspend=null,clearTimeout(o)}}:null}function Td(){if(this.count--,this.count===0){if(this.stylesheets)ap(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var wd=null;function ap(r,s){r.stylesheets=null,r.unsuspend!==null&&(r.count++,wd=new Map,s.forEach(tS,r),wd=null,Td.call(r))}function tS(r,s){if(!(s.state.loading&4)){var o=wd.get(r);if(o)var c=o.get(null);else{o=new Map,wd.set(r,o);for(var h=r.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<h.length;g++){var x=h[g];(x.nodeName==="LINK"||x.getAttribute("media")!=="not all")&&(o.set(x.dataset.precedence,x),c=x)}c&&o.set(null,c)}h=s.instance,x=h.getAttribute("data-precedence"),g=o.get(x)||c,g===c&&o.set(null,h),o.set(x,h),this.count++,c=Td.bind(this),h.addEventListener("load",c),h.addEventListener("error",c),g?g.parentNode.insertBefore(h,g.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(h,r.firstChild)),s.state.loading|=4}}var cc={$$typeof:U,Provider:null,Consumer:null,_currentValue:ye,_currentValue2:ye,_threadCount:0};function nS(r,s,o,c,h,g,x,w){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Yr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Yr(0),this.hiddenUpdates=Yr(null),this.identifierPrefix=c,this.onUncaughtError=h,this.onCaughtError=g,this.onRecoverableError=x,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=w,this.incompleteTransitions=new Map}function N_(r,s,o,c,h,g,x,w,I,G,J,ie){return r=new nS(r,s,o,x,w,I,G,ie),s=1,g===!0&&(s|=24),g=Vn(3,null,null,s),r.current=g,g.stateNode=r,s=Bf(),s.refCount++,r.pooledCache=s,s.refCount++,g.memoizedState={element:c,isDehydrated:o,cache:s},Gf(g),r}function C_(r){return r?(r=eo,r):eo}function R_(r,s,o,c,h,g){h=C_(h),c.context===null?c.context=h:c.pendingContext=h,c=Bi(s),c.payload={element:o},g=g===void 0?null:g,g!==null&&(c.callback=g),o=qi(r,c,s),o!==null&&(qn(o,r,s),Ul(o,r,s))}function I_(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var o=r.retryLane;r.retryLane=o!==0&&o<s?o:s}}function op(r,s){I_(r,s),(r=r.alternate)&&I_(r,s)}function O_(r){if(r.tag===13){var s=Ja(r,67108864);s!==null&&qn(s,r,67108864),op(r,67108864)}}var Ad=!0;function rS(r,s,o,c){var h=Z.T;Z.T=null;var g=ue.p;try{ue.p=2,lp(r,s,o,c)}finally{ue.p=g,Z.T=h}}function iS(r,s,o,c){var h=Z.T;Z.T=null;var g=ue.p;try{ue.p=8,lp(r,s,o,c)}finally{ue.p=g,Z.T=h}}function lp(r,s,o,c){if(Ad){var h=cp(c);if(h===null)Qm(r,s,c,Sd,o),j_(r,c);else if(aS(h,r,s,o,c))c.stopPropagation();else if(j_(r,c),s&4&&-1<sS.indexOf(r)){for(;h!==null;){var g=Er(h);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var x=ar(g.pendingLanes);if(x!==0){var w=g;for(w.pendingLanes|=2,w.entangledLanes|=2;x;){var I=1<<31-cn(x);w.entanglements[1]|=I,x&=~I}Mr(g),(tt&6)===0&&(cd=yn()+500,nc(0))}}break;case 13:w=Ja(g,2),w!==null&&qn(w,g,2),dd(),op(g,2)}if(g=cp(c),g===null&&Qm(r,s,c,Sd,o),g===h)break;h=g}h!==null&&c.stopPropagation()}else Qm(r,s,c,null,o)}}function cp(r){return r=$n(r),up(r)}var Sd=null;function up(r){if(Sd=null,r=Qr(r),r!==null){var s=l(r);if(s===null)r=null;else{var o=s.tag;if(o===13){if(r=u(s),r!==null)return r;r=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null)}}return Sd=r,null}function D_(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ff()){case ol:return 2;case Da:return 8;case js:case mf:return 32;case ja:return 268435456;default:return 32}default:return 32}}var dp=!1,ts=null,ns=null,rs=null,uc=new Map,dc=new Map,is=[],sS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function j_(r,s){switch(r){case"focusin":case"focusout":ts=null;break;case"dragenter":case"dragleave":ns=null;break;case"mouseover":case"mouseout":rs=null;break;case"pointerover":case"pointerout":uc.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":dc.delete(s.pointerId)}}function hc(r,s,o,c,h,g){return r===null||r.nativeEvent!==g?(r={blockedOn:s,domEventName:o,eventSystemFlags:c,nativeEvent:g,targetContainers:[h]},s!==null&&(s=Er(s),s!==null&&O_(s)),r):(r.eventSystemFlags|=c,s=r.targetContainers,h!==null&&s.indexOf(h)===-1&&s.push(h),r)}function aS(r,s,o,c,h){switch(s){case"focusin":return ts=hc(ts,r,s,o,c,h),!0;case"dragenter":return ns=hc(ns,r,s,o,c,h),!0;case"mouseover":return rs=hc(rs,r,s,o,c,h),!0;case"pointerover":var g=h.pointerId;return uc.set(g,hc(uc.get(g)||null,r,s,o,c,h)),!0;case"gotpointercapture":return g=h.pointerId,dc.set(g,hc(dc.get(g)||null,r,s,o,c,h)),!0}return!1}function P_(r){var s=Qr(r.target);if(s!==null){var o=l(s);if(o!==null){if(s=o.tag,s===13){if(s=u(o),s!==null){r.blockedOn=s,du(r.priority,function(){if(o.tag===13){var c=Bn();c=Di(c);var h=Ja(o,c);h!==null&&qn(h,o,c),op(o,c)}});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){r.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Nd(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var o=cp(r.nativeEvent);if(o===null){o=r.nativeEvent;var c=new o.constructor(o.type,o);Jr=c,o.target.dispatchEvent(c),Jr=null}else return s=Er(o),s!==null&&O_(s),r.blockedOn=o,!1;s.shift()}return!0}function M_(r,s,o){Nd(r)&&o.delete(s)}function oS(){dp=!1,ts!==null&&Nd(ts)&&(ts=null),ns!==null&&Nd(ns)&&(ns=null),rs!==null&&Nd(rs)&&(rs=null),uc.forEach(M_),dc.forEach(M_)}function Cd(r,s){r.blockedOn===s&&(r.blockedOn=null,dp||(dp=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,oS)))}var Rd=null;function k_(r){Rd!==r&&(Rd=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Rd===r&&(Rd=null);for(var s=0;s<r.length;s+=3){var o=r[s],c=r[s+1],h=r[s+2];if(typeof c!="function"){if(up(c||o)===null)continue;break}var g=Er(o);g!==null&&(r.splice(s,3),s-=3,um(g,{pending:!0,data:h,method:o.method,action:c},c,h))}}))}function fc(r){function s(I){return Cd(I,r)}ts!==null&&Cd(ts,r),ns!==null&&Cd(ns,r),rs!==null&&Cd(rs,r),uc.forEach(s),dc.forEach(s);for(var o=0;o<is.length;o++){var c=is[o];c.blockedOn===r&&(c.blockedOn=null)}for(;0<is.length&&(o=is[0],o.blockedOn===null);)P_(o),o.blockedOn===null&&is.shift();if(o=(r.ownerDocument||r).$$reactFormReplay,o!=null)for(c=0;c<o.length;c+=3){var h=o[c],g=o[c+1],x=h[It]||null;if(typeof g=="function")x||k_(o);else if(x){var w=null;if(g&&g.hasAttribute("formAction")){if(h=g,x=g[It]||null)w=x.formAction;else if(up(h)!==null)continue}else w=x.action;typeof w=="function"?o[c+1]=w:(o.splice(c,3),c-=3),k_(o)}}}function hp(r){this._internalRoot=r}Id.prototype.render=hp.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(i(409));var o=s.current,c=Bn();R_(o,c,r,s,null,null)},Id.prototype.unmount=hp.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;R_(r.current,2,null,r,null,null),dd(),s[Hn]=null}};function Id(r){this._internalRoot=r}Id.prototype.unstable_scheduleHydration=function(r){if(r){var s=ji();r={blockedOn:null,target:r,priority:s};for(var o=0;o<is.length&&s!==0&&s<is[o].priority;o++);is.splice(o,0,r),o===0&&P_(r)}};var V_=e.version;if(V_!=="19.1.0")throw Error(i(527,V_,"19.1.0"));ue.findDOMNode=function(r){var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=p(s),r=r!==null?y(r):null,r=r===null?null:r.stateNode,r};var lS={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:Z,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Od=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Od.isDisabled&&Od.supportsFiber)try{Tt=Od.inject(lS),et=Od}catch{}}return pc.createRoot=function(r,s){if(!a(r))throw Error(i(299));var o=!1,c="",h=J0,g=ev,x=tv,w=null;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onUncaughtError!==void 0&&(h=s.onUncaughtError),s.onCaughtError!==void 0&&(g=s.onCaughtError),s.onRecoverableError!==void 0&&(x=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(w=s.unstable_transitionCallbacks)),s=N_(r,1,!1,null,null,o,c,h,g,x,w,null),r[Hn]=s.current,Km(r),new hp(s)},pc.hydrateRoot=function(r,s,o){if(!a(r))throw Error(i(299));var c=!1,h="",g=J0,x=ev,w=tv,I=null,G=null;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(h=o.identifierPrefix),o.onUncaughtError!==void 0&&(g=o.onUncaughtError),o.onCaughtError!==void 0&&(x=o.onCaughtError),o.onRecoverableError!==void 0&&(w=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(I=o.unstable_transitionCallbacks),o.formState!==void 0&&(G=o.formState)),s=N_(r,1,!0,s,o??null,c,h,g,x,w,I,G),s.context=C_(null),o=s.current,c=Bn(),c=Di(c),h=Bi(c),h.callback=null,qi(o,h,c),o=c,s.current.lanes=o,Kr(s,o),Mr(s),r[Hn]=s.current,Km(r),new Id(s)},pc.version="19.1.0",pc}var Y_;function _S(){if(Y_)return pp.exports;Y_=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),pp.exports=vS(),pp.exports}var bS=_S(),gc={},K_;function ES(){if(K_)return gc;K_=1,Object.defineProperty(gc,"__esModule",{value:!0}),gc.parse=u,gc.serialize=y;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,i=/^[\u0020-\u003A\u003D-\u007E]*$/,a=Object.prototype.toString,l=(()=>{const T=function(){};return T.prototype=Object.create(null),T})();function u(T,N){const A=new l,k=T.length;if(k<2)return A;const D=(N==null?void 0:N.decode)||v;let $=0;do{const Q=T.indexOf("=",$);if(Q===-1)break;const U=T.indexOf(";",$),ne=U===-1?k:U;if(Q>ne){$=T.lastIndexOf(";",Q-1)+1;continue}const le=f(T,$,Q),pe=p(T,Q,le),j=T.slice(le,pe);if(A[j]===void 0){let C=f(T,Q+1,ne),R=p(T,ne,C);const M=D(T.slice(C,R));A[j]=M}$=ne+1}while($<k);return A}function f(T,N,A){do{const k=T.charCodeAt(N);if(k!==32&&k!==9)return N}while(++N<A);return A}function p(T,N,A){for(;N>A;){const k=T.charCodeAt(--N);if(k!==32&&k!==9)return N+1}return A}function y(T,N,A){const k=(A==null?void 0:A.encode)||encodeURIComponent;if(!n.test(T))throw new TypeError(`argument name is invalid: ${T}`);const D=k(N);if(!e.test(D))throw new TypeError(`argument val is invalid: ${N}`);let $=T+"="+D;if(!A)return $;if(A.maxAge!==void 0){if(!Number.isInteger(A.maxAge))throw new TypeError(`option maxAge is invalid: ${A.maxAge}`);$+="; Max-Age="+A.maxAge}if(A.domain){if(!t.test(A.domain))throw new TypeError(`option domain is invalid: ${A.domain}`);$+="; Domain="+A.domain}if(A.path){if(!i.test(A.path))throw new TypeError(`option path is invalid: ${A.path}`);$+="; Path="+A.path}if(A.expires){if(!b(A.expires)||!Number.isFinite(A.expires.valueOf()))throw new TypeError(`option expires is invalid: ${A.expires}`);$+="; Expires="+A.expires.toUTCString()}if(A.httpOnly&&($+="; HttpOnly"),A.secure&&($+="; Secure"),A.partitioned&&($+="; Partitioned"),A.priority)switch(typeof A.priority=="string"?A.priority.toLowerCase():void 0){case"low":$+="; Priority=Low";break;case"medium":$+="; Priority=Medium";break;case"high":$+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${A.priority}`)}if(A.sameSite)switch(typeof A.sameSite=="string"?A.sameSite.toLowerCase():A.sameSite){case!0:case"strict":$+="; SameSite=Strict";break;case"lax":$+="; SameSite=Lax";break;case"none":$+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${A.sameSite}`)}return $}function v(T){if(T.indexOf("%")===-1)return T;try{return decodeURIComponent(T)}catch{return T}}function b(T){return a.call(T)==="[object Date]"}return gc}ES();var Q_="popstate";function xS(n={}){function e(a,l){let{pathname:u="/",search:f="",hash:p=""}=Na(a.location.hash.substring(1));return!u.startsWith("/")&&!u.startsWith(".")&&(u="/"+u),Vp("",{pathname:u,search:f,hash:p},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function t(a,l){let u=a.document.querySelector("base"),f="";if(u&&u.getAttribute("href")){let p=a.location.href,y=p.indexOf("#");f=y===-1?p:p.slice(0,y)}return f+"#"+(typeof l=="string"?l:Oc(l))}function i(a,l){ir(a.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(l)})`)}return wS(e,t,i,n)}function vt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function ir(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function TS(){return Math.random().toString(36).substring(2,10)}function W_(n,e){return{usr:n.state,key:n.key,idx:e}}function Vp(n,e,t=null,i){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Na(e):e,state:t,key:e&&e.key||i||TS()}}function Oc({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Na(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substring(i),n=n.substring(0,i)),n&&(e.pathname=n)}return e}function wS(n,e,t,i={}){let{window:a=document.defaultView,v5Compat:l=!1}=i,u=a.history,f="POP",p=null,y=v();y==null&&(y=0,u.replaceState({...u.state,idx:y},""));function v(){return(u.state||{idx:null}).idx}function b(){f="POP";let D=v(),$=D==null?null:D-y;y=D,p&&p({action:f,location:k.location,delta:$})}function T(D,$){f="PUSH";let Q=Vp(k.location,D,$);t&&t(Q,D),y=v()+1;let U=W_(Q,y),ne=k.createHref(Q);try{u.pushState(U,"",ne)}catch(le){if(le instanceof DOMException&&le.name==="DataCloneError")throw le;a.location.assign(ne)}l&&p&&p({action:f,location:k.location,delta:1})}function N(D,$){f="REPLACE";let Q=Vp(k.location,D,$);t&&t(Q,D),y=v();let U=W_(Q,y),ne=k.createHref(Q);u.replaceState(U,"",ne),l&&p&&p({action:f,location:k.location,delta:0})}function A(D){return AS(D)}let k={get action(){return f},get location(){return n(a,u)},listen(D){if(p)throw new Error("A history only accepts one active listener");return a.addEventListener(Q_,b),p=D,()=>{a.removeEventListener(Q_,b),p=null}},createHref(D){return e(a,D)},createURL:A,encodeLocation(D){let $=A(D);return{pathname:$.pathname,search:$.search,hash:$.hash}},push:T,replace:N,go(D){return u.go(D)}};return k}function AS(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),vt(t,"No window.location.(origin|href) available to create URL");let i=typeof n=="string"?n:Oc(n);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=t+i),new URL(i,t)}function a1(n,e,t="/"){return SS(n,e,t,!1)}function SS(n,e,t,i){let a=typeof e=="string"?Na(e):e,l=Ti(a.pathname||"/",t);if(l==null)return null;let u=o1(n);NS(u);let f=null;for(let p=0;f==null&&p<u.length;++p){let y=LS(l);f=kS(u[p],y,i)}return f}function o1(n,e=[],t=[],i=""){let a=(l,u,f)=>{let p={relativePath:f===void 0?l.path||"":f,caseSensitive:l.caseSensitive===!0,childrenIndex:u,route:l};p.relativePath.startsWith("/")&&(vt(p.relativePath.startsWith(i),`Absolute route path "${p.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(i.length));let y=bi([i,p.relativePath]),v=t.concat(p);l.children&&l.children.length>0&&(vt(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${y}".`),o1(l.children,e,v,y)),!(l.path==null&&!l.index)&&e.push({path:y,score:PS(y,l.index),routesMeta:v})};return n.forEach((l,u)=>{var f;if(l.path===""||!((f=l.path)!=null&&f.includes("?")))a(l,u);else for(let p of l1(l.path))a(l,u,p)}),e}function l1(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,a=t.endsWith("?"),l=t.replace(/\?$/,"");if(i.length===0)return a?[l,""]:[l];let u=l1(i.join("/")),f=[];return f.push(...u.map(p=>p===""?l:[l,p].join("/"))),a&&f.push(...u),f.map(p=>n.startsWith("/")&&p===""?"/":p)}function NS(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:MS(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var CS=/^:[\w-]+$/,RS=3,IS=2,OS=1,DS=10,jS=-2,X_=n=>n==="*";function PS(n,e){let t=n.split("/"),i=t.length;return t.some(X_)&&(i+=jS),e&&(i+=IS),t.filter(a=>!X_(a)).reduce((a,l)=>a+(CS.test(l)?RS:l===""?OS:DS),i)}function MS(n,e){return n.length===e.length&&n.slice(0,-1).every((i,a)=>i===e[a])?n[n.length-1]-e[e.length-1]:0}function kS(n,e,t=!1){let{routesMeta:i}=n,a={},l="/",u=[];for(let f=0;f<i.length;++f){let p=i[f],y=f===i.length-1,v=l==="/"?e:e.slice(l.length)||"/",b=rh({path:p.relativePath,caseSensitive:p.caseSensitive,end:y},v),T=p.route;if(!b&&y&&t&&!i[i.length-1].route.index&&(b=rh({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},v)),!b)return null;Object.assign(a,b.params),u.push({params:a,pathname:bi([l,b.pathname]),pathnameBase:qS(bi([l,b.pathnameBase])),route:T}),b.pathnameBase!=="/"&&(l=bi([l,b.pathnameBase]))}return u}function rh(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=VS(n.path,n.caseSensitive,n.end),a=e.match(t);if(!a)return null;let l=a[0],u=l.replace(/(.)\/+$/,"$1"),f=a.slice(1);return{params:i.reduce((y,{paramName:v,isOptional:b},T)=>{if(v==="*"){let A=f[T]||"";u=l.slice(0,l.length-A.length).replace(/(.)\/+$/,"$1")}const N=f[T];return b&&!N?y[v]=void 0:y[v]=(N||"").replace(/%2F/g,"/"),y},{}),pathname:l,pathnameBase:u,pattern:n}}function VS(n,e=!1,t=!0){ir(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let i=[],a="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,f,p)=>(i.push({paramName:f,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(i.push({paramName:"*"}),a+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?a+="\\/*$":n!==""&&n!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),i]}function LS(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ir(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Ti(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}function US(n,e="/"){let{pathname:t,search:i="",hash:a=""}=typeof n=="string"?Na(n):n;return{pathname:t?t.startsWith("/")?t:zS(t,e):e,search:FS(i),hash:HS(a)}}function zS(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(a=>{a===".."?t.length>1&&t.pop():a!=="."&&t.push(a)}),t.length>1?t.join("/"):"/"}function _p(n,e,t,i){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function BS(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function vg(n){let e=BS(n);return e.map((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)}function _g(n,e,t,i=!1){let a;typeof n=="string"?a=Na(n):(a={...n},vt(!a.pathname||!a.pathname.includes("?"),_p("?","pathname","search",a)),vt(!a.pathname||!a.pathname.includes("#"),_p("#","pathname","hash",a)),vt(!a.search||!a.search.includes("#"),_p("#","search","hash",a)));let l=n===""||a.pathname==="",u=l?"/":a.pathname,f;if(u==null)f=t;else{let b=e.length-1;if(!i&&u.startsWith("..")){let T=u.split("/");for(;T[0]==="..";)T.shift(),b-=1;a.pathname=T.join("/")}f=b>=0?e[b]:"/"}let p=US(a,f),y=u&&u!=="/"&&u.endsWith("/"),v=(l||u===".")&&t.endsWith("/");return!p.pathname.endsWith("/")&&(y||v)&&(p.pathname+="/"),p}var bi=n=>n.join("/").replace(/\/\/+/g,"/"),qS=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),FS=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,HS=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function GS(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var c1=["POST","PUT","PATCH","DELETE"];new Set(c1);var $S=["GET",...c1];new Set($S);var Qo=V.createContext(null);Qo.displayName="DataRouter";var Rh=V.createContext(null);Rh.displayName="DataRouterState";var u1=V.createContext({isTransitioning:!1});u1.displayName="ViewTransition";var YS=V.createContext(new Map);YS.displayName="Fetchers";var KS=V.createContext(null);KS.displayName="Await";var yr=V.createContext(null);yr.displayName="Navigation";var Hc=V.createContext(null);Hc.displayName="Location";var sr=V.createContext({outlet:null,matches:[],isDataRoute:!1});sr.displayName="Route";var bg=V.createContext(null);bg.displayName="RouteError";function QS(n,{relative:e}={}){vt(Wo(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=V.useContext(yr),{hash:a,pathname:l,search:u}=Gc(n,{relative:e}),f=l;return t!=="/"&&(f=l==="/"?t:bi([t,l])),i.createHref({pathname:f,search:u,hash:a})}function Wo(){return V.useContext(Hc)!=null}function Ss(){return vt(Wo(),"useLocation() may be used only in the context of a <Router> component."),V.useContext(Hc).location}var d1="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function h1(n){V.useContext(yr).static||V.useLayoutEffect(n)}function An(){let{isDataRoute:n}=V.useContext(sr);return n?uN():WS()}function WS(){vt(Wo(),"useNavigate() may be used only in the context of a <Router> component.");let n=V.useContext(Qo),{basename:e,navigator:t}=V.useContext(yr),{matches:i}=V.useContext(sr),{pathname:a}=Ss(),l=JSON.stringify(vg(i)),u=V.useRef(!1);return h1(()=>{u.current=!0}),V.useCallback((p,y={})=>{if(ir(u.current,d1),!u.current)return;if(typeof p=="number"){t.go(p);return}let v=_g(p,JSON.parse(l),a,y.relative==="path");n==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:bi([e,v.pathname])),(y.replace?t.replace:t.push)(v,y.state,y)},[e,t,l,a,n])}var XS=V.createContext(null);function ZS(n){let e=V.useContext(sr).outlet;return e&&V.createElement(XS.Provider,{value:n},e)}function Eg(){let{matches:n}=V.useContext(sr),e=n[n.length-1];return e?e.params:{}}function Gc(n,{relative:e}={}){let{matches:t}=V.useContext(sr),{pathname:i}=Ss(),a=JSON.stringify(vg(t));return V.useMemo(()=>_g(n,JSON.parse(a),i,e==="path"),[n,a,i,e])}function JS(n,e){return f1(n,e)}function f1(n,e,t,i){var Q;vt(Wo(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a,static:l}=V.useContext(yr),{matches:u}=V.useContext(sr),f=u[u.length-1],p=f?f.params:{},y=f?f.pathname:"/",v=f?f.pathnameBase:"/",b=f&&f.route;{let U=b&&b.path||"";m1(y,!b||U.endsWith("*")||U.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${y}" (under <Route path="${U}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${U}"> to <Route path="${U==="/"?"*":`${U}/*`}">.`)}let T=Ss(),N;if(e){let U=typeof e=="string"?Na(e):e;vt(v==="/"||((Q=U.pathname)==null?void 0:Q.startsWith(v)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${v}" but pathname "${U.pathname}" was given in the \`location\` prop.`),N=U}else N=T;let A=N.pathname||"/",k=A;if(v!=="/"){let U=v.replace(/^\//,"").split("/");k="/"+A.replace(/^\//,"").split("/").slice(U.length).join("/")}let D=!l&&t&&t.matches&&t.matches.length>0?t.matches:a1(n,{pathname:k});ir(b||D!=null,`No routes matched location "${N.pathname}${N.search}${N.hash}" `),ir(D==null||D[D.length-1].route.element!==void 0||D[D.length-1].route.Component!==void 0||D[D.length-1].route.lazy!==void 0,`Matched leaf route at location "${N.pathname}${N.search}${N.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let $=iN(D&&D.map(U=>Object.assign({},U,{params:Object.assign({},p,U.params),pathname:bi([v,a.encodeLocation?a.encodeLocation(U.pathname).pathname:U.pathname]),pathnameBase:U.pathnameBase==="/"?v:bi([v,a.encodeLocation?a.encodeLocation(U.pathnameBase).pathname:U.pathnameBase])})),u,t,i);return e&&$?V.createElement(Hc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...N},navigationType:"POP"}},$):$}function eN(){let n=cN(),e=GS(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i},l={padding:"2px 4px",backgroundColor:i},u=null;return console.error("Error handled by React Router default ErrorBoundary:",n),u=V.createElement(V.Fragment,null,V.createElement("p",null,"💿 Hey developer 👋"),V.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",V.createElement("code",{style:l},"ErrorBoundary")," or"," ",V.createElement("code",{style:l},"errorElement")," prop on your route.")),V.createElement(V.Fragment,null,V.createElement("h2",null,"Unexpected Application Error!"),V.createElement("h3",{style:{fontStyle:"italic"}},e),t?V.createElement("pre",{style:a},t):null,u)}var tN=V.createElement(eN,null),nN=class extends V.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?V.createElement(sr.Provider,{value:this.props.routeContext},V.createElement(bg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function rN({routeContext:n,match:e,children:t}){let i=V.useContext(Qo);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),V.createElement(sr.Provider,{value:n},t)}function iN(n,e=[],t=null,i=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let a=n,l=t==null?void 0:t.errors;if(l!=null){let p=a.findIndex(y=>y.route.id&&(l==null?void 0:l[y.route.id])!==void 0);vt(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),a=a.slice(0,Math.min(a.length,p+1))}let u=!1,f=-1;if(t)for(let p=0;p<a.length;p++){let y=a[p];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(f=p),y.route.id){let{loaderData:v,errors:b}=t,T=y.route.loader&&!v.hasOwnProperty(y.route.id)&&(!b||b[y.route.id]===void 0);if(y.route.lazy||T){u=!0,f>=0?a=a.slice(0,f+1):a=[a[0]];break}}}return a.reduceRight((p,y,v)=>{let b,T=!1,N=null,A=null;t&&(b=l&&y.route.id?l[y.route.id]:void 0,N=y.route.errorElement||tN,u&&(f<0&&v===0?(m1("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),T=!0,A=null):f===v&&(T=!0,A=y.route.hydrateFallbackElement||null)));let k=e.concat(a.slice(0,v+1)),D=()=>{let $;return b?$=N:T?$=A:y.route.Component?$=V.createElement(y.route.Component,null):y.route.element?$=y.route.element:$=p,V.createElement(rN,{match:y,routeContext:{outlet:p,matches:k,isDataRoute:t!=null},children:$})};return t&&(y.route.ErrorBoundary||y.route.errorElement||v===0)?V.createElement(nN,{location:t.location,revalidation:t.revalidation,component:N,error:b,children:D(),routeContext:{outlet:null,matches:k,isDataRoute:!0}}):D()},null)}function xg(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function sN(n){let e=V.useContext(Qo);return vt(e,xg(n)),e}function aN(n){let e=V.useContext(Rh);return vt(e,xg(n)),e}function oN(n){let e=V.useContext(sr);return vt(e,xg(n)),e}function Tg(n){let e=oN(n),t=e.matches[e.matches.length-1];return vt(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function lN(){return Tg("useRouteId")}function cN(){var i;let n=V.useContext(bg),e=aN("useRouteError"),t=Tg("useRouteError");return n!==void 0?n:(i=e.errors)==null?void 0:i[t]}function uN(){let{router:n}=sN("useNavigate"),e=Tg("useNavigate"),t=V.useRef(!1);return h1(()=>{t.current=!0}),V.useCallback(async(a,l={})=>{ir(t.current,d1),t.current&&(typeof a=="number"?n.navigate(a):await n.navigate(a,{fromRouteId:e,...l}))},[n,e])}var Z_={};function m1(n,e,t){!e&&!Z_[n]&&(Z_[n]=!0,ir(!1,t))}V.memo(dN);function dN({routes:n,future:e,state:t}){return f1(n,void 0,t,e)}function p1({to:n,replace:e,state:t,relative:i}){vt(Wo(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=V.useContext(yr);ir(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=V.useContext(sr),{pathname:u}=Ss(),f=An(),p=_g(n,vg(l),u,i==="path"),y=JSON.stringify(p);return V.useEffect(()=>{f(JSON.parse(y),{replace:e,state:t,relative:i})},[f,y,i,e,t]),null}function hN(n){return ZS(n.context)}function xn(n){vt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function fN({basename:n="/",children:e=null,location:t,navigationType:i="POP",navigator:a,static:l=!1}){vt(!Wo(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=n.replace(/^\/*/,"/"),f=V.useMemo(()=>({basename:u,navigator:a,static:l,future:{}}),[u,a,l]);typeof t=="string"&&(t=Na(t));let{pathname:p="/",search:y="",hash:v="",state:b=null,key:T="default"}=t,N=V.useMemo(()=>{let A=Ti(p,u);return A==null?null:{location:{pathname:A,search:y,hash:v,state:b,key:T},navigationType:i}},[u,p,y,v,b,T,i]);return ir(N!=null,`<Router basename="${u}"> is not able to match the URL "${p}${y}${v}" because it does not start with the basename, so the <Router> won't render anything.`),N==null?null:V.createElement(yr.Provider,{value:f},V.createElement(Hc.Provider,{children:e,value:N}))}function mN({children:n,location:e}){return JS(Lp(n),e)}function Lp(n,e=[]){let t=[];return V.Children.forEach(n,(i,a)=>{if(!V.isValidElement(i))return;let l=[...e,a];if(i.type===V.Fragment){t.push.apply(t,Lp(i.props.children,l));return}vt(i.type===xn,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),vt(!i.props.index||!i.props.children,"An index route cannot have child routes.");let u={id:i.props.id||l.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(u.children=Lp(i.props.children,l)),t.push(u)}),t}var zd="get",Bd="application/x-www-form-urlencoded";function Ih(n){return n!=null&&typeof n.tagName=="string"}function pN(n){return Ih(n)&&n.tagName.toLowerCase()==="button"}function gN(n){return Ih(n)&&n.tagName.toLowerCase()==="form"}function yN(n){return Ih(n)&&n.tagName.toLowerCase()==="input"}function vN(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function _N(n,e){return n.button===0&&(!e||e==="_self")&&!vN(n)}var Dd=null;function bN(){if(Dd===null)try{new FormData(document.createElement("form"),0),Dd=!1}catch{Dd=!0}return Dd}var EN=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function bp(n){return n!=null&&!EN.has(n)?(ir(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Bd}"`),null):n}function xN(n,e){let t,i,a,l,u;if(gN(n)){let f=n.getAttribute("action");i=f?Ti(f,e):null,t=n.getAttribute("method")||zd,a=bp(n.getAttribute("enctype"))||Bd,l=new FormData(n)}else if(pN(n)||yN(n)&&(n.type==="submit"||n.type==="image")){let f=n.form;if(f==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=n.getAttribute("formaction")||f.getAttribute("action");if(i=p?Ti(p,e):null,t=n.getAttribute("formmethod")||f.getAttribute("method")||zd,a=bp(n.getAttribute("formenctype"))||bp(f.getAttribute("enctype"))||Bd,l=new FormData(f,n),!bN()){let{name:y,type:v,value:b}=n;if(v==="image"){let T=y?`${y}.`:"";l.append(`${T}x`,"0"),l.append(`${T}y`,"0")}else y&&l.append(y,b)}}else{if(Ih(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=zd,i=null,a=Bd,u=n}return l&&a==="text/plain"&&(u=l,l=void 0),{action:i,method:t.toLowerCase(),encType:a,formData:l,body:u}}function wg(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function TN(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function wN(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function AN(n,e,t){let i=await Promise.all(n.map(async a=>{let l=e.routes[a.route.id];if(l){let u=await TN(l,t);return u.links?u.links():[]}return[]}));return RN(i.flat(1).filter(wN).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function J_(n,e,t,i,a,l){let u=(p,y)=>t[y]?p.route.id!==t[y].route.id:!0,f=(p,y)=>{var v;return t[y].pathname!==p.pathname||((v=t[y].route.path)==null?void 0:v.endsWith("*"))&&t[y].params["*"]!==p.params["*"]};return l==="assets"?e.filter((p,y)=>u(p,y)||f(p,y)):l==="data"?e.filter((p,y)=>{var b;let v=i.routes[p.route.id];if(!v||!v.hasLoader)return!1;if(u(p,y)||f(p,y))return!0;if(p.route.shouldRevalidate){let T=p.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((b=t[0])==null?void 0:b.params)||{},nextUrl:new URL(n,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof T=="boolean")return T}return!0}):[]}function SN(n,e,{includeHydrateFallback:t}={}){return NN(n.map(i=>{let a=e.routes[i.route.id];if(!a)return[];let l=[a.module];return a.clientActionModule&&(l=l.concat(a.clientActionModule)),a.clientLoaderModule&&(l=l.concat(a.clientLoaderModule)),t&&a.hydrateFallbackModule&&(l=l.concat(a.hydrateFallbackModule)),a.imports&&(l=l.concat(a.imports)),l}).flat(1))}function NN(n){return[...new Set(n)]}function CN(n){let e={},t=Object.keys(n).sort();for(let i of t)e[i]=n[i];return e}function RN(n,e){let t=new Set;return new Set(e),n.reduce((i,a)=>{let l=JSON.stringify(CN(a));return t.has(l)||(t.add(l),i.push({key:l,link:a})),i},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var IN=new Set([100,101,204,205]);function ON(n,e){let t=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t.pathname==="/"?t.pathname="_root.data":e&&Ti(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function g1(){let n=V.useContext(Qo);return wg(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function DN(){let n=V.useContext(Rh);return wg(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Ag=V.createContext(void 0);Ag.displayName="FrameworkContext";function y1(){let n=V.useContext(Ag);return wg(n,"You must render this element inside a <HydratedRouter> element"),n}function jN(n,e){let t=V.useContext(Ag),[i,a]=V.useState(!1),[l,u]=V.useState(!1),{onFocus:f,onBlur:p,onMouseEnter:y,onMouseLeave:v,onTouchStart:b}=e,T=V.useRef(null);V.useEffect(()=>{if(n==="render"&&u(!0),n==="viewport"){let k=$=>{$.forEach(Q=>{u(Q.isIntersecting)})},D=new IntersectionObserver(k,{threshold:.5});return T.current&&D.observe(T.current),()=>{D.disconnect()}}},[n]),V.useEffect(()=>{if(i){let k=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(k)}}},[i]);let N=()=>{a(!0)},A=()=>{a(!1),u(!1)};return t?n!=="intent"?[l,T,{}]:[l,T,{onFocus:yc(f,N),onBlur:yc(p,A),onMouseEnter:yc(y,N),onMouseLeave:yc(v,A),onTouchStart:yc(b,N)}]:[!1,T,{}]}function yc(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function PN({page:n,...e}){let{router:t}=g1(),i=V.useMemo(()=>a1(t.routes,n,t.basename),[t.routes,n,t.basename]);return i?V.createElement(kN,{page:n,matches:i,...e}):null}function MN(n){let{manifest:e,routeModules:t}=y1(),[i,a]=V.useState([]);return V.useEffect(()=>{let l=!1;return AN(n,e,t).then(u=>{l||a(u)}),()=>{l=!0}},[n,e,t]),i}function kN({page:n,matches:e,...t}){let i=Ss(),{manifest:a,routeModules:l}=y1(),{basename:u}=g1(),{loaderData:f,matches:p}=DN(),y=V.useMemo(()=>J_(n,e,p,a,i,"data"),[n,e,p,a,i]),v=V.useMemo(()=>J_(n,e,p,a,i,"assets"),[n,e,p,a,i]),b=V.useMemo(()=>{if(n===i.pathname+i.search+i.hash)return[];let A=new Set,k=!1;if(e.forEach($=>{var U;let Q=a.routes[$.route.id];!Q||!Q.hasLoader||(!y.some(ne=>ne.route.id===$.route.id)&&$.route.id in f&&((U=l[$.route.id])!=null&&U.shouldRevalidate)||Q.hasClientLoader?k=!0:A.add($.route.id))}),A.size===0)return[];let D=ON(n,u);return k&&A.size>0&&D.searchParams.set("_routes",e.filter($=>A.has($.route.id)).map($=>$.route.id).join(",")),[D.pathname+D.search]},[u,f,i,a,y,e,n,l]),T=V.useMemo(()=>SN(v,a),[v,a]),N=MN(v);return V.createElement(V.Fragment,null,b.map(A=>V.createElement("link",{key:A,rel:"prefetch",as:"fetch",href:A,...t})),T.map(A=>V.createElement("link",{key:A,rel:"modulepreload",href:A,...t})),N.map(({key:A,link:k})=>V.createElement("link",{key:A,...k})))}function VN(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var v1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{v1&&(window.__reactRouterVersion="7.6.0")}catch{}function LN({basename:n,children:e,window:t}){let i=V.useRef();i.current==null&&(i.current=xS({window:t,v5Compat:!0}));let a=i.current,[l,u]=V.useState({action:a.action,location:a.location}),f=V.useCallback(p=>{V.startTransition(()=>u(p))},[u]);return V.useLayoutEffect(()=>a.listen(f),[a,f]),V.createElement(fN,{basename:n,children:e,location:l.location,navigationType:l.action,navigator:a})}var _1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Oh=V.forwardRef(function({onClick:e,discover:t="render",prefetch:i="none",relative:a,reloadDocument:l,replace:u,state:f,target:p,to:y,preventScrollReset:v,viewTransition:b,...T},N){let{basename:A}=V.useContext(yr),k=typeof y=="string"&&_1.test(y),D,$=!1;if(typeof y=="string"&&k&&(D=y,v1))try{let R=new URL(window.location.href),M=y.startsWith("//")?new URL(R.protocol+y):new URL(y),z=Ti(M.pathname,A);M.origin===R.origin&&z!=null?y=z+M.search+M.hash:$=!0}catch{ir(!1,`<Link to="${y}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let Q=QS(y,{relative:a}),[U,ne,le]=jN(i,T),pe=BN(y,{replace:u,state:f,target:p,preventScrollReset:v,relative:a,viewTransition:b});function j(R){e&&e(R),R.defaultPrevented||pe(R)}let C=V.createElement("a",{...T,...le,href:D||Q,onClick:$||l?e:j,ref:VN(N,ne),target:p,"data-discover":!k&&t==="render"?"true":void 0});return U&&!k?V.createElement(V.Fragment,null,C,V.createElement(PN,{page:Q})):C});Oh.displayName="Link";var fa=V.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:i="",end:a=!1,style:l,to:u,viewTransition:f,children:p,...y},v){let b=Gc(u,{relative:y.relative}),T=Ss(),N=V.useContext(Rh),{navigator:A,basename:k}=V.useContext(yr),D=N!=null&&$N(b)&&f===!0,$=A.encodeLocation?A.encodeLocation(b).pathname:b.pathname,Q=T.pathname,U=N&&N.navigation&&N.navigation.location?N.navigation.location.pathname:null;t||(Q=Q.toLowerCase(),U=U?U.toLowerCase():null,$=$.toLowerCase()),U&&k&&(U=Ti(U,k)||U);const ne=$!=="/"&&$.endsWith("/")?$.length-1:$.length;let le=Q===$||!a&&Q.startsWith($)&&Q.charAt(ne)==="/",pe=U!=null&&(U===$||!a&&U.startsWith($)&&U.charAt($.length)==="/"),j={isActive:le,isPending:pe,isTransitioning:D},C=le?e:void 0,R;typeof i=="function"?R=i(j):R=[i,le?"active":null,pe?"pending":null,D?"transitioning":null].filter(Boolean).join(" ");let M=typeof l=="function"?l(j):l;return V.createElement(Oh,{...y,"aria-current":C,className:R,ref:v,style:M,to:u,viewTransition:f},typeof p=="function"?p(j):p)});fa.displayName="NavLink";var UN=V.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:i,replace:a,state:l,method:u=zd,action:f,onSubmit:p,relative:y,preventScrollReset:v,viewTransition:b,...T},N)=>{let A=HN(),k=GN(f,{relative:y}),D=u.toLowerCase()==="get"?"get":"post",$=typeof f=="string"&&_1.test(f),Q=U=>{if(p&&p(U),U.defaultPrevented)return;U.preventDefault();let ne=U.nativeEvent.submitter,le=(ne==null?void 0:ne.getAttribute("formmethod"))||u;A(ne||U.currentTarget,{fetcherKey:e,method:le,navigate:t,replace:a,state:l,relative:y,preventScrollReset:v,viewTransition:b})};return V.createElement("form",{ref:N,method:D,action:k,onSubmit:i?p:Q,...T,"data-discover":!$&&n==="render"?"true":void 0})});UN.displayName="Form";function zN(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function b1(n){let e=V.useContext(Qo);return vt(e,zN(n)),e}function BN(n,{target:e,replace:t,state:i,preventScrollReset:a,relative:l,viewTransition:u}={}){let f=An(),p=Ss(),y=Gc(n,{relative:l});return V.useCallback(v=>{if(_N(v,e)){v.preventDefault();let b=t!==void 0?t:Oc(p)===Oc(y);f(n,{replace:b,state:i,preventScrollReset:a,relative:l,viewTransition:u})}},[p,f,y,t,i,e,n,a,l,u])}var qN=0,FN=()=>`__${String(++qN)}__`;function HN(){let{router:n}=b1("useSubmit"),{basename:e}=V.useContext(yr),t=lN();return V.useCallback(async(i,a={})=>{let{action:l,method:u,encType:f,formData:p,body:y}=xN(i,e);if(a.navigate===!1){let v=a.fetcherKey||FN();await n.fetch(v,t,a.action||l,{preventScrollReset:a.preventScrollReset,formData:p,body:y,formMethod:a.method||u,formEncType:a.encType||f,flushSync:a.flushSync})}else await n.navigate(a.action||l,{preventScrollReset:a.preventScrollReset,formData:p,body:y,formMethod:a.method||u,formEncType:a.encType||f,replace:a.replace,state:a.state,fromRouteId:t,flushSync:a.flushSync,viewTransition:a.viewTransition})},[n,e,t])}function GN(n,{relative:e}={}){let{basename:t}=V.useContext(yr),i=V.useContext(sr);vt(i,"useFormAction must be used inside a RouteContext");let[a]=i.matches.slice(-1),l={...Gc(n||".",{relative:e})},u=Ss();if(n==null){l.search=u.search;let f=new URLSearchParams(l.search),p=f.getAll("index");if(p.some(v=>v==="")){f.delete("index"),p.filter(b=>b).forEach(b=>f.append("index",b));let v=f.toString();l.search=v?`?${v}`:""}}return(!n||n===".")&&a.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:bi([t,l.pathname])),Oc(l)}function $N(n,e={}){let t=V.useContext(u1);vt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=b1("useViewTransitionState"),a=Gc(n,{relative:e.relative});if(!t.isTransitioning)return!1;let l=Ti(t.currentLocation.pathname,i)||t.currentLocation.pathname,u=Ti(t.nextLocation.pathname,i)||t.nextLocation.pathname;return rh(a.pathname,u)!=null||rh(a.pathname,l)!=null}[...IN];const YN=()=>{};var eb={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E1=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let a=n.charCodeAt(i);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(a=65536+((a&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},KN=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const a=n[t++];if(a<128)e[i++]=String.fromCharCode(a);else if(a>191&&a<224){const l=n[t++];e[i++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=n[t++],u=n[t++],f=n[t++],p=((a&7)<<18|(l&63)<<12|(u&63)<<6|f&63)-65536;e[i++]=String.fromCharCode(55296+(p>>10)),e[i++]=String.fromCharCode(56320+(p&1023))}else{const l=n[t++],u=n[t++];e[i++]=String.fromCharCode((a&15)<<12|(l&63)<<6|u&63)}}return e.join("")},x1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let a=0;a<n.length;a+=3){const l=n[a],u=a+1<n.length,f=u?n[a+1]:0,p=a+2<n.length,y=p?n[a+2]:0,v=l>>2,b=(l&3)<<4|f>>4;let T=(f&15)<<2|y>>6,N=y&63;p||(N=64,u||(T=64)),i.push(t[v],t[b],t[T],t[N])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(E1(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):KN(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let a=0;a<n.length;){const l=t[n.charAt(a++)],f=a<n.length?t[n.charAt(a)]:0;++a;const y=a<n.length?t[n.charAt(a)]:64;++a;const b=a<n.length?t[n.charAt(a)]:64;if(++a,l==null||f==null||y==null||b==null)throw new QN;const T=l<<2|f>>4;if(i.push(T),y!==64){const N=f<<4&240|y>>2;if(i.push(N),b!==64){const A=y<<6&192|b;i.push(A)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class QN extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const WN=function(n){const e=E1(n);return x1.encodeByteArray(e,!0)},ih=function(n){return WN(n).replace(/\./g,"")},T1=function(n){try{return x1.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZN=()=>XN().__FIREBASE_DEFAULTS__,JN=()=>{if(typeof process>"u"||typeof eb>"u")return;const n=eb.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},eC=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&T1(n[1]);return e&&JSON.parse(e)},Dh=()=>{try{return YN()||ZN()||JN()||eC()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},w1=n=>{var e,t;return(t=(e=Dh())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},tC=n=>{const e=w1(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},A1=()=>{var n;return(n=Dh())===null||n===void 0?void 0:n.config},S1=n=>{var e;return(e=Dh())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $c(n){return n.endsWith(".cloudworkstations.dev")}async function N1(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rC(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",a=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},n);return[ih(JSON.stringify(t)),ih(JSON.stringify(u)),""].join(".")}const Ac={};function iC(){const n={prod:[],emulator:[]};for(const e of Object.keys(Ac))Ac[e]?n.emulator.push(e):n.prod.push(e);return n}function sC(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let tb=!1;function jh(n,e){if(typeof window>"u"||typeof document>"u"||!$c(window.location.host)||Ac[n]===e||Ac[n]||tb)return;Ac[n]=e;function t(T){return`__firebase__banner__${T}`}const i="__firebase__banner",l=iC().prod.length>0;function u(){const T=document.getElementById(i);T&&T.remove()}function f(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function p(T,N){T.setAttribute("width","24"),T.setAttribute("id",N),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function y(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{tb=!0,u()},T}function v(T,N){T.setAttribute("id",N),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function b(){const T=sC(i),N=t("text"),A=document.getElementById(N)||document.createElement("span"),k=t("learnmore"),D=document.getElementById(k)||document.createElement("a"),$=t("preprendIcon"),Q=document.getElementById($)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const U=T.element;f(U),v(D,k);const ne=y();p(Q,$),U.append(Q,A,D,ne),document.body.appendChild(U)}l?(A.innerText="Preview backend disconnected.",Q.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Q.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,A.innerText="Preview backend running in this workspace."),A.setAttribute("id",N)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",b):b()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function aC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(gn())}function oC(){var n;const e=(n=Dh())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function lC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function cC(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function uC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function dC(){const n=gn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function hC(){return!oC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function fC(){try{return typeof indexedDB=="object"}catch{return!1}}function mC(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(i);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{var l;e(((l=a.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pC="FirebaseError";class Ri extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=pC,Object.setPrototypeOf(this,Ri.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Yc.prototype.create)}}class Yc{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],u=l?gC(l,i):"Error",f=`${this.serviceName}: ${u} (${a}).`;return new Ri(a,f,i)}}function gC(n,e){return n.replace(yC,(t,i)=>{const a=e[i];return a!=null?String(a):`<${i}?>`})}const yC=/\{\$([^}]+)}/g;function vC(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function ba(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const a of t){if(!i.includes(a))return!1;const l=n[a],u=e[a];if(nb(l)&&nb(u)){if(!ba(l,u))return!1}else if(l!==u)return!1}for(const a of i)if(!t.includes(a))return!1;return!0}function nb(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kc(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function _c(n){const e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[a,l]=i.split("=");e[decodeURIComponent(a)]=decodeURIComponent(l)}}),e}function bc(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function _C(n,e){const t=new bC(n,e);return t.subscribe.bind(t)}class bC{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let a;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");EC(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:i},a.next===void 0&&(a.next=Ep),a.error===void 0&&(a.error=Ep),a.complete===void 0&&(a.complete=Ep);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function EC(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Ep(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ft(n){return n&&n._delegate?n._delegate:n}class Ea{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ma="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xC{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new nC;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&i.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(l){if(a)return null;throw l}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(wC(e))try{this.getOrInitializeService({instanceIdentifier:ma})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});i.resolve(l)}catch{}}}}clearInstance(e=ma){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ma){return this.instances.has(e)}getOptions(e=ma){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,u]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);i===f&&u.resolve(a)}return a}onInit(e,t){var i;const a=this.normalizeInstanceIdentifier(t),l=(i=this.onInitCallbacks.get(a))!==null&&i!==void 0?i:new Set;l.add(e),this.onInitCallbacks.set(a,l);const u=this.instances.get(a);return u&&e(u,a),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const a of i)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:TC(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=ma){return this.component?this.component.multipleInstances?e:ma:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function TC(n){return n===ma?void 0:n}function wC(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new xC(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Be;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Be||(Be={}));const SC={debug:Be.DEBUG,verbose:Be.VERBOSE,info:Be.INFO,warn:Be.WARN,error:Be.ERROR,silent:Be.SILENT},NC=Be.INFO,CC={[Be.DEBUG]:"log",[Be.VERBOSE]:"log",[Be.INFO]:"info",[Be.WARN]:"warn",[Be.ERROR]:"error"},RC=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),a=CC[e];if(a)console[a](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Sg{constructor(e){this.name=e,this._logLevel=NC,this._logHandler=RC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Be))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?SC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Be.DEBUG,...e),this._logHandler(this,Be.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Be.VERBOSE,...e),this._logHandler(this,Be.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Be.INFO,...e),this._logHandler(this,Be.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Be.WARN,...e),this._logHandler(this,Be.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Be.ERROR,...e),this._logHandler(this,Be.ERROR,...e)}}const IC=(n,e)=>e.some(t=>n instanceof t);let rb,ib;function OC(){return rb||(rb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function DC(){return ib||(ib=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const C1=new WeakMap,Up=new WeakMap,R1=new WeakMap,xp=new WeakMap,Ng=new WeakMap;function jC(n){const e=new Promise((t,i)=>{const a=()=>{n.removeEventListener("success",l),n.removeEventListener("error",u)},l=()=>{t(fs(n.result)),a()},u=()=>{i(n.error),a()};n.addEventListener("success",l),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&C1.set(t,n)}).catch(()=>{}),Ng.set(e,n),e}function PC(n){if(Up.has(n))return;const e=new Promise((t,i)=>{const a=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",u),n.removeEventListener("abort",u)},l=()=>{t(),a()},u=()=>{i(n.error||new DOMException("AbortError","AbortError")),a()};n.addEventListener("complete",l),n.addEventListener("error",u),n.addEventListener("abort",u)});Up.set(n,e)}let zp={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Up.get(n);if(e==="objectStoreNames")return n.objectStoreNames||R1.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return fs(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function MC(n){zp=n(zp)}function kC(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(Tp(this),e,...t);return R1.set(i,e.sort?e.sort():[e]),fs(i)}:DC().includes(n)?function(...e){return n.apply(Tp(this),e),fs(C1.get(this))}:function(...e){return fs(n.apply(Tp(this),e))}}function VC(n){return typeof n=="function"?kC(n):(n instanceof IDBTransaction&&PC(n),IC(n,OC())?new Proxy(n,zp):n)}function fs(n){if(n instanceof IDBRequest)return jC(n);if(xp.has(n))return xp.get(n);const e=VC(n);return e!==n&&(xp.set(n,e),Ng.set(e,n)),e}const Tp=n=>Ng.get(n);function LC(n,e,{blocked:t,upgrade:i,blocking:a,terminated:l}={}){const u=indexedDB.open(n,e),f=fs(u);return i&&u.addEventListener("upgradeneeded",p=>{i(fs(u.result),p.oldVersion,p.newVersion,fs(u.transaction),p)}),t&&u.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),f.then(p=>{l&&p.addEventListener("close",()=>l()),a&&p.addEventListener("versionchange",y=>a(y.oldVersion,y.newVersion,y))}).catch(()=>{}),f}const UC=["get","getKey","getAll","getAllKeys","count"],zC=["put","add","delete","clear"],wp=new Map;function sb(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(wp.get(e))return wp.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,a=zC.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(a||UC.includes(t)))return;const l=async function(u,...f){const p=this.transaction(u,a?"readwrite":"readonly");let y=p.store;return i&&(y=y.index(f.shift())),(await Promise.all([y[t](...f),a&&p.done]))[0]};return wp.set(e,l),l}MC(n=>({...n,get:(e,t,i)=>sb(e,t)||n.get(e,t,i),has:(e,t)=>!!sb(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(qC(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function qC(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Bp="@firebase/app",ab="0.12.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wi=new Sg("@firebase/app"),FC="@firebase/app-compat",HC="@firebase/analytics-compat",GC="@firebase/analytics",$C="@firebase/app-check-compat",YC="@firebase/app-check",KC="@firebase/auth",QC="@firebase/auth-compat",WC="@firebase/database",XC="@firebase/data-connect",ZC="@firebase/database-compat",JC="@firebase/functions",eR="@firebase/functions-compat",tR="@firebase/installations",nR="@firebase/installations-compat",rR="@firebase/messaging",iR="@firebase/messaging-compat",sR="@firebase/performance",aR="@firebase/performance-compat",oR="@firebase/remote-config",lR="@firebase/remote-config-compat",cR="@firebase/storage",uR="@firebase/storage-compat",dR="@firebase/firestore",hR="@firebase/vertexai",fR="@firebase/firestore-compat",mR="firebase",pR="11.7.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qp="[DEFAULT]",gR={[Bp]:"fire-core",[FC]:"fire-core-compat",[GC]:"fire-analytics",[HC]:"fire-analytics-compat",[YC]:"fire-app-check",[$C]:"fire-app-check-compat",[KC]:"fire-auth",[QC]:"fire-auth-compat",[WC]:"fire-rtdb",[XC]:"fire-data-connect",[ZC]:"fire-rtdb-compat",[JC]:"fire-fn",[eR]:"fire-fn-compat",[tR]:"fire-iid",[nR]:"fire-iid-compat",[rR]:"fire-fcm",[iR]:"fire-fcm-compat",[sR]:"fire-perf",[aR]:"fire-perf-compat",[oR]:"fire-rc",[lR]:"fire-rc-compat",[cR]:"fire-gcs",[uR]:"fire-gcs-compat",[dR]:"fire-fst",[fR]:"fire-fst-compat",[hR]:"fire-vertex","fire-js":"fire-js",[mR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sh=new Map,yR=new Map,Fp=new Map;function ob(n,e){try{n.container.addComponent(e)}catch(t){wi.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Lo(n){const e=n.name;if(Fp.has(e))return wi.debug(`There were multiple attempts to register component ${e}.`),!1;Fp.set(e,n);for(const t of sh.values())ob(t,n);for(const t of yR.values())ob(t,n);return!0}function Cg(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function nr(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ms=new Yc("app","Firebase",vR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _R{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Ea("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ms.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xo=pR;function I1(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i=Object.assign({name:qp,automaticDataCollectionEnabled:!1},e),a=i.name;if(typeof a!="string"||!a)throw ms.create("bad-app-name",{appName:String(a)});if(t||(t=A1()),!t)throw ms.create("no-options");const l=sh.get(a);if(l){if(ba(t,l.options)&&ba(i,l.config))return l;throw ms.create("duplicate-app",{appName:a})}const u=new AC(a);for(const p of Fp.values())u.addComponent(p);const f=new _R(t,i,u);return sh.set(a,f),f}function O1(n=qp){const e=sh.get(n);if(!e&&n===qp&&A1())return I1();if(!e)throw ms.create("no-app",{appName:n});return e}function ps(n,e,t){var i;let a=(i=gR[n])!==null&&i!==void 0?i:n;t&&(a+=`-${t}`);const l=a.match(/\s|\//),u=e.match(/\s|\//);if(l||u){const f=[`Unable to register library "${a}" with version "${e}":`];l&&f.push(`library name "${a}" contains illegal characters (whitespace or "/")`),l&&u&&f.push("and"),u&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),wi.warn(f.join(" "));return}Lo(new Ea(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bR="firebase-heartbeat-database",ER=1,Dc="firebase-heartbeat-store";let Ap=null;function D1(){return Ap||(Ap=LC(bR,ER,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Dc)}catch(t){console.warn(t)}}}}).catch(n=>{throw ms.create("idb-open",{originalErrorMessage:n.message})})),Ap}async function xR(n){try{const t=(await D1()).transaction(Dc),i=await t.objectStore(Dc).get(j1(n));return await t.done,i}catch(e){if(e instanceof Ri)wi.warn(e.message);else{const t=ms.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});wi.warn(t.message)}}}async function lb(n,e){try{const i=(await D1()).transaction(Dc,"readwrite");await i.objectStore(Dc).put(e,j1(n)),await i.done}catch(t){if(t instanceof Ri)wi.warn(t.message);else{const i=ms.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});wi.warn(i.message)}}}function j1(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TR=1024,wR=30;class AR{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new NR(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=cb();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(u=>u.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:a}),this._heartbeatsCache.heartbeats.length>wR){const u=CR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){wi.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=cb(),{heartbeatsToSend:i,unsentEntries:a}=SR(this._heartbeatsCache.heartbeats),l=ih(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return wi.warn(t),""}}}function cb(){return new Date().toISOString().substring(0,10)}function SR(n,e=TR){const t=[];let i=n.slice();for(const a of n){const l=t.find(u=>u.agent===a.agent);if(l){if(l.dates.push(a.date),ub(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),ub(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class NR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return fC()?mC().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await xR(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const a=await this.read();return lb(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const a=await this.read();return lb(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function ub(n){return ih(JSON.stringify({version:2,heartbeats:n})).length}function CR(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RR(n){Lo(new Ea("platform-logger",e=>new BC(e),"PRIVATE")),Lo(new Ea("heartbeat",e=>new AR(e),"PRIVATE")),ps(Bp,ab,n),ps(Bp,ab,"esm2017"),ps("fire-js","")}RR("");function Rg(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(n);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(n,i[a])&&(t[i[a]]=n[i[a]]);return t}function P1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const IR=P1,M1=new Yc("auth","Firebase",P1());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ah=new Sg("@firebase/auth");function OR(n,...e){ah.logLevel<=Be.WARN&&ah.warn(`Auth (${Xo}): ${n}`,...e)}function qd(n,...e){ah.logLevel<=Be.ERROR&&ah.error(`Auth (${Xo}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fr(n,...e){throw Ig(n,...e)}function zr(n,...e){return Ig(n,...e)}function k1(n,e,t){const i=Object.assign(Object.assign({},IR()),{[e]:t});return new Yc("auth","Firebase",i).create(e,{appName:n.name})}function Ei(n){return k1(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ig(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return M1.create(n,...e)}function Ae(n,e,...t){if(!n)throw Ig(e,...t)}function vi(n){const e="INTERNAL ASSERTION FAILED: "+n;throw qd(e),new Error(e)}function Ai(n,e){n||vi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hp(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function DR(){return db()==="http:"||db()==="https:"}function db(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(DR()||cC()||"connection"in navigator)?navigator.onLine:!0}function PR(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ai(t>e,"Short delay should be less than long delay!"),this.isMobile=aC()||uC()}get(){return jR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Og(n,e){Ai(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V1{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;vi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;vi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;vi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kR=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],VR=new Qc(3e4,6e4);function Ns(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Ii(n,e,t,i,a={}){return L1(n,a,async()=>{let l={},u={};i&&(e==="GET"?u=i:l={body:JSON.stringify(i)});const f=Kc(Object.assign({key:n.config.apiKey},u)).slice(1),p=await n._getAdditionalHeaders();p["Content-Type"]="application/json",n.languageCode&&(p["X-Firebase-Locale"]=n.languageCode);const y=Object.assign({method:e,headers:p},l);return lC()||(y.referrerPolicy="no-referrer"),n.emulatorConfig&&$c(n.emulatorConfig.host)&&(y.credentials="include"),V1.fetch()(await U1(n,n.config.apiHost,t,f),y)})}async function L1(n,e,t){n._canInitEmulator=!1;const i=Object.assign(Object.assign({},MR),e);try{const a=new UR(n),l=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const u=await l.json();if("needConfirmation"in u)throw jd(n,"account-exists-with-different-credential",u);if(l.ok&&!("errorMessage"in u))return u;{const f=l.ok?u.errorMessage:u.error.message,[p,y]=f.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw jd(n,"credential-already-in-use",u);if(p==="EMAIL_EXISTS")throw jd(n,"email-already-in-use",u);if(p==="USER_DISABLED")throw jd(n,"user-disabled",u);const v=i[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw k1(n,v,y);fr(n,v)}}catch(a){if(a instanceof Ri)throw a;fr(n,"network-request-failed",{message:String(a)})}}async function Wc(n,e,t,i,a={}){const l=await Ii(n,e,t,i,a);return"mfaPendingCredential"in l&&fr(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function U1(n,e,t,i){const a=`${e}${t}?${i}`,l=n,u=l.config.emulator?Og(n.config,a):`${n.config.apiScheme}://${a}`;return kR.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(u).toString():u}function LR(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class UR{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(zr(this.auth,"network-request-failed")),VR.get())})}}function jd(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const a=zr(n,e,i);return a.customData._tokenResponse=t,a}function hb(n){return n!==void 0&&n.enterprise!==void 0}class zR{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return LR(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function BR(n,e){return Ii(n,"GET","/v2/recaptchaConfig",Ns(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qR(n,e){return Ii(n,"POST","/v1/accounts:delete",e)}async function oh(n,e){return Ii(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sc(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function FR(n,e=!1){const t=Ft(n),i=await t.getIdToken(e),a=Dg(i);Ae(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,u=l==null?void 0:l.sign_in_provider;return{claims:a,token:i,authTime:Sc(Sp(a.auth_time)),issuedAtTime:Sc(Sp(a.iat)),expirationTime:Sc(Sp(a.exp)),signInProvider:u||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Sp(n){return Number(n)*1e3}function Dg(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return qd("JWT malformed, contained fewer than 3 sections"),null;try{const a=T1(t);return a?JSON.parse(a):(qd("Failed to decode base64 JWT payload"),null)}catch(a){return qd("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function fb(n){const e=Dg(n);return Ae(e,"internal-error"),Ae(typeof e.exp<"u","internal-error"),Ae(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uo(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Ri&&HR(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function HR({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const a=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Sc(this.lastLoginAt),this.creationTime=Sc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lh(n){var e;const t=n.auth,i=await n.getIdToken(),a=await Uo(n,oh(t,{idToken:i}));Ae(a==null?void 0:a.users.length,t,"internal-error");const l=a.users[0];n._notifyReloadListener(l);const u=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?z1(l.providerUserInfo):[],f=YR(n.providerData,u),p=n.isAnonymous,y=!(n.email&&l.passwordHash)&&!(f!=null&&f.length),v=p?y:!1,b={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:f,metadata:new Gp(l.createdAt,l.lastLoginAt),isAnonymous:v};Object.assign(n,b)}async function $R(n){const e=Ft(n);await lh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function YR(n,e){return[...n.filter(i=>!e.some(a=>a.providerId===i.providerId)),...e]}function z1(n){return n.map(e=>{var{providerId:t}=e,i=Rg(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KR(n,e){const t=await L1(n,{},async()=>{const i=Kc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=n.config,u=await U1(n,a,"/v1/token",`key=${l}`),f=await n._getAdditionalHeaders();return f["Content-Type"]="application/x-www-form-urlencoded",V1.fetch()(u,{method:"POST",headers:f,body:i})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function QR(n,e){return Ii(n,"POST","/v2/accounts:revokeToken",Ns(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ae(e.idToken,"internal-error"),Ae(typeof e.idToken<"u","internal-error"),Ae(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):fb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ae(e.length!==0,"internal-error");const t=fb(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ae(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:a,expiresIn:l}=await KR(e,t);this.updateTokensAndExpiration(i,a,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:a,expirationTime:l}=t,u=new Do;return i&&(Ae(typeof i=="string","internal-error",{appName:e}),u.refreshToken=i),a&&(Ae(typeof a=="string","internal-error",{appName:e}),u.accessToken=a),l&&(Ae(typeof l=="number","internal-error",{appName:e}),u.expirationTime=l),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Do,this.toJSON())}_performRefresh(){return vi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function as(n,e){Ae(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class hr{constructor(e){var{uid:t,auth:i,stsTokenManager:a}=e,l=Rg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new GR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Gp(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await Uo(this,this.stsTokenManager.getToken(this.auth,e));return Ae(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return FR(this,e)}reload(){return $R(this)}_assign(e){this!==e&&(Ae(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new hr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ae(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await lh(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(nr(this.auth.app))return Promise.reject(Ei(this.auth));const e=await this.getIdToken();return await Uo(this,qR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,a,l,u,f,p,y,v;const b=(i=t.displayName)!==null&&i!==void 0?i:void 0,T=(a=t.email)!==null&&a!==void 0?a:void 0,N=(l=t.phoneNumber)!==null&&l!==void 0?l:void 0,A=(u=t.photoURL)!==null&&u!==void 0?u:void 0,k=(f=t.tenantId)!==null&&f!==void 0?f:void 0,D=(p=t._redirectEventId)!==null&&p!==void 0?p:void 0,$=(y=t.createdAt)!==null&&y!==void 0?y:void 0,Q=(v=t.lastLoginAt)!==null&&v!==void 0?v:void 0,{uid:U,emailVerified:ne,isAnonymous:le,providerData:pe,stsTokenManager:j}=t;Ae(U&&j,e,"internal-error");const C=Do.fromJSON(this.name,j);Ae(typeof U=="string",e,"internal-error"),as(b,e.name),as(T,e.name),Ae(typeof ne=="boolean",e,"internal-error"),Ae(typeof le=="boolean",e,"internal-error"),as(N,e.name),as(A,e.name),as(k,e.name),as(D,e.name),as($,e.name),as(Q,e.name);const R=new hr({uid:U,auth:e,email:T,emailVerified:ne,displayName:b,isAnonymous:le,photoURL:A,phoneNumber:N,tenantId:k,stsTokenManager:C,createdAt:$,lastLoginAt:Q});return pe&&Array.isArray(pe)&&(R.providerData=pe.map(M=>Object.assign({},M))),D&&(R._redirectEventId=D),R}static async _fromIdTokenResponse(e,t,i=!1){const a=new Do;a.updateFromServerResponse(t);const l=new hr({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:i});return await lh(l),l}static async _fromGetAccountInfoResponse(e,t,i){const a=t.users[0];Ae(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?z1(a.providerUserInfo):[],u=!(a.email&&a.passwordHash)&&!(l!=null&&l.length),f=new Do;f.updateFromIdToken(i);const p=new hr({uid:a.localId,auth:e,stsTokenManager:f,isAnonymous:u}),y={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new Gp(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(l!=null&&l.length)};return Object.assign(p,y),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mb=new Map;function _i(n){Ai(n instanceof Function,"Expected a class definition");let e=mb.get(n);return e?(Ai(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,mb.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}B1.type="NONE";const pb=B1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fd(n,e,t){return`firebase:${n}:${e}:${t}`}class jo{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:a,name:l}=this.auth;this.fullUserKey=Fd(this.userKey,a.apiKey,l),this.fullPersistenceKey=Fd("persistence",a.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await oh(this.auth,{idToken:e}).catch(()=>{});return t?hr._fromGetAccountInfoResponse(this.auth,t,e):null}return hr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new jo(_i(pb),e,i);const a=(await Promise.all(t.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let l=a[0]||_i(pb);const u=Fd(i,e.config.apiKey,e.name);let f=null;for(const y of t)try{const v=await y._get(u);if(v){let b;if(typeof v=="string"){const T=await oh(e,{idToken:v}).catch(()=>{});if(!T)break;b=await hr._fromGetAccountInfoResponse(e,T,v)}else b=hr._fromJSON(e,v);y!==l&&(f=b),l=y;break}}catch{}const p=a.filter(y=>y._shouldAllowMigration);return!l._shouldAllowMigration||!p.length?new jo(l,e,i):(l=p[0],f&&await l._set(u,f.toJSON()),await Promise.all(t.map(async y=>{if(y!==l)try{await y._remove(u)}catch{}})),new jo(l,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gb(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(G1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(q1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Y1(e))return"Blackberry";if(K1(e))return"Webos";if(F1(e))return"Safari";if((e.includes("chrome/")||H1(e))&&!e.includes("edge/"))return"Chrome";if($1(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function q1(n=gn()){return/firefox\//i.test(n)}function F1(n=gn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function H1(n=gn()){return/crios\//i.test(n)}function G1(n=gn()){return/iemobile/i.test(n)}function $1(n=gn()){return/android/i.test(n)}function Y1(n=gn()){return/blackberry/i.test(n)}function K1(n=gn()){return/webos/i.test(n)}function jg(n=gn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function WR(n=gn()){var e;return jg(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function XR(){return dC()&&document.documentMode===10}function Q1(n=gn()){return jg(n)||$1(n)||K1(n)||Y1(n)||/windows phone/i.test(n)||G1(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W1(n,e=[]){let t;switch(n){case"Browser":t=gb(gn());break;case"Worker":t=`${gb(gn())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Xo}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((u,f)=>{try{const p=e(l);u(p)}catch(p){f(p)}});i.onAbort=t,this.queue.push(i);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JR(n,e={}){return Ii(n,"GET","/v2/passwordPolicy",Ns(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e2=6;class t2{constructor(e){var t,i,a,l;const u=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=u.minPasswordLength)!==null&&t!==void 0?t:e2,u.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=u.maxPasswordLength),u.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=u.containsLowercaseCharacter),u.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=u.containsUppercaseCharacter),u.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=u.containsNumericCharacter),u.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=u.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(a=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&a!==void 0?a:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,a,l,u,f;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=(t=p.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),p.isValid&&(p.isValid=(i=p.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),p.isValid&&(p.isValid=(a=p.containsLowercaseLetter)!==null&&a!==void 0?a:!0),p.isValid&&(p.isValid=(l=p.containsUppercaseLetter)!==null&&l!==void 0?l:!0),p.isValid&&(p.isValid=(u=p.containsNumericCharacter)!==null&&u!==void 0?u:!0),p.isValid&&(p.isValid=(f=p.containsNonAlphanumericCharacter)!==null&&f!==void 0?f:!0),p}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let a=0;a<e.length;a++)i=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n2{constructor(e,t,i,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new yb(this),this.idTokenSubscription=new yb(this),this.beforeStateQueue=new ZR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=M1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=_i(t)),this._initializationPromise=this.queue(async()=>{var i,a,l;if(!this._deleted&&(this.persistenceManager=await jo.create(this,e),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((a=this._popupRedirectResolver)===null||a===void 0)&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)===null||l===void 0?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await oh(this,{idToken:e}),i=await hr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(nr(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(f,f))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let a=i,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,f=a==null?void 0:a._redirectEventId,p=await this.tryRedirectSignIn(e);(!u||u===f)&&(p!=null&&p.user)&&(a=p.user,l=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(a)}catch(u){a=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return Ae(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await lh(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=PR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(nr(this.app))return Promise.reject(Ei(this));const t=e?Ft(e):null;return t&&Ae(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ae(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return nr(this.app)?Promise.reject(Ei(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return nr(this.app)?Promise.reject(Ei(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(_i(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await JR(this),t=new t2(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Yc("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await QR(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&_i(e)||this._popupRedirectResolver;Ae(t,this,"argument-error"),this.redirectPersistenceManager=await jo.create(this,[_i(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,a){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let u=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ae(f,this,"internal-error"),f.then(()=>{u||l(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,i,a);return()=>{u=!0,p()}}else{const p=e.addObserver(t);return()=>{u=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ae(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=W1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);const a=await this._getAppCheckToken();return a&&(t["X-Firebase-AppCheck"]=a),t}async _getAppCheckToken(){var e;if(nr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&OR(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Ca(n){return Ft(n)}class yb{constructor(e){this.auth=e,this.observer=null,this.addObserver=_C(t=>this.observer=t)}get next(){return Ae(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ph={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function r2(n){Ph=n}function X1(n){return Ph.loadJS(n)}function i2(){return Ph.recaptchaEnterpriseScript}function s2(){return Ph.gapiScript}function a2(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class o2{constructor(){this.enterprise=new l2}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class l2{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const c2="recaptcha-enterprise",Z1="NO_RECAPTCHA";class u2{constructor(e){this.type=c2,this.auth=Ca(e)}async verify(e="verify",t=!1){async function i(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(u,f)=>{BR(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)f(new Error("recaptcha Enterprise site key undefined"));else{const y=new zR(p);return l.tenantId==null?l._agentRecaptchaConfig=y:l._tenantRecaptchaConfigs[l.tenantId]=y,u(y.siteKey)}}).catch(p=>{f(p)})})}function a(l,u,f){const p=window.grecaptcha;hb(p)?p.enterprise.ready(()=>{p.enterprise.execute(l,{action:e}).then(y=>{u(y)}).catch(()=>{u(Z1)})}):f(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new o2().execute("siteKey",{action:"verify"}):new Promise((l,u)=>{i(this.auth).then(f=>{if(!t&&hb(window.grecaptcha))a(f,l,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let p=i2();p.length!==0&&(p+=f),X1(p).then(()=>{a(f,l,u)}).catch(y=>{u(y)})}}).catch(f=>{u(f)})})}}async function vb(n,e,t,i=!1,a=!1){const l=new u2(n);let u;if(a)u=Z1;else try{u=await l.verify(t)}catch{u=await l.verify(t,!0)}const f=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in f){const p=f.phoneEnrollmentInfo.phoneNumber,y=f.phoneEnrollmentInfo.recaptchaToken;Object.assign(f,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:y,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in f){const p=f.phoneSignInInfo.recaptchaToken;Object.assign(f,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return f}return i?Object.assign(f,{captchaResp:u}):Object.assign(f,{captchaResponse:u}),Object.assign(f,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(f,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),f}async function $p(n,e,t,i,a){var l;if(!((l=n._getRecaptchaConfig())===null||l===void 0)&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await vb(n,e,t,t==="getOobCode");return i(n,u)}else return i(n,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await vb(n,e,t,t==="getOobCode");return i(n,f)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d2(n,e){const t=Cg(n,"auth");if(t.isInitialized()){const a=t.getImmediate(),l=t.getOptions();if(ba(l,e??{}))return a;fr(a,"already-initialized")}return t.initialize({options:e})}function h2(n,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(_i);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function f2(n,e,t){const i=Ca(n);Ae(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const a=!1,l=J1(e),{host:u,port:f}=m2(e),p=f===null?"":`:${f}`,y={url:`${l}//${u}${p}/`},v=Object.freeze({host:u,port:f,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!i._canInitEmulator){Ae(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Ae(ba(y,i.config.emulator)&&ba(v,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=y,i.emulatorConfig=v,i.settings.appVerificationDisabledForTesting=!0,$c(u)?(jh("Auth",!0),N1(`${l}//${u}${p}`)):p2()}function J1(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function m2(n){const e=J1(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(i);if(a){const l=a[1];return{host:l,port:_b(i.substr(l.length+1))}}else{const[l,u]=i.split(":");return{host:l,port:_b(u)}}}function _b(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function p2(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pg{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return vi("not implemented")}_getIdTokenResponse(e){return vi("not implemented")}_linkToIdToken(e,t){return vi("not implemented")}_getReauthenticationResolver(e){return vi("not implemented")}}async function g2(n,e){return Ii(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function y2(n,e){return Wc(n,"POST","/v1/accounts:signInWithPassword",Ns(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function v2(n,e){return Wc(n,"POST","/v1/accounts:signInWithEmailLink",Ns(n,e))}async function _2(n,e){return Wc(n,"POST","/v1/accounts:signInWithEmailLink",Ns(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc extends Pg{constructor(e,t,i,a=null){super("password",i),this._email=e,this._password=t,this._tenantId=a}static _fromEmailAndPassword(e,t){return new jc(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new jc(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return $p(e,t,"signInWithPassword",y2);case"emailLink":return v2(e,{email:this._email,oobCode:this._password});default:fr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return $p(e,i,"signUpPassword",g2);case"emailLink":return _2(e,{idToken:t,email:this._email,oobCode:this._password});default:fr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Po(n,e){return Wc(n,"POST","/v1/accounts:signInWithIdp",Ns(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b2="http://localhost";class xa extends Pg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new xa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):fr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:a}=t,l=Rg(t,["providerId","signInMethod"]);if(!i||!a)return null;const u=new xa(i,a);return u.idToken=l.idToken||void 0,u.accessToken=l.accessToken||void 0,u.secret=l.secret,u.nonce=l.nonce,u.pendingToken=l.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return Po(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Po(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Po(e,t)}buildRequest(){const e={requestUri:b2,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Kc(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E2(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function x2(n){const e=_c(bc(n)).link,t=e?_c(bc(e)).deep_link_id:null,i=_c(bc(n)).deep_link_id;return(i?_c(bc(i)).link:null)||i||t||e||n}class Mg{constructor(e){var t,i,a,l,u,f;const p=_c(bc(e)),y=(t=p.apiKey)!==null&&t!==void 0?t:null,v=(i=p.oobCode)!==null&&i!==void 0?i:null,b=E2((a=p.mode)!==null&&a!==void 0?a:null);Ae(y&&v&&b,"argument-error"),this.apiKey=y,this.operation=b,this.code=v,this.continueUrl=(l=p.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(u=p.lang)!==null&&u!==void 0?u:null,this.tenantId=(f=p.tenantId)!==null&&f!==void 0?f:null}static parseLink(e){const t=x2(e);try{return new Mg(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zo{constructor(){this.providerId=Zo.PROVIDER_ID}static credential(e,t){return jc._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=Mg.parseLink(t);return Ae(i,"argument-error"),jc._fromEmailAndCode(e,i.code,i.tenantId)}}Zo.PROVIDER_ID="password";Zo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Zo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ex{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc extends ex{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls extends Xc{constructor(){super("facebook.com")}static credential(e){return xa._fromParams({providerId:ls.PROVIDER_ID,signInMethod:ls.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ls.credentialFromTaggedObject(e)}static credentialFromError(e){return ls.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ls.credential(e.oauthAccessToken)}catch{return null}}}ls.FACEBOOK_SIGN_IN_METHOD="facebook.com";ls.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs extends Xc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return xa._fromParams({providerId:cs.PROVIDER_ID,signInMethod:cs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return cs.credentialFromTaggedObject(e)}static credentialFromError(e){return cs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return cs.credential(t,i)}catch{return null}}}cs.GOOGLE_SIGN_IN_METHOD="google.com";cs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us extends Xc{constructor(){super("github.com")}static credential(e){return xa._fromParams({providerId:us.PROVIDER_ID,signInMethod:us.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return us.credentialFromTaggedObject(e)}static credentialFromError(e){return us.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return us.credential(e.oauthAccessToken)}catch{return null}}}us.GITHUB_SIGN_IN_METHOD="github.com";us.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds extends Xc{constructor(){super("twitter.com")}static credential(e,t){return xa._fromParams({providerId:ds.PROVIDER_ID,signInMethod:ds.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ds.credentialFromTaggedObject(e)}static credentialFromError(e){return ds.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return ds.credential(t,i)}catch{return null}}}ds.TWITTER_SIGN_IN_METHOD="twitter.com";ds.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T2(n,e){return Wc(n,"POST","/v1/accounts:signUp",Ns(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,a=!1){const l=await hr._fromIdTokenResponse(e,i,a),u=bb(i);return new Ta({user:l,providerId:u,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const a=bb(i);return new Ta({user:e,providerId:a,_tokenResponse:i,operationType:t})}}function bb(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ch extends Ri{constructor(e,t,i,a){var l;super(t.code,t.message),this.operationType=i,this.user=a,Object.setPrototypeOf(this,ch.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,a){return new ch(e,t,i,a)}}function tx(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?ch._fromErrorAndOperation(n,l,e,i):l})}async function w2(n,e,t=!1){const i=await Uo(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Ta._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A2(n,e,t=!1){const{auth:i}=n;if(nr(i.app))return Promise.reject(Ei(i));const a="reauthenticate";try{const l=await Uo(n,tx(i,a,e,n),t);Ae(l.idToken,i,"internal-error");const u=Dg(l.idToken);Ae(u,i,"internal-error");const{sub:f}=u;return Ae(n.uid===f,i,"user-mismatch"),Ta._forOperation(n,a,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&fr(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nx(n,e,t=!1){if(nr(n.app))return Promise.reject(Ei(n));const i="signIn",a=await tx(n,i,e),l=await Ta._fromIdTokenResponse(n,i,a);return t||await n._updateCurrentUser(l.user),l}async function S2(n,e){return nx(Ca(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rx(n){const e=Ca(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function N2(n,e,t){if(nr(n.app))return Promise.reject(Ei(n));const i=Ca(n),u=await $p(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",T2).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&rx(n),p}),f=await Ta._fromIdTokenResponse(i,"signIn",u);return await i._updateCurrentUser(f.user),f}function C2(n,e,t){return nr(n.app)?Promise.reject(Ei(n)):S2(Ft(n),Zo.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&rx(n),i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function R2(n,e){return Ii(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I2(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const i=Ft(n),l={idToken:await i.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},u=await Uo(i,R2(i.auth,l));i.displayName=u.displayName||null,i.photoURL=u.photoUrl||null;const f=i.providerData.find(({providerId:p})=>p==="password");f&&(f.displayName=i.displayName,f.photoURL=i.photoURL),await i._updateTokensIfNecessary(u)}function O2(n,e,t,i){return Ft(n).onIdTokenChanged(e,t,i)}function D2(n,e,t){return Ft(n).beforeAuthStateChanged(e,t)}function j2(n,e,t,i){return Ft(n).onAuthStateChanged(e,t,i)}function P2(n){return Ft(n).signOut()}const uh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ix{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(uh,"1"),this.storage.removeItem(uh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M2=1e3,k2=10;class sx extends ix{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Q1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),a=this.localCache[t];i!==a&&e(t,a,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,f,p)=>{this.notifyListeners(u,p)});return}const i=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const u=this.storage.getItem(i);!t&&this.localCache[i]===u||this.notifyListeners(i,u)},l=this.storage.getItem(i);XR()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,k2):a()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},M2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}sx.type="LOCAL";const V2=sx;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ax extends ix{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}ax.type="SESSION";const ox=ax;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L2(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const i=new Mh(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:a,data:l}=t.data,u=this.handlersMap[a];if(!(u!=null&&u.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:a});const f=Array.from(u).map(async y=>y(t.origin,l)),p=await L2(f);t.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Mh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kg(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U2{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,u;return new Promise((f,p)=>{const y=kg("",20);a.port1.start();const v=setTimeout(()=>{p(new Error("unsupported_event"))},i);u={messageChannel:a,onMessage(b){const T=b;if(T.data.eventId===y)switch(T.data.status){case"ack":clearTimeout(v),l=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),f(T.data.response);break;default:clearTimeout(v),clearTimeout(l),p(new Error("invalid_response"));break}}},this.handlers.add(u),a.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:y,data:t},[a.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Br(){return window}function z2(n){Br().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lx(){return typeof Br().WorkerGlobalScope<"u"&&typeof Br().importScripts=="function"}async function B2(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function q2(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function F2(){return lx()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cx="firebaseLocalStorageDb",H2=1,dh="firebaseLocalStorage",ux="fbase_key";class Zc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function kh(n,e){return n.transaction([dh],e?"readwrite":"readonly").objectStore(dh)}function G2(){const n=indexedDB.deleteDatabase(cx);return new Zc(n).toPromise()}function Yp(){const n=indexedDB.open(cx,H2);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(dh,{keyPath:ux})}catch(a){t(a)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(dh)?e(i):(i.close(),await G2(),e(await Yp()))})})}async function Eb(n,e,t){const i=kh(n,!0).put({[ux]:e,value:t});return new Zc(i).toPromise()}async function $2(n,e){const t=kh(n,!1).get(e),i=await new Zc(t).toPromise();return i===void 0?null:i.value}function xb(n,e){const t=kh(n,!0).delete(e);return new Zc(t).toPromise()}const Y2=800,K2=3;class dx{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Yp(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>K2)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return lx()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Mh._getInstance(F2()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await B2(),!this.activeServiceWorker)return;this.sender=new U2(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((t=i[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||q2()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Yp();return await Eb(e,uh,"1"),await xb(e,uh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>Eb(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>$2(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>xb(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=kh(a,!1).getAll();return new Zc(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)i.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!i.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Y2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}dx.type="LOCAL";const Q2=dx;new Qc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W2(n,e){return e?_i(e):(Ae(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vg extends Pg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Po(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Po(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Po(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function X2(n){return nx(n.auth,new Vg(n),n.bypassAuthState)}function Z2(n){const{auth:e,user:t}=n;return Ae(t,e,"internal-error"),A2(t,new Vg(n),n.bypassAuthState)}async function J2(n){const{auth:e,user:t}=n;return Ae(t,e,"internal-error"),w2(t,new Vg(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hx{constructor(e,t,i,a,l=!1){this.auth=e,this.resolver=i,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:a,tenantId:l,error:u,type:f}=e;if(u){this.reject(u);return}const p={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(p))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return X2;case"linkViaPopup":case"linkViaRedirect":return J2;case"reauthViaPopup":case"reauthViaRedirect":return Z2;default:fr(this.auth,"internal-error")}}resolve(e){Ai(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ai(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eI=new Qc(2e3,1e4);class Oo extends hx{constructor(e,t,i,a,l){super(e,t,a,l),this.provider=i,this.authWindow=null,this.pollId=null,Oo.currentPopupAction&&Oo.currentPopupAction.cancel(),Oo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ae(e,this.auth,"internal-error"),e}async onExecution(){Ai(this.filter.length===1,"Popup operations only handle one event");const e=kg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(zr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(zr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Oo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if(!((i=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(zr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,eI.get())};e()}}Oo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tI="pendingRedirect",Hd=new Map;class nI extends hx{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Hd.get(this.auth._key());if(!e){try{const i=await rI(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Hd.set(this.auth._key(),e)}return this.bypassAuthState||Hd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function rI(n,e){const t=aI(e),i=sI(n);if(!await i._isAvailable())return!1;const a=await i._get(t)==="true";return await i._remove(t),a}function iI(n,e){Hd.set(n._key(),e)}function sI(n){return _i(n._redirectPersistence)}function aI(n){return Fd(tI,n.config.apiKey,n.name)}async function oI(n,e,t=!1){if(nr(n.app))return Promise.reject(Ei(n));const i=Ca(n),a=W2(i,e),u=await new nI(i,a,t).execute();return u&&!t&&(delete u.user._redirectEventId,await i._persistUserIfCurrent(u.user),await i._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lI=10*60*1e3;class cI{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!uI(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!fx(e)){const a=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(zr(this.auth,a))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=lI&&this.cachedEventUids.clear(),this.cachedEventUids.has(Tb(e))}saveEventToCache(e){this.cachedEventUids.add(Tb(e)),this.lastProcessedEventTime=Date.now()}}function Tb(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function fx({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function uI(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return fx(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dI(n,e={}){return Ii(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hI=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,fI=/^https?/;async function mI(n){if(n.config.emulator)return;const{authorizedDomains:e}=await dI(n);for(const t of e)try{if(pI(t))return}catch{}fr(n,"unauthorized-domain")}function pI(n){const e=Hp(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===i}if(!fI.test(t))return!1;if(hI.test(n))return i===n;const a=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gI=new Qc(3e4,6e4);function wb(){const n=Br().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function yI(n){return new Promise((e,t)=>{var i,a,l;function u(){wb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{wb(),t(zr(n,"network-request-failed"))},timeout:gI.get()})}if(!((a=(i=Br().gapi)===null||i===void 0?void 0:i.iframes)===null||a===void 0)&&a.Iframe)e(gapi.iframes.getContext());else if(!((l=Br().gapi)===null||l===void 0)&&l.load)u();else{const f=a2("iframefcb");return Br()[f]=()=>{gapi.load?u():t(zr(n,"network-request-failed"))},X1(`${s2()}?onload=${f}`).catch(p=>t(p))}}).catch(e=>{throw Gd=null,e})}let Gd=null;function vI(n){return Gd=Gd||yI(n),Gd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _I=new Qc(5e3,15e3),bI="__/auth/iframe",EI="emulator/auth/iframe",xI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},TI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function wI(n){const e=n.config;Ae(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Og(e,EI):`https://${n.config.authDomain}/${bI}`,i={apiKey:e.apiKey,appName:n.name,v:Xo},a=TI.get(n.config.apiHost);a&&(i.eid=a);const l=n._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${Kc(i).slice(1)}`}async function AI(n){const e=await vI(n),t=Br().gapi;return Ae(t,n,"internal-error"),e.open({where:document.body,url:wI(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:xI,dontclear:!0},i=>new Promise(async(a,l)=>{await i.restyle({setHideOnLeave:!1});const u=zr(n,"network-request-failed"),f=Br().setTimeout(()=>{l(u)},_I.get());function p(){Br().clearTimeout(f),a(i)}i.ping(p).then(p,()=>{l(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},NI=500,CI=600,RI="_blank",II="http://localhost";class Ab{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function OI(n,e,t,i=NI,a=CI){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),u=Math.max((window.screen.availWidth-i)/2,0).toString();let f="";const p=Object.assign(Object.assign({},SI),{width:i.toString(),height:a.toString(),top:l,left:u}),y=gn().toLowerCase();t&&(f=H1(y)?RI:t),q1(y)&&(e=e||II,p.scrollbars="yes");const v=Object.entries(p).reduce((T,[N,A])=>`${T}${N}=${A},`,"");if(WR(y)&&f!=="_self")return DI(e||"",f),new Ab(null);const b=window.open(e||"",f,v);Ae(b,n,"popup-blocked");try{b.focus()}catch{}return new Ab(b)}function DI(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jI="__/auth/handler",PI="emulator/auth/handler",MI=encodeURIComponent("fac");async function Sb(n,e,t,i,a,l){Ae(n.config.authDomain,n,"auth-domain-config-required"),Ae(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:Xo,eventId:a};if(e instanceof ex){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",vC(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,b]of Object.entries({}))u[v]=b}if(e instanceof Xc){const v=e.getScopes().filter(b=>b!=="");v.length>0&&(u.scopes=v.join(","))}n.tenantId&&(u.tid=n.tenantId);const f=u;for(const v of Object.keys(f))f[v]===void 0&&delete f[v];const p=await n._getAppCheckToken(),y=p?`#${MI}=${encodeURIComponent(p)}`:"";return`${kI(n)}?${Kc(f).slice(1)}${y}`}function kI({config:n}){return n.emulator?Og(n,PI):`https://${n.authDomain}/${jI}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Np="webStorageSupport";class VI{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ox,this._completeRedirectFn=oI,this._overrideRedirectResult=iI}async _openPopup(e,t,i,a){var l;Ai((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const u=await Sb(e,t,i,Hp(),a);return OI(e,u,kg())}async _openRedirect(e,t,i,a){await this._originValidation(e);const l=await Sb(e,t,i,Hp(),a);return z2(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:l}=this.eventManagers[t];return a?Promise.resolve(a):(Ai(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await AI(e),i=new cI(e);return t.register("authEvent",a=>(Ae(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:i.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Np,{type:Np},a=>{var l;const u=(l=a==null?void 0:a[0])===null||l===void 0?void 0:l[Np];u!==void 0&&t(!!u),fr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=mI(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Q1()||F1()||jg()}}const LI=VI;var Nb="@firebase/auth",Cb="1.10.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ae(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zI(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function BI(n){Lo(new Ea("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:u,authDomain:f}=i.options;Ae(u&&!u.includes(":"),"invalid-api-key",{appName:i.name});const p={apiKey:u,authDomain:f,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:W1(n)},y=new n2(i,a,l,p);return h2(y,t),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Lo(new Ea("auth-internal",e=>{const t=Ca(e.getProvider("auth").getImmediate());return(i=>new UI(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ps(Nb,Cb,zI(n)),ps(Nb,Cb,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qI=5*60,FI=S1("authIdTokenMaxAge")||qI;let Rb=null;const HI=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>FI)return;const a=t==null?void 0:t.token;Rb!==a&&(Rb=a,await fetch(n,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function GI(n=O1()){const e=Cg(n,"auth");if(e.isInitialized())return e.getImmediate();const t=d2(n,{popupRedirectResolver:LI,persistence:[Q2,V2,ox]}),i=S1("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const u=HI(l.toString());D2(t,u,()=>u(t.currentUser)),O2(t,f=>u(f))}}const a=w1("auth");return a?f2(t,`http://${a}`):jh("Auth",!1),t}function $I(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}r2({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=a=>{const l=zr("internal-error");l.customData=a,t(l)},i.type="text/javascript",i.charset="UTF-8",$I().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});BI("Browser");var YI="firebase",KI="11.7.3";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ps(YI,KI,"app");var Ib=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var gs,mx;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(j,C){function R(){}R.prototype=C.prototype,j.D=C.prototype,j.prototype=new R,j.prototype.constructor=j,j.C=function(M,z,B){for(var O=Array(arguments.length-2),ft=2;ft<arguments.length;ft++)O[ft-2]=arguments[ft];return C.prototype[z].apply(M,O)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(j,C,R){R||(R=0);var M=Array(16);if(typeof C=="string")for(var z=0;16>z;++z)M[z]=C.charCodeAt(R++)|C.charCodeAt(R++)<<8|C.charCodeAt(R++)<<16|C.charCodeAt(R++)<<24;else for(z=0;16>z;++z)M[z]=C[R++]|C[R++]<<8|C[R++]<<16|C[R++]<<24;C=j.g[0],R=j.g[1],z=j.g[2];var B=j.g[3],O=C+(B^R&(z^B))+M[0]+3614090360&4294967295;C=R+(O<<7&4294967295|O>>>25),O=B+(z^C&(R^z))+M[1]+3905402710&4294967295,B=C+(O<<12&4294967295|O>>>20),O=z+(R^B&(C^R))+M[2]+606105819&4294967295,z=B+(O<<17&4294967295|O>>>15),O=R+(C^z&(B^C))+M[3]+3250441966&4294967295,R=z+(O<<22&4294967295|O>>>10),O=C+(B^R&(z^B))+M[4]+4118548399&4294967295,C=R+(O<<7&4294967295|O>>>25),O=B+(z^C&(R^z))+M[5]+1200080426&4294967295,B=C+(O<<12&4294967295|O>>>20),O=z+(R^B&(C^R))+M[6]+2821735955&4294967295,z=B+(O<<17&4294967295|O>>>15),O=R+(C^z&(B^C))+M[7]+4249261313&4294967295,R=z+(O<<22&4294967295|O>>>10),O=C+(B^R&(z^B))+M[8]+1770035416&4294967295,C=R+(O<<7&4294967295|O>>>25),O=B+(z^C&(R^z))+M[9]+2336552879&4294967295,B=C+(O<<12&4294967295|O>>>20),O=z+(R^B&(C^R))+M[10]+4294925233&4294967295,z=B+(O<<17&4294967295|O>>>15),O=R+(C^z&(B^C))+M[11]+2304563134&4294967295,R=z+(O<<22&4294967295|O>>>10),O=C+(B^R&(z^B))+M[12]+1804603682&4294967295,C=R+(O<<7&4294967295|O>>>25),O=B+(z^C&(R^z))+M[13]+4254626195&4294967295,B=C+(O<<12&4294967295|O>>>20),O=z+(R^B&(C^R))+M[14]+2792965006&4294967295,z=B+(O<<17&4294967295|O>>>15),O=R+(C^z&(B^C))+M[15]+1236535329&4294967295,R=z+(O<<22&4294967295|O>>>10),O=C+(z^B&(R^z))+M[1]+4129170786&4294967295,C=R+(O<<5&4294967295|O>>>27),O=B+(R^z&(C^R))+M[6]+3225465664&4294967295,B=C+(O<<9&4294967295|O>>>23),O=z+(C^R&(B^C))+M[11]+643717713&4294967295,z=B+(O<<14&4294967295|O>>>18),O=R+(B^C&(z^B))+M[0]+3921069994&4294967295,R=z+(O<<20&4294967295|O>>>12),O=C+(z^B&(R^z))+M[5]+3593408605&4294967295,C=R+(O<<5&4294967295|O>>>27),O=B+(R^z&(C^R))+M[10]+38016083&4294967295,B=C+(O<<9&4294967295|O>>>23),O=z+(C^R&(B^C))+M[15]+3634488961&4294967295,z=B+(O<<14&4294967295|O>>>18),O=R+(B^C&(z^B))+M[4]+3889429448&4294967295,R=z+(O<<20&4294967295|O>>>12),O=C+(z^B&(R^z))+M[9]+568446438&4294967295,C=R+(O<<5&4294967295|O>>>27),O=B+(R^z&(C^R))+M[14]+3275163606&4294967295,B=C+(O<<9&4294967295|O>>>23),O=z+(C^R&(B^C))+M[3]+4107603335&4294967295,z=B+(O<<14&4294967295|O>>>18),O=R+(B^C&(z^B))+M[8]+1163531501&4294967295,R=z+(O<<20&4294967295|O>>>12),O=C+(z^B&(R^z))+M[13]+2850285829&4294967295,C=R+(O<<5&4294967295|O>>>27),O=B+(R^z&(C^R))+M[2]+4243563512&4294967295,B=C+(O<<9&4294967295|O>>>23),O=z+(C^R&(B^C))+M[7]+1735328473&4294967295,z=B+(O<<14&4294967295|O>>>18),O=R+(B^C&(z^B))+M[12]+2368359562&4294967295,R=z+(O<<20&4294967295|O>>>12),O=C+(R^z^B)+M[5]+4294588738&4294967295,C=R+(O<<4&4294967295|O>>>28),O=B+(C^R^z)+M[8]+2272392833&4294967295,B=C+(O<<11&4294967295|O>>>21),O=z+(B^C^R)+M[11]+1839030562&4294967295,z=B+(O<<16&4294967295|O>>>16),O=R+(z^B^C)+M[14]+4259657740&4294967295,R=z+(O<<23&4294967295|O>>>9),O=C+(R^z^B)+M[1]+2763975236&4294967295,C=R+(O<<4&4294967295|O>>>28),O=B+(C^R^z)+M[4]+1272893353&4294967295,B=C+(O<<11&4294967295|O>>>21),O=z+(B^C^R)+M[7]+4139469664&4294967295,z=B+(O<<16&4294967295|O>>>16),O=R+(z^B^C)+M[10]+3200236656&4294967295,R=z+(O<<23&4294967295|O>>>9),O=C+(R^z^B)+M[13]+681279174&4294967295,C=R+(O<<4&4294967295|O>>>28),O=B+(C^R^z)+M[0]+3936430074&4294967295,B=C+(O<<11&4294967295|O>>>21),O=z+(B^C^R)+M[3]+3572445317&4294967295,z=B+(O<<16&4294967295|O>>>16),O=R+(z^B^C)+M[6]+76029189&4294967295,R=z+(O<<23&4294967295|O>>>9),O=C+(R^z^B)+M[9]+3654602809&4294967295,C=R+(O<<4&4294967295|O>>>28),O=B+(C^R^z)+M[12]+3873151461&4294967295,B=C+(O<<11&4294967295|O>>>21),O=z+(B^C^R)+M[15]+530742520&4294967295,z=B+(O<<16&4294967295|O>>>16),O=R+(z^B^C)+M[2]+3299628645&4294967295,R=z+(O<<23&4294967295|O>>>9),O=C+(z^(R|~B))+M[0]+4096336452&4294967295,C=R+(O<<6&4294967295|O>>>26),O=B+(R^(C|~z))+M[7]+1126891415&4294967295,B=C+(O<<10&4294967295|O>>>22),O=z+(C^(B|~R))+M[14]+2878612391&4294967295,z=B+(O<<15&4294967295|O>>>17),O=R+(B^(z|~C))+M[5]+4237533241&4294967295,R=z+(O<<21&4294967295|O>>>11),O=C+(z^(R|~B))+M[12]+1700485571&4294967295,C=R+(O<<6&4294967295|O>>>26),O=B+(R^(C|~z))+M[3]+2399980690&4294967295,B=C+(O<<10&4294967295|O>>>22),O=z+(C^(B|~R))+M[10]+4293915773&4294967295,z=B+(O<<15&4294967295|O>>>17),O=R+(B^(z|~C))+M[1]+2240044497&4294967295,R=z+(O<<21&4294967295|O>>>11),O=C+(z^(R|~B))+M[8]+1873313359&4294967295,C=R+(O<<6&4294967295|O>>>26),O=B+(R^(C|~z))+M[15]+4264355552&4294967295,B=C+(O<<10&4294967295|O>>>22),O=z+(C^(B|~R))+M[6]+2734768916&4294967295,z=B+(O<<15&4294967295|O>>>17),O=R+(B^(z|~C))+M[13]+1309151649&4294967295,R=z+(O<<21&4294967295|O>>>11),O=C+(z^(R|~B))+M[4]+4149444226&4294967295,C=R+(O<<6&4294967295|O>>>26),O=B+(R^(C|~z))+M[11]+3174756917&4294967295,B=C+(O<<10&4294967295|O>>>22),O=z+(C^(B|~R))+M[2]+718787259&4294967295,z=B+(O<<15&4294967295|O>>>17),O=R+(B^(z|~C))+M[9]+3951481745&4294967295,j.g[0]=j.g[0]+C&4294967295,j.g[1]=j.g[1]+(z+(O<<21&4294967295|O>>>11))&4294967295,j.g[2]=j.g[2]+z&4294967295,j.g[3]=j.g[3]+B&4294967295}i.prototype.u=function(j,C){C===void 0&&(C=j.length);for(var R=C-this.blockSize,M=this.B,z=this.h,B=0;B<C;){if(z==0)for(;B<=R;)a(this,j,B),B+=this.blockSize;if(typeof j=="string"){for(;B<C;)if(M[z++]=j.charCodeAt(B++),z==this.blockSize){a(this,M),z=0;break}}else for(;B<C;)if(M[z++]=j[B++],z==this.blockSize){a(this,M),z=0;break}}this.h=z,this.o+=C},i.prototype.v=function(){var j=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);j[0]=128;for(var C=1;C<j.length-8;++C)j[C]=0;var R=8*this.o;for(C=j.length-8;C<j.length;++C)j[C]=R&255,R/=256;for(this.u(j),j=Array(16),C=R=0;4>C;++C)for(var M=0;32>M;M+=8)j[R++]=this.g[C]>>>M&255;return j};function l(j,C){var R=f;return Object.prototype.hasOwnProperty.call(R,j)?R[j]:R[j]=C(j)}function u(j,C){this.h=C;for(var R=[],M=!0,z=j.length-1;0<=z;z--){var B=j[z]|0;M&&B==C||(R[z]=B,M=!1)}this.g=R}var f={};function p(j){return-128<=j&&128>j?l(j,function(C){return new u([C|0],0>C?-1:0)}):new u([j|0],0>j?-1:0)}function y(j){if(isNaN(j)||!isFinite(j))return b;if(0>j)return D(y(-j));for(var C=[],R=1,M=0;j>=R;M++)C[M]=j/R|0,R*=4294967296;return new u(C,0)}function v(j,C){if(j.length==0)throw Error("number format error: empty string");if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(j.charAt(0)=="-")return D(v(j.substring(1),C));if(0<=j.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=y(Math.pow(C,8)),M=b,z=0;z<j.length;z+=8){var B=Math.min(8,j.length-z),O=parseInt(j.substring(z,z+B),C);8>B?(B=y(Math.pow(C,B)),M=M.j(B).add(y(O))):(M=M.j(R),M=M.add(y(O)))}return M}var b=p(0),T=p(1),N=p(16777216);n=u.prototype,n.m=function(){if(k(this))return-D(this).m();for(var j=0,C=1,R=0;R<this.g.length;R++){var M=this.i(R);j+=(0<=M?M:4294967296+M)*C,C*=4294967296}return j},n.toString=function(j){if(j=j||10,2>j||36<j)throw Error("radix out of range: "+j);if(A(this))return"0";if(k(this))return"-"+D(this).toString(j);for(var C=y(Math.pow(j,6)),R=this,M="";;){var z=ne(R,C).g;R=$(R,z.j(C));var B=((0<R.g.length?R.g[0]:R.h)>>>0).toString(j);if(R=z,A(R))return B+M;for(;6>B.length;)B="0"+B;M=B+M}},n.i=function(j){return 0>j?0:j<this.g.length?this.g[j]:this.h};function A(j){if(j.h!=0)return!1;for(var C=0;C<j.g.length;C++)if(j.g[C]!=0)return!1;return!0}function k(j){return j.h==-1}n.l=function(j){return j=$(this,j),k(j)?-1:A(j)?0:1};function D(j){for(var C=j.g.length,R=[],M=0;M<C;M++)R[M]=~j.g[M];return new u(R,~j.h).add(T)}n.abs=function(){return k(this)?D(this):this},n.add=function(j){for(var C=Math.max(this.g.length,j.g.length),R=[],M=0,z=0;z<=C;z++){var B=M+(this.i(z)&65535)+(j.i(z)&65535),O=(B>>>16)+(this.i(z)>>>16)+(j.i(z)>>>16);M=O>>>16,B&=65535,O&=65535,R[z]=O<<16|B}return new u(R,R[R.length-1]&-2147483648?-1:0)};function $(j,C){return j.add(D(C))}n.j=function(j){if(A(this)||A(j))return b;if(k(this))return k(j)?D(this).j(D(j)):D(D(this).j(j));if(k(j))return D(this.j(D(j)));if(0>this.l(N)&&0>j.l(N))return y(this.m()*j.m());for(var C=this.g.length+j.g.length,R=[],M=0;M<2*C;M++)R[M]=0;for(M=0;M<this.g.length;M++)for(var z=0;z<j.g.length;z++){var B=this.i(M)>>>16,O=this.i(M)&65535,ft=j.i(z)>>>16,Pe=j.i(z)&65535;R[2*M+2*z]+=O*Pe,Q(R,2*M+2*z),R[2*M+2*z+1]+=B*Pe,Q(R,2*M+2*z+1),R[2*M+2*z+1]+=O*ft,Q(R,2*M+2*z+1),R[2*M+2*z+2]+=B*ft,Q(R,2*M+2*z+2)}for(M=0;M<C;M++)R[M]=R[2*M+1]<<16|R[2*M];for(M=C;M<2*C;M++)R[M]=0;return new u(R,0)};function Q(j,C){for(;(j[C]&65535)!=j[C];)j[C+1]+=j[C]>>>16,j[C]&=65535,C++}function U(j,C){this.g=j,this.h=C}function ne(j,C){if(A(C))throw Error("division by zero");if(A(j))return new U(b,b);if(k(j))return C=ne(D(j),C),new U(D(C.g),D(C.h));if(k(C))return C=ne(j,D(C)),new U(D(C.g),C.h);if(30<j.g.length){if(k(j)||k(C))throw Error("slowDivide_ only works with positive integers.");for(var R=T,M=C;0>=M.l(j);)R=le(R),M=le(M);var z=pe(R,1),B=pe(M,1);for(M=pe(M,2),R=pe(R,2);!A(M);){var O=B.add(M);0>=O.l(j)&&(z=z.add(R),B=O),M=pe(M,1),R=pe(R,1)}return C=$(j,z.j(C)),new U(z,C)}for(z=b;0<=j.l(C);){for(R=Math.max(1,Math.floor(j.m()/C.m())),M=Math.ceil(Math.log(R)/Math.LN2),M=48>=M?1:Math.pow(2,M-48),B=y(R),O=B.j(C);k(O)||0<O.l(j);)R-=M,B=y(R),O=B.j(C);A(B)&&(B=T),z=z.add(B),j=$(j,O)}return new U(z,j)}n.A=function(j){return ne(this,j).h},n.and=function(j){for(var C=Math.max(this.g.length,j.g.length),R=[],M=0;M<C;M++)R[M]=this.i(M)&j.i(M);return new u(R,this.h&j.h)},n.or=function(j){for(var C=Math.max(this.g.length,j.g.length),R=[],M=0;M<C;M++)R[M]=this.i(M)|j.i(M);return new u(R,this.h|j.h)},n.xor=function(j){for(var C=Math.max(this.g.length,j.g.length),R=[],M=0;M<C;M++)R[M]=this.i(M)^j.i(M);return new u(R,this.h^j.h)};function le(j){for(var C=j.g.length+1,R=[],M=0;M<C;M++)R[M]=j.i(M)<<1|j.i(M-1)>>>31;return new u(R,j.h)}function pe(j,C){var R=C>>5;C%=32;for(var M=j.g.length-R,z=[],B=0;B<M;B++)z[B]=0<C?j.i(B+R)>>>C|j.i(B+R+1)<<32-C:j.i(B+R);return new u(z,j.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,mx=i,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=y,u.fromString=v,gs=u}).apply(typeof Ib<"u"?Ib:typeof self<"u"?self:typeof window<"u"?window:{});var Pd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var px,Ec,gx,$d,Kp,yx,vx,_x;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,_,E){return d==Array.prototype||d==Object.prototype||(d[_]=E.value),d};function t(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof Pd=="object"&&Pd];for(var _=0;_<d.length;++_){var E=d[_];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var i=t(this);function a(d,_){if(_)e:{var E=i;d=d.split(".");for(var S=0;S<d.length-1;S++){var F=d[S];if(!(F in E))break e;E=E[F]}d=d[d.length-1],S=E[d],_=_(S),_!=S&&_!=null&&e(E,d,{configurable:!0,writable:!0,value:_})}}function l(d,_){d instanceof String&&(d+="");var E=0,S=!1,F={next:function(){if(!S&&E<d.length){var W=E++;return{value:_(W,d[W]),done:!1}}return S=!0,{done:!0,value:void 0}}};return F[Symbol.iterator]=function(){return F},F}a("Array.prototype.values",function(d){return d||function(){return l(this,function(_,E){return E})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},f=this||self;function p(d){var _=typeof d;return _=_!="object"?_:d?Array.isArray(d)?"array":_:"null",_=="array"||_=="object"&&typeof d.length=="number"}function y(d){var _=typeof d;return _=="object"&&d!=null||_=="function"}function v(d,_,E){return d.call.apply(d.bind,arguments)}function b(d,_,E){if(!d)throw Error();if(2<arguments.length){var S=Array.prototype.slice.call(arguments,2);return function(){var F=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(F,S),d.apply(_,F)}}return function(){return d.apply(_,arguments)}}function T(d,_,E){return T=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?v:b,T.apply(null,arguments)}function N(d,_){var E=Array.prototype.slice.call(arguments,1);return function(){var S=E.slice();return S.push.apply(S,arguments),d.apply(this,S)}}function A(d,_){function E(){}E.prototype=_.prototype,d.aa=_.prototype,d.prototype=new E,d.prototype.constructor=d,d.Qb=function(S,F,W){for(var de=Array(arguments.length-2),Ge=2;Ge<arguments.length;Ge++)de[Ge-2]=arguments[Ge];return _.prototype[F].apply(S,de)}}function k(d){const _=d.length;if(0<_){const E=Array(_);for(let S=0;S<_;S++)E[S]=d[S];return E}return[]}function D(d,_){for(let E=1;E<arguments.length;E++){const S=arguments[E];if(p(S)){const F=d.length||0,W=S.length||0;d.length=F+W;for(let de=0;de<W;de++)d[F+de]=S[de]}else d.push(S)}}class ${constructor(_,E){this.i=_,this.j=E,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function Q(d){return/^[\s\xa0]*$/.test(d)}function U(){var d=f.navigator;return d&&(d=d.userAgent)?d:""}function ne(d){return ne[" "](d),d}ne[" "]=function(){};var le=U().indexOf("Gecko")!=-1&&!(U().toLowerCase().indexOf("webkit")!=-1&&U().indexOf("Edge")==-1)&&!(U().indexOf("Trident")!=-1||U().indexOf("MSIE")!=-1)&&U().indexOf("Edge")==-1;function pe(d,_,E){for(const S in d)_.call(E,d[S],S,d)}function j(d,_){for(const E in d)_.call(void 0,d[E],E,d)}function C(d){const _={};for(const E in d)_[E]=d[E];return _}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function M(d,_){let E,S;for(let F=1;F<arguments.length;F++){S=arguments[F];for(E in S)d[E]=S[E];for(let W=0;W<R.length;W++)E=R[W],Object.prototype.hasOwnProperty.call(S,E)&&(d[E]=S[E])}}function z(d){var _=1;d=d.split(":");const E=[];for(;0<_&&d.length;)E.push(d.shift()),_--;return d.length&&E.push(d.join(":")),E}function B(d){f.setTimeout(()=>{throw d},0)}function O(){var d=Fe;let _=null;return d.g&&(_=d.g,d.g=d.g.next,d.g||(d.h=null),_.next=null),_}class ft{constructor(){this.h=this.g=null}add(_,E){const S=Pe.get();S.set(_,E),this.h?this.h.next=S:this.g=S,this.h=S}}var Pe=new $(()=>new Z,d=>d.reset());class Z{constructor(){this.next=this.g=this.h=null}set(_,E){this.h=_,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let ue,ye=!1,Fe=new ft,P=()=>{const d=f.Promise.resolve(void 0);ue=()=>{d.then(ae)}};var ae=()=>{for(var d;d=O();){try{d.h.call(d.g)}catch(E){B(E)}var _=Pe;_.j(d),100>_.h&&(_.h++,d.next=_.g,_.g=d)}ye=!1};function he(){this.s=this.s,this.C=this.C}he.prototype.s=!1,he.prototype.ma=function(){this.s||(this.s=!0,this.N())},he.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ce(d,_){this.type=d,this.g=this.target=_,this.defaultPrevented=!1}ce.prototype.h=function(){this.defaultPrevented=!0};var _e=function(){if(!f.addEventListener||!Object.defineProperty)return!1;var d=!1,_=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const E=()=>{};f.addEventListener("test",E,_),f.removeEventListener("test",E,_)}catch{}return d}();function Oe(d,_){if(ce.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var E=this.type=d.type,S=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=_,_=d.relatedTarget){if(le){e:{try{ne(_.nodeName);var F=!0;break e}catch{}F=!1}F||(_=null)}}else E=="mouseover"?_=d.fromElement:E=="mouseout"&&(_=d.toElement);this.relatedTarget=_,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:ee[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&Oe.aa.h.call(this)}}A(Oe,ce);var ee={2:"touch",3:"pen",4:"mouse"};Oe.prototype.h=function(){Oe.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var ve="closure_listenable_"+(1e6*Math.random()|0),oe=0;function it(d,_,E,S,F){this.listener=d,this.proxy=null,this.src=_,this.type=E,this.capture=!!S,this.ha=F,this.key=++oe,this.da=this.fa=!1}function xe(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function Ve(d){this.src=d,this.g={},this.h=0}Ve.prototype.add=function(d,_,E,S,F){var W=d.toString();d=this.g[W],d||(d=this.g[W]=[],this.h++);var de=mt(d,_,S,F);return-1<de?(_=d[de],E||(_.fa=!1)):(_=new it(_,this.src,W,!!S,F),_.fa=E,d.push(_)),_};function He(d,_){var E=_.type;if(E in d.g){var S=d.g[E],F=Array.prototype.indexOf.call(S,_,void 0),W;(W=0<=F)&&Array.prototype.splice.call(S,F,1),W&&(xe(_),d.g[E].length==0&&(delete d.g[E],d.h--))}}function mt(d,_,E,S){for(var F=0;F<d.length;++F){var W=d[F];if(!W.da&&W.listener==_&&W.capture==!!E&&W.ha==S)return F}return-1}var _r="closure_lm_"+(1e6*Math.random()|0),Ds={};function al(d,_,E,S,F){if(Array.isArray(_)){for(var W=0;W<_.length;W++)al(d,_[W],E,S,F);return null}return E=cu(E),d&&d[ve]?d.K(_,E,y(S)?!!S.capture:!1,F):yn(d,_,E,!1,S,F)}function yn(d,_,E,S,F,W){if(!_)throw Error("Invalid event type");var de=y(F)?!!F.capture:!!F,Ge=ja(d);if(Ge||(d[_r]=Ge=new Ve(d)),E=Ge.add(_,E,S,de,W),E.proxy)return E;if(S=ff(),E.proxy=S,S.src=d,S.listener=E,d.addEventListener)_e||(F=de),F===void 0&&(F=!1),d.addEventListener(_.toString(),S,F);else if(d.attachEvent)d.attachEvent(js(_.toString()),S);else if(d.addListener&&d.removeListener)d.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return E}function ff(){function d(E){return _.call(d.src,d.listener,E)}const _=mf;return d}function ol(d,_,E,S,F){if(Array.isArray(_))for(var W=0;W<_.length;W++)ol(d,_[W],E,S,F);else S=y(S)?!!S.capture:!!S,E=cu(E),d&&d[ve]?(d=d.i,_=String(_).toString(),_ in d.g&&(W=d.g[_],E=mt(W,E,S,F),-1<E&&(xe(W[E]),Array.prototype.splice.call(W,E,1),W.length==0&&(delete d.g[_],d.h--)))):d&&(d=ja(d))&&(_=d.g[_.toString()],d=-1,_&&(d=mt(_,E,S,F)),(E=-1<d?_[d]:null)&&Da(E))}function Da(d){if(typeof d!="number"&&d&&!d.da){var _=d.src;if(_&&_[ve])He(_.i,d);else{var E=d.type,S=d.proxy;_.removeEventListener?_.removeEventListener(E,S,d.capture):_.detachEvent?_.detachEvent(js(E),S):_.addListener&&_.removeListener&&_.removeListener(S),(E=ja(_))?(He(E,d),E.h==0&&(E.src=null,_[_r]=null)):xe(d)}}}function js(d){return d in Ds?Ds[d]:Ds[d]="on"+d}function mf(d,_){if(d.da)d=!0;else{_=new Oe(_,this);var E=d.listener,S=d.ha||d.src;d.fa&&Da(d),d=E.call(S,_)}return d}function ja(d){return d=d[_r],d instanceof Ve?d:null}var ll="__closure_events_fn_"+(1e9*Math.random()>>>0);function cu(d){return typeof d=="function"?d:(d[ll]||(d[ll]=function(_){return d.handleEvent(_)}),d[ll])}function Tt(){he.call(this),this.i=new Ve(this),this.M=this,this.F=null}A(Tt,he),Tt.prototype[ve]=!0,Tt.prototype.removeEventListener=function(d,_,E,S){ol(this,d,_,E,S)};function et(d,_){var E,S=d.F;if(S)for(E=[];S;S=S.F)E.push(S);if(d=d.M,S=_.type||_,typeof _=="string")_=new ce(_,d);else if(_ instanceof ce)_.target=_.target||d;else{var F=_;_=new ce(S,d),M(_,F)}if(F=!0,E)for(var W=E.length-1;0<=W;W--){var de=_.g=E[W];F=Pn(de,S,!0,_)&&F}if(de=_.g=d,F=Pn(de,S,!0,_)&&F,F=Pn(de,S,!1,_)&&F,E)for(W=0;W<E.length;W++)de=_.g=E[W],F=Pn(de,S,!1,_)&&F}Tt.prototype.N=function(){if(Tt.aa.N.call(this),this.i){var d=this.i,_;for(_ in d.g){for(var E=d.g[_],S=0;S<E.length;S++)xe(E[S]);delete d.g[_],d.h--}}this.F=null},Tt.prototype.K=function(d,_,E,S){return this.i.add(String(d),_,!1,E,S)},Tt.prototype.L=function(d,_,E,S){return this.i.add(String(d),_,!0,E,S)};function Pn(d,_,E,S){if(_=d.i.g[String(_)],!_)return!0;_=_.concat();for(var F=!0,W=0;W<_.length;++W){var de=_[W];if(de&&!de.da&&de.capture==E){var Ge=de.listener,Vt=de.ha||de.src;de.fa&&He(d.i,de),F=Ge.call(Vt,S)!==!1&&F}}return F&&!S.defaultPrevented}function cn(d,_,E){if(typeof d=="function")E&&(d=T(d,E));else if(d&&typeof d.handleEvent=="function")d=T(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(_)?-1:f.setTimeout(d,_||0)}function uu(d){d.g=cn(()=>{d.g=null,d.i&&(d.i=!1,uu(d))},d.l);const _=d.h;d.h=null,d.m.apply(null,_)}class pf extends he{constructor(_,E){super(),this.m=_,this.l=E,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:uu(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ps(d){he.call(this),this.h=d,this.g={}}A(Ps,he);var Ms=[];function ks(d){pe(d.g,function(_,E){this.g.hasOwnProperty(E)&&Da(_)},d),d.g={}}Ps.prototype.N=function(){Ps.aa.N.call(this),ks(this)},Ps.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ar=f.JSON.stringify,Pa=f.JSON.parse,Vs=class{stringify(d){return f.JSON.stringify(d,void 0)}parse(d){return f.JSON.parse(d,void 0)}};function cl(){}cl.prototype.h=null;function ul(d){return d.h||(d.h=d.i())}function dl(){}var Yr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Kr(){ce.call(this,"d")}A(Kr,ce);function hl(){ce.call(this,"c")}A(hl,ce);var br={},fl=null;function Di(){return fl=fl||new Tt}br.La="serverreachability";function Ma(d){ce.call(this,br.La,d)}A(Ma,ce);function ji(d){const _=Di();et(_,new Ma(_))}br.STAT_EVENT="statevent";function du(d,_){ce.call(this,br.STAT_EVENT,d),this.stat=_}A(du,ce);function pt(d){const _=Di();et(_,new du(_,d))}br.Ma="timingevent";function kt(d,_){ce.call(this,br.Ma,d),this.size=_}A(kt,ce);function It(d,_){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){d()},_)}function Hn(){this.g=!0}Hn.prototype.xa=function(){this.g=!1};function ml(d,_,E,S,F,W){d.info(function(){if(d.g)if(W)for(var de="",Ge=W.split("&"),Vt=0;Vt<Ge.length;Vt++){var $e=Ge[Vt].split("=");if(1<$e.length){var Gt=$e[0];$e=$e[1];var Lt=Gt.split("_");de=2<=Lt.length&&Lt[1]=="type"?de+(Gt+"="+$e+"&"):de+(Gt+"=redacted&")}}else de=null;else de=W;return"XMLHTTP REQ ("+S+") [attempt "+F+"]: "+_+`
`+E+`
`+de})}function gf(d,_,E,S,F,W,de){d.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+F+"]: "+_+`
`+E+`
`+W+" "+de})}function Pi(d,_,E,S){d.info(function(){return"XMLHTTP TEXT ("+_+"): "+Ls(d,E)+(S?" "+S:"")})}function hu(d,_){d.info(function(){return"TIMEOUT: "+_})}Hn.prototype.info=function(){};function Ls(d,_){if(!d.g)return _;if(!_)return null;try{var E=JSON.parse(_);if(E){for(d=0;d<E.length;d++)if(Array.isArray(E[d])){var S=E[d];if(!(2>S.length)){var F=S[1];if(Array.isArray(F)&&!(1>F.length)){var W=F[0];if(W!="noop"&&W!="stop"&&W!="close")for(var de=1;de<F.length;de++)F[de]=""}}}}return ar(E)}catch{return _}}var Mi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Qr={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Er;function xr(){}A(xr,cl),xr.prototype.g=function(){return new XMLHttpRequest},xr.prototype.i=function(){return{}},Er=new xr;function vn(d,_,E,S){this.j=d,this.i=_,this.l=E,this.R=S||1,this.U=new Ps(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new St}function St(){this.i=null,this.g="",this.h=!1}var pl={},ka={};function or(d,_,E){d.L=1,d.v=Fs(Mn(_)),d.m=E,d.P=!0,Wr(d,null)}function Wr(d,_){d.F=Date.now(),Us(d),d.A=Mn(d.v);var E=d.A,S=d.R;Array.isArray(S)||(S=[String(S)]),El(E.i,"t",S),d.C=0,E=d.j.J,d.h=new St,d.g=Cu(d.j,E?_:null,!d.m),0<d.O&&(d.M=new pf(T(d.Y,d,d.g),d.O)),_=d.U,E=d.g,S=d.ca;var F="readystatechange";Array.isArray(F)||(F&&(Ms[0]=F.toString()),F=Ms);for(var W=0;W<F.length;W++){var de=al(E,F[W],S||_.handleEvent,!1,_.h||_);if(!de)break;_.g[de.key]=de}_=d.H?C(d.H):{},d.m?(d.u||(d.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,_)):(d.u="GET",d.g.ea(d.A,d.u,null,_)),ji(),ml(d.i,d.u,d.A,d.l,d.R,d.m)}vn.prototype.ca=function(d){d=d.target;const _=this.M;_&&Kn(d)==3?_.j():this.Y(d)},vn.prototype.Y=function(d){try{if(d==this.g)e:{const Lt=Kn(this.g);var _=this.g.Ba();const ii=this.g.Z();if(!(3>Lt)&&(Lt!=3||this.g&&(this.h.h||this.g.oa()||bu(this.g)))){this.J||Lt!=4||_==7||(_==8||0>=ii?ji(3):ji(2)),ki(this);var E=this.g.Z();this.X=E;t:if(fu(this)){var S=bu(this.g);d="";var F=S.length,W=Kn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Jt(this),Tr(this);var de="";break t}this.h.i=new f.TextDecoder}for(_=0;_<F;_++)this.h.h=!0,d+=this.h.i.decode(S[_],{stream:!(W&&_==F-1)});S.length=0,this.h.g+=d,this.C=0,de=this.h.g}else de=this.g.oa();if(this.o=E==200,gf(this.i,this.u,this.A,this.l,this.R,Lt,E),this.o){if(this.T&&!this.K){t:{if(this.g){var Ge,Vt=this.g;if((Ge=Vt.g?Vt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Q(Ge)){var $e=Ge;break t}}$e=null}if(E=$e)Pi(this.i,this.l,E,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,zs(this,E);else{this.o=!1,this.s=3,pt(12),Jt(this),Tr(this);break e}}if(this.P){E=!0;let en;for(;!this.J&&this.C<de.length;)if(en=mu(this,de),en==ka){Lt==4&&(this.s=4,pt(14),E=!1),Pi(this.i,this.l,null,"[Incomplete Response]");break}else if(en==pl){this.s=4,pt(15),Pi(this.i,this.l,de,"[Invalid Chunk]"),E=!1;break}else Pi(this.i,this.l,en,null),zs(this,en);if(fu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Lt!=4||de.length!=0||this.h.h||(this.s=1,pt(16),E=!1),this.o=this.o&&E,!E)Pi(this.i,this.l,de,"[Invalid Chunked Response]"),Jt(this),Tr(this);else if(0<de.length&&!this.W){this.W=!0;var Gt=this.j;Gt.g==this&&Gt.ba&&!Gt.M&&(Gt.j.info("Great, no buffering proxy detected. Bytes received: "+de.length),Xs(Gt),Gt.M=!0,pt(11))}}else Pi(this.i,this.l,de,null),zs(this,de);Lt==4&&Jt(this),this.o&&!this.J&&(Lt==4?Au(this.j,this):(this.o=!1,Us(this)))}else Ef(this.g),E==400&&0<de.indexOf("Unknown SID")?(this.s=3,pt(12)):(this.s=0,pt(13)),Jt(this),Tr(this)}}}catch{}finally{}};function fu(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function mu(d,_){var E=d.C,S=_.indexOf(`
`,E);return S==-1?ka:(E=Number(_.substring(E,S)),isNaN(E)?pl:(S+=1,S+E>_.length?ka:(_=_.slice(S,S+E),d.C=S+E,_)))}vn.prototype.cancel=function(){this.J=!0,Jt(this)};function Us(d){d.S=Date.now()+d.I,pu(d,d.I)}function pu(d,_){if(d.B!=null)throw Error("WatchDog timer not null");d.B=It(T(d.ba,d),_)}function ki(d){d.B&&(f.clearTimeout(d.B),d.B=null)}vn.prototype.ba=function(){this.B=null;const d=Date.now();0<=d-this.S?(hu(this.i,this.A),this.L!=2&&(ji(),pt(17)),Jt(this),this.s=2,Tr(this)):pu(this,this.S-d)};function Tr(d){d.j.G==0||d.J||Au(d.j,d)}function Jt(d){ki(d);var _=d.M;_&&typeof _.ma=="function"&&_.ma(),d.M=null,ks(d.U),d.g&&(_=d.g,d.g=null,_.abort(),_.ma())}function zs(d,_){try{var E=d.j;if(E.G!=0&&(E.g==d||gl(E.h,d))){if(!d.K&&gl(E.h,d)&&E.G==3){try{var S=E.Da.g.parse(_)}catch{S=null}if(Array.isArray(S)&&S.length==3){var F=S;if(F[0]==0){e:if(!E.u){if(E.g)if(E.g.F+3e3<d.F)Ka(E),$a(E);else break e;Sl(E),pt(18)}}else E.za=F[1],0<E.za-E.T&&37500>F[2]&&E.F&&E.v==0&&!E.C&&(E.C=It(T(E.Za,E),6e3));if(1>=La(E.h)&&E.ca){try{E.ca()}catch{}E.ca=void 0}}else ri(E,11)}else if((d.K||E.g==d)&&Ka(E),!Q(_))for(F=E.Da.g.parse(_),_=0;_<F.length;_++){let $e=F[_];if(E.T=$e[0],$e=$e[1],E.G==2)if($e[0]=="c"){E.K=$e[1],E.ia=$e[2];const Gt=$e[3];Gt!=null&&(E.la=Gt,E.j.info("VER="+E.la));const Lt=$e[4];Lt!=null&&(E.Aa=Lt,E.j.info("SVER="+E.Aa));const ii=$e[5];ii!=null&&typeof ii=="number"&&0<ii&&(S=1.5*ii,E.L=S,E.j.info("backChannelRequestTimeoutMs_="+S)),S=E;const en=d.g;if(en){const Ir=en.g?en.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ir){var W=S.h;W.g||Ir.indexOf("spdy")==-1&&Ir.indexOf("quic")==-1&&Ir.indexOf("h2")==-1||(W.j=W.l,W.g=new Set,W.h&&(Ua(W,W.h),W.h=null))}if(S.D){const Cl=en.g?en.g.getResponseHeader("X-HTTP-Session-Id"):null;Cl&&(S.ya=Cl,st(S.I,S.D,Cl))}}E.G=3,E.l&&E.l.ua(),E.ba&&(E.R=Date.now()-d.F,E.j.info("Handshake RTT: "+E.R+"ms")),S=E;var de=d;if(S.qa=Nu(S,S.J?S.ia:null,S.W),de.K){_n(S.h,de);var Ge=de,Vt=S.L;Vt&&(Ge.I=Vt),Ge.B&&(ki(Ge),Us(Ge)),S.g=de}else Tu(S);0<E.i.length&&Ya(E)}else $e[0]!="stop"&&$e[0]!="close"||ri(E,7);else E.G==3&&($e[0]=="stop"||$e[0]=="close"?$e[0]=="stop"?ri(E,7):wl(E):$e[0]!="noop"&&E.l&&E.l.ta($e),E.v=0)}}ji(4)}catch{}}var gu=class{constructor(d,_){this.g=d,this.map=_}};function Xr(d){this.l=d||10,f.PerformanceNavigationTiming?(d=f.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Va(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function La(d){return d.h?1:d.g?d.g.size:0}function gl(d,_){return d.h?d.h==_:d.g?d.g.has(_):!1}function Ua(d,_){d.g?d.g.add(_):d.h=_}function _n(d,_){d.h&&d.h==_?d.h=null:d.g&&d.g.has(_)&&d.g.delete(_)}Xr.prototype.cancel=function(){if(this.i=yl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function yl(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let _=d.i;for(const E of d.g.values())_=_.concat(E.D);return _}return k(d.i)}function yf(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(p(d)){for(var _=[],E=d.length,S=0;S<E;S++)_.push(d[S]);return _}_=[],E=0;for(S in d)_[E++]=d[S];return _}function za(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(p(d)||typeof d=="string"){var _=[];d=d.length;for(var E=0;E<d;E++)_.push(E);return _}_=[],E=0;for(const S in d)_[E++]=S;return _}}}function vl(d,_){if(d.forEach&&typeof d.forEach=="function")d.forEach(_,void 0);else if(p(d)||typeof d=="string")Array.prototype.forEach.call(d,_,void 0);else for(var E=za(d),S=yf(d),F=S.length,W=0;W<F;W++)_.call(void 0,S[W],E&&E[W],d)}var Bs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function vf(d,_){if(d){d=d.split("&");for(var E=0;E<d.length;E++){var S=d[E].indexOf("="),F=null;if(0<=S){var W=d[E].substring(0,S);F=d[E].substring(S+1)}else W=d[E];_(W,F?decodeURIComponent(F.replace(/\+/g," ")):"")}}}function Ot(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof Ot){this.h=d.h,qs(this,d.j),this.o=d.o,this.g=d.g,Vi(this,d.s),this.l=d.l;var _=d.i,E=new Jr;E.i=_.i,_.g&&(E.g=new Map(_.g),E.h=_.h),Zr(this,E),this.m=d.m}else d&&(_=String(d).match(Bs))?(this.h=!1,qs(this,_[1]||"",!0),this.o=Gn(_[2]||""),this.g=Gn(_[3]||"",!0),Vi(this,_[4]),this.l=Gn(_[5]||"",!0),Zr(this,_[6]||"",!0),this.m=Gn(_[7]||"")):(this.h=!1,this.i=new Jr(null,this.h))}Ot.prototype.toString=function(){var d=[],_=this.j;_&&d.push(Hs(_,_l,!0),":");var E=this.g;return(E||_=="file")&&(d.push("//"),(_=this.o)&&d.push(Hs(_,_l,!0),"@"),d.push(encodeURIComponent(String(E)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.s,E!=null&&d.push(":",String(E))),(E=this.l)&&(this.g&&E.charAt(0)!="/"&&d.push("/"),d.push(Hs(E,E.charAt(0)=="/"?_f:bl,!0))),(E=this.i.toString())&&d.push("?",E),(E=this.m)&&d.push("#",Hs(E,Ba)),d.join("")};function Mn(d){return new Ot(d)}function qs(d,_,E){d.j=E?Gn(_,!0):_,d.j&&(d.j=d.j.replace(/:$/,""))}function Vi(d,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);d.s=_}else d.s=null}function Zr(d,_,E){_ instanceof Jr?(d.i=_,vu(d.i,d.h)):(E||(_=Hs(_,bf)),d.i=new Jr(_,d.h))}function st(d,_,E){d.i.set(_,E)}function Fs(d){return st(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function Gn(d,_){return d?_?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Hs(d,_,E){return typeof d=="string"?(d=encodeURI(d).replace(_,yu),E&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function yu(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var _l=/[#\/\?@]/g,bl=/[#\?:]/g,_f=/[#\?]/g,bf=/[#\?@]/g,Ba=/#/g;function Jr(d,_){this.h=this.g=null,this.i=d||null,this.j=!!_}function $n(d){d.g||(d.g=new Map,d.h=0,d.i&&vf(d.i,function(_,E){d.add(decodeURIComponent(_.replace(/\+/g," ")),E)}))}n=Jr.prototype,n.add=function(d,_){$n(this),this.i=null,d=wr(this,d);var E=this.g.get(d);return E||this.g.set(d,E=[]),E.push(_),this.h+=1,this};function ei(d,_){$n(d),_=wr(d,_),d.g.has(_)&&(d.i=null,d.h-=d.g.get(_).length,d.g.delete(_))}function ti(d,_){return $n(d),_=wr(d,_),d.g.has(_)}n.forEach=function(d,_){$n(this),this.g.forEach(function(E,S){E.forEach(function(F){d.call(_,F,S,this)},this)},this)},n.na=function(){$n(this);const d=Array.from(this.g.values()),_=Array.from(this.g.keys()),E=[];for(let S=0;S<_.length;S++){const F=d[S];for(let W=0;W<F.length;W++)E.push(_[S])}return E},n.V=function(d){$n(this);let _=[];if(typeof d=="string")ti(this,d)&&(_=_.concat(this.g.get(wr(this,d))));else{d=Array.from(this.g.values());for(let E=0;E<d.length;E++)_=_.concat(d[E])}return _},n.set=function(d,_){return $n(this),this.i=null,d=wr(this,d),ti(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[_]),this.h+=1,this},n.get=function(d,_){return d?(d=this.V(d),0<d.length?String(d[0]):_):_};function El(d,_,E){ei(d,_),0<E.length&&(d.i=null,d.g.set(wr(d,_),k(E)),d.h+=E.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],_=Array.from(this.g.keys());for(var E=0;E<_.length;E++){var S=_[E];const W=encodeURIComponent(String(S)),de=this.V(S);for(S=0;S<de.length;S++){var F=W;de[S]!==""&&(F+="="+encodeURIComponent(String(de[S]))),d.push(F)}}return this.i=d.join("&")};function wr(d,_){return _=String(_),d.j&&(_=_.toLowerCase()),_}function vu(d,_){_&&!d.j&&($n(d),d.i=null,d.g.forEach(function(E,S){var F=S.toLowerCase();S!=F&&(ei(this,S),El(this,F,E))},d)),d.j=_}function Gs(d,_){const E=new Hn;if(f.Image){const S=new Image;S.onload=N(Yn,E,"TestLoadImage: loaded",!0,_,S),S.onerror=N(Yn,E,"TestLoadImage: error",!1,_,S),S.onabort=N(Yn,E,"TestLoadImage: abort",!1,_,S),S.ontimeout=N(Yn,E,"TestLoadImage: timeout",!1,_,S),f.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=d}else _(!1)}function lr(d,_){const E=new Hn,S=new AbortController,F=setTimeout(()=>{S.abort(),Yn(E,"TestPingServer: timeout",!1,_)},1e4);fetch(d,{signal:S.signal}).then(W=>{clearTimeout(F),W.ok?Yn(E,"TestPingServer: ok",!0,_):Yn(E,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(F),Yn(E,"TestPingServer: error",!1,_)})}function Yn(d,_,E,S,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),S(E)}catch{}}function $s(){this.g=new Vs}function Ar(d,_,E){const S=E||"";try{vl(d,function(F,W){let de=F;y(F)&&(de=ar(F)),_.push(S+W+"="+encodeURIComponent(de))})}catch(F){throw _.push(S+"type="+encodeURIComponent("_badmap")),F}}function Li(d){this.l=d.Ub||null,this.j=d.eb||!1}A(Li,cl),Li.prototype.g=function(){return new ni(this.l,this.j)},Li.prototype.i=function(d){return function(){return d}}({});function ni(d,_){Tt.call(this),this.D=d,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}A(ni,Tt),n=ni.prototype,n.open=function(d,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=_,this.readyState=1,Nr(this)},n.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(_.body=d),(this.D||f).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Sr(this)),this.readyState=0},n.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,Nr(this)),this.g&&(this.readyState=3,Nr(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;xl(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function xl(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}n.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var _=d.value?d.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!d.done}))&&(this.response=this.responseText+=_)}d.done?Sr(this):Nr(this),this.readyState==3&&xl(this)}},n.Ra=function(d){this.g&&(this.response=this.responseText=d,Sr(this))},n.Qa=function(d){this.g&&(this.response=d,Sr(this))},n.ga=function(){this.g&&Sr(this)};function Sr(d){d.readyState=4,d.l=null,d.j=null,d.v=null,Nr(d)}n.setRequestHeader=function(d,_){this.u.append(d,_)},n.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],_=this.h.entries();for(var E=_.next();!E.done;)E=E.value,d.push(E[0]+": "+E[1]),E=_.next();return d.join(`\r
`)};function Nr(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(ni.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function Tl(d){let _="";return pe(d,function(E,S){_+=S,_+=":",_+=E,_+=`\r
`}),_}function Ht(d,_,E){e:{for(S in E){var S=!1;break e}S=!0}S||(E=Tl(E),typeof d=="string"?E!=null&&encodeURIComponent(String(E)):st(d,_,E))}function Ze(d){Tt.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}A(Ze,Tt);var qa=/^https?$/i,Ys=["POST","PUT"];n=Ze.prototype,n.Ha=function(d){this.J=d},n.ea=function(d,_,E,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);_=_?_.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Er.g(),this.v=this.o?ul(this.o):ul(Er),this.g.onreadystatechange=T(this.Ea,this);try{this.B=!0,this.g.open(_,String(d),!0),this.B=!1}catch(W){_u(this,W);return}if(d=E||"",E=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var F in S)E.set(F,S[F]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const W of S.keys())E.set(W,S.get(W));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(E.keys()).find(W=>W.toLowerCase()=="content-type"),F=f.FormData&&d instanceof f.FormData,!(0<=Array.prototype.indexOf.call(Ys,_,void 0))||S||F||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[W,de]of E)this.g.setRequestHeader(W,de);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ks(this),this.u=!0,this.g.send(d),this.u=!1}catch(W){_u(this,W)}};function _u(d,_){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=_,d.m=5,Fa(d),Cr(d)}function Fa(d){d.A||(d.A=!0,et(d,"complete"),et(d,"error"))}n.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,et(this,"complete"),et(this,"abort"),Cr(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Cr(this,!0)),Ze.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Ha(this):this.bb())},n.bb=function(){Ha(this)};function Ha(d){if(d.h&&typeof u<"u"&&(!d.v[1]||Kn(d)!=4||d.Z()!=2)){if(d.u&&Kn(d)==4)cn(d.Ea,0,d);else if(et(d,"readystatechange"),Kn(d)==4){d.h=!1;try{const de=d.Z();e:switch(de){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var E;if(!(E=_)){var S;if(S=de===0){var F=String(d.D).match(Bs)[1]||null;!F&&f.self&&f.self.location&&(F=f.self.location.protocol.slice(0,-1)),S=!qa.test(F?F.toLowerCase():"")}E=S}if(E)et(d,"complete"),et(d,"success");else{d.m=6;try{var W=2<Kn(d)?d.g.statusText:""}catch{W=""}d.l=W+" ["+d.Z()+"]",Fa(d)}}finally{Cr(d)}}}}function Cr(d,_){if(d.g){Ks(d);const E=d.g,S=d.v[0]?()=>{}:null;d.g=null,d.v=null,_||et(d,"ready");try{E.onreadystatechange=S}catch{}}}function Ks(d){d.I&&(f.clearTimeout(d.I),d.I=null)}n.isActive=function(){return!!this.g};function Kn(d){return d.g?d.g.readyState:0}n.Z=function(){try{return 2<Kn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(d){if(this.g){var _=this.g.responseText;return d&&_.indexOf(d)==0&&(_=_.substring(d.length)),Pa(_)}};function bu(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function Ef(d){const _={};d=(d.g&&2<=Kn(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<d.length;S++){if(Q(d[S]))continue;var E=z(d[S]);const F=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const W=_[F]||[];_[F]=W,W.push(E)}j(_,function(S){return S.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Qs(d,_,E){return E&&E.internalChannelParams&&E.internalChannelParams[d]||_}function Ga(d){this.Aa=0,this.i=[],this.j=new Hn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Qs("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Qs("baseRetryDelayMs",5e3,d),this.cb=Qs("retryDelaySeedMs",1e4,d),this.Wa=Qs("forwardChannelMaxRetries",2,d),this.wa=Qs("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new Xr(d&&d.concurrentRequestLimit),this.Da=new $s,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Ga.prototype,n.la=8,n.G=1,n.connect=function(d,_,E,S){pt(0),this.W=d,this.H=_||{},E&&S!==void 0&&(this.H.OSID=E,this.H.OAID=S),this.F=this.X,this.I=Nu(this,null,this.W),Ya(this)};function wl(d){if(Eu(d),d.G==3){var _=d.U++,E=Mn(d.I);if(st(E,"SID",d.K),st(E,"RID",_),st(E,"TYPE","terminate"),Ws(d,E),_=new vn(d,d.j,_),_.L=2,_.v=Fs(Mn(E)),E=!1,f.navigator&&f.navigator.sendBeacon)try{E=f.navigator.sendBeacon(_.v.toString(),"")}catch{}!E&&f.Image&&(new Image().src=_.v,E=!0),E||(_.g=Cu(_.j,null),_.g.ea(_.v)),_.F=Date.now(),Us(_)}Su(d)}function $a(d){d.g&&(Xs(d),d.g.cancel(),d.g=null)}function Eu(d){$a(d),d.u&&(f.clearTimeout(d.u),d.u=null),Ka(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&f.clearTimeout(d.s),d.s=null)}function Ya(d){if(!Va(d.h)&&!d.s){d.s=!0;var _=d.Ga;ue||P(),ye||(ue(),ye=!0),Fe.add(_,d),d.B=0}}function xf(d,_){return La(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=_.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=It(T(d.Ga,d,_),Nl(d,d.B)),d.B++,!0)}n.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;const F=new vn(this,this.j,d);let W=this.o;if(this.S&&(W?(W=C(W),M(W,this.S)):W=this.S),this.m!==null||this.O||(F.H=W,W=null),this.P)e:{for(var _=0,E=0;E<this.i.length;E++){t:{var S=this.i[E];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(_+=S,4096<_){_=E;break e}if(_===4096||E===this.i.length-1){_=E+1;break e}}_=1e3}else _=1e3;_=xu(this,F,_),E=Mn(this.I),st(E,"RID",d),st(E,"CVER",22),this.D&&st(E,"X-HTTP-Session-Id",this.D),Ws(this,E),W&&(this.O?_="headers="+encodeURIComponent(String(Tl(W)))+"&"+_:this.m&&Ht(E,this.m,W)),Ua(this.h,F),this.Ua&&st(E,"TYPE","init"),this.P?(st(E,"$req",_),st(E,"SID","null"),F.T=!0,or(F,E,null)):or(F,E,_),this.G=2}}else this.G==3&&(d?Al(this,d):this.i.length==0||Va(this.h)||Al(this))};function Al(d,_){var E;_?E=_.l:E=d.U++;const S=Mn(d.I);st(S,"SID",d.K),st(S,"RID",E),st(S,"AID",d.T),Ws(d,S),d.m&&d.o&&Ht(S,d.m,d.o),E=new vn(d,d.j,E,d.B+1),d.m===null&&(E.H=d.o),_&&(d.i=_.D.concat(d.i)),_=xu(d,E,1e3),E.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),Ua(d.h,E),or(E,S,_)}function Ws(d,_){d.H&&pe(d.H,function(E,S){st(_,S,E)}),d.l&&vl({},function(E,S){st(_,S,E)})}function xu(d,_,E){E=Math.min(d.i.length,E);var S=d.l?T(d.l.Na,d.l,d):null;e:{var F=d.i;let W=-1;for(;;){const de=["count="+E];W==-1?0<E?(W=F[0].g,de.push("ofs="+W)):W=0:de.push("ofs="+W);let Ge=!0;for(let Vt=0;Vt<E;Vt++){let $e=F[Vt].g;const Gt=F[Vt].map;if($e-=W,0>$e)W=Math.max(0,F[Vt].g-100),Ge=!1;else try{Ar(Gt,de,"req"+$e+"_")}catch{S&&S(Gt)}}if(Ge){S=de.join("&");break e}}}return d=d.i.splice(0,E),_.D=d,S}function Tu(d){if(!d.g&&!d.u){d.Y=1;var _=d.Fa;ue||P(),ye||(ue(),ye=!0),Fe.add(_,d),d.v=0}}function Sl(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=It(T(d.Fa,d),Nl(d,d.v)),d.v++,!0)}n.Fa=function(){if(this.u=null,wu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=It(T(this.ab,this),d)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,pt(10),$a(this),wu(this))};function Xs(d){d.A!=null&&(f.clearTimeout(d.A),d.A=null)}function wu(d){d.g=new vn(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var _=Mn(d.qa);st(_,"RID","rpc"),st(_,"SID",d.K),st(_,"AID",d.T),st(_,"CI",d.F?"0":"1"),!d.F&&d.ja&&st(_,"TO",d.ja),st(_,"TYPE","xmlhttp"),Ws(d,_),d.m&&d.o&&Ht(_,d.m,d.o),d.L&&(d.g.I=d.L);var E=d.g;d=d.ia,E.L=1,E.v=Fs(Mn(_)),E.m=null,E.P=!0,Wr(E,d)}n.Za=function(){this.C!=null&&(this.C=null,$a(this),Sl(this),pt(19))};function Ka(d){d.C!=null&&(f.clearTimeout(d.C),d.C=null)}function Au(d,_){var E=null;if(d.g==_){Ka(d),Xs(d),d.g=null;var S=2}else if(gl(d.h,_))E=_.D,_n(d.h,_),S=1;else return;if(d.G!=0){if(_.o)if(S==1){E=_.m?_.m.length:0,_=Date.now()-_.F;var F=d.B;S=Di(),et(S,new kt(S,E)),Ya(d)}else Tu(d);else if(F=_.s,F==3||F==0&&0<_.X||!(S==1&&xf(d,_)||S==2&&Sl(d)))switch(E&&0<E.length&&(_=d.h,_.i=_.i.concat(E)),F){case 1:ri(d,5);break;case 4:ri(d,10);break;case 3:ri(d,6);break;default:ri(d,2)}}}function Nl(d,_){let E=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(E*=2),E*_}function ri(d,_){if(d.j.info("Error code "+_),_==2){var E=T(d.fb,d),S=d.Xa;const F=!S;S=new Ot(S||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||qs(S,"https"),Fs(S),F?Gs(S.toString(),E):lr(S.toString(),E)}else pt(2);d.G=0,d.l&&d.l.sa(_),Su(d),Eu(d)}n.fb=function(d){d?(this.j.info("Successfully pinged google.com"),pt(2)):(this.j.info("Failed to ping google.com"),pt(1))};function Su(d){if(d.G=0,d.ka=[],d.l){const _=yl(d.h);(_.length!=0||d.i.length!=0)&&(D(d.ka,_),D(d.ka,d.i),d.h.i.length=0,k(d.i),d.i.length=0),d.l.ra()}}function Nu(d,_,E){var S=E instanceof Ot?Mn(E):new Ot(E);if(S.g!="")_&&(S.g=_+"."+S.g),Vi(S,S.s);else{var F=f.location;S=F.protocol,_=_?_+"."+F.hostname:F.hostname,F=+F.port;var W=new Ot(null);S&&qs(W,S),_&&(W.g=_),F&&Vi(W,F),E&&(W.l=E),S=W}return E=d.D,_=d.ya,E&&_&&st(S,E,_),st(S,"VER",d.la),Ws(d,S),S}function Cu(d,_,E){if(_&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return _=d.Ca&&!d.pa?new Ze(new Li({eb:E})):new Ze(d.pa),_.Ha(d.J),_}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ru(){}n=Ru.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Qa(){}Qa.prototype.g=function(d,_){return new bn(d,_)};function bn(d,_){Tt.call(this),this.g=new Ga(_),this.l=d,this.h=_&&_.messageUrlParams||null,d=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(d?d["X-WebChannel-Content-Type"]=_.messageContentType:d={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(d?d["X-WebChannel-Client-Profile"]=_.va:d={"X-WebChannel-Client-Profile":_.va}),this.g.S=d,(d=_&&_.Sb)&&!Q(d)&&(this.g.m=d),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!Q(_)&&(this.g.D=_,d=this.h,d!==null&&_ in d&&(d=this.h,_ in d&&delete d[_])),this.j=new Rr(this)}A(bn,Tt),bn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},bn.prototype.close=function(){wl(this.g)},bn.prototype.o=function(d){var _=this.g;if(typeof d=="string"){var E={};E.__data__=d,d=E}else this.u&&(E={},E.__data__=ar(d),d=E);_.i.push(new gu(_.Ya++,d)),_.G==3&&Ya(_)},bn.prototype.N=function(){this.g.l=null,delete this.j,wl(this.g),delete this.g,bn.aa.N.call(this)};function Iu(d){Kr.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var _=d.__sm__;if(_){e:{for(const E in _){d=E;break e}d=void 0}(this.i=d)&&(d=this.i,_=_!==null&&d in _?_[d]:void 0),this.data=_}else this.data=d}A(Iu,Kr);function Ou(){hl.call(this),this.status=1}A(Ou,hl);function Rr(d){this.g=d}A(Rr,Ru),Rr.prototype.ua=function(){et(this.g,"a")},Rr.prototype.ta=function(d){et(this.g,new Iu(d))},Rr.prototype.sa=function(d){et(this.g,new Ou)},Rr.prototype.ra=function(){et(this.g,"b")},Qa.prototype.createWebChannel=Qa.prototype.g,bn.prototype.send=bn.prototype.o,bn.prototype.open=bn.prototype.m,bn.prototype.close=bn.prototype.close,_x=function(){return new Qa},vx=function(){return Di()},yx=br,Kp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Mi.NO_ERROR=0,Mi.TIMEOUT=8,Mi.HTTP_ERROR=6,$d=Mi,Qr.COMPLETE="complete",gx=Qr,dl.EventType=Yr,Yr.OPEN="a",Yr.CLOSE="b",Yr.ERROR="c",Yr.MESSAGE="d",Tt.prototype.listen=Tt.prototype.K,Ec=dl,Ze.prototype.listenOnce=Ze.prototype.L,Ze.prototype.getLastError=Ze.prototype.Ka,Ze.prototype.getLastErrorCode=Ze.prototype.Ba,Ze.prototype.getStatus=Ze.prototype.Z,Ze.prototype.getResponseJson=Ze.prototype.Oa,Ze.prototype.getResponseText=Ze.prototype.oa,Ze.prototype.send=Ze.prototype.ea,Ze.prototype.setWithCredentials=Ze.prototype.Ha,px=Ze}).apply(typeof Pd<"u"?Pd:typeof self<"u"?self:typeof window<"u"?window:{});const Ob="@firebase/firestore",Db="4.7.14";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}fn.UNAUTHENTICATED=new fn(null),fn.GOOGLE_CREDENTIALS=new fn("google-credentials-uid"),fn.FIRST_PARTY=new fn("first-party-uid"),fn.MOCK_USER=new fn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jo="11.7.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wa=new Sg("@firebase/firestore");function No(){return wa.logLevel}function me(n,...e){if(wa.logLevel<=Be.DEBUG){const t=e.map(Lg);wa.debug(`Firestore (${Jo}): ${n}`,...t)}}function Si(n,...e){if(wa.logLevel<=Be.ERROR){const t=e.map(Lg);wa.error(`Firestore (${Jo}): ${n}`,...t)}}function zo(n,...e){if(wa.logLevel<=Be.WARN){const t=e.map(Lg);wa.warn(`Firestore (${Jo}): ${n}`,...t)}}function Lg(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Se(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,bx(n,i,t)}function bx(n,e,t){let i=`FIRESTORE (${Jo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw Si(i),new Error(i)}function Je(n,e,t,i){let a="Unexpected state";typeof t=="string"?a=t:i=t,n||bx(e,a,i)}function Ie(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class fe extends Ri{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ex{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class QI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(fn.UNAUTHENTICATED))}shutdown(){}}class WI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class XI{constructor(e){this.t=e,this.currentUser=fn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Je(this.o===void 0,42304);let i=this.i;const a=p=>this.i!==i?(i=this.i,t(p)):Promise.resolve();let l=new xi;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new xi,e.enqueueRetryable(()=>a(this.currentUser))};const u=()=>{const p=l;e.enqueueRetryable(async()=>{await p.promise,await a(this.currentUser)})},f=p=>{me("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit(p=>f(p)),setTimeout(()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?f(p):(me("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new xi)}},0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(me("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Je(typeof i.accessToken=="string",31837,{l:i}),new Ex(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Je(e===null||typeof e=="string",2055,{h:e}),new fn(e)}}class ZI{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=fn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class JI{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new ZI(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(fn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class jb{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class e4{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,nr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Je(this.o===void 0,3512);const i=l=>{l.error!=null&&me("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const u=l.token!==this.m;return this.m=l.token,me("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>i(l))};const a=l=>{me("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(l=>a(l)),setTimeout(()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):me("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new jb(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Je(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new jb(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t4(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xx(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const a=t4(40);for(let l=0;l<a.length;++l)i.length<20&&a[l]<t&&(i+=e.charAt(a[l]%62))}return i}}function ke(n,e){return n<e?-1:n>e?1:0}function Qp(n,e){let t=0;for(;t<n.length&&t<e.length;){const i=n.codePointAt(t),a=e.codePointAt(t);if(i!==a){if(i<128&&a<128)return ke(i,a);{const l=xx(),u=n4(l.encode(Pb(n,t)),l.encode(Pb(e,t)));return u!==0?u:ke(i,a)}}t+=i>65535?2:1}return ke(n.length,e.length)}function Pb(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function n4(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return ke(n[t],e[t]);return ke(n.length,e.length)}function Bo(n,e,t){return n.length===e.length&&n.every((i,a)=>t(i,e[a]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mb=-62135596800,kb=1e6;class Bt{static now(){return Bt.fromMillis(Date.now())}static fromDate(e){return Bt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*kb);return new Bt(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new fe(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new fe(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Mb)throw new fe(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new fe(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/kb}_compareTo(e){return this.seconds===e.seconds?ke(this.nanoseconds,e.nanoseconds):ke(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-Mb;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{static fromTimestamp(e){return new Ce(e)}static min(){return new Ce(new Bt(0,0))}static max(){return new Ce(new Bt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vb="__name__";class Vr{constructor(e,t,i){t===void 0?t=0:t>e.length&&Se(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&Se(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Vr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Vr?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let a=0;a<i;a++){const l=Vr.compareSegments(e.get(a),t.get(a));if(l!==0)return l}return ke(e.length,t.length)}static compareSegments(e,t){const i=Vr.isNumericId(e),a=Vr.isNumericId(t);return i&&!a?-1:!i&&a?1:i&&a?Vr.extractNumericId(e).compare(Vr.extractNumericId(t)):Qp(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return gs.fromString(e.substring(4,e.length-2))}}class ht extends Vr{construct(e,t,i){return new ht(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new fe(re.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(a=>a.length>0))}return new ht(t)}static emptyPath(){return new ht([])}}const r4=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class on extends Vr{construct(e,t,i){return new on(e,t,i)}static isValidIdentifier(e){return r4.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),on.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Vb}static keyField(){return new on([Vb])}static fromServerFormat(e){const t=[];let i="",a=0;const l=()=>{if(i.length===0)throw new fe(re.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let u=!1;for(;a<e.length;){const f=e[a];if(f==="\\"){if(a+1===e.length)throw new fe(re.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[a+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new fe(re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=p,a+=2}else f==="`"?(u=!u,a++):f!=="."||u?(i+=f,a++):(l(),a++)}if(l(),u)throw new fe(re.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new on(t)}static emptyPath(){return new on([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(e){this.path=e}static fromPath(e){return new Ee(ht.fromString(e))}static fromName(e){return new Ee(ht.fromString(e).popFirst(5))}static empty(){return new Ee(ht.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ht.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ht.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ee(new ht(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pc=-1;function i4(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,a=Ce.fromTimestamp(i===1e9?new Bt(t+1,0):new Bt(t,i));return new _s(a,Ee.empty(),e)}function s4(n){return new _s(n.readTime,n.key,Pc)}class _s{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new _s(Ce.min(),Ee.empty(),Pc)}static max(){return new _s(Ce.max(),Ee.empty(),Pc)}}function a4(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ee.comparator(n.documentKey,e.documentKey),t!==0?t:ke(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o4="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class l4{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function el(n){if(n.code!==re.FAILED_PRECONDITION||n.message!==o4)throw n;me("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Se(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new se((i,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,a)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof se?t:se.resolve(t)}catch(t){return se.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):se.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):se.reject(t)}static resolve(e){return new se((t,i)=>{t(e)})}static reject(e){return new se((t,i)=>{i(e)})}static waitFor(e){return new se((t,i)=>{let a=0,l=0,u=!1;e.forEach(f=>{++a,f.next(()=>{++l,u&&l===a&&t()},p=>i(p))}),u=!0,l===a&&t()})}static or(e){let t=se.resolve(!1);for(const i of e)t=t.next(a=>a?se.resolve(a):i());return t}static forEach(e,t){const i=[];return e.forEach((a,l)=>{i.push(t.call(this,a,l))}),this.waitFor(i)}static mapArray(e,t){return new se((i,a)=>{const l=e.length,u=new Array(l);let f=0;for(let p=0;p<l;p++){const y=p;t(e[y]).next(v=>{u[y]=v,++f,f===l&&i(u)},v=>a(v))}})}static doWhile(e,t){return new se((i,a)=>{const l=()=>{e()===!0?t().next(()=>{l()},a):i()};l()})}}function c4(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function tl(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ue(i),this.ce=i=>t.writeSequenceNumber(i))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}Vh.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ug=-1;function Lh(n){return n==null}function hh(n){return n===0&&1/n==-1/0}function u4(n){return typeof n=="number"&&Number.isInteger(n)&&!hh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wx="";function d4(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Lb(e)),e=h4(n.get(t),e);return Lb(e)}function h4(n,e){let t=e;const i=n.length;for(let a=0;a<i;a++){const l=n.charAt(a);switch(l){case"\0":t+="";break;case wx:t+="";break;default:t+=l}}return t}function Lb(n){return n+wx+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ub(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Cs(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Ax(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e,t){this.comparator=e,this.root=t||an.EMPTY}insert(e,t){return new xt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,an.BLACK,null,null))}remove(e){return new xt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,an.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const a=this.comparator(e,i.key);if(a===0)return t+i.left.size;a<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Md(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Md(this.root,e,this.comparator,!1)}getReverseIterator(){return new Md(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Md(this.root,e,this.comparator,!0)}}class Md{constructor(e,t,i,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class an{constructor(e,t,i,a,l){this.key=e,this.value=t,this.color=i??an.RED,this.left=a??an.EMPTY,this.right=l??an.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,a,l){return new an(e??this.key,t??this.value,i??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let a=this;const l=i(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,i),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,i)),a.fixUp()}removeMin(){if(this.left.isEmpty())return an.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return an.EMPTY;i=a.right.min(),a=a.copy(i.key,i.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,an.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,an.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Se(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Se(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Se(27949);return e+(this.isRed()?0:1)}}an.EMPTY=null,an.RED=!0,an.BLACK=!1;an.EMPTY=new class{constructor(){this.size=0}get key(){throw Se(57766)}get value(){throw Se(16141)}get color(){throw Se(16727)}get left(){throw Se(29726)}get right(){throw Se(36894)}copy(e,t,i,a,l){return this}insert(e,t,i){return new an(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e){this.comparator=e,this.data=new xt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const a=i.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new zb(this.data.getIterator())}getIteratorFrom(e){return new zb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof qt)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=i.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new qt(this.comparator);return t.data=e,t}}class zb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e){this.fields=e,e.sort(on.comparator)}static empty(){return new Fn([])}unionWith(e){let t=new qt(on.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Fn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Bo(this.fields,e.fields,(t,i)=>t.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sx extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new Sx("Invalid base64 string: "+l):l}}(e);return new ln(t)}static fromUint8Array(e){const t=function(a){let l="";for(let u=0;u<a.length;++u)l+=String.fromCharCode(a[u]);return l}(e);return new ln(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const i=new Uint8Array(t.length);for(let a=0;a<t.length;a++)i[a]=t.charCodeAt(a);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ke(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ln.EMPTY_BYTE_STRING=new ln("");const f4=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function bs(n){if(Je(!!n,39018),typeof n=="string"){let e=0;const t=f4.exec(n);if(Je(!!t,46558,{timestamp:n}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Rt(n.seconds),nanos:Rt(n.nanos)}}function Rt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Es(n){return typeof n=="string"?ln.fromBase64String(n):ln.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nx="server_timestamp",Cx="__type__",Rx="__previous_value__",Ix="__local_write_time__";function zg(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[Cx])===null||t===void 0?void 0:t.stringValue)===Nx}function Uh(n){const e=n.mapValue.fields[Rx];return zg(e)?Uh(e):e}function Mc(n){const e=bs(n.mapValue.fields[Ix].timestampValue);return new Bt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m4{constructor(e,t,i,a,l,u,f,p,y,v){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=a,this.ssl=l,this.forceLongPolling=u,this.autoDetectLongPolling=f,this.longPollingOptions=p,this.useFetchStreams=y,this.isUsingEmulator=v}}const fh="(default)";class kc{constructor(e,t){this.projectId=e,this.database=t||fh}static empty(){return new kc("","")}get isDefaultDatabase(){return this.database===fh}isEqual(e){return e instanceof kc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ox="__type__",p4="__max__",kd={mapValue:{}},Dx="__vector__",mh="value";function xs(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?zg(n)?4:y4(n)?9007199254740991:g4(n)?10:11:Se(28295,{value:n})}function Hr(n,e){if(n===e)return!0;const t=xs(n);if(t!==xs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Mc(n).isEqual(Mc(e));case 3:return function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const u=bs(a.timestampValue),f=bs(l.timestampValue);return u.seconds===f.seconds&&u.nanos===f.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(a,l){return Es(a.bytesValue).isEqual(Es(l.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(a,l){return Rt(a.geoPointValue.latitude)===Rt(l.geoPointValue.latitude)&&Rt(a.geoPointValue.longitude)===Rt(l.geoPointValue.longitude)}(n,e);case 2:return function(a,l){if("integerValue"in a&&"integerValue"in l)return Rt(a.integerValue)===Rt(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const u=Rt(a.doubleValue),f=Rt(l.doubleValue);return u===f?hh(u)===hh(f):isNaN(u)&&isNaN(f)}return!1}(n,e);case 9:return Bo(n.arrayValue.values||[],e.arrayValue.values||[],Hr);case 10:case 11:return function(a,l){const u=a.mapValue.fields||{},f=l.mapValue.fields||{};if(Ub(u)!==Ub(f))return!1;for(const p in u)if(u.hasOwnProperty(p)&&(f[p]===void 0||!Hr(u[p],f[p])))return!1;return!0}(n,e);default:return Se(52216,{left:n})}}function Vc(n,e){return(n.values||[]).find(t=>Hr(t,e))!==void 0}function qo(n,e){if(n===e)return 0;const t=xs(n),i=xs(e);if(t!==i)return ke(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return ke(n.booleanValue,e.booleanValue);case 2:return function(l,u){const f=Rt(l.integerValue||l.doubleValue),p=Rt(u.integerValue||u.doubleValue);return f<p?-1:f>p?1:f===p?0:isNaN(f)?isNaN(p)?0:-1:1}(n,e);case 3:return Bb(n.timestampValue,e.timestampValue);case 4:return Bb(Mc(n),Mc(e));case 5:return Qp(n.stringValue,e.stringValue);case 6:return function(l,u){const f=Es(l),p=Es(u);return f.compareTo(p)}(n.bytesValue,e.bytesValue);case 7:return function(l,u){const f=l.split("/"),p=u.split("/");for(let y=0;y<f.length&&y<p.length;y++){const v=ke(f[y],p[y]);if(v!==0)return v}return ke(f.length,p.length)}(n.referenceValue,e.referenceValue);case 8:return function(l,u){const f=ke(Rt(l.latitude),Rt(u.latitude));return f!==0?f:ke(Rt(l.longitude),Rt(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return qb(n.arrayValue,e.arrayValue);case 10:return function(l,u){var f,p,y,v;const b=l.fields||{},T=u.fields||{},N=(f=b[mh])===null||f===void 0?void 0:f.arrayValue,A=(p=T[mh])===null||p===void 0?void 0:p.arrayValue,k=ke(((y=N==null?void 0:N.values)===null||y===void 0?void 0:y.length)||0,((v=A==null?void 0:A.values)===null||v===void 0?void 0:v.length)||0);return k!==0?k:qb(N,A)}(n.mapValue,e.mapValue);case 11:return function(l,u){if(l===kd.mapValue&&u===kd.mapValue)return 0;if(l===kd.mapValue)return 1;if(u===kd.mapValue)return-1;const f=l.fields||{},p=Object.keys(f),y=u.fields||{},v=Object.keys(y);p.sort(),v.sort();for(let b=0;b<p.length&&b<v.length;++b){const T=Qp(p[b],v[b]);if(T!==0)return T;const N=qo(f[p[b]],y[v[b]]);if(N!==0)return N}return ke(p.length,v.length)}(n.mapValue,e.mapValue);default:throw Se(23264,{Pe:t})}}function Bb(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ke(n,e);const t=bs(n),i=bs(e),a=ke(t.seconds,i.seconds);return a!==0?a:ke(t.nanos,i.nanos)}function qb(n,e){const t=n.values||[],i=e.values||[];for(let a=0;a<t.length&&a<i.length;++a){const l=qo(t[a],i[a]);if(l)return l}return ke(t.length,i.length)}function Fo(n){return Wp(n)}function Wp(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const i=bs(t);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Es(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Ee.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let i="[",a=!0;for(const l of t.values||[])a?a=!1:i+=",",i+=Wp(l);return i+"]"}(n.arrayValue):"mapValue"in n?function(t){const i=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const u of i)l?l=!1:a+=",",a+=`${u}:${Wp(t.fields[u])}`;return a+"}"}(n.mapValue):Se(61005,{value:n})}function Yd(n){switch(xs(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Uh(n);return e?16+Yd(e):16;case 5:return 2*n.stringValue.length;case 6:return Es(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((a,l)=>a+Yd(l),0)}(n.arrayValue);case 10:case 11:return function(i){let a=0;return Cs(i.fields,(l,u)=>{a+=l.length+Yd(u)}),a}(n.mapValue);default:throw Se(13486,{value:n})}}function Fb(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Xp(n){return!!n&&"integerValue"in n}function Bg(n){return!!n&&"arrayValue"in n}function Hb(n){return!!n&&"nullValue"in n}function Gb(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Kd(n){return!!n&&"mapValue"in n}function g4(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[Ox])===null||t===void 0?void 0:t.stringValue)===Dx}function Nc(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Cs(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=Nc(i)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Nc(n.arrayValue.values[t]);return e}return Object.assign({},n)}function y4(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===p4}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(e){this.value=e}static empty(){return new In({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Kd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Nc(t)}setAll(e){let t=on.emptyPath(),i={},a=[];e.forEach((u,f)=>{if(!t.isImmediateParentOf(f)){const p=this.getFieldsMap(t);this.applyChanges(p,i,a),i={},a=[],t=f.popLast()}u?i[f.lastSegment()]=Nc(u):a.push(f.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,i,a)}delete(e){const t=this.field(e.popLast());Kd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Hr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let a=t.mapValue.fields[e.get(i)];Kd(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,i){Cs(t,(a,l)=>e[a]=l);for(const a of i)delete e[a]}clone(){return new In(Nc(this.value))}}function jx(n){const e=[];return Cs(n.fields,(t,i)=>{const a=new on([t]);if(Kd(i)){const l=jx(i.mapValue).fields;if(l.length===0)e.push(a);else for(const u of l)e.push(a.child(u))}else e.push(a)}),new Fn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e,t,i,a,l,u,f){this.key=e,this.documentType=t,this.version=i,this.readTime=a,this.createTime=l,this.data=u,this.documentState=f}static newInvalidDocument(e){return new mn(e,0,Ce.min(),Ce.min(),Ce.min(),In.empty(),0)}static newFoundDocument(e,t,i,a){return new mn(e,1,t,Ce.min(),i,a,0)}static newNoDocument(e,t){return new mn(e,2,t,Ce.min(),Ce.min(),In.empty(),0)}static newUnknownDocument(e,t){return new mn(e,3,t,Ce.min(),Ce.min(),In.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=In.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=In.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof mn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new mn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ph{constructor(e,t){this.position=e,this.inclusive=t}}function $b(n,e,t){let i=0;for(let a=0;a<n.position.length;a++){const l=e[a],u=n.position[a];if(l.field.isKeyField()?i=Ee.comparator(Ee.fromName(u.referenceValue),t.key):i=qo(u,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function Yb(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Hr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc{constructor(e,t="asc"){this.field=e,this.dir=t}}function v4(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Px{}class Mt extends Px{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new b4(e,t,i):t==="array-contains"?new T4(e,i):t==="in"?new w4(e,i):t==="not-in"?new A4(e,i):t==="array-contains-any"?new S4(e,i):new Mt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new E4(e,i):new x4(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(qo(t,this.value)):t!==null&&xs(this.value)===xs(t)&&this.matchesComparison(qo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Se(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class mr extends Px{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new mr(e,t)}matches(e){return Mx(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function Mx(n){return n.op==="and"}function kx(n){return _4(n)&&Mx(n)}function _4(n){for(const e of n.filters)if(e instanceof mr)return!1;return!0}function Zp(n){if(n instanceof Mt)return n.field.canonicalString()+n.op.toString()+Fo(n.value);if(kx(n))return n.filters.map(e=>Zp(e)).join(",");{const e=n.filters.map(t=>Zp(t)).join(",");return`${n.op}(${e})`}}function Vx(n,e){return n instanceof Mt?function(i,a){return a instanceof Mt&&i.op===a.op&&i.field.isEqual(a.field)&&Hr(i.value,a.value)}(n,e):n instanceof mr?function(i,a){return a instanceof mr&&i.op===a.op&&i.filters.length===a.filters.length?i.filters.reduce((l,u,f)=>l&&Vx(u,a.filters[f]),!0):!1}(n,e):void Se(19439)}function Lx(n){return n instanceof Mt?function(t){return`${t.field.canonicalString()} ${t.op} ${Fo(t.value)}`}(n):n instanceof mr?function(t){return t.op.toString()+" {"+t.getFilters().map(Lx).join(" ,")+"}"}(n):"Filter"}class b4 extends Mt{constructor(e,t,i){super(e,t,i),this.key=Ee.fromName(i.referenceValue)}matches(e){const t=Ee.comparator(e.key,this.key);return this.matchesComparison(t)}}class E4 extends Mt{constructor(e,t){super(e,"in",t),this.keys=Ux("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class x4 extends Mt{constructor(e,t){super(e,"not-in",t),this.keys=Ux("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Ux(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(i=>Ee.fromName(i.referenceValue))}class T4 extends Mt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Bg(t)&&Vc(t.arrayValue,this.value)}}class w4 extends Mt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Vc(this.value.arrayValue,t)}}class A4 extends Mt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Vc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Vc(this.value.arrayValue,t)}}class S4 extends Mt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Bg(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>Vc(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N4{constructor(e,t=null,i=[],a=[],l=null,u=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=a,this.limit=l,this.startAt=u,this.endAt=f,this.Ie=null}}function Kb(n,e=null,t=[],i=[],a=null,l=null,u=null){return new N4(n,e,t,i,a,l,u)}function qg(n){const e=Ie(n);if(e.Ie===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>Zp(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>function(l){return l.field.canonicalString()+l.dir}(i)).join(","),Lh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>Fo(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>Fo(i)).join(",")),e.Ie=t}return e.Ie}function Fg(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!v4(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Vx(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Yb(n.startAt,e.startAt)&&Yb(n.endAt,e.endAt)}function Jp(n){return Ee.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{constructor(e,t=null,i=[],a=[],l=null,u="F",f=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=a,this.limit=l,this.limitType=u,this.startAt=f,this.endAt=p,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function C4(n,e,t,i,a,l,u,f){return new nl(n,e,t,i,a,l,u,f)}function Hg(n){return new nl(n)}function Qb(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function zx(n){return n.collectionGroup!==null}function Cc(n){const e=Ie(n);if(e.Ee===null){e.Ee=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ee.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let f=new qt(on.comparator);return u.filters.forEach(p=>{p.getFlattenedFilters().forEach(y=>{y.isInequality()&&(f=f.add(y.field))})}),f})(e).forEach(l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ee.push(new Lc(l,i))}),t.has(on.keyField().canonicalString())||e.Ee.push(new Lc(on.keyField(),i))}return e.Ee}function qr(n){const e=Ie(n);return e.de||(e.de=R4(e,Cc(n))),e.de}function R4(n,e){if(n.limitType==="F")return Kb(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(a=>{const l=a.dir==="desc"?"asc":"desc";return new Lc(a.field,l)});const t=n.endAt?new ph(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new ph(n.startAt.position,n.startAt.inclusive):null;return Kb(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function eg(n,e){const t=n.filters.concat([e]);return new nl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function gh(n,e,t){return new nl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function zh(n,e){return Fg(qr(n),qr(e))&&n.limitType===e.limitType}function Bx(n){return`${qg(qr(n))}|lt:${n.limitType}`}function Co(n){return`Query(target=${function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map(a=>Lx(a)).join(", ")}]`),Lh(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map(a=>function(u){return`${u.field.canonicalString()} (${u.dir})`}(a)).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(a=>Fo(a)).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(a=>Fo(a)).join(",")),`Target(${i})`}(qr(n))}; limitType=${n.limitType})`}function Bh(n,e){return e.isFoundDocument()&&function(i,a){const l=a.key.path;return i.collectionGroup!==null?a.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):Ee.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)}(n,e)&&function(i,a){for(const l of Cc(i))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0}(n,e)&&function(i,a){for(const l of i.filters)if(!l.matches(a))return!1;return!0}(n,e)&&function(i,a){return!(i.startAt&&!function(u,f,p){const y=$b(u,f,p);return u.inclusive?y<=0:y<0}(i.startAt,Cc(i),a)||i.endAt&&!function(u,f,p){const y=$b(u,f,p);return u.inclusive?y>=0:y>0}(i.endAt,Cc(i),a))}(n,e)}function I4(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function qx(n){return(e,t)=>{let i=!1;for(const a of Cc(n)){const l=O4(a,e,t);if(l!==0)return l;i=i||a.field.isKeyField()}return 0}}function O4(n,e,t){const i=n.field.isKeyField()?Ee.comparator(e.key,t.key):function(l,u,f){const p=u.data.field(l),y=f.data.field(l);return p!==null&&y!==null?qo(p,y):Se(42886)}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Se(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ra{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[a,l]of i)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),a=this.inner[i];if(a===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return i.length===1?delete this.inner[t]:i.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Cs(this.inner,(t,i)=>{for(const[a,l]of i)e(a,l)})}isEmpty(){return Ax(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D4=new xt(Ee.comparator);function Ni(){return D4}const Fx=new xt(Ee.comparator);function xc(...n){let e=Fx;for(const t of n)e=e.insert(t.key,t);return e}function Hx(n){let e=Fx;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function ga(){return Rc()}function Gx(){return Rc()}function Rc(){return new Ra(n=>n.toString(),(n,e)=>n.isEqual(e))}const j4=new xt(Ee.comparator),P4=new qt(Ee.comparator);function qe(...n){let e=P4;for(const t of n)e=e.add(t);return e}const M4=new qt(ke);function k4(){return M4}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gg(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:hh(e)?"-0":e}}function $x(n){return{integerValue:""+n}}function V4(n,e){return u4(e)?$x(e):Gg(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qh{constructor(){this._=void 0}}function L4(n,e,t){return n instanceof Uc?function(a,l){const u={fields:{[Cx]:{stringValue:Nx},[Ix]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&zg(l)&&(l=Uh(l)),l&&(u.fields[Rx]=l),{mapValue:u}}(t,e):n instanceof zc?Kx(n,e):n instanceof Bc?Qx(n,e):function(a,l){const u=Yx(a,l),f=Wb(u)+Wb(a.Re);return Xp(u)&&Xp(a.Re)?$x(f):Gg(a.serializer,f)}(n,e)}function U4(n,e,t){return n instanceof zc?Kx(n,e):n instanceof Bc?Qx(n,e):t}function Yx(n,e){return n instanceof yh?function(i){return Xp(i)||function(l){return!!l&&"doubleValue"in l}(i)}(e)?e:{integerValue:0}:null}class Uc extends qh{}class zc extends qh{constructor(e){super(),this.elements=e}}function Kx(n,e){const t=Wx(e);for(const i of n.elements)t.some(a=>Hr(a,i))||t.push(i);return{arrayValue:{values:t}}}class Bc extends qh{constructor(e){super(),this.elements=e}}function Qx(n,e){let t=Wx(e);for(const i of n.elements)t=t.filter(a=>!Hr(a,i));return{arrayValue:{values:t}}}class yh extends qh{constructor(e,t){super(),this.serializer=e,this.Re=t}}function Wb(n){return Rt(n.integerValue||n.doubleValue)}function Wx(n){return Bg(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z4{constructor(e,t){this.field=e,this.transform=t}}function B4(n,e){return n.field.isEqual(e.field)&&function(i,a){return i instanceof zc&&a instanceof zc||i instanceof Bc&&a instanceof Bc?Bo(i.elements,a.elements,Hr):i instanceof yh&&a instanceof yh?Hr(i.Re,a.Re):i instanceof Uc&&a instanceof Uc}(n.transform,e.transform)}class q4{constructor(e,t){this.version=e,this.transformResults=t}}class rr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new rr}static exists(e){return new rr(void 0,e)}static updateTime(e){return new rr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Qd(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Fh{}function Xx(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new $g(n.key,rr.none()):new Jc(n.key,n.data,rr.none());{const t=n.data,i=In.empty();let a=new qt(on.comparator);for(let l of e.fields)if(!a.has(l)){let u=t.field(l);u===null&&l.length>1&&(l=l.popLast(),u=t.field(l)),u===null?i.delete(l):i.set(l,u),a=a.add(l)}return new Rs(n.key,i,new Fn(a.toArray()),rr.none())}}function F4(n,e,t){n instanceof Jc?function(a,l,u){const f=a.value.clone(),p=Zb(a.fieldTransforms,l,u.transformResults);f.setAll(p),l.convertToFoundDocument(u.version,f).setHasCommittedMutations()}(n,e,t):n instanceof Rs?function(a,l,u){if(!Qd(a.precondition,l))return void l.convertToUnknownDocument(u.version);const f=Zb(a.fieldTransforms,l,u.transformResults),p=l.data;p.setAll(Zx(a)),p.setAll(f),l.convertToFoundDocument(u.version,p).setHasCommittedMutations()}(n,e,t):function(a,l,u){l.convertToNoDocument(u.version).setHasCommittedMutations()}(0,e,t)}function Ic(n,e,t,i){return n instanceof Jc?function(l,u,f,p){if(!Qd(l.precondition,u))return f;const y=l.value.clone(),v=Jb(l.fieldTransforms,p,u);return y.setAll(v),u.convertToFoundDocument(u.version,y).setHasLocalMutations(),null}(n,e,t,i):n instanceof Rs?function(l,u,f,p){if(!Qd(l.precondition,u))return f;const y=Jb(l.fieldTransforms,p,u),v=u.data;return v.setAll(Zx(l)),v.setAll(y),u.convertToFoundDocument(u.version,v).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(b=>b.field))}(n,e,t,i):function(l,u,f){return Qd(l.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):f}(n,e,t)}function H4(n,e){let t=null;for(const i of n.fieldTransforms){const a=e.data.field(i.field),l=Yx(i.transform,a||null);l!=null&&(t===null&&(t=In.empty()),t.set(i.field,l))}return t||null}function Xb(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(i,a){return i===void 0&&a===void 0||!(!i||!a)&&Bo(i,a,(l,u)=>B4(l,u))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Jc extends Fh{constructor(e,t,i,a=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Rs extends Fh{constructor(e,t,i,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function Zx(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}}),e}function Zb(n,e,t){const i=new Map;Je(n.length===t.length,32656,{Ve:t.length,me:n.length});for(let a=0;a<t.length;a++){const l=n[a],u=l.transform,f=e.data.field(l.field);i.set(l.field,U4(u,f,t[a]))}return i}function Jb(n,e,t){const i=new Map;for(const a of n){const l=a.transform,u=t.data.field(a.field);i.set(a.field,L4(l,u,e))}return i}class $g extends Fh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class G4 extends Fh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $4{constructor(e,t,i,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=a}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&F4(l,e,i[a])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=Ic(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=Ic(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=Gx();return this.mutations.forEach(a=>{const l=e.get(a.key),u=l.overlayedDocument;let f=this.applyToLocalView(u,l.mutatedFields);f=t.has(a.key)?null:f;const p=Xx(u,f);p!==null&&i.set(a.key,p),u.isValidDocument()||u.convertToNoDocument(Ce.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),qe())}isEqual(e){return this.batchId===e.batchId&&Bo(this.mutations,e.mutations,(t,i)=>Xb(t,i))&&Bo(this.baseMutations,e.baseMutations,(t,i)=>Xb(t,i))}}class Yg{constructor(e,t,i,a){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=a}static from(e,t,i){Je(e.mutations.length===i.length,58842,{fe:e.mutations.length,ge:i.length});let a=function(){return j4}();const l=e.mutations;for(let u=0;u<l.length;u++)a=a.insert(l[u].key,i[u].version);return new Yg(e,t,i,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y4{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K4{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pt,Ke;function Q4(n){switch(n){case re.OK:return Se(64938);case re.CANCELLED:case re.UNKNOWN:case re.DEADLINE_EXCEEDED:case re.RESOURCE_EXHAUSTED:case re.INTERNAL:case re.UNAVAILABLE:case re.UNAUTHENTICATED:return!1;case re.INVALID_ARGUMENT:case re.NOT_FOUND:case re.ALREADY_EXISTS:case re.PERMISSION_DENIED:case re.FAILED_PRECONDITION:case re.ABORTED:case re.OUT_OF_RANGE:case re.UNIMPLEMENTED:case re.DATA_LOSS:return!0;default:return Se(15467,{code:n})}}function Jx(n){if(n===void 0)return Si("GRPC error has no .code"),re.UNKNOWN;switch(n){case Pt.OK:return re.OK;case Pt.CANCELLED:return re.CANCELLED;case Pt.UNKNOWN:return re.UNKNOWN;case Pt.DEADLINE_EXCEEDED:return re.DEADLINE_EXCEEDED;case Pt.RESOURCE_EXHAUSTED:return re.RESOURCE_EXHAUSTED;case Pt.INTERNAL:return re.INTERNAL;case Pt.UNAVAILABLE:return re.UNAVAILABLE;case Pt.UNAUTHENTICATED:return re.UNAUTHENTICATED;case Pt.INVALID_ARGUMENT:return re.INVALID_ARGUMENT;case Pt.NOT_FOUND:return re.NOT_FOUND;case Pt.ALREADY_EXISTS:return re.ALREADY_EXISTS;case Pt.PERMISSION_DENIED:return re.PERMISSION_DENIED;case Pt.FAILED_PRECONDITION:return re.FAILED_PRECONDITION;case Pt.ABORTED:return re.ABORTED;case Pt.OUT_OF_RANGE:return re.OUT_OF_RANGE;case Pt.UNIMPLEMENTED:return re.UNIMPLEMENTED;case Pt.DATA_LOSS:return re.DATA_LOSS;default:return Se(39323,{code:n})}}(Ke=Pt||(Pt={}))[Ke.OK=0]="OK",Ke[Ke.CANCELLED=1]="CANCELLED",Ke[Ke.UNKNOWN=2]="UNKNOWN",Ke[Ke.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ke[Ke.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ke[Ke.NOT_FOUND=5]="NOT_FOUND",Ke[Ke.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ke[Ke.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ke[Ke.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ke[Ke.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ke[Ke.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ke[Ke.ABORTED=10]="ABORTED",Ke[Ke.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ke[Ke.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ke[Ke.INTERNAL=13]="INTERNAL",Ke[Ke.UNAVAILABLE=14]="UNAVAILABLE",Ke[Ke.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W4=new gs([4294967295,4294967295],0);function eE(n){const e=xx().encode(n),t=new mx;return t.update(e),new Uint8Array(t.digest())}function tE(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new gs([t,i],0),new gs([a,l],0)]}class Kg{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Tc(`Invalid padding: ${t}`);if(i<0)throw new Tc(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Tc(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Tc(`Invalid padding when bitmap length is 0: ${t}`);this.pe=8*e.length-t,this.ye=gs.fromNumber(this.pe)}we(e,t,i){let a=e.add(t.multiply(gs.fromNumber(i)));return a.compare(W4)===1&&(a=new gs([a.getBits(0),a.getBits(1)],0)),a.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const t=eE(e),[i,a]=tE(t);for(let l=0;l<this.hashCount;l++){const u=this.we(i,a,l);if(!this.be(u))return!1}return!0}static create(e,t,i){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),u=new Kg(l,a,t);return i.forEach(f=>u.insert(f)),u}insert(e){if(this.pe===0)return;const t=eE(e),[i,a]=tE(t);for(let l=0;l<this.hashCount;l++){const u=this.we(i,a,l);this.Se(u)}}Se(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Tc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hh{constructor(e,t,i,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const a=new Map;return a.set(e,eu.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Hh(Ce.min(),a,new xt(ke),Ni(),qe())}}class eu{constructor(e,t,i,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new eu(i,t,qe(),qe(),qe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wd{constructor(e,t,i,a){this.De=e,this.removedTargetIds=t,this.key=i,this.ve=a}}class eT{constructor(e,t){this.targetId=e,this.Ce=t}}class tT{constructor(e,t,i=ln.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=a}}class nE{constructor(){this.Fe=0,this.Me=rE(),this.xe=ln.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=qe(),t=qe(),i=qe();return this.Me.forEach((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:i=i.add(a);break;default:Se(38017,{changeType:l})}}),new eu(this.xe,this.Oe,e,t,i)}Qe(){this.Ne=!1,this.Me=rE()}$e(e,t){this.Ne=!0,this.Me=this.Me.insert(e,t)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,Je(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class X4{constructor(e){this.ze=e,this.je=new Map,this.He=Ni(),this.Je=Vd(),this.Ye=Vd(),this.Ze=new xt(ke)}Xe(e){for(const t of e.De)e.ve&&e.ve.isFoundDocument()?this.et(t,e.ve):this.tt(t,e.key,e.ve);for(const t of e.removedTargetIds)this.tt(t,e.key,e.ve)}nt(e){this.forEachTarget(e,t=>{const i=this.rt(t);switch(e.state){case 0:this.it(t)&&i.ke(e.resumeToken);break;case 1:i.We(),i.Be||i.Qe(),i.ke(e.resumeToken);break;case 2:i.We(),i.Be||this.removeTarget(t);break;case 3:this.it(t)&&(i.Ge(),i.ke(e.resumeToken));break;case 4:this.it(t)&&(this.st(t),i.ke(e.resumeToken));break;default:Se(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.je.forEach((i,a)=>{this.it(a)&&t(a)})}ot(e){const t=e.targetId,i=e.Ce.count,a=this._t(t);if(a){const l=a.target;if(Jp(l))if(i===0){const u=new Ee(l.path);this.tt(t,u,mn.newNoDocument(u,Ce.min()))}else Je(i===1,20013,{expectedCount:i});else{const u=this.ut(t);if(u!==i){const f=this.ct(e),p=f?this.lt(f,e,u):1;if(p!==0){this.st(t);const y=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,y)}}}}}ct(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:a=0},hashCount:l=0}=t;let u,f;try{u=Es(i).toUint8Array()}catch(p){if(p instanceof Sx)return zo("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{f=new Kg(u,a,l)}catch(p){return zo(p instanceof Tc?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return f.pe===0?null:f}lt(e,t,i){return t.Ce.count===i-this.Tt(e,t.targetId)?0:2}Tt(e,t){const i=this.ze.getRemoteKeysForTarget(t);let a=0;return i.forEach(l=>{const u=this.ze.Pt(),f=`projects/${u.projectId}/databases/${u.database}/documents/${l.path.canonicalString()}`;e.mightContain(f)||(this.tt(t,l,null),a++)}),a}It(e){const t=new Map;this.je.forEach((l,u)=>{const f=this._t(u);if(f){if(l.current&&Jp(f.target)){const p=new Ee(f.target.path);this.Et(p).has(u)||this.dt(u,p)||this.tt(u,p,mn.newNoDocument(p,e))}l.Le&&(t.set(u,l.qe()),l.Qe())}});let i=qe();this.Ye.forEach((l,u)=>{let f=!0;u.forEachWhile(p=>{const y=this._t(p);return!y||y.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)}),f&&(i=i.add(l))}),this.He.forEach((l,u)=>u.setReadTime(e));const a=new Hh(e,t,this.Ze,this.He,i);return this.He=Ni(),this.Je=Vd(),this.Ye=Vd(),this.Ze=new xt(ke),a}et(e,t){if(!this.it(e))return;const i=this.dt(e,t.key)?2:0;this.rt(e).$e(t.key,i),this.He=this.He.insert(t.key,t),this.Je=this.Je.insert(t.key,this.Et(t.key).add(e)),this.Ye=this.Ye.insert(t.key,this.At(t.key).add(e))}tt(e,t,i){if(!this.it(e))return;const a=this.rt(e);this.dt(e,t)?a.$e(t,1):a.Ue(t),this.Ye=this.Ye.insert(t,this.At(t).delete(e)),this.Ye=this.Ye.insert(t,this.At(t).add(e)),i&&(this.He=this.He.insert(t,i))}removeTarget(e){this.je.delete(e)}ut(e){const t=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let t=this.je.get(e);return t||(t=new nE,this.je.set(e,t)),t}At(e){let t=this.Ye.get(e);return t||(t=new qt(ke),this.Ye=this.Ye.insert(e,t)),t}Et(e){let t=this.Je.get(e);return t||(t=new qt(ke),this.Je=this.Je.insert(e,t)),t}it(e){const t=this._t(e)!==null;return t||me("WatchChangeAggregator","Detected inactive target",e),t}_t(e){const t=this.je.get(e);return t&&t.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new nE),this.ze.getRemoteKeysForTarget(e).forEach(t=>{this.tt(e,t,null)})}dt(e,t){return this.ze.getRemoteKeysForTarget(e).has(t)}}function Vd(){return new xt(Ee.comparator)}function rE(){return new xt(Ee.comparator)}const Z4={asc:"ASCENDING",desc:"DESCENDING"},J4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},eO={and:"AND",or:"OR"};class tO{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function tg(n,e){return n.useProto3Json||Lh(e)?e:{value:e}}function vh(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function nT(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function nO(n,e){return vh(n,e.toTimestamp())}function Fr(n){return Je(!!n,49232),Ce.fromTimestamp(function(t){const i=bs(t);return new Bt(i.seconds,i.nanos)}(n))}function Qg(n,e){return ng(n,e).canonicalString()}function ng(n,e){const t=function(a){return new ht(["projects",a.projectId,"databases",a.database])}(n).child("documents");return e===void 0?t:t.child(e)}function rT(n){const e=ht.fromString(n);return Je(lT(e),10190,{key:e.toString()}),e}function rg(n,e){return Qg(n.databaseId,e.path)}function Cp(n,e){const t=rT(e);if(t.get(1)!==n.databaseId.projectId)throw new fe(re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new fe(re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ee(sT(t))}function iT(n,e){return Qg(n.databaseId,e)}function rO(n){const e=rT(n);return e.length===4?ht.emptyPath():sT(e)}function ig(n){return new ht(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function sT(n){return Je(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function iE(n,e,t){return{name:rg(n,e),fields:t.value.mapValue.fields}}function iO(n,e){let t;if("targetChange"in e){e.targetChange;const i=function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Se(39313,{state:y})}(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=function(y,v){return y.useProto3Json?(Je(v===void 0||typeof v=="string",58123),ln.fromBase64String(v||"")):(Je(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),ln.fromUint8Array(v||new Uint8Array))}(n,e.targetChange.resumeToken),u=e.targetChange.cause,f=u&&function(y){const v=y.code===void 0?re.UNKNOWN:Jx(y.code);return new fe(v,y.message||"")}(u);t=new tT(i,a,l,f||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const a=Cp(n,i.document.name),l=Fr(i.document.updateTime),u=i.document.createTime?Fr(i.document.createTime):Ce.min(),f=new In({mapValue:{fields:i.document.fields}}),p=mn.newFoundDocument(a,l,u,f),y=i.targetIds||[],v=i.removedTargetIds||[];t=new Wd(y,v,p.key,p)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const a=Cp(n,i.document),l=i.readTime?Fr(i.readTime):Ce.min(),u=mn.newNoDocument(a,l),f=i.removedTargetIds||[];t=new Wd([],f,u.key,u)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const a=Cp(n,i.document),l=i.removedTargetIds||[];t=new Wd([],l,a,null)}else{if(!("filter"in e))return Se(11601,{Vt:e});{e.filter;const i=e.filter;i.targetId;const{count:a=0,unchangedNames:l}=i,u=new K4(a,l),f=i.targetId;t=new eT(f,u)}}return t}function sO(n,e){let t;if(e instanceof Jc)t={update:iE(n,e.key,e.value)};else if(e instanceof $g)t={delete:rg(n,e.key)};else if(e instanceof Rs)t={update:iE(n,e.key,e.data),updateMask:mO(e.fieldMask)};else{if(!(e instanceof G4))return Se(16599,{ft:e.type});t={verify:rg(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(l,u){const f=u.transform;if(f instanceof Uc)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof zc)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof Bc)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof yh)return{fieldPath:u.field.canonicalString(),increment:f.Re};throw Se(20930,{transform:u.transform})}(0,i))),e.precondition.isNone||(t.currentDocument=function(a,l){return l.updateTime!==void 0?{updateTime:nO(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Se(27497)}(n,e.precondition)),t}function aO(n,e){return n&&n.length>0?(Je(e!==void 0,14353),n.map(t=>function(a,l){let u=a.updateTime?Fr(a.updateTime):Fr(l);return u.isEqual(Ce.min())&&(u=Fr(l)),new q4(u,a.transformResults||[])}(t,e))):[]}function oO(n,e){return{documents:[iT(n,e.path)]}}function lO(n,e){const t={structuredQuery:{}},i=e.path;let a;e.collectionGroup!==null?(a=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=iT(n,a);const l=function(y){if(y.length!==0)return oT(mr.create(y,"and"))}(e.filters);l&&(t.structuredQuery.where=l);const u=function(y){if(y.length!==0)return y.map(v=>function(T){return{field:Ro(T.field),direction:dO(T.dir)}}(v))}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const f=tg(n,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=function(y){return{before:y.inclusive,values:y.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(y){return{before:!y.inclusive,values:y.position}}(e.endAt)),{gt:t,parent:a}}function cO(n){let e=rO(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let a=null;if(i>0){Je(i===1,65062);const v=t.from[0];v.allDescendants?a=v.collectionId:e=e.child(v.collectionId)}let l=[];t.where&&(l=function(b){const T=aT(b);return T instanceof mr&&kx(T)?T.getFilters():[T]}(t.where));let u=[];t.orderBy&&(u=function(b){return b.map(T=>function(A){return new Lc(Io(A.field),function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(A.direction))}(T))}(t.orderBy));let f=null;t.limit&&(f=function(b){let T;return T=typeof b=="object"?b.value:b,Lh(T)?null:T}(t.limit));let p=null;t.startAt&&(p=function(b){const T=!!b.before,N=b.values||[];return new ph(N,T)}(t.startAt));let y=null;return t.endAt&&(y=function(b){const T=!b.before,N=b.values||[];return new ph(N,T)}(t.endAt)),C4(e,a,u,l,f,"F",p,y)}function uO(n,e){const t=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Se(28987,{purpose:a})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function aT(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Io(t.unaryFilter.field);return Mt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const a=Io(t.unaryFilter.field);return Mt.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Io(t.unaryFilter.field);return Mt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Io(t.unaryFilter.field);return Mt.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Se(61313);default:return Se(60726)}}(n):n.fieldFilter!==void 0?function(t){return Mt.create(Io(t.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Se(58110);default:return Se(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return mr.create(t.compositeFilter.filters.map(i=>aT(i)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Se(1026)}}(t.compositeFilter.op))}(n):Se(30097,{filter:n})}function dO(n){return Z4[n]}function hO(n){return J4[n]}function fO(n){return eO[n]}function Ro(n){return{fieldPath:n.canonicalString()}}function Io(n){return on.fromServerFormat(n.fieldPath)}function oT(n){return n instanceof Mt?function(t){if(t.op==="=="){if(Gb(t.value))return{unaryFilter:{field:Ro(t.field),op:"IS_NAN"}};if(Hb(t.value))return{unaryFilter:{field:Ro(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Gb(t.value))return{unaryFilter:{field:Ro(t.field),op:"IS_NOT_NAN"}};if(Hb(t.value))return{unaryFilter:{field:Ro(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ro(t.field),op:hO(t.op),value:t.value}}}(n):n instanceof mr?function(t){const i=t.getFilters().map(a=>oT(a));return i.length===1?i[0]:{compositeFilter:{op:fO(t.op),filters:i}}}(n):Se(54877,{filter:n})}function mO(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function lT(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs{constructor(e,t,i,a,l=Ce.min(),u=Ce.min(),f=ln.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=f,this.expectedCount=p}withSequenceNumber(e){return new hs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new hs(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new hs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new hs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pO{constructor(e){this.wt=e}}function gO(n){const e=cO({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?gh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yO{constructor(){this.yn=new vO}addToCollectionParentIndex(e,t){return this.yn.add(t),se.resolve()}getCollectionParents(e,t){return se.resolve(this.yn.getEntries(t))}addFieldIndex(e,t){return se.resolve()}deleteFieldIndex(e,t){return se.resolve()}deleteAllFieldIndexes(e){return se.resolve()}createTargetIndexes(e,t){return se.resolve()}getDocumentsMatchingTarget(e,t){return se.resolve(null)}getIndexType(e,t){return se.resolve(0)}getFieldIndexes(e,t){return se.resolve([])}getNextCollectionGroupToUpdate(e){return se.resolve(null)}getMinOffset(e,t){return se.resolve(_s.min())}getMinOffsetFromCollectionGroup(e,t){return se.resolve(_s.min())}updateCollectionGroup(e,t,i){return se.resolve()}updateIndexEntries(e,t){return se.resolve()}}class vO{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t]||new qt(ht.comparator),l=!a.has(i);return this.index[t]=a.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t];return a&&a.has(i)}getEntries(e){return(this.index[e]||new qt(ht.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},cT=41943040;class Rn{static withCacheSize(e){return new Rn(e,Rn.DEFAULT_COLLECTION_PERCENTILE,Rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Rn.DEFAULT_COLLECTION_PERCENTILE=10,Rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Rn.DEFAULT=new Rn(cT,Rn.DEFAULT_COLLECTION_PERCENTILE,Rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Rn.DISABLED=new Rn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(e){this.nr=e}next(){return this.nr+=2,this.nr}static rr(){return new Ho(0)}static ir(){return new Ho(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aE="LruGarbageCollector",_O=1048576;function oE([n,e],[t,i]){const a=ke(n,t);return a===0?ke(e,i):a}class bO{constructor(e){this.cr=e,this.buffer=new qt(oE),this.lr=0}hr(){return++this.lr}Pr(e){const t=[e,this.hr()];if(this.buffer.size<this.cr)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();oE(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class EO{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Tr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ir(6e4)}stop(){this.Tr&&(this.Tr.cancel(),this.Tr=null)}get started(){return this.Tr!==null}Ir(e){me(aE,`Garbage collection scheduled in ${e}ms`),this.Tr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Tr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){tl(t)?me(aE,"Ignoring IndexedDB error during garbage collection: ",t):await el(t)}await this.Ir(3e5)})}}class xO{constructor(e,t){this.Er=e,this.params=t}calculateTargetCount(e,t){return this.Er.dr(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(t===0)return se.resolve(Vh.le);const i=new bO(t);return this.Er.forEachTarget(e,a=>i.Pr(a.sequenceNumber)).next(()=>this.Er.Ar(e,a=>i.Pr(a))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.Er.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Er.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(me("LruGarbageCollector","Garbage collection skipped; disabled"),se.resolve(sE)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(me("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),sE):this.Rr(e,t))}getCacheSize(e){return this.Er.getCacheSize(e)}Rr(e,t){let i,a,l,u,f,p,y;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(b=>(b>this.params.maximumSequenceNumbersToCollect?(me("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${b}`),a=this.params.maximumSequenceNumbersToCollect):a=b,u=Date.now(),this.nthSequenceNumber(e,a))).next(b=>(i=b,f=Date.now(),this.removeTargets(e,i,t))).next(b=>(l=b,p=Date.now(),this.removeOrphanedDocuments(e,i))).next(b=>(y=Date.now(),No()<=Be.DEBUG&&me("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-v}ms
	Determined least recently used ${a} in `+(f-u)+`ms
	Removed ${l} targets in `+(p-f)+`ms
	Removed ${b} documents in `+(y-p)+`ms
Total Duration: ${y-v}ms`),se.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:b})))}}function TO(n,e){return new xO(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wO{constructor(){this.changes=new Ra(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,mn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?se.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AO{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SO{constructor(e,t,i,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=a}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(a=>(i=a,this.remoteDocumentCache.getEntry(e,t))).next(a=>(i!==null&&Ic(i.mutation,a,Fn.empty(),Bt.now()),a))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,qe()).next(()=>i))}getLocalViewOfDocuments(e,t,i=qe()){const a=ga();return this.populateOverlays(e,a,t).next(()=>this.computeViews(e,t,a,i).next(l=>{let u=xc();return l.forEach((f,p)=>{u=u.insert(f,p.overlayedDocument)}),u}))}getOverlayedDocuments(e,t){const i=ga();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,qe()))}populateOverlays(e,t,i){const a=[];return i.forEach(l=>{t.has(l)||a.push(l)}),this.documentOverlayCache.getOverlays(e,a).next(l=>{l.forEach((u,f)=>{t.set(u,f)})})}computeViews(e,t,i,a){let l=Ni();const u=Rc(),f=function(){return Rc()}();return t.forEach((p,y)=>{const v=i.get(y.key);a.has(y.key)&&(v===void 0||v.mutation instanceof Rs)?l=l.insert(y.key,y):v!==void 0?(u.set(y.key,v.mutation.getFieldMask()),Ic(v.mutation,y,v.mutation.getFieldMask(),Bt.now())):u.set(y.key,Fn.empty())}),this.recalculateAndSaveOverlays(e,l).next(p=>(p.forEach((y,v)=>u.set(y,v)),t.forEach((y,v)=>{var b;return f.set(y,new AO(v,(b=u.get(y))!==null&&b!==void 0?b:null))}),f))}recalculateAndSaveOverlays(e,t){const i=Rc();let a=new xt((u,f)=>u-f),l=qe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(u=>{for(const f of u)f.keys().forEach(p=>{const y=t.get(p);if(y===null)return;let v=i.get(p)||Fn.empty();v=f.applyToLocalView(y,v),i.set(p,v);const b=(a.get(f.batchId)||qe()).add(p);a=a.insert(f.batchId,b)})}).next(()=>{const u=[],f=a.getReverseIterator();for(;f.hasNext();){const p=f.getNext(),y=p.key,v=p.value,b=Gx();v.forEach(T=>{if(!l.has(T)){const N=Xx(t.get(T),i.get(T));N!==null&&b.set(T,N),l=l.add(T)}}),u.push(this.documentOverlayCache.saveOverlays(e,y,b))}return se.waitFor(u)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i,a){return function(u){return Ee.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):zx(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,a):this.getDocumentsMatchingCollectionQuery(e,t,i,a)}getNextDocuments(e,t,i,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,a).next(l=>{const u=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,a-l.size):se.resolve(ga());let f=Pc,p=l;return u.next(y=>se.forEach(y,(v,b)=>(f<b.largestBatchId&&(f=b.largestBatchId),l.get(v)?se.resolve():this.remoteDocumentCache.getEntry(e,v).next(T=>{p=p.insert(v,T)}))).next(()=>this.populateOverlays(e,y,l)).next(()=>this.computeViews(e,p,y,qe())).next(v=>({batchId:f,changes:Hx(v)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ee(t)).next(i=>{let a=xc();return i.isFoundDocument()&&(a=a.insert(i.key,i)),a})}getDocumentsMatchingCollectionGroupQuery(e,t,i,a){const l=t.collectionGroup;let u=xc();return this.indexManager.getCollectionParents(e,l).next(f=>se.forEach(f,p=>{const y=function(b,T){return new nl(T,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt)}(t,p.child(l));return this.getDocumentsMatchingCollectionQuery(e,y,i,a).next(v=>{v.forEach((b,T)=>{u=u.insert(b,T)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,i,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(u=>(l=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,a))).next(u=>{l.forEach((p,y)=>{const v=y.getKey();u.get(v)===null&&(u=u.insert(v,mn.newInvalidDocument(v)))});let f=xc();return u.forEach((p,y)=>{const v=l.get(p);v!==void 0&&Ic(v.mutation,y,Fn.empty(),Bt.now()),Bh(t,y)&&(f=f.insert(p,y))}),f})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NO{constructor(e){this.serializer=e,this.Fr=new Map,this.Mr=new Map}getBundleMetadata(e,t){return se.resolve(this.Fr.get(t))}saveBundleMetadata(e,t){return this.Fr.set(t.id,function(a){return{id:a.id,version:a.version,createTime:Fr(a.createTime)}}(t)),se.resolve()}getNamedQuery(e,t){return se.resolve(this.Mr.get(t))}saveNamedQuery(e,t){return this.Mr.set(t.name,function(a){return{name:a.name,query:gO(a.bundledQuery),readTime:Fr(a.readTime)}}(t)),se.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CO{constructor(){this.overlays=new xt(Ee.comparator),this.Or=new Map}getOverlay(e,t){return se.resolve(this.overlays.get(t))}getOverlays(e,t){const i=ga();return se.forEach(t,a=>this.getOverlay(e,a).next(l=>{l!==null&&i.set(a,l)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((a,l)=>{this.St(e,t,l)}),se.resolve()}removeOverlaysForBatchId(e,t,i){const a=this.Or.get(i);return a!==void 0&&(a.forEach(l=>this.overlays=this.overlays.remove(l)),this.Or.delete(i)),se.resolve()}getOverlaysForCollection(e,t,i){const a=ga(),l=t.length+1,u=new Ee(t.child("")),f=this.overlays.getIteratorFrom(u);for(;f.hasNext();){const p=f.getNext().value,y=p.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===l&&p.largestBatchId>i&&a.set(p.getKey(),p)}return se.resolve(a)}getOverlaysForCollectionGroup(e,t,i,a){let l=new xt((y,v)=>y-v);const u=this.overlays.getIterator();for(;u.hasNext();){const y=u.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>i){let v=l.get(y.largestBatchId);v===null&&(v=ga(),l=l.insert(y.largestBatchId,v)),v.set(y.getKey(),y)}}const f=ga(),p=l.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((y,v)=>f.set(y,v)),!(f.size()>=a)););return se.resolve(f)}St(e,t,i){const a=this.overlays.get(i.key);if(a!==null){const u=this.Or.get(a.largestBatchId).delete(i.key);this.Or.set(a.largestBatchId,u)}this.overlays=this.overlays.insert(i.key,new Y4(t,i));let l=this.Or.get(t);l===void 0&&(l=qe(),this.Or.set(t,l)),this.Or.set(t,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RO{constructor(){this.sessionToken=ln.EMPTY_BYTE_STRING}getSessionToken(e){return se.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,se.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wg{constructor(){this.Nr=new qt(Qt.Br),this.Lr=new qt(Qt.kr)}isEmpty(){return this.Nr.isEmpty()}addReference(e,t){const i=new Qt(e,t);this.Nr=this.Nr.add(i),this.Lr=this.Lr.add(i)}qr(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.Qr(new Qt(e,t))}$r(e,t){e.forEach(i=>this.removeReference(i,t))}Ur(e){const t=new Ee(new ht([])),i=new Qt(t,e),a=new Qt(t,e+1),l=[];return this.Lr.forEachInRange([i,a],u=>{this.Qr(u),l.push(u.key)}),l}Kr(){this.Nr.forEach(e=>this.Qr(e))}Qr(e){this.Nr=this.Nr.delete(e),this.Lr=this.Lr.delete(e)}Wr(e){const t=new Ee(new ht([])),i=new Qt(t,e),a=new Qt(t,e+1);let l=qe();return this.Lr.forEachInRange([i,a],u=>{l=l.add(u.key)}),l}containsKey(e){const t=new Qt(e,0),i=this.Nr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Qt{constructor(e,t){this.key=e,this.Gr=t}static Br(e,t){return Ee.comparator(e.key,t.key)||ke(e.Gr,t.Gr)}static kr(e,t){return ke(e.Gr,t.Gr)||Ee.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IO{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Jn=1,this.zr=new qt(Qt.Br)}checkEmpty(e){return se.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,a){const l=this.Jn;this.Jn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new $4(l,t,i,a);this.mutationQueue.push(u);for(const f of a)this.zr=this.zr.add(new Qt(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return se.resolve(u)}lookupMutationBatch(e,t){return se.resolve(this.jr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,a=this.Hr(i),l=a<0?0:a;return se.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(this.mutationQueue.length===0?Ug:this.Jn-1)}getAllMutationBatches(e){return se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Qt(t,0),a=new Qt(t,Number.POSITIVE_INFINITY),l=[];return this.zr.forEachInRange([i,a],u=>{const f=this.jr(u.Gr);l.push(f)}),se.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new qt(ke);return t.forEach(a=>{const l=new Qt(a,0),u=new Qt(a,Number.POSITIVE_INFINITY);this.zr.forEachInRange([l,u],f=>{i=i.add(f.Gr)})}),se.resolve(this.Jr(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,a=i.length+1;let l=i;Ee.isDocumentKey(l)||(l=l.child(""));const u=new Qt(new Ee(l),0);let f=new qt(ke);return this.zr.forEachWhile(p=>{const y=p.key.path;return!!i.isPrefixOf(y)&&(y.length===a&&(f=f.add(p.Gr)),!0)},u),se.resolve(this.Jr(f))}Jr(e){const t=[];return e.forEach(i=>{const a=this.jr(i);a!==null&&t.push(a)}),t}removeMutationBatch(e,t){Je(this.Yr(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.zr;return se.forEach(t.mutations,a=>{const l=new Qt(a.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.zr=i})}Xn(e){}containsKey(e,t){const i=new Qt(t,0),a=this.zr.firstAfterOrEqual(i);return se.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,se.resolve()}Yr(e,t){return this.Hr(e)}Hr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}jr(e){const t=this.Hr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OO{constructor(e){this.Zr=e,this.docs=function(){return new xt(Ee.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,a=this.docs.get(i),l=a?a.size:0,u=this.Zr(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:u}),this.size+=u-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return se.resolve(i?i.document.mutableCopy():mn.newInvalidDocument(t))}getEntries(e,t){let i=Ni();return t.forEach(a=>{const l=this.docs.get(a);i=i.insert(a,l?l.document.mutableCopy():mn.newInvalidDocument(a))}),se.resolve(i)}getDocumentsMatchingQuery(e,t,i,a){let l=Ni();const u=t.path,f=new Ee(u.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(f);for(;p.hasNext();){const{key:y,value:{document:v}}=p.getNext();if(!u.isPrefixOf(y.path))break;y.path.length>u.length+1||a4(s4(v),i)<=0||(a.has(v.key)||Bh(t,v))&&(l=l.insert(v.key,v.mutableCopy()))}return se.resolve(l)}getAllFromCollectionGroup(e,t,i,a){Se(9500)}Xr(e,t){return se.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new DO(this)}getSize(e){return se.resolve(this.size)}}class DO extends wO{constructor(e){super(),this.vr=e}applyChanges(e){const t=[];return this.changes.forEach((i,a)=>{a.isValidDocument()?t.push(this.vr.addEntry(e,a)):this.vr.removeEntry(i)}),se.waitFor(t)}getFromCache(e,t){return this.vr.getEntry(e,t)}getAllFromCache(e,t){return this.vr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jO{constructor(e){this.persistence=e,this.ei=new Ra(t=>qg(t),Fg),this.lastRemoteSnapshotVersion=Ce.min(),this.highestTargetId=0,this.ti=0,this.ni=new Wg,this.targetCount=0,this.ri=Ho.rr()}forEachTarget(e,t){return this.ei.forEach((i,a)=>t(a)),se.resolve()}getLastRemoteSnapshotVersion(e){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return se.resolve(this.ti)}allocateTargetId(e){return this.highestTargetId=this.ri.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.ti&&(this.ti=t),se.resolve()}ar(e){this.ei.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ri=new Ho(t),this.highestTargetId=t),e.sequenceNumber>this.ti&&(this.ti=e.sequenceNumber)}addTargetData(e,t){return this.ar(t),this.targetCount+=1,se.resolve()}updateTargetData(e,t){return this.ar(t),se.resolve()}removeTargetData(e,t){return this.ei.delete(t.target),this.ni.Ur(t.targetId),this.targetCount-=1,se.resolve()}removeTargets(e,t,i){let a=0;const l=[];return this.ei.forEach((u,f)=>{f.sequenceNumber<=t&&i.get(f.targetId)===null&&(this.ei.delete(u),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),a++)}),se.waitFor(l).next(()=>a)}getTargetCount(e){return se.resolve(this.targetCount)}getTargetData(e,t){const i=this.ei.get(t)||null;return se.resolve(i)}addMatchingKeys(e,t,i){return this.ni.qr(t,i),se.resolve()}removeMatchingKeys(e,t,i){this.ni.$r(t,i);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach(u=>{l.push(a.markPotentiallyOrphaned(e,u))}),se.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.ni.Ur(t),se.resolve()}getMatchingKeysForTargetId(e,t){const i=this.ni.Wr(t);return se.resolve(i)}containsKey(e,t){return se.resolve(this.ni.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uT{constructor(e,t){this.ii={},this.overlays={},this.si=new Vh(0),this.oi=!1,this.oi=!0,this._i=new RO,this.referenceDelegate=e(this),this.ai=new jO(this),this.indexManager=new yO,this.remoteDocumentCache=function(a){return new OO(a)}(i=>this.referenceDelegate.ui(i)),this.serializer=new pO(t),this.ci=new NO(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.oi=!1,Promise.resolve()}get started(){return this.oi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new CO,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ii[e.toKey()];return i||(i=new IO(t,this.referenceDelegate),this.ii[e.toKey()]=i),i}getGlobalsCache(){return this._i}getTargetCache(){return this.ai}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.ci}runTransaction(e,t,i){me("MemoryPersistence","Starting transaction:",e);const a=new PO(this.si.next());return this.referenceDelegate.li(),i(a).next(l=>this.referenceDelegate.hi(a).next(()=>l)).toPromise().then(l=>(a.raiseOnCommittedEvent(),l))}Pi(e,t){return se.or(Object.values(this.ii).map(i=>()=>i.containsKey(e,t)))}}class PO extends l4{constructor(e){super(),this.currentSequenceNumber=e}}class Xg{constructor(e){this.persistence=e,this.Ti=new Wg,this.Ii=null}static Ei(e){return new Xg(e)}get di(){if(this.Ii)return this.Ii;throw Se(60996)}addReference(e,t,i){return this.Ti.addReference(i,t),this.di.delete(i.toString()),se.resolve()}removeReference(e,t,i){return this.Ti.removeReference(i,t),this.di.add(i.toString()),se.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),se.resolve()}removeTarget(e,t){this.Ti.Ur(t.targetId).forEach(a=>this.di.add(a.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(a=>{a.forEach(l=>this.di.add(l.toString()))}).next(()=>i.removeTargetData(e,t))}li(){this.Ii=new Set}hi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.di,i=>{const a=Ee.fromPath(i);return this.Ai(e,a).next(l=>{l||t.removeEntry(a,Ce.min())})}).next(()=>(this.Ii=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ai(e,t).next(i=>{i?this.di.delete(t.toString()):this.di.add(t.toString())})}ui(e){return 0}Ai(e,t){return se.or([()=>se.resolve(this.Ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Pi(e,t)])}}class _h{constructor(e,t){this.persistence=e,this.Ri=new Ra(i=>d4(i.path),(i,a)=>i.isEqual(a)),this.garbageCollector=TO(this,t)}static Ei(e,t){return new _h(e,t)}li(){}hi(e){return se.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.Vr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>t.next(a=>i+a))}Vr(e){let t=0;return this.Ar(e,i=>{t++}).next(()=>t)}Ar(e,t){return se.forEach(this.Ri,(i,a)=>this.gr(e,i,a).next(l=>l?se.resolve():t(a)))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.Xr(e,u=>this.gr(e,u,t).next(f=>{f||(i++,l.removeEntry(u,Ce.min()))})).next(()=>l.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,t){return this.Ri.set(t,e.currentSequenceNumber),se.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.Ri.set(i,e.currentSequenceNumber),se.resolve()}removeReference(e,t,i){return this.Ri.set(i,e.currentSequenceNumber),se.resolve()}updateLimboDocument(e,t){return this.Ri.set(t,e.currentSequenceNumber),se.resolve()}ui(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Yd(e.data.value)),t}gr(e,t,i){return se.or([()=>this.persistence.Pi(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.Ri.get(t);return se.resolve(a!==void 0&&a>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zg{constructor(e,t,i,a){this.targetId=e,this.fromCache=t,this.ls=i,this.hs=a}static Ps(e,t){let i=qe(),a=qe();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new Zg(e,t.fromCache,i,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MO{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kO{constructor(){this.Ts=!1,this.Is=!1,this.Es=100,this.ds=function(){return hC()?8:c4(gn())>0?6:4}()}initialize(e,t){this.As=e,this.indexManager=t,this.Ts=!0}getDocumentsMatchingQuery(e,t,i,a){const l={result:null};return this.Rs(e,t).next(u=>{l.result=u}).next(()=>{if(!l.result)return this.Vs(e,t,a,i).next(u=>{l.result=u})}).next(()=>{if(l.result)return;const u=new MO;return this.fs(e,t,u).next(f=>{if(l.result=f,this.Is)return this.gs(e,t,u,f.size)})}).next(()=>l.result)}gs(e,t,i,a){return i.documentReadCount<this.Es?(No()<=Be.DEBUG&&me("QueryEngine","SDK will not create cache indexes for query:",Co(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Es,"documents"),se.resolve()):(No()<=Be.DEBUG&&me("QueryEngine","Query:",Co(t),"scans",i.documentReadCount,"local documents and returns",a,"documents as results."),i.documentReadCount>this.ds*a?(No()<=Be.DEBUG&&me("QueryEngine","The SDK decides to create cache indexes for query:",Co(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,qr(t))):se.resolve())}Rs(e,t){if(Qb(t))return se.resolve(null);let i=qr(t);return this.indexManager.getIndexType(e,i).next(a=>a===0?null:(t.limit!==null&&a===1&&(t=gh(t,null,"F"),i=qr(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(l=>{const u=qe(...l);return this.As.getDocuments(e,u).next(f=>this.indexManager.getMinOffset(e,i).next(p=>{const y=this.ps(t,f);return this.ys(t,y,u,p.readTime)?this.Rs(e,gh(t,null,"F")):this.ws(e,y,t,p)}))})))}Vs(e,t,i,a){return Qb(t)||a.isEqual(Ce.min())?se.resolve(null):this.As.getDocuments(e,i).next(l=>{const u=this.ps(t,l);return this.ys(t,u,i,a)?se.resolve(null):(No()<=Be.DEBUG&&me("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Co(t)),this.ws(e,u,t,i4(a,Pc)).next(f=>f))})}ps(e,t){let i=new qt(qx(e));return t.forEach((a,l)=>{Bh(e,l)&&(i=i.add(l))}),i}ys(e,t,i,a){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}fs(e,t,i){return No()<=Be.DEBUG&&me("QueryEngine","Using full collection scan to execute query:",Co(t)),this.As.getDocumentsMatchingQuery(e,t,_s.min(),i)}ws(e,t,i,a){return this.As.getDocumentsMatchingQuery(e,i,a).next(l=>(t.forEach(u=>{l=l.insert(u.key,u)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jg="LocalStore",VO=3e8;class LO{constructor(e,t,i,a){this.persistence=e,this.bs=t,this.serializer=a,this.Ss=new xt(ke),this.Ds=new Ra(l=>qg(l),Fg),this.vs=new Map,this.Cs=e.getRemoteDocumentCache(),this.ai=e.getTargetCache(),this.ci=e.getBundleCache(),this.Fs(i)}Fs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new SO(this.Cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Cs.setIndexManager(this.indexManager),this.bs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ss))}}function UO(n,e,t,i){return new LO(n,e,t,i)}async function dT(n,e){const t=Ie(n);return await t.persistence.runTransaction("Handle user change","readonly",i=>{let a;return t.mutationQueue.getAllMutationBatches(i).next(l=>(a=l,t.Fs(e),t.mutationQueue.getAllMutationBatches(i))).next(l=>{const u=[],f=[];let p=qe();for(const y of a){u.push(y.batchId);for(const v of y.mutations)p=p.add(v.key)}for(const y of l){f.push(y.batchId);for(const v of y.mutations)p=p.add(v.key)}return t.localDocuments.getDocuments(i,p).next(y=>({Ms:y,removedBatchIds:u,addedBatchIds:f}))})})}function zO(n,e){const t=Ie(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const a=e.batch.keys(),l=t.Cs.newChangeBuffer({trackRemovals:!0});return function(f,p,y,v){const b=y.batch,T=b.keys();let N=se.resolve();return T.forEach(A=>{N=N.next(()=>v.getEntry(p,A)).next(k=>{const D=y.docVersions.get(A);Je(D!==null,48541),k.version.compareTo(D)<0&&(b.applyToRemoteDocument(k,y),k.isValidDocument()&&(k.setReadTime(y.commitVersion),v.addEntry(k)))})}),N.next(()=>f.mutationQueue.removeMutationBatch(p,b))}(t,i,e,l).next(()=>l.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,a,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(f){let p=qe();for(let y=0;y<f.mutationResults.length;++y)f.mutationResults[y].transformResults.length>0&&(p=p.add(f.batch.mutations[y].key));return p}(e))).next(()=>t.localDocuments.getDocuments(i,a))})}function hT(n){const e=Ie(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.ai.getLastRemoteSnapshotVersion(t))}function BO(n,e){const t=Ie(n),i=e.snapshotVersion;let a=t.Ss;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const u=t.Cs.newChangeBuffer({trackRemovals:!0});a=t.Ss;const f=[];e.targetChanges.forEach((v,b)=>{const T=a.get(b);if(!T)return;f.push(t.ai.removeMatchingKeys(l,v.removedDocuments,b).next(()=>t.ai.addMatchingKeys(l,v.addedDocuments,b)));let N=T.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(b)!==null?N=N.withResumeToken(ln.EMPTY_BYTE_STRING,Ce.min()).withLastLimboFreeSnapshotVersion(Ce.min()):v.resumeToken.approximateByteSize()>0&&(N=N.withResumeToken(v.resumeToken,i)),a=a.insert(b,N),function(k,D,$){return k.resumeToken.approximateByteSize()===0||D.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=VO?!0:$.addedDocuments.size+$.modifiedDocuments.size+$.removedDocuments.size>0}(T,N,v)&&f.push(t.ai.updateTargetData(l,N))});let p=Ni(),y=qe();if(e.documentUpdates.forEach(v=>{e.resolvedLimboDocuments.has(v)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(l,v))}),f.push(qO(l,u,e.documentUpdates).next(v=>{p=v.xs,y=v.Os})),!i.isEqual(Ce.min())){const v=t.ai.getLastRemoteSnapshotVersion(l).next(b=>t.ai.setTargetsMetadata(l,l.currentSequenceNumber,i));f.push(v)}return se.waitFor(f).next(()=>u.apply(l)).next(()=>t.localDocuments.getLocalViewOfDocuments(l,p,y)).next(()=>p)}).then(l=>(t.Ss=a,l))}function qO(n,e,t){let i=qe(),a=qe();return t.forEach(l=>i=i.add(l)),e.getEntries(n,i).next(l=>{let u=Ni();return t.forEach((f,p)=>{const y=l.get(f);p.isFoundDocument()!==y.isFoundDocument()&&(a=a.add(f)),p.isNoDocument()&&p.version.isEqual(Ce.min())?(e.removeEntry(f,p.readTime),u=u.insert(f,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||p.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(p),u=u.insert(f,p)):me(Jg,"Ignoring outdated watch update for ",f,". Current version:",y.version," Watch version:",p.version)}),{xs:u,Os:a}})}function FO(n,e){const t=Ie(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=Ug),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function HO(n,e){const t=Ie(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let a;return t.ai.getTargetData(i,e).next(l=>l?(a=l,se.resolve(a)):t.ai.allocateTargetId(i).next(u=>(a=new hs(e,u,"TargetPurposeListen",i.currentSequenceNumber),t.ai.addTargetData(i,a).next(()=>a))))}).then(i=>{const a=t.Ss.get(i.targetId);return(a===null||i.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ss=t.Ss.insert(i.targetId,i),t.Ds.set(e,i.targetId)),i})}async function sg(n,e,t){const i=Ie(n),a=i.Ss.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,u=>i.persistence.referenceDelegate.removeTarget(u,a))}catch(u){if(!tl(u))throw u;me(Jg,`Failed to update sequence numbers for target ${e}: ${u}`)}i.Ss=i.Ss.remove(e),i.Ds.delete(a.target)}function lE(n,e,t){const i=Ie(n);let a=Ce.min(),l=qe();return i.persistence.runTransaction("Execute query","readwrite",u=>function(p,y,v){const b=Ie(p),T=b.Ds.get(v);return T!==void 0?se.resolve(b.Ss.get(T)):b.ai.getTargetData(y,v)}(i,u,qr(e)).next(f=>{if(f)return a=f.lastLimboFreeSnapshotVersion,i.ai.getMatchingKeysForTargetId(u,f.targetId).next(p=>{l=p})}).next(()=>i.bs.getDocumentsMatchingQuery(u,e,t?a:Ce.min(),t?l:qe())).next(f=>(GO(i,I4(e),f),{documents:f,Ns:l})))}function GO(n,e,t){let i=n.vs.get(e)||Ce.min();t.forEach((a,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)}),n.vs.set(e,i)}class cE{constructor(){this.activeTargetIds=k4()}$s(e){this.activeTargetIds=this.activeTargetIds.add(e)}Us(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Qs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class $O{constructor(){this.So=new cE,this.Do={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.So.$s(e),this.Do[e]||"not-current"}updateQueryState(e,t,i){this.Do[e]=t}removeLocalQueryTarget(e){this.So.Us(e)}isLocalQueryTarget(e){return this.So.activeTargetIds.has(e)}clearQueryState(e){delete this.Do[e]}getAllActiveQueryTargets(){return this.So.activeTargetIds}isActiveQueryTarget(e){return this.So.activeTargetIds.has(e)}start(){return this.So=new cE,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YO{vo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uE="ConnectivityMonitor";class dE{constructor(){this.Co=()=>this.Fo(),this.Mo=()=>this.xo(),this.Oo=[],this.No()}vo(e){this.Oo.push(e)}shutdown(){window.removeEventListener("online",this.Co),window.removeEventListener("offline",this.Mo)}No(){window.addEventListener("online",this.Co),window.addEventListener("offline",this.Mo)}Fo(){me(uE,"Network connectivity changed: AVAILABLE");for(const e of this.Oo)e(0)}xo(){me(uE,"Network connectivity changed: UNAVAILABLE");for(const e of this.Oo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ld=null;function ag(){return Ld===null?Ld=function(){return 268435456+Math.round(2147483648*Math.random())}():Ld++,"0x"+Ld.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rp="RestConnection",KO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class QO{get Bo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Lo=t+"://"+e.host,this.ko=`projects/${i}/databases/${a}`,this.qo=this.databaseId.database===fh?`project_id=${i}`:`project_id=${i}&database_id=${a}`}Qo(e,t,i,a,l){const u=ag(),f=this.$o(e,t.toUriEncodedString());me(Rp,`Sending RPC '${e}' ${u}:`,f,i);const p={"google-cloud-resource-prefix":this.ko,"x-goog-request-params":this.qo};this.Uo(p,a,l);const{host:y}=new URL(f),v=$c(y);return this.Ko(e,f,p,i,v).then(b=>(me(Rp,`Received RPC '${e}' ${u}: `,b),b),b=>{throw zo(Rp,`RPC '${e}' ${u} failed with error: `,b,"url: ",f,"request:",i),b})}Wo(e,t,i,a,l,u){return this.Qo(e,t,i,a,l)}Uo(e,t,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Jo}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((a,l)=>e[l]=a),i&&i.headers.forEach((a,l)=>e[l]=a)}$o(e,t){const i=KO[e];return`${this.Lo}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WO{constructor(e){this.Go=e.Go,this.zo=e.zo}jo(e){this.Ho=e}Jo(e){this.Yo=e}Zo(e){this.Xo=e}onMessage(e){this.e_=e}close(){this.zo()}send(e){this.Go(e)}t_(){this.Ho()}n_(){this.Yo()}r_(e){this.Xo(e)}i_(e){this.e_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hn="WebChannelConnection";class XO extends QO{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ko(e,t,i,a,l){const u=ag();return new Promise((f,p)=>{const y=new px;y.setWithCredentials(!0),y.listenOnce(gx.COMPLETE,()=>{try{switch(y.getLastErrorCode()){case $d.NO_ERROR:const b=y.getResponseJson();me(hn,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(b)),f(b);break;case $d.TIMEOUT:me(hn,`RPC '${e}' ${u} timed out`),p(new fe(re.DEADLINE_EXCEEDED,"Request time out"));break;case $d.HTTP_ERROR:const T=y.getStatus();if(me(hn,`RPC '${e}' ${u} failed with status:`,T,"response text:",y.getResponseText()),T>0){let N=y.getResponseJson();Array.isArray(N)&&(N=N[0]);const A=N==null?void 0:N.error;if(A&&A.status&&A.message){const k=function($){const Q=$.toLowerCase().replace(/_/g,"-");return Object.values(re).indexOf(Q)>=0?Q:re.UNKNOWN}(A.status);p(new fe(k,A.message))}else p(new fe(re.UNKNOWN,"Server responded with status "+y.getStatus()))}else p(new fe(re.UNAVAILABLE,"Connection failed."));break;default:Se(9055,{s_:e,streamId:u,o_:y.getLastErrorCode(),__:y.getLastError()})}}finally{me(hn,`RPC '${e}' ${u} completed.`)}});const v=JSON.stringify(a);me(hn,`RPC '${e}' ${u} sending request:`,a),y.send(t,"POST",v,i,15)})}a_(e,t,i){const a=ag(),l=[this.Lo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=_x(),f=vx(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(p.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Uo(p.initMessageHeaders,t,i),p.encodeInitMessageHeaders=!0;const v=l.join("");me(hn,`Creating RPC '${e}' stream ${a}: ${v}`,p);const b=u.createWebChannel(v,p);let T=!1,N=!1;const A=new WO({Go:D=>{N?me(hn,`Not sending because RPC '${e}' stream ${a} is closed:`,D):(T||(me(hn,`Opening RPC '${e}' stream ${a} transport.`),b.open(),T=!0),me(hn,`RPC '${e}' stream ${a} sending:`,D),b.send(D))},zo:()=>b.close()}),k=(D,$,Q)=>{D.listen($,U=>{try{Q(U)}catch(ne){setTimeout(()=>{throw ne},0)}})};return k(b,Ec.EventType.OPEN,()=>{N||(me(hn,`RPC '${e}' stream ${a} transport opened.`),A.t_())}),k(b,Ec.EventType.CLOSE,()=>{N||(N=!0,me(hn,`RPC '${e}' stream ${a} transport closed`),A.r_())}),k(b,Ec.EventType.ERROR,D=>{N||(N=!0,zo(hn,`RPC '${e}' stream ${a} transport errored. Name:`,D.name,"Message:",D.message),A.r_(new fe(re.UNAVAILABLE,"The operation could not be completed")))}),k(b,Ec.EventType.MESSAGE,D=>{var $;if(!N){const Q=D.data[0];Je(!!Q,16349);const U=Q,ne=(U==null?void 0:U.error)||(($=U[0])===null||$===void 0?void 0:$.error);if(ne){me(hn,`RPC '${e}' stream ${a} received error:`,ne);const le=ne.status;let pe=function(R){const M=Pt[R];if(M!==void 0)return Jx(M)}(le),j=ne.message;pe===void 0&&(pe=re.INTERNAL,j="Unknown error status: "+le+" with message "+ne.message),N=!0,A.r_(new fe(pe,j)),b.close()}else me(hn,`RPC '${e}' stream ${a} received:`,Q),A.i_(Q)}}),k(f,yx.STAT_EVENT,D=>{D.stat===Kp.PROXY?me(hn,`RPC '${e}' stream ${a} detected buffering proxy`):D.stat===Kp.NOPROXY&&me(hn,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{A.n_()},0),A}}function Ip(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gh(n){return new tO(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fT{constructor(e,t,i=1e3,a=1.5,l=6e4){this.bi=e,this.timerId=t,this.u_=i,this.c_=a,this.l_=l,this.h_=0,this.P_=null,this.T_=Date.now(),this.reset()}reset(){this.h_=0}I_(){this.h_=this.l_}E_(e){this.cancel();const t=Math.floor(this.h_+this.d_()),i=Math.max(0,Date.now()-this.T_),a=Math.max(0,t-i);a>0&&me("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.h_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.P_=this.bi.enqueueAfterDelay(this.timerId,a,()=>(this.T_=Date.now(),e())),this.h_*=this.c_,this.h_<this.u_&&(this.h_=this.u_),this.h_>this.l_&&(this.h_=this.l_)}A_(){this.P_!==null&&(this.P_.skipDelay(),this.P_=null)}cancel(){this.P_!==null&&(this.P_.cancel(),this.P_=null)}d_(){return(Math.random()-.5)*this.h_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hE="PersistentStream";class mT{constructor(e,t,i,a,l,u,f,p){this.bi=e,this.R_=i,this.V_=a,this.connection=l,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=f,this.listener=p,this.state=0,this.m_=0,this.f_=null,this.g_=null,this.stream=null,this.p_=0,this.y_=new fT(e,t)}w_(){return this.state===1||this.state===5||this.b_()}b_(){return this.state===2||this.state===3}start(){this.p_=0,this.state!==4?this.auth():this.S_()}async stop(){this.w_()&&await this.close(0)}D_(){this.state=0,this.y_.reset()}v_(){this.b_()&&this.f_===null&&(this.f_=this.bi.enqueueAfterDelay(this.R_,6e4,()=>this.C_()))}F_(e){this.M_(),this.stream.send(e)}async C_(){if(this.b_())return this.close(0)}M_(){this.f_&&(this.f_.cancel(),this.f_=null)}x_(){this.g_&&(this.g_.cancel(),this.g_=null)}async close(e,t){this.M_(),this.x_(),this.y_.cancel(),this.m_++,e!==4?this.y_.reset():t&&t.code===re.RESOURCE_EXHAUSTED?(Si(t.toString()),Si("Using maximum backoff delay to prevent overloading the backend."),this.y_.I_()):t&&t.code===re.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.O_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Zo(t)}O_(){}auth(){this.state=1;const e=this.N_(this.m_),t=this.m_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,a])=>{this.m_===t&&this.B_(i,a)},i=>{e(()=>{const a=new fe(re.UNKNOWN,"Fetching auth token failed: "+i.message);return this.L_(a)})})}B_(e,t){const i=this.N_(this.m_);this.stream=this.k_(e,t),this.stream.jo(()=>{i(()=>this.listener.jo())}),this.stream.Jo(()=>{i(()=>(this.state=2,this.g_=this.bi.enqueueAfterDelay(this.V_,1e4,()=>(this.b_()&&(this.state=3),Promise.resolve())),this.listener.Jo()))}),this.stream.Zo(a=>{i(()=>this.L_(a))}),this.stream.onMessage(a=>{i(()=>++this.p_==1?this.q_(a):this.onNext(a))})}S_(){this.state=5,this.y_.E_(async()=>{this.state=0,this.start()})}L_(e){return me(hE,`close with error: ${e}`),this.stream=null,this.close(4,e)}N_(e){return t=>{this.bi.enqueueAndForget(()=>this.m_===e?t():(me(hE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class ZO extends mT{constructor(e,t,i,a,l,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,a,u),this.serializer=l}k_(e,t){return this.connection.a_("Listen",e,t)}q_(e){return this.onNext(e)}onNext(e){this.y_.reset();const t=iO(this.serializer,e),i=function(l){if(!("targetChange"in l))return Ce.min();const u=l.targetChange;return u.targetIds&&u.targetIds.length?Ce.min():u.readTime?Fr(u.readTime):Ce.min()}(e);return this.listener.Q_(t,i)}U_(e){const t={};t.database=ig(this.serializer),t.addTarget=function(l,u){let f;const p=u.target;if(f=Jp(p)?{documents:oO(l,p)}:{query:lO(l,p).gt},f.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){f.resumeToken=nT(l,u.resumeToken);const y=tg(l,u.expectedCount);y!==null&&(f.expectedCount=y)}else if(u.snapshotVersion.compareTo(Ce.min())>0){f.readTime=vh(l,u.snapshotVersion.toTimestamp());const y=tg(l,u.expectedCount);y!==null&&(f.expectedCount=y)}return f}(this.serializer,e);const i=uO(this.serializer,e);i&&(t.labels=i),this.F_(t)}K_(e){const t={};t.database=ig(this.serializer),t.removeTarget=e,this.F_(t)}}class JO extends mT{constructor(e,t,i,a,l,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,a,u),this.serializer=l}get W_(){return this.p_>0}start(){this.lastStreamToken=void 0,super.start()}O_(){this.W_&&this.G_([])}k_(e,t){return this.connection.a_("Write",e,t)}q_(e){return Je(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Je(!e.writeResults||e.writeResults.length===0,55816),this.listener.z_()}onNext(e){Je(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.y_.reset();const t=aO(e.writeResults,e.commitTime),i=Fr(e.commitTime);return this.listener.j_(i,t)}H_(){const e={};e.database=ig(this.serializer),this.F_(e)}G_(e){const t={streamToken:this.lastStreamToken,writes:e.map(i=>sO(this.serializer,i))};this.F_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eD{}class tD extends eD{constructor(e,t,i,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=a,this.J_=!1}Y_(){if(this.J_)throw new fe(re.FAILED_PRECONDITION,"The client has already been terminated.")}Qo(e,t,i,a){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,u])=>this.connection.Qo(e,ng(t,i),a,l,u)).catch(l=>{throw l.name==="FirebaseError"?(l.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new fe(re.UNKNOWN,l.toString())})}Wo(e,t,i,a,l){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,f])=>this.connection.Wo(e,ng(t,i),a,u,f,l)).catch(u=>{throw u.name==="FirebaseError"?(u.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new fe(re.UNKNOWN,u.toString())})}terminate(){this.J_=!0,this.connection.terminate()}}class nD{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.Z_=0,this.X_=null,this.ea=!0}ta(){this.Z_===0&&(this.na("Unknown"),this.X_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.X_=null,this.ra("Backend didn't respond within 10 seconds."),this.na("Offline"),Promise.resolve())))}ia(e){this.state==="Online"?this.na("Unknown"):(this.Z_++,this.Z_>=1&&(this.sa(),this.ra(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.na("Offline")))}set(e){this.sa(),this.Z_=0,e==="Online"&&(this.ea=!1),this.na(e)}na(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ra(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ea?(Si(t),this.ea=!1):me("OnlineStateTracker",t)}sa(){this.X_!==null&&(this.X_.cancel(),this.X_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aa="RemoteStore";class rD{constructor(e,t,i,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.oa=[],this._a=new Map,this.aa=new Set,this.ua=[],this.ca=l,this.ca.vo(u=>{i.enqueueAndForget(async()=>{Ia(this)&&(me(Aa,"Restarting streams for network reachability change."),await async function(p){const y=Ie(p);y.aa.add(4),await tu(y),y.la.set("Unknown"),y.aa.delete(4),await $h(y)}(this))})}),this.la=new nD(i,a)}}async function $h(n){if(Ia(n))for(const e of n.ua)await e(!0)}async function tu(n){for(const e of n.ua)await e(!1)}function pT(n,e){const t=Ie(n);t._a.has(e.targetId)||(t._a.set(e.targetId,e),ry(t)?ny(t):rl(t).b_()&&ty(t,e))}function ey(n,e){const t=Ie(n),i=rl(t);t._a.delete(e),i.b_()&&gT(t,e),t._a.size===0&&(i.b_()?i.v_():Ia(t)&&t.la.set("Unknown"))}function ty(n,e){if(n.ha.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ce.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}rl(n).U_(e)}function gT(n,e){n.ha.Ke(e),rl(n).K_(e)}function ny(n){n.ha=new X4({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>n._a.get(e)||null,Pt:()=>n.datastore.serializer.databaseId}),rl(n).start(),n.la.ta()}function ry(n){return Ia(n)&&!rl(n).w_()&&n._a.size>0}function Ia(n){return Ie(n).aa.size===0}function yT(n){n.ha=void 0}async function iD(n){n.la.set("Online")}async function sD(n){n._a.forEach((e,t)=>{ty(n,e)})}async function aD(n,e){yT(n),ry(n)?(n.la.ia(e),ny(n)):n.la.set("Unknown")}async function oD(n,e,t){if(n.la.set("Online"),e instanceof tT&&e.state===2&&e.cause)try{await async function(a,l){const u=l.cause;for(const f of l.targetIds)a._a.has(f)&&(await a.remoteSyncer.rejectListen(f,u),a._a.delete(f),a.ha.removeTarget(f))}(n,e)}catch(i){me(Aa,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await bh(n,i)}else if(e instanceof Wd?n.ha.Xe(e):e instanceof eT?n.ha.ot(e):n.ha.nt(e),!t.isEqual(Ce.min()))try{const i=await hT(n.localStore);t.compareTo(i)>=0&&await function(l,u){const f=l.ha.It(u);return f.targetChanges.forEach((p,y)=>{if(p.resumeToken.approximateByteSize()>0){const v=l._a.get(y);v&&l._a.set(y,v.withResumeToken(p.resumeToken,u))}}),f.targetMismatches.forEach((p,y)=>{const v=l._a.get(p);if(!v)return;l._a.set(p,v.withResumeToken(ln.EMPTY_BYTE_STRING,v.snapshotVersion)),gT(l,p);const b=new hs(v.target,p,y,v.sequenceNumber);ty(l,b)}),l.remoteSyncer.applyRemoteEvent(f)}(n,t)}catch(i){me(Aa,"Failed to raise snapshot:",i),await bh(n,i)}}async function bh(n,e,t){if(!tl(e))throw e;n.aa.add(1),await tu(n),n.la.set("Offline"),t||(t=()=>hT(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{me(Aa,"Retrying IndexedDB access"),await t(),n.aa.delete(1),await $h(n)})}function vT(n,e){return e().catch(t=>bh(n,t,e))}async function Yh(n){const e=Ie(n),t=Ts(e);let i=e.oa.length>0?e.oa[e.oa.length-1].batchId:Ug;for(;lD(e);)try{const a=await FO(e.localStore,i);if(a===null){e.oa.length===0&&t.v_();break}i=a.batchId,cD(e,a)}catch(a){await bh(e,a)}_T(e)&&bT(e)}function lD(n){return Ia(n)&&n.oa.length<10}function cD(n,e){n.oa.push(e);const t=Ts(n);t.b_()&&t.W_&&t.G_(e.mutations)}function _T(n){return Ia(n)&&!Ts(n).w_()&&n.oa.length>0}function bT(n){Ts(n).start()}async function uD(n){Ts(n).H_()}async function dD(n){const e=Ts(n);for(const t of n.oa)e.G_(t.mutations)}async function hD(n,e,t){const i=n.oa.shift(),a=Yg.from(i,e,t);await vT(n,()=>n.remoteSyncer.applySuccessfulWrite(a)),await Yh(n)}async function fD(n,e){e&&Ts(n).W_&&await async function(i,a){if(function(u){return Q4(u)&&u!==re.ABORTED}(a.code)){const l=i.oa.shift();Ts(i).D_(),await vT(i,()=>i.remoteSyncer.rejectFailedWrite(l.batchId,a)),await Yh(i)}}(n,e),_T(n)&&bT(n)}async function fE(n,e){const t=Ie(n);t.asyncQueue.verifyOperationInProgress(),me(Aa,"RemoteStore received new credentials");const i=Ia(t);t.aa.add(3),await tu(t),i&&t.la.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.aa.delete(3),await $h(t)}async function mD(n,e){const t=Ie(n);e?(t.aa.delete(2),await $h(t)):e||(t.aa.add(2),await tu(t),t.la.set("Unknown"))}function rl(n){return n.Pa||(n.Pa=function(t,i,a){const l=Ie(t);return l.Y_(),new ZO(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)}(n.datastore,n.asyncQueue,{jo:iD.bind(null,n),Jo:sD.bind(null,n),Zo:aD.bind(null,n),Q_:oD.bind(null,n)}),n.ua.push(async e=>{e?(n.Pa.D_(),ry(n)?ny(n):n.la.set("Unknown")):(await n.Pa.stop(),yT(n))})),n.Pa}function Ts(n){return n.Ta||(n.Ta=function(t,i,a){const l=Ie(t);return l.Y_(),new JO(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)}(n.datastore,n.asyncQueue,{jo:()=>Promise.resolve(),Jo:uD.bind(null,n),Zo:fD.bind(null,n),z_:dD.bind(null,n),j_:hD.bind(null,n)}),n.ua.push(async e=>{e?(n.Ta.D_(),await Yh(n)):(await n.Ta.stop(),n.oa.length>0&&(me(Aa,`Stopping write stream with ${n.oa.length} pending writes`),n.oa=[]))})),n.Ta}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iy{constructor(e,t,i,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=a,this.removalCallback=l,this.deferred=new xi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,a,l){const u=Date.now()+i,f=new iy(e,t,u,a,l);return f.start(i),f}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new fe(re.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function sy(n,e){if(Si("AsyncQueue",`${e}: ${n}`),tl(n))return new fe(re.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{static emptySet(e){return new Mo(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||Ee.comparator(t.key,i.key):(t,i)=>Ee.comparator(t.key,i.key),this.keyedMap=xc(),this.sortedSet=new xt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Mo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=i.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Mo;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mE{constructor(){this.Ia=new xt(Ee.comparator)}track(e){const t=e.doc.key,i=this.Ia.get(t);i?e.type!==0&&i.type===3?this.Ia=this.Ia.insert(t,e):e.type===3&&i.type!==1?this.Ia=this.Ia.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.Ia=this.Ia.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.Ia=this.Ia.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.Ia=this.Ia.remove(t):e.type===1&&i.type===2?this.Ia=this.Ia.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.Ia=this.Ia.insert(t,{type:2,doc:e.doc}):Se(63341,{Vt:e,Ea:i}):this.Ia=this.Ia.insert(t,e)}da(){const e=[];return this.Ia.inorderTraversal((t,i)=>{e.push(i)}),e}}class Go{constructor(e,t,i,a,l,u,f,p,y){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=a,this.mutatedKeys=l,this.fromCache=u,this.syncStateChanged=f,this.excludesMetadataChanges=p,this.hasCachedResults=y}static fromInitialDocuments(e,t,i,a,l){const u=[];return t.forEach(f=>{u.push({type:0,doc:f})}),new Go(e,t,Mo.emptySet(t),u,i,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&zh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==i[a].type||!t[a].doc.isEqual(i[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pD{constructor(){this.Aa=void 0,this.Ra=[]}Va(){return this.Ra.some(e=>e.ma())}}class gD{constructor(){this.queries=pE(),this.onlineState="Unknown",this.fa=new Set}terminate(){(function(t,i){const a=Ie(t),l=a.queries;a.queries=pE(),l.forEach((u,f)=>{for(const p of f.Ra)p.onError(i)})})(this,new fe(re.ABORTED,"Firestore shutting down"))}}function pE(){return new Ra(n=>Bx(n),zh)}async function ET(n,e){const t=Ie(n);let i=3;const a=e.query;let l=t.queries.get(a);l?!l.Va()&&e.ma()&&(i=2):(l=new pD,i=e.ma()?0:1);try{switch(i){case 0:l.Aa=await t.onListen(a,!0);break;case 1:l.Aa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(u){const f=sy(u,`Initialization of query '${Co(e.query)}' failed`);return void e.onError(f)}t.queries.set(a,l),l.Ra.push(e),e.ga(t.onlineState),l.Aa&&e.pa(l.Aa)&&ay(t)}async function xT(n,e){const t=Ie(n),i=e.query;let a=3;const l=t.queries.get(i);if(l){const u=l.Ra.indexOf(e);u>=0&&(l.Ra.splice(u,1),l.Ra.length===0?a=e.ma()?0:1:!l.Va()&&e.ma()&&(a=2))}switch(a){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function yD(n,e){const t=Ie(n);let i=!1;for(const a of e){const l=a.query,u=t.queries.get(l);if(u){for(const f of u.Ra)f.pa(a)&&(i=!0);u.Aa=a}}i&&ay(t)}function vD(n,e,t){const i=Ie(n),a=i.queries.get(e);if(a)for(const l of a.Ra)l.onError(t);i.queries.delete(e)}function ay(n){n.fa.forEach(e=>{e.next()})}var og,gE;(gE=og||(og={})).ya="default",gE.Cache="cache";class TT{constructor(e,t,i){this.query=e,this.wa=t,this.ba=!1,this.Sa=null,this.onlineState="Unknown",this.options=i||{}}pa(e){if(!this.options.includeMetadataChanges){const i=[];for(const a of e.docChanges)a.type!==3&&i.push(a);e=new Go(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ba?this.Da(e)&&(this.wa.next(e),t=!0):this.va(e,this.onlineState)&&(this.Ca(e),t=!0),this.Sa=e,t}onError(e){this.wa.error(e)}ga(e){this.onlineState=e;let t=!1;return this.Sa&&!this.ba&&this.va(this.Sa,e)&&(this.Ca(this.Sa),t=!0),t}va(e,t){if(!e.fromCache||!this.ma())return!0;const i=t!=="Offline";return(!this.options.Fa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Da(e){if(e.docChanges.length>0)return!0;const t=this.Sa&&this.Sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Ca(e){e=Go.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ba=!0,this.wa.next(e)}ma(){return this.options.source!==og.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wT{constructor(e){this.key=e}}class AT{constructor(e){this.key=e}}class _D{constructor(e,t){this.query=e,this.qa=t,this.Qa=null,this.hasCachedResults=!1,this.current=!1,this.$a=qe(),this.mutatedKeys=qe(),this.Ua=qx(e),this.Ka=new Mo(this.Ua)}get Wa(){return this.qa}Ga(e,t){const i=t?t.za:new mE,a=t?t.Ka:this.Ka;let l=t?t.mutatedKeys:this.mutatedKeys,u=a,f=!1;const p=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,y=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((v,b)=>{const T=a.get(v),N=Bh(this.query,b)?b:null,A=!!T&&this.mutatedKeys.has(T.key),k=!!N&&(N.hasLocalMutations||this.mutatedKeys.has(N.key)&&N.hasCommittedMutations);let D=!1;T&&N?T.data.isEqual(N.data)?A!==k&&(i.track({type:3,doc:N}),D=!0):this.ja(T,N)||(i.track({type:2,doc:N}),D=!0,(p&&this.Ua(N,p)>0||y&&this.Ua(N,y)<0)&&(f=!0)):!T&&N?(i.track({type:0,doc:N}),D=!0):T&&!N&&(i.track({type:1,doc:T}),D=!0,(p||y)&&(f=!0)),D&&(N?(u=u.add(N),l=k?l.add(v):l.delete(v)):(u=u.delete(v),l=l.delete(v)))}),this.query.limit!==null)for(;u.size>this.query.limit;){const v=this.query.limitType==="F"?u.last():u.first();u=u.delete(v.key),l=l.delete(v.key),i.track({type:1,doc:v})}return{Ka:u,za:i,ys:f,mutatedKeys:l}}ja(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,a){const l=this.Ka;this.Ka=e.Ka,this.mutatedKeys=e.mutatedKeys;const u=e.za.da();u.sort((v,b)=>function(N,A){const k=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Se(20277,{Vt:D})}};return k(N)-k(A)}(v.type,b.type)||this.Ua(v.doc,b.doc)),this.Ha(i),a=a!=null&&a;const f=t&&!a?this.Ja():[],p=this.$a.size===0&&this.current&&!a?1:0,y=p!==this.Qa;return this.Qa=p,u.length!==0||y?{snapshot:new Go(this.query,e.Ka,l,u,e.mutatedKeys,p===0,y,!1,!!i&&i.resumeToken.approximateByteSize()>0),Ya:f}:{Ya:f}}ga(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ka:this.Ka,za:new mE,mutatedKeys:this.mutatedKeys,ys:!1},!1)):{Ya:[]}}Za(e){return!this.qa.has(e)&&!!this.Ka.has(e)&&!this.Ka.get(e).hasLocalMutations}Ha(e){e&&(e.addedDocuments.forEach(t=>this.qa=this.qa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.qa=this.qa.delete(t)),this.current=e.current)}Ja(){if(!this.current)return[];const e=this.$a;this.$a=qe(),this.Ka.forEach(i=>{this.Za(i.key)&&(this.$a=this.$a.add(i.key))});const t=[];return e.forEach(i=>{this.$a.has(i)||t.push(new AT(i))}),this.$a.forEach(i=>{e.has(i)||t.push(new wT(i))}),t}Xa(e){this.qa=e.Ns,this.$a=qe();const t=this.Ga(e.documents);return this.applyChanges(t,!0)}eu(){return Go.fromInitialDocuments(this.query,this.Ka,this.mutatedKeys,this.Qa===0,this.hasCachedResults)}}const oy="SyncEngine";class bD{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class ED{constructor(e){this.key=e,this.tu=!1}}class xD{constructor(e,t,i,a,l,u){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=u,this.nu={},this.ru=new Ra(f=>Bx(f),zh),this.iu=new Map,this.su=new Set,this.ou=new xt(Ee.comparator),this._u=new Map,this.au=new Wg,this.uu={},this.cu=new Map,this.lu=Ho.ir(),this.onlineState="Unknown",this.hu=void 0}get isPrimaryClient(){return this.hu===!0}}async function TD(n,e,t=!0){const i=OT(n);let a;const l=i.ru.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.eu()):a=await ST(i,e,t,!0),a}async function wD(n,e){const t=OT(n);await ST(t,e,!0,!1)}async function ST(n,e,t,i){const a=await HO(n.localStore,qr(e)),l=a.targetId,u=n.sharedClientState.addLocalQueryTarget(l,t);let f;return i&&(f=await AD(n,e,l,u==="current",a.resumeToken)),n.isPrimaryClient&&t&&pT(n.remoteStore,a),f}async function AD(n,e,t,i,a){n.Pu=(b,T,N)=>async function(k,D,$,Q){let U=D.view.Ga($);U.ys&&(U=await lE(k.localStore,D.query,!1).then(({documents:j})=>D.view.Ga(j,U)));const ne=Q&&Q.targetChanges.get(D.targetId),le=Q&&Q.targetMismatches.get(D.targetId)!=null,pe=D.view.applyChanges(U,k.isPrimaryClient,ne,le);return vE(k,D.targetId,pe.Ya),pe.snapshot}(n,b,T,N);const l=await lE(n.localStore,e,!0),u=new _D(e,l.Ns),f=u.Ga(l.documents),p=eu.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",a),y=u.applyChanges(f,n.isPrimaryClient,p);vE(n,t,y.Ya);const v=new bD(e,t,u);return n.ru.set(e,v),n.iu.has(t)?n.iu.get(t).push(e):n.iu.set(t,[e]),y.snapshot}async function SD(n,e,t){const i=Ie(n),a=i.ru.get(e),l=i.iu.get(a.targetId);if(l.length>1)return i.iu.set(a.targetId,l.filter(u=>!zh(u,e))),void i.ru.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(a.targetId),i.sharedClientState.isActiveQueryTarget(a.targetId)||await sg(i.localStore,a.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(a.targetId),t&&ey(i.remoteStore,a.targetId),lg(i,a.targetId)}).catch(el)):(lg(i,a.targetId),await sg(i.localStore,a.targetId,!0))}async function ND(n,e){const t=Ie(n),i=t.ru.get(e),a=t.iu.get(i.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),ey(t.remoteStore,i.targetId))}async function CD(n,e,t){const i=MD(n);try{const a=await function(u,f){const p=Ie(u),y=Bt.now(),v=f.reduce((N,A)=>N.add(A.key),qe());let b,T;return p.persistence.runTransaction("Locally write mutations","readwrite",N=>{let A=Ni(),k=qe();return p.Cs.getEntries(N,v).next(D=>{A=D,A.forEach(($,Q)=>{Q.isValidDocument()||(k=k.add($))})}).next(()=>p.localDocuments.getOverlayedDocuments(N,A)).next(D=>{b=D;const $=[];for(const Q of f){const U=H4(Q,b.get(Q.key).overlayedDocument);U!=null&&$.push(new Rs(Q.key,U,jx(U.value.mapValue),rr.exists(!0)))}return p.mutationQueue.addMutationBatch(N,y,$,f)}).next(D=>{T=D;const $=D.applyToLocalDocumentSet(b,k);return p.documentOverlayCache.saveOverlays(N,D.batchId,$)})}).then(()=>({batchId:T.batchId,changes:Hx(b)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(a.batchId),function(u,f,p){let y=u.uu[u.currentUser.toKey()];y||(y=new xt(ke)),y=y.insert(f,p),u.uu[u.currentUser.toKey()]=y}(i,a.batchId,t),await nu(i,a.changes),await Yh(i.remoteStore)}catch(a){const l=sy(a,"Failed to persist write");t.reject(l)}}async function NT(n,e){const t=Ie(n);try{const i=await BO(t.localStore,e);e.targetChanges.forEach((a,l)=>{const u=t._u.get(l);u&&(Je(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?u.tu=!0:a.modifiedDocuments.size>0?Je(u.tu,14607):a.removedDocuments.size>0&&(Je(u.tu,42227),u.tu=!1))}),await nu(t,i,e)}catch(i){await el(i)}}function yE(n,e,t){const i=Ie(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const a=[];i.ru.forEach((l,u)=>{const f=u.view.ga(e);f.snapshot&&a.push(f.snapshot)}),function(u,f){const p=Ie(u);p.onlineState=f;let y=!1;p.queries.forEach((v,b)=>{for(const T of b.Ra)T.ga(f)&&(y=!0)}),y&&ay(p)}(i.eventManager,e),a.length&&i.nu.Q_(a),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function RD(n,e,t){const i=Ie(n);i.sharedClientState.updateQueryState(e,"rejected",t);const a=i._u.get(e),l=a&&a.key;if(l){let u=new xt(Ee.comparator);u=u.insert(l,mn.newNoDocument(l,Ce.min()));const f=qe().add(l),p=new Hh(Ce.min(),new Map,new xt(ke),u,f);await NT(i,p),i.ou=i.ou.remove(l),i._u.delete(e),ly(i)}else await sg(i.localStore,e,!1).then(()=>lg(i,e,t)).catch(el)}async function ID(n,e){const t=Ie(n),i=e.batch.batchId;try{const a=await zO(t.localStore,e);RT(t,i,null),CT(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await nu(t,a)}catch(a){await el(a)}}async function OD(n,e,t){const i=Ie(n);try{const a=await function(u,f){const p=Ie(u);return p.persistence.runTransaction("Reject batch","readwrite-primary",y=>{let v;return p.mutationQueue.lookupMutationBatch(y,f).next(b=>(Je(b!==null,37113),v=b.keys(),p.mutationQueue.removeMutationBatch(y,b))).next(()=>p.mutationQueue.performConsistencyCheck(y)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(y,v,f)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,v)).next(()=>p.localDocuments.getDocuments(y,v))})}(i.localStore,e);RT(i,e,t),CT(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await nu(i,a)}catch(a){await el(a)}}function CT(n,e){(n.cu.get(e)||[]).forEach(t=>{t.resolve()}),n.cu.delete(e)}function RT(n,e,t){const i=Ie(n);let a=i.uu[i.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),i.uu[i.currentUser.toKey()]=a}}function lg(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.iu.get(e))n.ru.delete(i),t&&n.nu.Tu(i,t);n.iu.delete(e),n.isPrimaryClient&&n.au.Ur(e).forEach(i=>{n.au.containsKey(i)||IT(n,i)})}function IT(n,e){n.su.delete(e.path.canonicalString());const t=n.ou.get(e);t!==null&&(ey(n.remoteStore,t),n.ou=n.ou.remove(e),n._u.delete(t),ly(n))}function vE(n,e,t){for(const i of t)i instanceof wT?(n.au.addReference(i.key,e),DD(n,i)):i instanceof AT?(me(oy,"Document no longer in limbo: "+i.key),n.au.removeReference(i.key,e),n.au.containsKey(i.key)||IT(n,i.key)):Se(19791,{Iu:i})}function DD(n,e){const t=e.key,i=t.path.canonicalString();n.ou.get(t)||n.su.has(i)||(me(oy,"New document in limbo: "+t),n.su.add(i),ly(n))}function ly(n){for(;n.su.size>0&&n.ou.size<n.maxConcurrentLimboResolutions;){const e=n.su.values().next().value;n.su.delete(e);const t=new Ee(ht.fromString(e)),i=n.lu.next();n._u.set(i,new ED(t)),n.ou=n.ou.insert(t,i),pT(n.remoteStore,new hs(qr(Hg(t.path)),i,"TargetPurposeLimboResolution",Vh.le))}}async function nu(n,e,t){const i=Ie(n),a=[],l=[],u=[];i.ru.isEmpty()||(i.ru.forEach((f,p)=>{u.push(i.Pu(p,e,t).then(y=>{var v;if((y||t)&&i.isPrimaryClient){const b=y?!y.fromCache:(v=t==null?void 0:t.targetChanges.get(p.targetId))===null||v===void 0?void 0:v.current;i.sharedClientState.updateQueryState(p.targetId,b?"current":"not-current")}if(y){a.push(y);const b=Zg.Ps(p.targetId,y);l.push(b)}}))}),await Promise.all(u),i.nu.Q_(a),await async function(p,y){const v=Ie(p);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",b=>se.forEach(y,T=>se.forEach(T.ls,N=>v.persistence.referenceDelegate.addReference(b,T.targetId,N)).next(()=>se.forEach(T.hs,N=>v.persistence.referenceDelegate.removeReference(b,T.targetId,N)))))}catch(b){if(!tl(b))throw b;me(Jg,"Failed to update sequence numbers: "+b)}for(const b of y){const T=b.targetId;if(!b.fromCache){const N=v.Ss.get(T),A=N.snapshotVersion,k=N.withLastLimboFreeSnapshotVersion(A);v.Ss=v.Ss.insert(T,k)}}}(i.localStore,l))}async function jD(n,e){const t=Ie(n);if(!t.currentUser.isEqual(e)){me(oy,"User change. New user:",e.toKey());const i=await dT(t.localStore,e);t.currentUser=e,function(l,u){l.cu.forEach(f=>{f.forEach(p=>{p.reject(new fe(re.CANCELLED,u))})}),l.cu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await nu(t,i.Ms)}}function PD(n,e){const t=Ie(n),i=t._u.get(e);if(i&&i.tu)return qe().add(i.key);{let a=qe();const l=t.iu.get(e);if(!l)return a;for(const u of l){const f=t.ru.get(u);a=a.unionWith(f.view.Wa)}return a}}function OT(n){const e=Ie(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=NT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=PD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=RD.bind(null,e),e.nu.Q_=yD.bind(null,e.eventManager),e.nu.Tu=vD.bind(null,e.eventManager),e}function MD(n){const e=Ie(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ID.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=OD.bind(null,e),e}class Eh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Gh(e.databaseInfo.databaseId),this.sharedClientState=this.Au(e),this.persistence=this.Ru(e),await this.persistence.start(),this.localStore=this.Vu(e),this.gcScheduler=this.mu(e,this.localStore),this.indexBackfillerScheduler=this.fu(e,this.localStore)}mu(e,t){return null}fu(e,t){return null}Vu(e){return UO(this.persistence,new kO,e.initialUser,this.serializer)}Ru(e){return new uT(Xg.Ei,this.serializer)}Au(e){return new $O}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Eh.provider={build:()=>new Eh};class kD extends Eh{constructor(e){super(),this.cacheSizeBytes=e}mu(e,t){Je(this.persistence.referenceDelegate instanceof _h,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new EO(i,e.asyncQueue,t)}Ru(e){const t=this.cacheSizeBytes!==void 0?Rn.withCacheSize(this.cacheSizeBytes):Rn.DEFAULT;return new uT(i=>_h.Ei(i,t),this.serializer)}}class cg{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>yE(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=jD.bind(null,this.syncEngine),await mD(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new gD}()}createDatastore(e){const t=Gh(e.databaseInfo.databaseId),i=function(l){return new XO(l)}(e.databaseInfo);return function(l,u,f,p){return new tD(l,u,f,p)}(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return function(i,a,l,u,f){return new rD(i,a,l,u,f)}(this.localStore,this.datastore,e.asyncQueue,t=>yE(this.syncEngine,t,0),function(){return dE.C()?new dE:new YO}())}createSyncEngine(e,t){return function(a,l,u,f,p,y,v){const b=new xD(a,l,u,f,p,y);return v&&(b.hu=!0),b}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(a){const l=Ie(a);me(Aa,"RemoteStore shutting down."),l.aa.add(5),await tu(l),l.ca.shutdown(),l.la.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}cg.provider={build:()=>new cg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DT{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.pu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.pu(this.observer.error,e):Si("Uncaught Error in snapshot listener:",e.toString()))}yu(){this.muted=!0}pu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ws="FirestoreClient";class VD{constructor(e,t,i,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=a,this.user=fn.UNAUTHENTICATED,this.clientId=Tx.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,async u=>{me(ws,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u}),this.appCheckCredentials.start(i,u=>(me(ws,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new xi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=sy(t,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function Op(n,e){n.asyncQueue.verifyOperationInProgress(),me(ws,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(async a=>{i.isEqual(a)||(await dT(e.localStore,a),i=a)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function _E(n,e){n.asyncQueue.verifyOperationInProgress();const t=await LD(n);me(ws,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(i=>fE(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>fE(e.remoteStore,a)),n._onlineComponents=e}async function LD(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){me(ws,"Using user provided OfflineComponentProvider");try{await Op(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(a){return a.name==="FirebaseError"?a.code===re.FAILED_PRECONDITION||a.code===re.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(t))throw t;zo("Error using user provided cache. Falling back to memory cache: "+t),await Op(n,new Eh)}}else me(ws,"Using default OfflineComponentProvider"),await Op(n,new kD(void 0));return n._offlineComponents}async function jT(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(me(ws,"Using user provided OnlineComponentProvider"),await _E(n,n._uninitializedComponentsProvider._online)):(me(ws,"Using default OnlineComponentProvider"),await _E(n,new cg))),n._onlineComponents}function UD(n){return jT(n).then(e=>e.syncEngine)}async function PT(n){const e=await jT(n),t=e.eventManager;return t.onListen=TD.bind(null,e.syncEngine),t.onUnlisten=SD.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=wD.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=ND.bind(null,e.syncEngine),t}function zD(n,e,t={}){const i=new xi;return n.asyncQueue.enqueueAndForget(async()=>function(l,u,f,p,y){const v=new DT({next:T=>{v.yu(),u.enqueueAndForget(()=>xT(l,b));const N=T.docs.has(f);!N&&T.fromCache?y.reject(new fe(re.UNAVAILABLE,"Failed to get document because the client is offline.")):N&&T.fromCache&&p&&p.source==="server"?y.reject(new fe(re.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(T)},error:T=>y.reject(T)}),b=new TT(Hg(f.path),v,{includeMetadataChanges:!0,Fa:!0});return ET(l,b)}(await PT(n),n.asyncQueue,e,t,i)),i.promise}function BD(n,e,t={}){const i=new xi;return n.asyncQueue.enqueueAndForget(async()=>function(l,u,f,p,y){const v=new DT({next:T=>{v.yu(),u.enqueueAndForget(()=>xT(l,b)),T.fromCache&&p.source==="server"?y.reject(new fe(re.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(T)},error:T=>y.reject(T)}),b=new TT(f,v,{includeMetadataChanges:!0,Fa:!0});return ET(l,b)}(await PT(n),n.asyncQueue,e,t,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MT(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bE=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kT(n,e,t){if(!t)throw new fe(re.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function qD(n,e,t,i){if(e===!0&&i===!0)throw new fe(re.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function EE(n){if(!Ee.isDocumentKey(n))throw new fe(re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function xE(n){if(Ee.isDocumentKey(n))throw new fe(re.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Kh(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Se(12329,{type:typeof n})}function pr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new fe(re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Kh(n);throw new fe(re.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function FD(n,e){if(e<=0)throw new fe(re.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VT="firestore.googleapis.com",TE=!0;class wE{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new fe(re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=VT,this.ssl=TE}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:TE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=cT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<_O)throw new fe(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}qD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=MT((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new fe(re.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new fe(re.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new fe(re.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,a){return i.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Qh{constructor(e,t,i,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new wE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new fe(re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new fe(re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new wE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new QI;switch(i.type){case"firstParty":return new JI(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new fe(re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,jh("Firestore",this._settings.isUsingEmulator),this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const i=bE.get(t);i&&(me("ComponentProvider","Removing Datastore"),bE.delete(t),i.terminate())}(this),Promise.resolve()}}function HD(n,e,t,i={}){var a;n=pr(n,Qh);const l=$c(e),u=n._getSettings(),f=Object.assign(Object.assign({},u),{emulatorOptions:n._getEmulatorOptions()}),p=`${e}:${t}`;u.host!==VT&&u.host!==p&&zo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const y=Object.assign(Object.assign({},u),{host:p,ssl:l,emulatorOptions:i});if(!ba(y,f)&&(n._setSettings(y),l&&(N1(`https://${p}`),jh("Firestore",!0)),i.mockUserToken)){let v,b;if(typeof i.mockUserToken=="string")v=i.mockUserToken,b=fn.MOCK_USER;else{v=rC(i.mockUserToken,(a=n._app)===null||a===void 0?void 0:a.options.projectId);const T=i.mockUserToken.sub||i.mockUserToken.user_id;if(!T)throw new fe(re.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");b=new fn(T)}n._authCredentials=new WI(new Ex(v,b))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Is(this.firestore,e,this._query)}}class Tn{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ys(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Tn(this.firestore,e,this._key)}}class ys extends Is{constructor(e,t,i){super(e,t,Hg(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Tn(this.firestore,null,new Ee(e))}withConverter(e){return new ys(this.firestore,e,this._path)}}function gr(n,e,...t){if(n=Ft(n),kT("collection","path",e),n instanceof Qh){const i=ht.fromString(e,...t);return xE(i),new ys(n,null,i)}{if(!(n instanceof Tn||n instanceof ys))throw new fe(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(ht.fromString(e,...t));return xE(i),new ys(n.firestore,null,i)}}function _t(n,e,...t){if(n=Ft(n),arguments.length===1&&(e=Tx.newId()),kT("doc","path",e),n instanceof Qh){const i=ht.fromString(e,...t);return EE(i),new Tn(n,null,new Ee(i))}{if(!(n instanceof Tn||n instanceof ys))throw new fe(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(ht.fromString(e,...t));return EE(i),new Tn(n.firestore,n instanceof ys?n.converter:null,new Ee(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AE="AsyncQueue";class SE{constructor(e=Promise.resolve()){this.Qu=[],this.$u=!1,this.Uu=[],this.Ku=null,this.Wu=!1,this.Gu=!1,this.zu=[],this.y_=new fT(this,"async_queue_retry"),this.ju=()=>{const i=Ip();i&&me(AE,"Visibility state changed to "+i.visibilityState),this.y_.A_()},this.Hu=e;const t=Ip();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.ju)}get isShuttingDown(){return this.$u}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ju(),this.Yu(e)}enterRestrictedMode(e){if(!this.$u){this.$u=!0,this.Gu=e||!1;const t=Ip();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.ju)}}enqueue(e){if(this.Ju(),this.$u)return new Promise(()=>{});const t=new xi;return this.Yu(()=>this.$u&&this.Gu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qu.push(e),this.Zu()))}async Zu(){if(this.Qu.length!==0){try{await this.Qu[0](),this.Qu.shift(),this.y_.reset()}catch(e){if(!tl(e))throw e;me(AE,"Operation failed with retryable error: "+e)}this.Qu.length>0&&this.y_.E_(()=>this.Zu())}}Yu(e){const t=this.Hu.then(()=>(this.Wu=!0,e().catch(i=>{throw this.Ku=i,this.Wu=!1,Si("INTERNAL UNHANDLED ERROR: ",NE(i)),i}).then(i=>(this.Wu=!1,i))));return this.Hu=t,t}enqueueAfterDelay(e,t,i){this.Ju(),this.zu.indexOf(e)>-1&&(t=0);const a=iy.createAndSchedule(this,e,t,i,l=>this.Xu(l));return this.Uu.push(a),a}Ju(){this.Ku&&Se(47125,{ec:NE(this.Ku)})}verifyOperationInProgress(){}async tc(){let e;do e=this.Hu,await e;while(e!==this.Hu)}nc(e){for(const t of this.Uu)if(t.timerId===e)return!0;return!1}rc(e){return this.tc().then(()=>{this.Uu.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this.Uu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.tc()})}sc(e){this.zu.push(e)}Xu(e){const t=this.Uu.indexOf(e);this.Uu.splice(t,1)}}function NE(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Oa extends Qh{constructor(e,t,i,a){super(e,t,i,a),this.type="firestore",this._queue=new SE,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new SE(e),this._firestoreClient=void 0,await e}}}function GD(n,e){const t=typeof n=="object"?n:O1(),i=typeof n=="string"?n:fh,a=Cg(t,"firestore").getImmediate({identifier:i});if(!a._initialized){const l=tC("firestore");l&&HD(a,...l)}return a}function cy(n){if(n._terminated)throw new fe(re.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||$D(n),n._firestoreClient}function $D(n){var e,t,i;const a=n._freezeSettings(),l=function(f,p,y,v){return new m4(f,p,y,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,MT(v.experimentalLongPollingOptions),v.useFetchStreams,v.isUsingEmulator)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,a);n._componentsProvider||!((t=a.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=a.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),n._firestoreClient=new VD(n._authCredentials,n._appCheckCredentials,n._queue,l,n._componentsProvider&&function(f){const p=f==null?void 0:f._online.build();return{_offline:f==null?void 0:f._offline.build(p),_online:p}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o{constructor(e){this._byteString=e}static fromBase64String(e){try{return new $o(ln.fromBase64String(e))}catch(t){throw new fe(re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new $o(ln.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wh{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new fe(re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new on(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uy{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new fe(re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new fe(re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ke(this._lat,e._lat)||ke(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dy{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,a){if(i.length!==a.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==a[l])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YD=/^__.*__$/;class KD{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Rs(e,this.data,this.fieldMask,t,this.fieldTransforms):new Jc(e,this.data,t,this.fieldTransforms)}}class LT{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Rs(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function UT(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Se(40011,{oc:n})}}class hy{constructor(e,t,i,a,l,u){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=a,l===void 0&&this._c(),this.fieldTransforms=l||[],this.fieldMask=u||[]}get path(){return this.settings.path}get oc(){return this.settings.oc}ac(e){return new hy(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}uc(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),a=this.ac({path:i,cc:!1});return a.lc(e),a}hc(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),a=this.ac({path:i,cc:!1});return a._c(),a}Pc(e){return this.ac({path:void 0,cc:!0})}Tc(e){return xh(e,this.settings.methodName,this.settings.Ic||!1,this.path,this.settings.Ec)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}_c(){if(this.path)for(let e=0;e<this.path.length;e++)this.lc(this.path.get(e))}lc(e){if(e.length===0)throw this.Tc("Document fields must not be empty");if(UT(this.oc)&&YD.test(e))throw this.Tc('Document fields cannot begin and end with "__"')}}class QD{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Gh(e)}dc(e,t,i,a=!1){return new hy({oc:e,methodName:t,Ec:i,path:on.emptyPath(),cc:!1,Ic:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Zh(n){const e=n._freezeSettings(),t=Gh(n._databaseId);return new QD(n._databaseId,!!e.ignoreUndefinedProperties,t)}function zT(n,e,t,i,a,l={}){const u=n.dc(l.merge||l.mergeFields?2:0,e,t,a);my("Data must be an object, but it was:",u,i);const f=BT(i,u);let p,y;if(l.merge)p=new Fn(u.fieldMask),y=u.fieldTransforms;else if(l.mergeFields){const v=[];for(const b of l.mergeFields){const T=ug(e,b,t);if(!u.contains(T))throw new fe(re.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);FT(v,T)||v.push(T)}p=new Fn(v),y=u.fieldTransforms.filter(b=>p.covers(b.field))}else p=null,y=u.fieldTransforms;return new KD(new In(f),p,y)}class Jh extends Xh{_toFieldTransform(e){if(e.oc!==2)throw e.oc===1?e.Tc(`${this._methodName}() can only appear at the top level of your update data`):e.Tc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Jh}}class fy extends Xh{_toFieldTransform(e){return new z4(e.path,new Uc)}isEqual(e){return e instanceof fy}}function WD(n,e,t,i){const a=n.dc(1,e,t);my("Data must be an object, but it was:",a,i);const l=[],u=In.empty();Cs(i,(p,y)=>{const v=py(e,p,t);y=Ft(y);const b=a.hc(v);if(y instanceof Jh)l.push(v);else{const T=ru(y,b);T!=null&&(l.push(v),u.set(v,T))}});const f=new Fn(l);return new LT(u,f,a.fieldTransforms)}function XD(n,e,t,i,a,l){const u=n.dc(1,e,t),f=[ug(e,i,t)],p=[a];if(l.length%2!=0)throw new fe(re.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<l.length;T+=2)f.push(ug(e,l[T])),p.push(l[T+1]);const y=[],v=In.empty();for(let T=f.length-1;T>=0;--T)if(!FT(y,f[T])){const N=f[T];let A=p[T];A=Ft(A);const k=u.hc(N);if(A instanceof Jh)y.push(N);else{const D=ru(A,k);D!=null&&(y.push(N),v.set(N,D))}}const b=new Fn(y);return new LT(v,b,u.fieldTransforms)}function ZD(n,e,t,i=!1){return ru(t,n.dc(i?4:3,e))}function ru(n,e){if(qT(n=Ft(n)))return my("Unsupported field value:",e,n),BT(n,e);if(n instanceof Xh)return function(i,a){if(!UT(a.oc))throw a.Tc(`${i._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Tc(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(a);l&&a.fieldTransforms.push(l)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.cc&&e.oc!==4)throw e.Tc("Nested arrays are not supported");return function(i,a){const l=[];let u=0;for(const f of i){let p=ru(f,a.Pc(u));p==null&&(p={nullValue:"NULL_VALUE"}),l.push(p),u++}return{arrayValue:{values:l}}}(n,e)}return function(i,a){if((i=Ft(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return V4(a.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=Bt.fromDate(i);return{timestampValue:vh(a.serializer,l)}}if(i instanceof Bt){const l=new Bt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:vh(a.serializer,l)}}if(i instanceof uy)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof $o)return{bytesValue:nT(a.serializer,i._byteString)};if(i instanceof Tn){const l=a.databaseId,u=i.firestore._databaseId;if(!u.isEqual(l))throw a.Tc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Qg(i.firestore._databaseId||a.databaseId,i._key.path)}}if(i instanceof dy)return function(u,f){return{mapValue:{fields:{[Ox]:{stringValue:Dx},[mh]:{arrayValue:{values:u.toArray().map(y=>{if(typeof y!="number")throw f.Tc("VectorValues must only contain numeric values.");return Gg(f.serializer,y)})}}}}}}(i,a);throw a.Tc(`Unsupported field value: ${Kh(i)}`)}(n,e)}function BT(n,e){const t={};return Ax(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Cs(n,(i,a)=>{const l=ru(a,e.uc(i));l!=null&&(t[i]=l)}),{mapValue:{fields:t}}}function qT(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Bt||n instanceof uy||n instanceof $o||n instanceof Tn||n instanceof Xh||n instanceof dy)}function my(n,e,t){if(!qT(t)||!function(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)}(t)){const i=Kh(t);throw i==="an object"?e.Tc(n+" a custom object"):e.Tc(n+" "+i)}}function ug(n,e,t){if((e=Ft(e))instanceof Wh)return e._internalPath;if(typeof e=="string")return py(n,e);throw xh("Field path arguments must be of type string or ",n,!1,void 0,t)}const JD=new RegExp("[~\\*/\\[\\]]");function py(n,e,t){if(e.search(JD)>=0)throw xh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Wh(...e.split("."))._internalPath}catch{throw xh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function xh(n,e,t,i,a){const l=i&&!i.isEmpty(),u=a!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let p="";return(l||u)&&(p+=" (found",l&&(p+=` in field ${i}`),u&&(p+=` in document ${a}`),p+=")"),new fe(re.INVALID_ARGUMENT,f+n+p)}function FT(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HT{constructor(e,t,i,a,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Tn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new ej(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(ef("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class ej extends HT{data(){return super.data()}}function ef(n,e){return typeof e=="string"?py(n,e):e instanceof Wh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tj(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new fe(re.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class gy{}class yy extends gy{}function Gr(n,e,...t){let i=[];e instanceof gy&&i.push(e),i=i.concat(t),function(l){const u=l.filter(p=>p instanceof vy).length,f=l.filter(p=>p instanceof tf).length;if(u>1||u>0&&f>0)throw new fe(re.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const a of i)n=a._apply(n);return n}class tf extends yy{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new tf(e,t,i)}_apply(e){const t=this._parse(e);return GT(e._query,t),new Is(e.firestore,e.converter,eg(e._query,t))}_parse(e){const t=Zh(e.firestore);return function(l,u,f,p,y,v,b){let T;if(y.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new fe(re.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){RE(b,v);const A=[];for(const k of b)A.push(CE(p,l,k));T={arrayValue:{values:A}}}else T=CE(p,l,b)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||RE(b,v),T=ZD(f,u,b,v==="in"||v==="not-in");return Mt.create(y,v,T)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Wt(n,e,t){const i=e,a=ef("where",n);return tf._create(a,i,t)}class vy extends gy{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new vy(e,t)}_parse(e){const t=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return t.length===1?t[0]:mr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(a,l){let u=a;const f=l.getFlattenedFilters();for(const p of f)GT(u,p),u=eg(u,p)}(e._query,t),new Is(e.firestore,e.converter,eg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class _y extends yy{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new _y(e,t)}_apply(e){const t=function(a,l,u){if(a.startAt!==null)throw new fe(re.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new fe(re.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Lc(l,u)}(e._query,this._field,this._direction);return new Is(e.firestore,e.converter,function(a,l){const u=a.explicitOrderBy.concat([l]);return new nl(a.path,a.collectionGroup,u,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(e._query,t))}}function $r(n,e="asc"){const t=e,i=ef("orderBy",n);return _y._create(i,t)}class by extends yy{constructor(e,t,i){super(),this.type=e,this._limit=t,this._limitType=i}static _create(e,t,i){return new by(e,t,i)}_apply(e){return new Is(e.firestore,e.converter,gh(e._query,this._limit,this._limitType))}}function As(n){return FD("limit",n),by._create("limit",n,"F")}function CE(n,e,t){if(typeof(t=Ft(t))=="string"){if(t==="")throw new fe(re.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!zx(e)&&t.indexOf("/")!==-1)throw new fe(re.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(ht.fromString(t));if(!Ee.isDocumentKey(i))throw new fe(re.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Fb(n,new Ee(i))}if(t instanceof Tn)return Fb(n,t._key);throw new fe(re.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Kh(t)}.`)}function RE(n,e){if(!Array.isArray(n)||n.length===0)throw new fe(re.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function GT(n,e){const t=function(a,l){for(const u of a)for(const f of u.getFlattenedFilters())if(l.indexOf(f.op)>=0)return f.op;return null}(n.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new fe(re.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new fe(re.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class nj{convertValue(e,t="none"){switch(xs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Rt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Es(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Se(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Cs(e,(a,l)=>{i[a]=this.convertValue(l,t)}),i}convertVectorValue(e){var t,i,a;const l=(a=(i=(t=e.fields)===null||t===void 0?void 0:t[mh].arrayValue)===null||i===void 0?void 0:i.values)===null||a===void 0?void 0:a.map(u=>Rt(u.doubleValue));return new dy(l)}convertGeoPoint(e){return new uy(Rt(e.latitude),Rt(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Uh(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Mc(e));default:return null}}convertTimestamp(e){const t=bs(e);return new Bt(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=ht.fromString(e);Je(lT(i),9688,{name:e});const a=new kc(i.get(1),i.get(3)),l=new Ee(i.popFirst(5));return a.isEqual(t)||Si(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $T(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class YT extends HT{constructor(e,t,i,a,l,u){super(e,t,i,a,u),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Xd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(ef("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class Xd extends YT{data(e={}){return super.data(e)}}class rj{constructor(e,t,i,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new wc(a.hasPendingWrites,a.fromCache),this.query=i}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new Xd(this._firestore,this._userDataWriter,i.key,i,new wc(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new fe(re.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(a,l){if(a._snapshot.oldDocs.isEmpty()){let u=0;return a._snapshot.docChanges.map(f=>{const p=new Xd(a._firestore,a._userDataWriter,f.doc.key,f.doc,new wc(a._snapshot.mutatedKeys.has(f.doc.key),a._snapshot.fromCache),a.query.converter);return f.doc,{type:"added",doc:p,oldIndex:-1,newIndex:u++}})}{let u=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(f=>l||f.type!==3).map(f=>{const p=new Xd(a._firestore,a._userDataWriter,f.doc.key,f.doc,new wc(a._snapshot.mutatedKeys.has(f.doc.key),a._snapshot.fromCache),a.query.converter);let y=-1,v=-1;return f.type!==0&&(y=u.indexOf(f.doc.key),u=u.delete(f.doc.key)),f.type!==1&&(u=u.add(f.doc),v=u.indexOf(f.doc.key)),{type:ij(f.type),doc:p,oldIndex:y,newIndex:v}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function ij(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Se(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wn(n){n=pr(n,Tn);const e=pr(n.firestore,Oa);return zD(cy(e),n._key).then(t=>oj(e,n,t))}class KT extends nj{constructor(e){super(),this.firestore=e}convertBytes(e){return new $o(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Tn(this.firestore,null,t)}}function Os(n){n=pr(n,Is);const e=pr(n.firestore,Oa),t=cy(e),i=new KT(e);return tj(n._query),BD(t,n._query).then(a=>new rj(e,i,n,a))}function Ey(n,e,t){n=pr(n,Tn);const i=pr(n.firestore,Oa),a=$T(n.converter,e,t);return nf(i,[zT(Zh(i),"setDoc",n._key,a,n.converter!==null,t).toMutation(n._key,rr.none())])}function jn(n,e,t,...i){n=pr(n,Tn);const a=pr(n.firestore,Oa),l=Zh(a);let u;return u=typeof(e=Ft(e))=="string"||e instanceof Wh?XD(l,"updateDoc",n._key,e,t,i):WD(l,"updateDoc",n._key,e),nf(a,[u.toMutation(n._key,rr.exists(!0))])}function sj(n){return nf(pr(n.firestore,Oa),[new $g(n._key,rr.none())])}function aj(n,e){const t=pr(n.firestore,Oa),i=_t(n),a=$T(n.converter,e);return nf(t,[zT(Zh(n.firestore),"addDoc",i._key,a,n.converter!==null,{}).toMutation(i._key,rr.exists(!1))]).then(()=>i)}function nf(n,e){return function(i,a){const l=new xi;return i.asyncQueue.enqueueAndForget(async()=>CD(await UD(i),a,l)),l.promise}(cy(n),e)}function oj(n,e,t){const i=t.docs.get(e._key),a=new KT(n);return new YT(n,a,e._key,i,new wc(t.hasPendingWrites,t.fromCache),e.converter)}function ut(){return new fy("serverTimestamp")}(function(e,t=!0){(function(a){Jo=a})(Xo),Lo(new Ea("firestore",(i,{instanceIdentifier:a,options:l})=>{const u=i.getProvider("app").getImmediate(),f=new Oa(new XI(i.getProvider("auth-internal")),new e4(u,i.getProvider("app-check-internal")),function(y,v){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new fe(re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new kc(y.options.projectId,v)}(u,a),u);return l=Object.assign({useFetchStreams:t},l),f._setSettings(l),f},"PUBLIC").setMultipleInstances(!0)),ps(Ob,Db,e),ps(Ob,Db,"esm2017")})();const lj={apiKey:"AIzaSyApEi7CgbADU0urEtkdRBheJubnyEA-qnw",authDomain:"acriventas-poc.firebaseapp.com",databaseURL:"https://acriventas-poc-default-rtdb.firebaseio.com",projectId:"acriventas-poc",storageBucket:"acriventas-poc.firebasestorage.app",messagingSenderId:"718850780341",appId:"1:718850780341:web:aec07ccdad37235dece2fc",measurementId:"G-0DGH1RQX2G"},QT=I1(lj),rf=GI(QT),Qe=GD(QT),cj=async(n,e,t,i="agent",a="")=>{try{if(!a.trim())throw new Error("La dirección de residencia es obligatoria");const u=(await N2(rf,n,e)).user;return await I2(u,{displayName:t}),await Ey(_t(Qe,"users",u.uid),{uid:u.uid,email:n,displayName:t,role:i,address:a.trim(),createdAt:ut(),lastLogin:ut(),updatedAt:ut()}),console.log("Usuario registrado exitosamente con dirección:",a.trim()),u}catch(l){throw console.error("Error al registrar usuario:",l),l}},uj=async(n,e)=>{try{const t=await C2(rf,n,e);return await Ey(_t(Qe,"users",t.user.uid),{lastLogin:ut(),updatedAt:ut()},{merge:!0}),t.user}catch(t){throw console.error("Error al iniciar sesión:",t),t}},dj=async()=>P2(rf),hj=async n=>{try{const e=await wn(_t(Qe,"users",n));return e.exists()?e.data():null}catch(e){throw console.error("Error al obtener datos del usuario:",e),e}},WT=V.createContext(),iu=()=>V.useContext(WT),fj=({children:n})=>{const[e,t]=V.useState(null),[i,a]=V.useState(null),[l,u]=V.useState(!0);V.useEffect(()=>j2(rf,async y=>{if(t(y),y)try{const v=await hj(y.uid);a(v)}catch(v){console.error("Error al cargar detalles del usuario:",v)}else a(null);u(!1)}),[]);const f={currentUser:e,userDetails:i,isAdmin:(i==null?void 0:i.role)==="admin",isAgent:(i==null?void 0:i.role)==="agent",loading:l};return m.jsx(WT.Provider,{value:f,children:!l&&n})},mj=()=>{const[n,e]=V.useState(""),[t,i]=V.useState(""),[a,l]=V.useState(""),[u,f]=V.useState(!1),p=An(),y=async v=>{v.preventDefault();try{l(""),f(!0),await uj(n,t),p("/")}catch(b){l("Credenciales incorrectas. Intente nuevamente."),console.error(b)}finally{f(!1)}};return m.jsx("div",{className:"min-h-screen bg-gradient-to-b from-gray-800 to-gray-900 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:m.jsxs("div",{className:"max-w-md w-full space-y-8 bg-white p-10 rounded-xl shadow-2xl",children:[m.jsxs("div",{children:[m.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Sistema de Cobranza Adaptativa"}),m.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Inicie sesión para continuar"})]}),a&&m.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-md",role:"alert",children:m.jsx("span",{className:"block sm:inline",children:a})}),m.jsxs("form",{className:"mt-8 space-y-6",onSubmit:y,children:[m.jsxs("div",{className:"rounded-md space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{htmlFor:"email-address",className:"block text-sm font-medium text-gray-700",children:"Email"}),m.jsx("input",{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,className:"appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Correo electrónico",value:n,onChange:v=>e(v.target.value)})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Contraseña"}),m.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,className:"appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Contraseña",value:t,onChange:v=>i(v.target.value)})]})]}),m.jsx("div",{children:m.jsx("button",{type:"submit",disabled:u,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:u?"Iniciando sesión...":"Iniciar sesión"})}),m.jsx("div",{className:"text-center text-sm",children:m.jsx(Oh,{to:"/register",className:"font-medium text-primary-600 hover:text-primary-500",children:"¿No tiene cuenta? Regístrese aquí"})})]})]})})},pj=()=>{const[n,e]=V.useState({displayName:"",email:"",password:"",passwordConfirm:"",address:""}),[t,i]=V.useState(""),[a,l]=V.useState(!1),u=An(),f=y=>{const{name:v,value:b}=y.target;e(T=>({...T,[v]:b}))},p=async y=>{if(y.preventDefault(),n.password!==n.passwordConfirm)return i("Las contraseñas no coinciden");if(n.password.length<6)return i("La contraseña debe tener al menos 6 caracteres");if(!n.displayName.trim())return i("El nombre completo es obligatorio");if(!n.address.trim())return i("La dirección de residencia es obligatoria");try{i(""),l(!0),await cj(n.email,n.password,n.displayName,"agent",n.address),u("/")}catch(v){console.error("Error al registrar:",v),i(v.code==="auth/email-already-in-use"?"Este correo ya está registrado":v.message||"Error al crear la cuenta. Intente nuevamente.")}finally{l(!1)}};return m.jsx("div",{className:"min-h-screen bg-gradient-to-b from-gray-800 to-gray-900 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:m.jsxs("div",{className:"max-w-md w-full space-y-8 bg-white p-10 rounded-xl shadow-2xl",children:[m.jsxs("div",{children:[m.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Crear nueva cuenta"}),m.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Complete el formulario para registrarse"})]}),t&&m.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:m.jsx("span",{className:"block sm:inline",children:t})}),m.jsxs("form",{className:"mt-8 space-y-6",onSubmit:p,children:[m.jsxs("div",{className:"rounded-md shadow-sm space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{htmlFor:"displayName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre completo *"}),m.jsx("input",{id:"displayName",name:"displayName",type:"text",required:!0,className:"appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-primary-500 focus:border-primary-500 focus:z-10 sm:text-sm",placeholder:"Nombre completo",value:n.displayName,onChange:f})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"email-address",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email *"}),m.jsx("input",{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,className:"appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-primary-500 focus:border-primary-500 focus:z-10 sm:text-sm",placeholder:"Correo electrónico",value:n.email,onChange:f})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"address",className:"block text-sm font-medium text-gray-700 mb-1",children:"Dirección de residencia *"}),m.jsx("textarea",{id:"address",name:"address",rows:"3",required:!0,className:"appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-primary-500 focus:border-primary-500 focus:z-10 sm:text-sm resize-none",placeholder:"Ingrese su dirección completa de residencia",value:n.address,onChange:f}),m.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Incluya dirección completa: calle, número, barrio, ciudad"})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Contraseña *"}),m.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"new-password",required:!0,className:"appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-primary-500 focus:border-primary-500 focus:z-10 sm:text-sm",placeholder:"Contraseña (mínimo 6 caracteres)",value:n.password,onChange:f})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"passwordConfirm",className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirmar contraseña *"}),m.jsx("input",{id:"passwordConfirm",name:"passwordConfirm",type:"password",autoComplete:"new-password",required:!0,className:"appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-primary-500 focus:border-primary-500 focus:z-10 sm:text-sm",placeholder:"Confirmar contraseña",value:n.passwordConfirm,onChange:f})]})]}),m.jsx("div",{children:m.jsx("button",{type:"submit",disabled:a,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed",children:a?m.jsxs("span",{className:"flex items-center",children:[m.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[m.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),m.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Creando cuenta..."]}):"Registrarse"})}),m.jsx("div",{className:"text-center",children:m.jsx(Oh,{to:"/login",className:"text-sm text-primary-600 hover:text-primary-500",children:"¿Ya tiene una cuenta? Inicie sesión"})})]}),m.jsxs("div",{className:"mt-4 text-xs text-gray-500 text-center",children:[m.jsx("p",{className:"mb-2",children:"Al registrarse, usted acepta nuestros términos y condiciones."}),m.jsx("p",{children:"Los campos marcados con * son obligatorios."})]})]})})};var XT={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},IE=va.createContext&&va.createContext(XT),gj=["attr","size","title"];function yj(n,e){if(n==null)return{};var t=vj(n,e),i,a;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(n);for(a=0;a<l.length;a++)i=l[a],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}function vj(n,e){if(n==null)return{};var t={};for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)){if(e.indexOf(i)>=0)continue;t[i]=n[i]}return t}function Th(){return Th=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Th.apply(this,arguments)}function OE(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),t.push.apply(t,i)}return t}function wh(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?OE(Object(t),!0).forEach(function(i){_j(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):OE(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function _j(n,e,t){return e=bj(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function bj(n){var e=Ej(n,"string");return typeof e=="symbol"?e:e+""}function Ej(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function ZT(n){return n&&n.map((e,t)=>va.createElement(e.tag,wh({key:t},e.attr),ZT(e.child)))}function Oi(n){return e=>va.createElement(xj,Th({attr:wh({},n.attr)},e),ZT(n.child))}function xj(n){var e=t=>{var{attr:i,size:a,title:l}=n,u=yj(n,gj),f=a||t.size||"1em",p;return t.className&&(p=t.className),n.className&&(p=(p?p+" ":"")+n.className),va.createElement("svg",Th({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,i,u,{className:p,style:wh(wh({color:n.color||t.color},t.style),n.style),height:f,width:f,xmlns:"http://www.w3.org/2000/svg"}),l&&va.createElement("title",null,l),n.children)};return IE!==void 0?va.createElement(IE.Consumer,null,t=>e(t)):e(XT)}function Tj(n){return Oi({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M496 384H64V80c0-8.84-7.16-16-16-16H16C7.16 64 0 71.16 0 80v336c0 17.67 14.33 32 32 32h464c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16zM464 96H345.94c-21.38 0-32.09 25.85-16.97 40.97l32.4 32.4L288 242.75l-73.37-73.37c-12.5-12.5-32.76-12.5-45.25 0l-68.69 68.69c-6.25 6.25-6.25 16.38 0 22.63l22.62 22.62c6.25 6.25 16.38 6.25 22.63 0L192 237.25l73.37 73.37c12.5 12.5 32.76 12.5 45.25 0l96-96 32.4 32.4c15.12 15.12 40.97 4.41 40.97-16.97V112c.01-8.84-7.15-16-15.99-16z"},child:[]}]})(n)}function wj(n){return Oi({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14-11.1-35.6-30-67.8-54.7-94.6-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7-36.7-8.2-74.3-7.8-109.2 0-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3-24.7 26.7-43.6 58.9-54.7 94.6-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14 11.1 35.6 30 67.8 54.7 94.6 3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7 36.7 8.2 74.3 7.8 109.2 0 5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3 24.7-26.7 43.6-58.9 54.7-94.6 1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z"},child:[]}]})(n)}function Aj(n){return Oi({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M416 192c0-88.4-93.1-160-208-160S0 103.6 0 192c0 34.3 14.1 65.9 38 92-13.4 30.2-35.5 54.2-35.8 54.5-2.2 2.3-2.8 5.7-1.5 8.7S4.8 352 8 352c36.6 0 66.9-12.3 88.7-25 32.2 15.7 70.3 25 111.3 25 114.9 0 208-71.6 208-160zm122 220c23.9-26 38-57.7 38-92 0-66.9-53.5-124.2-129.3-148.1.9 6.6 1.3 13.3 1.3 20.1 0 105.9-107.7 192-240 192-10.8 0-21.3-.8-31.7-1.9C207.8 439.6 281.8 480 368 480c41 0 79.1-9.2 111.3-25 21.8 12.7 52.1 25 88.7 25 3.2 0 6.1-1.9 7.3-4.8 1.3-2.9.7-6.3-1.5-8.7-.3-.3-22.4-24.2-35.8-54.5z"},child:[]}]})(n)}function Sj(n){return Oi({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"},child:[]}]})(n)}function JT(n){return Oi({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(n)}function Nj(n){return Oi({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M32,224H64V416H32A31.96166,31.96166,0,0,1,0,384V256A31.96166,31.96166,0,0,1,32,224Zm512-48V448a64.06328,64.06328,0,0,1-64,64H160a64.06328,64.06328,0,0,1-64-64V176a79.974,79.974,0,0,1,80-80H288V32a32,32,0,0,1,64,0V96H464A79.974,79.974,0,0,1,544,176ZM264,256a40,40,0,1,0-40,40A39.997,39.997,0,0,0,264,256Zm-8,128H192v32h64Zm96,0H288v32h64ZM456,256a40,40,0,1,0-40,40A39.997,39.997,0,0,0,456,256Zm-8,128H384v32h64ZM640,256V384a31.96166,31.96166,0,0,1-32,32H576V224h32A31.96166,31.96166,0,0,1,640,256Z"},child:[]}]})(n)}function ew(n){return Oi({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"},child:[]}]})(n)}function Cj(n){return Oi({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M192 256c61.9 0 112-50.1 112-112S253.9 32 192 32 80 82.1 80 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C51.6 288 0 339.6 0 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zM480 256c53 0 96-43 96-96s-43-96-96-96-96 43-96 96 43 96 96 96zm48 32h-3.8c-13.9 4.8-28.6 8-44.2 8s-30.3-3.2-44.2-8H432c-20.4 0-39.2 5.9-55.7 15.4 24.4 26.3 39.7 61.2 39.7 99.8v38.4c0 2.2-.5 4.3-.6 6.4H592c26.5 0 48-21.5 48-48 0-61.9-50.1-112-112-112z"},child:[]}]})(n)}function Rj(n){return Oi({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M624 208h-64v-64c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v64h-64c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h64v64c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-64h64c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zm-400 48c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(n)}const Ij=()=>{const n=An();return m.jsxs("div",{className:"flex flex-wrap gap-4 mb-8",children:[m.jsxs("button",{onClick:()=>n("/conversation/new"),className:"btn-primary flex items-center gap-2",children:[m.jsx(JT,{})," Iniciar Conversación"]}),m.jsxs("button",{onClick:()=>n("/clients/search"),className:"btn-secondary flex items-center gap-2",children:[m.jsx(ew,{})," Buscar Cliente"]}),m.jsxs("button",{onClick:()=>n("/clients/new"),className:"btn-secondary flex items-center gap-2",children:[m.jsx(Rj,{})," Agregar Cliente"]})]})},tw=6048e5,Oj=864e5,Ud=43200,DE=1440,jE=Symbol.for("constructDateFrom");function Ci(n,e){return typeof n=="function"?n(e):n&&typeof n=="object"&&jE in n?n[jE](e):n instanceof Date?new n.constructor(e):new Date(e)}function Zt(n,e){return Ci(e||n,n)}let Dj={};function su(){return Dj}function qc(n,e){var f,p,y,v;const t=su(),i=(e==null?void 0:e.weekStartsOn)??((p=(f=e==null?void 0:e.locale)==null?void 0:f.options)==null?void 0:p.weekStartsOn)??t.weekStartsOn??((v=(y=t.locale)==null?void 0:y.options)==null?void 0:v.weekStartsOn)??0,a=Zt(n,e==null?void 0:e.in),l=a.getDay(),u=(l<i?7:0)+l-i;return a.setDate(a.getDate()-u),a.setHours(0,0,0,0),a}function Ah(n,e){return qc(n,{...e,weekStartsOn:1})}function nw(n,e){const t=Zt(n,e==null?void 0:e.in),i=t.getFullYear(),a=Ci(t,0);a.setFullYear(i+1,0,4),a.setHours(0,0,0,0);const l=Ah(a),u=Ci(t,0);u.setFullYear(i,0,4),u.setHours(0,0,0,0);const f=Ah(u);return t.getTime()>=l.getTime()?i+1:t.getTime()>=f.getTime()?i:i-1}function Sh(n){const e=Zt(n),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+n-+t}function sf(n,...e){const t=Ci.bind(null,n||e.find(i=>typeof i=="object"));return e.map(t)}function PE(n,e){const t=Zt(n,e==null?void 0:e.in);return t.setHours(0,0,0,0),t}function jj(n,e,t){const[i,a]=sf(t==null?void 0:t.in,n,e),l=PE(i),u=PE(a),f=+l-Sh(l),p=+u-Sh(u);return Math.round((f-p)/Oj)}function Pj(n,e){const t=nw(n,e),i=Ci(n,0);return i.setFullYear(t,0,4),i.setHours(0,0,0,0),Ah(i)}function Zd(n,e){const t=+Zt(n)-+Zt(e);return t<0?-1:t>0?1:t}function Mj(n){return Ci(n,Date.now())}function kj(n){return n instanceof Date||typeof n=="object"&&Object.prototype.toString.call(n)==="[object Date]"}function Vj(n){return!(!kj(n)&&typeof n!="number"||isNaN(+Zt(n)))}function Lj(n,e,t){const[i,a]=sf(t==null?void 0:t.in,n,e),l=i.getFullYear()-a.getFullYear(),u=i.getMonth()-a.getMonth();return l*12+u}function Uj(n){return e=>{const i=(n?Math[n]:Math.trunc)(e);return i===0?0:i}}function zj(n,e){return+Zt(n)-+Zt(e)}function Bj(n,e){const t=Zt(n,e==null?void 0:e.in);return t.setHours(23,59,59,999),t}function qj(n,e){const t=Zt(n,e==null?void 0:e.in),i=t.getMonth();return t.setFullYear(t.getFullYear(),i+1,0),t.setHours(23,59,59,999),t}function Fj(n,e){const t=Zt(n,e==null?void 0:e.in);return+Bj(t,e)==+qj(t,e)}function Hj(n,e,t){const[i,a,l]=sf(t==null?void 0:t.in,n,n,e),u=Zd(a,l),f=Math.abs(Lj(a,l));if(f<1)return 0;a.getMonth()===1&&a.getDate()>27&&a.setDate(30),a.setMonth(a.getMonth()-u*f);let p=Zd(a,l)===-u;Fj(i)&&f===1&&Zd(i,l)===1&&(p=!1);const y=u*(f-+p);return y===0?0:y}function Gj(n,e,t){const i=zj(n,e)/1e3;return Uj(t==null?void 0:t.roundingMethod)(i)}function $j(n,e){const t=Zt(n,e==null?void 0:e.in);return t.setFullYear(t.getFullYear(),0,1),t.setHours(0,0,0,0),t}const Yj={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Kj=(n,e,t)=>{let i;const a=Yj[n];return typeof a=="string"?i=a:e===1?i=a.one:i=a.other.replace("{{count}}",e.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+i:i+" ago":i};function ko(n){return(e={})=>{const t=e.width?String(e.width):n.defaultWidth;return n.formats[t]||n.formats[n.defaultWidth]}}const Qj={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Wj={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Xj={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Zj={date:ko({formats:Qj,defaultWidth:"full"}),time:ko({formats:Wj,defaultWidth:"full"}),dateTime:ko({formats:Xj,defaultWidth:"full"})},Jj={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},eP=(n,e,t,i)=>Jj[n];function Lr(n){return(e,t)=>{const i=t!=null&&t.context?String(t.context):"standalone";let a;if(i==="formatting"&&n.formattingValues){const u=n.defaultFormattingWidth||n.defaultWidth,f=t!=null&&t.width?String(t.width):u;a=n.formattingValues[f]||n.formattingValues[u]}else{const u=n.defaultWidth,f=t!=null&&t.width?String(t.width):n.defaultWidth;a=n.values[f]||n.values[u]}const l=n.argumentCallback?n.argumentCallback(e):e;return a[l]}}const tP={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},nP={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},rP={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},iP={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},sP={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},aP={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},oP=(n,e)=>{const t=Number(n),i=t%100;if(i>20||i<10)switch(i%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},lP={ordinalNumber:oP,era:Lr({values:tP,defaultWidth:"wide"}),quarter:Lr({values:nP,defaultWidth:"wide",argumentCallback:n=>n-1}),month:Lr({values:rP,defaultWidth:"wide"}),day:Lr({values:iP,defaultWidth:"wide"}),dayPeriod:Lr({values:sP,defaultWidth:"wide",formattingValues:aP,defaultFormattingWidth:"wide"})};function Ur(n){return(e,t={})=>{const i=t.width,a=i&&n.matchPatterns[i]||n.matchPatterns[n.defaultMatchWidth],l=e.match(a);if(!l)return null;const u=l[0],f=i&&n.parsePatterns[i]||n.parsePatterns[n.defaultParseWidth],p=Array.isArray(f)?uP(f,b=>b.test(u)):cP(f,b=>b.test(u));let y;y=n.valueCallback?n.valueCallback(p):p,y=t.valueCallback?t.valueCallback(y):y;const v=e.slice(u.length);return{value:y,rest:v}}}function cP(n,e){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&e(n[t]))return t}function uP(n,e){for(let t=0;t<n.length;t++)if(e(n[t]))return t}function rw(n){return(e,t={})=>{const i=e.match(n.matchPattern);if(!i)return null;const a=i[0],l=e.match(n.parsePattern);if(!l)return null;let u=n.valueCallback?n.valueCallback(l[0]):l[0];u=t.valueCallback?t.valueCallback(u):u;const f=e.slice(a.length);return{value:u,rest:f}}}const dP=/^(\d+)(th|st|nd|rd)?/i,hP=/\d+/i,fP={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},mP={any:[/^b/i,/^(a|c)/i]},pP={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},gP={any:[/1/i,/2/i,/3/i,/4/i]},yP={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},vP={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},_P={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},bP={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},EP={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},xP={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},TP={ordinalNumber:rw({matchPattern:dP,parsePattern:hP,valueCallback:n=>parseInt(n,10)}),era:Ur({matchPatterns:fP,defaultMatchWidth:"wide",parsePatterns:mP,defaultParseWidth:"any"}),quarter:Ur({matchPatterns:pP,defaultMatchWidth:"wide",parsePatterns:gP,defaultParseWidth:"any",valueCallback:n=>n+1}),month:Ur({matchPatterns:yP,defaultMatchWidth:"wide",parsePatterns:vP,defaultParseWidth:"any"}),day:Ur({matchPatterns:_P,defaultMatchWidth:"wide",parsePatterns:bP,defaultParseWidth:"any"}),dayPeriod:Ur({matchPatterns:EP,defaultMatchWidth:"any",parsePatterns:xP,defaultParseWidth:"any"})},iw={code:"en-US",formatDistance:Kj,formatLong:Zj,formatRelative:eP,localize:lP,match:TP,options:{weekStartsOn:0,firstWeekContainsDate:1}};function wP(n,e){const t=Zt(n,e==null?void 0:e.in);return jj(t,$j(t))+1}function AP(n,e){const t=Zt(n,e==null?void 0:e.in),i=+Ah(t)-+Pj(t);return Math.round(i/tw)+1}function sw(n,e){var v,b,T,N;const t=Zt(n,e==null?void 0:e.in),i=t.getFullYear(),a=su(),l=(e==null?void 0:e.firstWeekContainsDate)??((b=(v=e==null?void 0:e.locale)==null?void 0:v.options)==null?void 0:b.firstWeekContainsDate)??a.firstWeekContainsDate??((N=(T=a.locale)==null?void 0:T.options)==null?void 0:N.firstWeekContainsDate)??1,u=Ci((e==null?void 0:e.in)||n,0);u.setFullYear(i+1,0,l),u.setHours(0,0,0,0);const f=qc(u,e),p=Ci((e==null?void 0:e.in)||n,0);p.setFullYear(i,0,l),p.setHours(0,0,0,0);const y=qc(p,e);return+t>=+f?i+1:+t>=+y?i:i-1}function SP(n,e){var f,p,y,v;const t=su(),i=(e==null?void 0:e.firstWeekContainsDate)??((p=(f=e==null?void 0:e.locale)==null?void 0:f.options)==null?void 0:p.firstWeekContainsDate)??t.firstWeekContainsDate??((v=(y=t.locale)==null?void 0:y.options)==null?void 0:v.firstWeekContainsDate)??1,a=sw(n,e),l=Ci((e==null?void 0:e.in)||n,0);return l.setFullYear(a,0,i),l.setHours(0,0,0,0),qc(l,e)}function NP(n,e){const t=Zt(n,e==null?void 0:e.in),i=+qc(t,e)-+SP(t,e);return Math.round(i/tw)+1}function rt(n,e){const t=n<0?"-":"",i=Math.abs(n).toString().padStart(e,"0");return t+i}const os={y(n,e){const t=n.getFullYear(),i=t>0?t:1-t;return rt(e==="yy"?i%100:i,e.length)},M(n,e){const t=n.getMonth();return e==="M"?String(t+1):rt(t+1,2)},d(n,e){return rt(n.getDate(),e.length)},a(n,e){const t=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(n,e){return rt(n.getHours()%12||12,e.length)},H(n,e){return rt(n.getHours(),e.length)},m(n,e){return rt(n.getMinutes(),e.length)},s(n,e){return rt(n.getSeconds(),e.length)},S(n,e){const t=e.length,i=n.getMilliseconds(),a=Math.trunc(i*Math.pow(10,t-3));return rt(a,e.length)}},Ao={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},ME={G:function(n,e,t){const i=n.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(i,{width:"abbreviated"});case"GGGGG":return t.era(i,{width:"narrow"});case"GGGG":default:return t.era(i,{width:"wide"})}},y:function(n,e,t){if(e==="yo"){const i=n.getFullYear(),a=i>0?i:1-i;return t.ordinalNumber(a,{unit:"year"})}return os.y(n,e)},Y:function(n,e,t,i){const a=sw(n,i),l=a>0?a:1-a;if(e==="YY"){const u=l%100;return rt(u,2)}return e==="Yo"?t.ordinalNumber(l,{unit:"year"}):rt(l,e.length)},R:function(n,e){const t=nw(n);return rt(t,e.length)},u:function(n,e){const t=n.getFullYear();return rt(t,e.length)},Q:function(n,e,t){const i=Math.ceil((n.getMonth()+1)/3);switch(e){case"Q":return String(i);case"QQ":return rt(i,2);case"Qo":return t.ordinalNumber(i,{unit:"quarter"});case"QQQ":return t.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(i,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(i,{width:"wide",context:"formatting"})}},q:function(n,e,t){const i=Math.ceil((n.getMonth()+1)/3);switch(e){case"q":return String(i);case"qq":return rt(i,2);case"qo":return t.ordinalNumber(i,{unit:"quarter"});case"qqq":return t.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(i,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(i,{width:"wide",context:"standalone"})}},M:function(n,e,t){const i=n.getMonth();switch(e){case"M":case"MM":return os.M(n,e);case"Mo":return t.ordinalNumber(i+1,{unit:"month"});case"MMM":return t.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(i,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(i,{width:"wide",context:"formatting"})}},L:function(n,e,t){const i=n.getMonth();switch(e){case"L":return String(i+1);case"LL":return rt(i+1,2);case"Lo":return t.ordinalNumber(i+1,{unit:"month"});case"LLL":return t.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(i,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(i,{width:"wide",context:"standalone"})}},w:function(n,e,t,i){const a=NP(n,i);return e==="wo"?t.ordinalNumber(a,{unit:"week"}):rt(a,e.length)},I:function(n,e,t){const i=AP(n);return e==="Io"?t.ordinalNumber(i,{unit:"week"}):rt(i,e.length)},d:function(n,e,t){return e==="do"?t.ordinalNumber(n.getDate(),{unit:"date"}):os.d(n,e)},D:function(n,e,t){const i=wP(n);return e==="Do"?t.ordinalNumber(i,{unit:"dayOfYear"}):rt(i,e.length)},E:function(n,e,t){const i=n.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(i,{width:"short",context:"formatting"});case"EEEE":default:return t.day(i,{width:"wide",context:"formatting"})}},e:function(n,e,t,i){const a=n.getDay(),l=(a-i.weekStartsOn+8)%7||7;switch(e){case"e":return String(l);case"ee":return rt(l,2);case"eo":return t.ordinalNumber(l,{unit:"day"});case"eee":return t.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(a,{width:"short",context:"formatting"});case"eeee":default:return t.day(a,{width:"wide",context:"formatting"})}},c:function(n,e,t,i){const a=n.getDay(),l=(a-i.weekStartsOn+8)%7||7;switch(e){case"c":return String(l);case"cc":return rt(l,e.length);case"co":return t.ordinalNumber(l,{unit:"day"});case"ccc":return t.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(a,{width:"narrow",context:"standalone"});case"cccccc":return t.day(a,{width:"short",context:"standalone"});case"cccc":default:return t.day(a,{width:"wide",context:"standalone"})}},i:function(n,e,t){const i=n.getDay(),a=i===0?7:i;switch(e){case"i":return String(a);case"ii":return rt(a,e.length);case"io":return t.ordinalNumber(a,{unit:"day"});case"iii":return t.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(i,{width:"short",context:"formatting"});case"iiii":default:return t.day(i,{width:"wide",context:"formatting"})}},a:function(n,e,t){const a=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(n,e,t){const i=n.getHours();let a;switch(i===12?a=Ao.noon:i===0?a=Ao.midnight:a=i/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(n,e,t){const i=n.getHours();let a;switch(i>=17?a=Ao.evening:i>=12?a=Ao.afternoon:i>=4?a=Ao.morning:a=Ao.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(n,e,t){if(e==="ho"){let i=n.getHours()%12;return i===0&&(i=12),t.ordinalNumber(i,{unit:"hour"})}return os.h(n,e)},H:function(n,e,t){return e==="Ho"?t.ordinalNumber(n.getHours(),{unit:"hour"}):os.H(n,e)},K:function(n,e,t){const i=n.getHours()%12;return e==="Ko"?t.ordinalNumber(i,{unit:"hour"}):rt(i,e.length)},k:function(n,e,t){let i=n.getHours();return i===0&&(i=24),e==="ko"?t.ordinalNumber(i,{unit:"hour"}):rt(i,e.length)},m:function(n,e,t){return e==="mo"?t.ordinalNumber(n.getMinutes(),{unit:"minute"}):os.m(n,e)},s:function(n,e,t){return e==="so"?t.ordinalNumber(n.getSeconds(),{unit:"second"}):os.s(n,e)},S:function(n,e){return os.S(n,e)},X:function(n,e,t){const i=n.getTimezoneOffset();if(i===0)return"Z";switch(e){case"X":return VE(i);case"XXXX":case"XX":return pa(i);case"XXXXX":case"XXX":default:return pa(i,":")}},x:function(n,e,t){const i=n.getTimezoneOffset();switch(e){case"x":return VE(i);case"xxxx":case"xx":return pa(i);case"xxxxx":case"xxx":default:return pa(i,":")}},O:function(n,e,t){const i=n.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+kE(i,":");case"OOOO":default:return"GMT"+pa(i,":")}},z:function(n,e,t){const i=n.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+kE(i,":");case"zzzz":default:return"GMT"+pa(i,":")}},t:function(n,e,t){const i=Math.trunc(+n/1e3);return rt(i,e.length)},T:function(n,e,t){return rt(+n,e.length)}};function kE(n,e=""){const t=n>0?"-":"+",i=Math.abs(n),a=Math.trunc(i/60),l=i%60;return l===0?t+String(a):t+String(a)+e+rt(l,2)}function VE(n,e){return n%60===0?(n>0?"-":"+")+rt(Math.abs(n)/60,2):pa(n,e)}function pa(n,e=""){const t=n>0?"-":"+",i=Math.abs(n),a=rt(Math.trunc(i/60),2),l=rt(i%60,2);return t+a+e+l}const LE=(n,e)=>{switch(n){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},aw=(n,e)=>{switch(n){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},CP=(n,e)=>{const t=n.match(/(P+)(p+)?/)||[],i=t[1],a=t[2];if(!a)return LE(n,e);let l;switch(i){case"P":l=e.dateTime({width:"short"});break;case"PP":l=e.dateTime({width:"medium"});break;case"PPP":l=e.dateTime({width:"long"});break;case"PPPP":default:l=e.dateTime({width:"full"});break}return l.replace("{{date}}",LE(i,e)).replace("{{time}}",aw(a,e))},RP={p:aw,P:CP},IP=/^D+$/,OP=/^Y+$/,DP=["D","DD","YY","YYYY"];function jP(n){return IP.test(n)}function PP(n){return OP.test(n)}function MP(n,e,t){const i=kP(n,e,t);if(console.warn(i),DP.includes(n))throw new RangeError(i)}function kP(n,e,t){const i=n[0]==="Y"?"years":"days of the month";return`Use \`${n.toLowerCase()}\` instead of \`${n}\` (in \`${e}\`) for formatting ${i} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const VP=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,LP=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,UP=/^'([^]*?)'?$/,zP=/''/g,BP=/[a-zA-Z]/;function Vo(n,e,t){var v,b,T,N,A,k,D,$;const i=su(),a=(t==null?void 0:t.locale)??i.locale??iw,l=(t==null?void 0:t.firstWeekContainsDate)??((b=(v=t==null?void 0:t.locale)==null?void 0:v.options)==null?void 0:b.firstWeekContainsDate)??i.firstWeekContainsDate??((N=(T=i.locale)==null?void 0:T.options)==null?void 0:N.firstWeekContainsDate)??1,u=(t==null?void 0:t.weekStartsOn)??((k=(A=t==null?void 0:t.locale)==null?void 0:A.options)==null?void 0:k.weekStartsOn)??i.weekStartsOn??(($=(D=i.locale)==null?void 0:D.options)==null?void 0:$.weekStartsOn)??0,f=Zt(n,t==null?void 0:t.in);if(!Vj(f))throw new RangeError("Invalid time value");let p=e.match(LP).map(Q=>{const U=Q[0];if(U==="p"||U==="P"){const ne=RP[U];return ne(Q,a.formatLong)}return Q}).join("").match(VP).map(Q=>{if(Q==="''")return{isToken:!1,value:"'"};const U=Q[0];if(U==="'")return{isToken:!1,value:qP(Q)};if(ME[U])return{isToken:!0,value:Q};if(U.match(BP))throw new RangeError("Format string contains an unescaped latin alphabet character `"+U+"`");return{isToken:!1,value:Q}});a.localize.preprocessor&&(p=a.localize.preprocessor(f,p));const y={firstWeekContainsDate:l,weekStartsOn:u,locale:a};return p.map(Q=>{if(!Q.isToken)return Q.value;const U=Q.value;(!(t!=null&&t.useAdditionalWeekYearTokens)&&PP(U)||!(t!=null&&t.useAdditionalDayOfYearTokens)&&jP(U))&&MP(U,e,String(n));const ne=ME[U[0]];return ne(f,U,a.localize,y)}).join("")}function qP(n){const e=n.match(UP);return e?e[1].replace(zP,"'"):n}function FP(n,e,t){const i=su(),a=(t==null?void 0:t.locale)??i.locale??iw,l=2520,u=Zd(n,e);if(isNaN(u))throw new RangeError("Invalid time value");const f=Object.assign({},t,{addSuffix:t==null?void 0:t.addSuffix,comparison:u}),[p,y]=sf(t==null?void 0:t.in,...u>0?[e,n]:[n,e]),v=Gj(y,p),b=(Sh(y)-Sh(p))/1e3,T=Math.round((v-b)/60);let N;if(T<2)return t!=null&&t.includeSeconds?v<5?a.formatDistance("lessThanXSeconds",5,f):v<10?a.formatDistance("lessThanXSeconds",10,f):v<20?a.formatDistance("lessThanXSeconds",20,f):v<40?a.formatDistance("halfAMinute",0,f):v<60?a.formatDistance("lessThanXMinutes",1,f):a.formatDistance("xMinutes",1,f):T===0?a.formatDistance("lessThanXMinutes",1,f):a.formatDistance("xMinutes",T,f);if(T<45)return a.formatDistance("xMinutes",T,f);if(T<90)return a.formatDistance("aboutXHours",1,f);if(T<DE){const A=Math.round(T/60);return a.formatDistance("aboutXHours",A,f)}else{if(T<l)return a.formatDistance("xDays",1,f);if(T<Ud){const A=Math.round(T/DE);return a.formatDistance("xDays",A,f)}else if(T<Ud*2)return N=Math.round(T/Ud),a.formatDistance("aboutXMonths",N,f)}if(N=Hj(y,p),N<12){const A=Math.round(T/Ud);return a.formatDistance("xMonths",A,f)}else{const A=N%12,k=Math.trunc(N/12);return A<3?a.formatDistance("aboutXYears",k,f):A<9?a.formatDistance("overXYears",k,f):a.formatDistance("almostXYears",k+1,f)}}function UE(n,e){return FP(n,Mj(n),e)}const HP={lessThanXSeconds:{one:"menos de un segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"medio minuto",lessThanXMinutes:{one:"menos de un minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"alrededor de 1 hora",other:"alrededor de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 día",other:"{{count}} días"},aboutXWeeks:{one:"alrededor de 1 semana",other:"alrededor de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"alrededor de 1 mes",other:"alrededor de {{count}} meses"},xMonths:{one:"1 mes",other:"{{count}} meses"},aboutXYears:{one:"alrededor de 1 año",other:"alrededor de {{count}} años"},xYears:{one:"1 año",other:"{{count}} años"},overXYears:{one:"más de 1 año",other:"más de {{count}} años"},almostXYears:{one:"casi 1 año",other:"casi {{count}} años"}},GP=(n,e,t)=>{let i;const a=HP[n];return typeof a=="string"?i=a:e===1?i=a.one:i=a.other.replace("{{count}}",e.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"en "+i:"hace "+i:i},$P={full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/y"},YP={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},KP={full:"{{date}} 'a las' {{time}}",long:"{{date}} 'a las' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},QP={date:ko({formats:$P,defaultWidth:"full"}),time:ko({formats:YP,defaultWidth:"full"}),dateTime:ko({formats:KP,defaultWidth:"full"})},WP={lastWeek:"'el' eeee 'pasado a la' p",yesterday:"'ayer a la' p",today:"'hoy a la' p",tomorrow:"'mañana a la' p",nextWeek:"eeee 'a la' p",other:"P"},XP={lastWeek:"'el' eeee 'pasado a las' p",yesterday:"'ayer a las' p",today:"'hoy a las' p",tomorrow:"'mañana a las' p",nextWeek:"eeee 'a las' p",other:"P"},ZP=(n,e,t,i)=>e.getHours()!==1?XP[n]:WP[n],JP={narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","después de cristo"]},e6={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1º trimestre","2º trimestre","3º trimestre","4º trimestre"]},t6={narrow:["e","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],wide:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]},n6={narrow:["d","l","m","m","j","v","s"],short:["do","lu","ma","mi","ju","vi","sá"],abbreviated:["dom","lun","mar","mié","jue","vie","sáb"],wide:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"]},r6={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"}},i6={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"}},s6=(n,e)=>Number(n)+"º",a6={ordinalNumber:s6,era:Lr({values:JP,defaultWidth:"wide"}),quarter:Lr({values:e6,defaultWidth:"wide",argumentCallback:n=>Number(n)-1}),month:Lr({values:t6,defaultWidth:"wide"}),day:Lr({values:n6,defaultWidth:"wide"}),dayPeriod:Lr({values:r6,defaultWidth:"wide",formattingValues:i6,defaultFormattingWidth:"wide"})},o6=/^(\d+)(º)?/i,l6=/\d+/i,c6={narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|a\.?\s?e\.?\s?c\.?|d\.?\s?c\.?|e\.?\s?c\.?)/i,wide:/^(antes de cristo|antes de la era com[uú]n|despu[eé]s de cristo|era com[uú]n)/i},u6={any:[/^ac/i,/^dc/i],wide:[/^(antes de cristo|antes de la era com[uú]n)/i,/^(despu[eé]s de cristo|era com[uú]n)/i]},d6={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234](º)? trimestre/i},h6={any:[/1/i,/2/i,/3/i,/4/i]},f6={narrow:/^[efmajsond]/i,abbreviated:/^(ene|feb|mar|abr|may|jun|jul|ago|sep|oct|nov|dic)/i,wide:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i},m6={narrow:[/^e/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^en/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i]},p6={narrow:/^[dlmjvs]/i,short:/^(do|lu|ma|mi|ju|vi|s[áa])/i,abbreviated:/^(dom|lun|mar|mi[ée]|jue|vie|s[áa]b)/i,wide:/^(domingo|lunes|martes|mi[ée]rcoles|jueves|viernes|s[áa]bado)/i},g6={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^do/i,/^lu/i,/^ma/i,/^mi/i,/^ju/i,/^vi/i,/^sa/i]},y6={narrow:/^(a|p|mn|md|(de la|a las) (mañana|tarde|noche))/i,any:/^([ap]\.?\s?m\.?|medianoche|mediodia|(de la|a las) (mañana|tarde|noche))/i},v6={any:{am:/^a/i,pm:/^p/i,midnight:/^mn/i,noon:/^md/i,morning:/mañana/i,afternoon:/tarde/i,evening:/tarde/i,night:/noche/i}},_6={ordinalNumber:rw({matchPattern:o6,parsePattern:l6,valueCallback:function(n){return parseInt(n,10)}}),era:Ur({matchPatterns:c6,defaultMatchWidth:"wide",parsePatterns:u6,defaultParseWidth:"any"}),quarter:Ur({matchPatterns:d6,defaultMatchWidth:"wide",parsePatterns:h6,defaultParseWidth:"any",valueCallback:n=>n+1}),month:Ur({matchPatterns:f6,defaultMatchWidth:"wide",parsePatterns:m6,defaultParseWidth:"any"}),day:Ur({matchPatterns:p6,defaultMatchWidth:"wide",parsePatterns:g6,defaultParseWidth:"any"}),dayPeriod:Ur({matchPatterns:y6,defaultMatchWidth:"any",parsePatterns:v6,defaultParseWidth:"any"})},vs={code:"es",formatDistance:GP,formatLong:QP,formatRelative:ZP,localize:a6,match:_6,options:{weekStartsOn:1,firstWeekContainsDate:1}},sn=[];for(let n=0;n<256;++n)sn.push((n+256).toString(16).slice(1));function b6(n,e=0){return(sn[n[e+0]]+sn[n[e+1]]+sn[n[e+2]]+sn[n[e+3]]+"-"+sn[n[e+4]]+sn[n[e+5]]+"-"+sn[n[e+6]]+sn[n[e+7]]+"-"+sn[n[e+8]]+sn[n[e+9]]+"-"+sn[n[e+10]]+sn[n[e+11]]+sn[n[e+12]]+sn[n[e+13]]+sn[n[e+14]]+sn[n[e+15]]).toLowerCase()}let Dp;const E6=new Uint8Array(16);function x6(){if(!Dp){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Dp=crypto.getRandomValues.bind(crypto)}return Dp(E6)}const T6=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),zE={randomUUID:T6};function xy(n,e,t){var a;if(zE.randomUUID&&!n)return zE.randomUUID();n=n||{};const i=n.random??((a=n.rng)==null?void 0:a.call(n))??x6();if(i.length<16)throw new Error("Random bytes length must be >= 16");return i[6]=i[6]&15|64,i[8]=i[8]&63|128,b6(i)}const ow=gr(Qe,"clients"),w6=async n=>{const e=xy(),t=_t(Qe,"clients",e),i={relationship:n.relationship||50,history:n.history||50,attitude:n.attitude||50,sensitivity:n.sensitivity||50,probability:n.probability||50};return await Ey(t,{id:e,name:n.name,email:n.email||"",phone:n.phone||"",debt:Number(n.debt)||0,createdAt:ut(),updatedAt:ut(),soul:i,status:"active",tags:n.tags||[],notes:n.notes||"",lastContact:null,paymentHistory:[]}),e},Ty=async n=>{const e=await wn(_t(Qe,"clients",n));return e.exists()?{id:e.id,...e.data()}:null},au=async()=>(await Os(Gr(ow,$r("name","asc")))).docs.map(e=>({id:e.id,...e.data()})),A6=async n=>{if(!n||n.trim()==="")return au();const e=n.toLowerCase().trim();return(await Os(ow)).docs.map(a=>({id:a.id,...a.data()})).filter(a=>a.name.toLowerCase().includes(e)||a.email&&a.email.toLowerCase().includes(e)||a.phone&&a.phone.includes(e))},S6=async(n,e)=>{const t=_t(Qe,"clients",n);if(!(await wn(t)).exists())throw new Error("Cliente no encontrado");return delete e.id,delete e.createdAt,await jn(t,{...e,updatedAt:ut()}),n},N6=async(n,e,t=null)=>{const i=_t(Qe,"clients",n),a=await wn(i);if(!a.exists())throw new Error("Cliente no encontrado");const l=a.data(),u={debt:Number(e),updatedAt:ut()};return t&&(u.paymentHistory=[...l.paymentHistory||[],{date:ut(),amount:t.amount,type:t.type||"payment",notes:t.notes||""}]),await jn(i,u),n},C6=async n=>{const e=_t(Qe,"clients",n);await jn(e,{lastContact:ut(),updatedAt:ut()})},Re={GREETING:"greeting",DEBT_NOTIFICATION:"debt_notification",NEGOTIATION:"negotiation",PAYMENT_CONFIRMATION:"payment_confirmation",FAREWELL:"farewell"},Xt={NEW:"new",ACTIVE:"active",INACTIVE:"inactive",CLOSED:"closed"},R6={neutral:{relationship:0,history:0,attitude:0,sensitivity:0,probability:0},accepts_payment:{relationship:5,history:10,attitude:10,sensitivity:-5,probability:20},offers_partial:{relationship:5,history:5,attitude:10,sensitivity:-5,probability:15},reschedule:{relationship:2,history:-5,attitude:5,sensitivity:0,probability:-5},evades:{relationship:-5,history:-5,attitude:-10,sensitivity:5,probability:-10},annoyed:{relationship:-10,history:-5,attitude:-15,sensitivity:10,probability:-15},refuses:{relationship:-20,history:-20,attitude:-20,sensitivity:20,probability:-30},thanks:{relationship:5,history:0,attitude:10,sensitivity:-5,probability:10},no_answer:{relationship:-5,history:-10,attitude:-5,sensitivity:0,probability:-10},confirms_payment:{relationship:10,history:20,attitude:20,sensitivity:-10,probability:30}},I6=async(n,e,t)=>{const i=_t(Qe,"clients",n),a=await wn(i);if(!a.exists())throw new Error("Cliente no encontrado");const l=a.data();await C6(n);const u={clientId:n,clientName:l.name,agentId:e,startedAt:ut(),updatedAt:ut(),status:Xt.NEW,isActive:!0,initialSoul:t||l.soul,currentSoul:t||l.soul,turns:[],nextActionDate:null,summary:null};return(await aj(gr(Qe,"conversations"),u)).id},BE=async(n,e)=>{const t=_t(Qe,"conversations",n),i=await wn(t);if(!i.exists())throw new Error("Conversación no encontrada");const a=i.data();let l={...a.currentSoul},u={relationship:0,history:0,attitude:0,sensitivity:0,probability:0};if(e.event&&e.event!=="neutral"){u=R6[e.event]||u;const b=T=>Math.min(Math.max(T,0),100);l={relationship:b(l.relationship+(u.relationship||0)),history:b(l.history+(u.history||0)),attitude:b(l.attitude+(u.attitude||0)),sensitivity:b(l.sensitivity+(u.sensitivity||0)),probability:b(l.probability+(u.probability||0))}}const f=new Date,p={id:xy(),timestamp:f,timestampMillis:f.getTime(),...e,phase:e.phase||Re.NEGOTIATION,deltas:u,currentSoul:l},y=[...a.turns,p],v=a.status===Xt.NEW?Xt.ACTIVE:a.status;if(await jn(t,{turns:y,currentSoul:l,status:v,isActive:!0,updatedAt:ut()}),e.sender==="client"&&e.event!=="neutral"){const b=_t(Qe,"clients",a.clientId);await jn(b,{soul:l,updatedAt:ut()})}return{turns:y,currentSoul:l}},So=async n=>{const e=await wn(_t(Qe,"conversations",n));if(!e.exists())return null;const t={id:e.id,...e.data()};if(t.clientId)try{const i=await wn(_t(Qe,"clients",t.clientId));i.exists()&&(t.client={id:i.id,...i.data()})}catch(i){console.error("Error al cargar datos del cliente:",i)}return t},wy=async(n,e=5)=>{const t=Gr(gr(Qe,"conversations"),Wt("clientId","==",n),$r("startedAt","desc"),As(e));return(await Os(t)).docs.map(a=>({id:a.id,...a.data()}))},O6=async(n,e)=>{const t=_t(Qe,"conversations",n),i=await wn(t);if(!i.exists())throw new Error("Conversación no encontrada");const a=i.data();if(await jn(t,{status:Xt.CLOSED,isActive:!1,closedAt:ut(),updatedAt:ut(),summary:{...e,createdAt:ut()}}),a.clientId){const l=_t(Qe,"clients",a.clientId);await jn(l,{soul:a.currentSoul,updatedAt:ut()})}return n},D6=async(n=null,e=10)=>{let t;return n?t=Gr(gr(Qe,"conversations"),Wt("status","==",Xt.NEW),Wt("agentId","==",n),$r("startedAt","desc"),As(e)):t=Gr(gr(Qe,"conversations"),Wt("status","==",Xt.NEW),$r("startedAt","desc"),As(e)),(await Os(t)).docs.map(a=>({id:a.id,...a.data()}))},lw=async(n=null,e=10)=>{let t;return n?t=Gr(gr(Qe,"conversations"),Wt("status","==",Xt.ACTIVE),Wt("isActive","==",!0),Wt("agentId","==",n),$r("startedAt","desc"),As(e)):t=Gr(gr(Qe,"conversations"),Wt("status","==",Xt.ACTIVE),Wt("isActive","==",!0),$r("startedAt","desc"),As(e)),(await Os(t)).docs.map(a=>({id:a.id,...a.data()}))},j6=async n=>{const e=Gr(gr(Qe,"conversations"),Wt("clientId","==",n),Wt("isActive","==",!0),Wt("status","in",[Xt.NEW,Xt.ACTIVE]),$r("updatedAt","desc"));return(await Os(e)).docs.map(i=>({id:i.id,...i.data()}))},cw=async(n=null,e=100)=>{let t;return n?t=Gr(gr(Qe,"conversations"),Wt("status","==",Xt.CLOSED),Wt("agentId","==",n),$r("closedAt","desc"),As(e)):t=Gr(gr(Qe,"conversations"),Wt("status","==",Xt.CLOSED),$r("closedAt","desc"),As(e)),(await Os(t)).docs.map(a=>({id:a.id,...a.data()}))},P6=async(n=10)=>{const e=new Date,t=Gr(gr(Qe,"conversations"),Wt("status","==",Xt.ACTIVE),Wt("isActive","==",!0),Wt("nextActionDate",">=",e),$r("nextActionDate","asc"),As(n));return(await Os(t)).docs.map(a=>({id:a.id,...a.data()}))},M6=async(n,e)=>{try{const t=_t(Qe,"conversations",n),i=await wn(t);if(!i.exists())throw new Error("Conversación no encontrada");const a=i.data();if(await jn(t,{currentSoul:e,updatedAt:ut()}),a.clientId){const l=_t(Qe,"clients",a.clientId);await jn(l,{soul:e,updatedAt:ut()})}return e}catch(t){throw console.error("Error al actualizar valores del alma:",t),t}},uw=async n=>{const e=_t(Qe,"conversations",n);if(!(await wn(e)).exists())throw new Error("Conversación no encontrada");return await sj(e),n},qE=async(n,e,t=!0)=>{const i=_t(Qe,"conversations",n);if(!(await wn(i)).exists())throw new Error("Conversación no encontrada");if(!Object.values(Xt).includes(e))throw new Error("Estado de conversación no válido");return await jn(i,{status:e,isActive:t,updatedAt:ut()}),n},k6=async(n,e,t)=>{const i=_t(Qe,"conversations",n),a=await wn(i);if(!a.exists())throw new Error("Conversación no encontrada");const u=a.data().turns.map(f=>f.id===e?{...f,...t,phase:t.phase||f.phase,isEdited:!0,editedAt:new Date}:f);return await jn(i,{turns:u,updatedAt:ut()}),u},V6=async(n,e)=>{const t=_t(Qe,"conversations",n),i=await wn(t);if(!i.exists())throw new Error("Conversación no encontrada");const l=i.data().turns.filter(u=>u.id!==e);return await jn(t,{turns:l,updatedAt:ut()}),l},L6=async(n,e)=>{const t=_t(Qe,"conversations",n),i=await wn(t);if(!i.exists())throw new Error("Conversación no encontrada");const a=i.data(),l=e.deltas||{relationship:0,history:0,attitude:0,sensitivity:0,probability:0};let u={...a.currentSoul};if(e.event&&e.event!=="neutral"&&e.deltas){const v=b=>Math.min(Math.max(b,0),100);u={relationship:v(u.relationship+(l.relationship||0)),history:v(u.history+(l.history||0)),attitude:v(u.attitude+(l.attitude||0)),sensitivity:v(u.sensitivity+(l.sensitivity||0)),probability:v(u.probability+(l.probability||0))}}const f=new Date,p={id:xy(),timestamp:f,timestampMillis:f.getTime(),...e,phase:e.phase||Re.NEGOTIATION,deltas:l,currentSoul:u,isManual:!0},y=[...a.turns,p];if(await jn(t,{turns:y,currentSoul:u,updatedAt:ut()}),e.updateClientSoul&&e.sender==="client"&&e.event!=="neutral"){const v=_t(Qe,"clients",a.clientId);await jn(v,{soul:u,updatedAt:ut()})}return{turns:y,currentSoul:u}},jp=({title:n,conversations:e,isLoading:t,emptyMessage:i="No hay conversaciones disponibles",showClientInfo:a=!0,onConversationDeleted:l=null})=>{const u=An(),[f,p]=V.useState(e),y=async(b,T)=>{if(T.stopPropagation(),window.confirm("¿Está seguro que desea eliminar esta conversación? Esta acción es permanente y no se puede deshacer."))try{await uw(b),l?l(b):p(N=>N.filter(A=>A.id!==b))}catch(N){console.error("Error al eliminar conversación:",N),alert("Error al eliminar la conversación: "+N.message)}};if(t)return m.jsxs("div",{className:"bg-white p-4 rounded-lg shadow mb-6",children:[m.jsx("h2",{className:"text-lg font-semibold mb-4",children:n}),m.jsx("div",{className:"animate-pulse flex space-x-4",children:m.jsxs("div",{className:"flex-1 space-y-4 py-1",children:[m.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("div",{className:"h-4 bg-gray-200 rounded"}),m.jsx("div",{className:"h-4 bg-gray-200 rounded w-5/6"})]})]})})]});const v=l?e:f;return m.jsxs("div",{className:"bg-white p-4 rounded-lg shadow mb-6",children:[m.jsx("h2",{className:"text-lg font-semibold mb-4",children:n}),v.length===0?m.jsx("p",{className:"text-gray-500 text-center py-4",children:i}):m.jsx("ul",{className:"divide-y divide-gray-200",children:v.map(b=>{const N=(b.turns&&b.turns.length>0?b.turns[b.turns.length-1].sender:null)==="client"?"border-l-4 border-green-500":"border-l-4 border-gray-300",A=b.startedAt?UE(new Date(b.startedAt.seconds*1e3),{addSuffix:!0,locale:vs}):"Fecha desconocida";return m.jsxs("li",{className:`p-3 hover:bg-gray-50 cursor-pointer ${N}`,onClick:()=>u(`/conversation/${b.id}`),children:[m.jsxs("div",{className:"flex justify-between",children:[m.jsxs("span",{className:"font-medium",children:[a?b.clientName||"Cliente":"",b.isActive&&m.jsx("span",{className:"ml-2 px-1.5 py-0.5 bg-green-100 text-green-800 text-xs rounded-full",children:"Activa"})]}),m.jsxs("div",{className:"flex items-center space-x-2",children:[m.jsx("span",{className:"text-sm text-gray-500",children:A}),m.jsx("button",{className:"text-red-500 hover:text-red-700",onClick:k=>y(b.id,k),title:"Eliminar conversación",children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),b.turns&&b.turns.length>0&&m.jsx("p",{className:"text-sm text-gray-600 mt-1 truncate",children:b.turns[b.turns.length-1].message}),b.nextActionDate&&m.jsxs("div",{className:"mt-2 text-xs text-blue-600",children:["Próxima acción: ",UE(new Date(b.nextActionDate.seconds*1e3),{addSuffix:!0,locale:vs})]})]},b.id)})})]})},U6=({onFilterChange:n})=>{const[e,t]=V.useState("newest"),i=a=>{t(a),n(a)};return m.jsxs("div",{className:"flex space-x-2 mb-4",children:[m.jsx("button",{className:`px-3 py-1 text-sm rounded-full ${e==="newest"?"bg-primary-100 text-primary-800":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,onClick:()=>i("newest"),children:"Más recientes"}),m.jsx("button",{className:`px-3 py-1 text-sm rounded-full ${e==="upcoming"?"bg-primary-100 text-primary-800":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,onClick:()=>i("upcoming"),children:"Próxima fecha"})]})},z6=()=>{const{currentUser:n}=iu(),[e,t]=V.useState([]),[i,a]=V.useState([]),[l,u]=V.useState([]),[f,p]=V.useState(!0),[y,v]=V.useState("newest");V.useEffect(()=>{(async()=>{p(!0);try{let A;y==="newest"?A=await D6(n.uid):A=await P6();const k=await lw(n.uid),D=await cw(n.uid);t(A),a(k),u(D)}catch(A){console.error("Error al cargar conversaciones:",A)}finally{p(!1)}})()},[n,y]);const b=N=>{v(N)},T=N=>{t(A=>A.filter(k=>k.id!==N)),a(A=>A.filter(k=>k.id!==N)),u(A=>A.filter(k=>k.id!==N))};return m.jsxs("div",{className:"container mx-auto px-4 py-6",children:[m.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Dashboard"}),m.jsx(Ij,{}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[m.jsxs("div",{children:[m.jsxs("div",{className:"mb-2",children:[m.jsx("h2",{className:"text-lg font-semibold",children:"Nuevas Conversaciones"}),m.jsx(U6,{onFilterChange:b})]}),m.jsx(jp,{title:"",conversations:e,isLoading:f,emptyMessage:"No hay nuevas conversaciones",onConversationDeleted:T}),m.jsx(jp,{title:"Conversaciones Activas",conversations:i,isLoading:f,emptyMessage:"No hay conversaciones activas",onConversationDeleted:T})]}),m.jsx("div",{children:m.jsx(jp,{title:"Historial de Conversaciones",conversations:l,isLoading:f,emptyMessage:"No hay conversaciones en el historial",onConversationDeleted:T})})]})]})},Yo=({initialValues:n,onChange:e,readOnly:t=!1})=>{const[i,a]=V.useState({relationship:50,history:50,attitude:50,sensitivity:50,probability:50,...n});V.useEffect(()=>{n&&a({relationship:50,history:50,attitude:50,sensitivity:50,probability:50,...n})},[n]);const l=(p,y)=>{const v={...i,[p]:parseInt(y,10)};a(v),e&&e(v)},u=p=>p<30?"bg-red-500":p<50?"bg-orange-500":p<70?"bg-yellow-500":"bg-green-500",f=(p,y,v)=>m.jsxs("div",{className:"mb-6",children:[m.jsxs("div",{className:"flex justify-between items-center mb-2",children:[m.jsx("label",{className:"text-sm font-medium text-gray-700",children:p}),m.jsx("span",{className:`px-2 py-1 rounded-full text-white text-xs font-medium ${u(i[y])}`,children:i[y]})]}),m.jsx("input",{type:"range",min:"0",max:"100",step:"1",value:i[y],onChange:b=>l(y,b.target.value),disabled:t,className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"}),m.jsx("p",{className:"mt-1 text-sm text-gray-500",children:v})]});return m.jsxs("div",{className:"space-y-2",children:[f("Relación/Cercanía","relationship","Indica cuán cercana es la relación con el cliente."),f("Historial de Pago","history","Nivel de cumplimiento de pagos en el pasado."),f("Actitud en la Llamada","attitude","Disposición emocional del cliente en la conversación."),f("Sensibilidad a Presión","sensitivity","Nivel de reacción negativa a la insistencia o tono de urgencia."),f("Probabilidad de Pago","probability","Estimación de si pagará pronto.")]})},B6=()=>{const{clientId:n}=Eg(),e=An(),[t,i]=V.useState(null),[a,l]=V.useState([]),[u,f]=V.useState([]),[p,y]=V.useState(!0),[v,b]=V.useState(!1),[T,N]=V.useState(null);V.useEffect(()=>{(async()=>{try{y(!0);const ne=await Ty(n);i(ne),N(ne);const le=await j6(n),pe=await wy(n,10);l(le);const j=pe.filter(C=>!C.isActive);f(j)}catch(ne){console.error("Error al cargar datos del cliente:",ne)}finally{y(!1)}})()},[n]);const A=U=>{const{name:ne,value:le}=U.target;N(pe=>({...pe,[ne]:ne==="debt"?parseFloat(le)||0:le}))},k=U=>{N(ne=>({...ne,soul:U}))},D=async U=>{U.preventDefault();try{y(!0),await S6(n,{name:T.name,email:T.email,phone:T.phone,notes:T.notes,soul:T.soul}),t.debt!==T.debt&&await N6(n,T.debt),i(T),b(!1)}catch(ne){console.error("Error al actualizar cliente:",ne)}finally{y(!1)}},$=()=>{e(`/conversation/new/${n}`)},Q=U=>{if(!U)return"N/A";const ne=new Date(U.seconds*1e3);return Vo(ne,"PPP",{locale:vs})};return p&&!t?m.jsx("div",{className:"container mx-auto px-4 py-6",children:m.jsxs("div",{className:"animate-pulse",children:[m.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-6"}),m.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-4"}),m.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-4"}),m.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/3 mb-4"})]})}):t?m.jsxs("div",{className:"container mx-auto px-4 py-6",children:[m.jsxs("div",{className:"flex justify-between items-center mb-6",children:[m.jsx("h1",{className:"text-2xl font-bold",children:t.name}),m.jsx("div",{className:"flex gap-2",children:v?m.jsx("button",{className:"btn-secondary",onClick:()=>{N(t),b(!1)},children:"Cancelar Edición"}):m.jsxs(m.Fragment,{children:[m.jsx("button",{className:"btn-secondary",onClick:()=>b(!0),children:"Editar"}),m.jsx("button",{className:"btn-primary",onClick:$,children:"Nueva Conversación"})]})})]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[m.jsxs("div",{className:"md:col-span-2",children:[v?m.jsxs("form",{onSubmit:D,className:"bg-white rounded-lg shadow p-6",children:[m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"name",className:"label",children:"Nombre completo"}),m.jsx("input",{type:"text",id:"name",name:"name",className:"input",value:T.name,onChange:A,required:!0})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"email",className:"label",children:"Email"}),m.jsx("input",{type:"email",id:"email",name:"email",className:"input",value:T.email,onChange:A})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"phone",className:"label",children:"Teléfono"}),m.jsx("input",{type:"text",id:"phone",name:"phone",className:"input",value:T.phone,onChange:A,required:!0})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"debt",className:"label",children:"Monto de deuda"}),m.jsx("input",{type:"number",id:"debt",name:"debt",className:"input",value:T.debt,onChange:A,required:!0})]}),m.jsxs("div",{className:"form-group md:col-span-2",children:[m.jsx("label",{htmlFor:"notes",className:"label",children:"Notas"}),m.jsx("textarea",{id:"notes",name:"notes",rows:"3",className:"input",value:T.notes,onChange:A})]})]}),m.jsxs("div",{className:"mt-6",children:[m.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Variables del Alma"}),m.jsx(Yo,{initialValues:T.soul,onChange:k,readOnly:!1}),m.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Ajuste las variables de relación con el cliente según su conocimiento actual."})]}),m.jsx("div",{className:"flex justify-end mt-6",children:m.jsx("button",{type:"submit",className:"btn-primary",disabled:p,children:p?"Guardando...":"Guardar Cambios"})})]}):m.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-y-4",children:[m.jsxs("div",{children:[m.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Email"}),m.jsx("p",{children:t.email||"No disponible"})]}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Teléfono"}),m.jsx("p",{children:t.phone||"No disponible"})]}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Monto de deuda"}),m.jsxs("p",{className:"text-xl font-semibold text-red-600",children:["$",t.debt.toLocaleString("es-CO")]})]}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Último contacto"}),m.jsx("p",{children:t.lastContact?Q(t.lastContact):"Sin contacto reciente"})]}),t.notes&&m.jsxs("div",{className:"md:col-span-2 mt-4",children:[m.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"Notas"}),m.jsx("p",{className:"text-gray-700 whitespace-pre-line",children:t.notes})]})]})}),m.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mt-6",children:[m.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Conversaciones Activas"}),a.length===0?m.jsx("p",{className:"text-gray-500 text-center py-4",children:"No hay conversaciones activas con este cliente."}):m.jsx("ul",{className:"divide-y divide-gray-200",children:a.map(U=>{const ne=U.startedAt?Vo(new Date(U.startedAt.seconds*1e3),"PPp",{locale:vs}):"Fecha desconocida",le=U.turns&&U.turns.length>0?U.turns[U.turns.length-1]:null;return m.jsxs("li",{className:"py-3 cursor-pointer hover:bg-gray-50",onClick:()=>e(`/conversation/${U.id}`),children:[m.jsxs("div",{className:"flex justify-between",children:[m.jsxs("span",{className:"font-medium",children:["Conversación del ",ne]}),m.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Activa"})]}),le&&m.jsxs("p",{className:"text-sm text-gray-600 mt-1 truncate",children:[m.jsx("span",{className:"font-medium",children:le.sender==="agent"?"Agente: ":"Cliente: "}),le.message]})]},U.id)})}),m.jsx("div",{className:"mt-4",children:m.jsx("button",{className:"btn-primary",onClick:$,children:"Iniciar Nueva Conversación"})})]}),m.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mt-6",children:[m.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Historial de Conversaciones"}),u.length===0?m.jsx("p",{className:"text-gray-500 text-center py-4",children:"No hay conversaciones en el historial."}):m.jsx("ul",{className:"divide-y divide-gray-200",children:u.map(U=>{const ne=U.startedAt?Vo(new Date(U.startedAt.seconds*1e3),"PPp",{locale:vs}):"Fecha desconocida",le=U.turns&&U.turns.length>0?U.turns[U.turns.length-1]:null;return m.jsxs("li",{className:"py-3 cursor-pointer hover:bg-gray-50",onClick:()=>e(`/conversation/${U.id}`),children:[m.jsxs("div",{className:"flex justify-between",children:[m.jsxs("span",{className:"font-medium",children:["Conversación del ",ne]}),m.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${U.status==="closed"?"bg-gray-100 text-gray-800":"bg-blue-100 text-blue-800"}`,children:U.status==="closed"?"Finalizada":"Inactiva"})]}),le&&m.jsxs("p",{className:"text-sm text-gray-600 mt-1 truncate",children:[m.jsx("span",{className:"font-medium",children:le.sender==="agent"?"Agente: ":"Cliente: "}),le.message]}),U.summary&&m.jsxs("div",{className:"mt-1 text-xs",children:[m.jsx("span",{className:"text-gray-500",children:"Resultado: "}),m.jsx("span",{className:"font-medium",children:U.summary.result})]})]},U.id)})})]})]}),m.jsx("div",{children:m.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[m.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Variables del Alma"}),m.jsx(Yo,{initialValues:v?T.soul:t.soul,onChange:v?k:null,readOnly:!v}),m.jsxs("div",{className:"mt-4 text-sm text-gray-500",children:[m.jsx("p",{children:"Estas variables representan la disposición y relación del cliente, y se ajustan automáticamente durante las conversaciones."}),m.jsx("p",{className:"mt-2",children:'Para modificar estos valores, utilice el botón "Editar" en la parte superior.'})]})]})})]})]}):m.jsxs("div",{className:"container mx-auto px-4 py-6",children:[m.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:[m.jsx("strong",{className:"font-bold",children:"Error:"}),m.jsx("span",{className:"block sm:inline",children:" No se pudo encontrar el cliente."})]}),m.jsx("button",{className:"btn-secondary mt-4",onClick:()=>e(-1),children:"Volver"})]})},q6=()=>{const n=An(),[e,t]=V.useState(""),[i,a]=V.useState([]),[l,u]=V.useState(!1),[f,p]=V.useState(!1),y=async v=>{if(v.preventDefault(),!!e.trim()){u(!0),p(!0);try{const b=await A6(e);a(b)}catch(b){console.error("Error al buscar clientes:",b)}finally{u(!1)}}};return m.jsxs("div",{className:"container mx-auto px-4 py-6",children:[m.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Buscar Cliente"}),m.jsx("form",{onSubmit:y,className:"mb-6",children:m.jsxs("div",{className:"flex gap-2",children:[m.jsx("input",{type:"text",className:"input flex-grow",placeholder:"Nombre, teléfono o email del cliente",value:e,onChange:v=>t(v.target.value)}),m.jsx("button",{type:"submit",className:"btn-primary",disabled:l,children:l?"Buscando...":"Buscar"})]})}),m.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[m.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Resultados"}),l?m.jsxs("div",{className:"animate-pulse space-y-4 py-4",children:[m.jsx("div",{className:"h-5 bg-gray-200 rounded w-3/4"}),m.jsx("div",{className:"h-5 bg-gray-200 rounded w-1/2"}),m.jsx("div",{className:"h-5 bg-gray-200 rounded w-5/6"})]}):i.length===0?m.jsx("p",{className:"text-gray-500 text-center py-4",children:f?"No se encontraron resultados. Intente con otros términos de búsqueda.":"Ingrese un término de búsqueda para encontrar clientes."}):m.jsx("ul",{className:"divide-y divide-gray-200",children:i.map(v=>m.jsxs("li",{className:"py-3 hover:bg-gray-50 cursor-pointer",onClick:()=>n(`/clients/${v.id}`),children:[m.jsxs("div",{className:"flex justify-between",children:[m.jsx("span",{className:"font-medium",children:v.name}),m.jsxs("span",{className:"text-red-600 font-medium",children:["$",v.debt.toLocaleString("es-CO")]})]}),m.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:[v.phone," ",v.email&&`| ${v.email}`]}),m.jsxs("div",{className:"flex mt-2 space-x-2",children:[m.jsx("button",{className:"text-sm text-primary-600 hover:text-primary-800",onClick:b=>{b.stopPropagation(),n(`/clients/${v.id}`)},children:"Ver detalles"}),m.jsx("button",{className:"text-sm text-primary-600 hover:text-primary-800",onClick:b=>{b.stopPropagation(),n(`/conversation/new/${v.id}`)},children:"Iniciar conversación"})]})]},v.id))})]}),m.jsx("div",{className:"mt-6",children:m.jsx("button",{className:"btn-secondary",onClick:()=>n(-1),children:"Volver"})})]})},F6=()=>{const n=An(),[e,t]=V.useState({name:"",email:"",phone:"",debt:"",notes:""}),[i,a]=V.useState({relationship:50,history:50,attitude:50,sensitivity:50,probability:50}),[l,u]=V.useState(!1),[f,p]=V.useState(""),y=b=>{const{name:T,value:N}=b.target;t(A=>({...A,[T]:T==="debt"?parseFloat(N)||"":N}))},v=async b=>{if(b.preventDefault(),p(""),!e.name.trim()){p("El nombre del cliente es obligatorio");return}if(!e.phone.trim()){p("El teléfono es obligatorio");return}if(isNaN(e.debt)||e.debt===""){p("Debe ingresar un monto de deuda válido");return}try{u(!0);const T={...e,...i},N=await w6(T);console.log("Cliente creado con ID:",N),n(`/clients/${N}`)}catch(T){console.error("Error al crear el cliente:",T),p("Ocurrió un error al crear el cliente. Por favor, intente nuevamente.")}finally{u(!1)}};return m.jsxs("div",{className:"container mx-auto px-4 py-6",children:[m.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Agregar Nuevo Cliente"}),f&&m.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-6",role:"alert",children:m.jsx("span",{className:"block sm:inline",children:f})}),m.jsxs("form",{onSubmit:v,className:"bg-white rounded-lg shadow p-6",children:[m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"name",className:"label",children:"Nombre completo *"}),m.jsx("input",{type:"text",id:"name",name:"name",className:"input",value:e.name,onChange:y,required:!0})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"email",className:"label",children:"Email"}),m.jsx("input",{type:"email",id:"email",name:"email",className:"input",value:e.email,onChange:y})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"phone",className:"label",children:"Teléfono *"}),m.jsx("input",{type:"text",id:"phone",name:"phone",className:"input",value:e.phone,onChange:y,required:!0})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"debt",className:"label",children:"Monto de deuda *"}),m.jsx("input",{type:"number",id:"debt",name:"debt",className:"input",value:e.debt,onChange:y,required:!0})]}),m.jsxs("div",{className:"form-group md:col-span-2",children:[m.jsx("label",{htmlFor:"notes",className:"label",children:"Notas"}),m.jsx("textarea",{id:"notes",name:"notes",rows:"3",className:"input",value:e.notes,onChange:y})]})]}),m.jsx("h3",{className:"text-lg font-semibold mt-8 mb-4",children:"Variables del Alma del Cliente"}),m.jsx(Yo,{initialValues:i,onChange:a}),m.jsxs("div",{className:"flex justify-end gap-4 mt-8",children:[m.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>n(-1),disabled:l,children:"Cancelar"}),m.jsx("button",{type:"submit",className:"btn-primary",disabled:l,children:l?"Guardando...":"Guardar Cliente"})]})]})]})},H6=()=>{const n=An(),[e,t]=V.useState([]),[i,a]=V.useState(!0),[l,u]=V.useState("");V.useEffect(()=>{(async()=>{try{const y=await au();t(y)}catch(y){console.error("Error al cargar clientes:",y)}finally{a(!1)}})()},[]);const f=e.filter(p=>p.name.toLowerCase().includes(l.toLowerCase())||p.email.toLowerCase().includes(l.toLowerCase())||p.phone.includes(l));return m.jsxs("div",{className:"container mx-auto px-4 py-6",children:[m.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Seleccionar Cliente para Conversación"}),m.jsx("div",{className:"mb-6",children:m.jsx("input",{type:"text",className:"input",placeholder:"Buscar cliente...",value:l,onChange:p=>u(p.target.value)})}),m.jsx("div",{className:"bg-white rounded-lg shadow",children:i?m.jsx("div",{className:"p-4",children:"Cargando clientes..."}):f.length===0?m.jsxs("div",{className:"p-4 text-center",children:[m.jsx("p",{className:"text-gray-500",children:"No se encontraron clientes."}),m.jsx("button",{className:"btn-primary mt-4",onClick:()=>n("/clients/new"),children:"Agregar Nuevo Cliente"})]}):m.jsx("ul",{className:"divide-y divide-gray-200",children:f.map(p=>m.jsxs("li",{className:"p-4 hover:bg-gray-50 cursor-pointer",onClick:()=>n(`/conversation/new/${p.id}`),children:[m.jsxs("div",{className:"flex justify-between",children:[m.jsx("span",{className:"font-medium",children:p.name}),m.jsxs("span",{className:"text-primary-600 font-semibold",children:["$",p.debt.toLocaleString()]})]}),m.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:[p.phone," | ",p.email]})]},p.id))})}),m.jsx("div",{className:"mt-6",children:m.jsx("button",{className:"btn-secondary",onClick:()=>n(-1),children:"Volver"})})]})},G6=()=>{const n=An(),[e,t]=V.useState([]),[i,a]=V.useState(!0),[l,u]=V.useState("");V.useEffect(()=>{(async()=>{try{a(!0);const y=await au();t(y)}catch(y){console.error("Error al cargar clientes:",y)}finally{a(!1)}})()},[]);const f=e.filter(p=>p.name.toLowerCase().includes(l.toLowerCase())||p.email&&p.email.toLowerCase().includes(l.toLowerCase())||p.phone&&p.phone.includes(l));return m.jsxs("div",{className:"container mx-auto px-4 py-6",children:[m.jsxs("div",{className:"flex justify-between items-center mb-6",children:[m.jsx("h1",{className:"text-2xl font-bold",children:"Clientes"}),m.jsxs("div",{className:"flex space-x-2",children:[m.jsxs("button",{className:"btn-primary flex items-center gap-2",onClick:()=>n("/clients/new"),children:[m.jsx(JT,{})," Agregar Cliente"]}),m.jsxs("button",{className:"btn-secondary flex items-center gap-2",onClick:()=>n("/clients/search"),children:[m.jsx(ew,{})," Búsqueda Avanzada"]})]})]}),m.jsx("div",{className:"mb-6",children:m.jsx("input",{type:"text",className:"input",placeholder:"Buscar cliente por nombre, email o teléfono...",value:l,onChange:p=>u(p.target.value)})}),m.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:i?m.jsx("div",{className:"p-4",children:m.jsxs("div",{className:"animate-pulse space-y-4",children:[m.jsx("div",{className:"h-5 bg-gray-200 rounded"}),m.jsx("div",{className:"h-5 bg-gray-200 rounded"}),m.jsx("div",{className:"h-5 bg-gray-200 rounded"})]})}):f.length===0?m.jsxs("div",{className:"p-8 text-center",children:[m.jsx("p",{className:"text-gray-500 mb-4",children:"No se encontraron clientes."}),m.jsx("button",{className:"btn-primary",onClick:()=>n("/clients/new"),children:"Agregar Nuevo Cliente"})]}):m.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[m.jsx("thead",{className:"bg-gray-50",children:m.jsxs("tr",{children:[m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nombre"}),m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contacto"}),m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Deuda"}),m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado del Alma"}),m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),m.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:f.map(p=>m.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>n(`/clients/${p.id}`),children:[m.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:m.jsx("div",{className:"font-medium text-gray-900",children:p.name})}),m.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[m.jsx("div",{className:"text-sm text-gray-500",children:p.phone}),m.jsx("div",{className:"text-sm text-gray-500",children:p.email})]}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:m.jsxs("div",{className:"text-sm font-medium text-red-600",children:["$",p.debt.toLocaleString("es-CO")]})}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:m.jsx("div",{className:"flex space-x-1",children:p.soul&&m.jsxs(m.Fragment,{children:[m.jsxs("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${p.soul.relationship>70?"bg-green-100 text-green-800":p.soul.relationship>40?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:["R:",p.soul.relationship]}),m.jsxs("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${p.soul.probability>70?"bg-green-100 text-green-800":p.soul.probability>40?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:["P:",p.soul.probability]})]})})}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:m.jsx("button",{className:"text-primary-600 hover:text-primary-900 mr-3",onClick:y=>{y.stopPropagation(),n(`/conversation/new/${p.id}`)},children:"Iniciar Conversación"})})]},p.id))})]})})]})},$6=async(n,e,t)=>{const i=n.toLowerCase();let a="neutral";i.includes("pagar")||i.includes("transferir")||i.includes("depositar")?i.includes("completo")||i.includes("todo")?a="accepts_payment":i.includes("parte")||i.includes("parcial")||i.includes("algo")?a="offers_partial":(i.includes("próxima")||i.includes("después")||i.includes("luego"))&&(a="reschedule"):i.includes("gracias")||i.includes("agradezco")?a="thanks":i.includes("ya pagué")||i.includes("realicé el pago")||i.includes("transferí")?a="confirms_payment":i.includes("no puedo")||i.includes("imposible")?a="evades":i.includes("molesto")||i.includes("harto")||i.includes("fastidio")?a="annoyed":(i.includes("no voy a pagar")||i.includes("no pagaré")||i.includes("olvídate"))&&(a="refuses");const l={neutral:{relationship:0,history:0,attitude:0,sensitivity:0,probability:0},accepts_payment:{relationship:5,history:10,attitude:10,sensitivity:-5,probability:20},offers_partial:{relationship:5,history:5,attitude:10,sensitivity:-5,probability:15},reschedule:{relationship:2,history:-5,attitude:5,sensitivity:0,probability:-5},evades:{relationship:-5,history:-5,attitude:-10,sensitivity:5,probability:-10},annoyed:{relationship:-10,history:-5,attitude:-15,sensitivity:10,probability:-15},refuses:{relationship:-20,history:-20,attitude:-20,sensitivity:20,probability:-30},thanks:{relationship:5,history:0,attitude:10,sensitivity:-5,probability:10},no_answer:{relationship:-5,history:-10,attitude:-5,sensitivity:0,probability:-10},confirms_payment:{relationship:10,history:20,attitude:20,sensitivity:-10,probability:30}},u=l[a]||l.neutral;return{eventType:a,deltas:u,explanation:`Evento detectado "${a}" basado en palabras clave como "${i.split(" ").slice(0,3).join(" ")}..."`,confidence:.7}},Y6=async(n,e,t,i)=>{let a="neutral";e.relationship>70?e.sensitivity>70?a="friendly_no_pressure":a="friendly":e.relationship<40&&(e.sensitivity<40?a="formal_direct":a="formal_soft");const l={accepts_payment:{friendly_no_pressure:"¡Excelente noticia! Gracias por tu disposición. Cuando puedas hacer el pago, solo avísame.",friendly:"¡Perfecto! Muchas gracias por tu colaboración. ¿Te envío los datos para el pago?",formal_direct:"Muy bien. Le agradecemos su decisión. Necesitamos que realice el pago antes del fin de semana.",formal_soft:"Gracias por su confirmación. ¿Prefiere que le enviemos los datos bancarios por este medio?",neutral:"Entendido. ¿Desea que le enviemos la información para realizar el pago?"},offers_partial:{friendly_no_pressure:"Agradezco mucho tu esfuerzo por pagar una parte. Cualquier aporte es bienvenido.",friendly:"Gracias por tu disposición. Un pago parcial nos ayuda mucho. ¿Cuándo podrías realizar este abono?",formal_direct:"Tomamos nota de su oferta de pago parcial. ¿Cuándo podríamos esperar el resto del monto?",formal_soft:"Entendemos su situación. El pago parcial es un buen primer paso. ¿Cuándo sería posible?",neutral:"De acuerdo con el pago parcial. ¿Qué monto podría transferir y cuándo?"},default:{friendly_no_pressure:"Entiendo perfectamente. No te preocupes, cuando puedas realizar el pago me avisas.",friendly:"Agradezco que estemos en contacto. ¿Hay algo en lo que pueda ayudarte para facilitar el proceso?",formal_direct:"Necesitamos regularizar su situación. ¿Podría por favor indicarnos una fecha concreta de pago?",formal_soft:"Entendemos que pueden surgir contratiempos. ¿Podría comentarnos cuándo le sería posible realizar el pago?",neutral:"¿Podría por favor indicarnos cuándo podríamos esperar el pago?"}},u=l[i]||l.default;return{responseText:u[a]||u.neutral,explanation:`Respuesta generada usando tono "${a}" basado en Relación: ${e.relationship}, Sensibilidad: ${e.sensitivity}`,confidence:.8}};function dw(n,e){return function(){return n.apply(e,arguments)}}const{toString:K6}=Object.prototype,{getPrototypeOf:Ay}=Object,{iterator:af,toStringTag:hw}=Symbol,of=(n=>e=>{const t=K6.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),vr=n=>(n=n.toLowerCase(),e=>of(e)===n),lf=n=>e=>typeof e===n,{isArray:il}=Array,Fc=lf("undefined");function Q6(n){return n!==null&&!Fc(n)&&n.constructor!==null&&!Fc(n.constructor)&&On(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const fw=vr("ArrayBuffer");function W6(n){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&fw(n.buffer),e}const X6=lf("string"),On=lf("function"),mw=lf("number"),cf=n=>n!==null&&typeof n=="object",Z6=n=>n===!0||n===!1,Jd=n=>{if(of(n)!=="object")return!1;const e=Ay(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(hw in n)&&!(af in n)},J6=vr("Date"),e3=vr("File"),t3=vr("Blob"),n3=vr("FileList"),r3=n=>cf(n)&&On(n.pipe),i3=n=>{let e;return n&&(typeof FormData=="function"&&n instanceof FormData||On(n.append)&&((e=of(n))==="formdata"||e==="object"&&On(n.toString)&&n.toString()==="[object FormData]"))},s3=vr("URLSearchParams"),[a3,o3,l3,c3]=["ReadableStream","Request","Response","Headers"].map(vr),u3=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ou(n,e,{allOwnKeys:t=!1}={}){if(n===null||typeof n>"u")return;let i,a;if(typeof n!="object"&&(n=[n]),il(n))for(i=0,a=n.length;i<a;i++)e.call(null,n[i],i,n);else{const l=t?Object.getOwnPropertyNames(n):Object.keys(n),u=l.length;let f;for(i=0;i<u;i++)f=l[i],e.call(null,n[f],f,n)}}function pw(n,e){e=e.toLowerCase();const t=Object.keys(n);let i=t.length,a;for(;i-- >0;)if(a=t[i],e===a.toLowerCase())return a;return null}const ya=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,gw=n=>!Fc(n)&&n!==ya;function dg(){const{caseless:n}=gw(this)&&this||{},e={},t=(i,a)=>{const l=n&&pw(e,a)||a;Jd(e[l])&&Jd(i)?e[l]=dg(e[l],i):Jd(i)?e[l]=dg({},i):il(i)?e[l]=i.slice():e[l]=i};for(let i=0,a=arguments.length;i<a;i++)arguments[i]&&ou(arguments[i],t);return e}const d3=(n,e,t,{allOwnKeys:i}={})=>(ou(e,(a,l)=>{t&&On(a)?n[l]=dw(a,t):n[l]=a},{allOwnKeys:i}),n),h3=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),f3=(n,e,t,i)=>{n.prototype=Object.create(e.prototype,i),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:e.prototype}),t&&Object.assign(n.prototype,t)},m3=(n,e,t,i)=>{let a,l,u;const f={};if(e=e||{},n==null)return e;do{for(a=Object.getOwnPropertyNames(n),l=a.length;l-- >0;)u=a[l],(!i||i(u,n,e))&&!f[u]&&(e[u]=n[u],f[u]=!0);n=t!==!1&&Ay(n)}while(n&&(!t||t(n,e))&&n!==Object.prototype);return e},p3=(n,e,t)=>{n=String(n),(t===void 0||t>n.length)&&(t=n.length),t-=e.length;const i=n.indexOf(e,t);return i!==-1&&i===t},g3=n=>{if(!n)return null;if(il(n))return n;let e=n.length;if(!mw(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=n[e];return t},y3=(n=>e=>n&&e instanceof n)(typeof Uint8Array<"u"&&Ay(Uint8Array)),v3=(n,e)=>{const i=(n&&n[af]).call(n);let a;for(;(a=i.next())&&!a.done;){const l=a.value;e.call(n,l[0],l[1])}},_3=(n,e)=>{let t;const i=[];for(;(t=n.exec(e))!==null;)i.push(t);return i},b3=vr("HTMLFormElement"),E3=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,i,a){return i.toUpperCase()+a}),FE=(({hasOwnProperty:n})=>(e,t)=>n.call(e,t))(Object.prototype),x3=vr("RegExp"),yw=(n,e)=>{const t=Object.getOwnPropertyDescriptors(n),i={};ou(t,(a,l)=>{let u;(u=e(a,l,n))!==!1&&(i[l]=u||a)}),Object.defineProperties(n,i)},T3=n=>{yw(n,(e,t)=>{if(On(n)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const i=n[t];if(On(i)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},w3=(n,e)=>{const t={},i=a=>{a.forEach(l=>{t[l]=!0})};return il(n)?i(n):i(String(n).split(e)),t},A3=()=>{},S3=(n,e)=>n!=null&&Number.isFinite(n=+n)?n:e;function N3(n){return!!(n&&On(n.append)&&n[hw]==="FormData"&&n[af])}const C3=n=>{const e=new Array(10),t=(i,a)=>{if(cf(i)){if(e.indexOf(i)>=0)return;if(!("toJSON"in i)){e[a]=i;const l=il(i)?[]:{};return ou(i,(u,f)=>{const p=t(u,a+1);!Fc(p)&&(l[f]=p)}),e[a]=void 0,l}}return i};return t(n,0)},R3=vr("AsyncFunction"),I3=n=>n&&(cf(n)||On(n))&&On(n.then)&&On(n.catch),vw=((n,e)=>n?setImmediate:e?((t,i)=>(ya.addEventListener("message",({source:a,data:l})=>{a===ya&&l===t&&i.length&&i.shift()()},!1),a=>{i.push(a),ya.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",On(ya.postMessage)),O3=typeof queueMicrotask<"u"?queueMicrotask.bind(ya):typeof process<"u"&&process.nextTick||vw,D3=n=>n!=null&&On(n[af]),X={isArray:il,isArrayBuffer:fw,isBuffer:Q6,isFormData:i3,isArrayBufferView:W6,isString:X6,isNumber:mw,isBoolean:Z6,isObject:cf,isPlainObject:Jd,isReadableStream:a3,isRequest:o3,isResponse:l3,isHeaders:c3,isUndefined:Fc,isDate:J6,isFile:e3,isBlob:t3,isRegExp:x3,isFunction:On,isStream:r3,isURLSearchParams:s3,isTypedArray:y3,isFileList:n3,forEach:ou,merge:dg,extend:d3,trim:u3,stripBOM:h3,inherits:f3,toFlatObject:m3,kindOf:of,kindOfTest:vr,endsWith:p3,toArray:g3,forEachEntry:v3,matchAll:_3,isHTMLForm:b3,hasOwnProperty:FE,hasOwnProp:FE,reduceDescriptors:yw,freezeMethods:T3,toObjectSet:w3,toCamelCase:E3,noop:A3,toFiniteNumber:S3,findKey:pw,global:ya,isContextDefined:gw,isSpecCompliantForm:N3,toJSONObject:C3,isAsyncFn:R3,isThenable:I3,setImmediate:vw,asap:O3,isIterable:D3};function De(n,e,t,i,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),i&&(this.request=i),a&&(this.response=a,this.status=a.status?a.status:null)}X.inherits(De,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:X.toJSONObject(this.config),code:this.code,status:this.status}}});const _w=De.prototype,bw={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{bw[n]={value:n}});Object.defineProperties(De,bw);Object.defineProperty(_w,"isAxiosError",{value:!0});De.from=(n,e,t,i,a,l)=>{const u=Object.create(_w);return X.toFlatObject(n,u,function(p){return p!==Error.prototype},f=>f!=="isAxiosError"),De.call(u,n.message,e,t,i,a),u.cause=n,u.name=n.name,l&&Object.assign(u,l),u};const j3=null;function hg(n){return X.isPlainObject(n)||X.isArray(n)}function Ew(n){return X.endsWith(n,"[]")?n.slice(0,-2):n}function HE(n,e,t){return n?n.concat(e).map(function(a,l){return a=Ew(a),!t&&l?"["+a+"]":a}).join(t?".":""):e}function P3(n){return X.isArray(n)&&!n.some(hg)}const M3=X.toFlatObject(X,{},null,function(e){return/^is[A-Z]/.test(e)});function uf(n,e,t){if(!X.isObject(n))throw new TypeError("target must be an object");e=e||new FormData,t=X.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(k,D){return!X.isUndefined(D[k])});const i=t.metaTokens,a=t.visitor||v,l=t.dots,u=t.indexes,p=(t.Blob||typeof Blob<"u"&&Blob)&&X.isSpecCompliantForm(e);if(!X.isFunction(a))throw new TypeError("visitor must be a function");function y(A){if(A===null)return"";if(X.isDate(A))return A.toISOString();if(!p&&X.isBlob(A))throw new De("Blob is not supported. Use a Buffer instead.");return X.isArrayBuffer(A)||X.isTypedArray(A)?p&&typeof Blob=="function"?new Blob([A]):Buffer.from(A):A}function v(A,k,D){let $=A;if(A&&!D&&typeof A=="object"){if(X.endsWith(k,"{}"))k=i?k:k.slice(0,-2),A=JSON.stringify(A);else if(X.isArray(A)&&P3(A)||(X.isFileList(A)||X.endsWith(k,"[]"))&&($=X.toArray(A)))return k=Ew(k),$.forEach(function(U,ne){!(X.isUndefined(U)||U===null)&&e.append(u===!0?HE([k],ne,l):u===null?k:k+"[]",y(U))}),!1}return hg(A)?!0:(e.append(HE(D,k,l),y(A)),!1)}const b=[],T=Object.assign(M3,{defaultVisitor:v,convertValue:y,isVisitable:hg});function N(A,k){if(!X.isUndefined(A)){if(b.indexOf(A)!==-1)throw Error("Circular reference detected in "+k.join("."));b.push(A),X.forEach(A,function($,Q){(!(X.isUndefined($)||$===null)&&a.call(e,$,X.isString(Q)?Q.trim():Q,k,T))===!0&&N($,k?k.concat(Q):[Q])}),b.pop()}}if(!X.isObject(n))throw new TypeError("data must be an object");return N(n),e}function GE(n){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(i){return e[i]})}function Sy(n,e){this._pairs=[],n&&uf(n,this,e)}const xw=Sy.prototype;xw.append=function(e,t){this._pairs.push([e,t])};xw.toString=function(e){const t=e?function(i){return e.call(this,i,GE)}:GE;return this._pairs.map(function(a){return t(a[0])+"="+t(a[1])},"").join("&")};function k3(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Tw(n,e,t){if(!e)return n;const i=t&&t.encode||k3;X.isFunction(t)&&(t={serialize:t});const a=t&&t.serialize;let l;if(a?l=a(e,t):l=X.isURLSearchParams(e)?e.toString():new Sy(e,t).toString(i),l){const u=n.indexOf("#");u!==-1&&(n=n.slice(0,u)),n+=(n.indexOf("?")===-1?"?":"&")+l}return n}class $E{constructor(){this.handlers=[]}use(e,t,i){return this.handlers.push({fulfilled:e,rejected:t,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){X.forEach(this.handlers,function(i){i!==null&&e(i)})}}const ww={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},V3=typeof URLSearchParams<"u"?URLSearchParams:Sy,L3=typeof FormData<"u"?FormData:null,U3=typeof Blob<"u"?Blob:null,z3={isBrowser:!0,classes:{URLSearchParams:V3,FormData:L3,Blob:U3},protocols:["http","https","file","blob","url","data"]},Ny=typeof window<"u"&&typeof document<"u",fg=typeof navigator=="object"&&navigator||void 0,B3=Ny&&(!fg||["ReactNative","NativeScript","NS"].indexOf(fg.product)<0),q3=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",F3=Ny&&window.location.href||"http://localhost",H3=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Ny,hasStandardBrowserEnv:B3,hasStandardBrowserWebWorkerEnv:q3,navigator:fg,origin:F3},Symbol.toStringTag,{value:"Module"})),pn={...H3,...z3};function G3(n,e){return uf(n,new pn.classes.URLSearchParams,Object.assign({visitor:function(t,i,a,l){return pn.isNode&&X.isBuffer(t)?(this.append(i,t.toString("base64")),!1):l.defaultVisitor.apply(this,arguments)}},e))}function $3(n){return X.matchAll(/\w+|\[(\w*)]/g,n).map(e=>e[0]==="[]"?"":e[1]||e[0])}function Y3(n){const e={},t=Object.keys(n);let i;const a=t.length;let l;for(i=0;i<a;i++)l=t[i],e[l]=n[l];return e}function Aw(n){function e(t,i,a,l){let u=t[l++];if(u==="__proto__")return!0;const f=Number.isFinite(+u),p=l>=t.length;return u=!u&&X.isArray(a)?a.length:u,p?(X.hasOwnProp(a,u)?a[u]=[a[u],i]:a[u]=i,!f):((!a[u]||!X.isObject(a[u]))&&(a[u]=[]),e(t,i,a[u],l)&&X.isArray(a[u])&&(a[u]=Y3(a[u])),!f)}if(X.isFormData(n)&&X.isFunction(n.entries)){const t={};return X.forEachEntry(n,(i,a)=>{e($3(i),a,t,0)}),t}return null}function K3(n,e,t){if(X.isString(n))try{return(e||JSON.parse)(n),X.trim(n)}catch(i){if(i.name!=="SyntaxError")throw i}return(t||JSON.stringify)(n)}const lu={transitional:ww,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const i=t.getContentType()||"",a=i.indexOf("application/json")>-1,l=X.isObject(e);if(l&&X.isHTMLForm(e)&&(e=new FormData(e)),X.isFormData(e))return a?JSON.stringify(Aw(e)):e;if(X.isArrayBuffer(e)||X.isBuffer(e)||X.isStream(e)||X.isFile(e)||X.isBlob(e)||X.isReadableStream(e))return e;if(X.isArrayBufferView(e))return e.buffer;if(X.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let f;if(l){if(i.indexOf("application/x-www-form-urlencoded")>-1)return G3(e,this.formSerializer).toString();if((f=X.isFileList(e))||i.indexOf("multipart/form-data")>-1){const p=this.env&&this.env.FormData;return uf(f?{"files[]":e}:e,p&&new p,this.formSerializer)}}return l||a?(t.setContentType("application/json",!1),K3(e)):e}],transformResponse:[function(e){const t=this.transitional||lu.transitional,i=t&&t.forcedJSONParsing,a=this.responseType==="json";if(X.isResponse(e)||X.isReadableStream(e))return e;if(e&&X.isString(e)&&(i&&!this.responseType||a)){const u=!(t&&t.silentJSONParsing)&&a;try{return JSON.parse(e)}catch(f){if(u)throw f.name==="SyntaxError"?De.from(f,De.ERR_BAD_RESPONSE,this,null,this.response):f}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:pn.classes.FormData,Blob:pn.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};X.forEach(["delete","get","head","post","put","patch"],n=>{lu.headers[n]={}});const Q3=X.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),W3=n=>{const e={};let t,i,a;return n&&n.split(`
`).forEach(function(u){a=u.indexOf(":"),t=u.substring(0,a).trim().toLowerCase(),i=u.substring(a+1).trim(),!(!t||e[t]&&Q3[t])&&(t==="set-cookie"?e[t]?e[t].push(i):e[t]=[i]:e[t]=e[t]?e[t]+", "+i:i)}),e},YE=Symbol("internals");function vc(n){return n&&String(n).trim().toLowerCase()}function eh(n){return n===!1||n==null?n:X.isArray(n)?n.map(eh):String(n)}function X3(n){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=t.exec(n);)e[i[1]]=i[2];return e}const Z3=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function Pp(n,e,t,i,a){if(X.isFunction(i))return i.call(this,e,t);if(a&&(e=t),!!X.isString(e)){if(X.isString(i))return e.indexOf(i)!==-1;if(X.isRegExp(i))return i.test(e)}}function J3(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,i)=>t.toUpperCase()+i)}function eM(n,e){const t=X.toCamelCase(" "+e);["get","set","has"].forEach(i=>{Object.defineProperty(n,i+t,{value:function(a,l,u){return this[i].call(this,e,a,l,u)},configurable:!0})})}let Dn=class{constructor(e){e&&this.set(e)}set(e,t,i){const a=this;function l(f,p,y){const v=vc(p);if(!v)throw new Error("header name must be a non-empty string");const b=X.findKey(a,v);(!b||a[b]===void 0||y===!0||y===void 0&&a[b]!==!1)&&(a[b||p]=eh(f))}const u=(f,p)=>X.forEach(f,(y,v)=>l(y,v,p));if(X.isPlainObject(e)||e instanceof this.constructor)u(e,t);else if(X.isString(e)&&(e=e.trim())&&!Z3(e))u(W3(e),t);else if(X.isObject(e)&&X.isIterable(e)){let f={},p,y;for(const v of e){if(!X.isArray(v))throw TypeError("Object iterator must return a key-value pair");f[y=v[0]]=(p=f[y])?X.isArray(p)?[...p,v[1]]:[p,v[1]]:v[1]}u(f,t)}else e!=null&&l(t,e,i);return this}get(e,t){if(e=vc(e),e){const i=X.findKey(this,e);if(i){const a=this[i];if(!t)return a;if(t===!0)return X3(a);if(X.isFunction(t))return t.call(this,a,i);if(X.isRegExp(t))return t.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=vc(e),e){const i=X.findKey(this,e);return!!(i&&this[i]!==void 0&&(!t||Pp(this,this[i],i,t)))}return!1}delete(e,t){const i=this;let a=!1;function l(u){if(u=vc(u),u){const f=X.findKey(i,u);f&&(!t||Pp(i,i[f],f,t))&&(delete i[f],a=!0)}}return X.isArray(e)?e.forEach(l):l(e),a}clear(e){const t=Object.keys(this);let i=t.length,a=!1;for(;i--;){const l=t[i];(!e||Pp(this,this[l],l,e,!0))&&(delete this[l],a=!0)}return a}normalize(e){const t=this,i={};return X.forEach(this,(a,l)=>{const u=X.findKey(i,l);if(u){t[u]=eh(a),delete t[l];return}const f=e?J3(l):String(l).trim();f!==l&&delete t[l],t[f]=eh(a),i[f]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return X.forEach(this,(i,a)=>{i!=null&&i!==!1&&(t[a]=e&&X.isArray(i)?i.join(", "):i)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const i=new this(e);return t.forEach(a=>i.set(a)),i}static accessor(e){const i=(this[YE]=this[YE]={accessors:{}}).accessors,a=this.prototype;function l(u){const f=vc(u);i[f]||(eM(a,u),i[f]=!0)}return X.isArray(e)?e.forEach(l):l(e),this}};Dn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);X.reduceDescriptors(Dn.prototype,({value:n},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(i){this[t]=i}}});X.freezeMethods(Dn);function Mp(n,e){const t=this||lu,i=e||t,a=Dn.from(i.headers);let l=i.data;return X.forEach(n,function(f){l=f.call(t,l,a.normalize(),e?e.status:void 0)}),a.normalize(),l}function Sw(n){return!!(n&&n.__CANCEL__)}function sl(n,e,t){De.call(this,n??"canceled",De.ERR_CANCELED,e,t),this.name="CanceledError"}X.inherits(sl,De,{__CANCEL__:!0});function Nw(n,e,t){const i=t.config.validateStatus;!t.status||!i||i(t.status)?n(t):e(new De("Request failed with status code "+t.status,[De.ERR_BAD_REQUEST,De.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function tM(n){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return e&&e[1]||""}function nM(n,e){n=n||10;const t=new Array(n),i=new Array(n);let a=0,l=0,u;return e=e!==void 0?e:1e3,function(p){const y=Date.now(),v=i[l];u||(u=y),t[a]=p,i[a]=y;let b=l,T=0;for(;b!==a;)T+=t[b++],b=b%n;if(a=(a+1)%n,a===l&&(l=(l+1)%n),y-u<e)return;const N=v&&y-v;return N?Math.round(T*1e3/N):void 0}}function rM(n,e){let t=0,i=1e3/e,a,l;const u=(y,v=Date.now())=>{t=v,a=null,l&&(clearTimeout(l),l=null),n.apply(null,y)};return[(...y)=>{const v=Date.now(),b=v-t;b>=i?u(y,v):(a=y,l||(l=setTimeout(()=>{l=null,u(a)},i-b)))},()=>a&&u(a)]}const Nh=(n,e,t=3)=>{let i=0;const a=nM(50,250);return rM(l=>{const u=l.loaded,f=l.lengthComputable?l.total:void 0,p=u-i,y=a(p),v=u<=f;i=u;const b={loaded:u,total:f,progress:f?u/f:void 0,bytes:p,rate:y||void 0,estimated:y&&f&&v?(f-u)/y:void 0,event:l,lengthComputable:f!=null,[e?"download":"upload"]:!0};n(b)},t)},KE=(n,e)=>{const t=n!=null;return[i=>e[0]({lengthComputable:t,total:n,loaded:i}),e[1]]},QE=n=>(...e)=>X.asap(()=>n(...e)),iM=pn.hasStandardBrowserEnv?((n,e)=>t=>(t=new URL(t,pn.origin),n.protocol===t.protocol&&n.host===t.host&&(e||n.port===t.port)))(new URL(pn.origin),pn.navigator&&/(msie|trident)/i.test(pn.navigator.userAgent)):()=>!0,sM=pn.hasStandardBrowserEnv?{write(n,e,t,i,a,l){const u=[n+"="+encodeURIComponent(e)];X.isNumber(t)&&u.push("expires="+new Date(t).toGMTString()),X.isString(i)&&u.push("path="+i),X.isString(a)&&u.push("domain="+a),l===!0&&u.push("secure"),document.cookie=u.join("; ")},read(n){const e=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(n){this.write(n,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function aM(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function oM(n,e){return e?n.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):n}function Cw(n,e,t){let i=!aM(e);return n&&(i||t==!1)?oM(n,e):e}const WE=n=>n instanceof Dn?{...n}:n;function Sa(n,e){e=e||{};const t={};function i(y,v,b,T){return X.isPlainObject(y)&&X.isPlainObject(v)?X.merge.call({caseless:T},y,v):X.isPlainObject(v)?X.merge({},v):X.isArray(v)?v.slice():v}function a(y,v,b,T){if(X.isUndefined(v)){if(!X.isUndefined(y))return i(void 0,y,b,T)}else return i(y,v,b,T)}function l(y,v){if(!X.isUndefined(v))return i(void 0,v)}function u(y,v){if(X.isUndefined(v)){if(!X.isUndefined(y))return i(void 0,y)}else return i(void 0,v)}function f(y,v,b){if(b in e)return i(y,v);if(b in n)return i(void 0,y)}const p={url:l,method:l,data:l,baseURL:u,transformRequest:u,transformResponse:u,paramsSerializer:u,timeout:u,timeoutMessage:u,withCredentials:u,withXSRFToken:u,adapter:u,responseType:u,xsrfCookieName:u,xsrfHeaderName:u,onUploadProgress:u,onDownloadProgress:u,decompress:u,maxContentLength:u,maxBodyLength:u,beforeRedirect:u,transport:u,httpAgent:u,httpsAgent:u,cancelToken:u,socketPath:u,responseEncoding:u,validateStatus:f,headers:(y,v,b)=>a(WE(y),WE(v),b,!0)};return X.forEach(Object.keys(Object.assign({},n,e)),function(v){const b=p[v]||a,T=b(n[v],e[v],v);X.isUndefined(T)&&b!==f||(t[v]=T)}),t}const Rw=n=>{const e=Sa({},n);let{data:t,withXSRFToken:i,xsrfHeaderName:a,xsrfCookieName:l,headers:u,auth:f}=e;e.headers=u=Dn.from(u),e.url=Tw(Cw(e.baseURL,e.url,e.allowAbsoluteUrls),n.params,n.paramsSerializer),f&&u.set("Authorization","Basic "+btoa((f.username||"")+":"+(f.password?unescape(encodeURIComponent(f.password)):"")));let p;if(X.isFormData(t)){if(pn.hasStandardBrowserEnv||pn.hasStandardBrowserWebWorkerEnv)u.setContentType(void 0);else if((p=u.getContentType())!==!1){const[y,...v]=p?p.split(";").map(b=>b.trim()).filter(Boolean):[];u.setContentType([y||"multipart/form-data",...v].join("; "))}}if(pn.hasStandardBrowserEnv&&(i&&X.isFunction(i)&&(i=i(e)),i||i!==!1&&iM(e.url))){const y=a&&l&&sM.read(l);y&&u.set(a,y)}return e},lM=typeof XMLHttpRequest<"u",cM=lM&&function(n){return new Promise(function(t,i){const a=Rw(n);let l=a.data;const u=Dn.from(a.headers).normalize();let{responseType:f,onUploadProgress:p,onDownloadProgress:y}=a,v,b,T,N,A;function k(){N&&N(),A&&A(),a.cancelToken&&a.cancelToken.unsubscribe(v),a.signal&&a.signal.removeEventListener("abort",v)}let D=new XMLHttpRequest;D.open(a.method.toUpperCase(),a.url,!0),D.timeout=a.timeout;function $(){if(!D)return;const U=Dn.from("getAllResponseHeaders"in D&&D.getAllResponseHeaders()),le={data:!f||f==="text"||f==="json"?D.responseText:D.response,status:D.status,statusText:D.statusText,headers:U,config:n,request:D};Nw(function(j){t(j),k()},function(j){i(j),k()},le),D=null}"onloadend"in D?D.onloadend=$:D.onreadystatechange=function(){!D||D.readyState!==4||D.status===0&&!(D.responseURL&&D.responseURL.indexOf("file:")===0)||setTimeout($)},D.onabort=function(){D&&(i(new De("Request aborted",De.ECONNABORTED,n,D)),D=null)},D.onerror=function(){i(new De("Network Error",De.ERR_NETWORK,n,D)),D=null},D.ontimeout=function(){let ne=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const le=a.transitional||ww;a.timeoutErrorMessage&&(ne=a.timeoutErrorMessage),i(new De(ne,le.clarifyTimeoutError?De.ETIMEDOUT:De.ECONNABORTED,n,D)),D=null},l===void 0&&u.setContentType(null),"setRequestHeader"in D&&X.forEach(u.toJSON(),function(ne,le){D.setRequestHeader(le,ne)}),X.isUndefined(a.withCredentials)||(D.withCredentials=!!a.withCredentials),f&&f!=="json"&&(D.responseType=a.responseType),y&&([T,A]=Nh(y,!0),D.addEventListener("progress",T)),p&&D.upload&&([b,N]=Nh(p),D.upload.addEventListener("progress",b),D.upload.addEventListener("loadend",N)),(a.cancelToken||a.signal)&&(v=U=>{D&&(i(!U||U.type?new sl(null,n,D):U),D.abort(),D=null)},a.cancelToken&&a.cancelToken.subscribe(v),a.signal&&(a.signal.aborted?v():a.signal.addEventListener("abort",v)));const Q=tM(a.url);if(Q&&pn.protocols.indexOf(Q)===-1){i(new De("Unsupported protocol "+Q+":",De.ERR_BAD_REQUEST,n));return}D.send(l||null)})},uM=(n,e)=>{const{length:t}=n=n?n.filter(Boolean):[];if(e||t){let i=new AbortController,a;const l=function(y){if(!a){a=!0,f();const v=y instanceof Error?y:this.reason;i.abort(v instanceof De?v:new sl(v instanceof Error?v.message:v))}};let u=e&&setTimeout(()=>{u=null,l(new De(`timeout ${e} of ms exceeded`,De.ETIMEDOUT))},e);const f=()=>{n&&(u&&clearTimeout(u),u=null,n.forEach(y=>{y.unsubscribe?y.unsubscribe(l):y.removeEventListener("abort",l)}),n=null)};n.forEach(y=>y.addEventListener("abort",l));const{signal:p}=i;return p.unsubscribe=()=>X.asap(f),p}},dM=function*(n,e){let t=n.byteLength;if(t<e){yield n;return}let i=0,a;for(;i<t;)a=i+e,yield n.slice(i,a),i=a},hM=async function*(n,e){for await(const t of fM(n))yield*dM(t,e)},fM=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const e=n.getReader();try{for(;;){const{done:t,value:i}=await e.read();if(t)break;yield i}}finally{await e.cancel()}},XE=(n,e,t,i)=>{const a=hM(n,e);let l=0,u,f=p=>{u||(u=!0,i&&i(p))};return new ReadableStream({async pull(p){try{const{done:y,value:v}=await a.next();if(y){f(),p.close();return}let b=v.byteLength;if(t){let T=l+=b;t(T)}p.enqueue(new Uint8Array(v))}catch(y){throw f(y),y}},cancel(p){return f(p),a.return()}},{highWaterMark:2})},df=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Iw=df&&typeof ReadableStream=="function",mM=df&&(typeof TextEncoder=="function"?(n=>e=>n.encode(e))(new TextEncoder):async n=>new Uint8Array(await new Response(n).arrayBuffer())),Ow=(n,...e)=>{try{return!!n(...e)}catch{return!1}},pM=Iw&&Ow(()=>{let n=!1;const e=new Request(pn.origin,{body:new ReadableStream,method:"POST",get duplex(){return n=!0,"half"}}).headers.has("Content-Type");return n&&!e}),ZE=64*1024,mg=Iw&&Ow(()=>X.isReadableStream(new Response("").body)),Ch={stream:mg&&(n=>n.body)};df&&(n=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Ch[e]&&(Ch[e]=X.isFunction(n[e])?t=>t[e]():(t,i)=>{throw new De(`Response type '${e}' is not supported`,De.ERR_NOT_SUPPORT,i)})})})(new Response);const gM=async n=>{if(n==null)return 0;if(X.isBlob(n))return n.size;if(X.isSpecCompliantForm(n))return(await new Request(pn.origin,{method:"POST",body:n}).arrayBuffer()).byteLength;if(X.isArrayBufferView(n)||X.isArrayBuffer(n))return n.byteLength;if(X.isURLSearchParams(n)&&(n=n+""),X.isString(n))return(await mM(n)).byteLength},yM=async(n,e)=>{const t=X.toFiniteNumber(n.getContentLength());return t??gM(e)},vM=df&&(async n=>{let{url:e,method:t,data:i,signal:a,cancelToken:l,timeout:u,onDownloadProgress:f,onUploadProgress:p,responseType:y,headers:v,withCredentials:b="same-origin",fetchOptions:T}=Rw(n);y=y?(y+"").toLowerCase():"text";let N=uM([a,l&&l.toAbortSignal()],u),A;const k=N&&N.unsubscribe&&(()=>{N.unsubscribe()});let D;try{if(p&&pM&&t!=="get"&&t!=="head"&&(D=await yM(v,i))!==0){let le=new Request(e,{method:"POST",body:i,duplex:"half"}),pe;if(X.isFormData(i)&&(pe=le.headers.get("content-type"))&&v.setContentType(pe),le.body){const[j,C]=KE(D,Nh(QE(p)));i=XE(le.body,ZE,j,C)}}X.isString(b)||(b=b?"include":"omit");const $="credentials"in Request.prototype;A=new Request(e,{...T,signal:N,method:t.toUpperCase(),headers:v.normalize().toJSON(),body:i,duplex:"half",credentials:$?b:void 0});let Q=await fetch(A);const U=mg&&(y==="stream"||y==="response");if(mg&&(f||U&&k)){const le={};["status","statusText","headers"].forEach(R=>{le[R]=Q[R]});const pe=X.toFiniteNumber(Q.headers.get("content-length")),[j,C]=f&&KE(pe,Nh(QE(f),!0))||[];Q=new Response(XE(Q.body,ZE,j,()=>{C&&C(),k&&k()}),le)}y=y||"text";let ne=await Ch[X.findKey(Ch,y)||"text"](Q,n);return!U&&k&&k(),await new Promise((le,pe)=>{Nw(le,pe,{data:ne,headers:Dn.from(Q.headers),status:Q.status,statusText:Q.statusText,config:n,request:A})})}catch($){throw k&&k(),$&&$.name==="TypeError"&&/Load failed|fetch/i.test($.message)?Object.assign(new De("Network Error",De.ERR_NETWORK,n,A),{cause:$.cause||$}):De.from($,$&&$.code,n,A)}}),pg={http:j3,xhr:cM,fetch:vM};X.forEach(pg,(n,e)=>{if(n){try{Object.defineProperty(n,"name",{value:e})}catch{}Object.defineProperty(n,"adapterName",{value:e})}});const JE=n=>`- ${n}`,_M=n=>X.isFunction(n)||n===null||n===!1,Dw={getAdapter:n=>{n=X.isArray(n)?n:[n];const{length:e}=n;let t,i;const a={};for(let l=0;l<e;l++){t=n[l];let u;if(i=t,!_M(t)&&(i=pg[(u=String(t)).toLowerCase()],i===void 0))throw new De(`Unknown adapter '${u}'`);if(i)break;a[u||"#"+l]=i}if(!i){const l=Object.entries(a).map(([f,p])=>`adapter ${f} `+(p===!1?"is not supported by the environment":"is not available in the build"));let u=e?l.length>1?`since :
`+l.map(JE).join(`
`):" "+JE(l[0]):"as no adapter specified";throw new De("There is no suitable adapter to dispatch the request "+u,"ERR_NOT_SUPPORT")}return i},adapters:pg};function kp(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new sl(null,n)}function e1(n){return kp(n),n.headers=Dn.from(n.headers),n.data=Mp.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),Dw.getAdapter(n.adapter||lu.adapter)(n).then(function(i){return kp(n),i.data=Mp.call(n,n.transformResponse,i),i.headers=Dn.from(i.headers),i},function(i){return Sw(i)||(kp(n),i&&i.response&&(i.response.data=Mp.call(n,n.transformResponse,i.response),i.response.headers=Dn.from(i.response.headers))),Promise.reject(i)})}const jw="1.9.0",hf={};["object","boolean","number","function","string","symbol"].forEach((n,e)=>{hf[n]=function(i){return typeof i===n||"a"+(e<1?"n ":" ")+n}});const t1={};hf.transitional=function(e,t,i){function a(l,u){return"[Axios v"+jw+"] Transitional option '"+l+"'"+u+(i?". "+i:"")}return(l,u,f)=>{if(e===!1)throw new De(a(u," has been removed"+(t?" in "+t:"")),De.ERR_DEPRECATED);return t&&!t1[u]&&(t1[u]=!0,console.warn(a(u," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(l,u,f):!0}};hf.spelling=function(e){return(t,i)=>(console.warn(`${i} is likely a misspelling of ${e}`),!0)};function bM(n,e,t){if(typeof n!="object")throw new De("options must be an object",De.ERR_BAD_OPTION_VALUE);const i=Object.keys(n);let a=i.length;for(;a-- >0;){const l=i[a],u=e[l];if(u){const f=n[l],p=f===void 0||u(f,l,n);if(p!==!0)throw new De("option "+l+" must be "+p,De.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new De("Unknown option "+l,De.ERR_BAD_OPTION)}}const th={assertOptions:bM,validators:hf},kr=th.validators;let _a=class{constructor(e){this.defaults=e||{},this.interceptors={request:new $E,response:new $E}}async request(e,t){try{return await this._request(e,t)}catch(i){if(i instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const l=a.stack?a.stack.replace(/^.+\n/,""):"";try{i.stack?l&&!String(i.stack).endsWith(l.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+l):i.stack=l}catch{}}throw i}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=Sa(this.defaults,t);const{transitional:i,paramsSerializer:a,headers:l}=t;i!==void 0&&th.assertOptions(i,{silentJSONParsing:kr.transitional(kr.boolean),forcedJSONParsing:kr.transitional(kr.boolean),clarifyTimeoutError:kr.transitional(kr.boolean)},!1),a!=null&&(X.isFunction(a)?t.paramsSerializer={serialize:a}:th.assertOptions(a,{encode:kr.function,serialize:kr.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),th.assertOptions(t,{baseUrl:kr.spelling("baseURL"),withXsrfToken:kr.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let u=l&&X.merge(l.common,l[t.method]);l&&X.forEach(["delete","get","head","post","put","patch","common"],A=>{delete l[A]}),t.headers=Dn.concat(u,l);const f=[];let p=!0;this.interceptors.request.forEach(function(k){typeof k.runWhen=="function"&&k.runWhen(t)===!1||(p=p&&k.synchronous,f.unshift(k.fulfilled,k.rejected))});const y=[];this.interceptors.response.forEach(function(k){y.push(k.fulfilled,k.rejected)});let v,b=0,T;if(!p){const A=[e1.bind(this),void 0];for(A.unshift.apply(A,f),A.push.apply(A,y),T=A.length,v=Promise.resolve(t);b<T;)v=v.then(A[b++],A[b++]);return v}T=f.length;let N=t;for(b=0;b<T;){const A=f[b++],k=f[b++];try{N=A(N)}catch(D){k.call(this,D);break}}try{v=e1.call(this,N)}catch(A){return Promise.reject(A)}for(b=0,T=y.length;b<T;)v=v.then(y[b++],y[b++]);return v}getUri(e){e=Sa(this.defaults,e);const t=Cw(e.baseURL,e.url,e.allowAbsoluteUrls);return Tw(t,e.params,e.paramsSerializer)}};X.forEach(["delete","get","head","options"],function(e){_a.prototype[e]=function(t,i){return this.request(Sa(i||{},{method:e,url:t,data:(i||{}).data}))}});X.forEach(["post","put","patch"],function(e){function t(i){return function(l,u,f){return this.request(Sa(f||{},{method:e,headers:i?{"Content-Type":"multipart/form-data"}:{},url:l,data:u}))}}_a.prototype[e]=t(),_a.prototype[e+"Form"]=t(!0)});let EM=class Pw{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(l){t=l});const i=this;this.promise.then(a=>{if(!i._listeners)return;let l=i._listeners.length;for(;l-- >0;)i._listeners[l](a);i._listeners=null}),this.promise.then=a=>{let l;const u=new Promise(f=>{i.subscribe(f),l=f}).then(a);return u.cancel=function(){i.unsubscribe(l)},u},e(function(l,u,f){i.reason||(i.reason=new sl(l,u,f),t(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=i=>{e.abort(i)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new Pw(function(a){e=a}),cancel:e}}};function xM(n){return function(t){return n.apply(null,t)}}function TM(n){return X.isObject(n)&&n.isAxiosError===!0}const gg={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(gg).forEach(([n,e])=>{gg[e]=n});function Mw(n){const e=new _a(n),t=dw(_a.prototype.request,e);return X.extend(t,_a.prototype,e,{allOwnKeys:!0}),X.extend(t,e,null,{allOwnKeys:!0}),t.create=function(a){return Mw(Sa(n,a))},t}const bt=Mw(lu);bt.Axios=_a;bt.CanceledError=sl;bt.CancelToken=EM;bt.isCancel=Sw;bt.VERSION=jw;bt.toFormData=uf;bt.AxiosError=De;bt.Cancel=bt.CanceledError;bt.all=function(e){return Promise.all(e)};bt.spread=xM;bt.isAxiosError=TM;bt.mergeConfig=Sa;bt.AxiosHeaders=Dn;bt.formToJSON=n=>Aw(X.isHTMLForm(n)?new FormData(n):n);bt.getAdapter=Dw.getAdapter;bt.HttpStatusCode=gg;bt.default=bt;const{Axios:YM,AxiosError:KM,CanceledError:QM,isCancel:WM,CancelToken:XM,VERSION:ZM,all:JM,Cancel:e5,isAxiosError:t5,spread:n5,toFormData:r5,AxiosHeaders:i5,HttpStatusCode:s5,formToJSON:a5,getAdapter:o5,mergeConfig:l5}=bt,kw=()=>localStorage.getItem("huggingface_api_key")||".",wM=async(n,e,t)=>{var i;try{const a=kw();if(!a||a.trim()==="")return console.log("No hay API key configurada para Hugging Face, usando fallback local"),n1(n,e,t);const u=bt.create({baseURL:"https://api-inference.huggingface.co/models/HuggingFaceH4/zephyr-7b-beta",headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}});let f="";const p=e.slice(-5);for(const D of p)D.sender==="agent"?f+=`Agente: ${D.message}
`:f+=`Cliente: ${D.message}
`;const y=`<|system|>
Eres un asistente especializado en analizar mensajes en un contexto de cobranza. Tu tarea es categorizar la respuesta del cliente.

IMPORTANTE: NUNCA debes mencionar montos específicos de deuda. Habla siempre en términos de "deuda pendiente" o porcentajes, nunca valores monetarios exactos.

El cliente tiene las siguientes características:
- Relación/Cercanía: ${t.relationship}/100
- Historial de Pago: ${t.history}/100
- Actitud: ${t.attitude}/100
- Sensibilidad a Presión: ${t.sensitivity}/100
- Probabilidad de Pago: ${t.probability}/100

Historial reciente de la conversación: 
${f}
<|user|>
Clasifica este mensaje del cliente: "${n}"

Elige UNA de estas categorías EXACTAS sin explicación:
- neutral
- accepts_payment
- offers_partial
- reschedule
- evades
- annoyed
- refuses
- thanks
- no_answer
- confirms_payment
<|assistant|>`;console.log("Enviando solicitud a Hugging Face API para análisis...");const v=await u.post("",{inputs:y,parameters:{max_new_tokens:20,temperature:.1,top_p:.95,do_sample:!0,return_full_text:!1}});console.log("Respuesta de Hugging Face:",v.data);let b="";Array.isArray(v.data)?b=((i=v.data[0])==null?void 0:i.generated_text)||"":b=v.data.generated_text||"";let T="neutral";const N=["neutral","accepts_payment","offers_partial","reschedule","evades","annoyed","refuses","thanks","no_answer","confirms_payment"];for(const D of N)if(b.toLowerCase().includes(D)){T=D;break}const A={neutral:{relationship:0,history:0,attitude:0,sensitivity:0,probability:0},accepts_payment:{relationship:5,history:10,attitude:10,sensitivity:-5,probability:20},offers_partial:{relationship:5,history:5,attitude:10,sensitivity:-5,probability:15},reschedule:{relationship:2,history:-5,attitude:5,sensitivity:0,probability:-5},evades:{relationship:-5,history:-5,attitude:-10,sensitivity:5,probability:-10},annoyed:{relationship:-10,history:-5,attitude:-15,sensitivity:10,probability:-15},refuses:{relationship:-20,history:-20,attitude:-20,sensitivity:20,probability:-30},thanks:{relationship:5,history:0,attitude:10,sensitivity:-5,probability:10},no_answer:{relationship:-5,history:-10,attitude:-5,sensitivity:0,probability:-10},confirms_payment:{relationship:10,history:20,attitude:20,sensitivity:-10,probability:30}},k=A[T]||A.neutral;return console.log(`Evento detectado por Zephyr: "${T}" con deltas:`,k),{eventType:T,deltas:k,explanation:`Evento detectado por Zephyr: "${T}"`,confidence:.8}}catch(a){return console.error("Error al analizar mensaje con Zephyr:",a),console.log("Usando fallback local debido al error"),n1(n)}},AM=async(n,e,t,i)=>{var a;try{const l=kw();if(!l||l.trim()==="")return console.log("No hay API key configurada para Hugging Face, usando fallback local"),r1(n,e,t,i);const f=bt.create({baseURL:"https://api-inference.huggingface.co/models/HuggingFaceH4/zephyr-7b-beta",headers:{Authorization:`Bearer ${l}`,"Content-Type":"application/json"}});let p="";const y=n.slice(-6);for(const A of y)A.sender==="agent"?p+=`Agente: ${A.message}
`:p+=`Cliente: ${A.message}
`;let v="neutral";e.relationship>70?v=e.sensitivity>70?"amistoso sin presión":"amistoso directo":e.relationship<40&&(v=e.sensitivity<40?"formal directo":"formal suave");const b=`<|system|>
Eres un agente de cobranza de la empresa Acriventas. Tu objetivo es obtener el pago de una deuda pendiente mientras mantienes una buena relación con el cliente.

INSTRUCCIONES IMPORTANTES: 
1. NUNCA menciones montos específicos de dinero o deuda en tus respuestas.
2. Siempre habla en términos de "deuda pendiente" o usando porcentajes, no valores exactos.
3. No repitas los montos que el cliente mencione en sus mensajes.
4. Sé siempre respetuoso y profesional.

Debes usar un tono "${v}" basado en el perfil del cliente:
- Relación/Cercanía: ${e.relationship}/100
- Historial de Pago: ${e.history}/100
- Actitud: ${e.attitude}/100
- Sensibilidad a Presión: ${e.sensitivity}/100
- Probabilidad de Pago: ${e.probability}/100

Historial reciente de la conversación:
${p}

El último mensaje del cliente fue: "${t}"
El tipo de evento detectado es: "${i}"
<|user|>
Genera una respuesta empática y efectiva como agente de cobranza. La respuesta debe ser concisa (máximo 2 frases), adaptada al perfil del cliente, enfocada en lograr el pago de la deuda, y NUNCA debe mencionar montos específicos de dinero.
<|assistant|>`;console.log("Enviando solicitud para generar respuesta a Hugging Face API...");const T=await f.post("",{inputs:b,parameters:{max_new_tokens:100,temperature:.7,top_p:.95,do_sample:!0,return_full_text:!1}});console.log("Respuesta de Hugging Face para generación:",T.data);let N="";return Array.isArray(T.data)?N=((a=T.data[0])==null?void 0:a.generated_text)||"":N=T.data.generated_text||"",N=N.trim(),N||(N="Entiendo. ¿Podría por favor indicarnos cuándo podríamos esperar el pago de su deuda pendiente?"),console.log(`Respuesta generada por Zephyr usando tono "${v}": ${N}`),{responseText:N,explanation:`Respuesta generada por Zephyr usando tono "${v}"`,confidence:.8}}catch(l){return console.error("Error al generar respuesta con Zephyr:",l),console.log("Usando fallback local para respuesta debido al error"),r1(n,e,t,i)}},n1=(n,e,t)=>{const i=n.toLowerCase();let a="neutral";i.includes("pagar")||i.includes("transferir")||i.includes("depositar")?i.includes("completo")||i.includes("todo")?a="accepts_payment":i.includes("parte")||i.includes("parcial")||i.includes("algo")?a="offers_partial":(i.includes("próxima")||i.includes("después")||i.includes("luego"))&&(a="reschedule"):i.includes("gracias")||i.includes("agradezco")?a="thanks":i.includes("ya pagué")||i.includes("realicé el pago")||i.includes("transferí")?a="confirms_payment":i.includes("no puedo")||i.includes("imposible")?a="evades":i.includes("molesto")||i.includes("harto")||i.includes("fastidio")?a="annoyed":(i.includes("no voy a pagar")||i.includes("no pagaré")||i.includes("olvídate"))&&(a="refuses");const l={neutral:{relationship:0,history:0,attitude:0,sensitivity:0,probability:0},accepts_payment:{relationship:5,history:10,attitude:10,sensitivity:-5,probability:20},offers_partial:{relationship:5,history:5,attitude:10,sensitivity:-5,probability:15},reschedule:{relationship:2,history:-5,attitude:5,sensitivity:0,probability:-5},evades:{relationship:-5,history:-5,attitude:-10,sensitivity:5,probability:-10},annoyed:{relationship:-10,history:-5,attitude:-15,sensitivity:10,probability:-15},refuses:{relationship:-20,history:-20,attitude:-20,sensitivity:20,probability:-30},thanks:{relationship:5,history:0,attitude:10,sensitivity:-5,probability:10},no_answer:{relationship:-5,history:-10,attitude:-5,sensitivity:0,probability:-10},confirms_payment:{relationship:10,history:20,attitude:20,sensitivity:-10,probability:30}},u=l[a]||l.neutral;return console.log(`Evento detectado por fallback: "${a}" con deltas:`,u),{eventType:a,deltas:u,explanation:`Evento detectado por fallback: "${a}" basado en palabras clave.`,confidence:.6}},r1=(n,e,t,i)=>{let a="neutral";e.relationship>70?e.sensitivity>70?a="friendly_no_pressure":a="friendly":e.relationship<40&&(e.sensitivity<40?a="formal_direct":a="formal_soft");const l={accepts_payment:{friendly_no_pressure:"¡Excelente noticia! Gracias por tu disposición. Cuando puedas hacer el pago, solo avísame.",friendly:"¡Perfecto! Muchas gracias por tu colaboración. ¿Te envío los datos para el pago?",formal_direct:"Muy bien. Le agradecemos su decisión. Necesitamos que realice el pago antes del fin de semana.",formal_soft:"Gracias por su confirmación. ¿Prefiere que le enviemos los datos bancarios por este medio?",neutral:"Entendido. ¿Desea que le enviemos la información para realizar el pago?"},offers_partial:{friendly_no_pressure:"Agradezco mucho tu esfuerzo por pagar una parte. Cualquier aporte es bienvenido.",friendly:"Gracias por tu disposición. Un pago parcial nos ayuda mucho. ¿Cuándo podrías realizar este abono?",formal_direct:"Tomamos nota de su oferta de pago parcial. ¿Cuándo podríamos esperar el resto del monto pendiente?",formal_soft:"Entendemos su situación. El pago parcial es un buen primer paso. ¿Cuándo sería posible?",neutral:"De acuerdo con el pago parcial. ¿Qué porcentaje de la deuda podría transferir y cuándo?"},reschedule:{friendly_no_pressure:"No hay problema, entiendo que necesitas reprogramar. ¿Qué fecha te resultaría más conveniente?",friendly:"Claro que podemos ajustar la fecha. ¿Cuál sería el mejor momento para ti?",formal_direct:"Podemos considerar una nueva fecha. ¿Cuál es su propuesta concreta para el pago?",formal_soft:"Entendemos la necesidad de reprogramar. ¿Qué fecha le resultaría adecuada para realizar el pago?",neutral:"De acuerdo. ¿Cuál sería la nueva fecha propuesta para el pago?"},evades:{friendly_no_pressure:"Entiendo que quizás no es el mejor momento para hablar de esto. ¿Te parece si retomamos la conversación en otro momento?",friendly:"Noto que es un tema delicado. ¿Hay algo específico que podamos resolver para facilitar el pago?",formal_direct:"Necesitamos una respuesta concreta respecto al pago pendiente. ¿Podría indicarnos su plan de acción?",formal_soft:"Entendemos que pueda ser un tema complicado. ¿Podríamos concretar cuándo sería posible abordar el pago?",neutral:"¿Podría por favor indicarnos cuál es su situación respecto al pago pendiente?"},annoyed:{friendly_no_pressure:"Lamento si te he incomodado. No es mi intención molestar, solo buscamos encontrar una solución que funcione para ambos.",friendly:"Disculpa si te he molestado. ¿Qué podríamos hacer para resolver esta situación de la mejor manera?",formal_direct:"Entendemos su molestia. Sin embargo, necesitamos resolver el tema del pago pendiente. ¿Qué solución propone?",formal_soft:"Lamentamos si esta comunicación le resulta incómoda. ¿Habría un mejor momento o forma para abordar el tema?",neutral:"Entiendo. ¿Cómo preferiría que manejemos esta situación para llegar a una solución?"},refuses:{friendly_no_pressure:"Entiendo tu posición. Quizás podríamos explorar algunas alternativas que se ajusten mejor a tu situación actual.",friendly:"Comprendo que sea difícil en este momento. ¿Podríamos considerar opciones de pago más flexibles?",formal_direct:"Tomamos nota de su negativa. Sin embargo, la deuda permanece vigente. ¿Podríamos discutir alternativas de pago?",formal_soft:"Entendemos que pueda tener dificultades. ¿Le interesaría conocer otras opciones disponibles para resolver esta situación?",neutral:"¿Podríamos explorar alternativas que faciliten el pago de la deuda pendiente?"},thanks:{friendly_no_pressure:"¡No hay de qué! Estamos aquí para ayudarte. Si necesitas cualquier cosa, no dudes en hacérmelo saber.",friendly:"Es un placer poder ser de ayuda. ¿Hay algo más en lo que pueda asistirte?",formal_direct:"De nada. ¿Podríamos entonces confirmar cuándo realizará el pago?",formal_soft:"Nos alegra poder serle de utilidad. ¿Necesita alguna otra información para proceder?",neutral:"De nada. ¿Tiene alguna otra consulta respecto al pago?"},confirms_payment:{friendly_no_pressure:"¡Excelente noticia! Muchas gracias por tu pago. Verificaremos y te confirmaremos en cuanto se refleje en nuestro sistema.",friendly:"¡Genial! Gracias por confirmar tu pago. Lo verificaremos a la brevedad y te daremos el comprobante.",formal_direct:"Gracias por su confirmación. Procederemos a verificar el pago y le notificaremos cuando esté procesado.",formal_soft:"Agradecemos su pago. Realizaremos la verificación correspondiente y le informaremos una vez completado el proceso.",neutral:"Gracias por informarnos. Verificaremos el pago y actualizaremos el estado de su cuenta."},default:{friendly_no_pressure:"Entiendo perfectamente. No te preocupes, cuando puedas realizar el pago me avisas.",friendly:"Agradezco que estemos en contacto. ¿Hay algo en lo que pueda ayudarte para facilitar el proceso?",formal_direct:"Necesitamos regularizar su situación. ¿Podría por favor indicarnos una fecha concreta de pago?",formal_soft:"Entendemos que pueden surgir contratiempos. ¿Podría comentarnos cuándo le sería posible realizar el pago?",neutral:"¿Podría por favor indicarnos cuándo podríamos esperar el pago de la deuda pendiente?"}},u=l[i]||l.default,f=u[a]||u.neutral;return console.log(`Respuesta generada por fallback usando tono "${a}": ${f}`),{responseText:f,explanation:`Respuesta generada por fallback usando tono "${a}"`,confidence:.7}},Vw=()=>localStorage.getItem("openai_api_key")||"",SM=n=>{if(!n)return"estimado cliente";const e=["maria","ana","carmen","rosa","lucia","elena","patricia","laura","sandra","monica","claudia","alejandra","diana","beatriz","martha","gloria","adriana","paola","carolina","andrea","liliana","marcela","angela","catalina","esperanza"],t=n.toLowerCase().split(" ")[0];return e.includes(t)?`Doña ${n.split(" ")[0]}`:`Don ${n.split(" ")[0]}`},NM=async n=>{try{if(!n)return console.log("ClientId no válido para obtener contexto previo"),null;const e=await wy(n,3);if(e.length===0)return null;let t=`=== HISTORIAL PREVIO CON ESTE CLIENTE ===
`;return e.forEach((i,a)=>{i.turns&&i.turns.length>0&&(t+=`
--- Conversación ${a+1} ---
`,i.turns.slice(-6).forEach(u=>{const f=u.sender==="agent"?"Agente":"Cliente";t+=`${f}: ${u.message}
`}),i.summary&&i.summary.result&&(t+=`Resultado: ${i.summary.result}
`,i.summary.notes&&(t+=`Notas: ${i.summary.notes}
`)))}),t}catch(e){return console.error("Error obteniendo contexto previo:",e),null}},CM=async(n,e=0)=>{try{if(!n||typeof e!="number")return console.log("Datos insuficientes para obtener contexto de clientes similares"),null;const t=await au(),i=e||1e6,a=i*.3,l=t.filter(p=>p.id!==n.id&&p.debt>=i-a&&p.debt<=i+a);if(l.length===0)return null;const u=l.map(p=>{if(!p.soul)return null;const y=Math.abs(p.soul.relationship-n.relationship)+Math.abs(p.soul.attitude-n.attitude)+Math.abs(p.soul.sensitivity-n.sensitivity)+Math.abs(p.soul.probability-n.probability);return{client:p,similarity:y}}).filter(p=>p!==null).sort((p,y)=>p.similarity-y.similarity).slice(0,2);if(u.length===0)return null;let f=`=== CONTEXTO DE CLIENTES SIMILARES ===
`;f+=`(Clientes con perfil similar: deuda parecida, características del alma similares)

`;for(const{client:p}of u){const y=await wy(p.id,2);y.length>0&&(f+=`--- Estilo conversacional de cliente similar ---
`,f+=`Perfil del alma: R:${p.soul.relationship} A:${p.soul.attitude} S:${p.soul.sensitivity} P:${p.soul.probability}
`,y.forEach(v=>{v.turns&&v.turns.length>0&&(v.turns.slice(-4).forEach(T=>{const N=T.sender==="agent"?"Agente":"Cliente";f+=`${N}: ${T.message}
`}),v.summary&&(f+=`Resultado: ${v.summary.result}
`),f+=`
`)}))}return f}catch(t){return console.error("Error obteniendo contexto de clientes similares:",t),null}},Lw=async(n,e,t,i=!1)=>{if(!n)return{contextSection:`=== SIN CONTEXTO PREVIO ===
Esta es la primera interacción registrada.
`,currentConversation:"",currentPhase:"greeting",phaseDescription:"FASE 1 - SALUDO: Establecer contacto inicial, identificarse y crear rapport usando tratamiento formal",clientInfo:null};let a=null;try{a=await Ty(n)}catch(b){console.error("Error obteniendo información del cliente:",b)}const l=await NM(n),u=l?null:await CM(e,(a==null?void 0:a.debt)||0);let f="";l?f=l:u?f=u:f=`=== SIN CONTEXTO PREVIO ===
Esta es la primera interacción registrada con este tipo de perfil.
`;let p="";t&&t.length>0&&(p=`
=== CONVERSACIÓN ACTUAL ===
`,t.slice(-8).forEach(b=>{const T=b.sender==="agent"?"Agente":"Cliente";p+=`${T}: ${b.message}
`,b.event&&b.event!=="neutral"&&(p+=`[Evento detectado: ${b.event}]
`)}));const y=t&&t.length>0?t[t.length-1].phase||"negotiation":"greeting",v={greeting:"FASE 1 - SALUDO: Establecer contacto inicial, identificarse y crear rapport usando tratamiento formal",debt_notification:"FASE 2 - COMUNICACIÓN DE DEUDA: Informar sobre la deuda pendiente de manera clara, usando montos específicos si el cliente pregunta",negotiation:"FASE 3 - NEGOCIACIÓN: Buscar acuerdo de pago, manejar objeciones con respeto",payment_confirmation:"FASE 4 - CONCRETAR PAGO: Facilitar los datos de pago y confirmar compromisos",farewell:"FASE 5 - DESPEDIDA: Cerrar la conversación de manera cordial y profesional"};return{contextSection:f,currentConversation:p,currentPhase:y,phaseDescription:v[y]||v.negotiation,clientInfo:a}},RM=async(n,e,t,i=null)=>{var a,l,u;try{const f=Vw();if(!f||f.trim()==="")return i1(n,e,t);const y=bt.create({baseURL:"https://api.openai.com/v1/chat/completions".replace("/chat/completions",""),headers:{Authorization:`Bearer ${f}`,"Content-Type":"application/json"}}),v=await Lw(i,t,e,!0),b=`Eres un especialista en análisis de comunicaciones para cobranza. Tu tarea es categorizar respuestas de clientes.

IMPORTANTE: 
- Siempre usar tratamiento formal (usted, nunca tutear)
- Usar Don/Doña según corresponda
- En fase de comunicación de deuda, mencionar montos específicos si el cliente pregunta

${v.contextSection}

PERFIL ACTUAL DEL CLIENTE:
- Relación/Cercanía: ${t.relationship}/100
- Historial de Pago: ${t.history}/100  
- Actitud: ${t.attitude}/100
- Sensibilidad a Presión: ${t.sensitivity}/100
- Probabilidad de Pago: ${t.probability}/100

FASE ACTUAL: ${v.phaseDescription}

${v.currentConversation}

INSTRUCCIONES:
Analiza el siguiente mensaje del cliente y clasifícalo en UNA de estas categorías EXACTAS:
- neutral
- accepts_payment
- offers_partial  
- reschedule
- evades
- annoyed
- refuses
- thanks
- no_answer
- confirms_payment

Responde SOLO con la categoría, sin explicaciones adicionales.`,T=`Mensaje del cliente a analizar: "${n}"`;let A=((u=(l=(a=(await y.post("/chat/completions",{model:"gpt-3.5-turbo",messages:[{role:"system",content:b},{role:"user",content:T}],max_tokens:20,temperature:.1})).data.choices[0])==null?void 0:a.message)==null?void 0:l.content)==null?void 0:u.trim())||"",k="neutral";const D=["neutral","accepts_payment","offers_partial","reschedule","evades","annoyed","refuses","thanks","no_answer","confirms_payment"];for(const U of D)if(A.toLowerCase().includes(U)){k=U;break}const $={neutral:{relationship:0,history:0,attitude:0,sensitivity:0,probability:0},accepts_payment:{relationship:5,history:10,attitude:10,sensitivity:-5,probability:20},offers_partial:{relationship:5,history:5,attitude:10,sensitivity:-5,probability:15},reschedule:{relationship:2,history:-5,attitude:5,sensitivity:0,probability:-5},evades:{relationship:-5,history:-5,attitude:-10,sensitivity:5,probability:-10},annoyed:{relationship:-10,history:-5,attitude:-15,sensitivity:10,probability:-15},refuses:{relationship:-20,history:-20,attitude:-20,sensitivity:20,probability:-30},thanks:{relationship:5,history:0,attitude:10,sensitivity:-5,probability:10},no_answer:{relationship:-5,history:-10,attitude:-5,sensitivity:0,probability:-10},confirms_payment:{relationship:10,history:20,attitude:20,sensitivity:-10,probability:30}},Q=$[k]||$.neutral;return{eventType:k,deltas:Q,explanation:`Evento detectado por OpenAI: "${k}" con contexto de conversaciones previas`,confidence:.9}}catch(f){return console.error("Error al analizar mensaje con OpenAI:",f),i1(n)}},IM=async(n,e,t,i,a=null)=>{var l,u,f;try{const p=Vw();if(!p||p.trim()==="")return s1(n,e,t,i);const v=bt.create({baseURL:"https://api.openai.com/v1/chat/completions".replace("/chat/completions",""),headers:{Authorization:`Bearer ${p}`,"Content-Type":"application/json"}}),b=await Lw(a,e,n,!1),T=b.clientInfo?SM(b.clientInfo.name):"estimado cliente";let N="";e.relationship>70?N=e.sensitivity>70?"cordial y comprensivo, evitando presión excesiva":"cordial pero directo, manteniendo profesionalismo":e.relationship<40?N=e.sensitivity<40?"formal y directo, profesional pero firme":"formal y considerado, profesional y respetuoso":N="profesional equilibrado, manteniendo cortesía";const A=b.clientInfo&&b.currentPhase==="debt_notification"?`
INFORMACIÓN DE DEUDA: $${b.clientInfo.debt.toLocaleString("es-CO")} COP`:"",k=`Eres un agente de cobranza profesional de Acriventas. Tu objetivo es recuperar pagos pendientes manteniendo buenas relaciones con los clientes.

REGLAS FUNDAMENTALES DE COMUNICACIÓN:
1. SIEMPRE usar tratamiento formal (usted, nunca tutear)
2. SIEMPRE dirigirse al cliente como "${T}"
3. En FASE DE COMUNICACIÓN DE DEUDA: Si el cliente pregunta por el monto, proporcionar la cifra específica
4. Mantener tono profesional, empático y orientado a soluciones
5. Adaptar el tono al perfil del cliente

${b.contextSection}

INFORMACIÓN DEL CLIENTE:${A}

PERFIL ACTUAL DEL CLIENTE:
- Relación/Cercanía: ${e.relationship}/100
- Historial de Pago: ${e.history}/100
- Actitud: ${e.attitude}/100  
- Sensibilidad a Presión: ${e.sensitivity}/100
- Probabilidad de Pago: ${e.probability}/100

TONO RECOMENDADO: ${N}

FASE ACTUAL: ${b.phaseDescription}

${b.currentConversation}

ÚLTIMO MENSAJE DEL CLIENTE: "${t}"
EVENTO DETECTADO: "${i}"

INSTRUCCIONES ESPECÍFICAS POR FASE:
- SALUDO: Preséntese cordialmente usando "Don/Doña", identifique al cliente, establezca el motivo de la llamada
- COMUNICACIÓN DE DEUDA: Informe sobre la deuda. Si pregunta por el monto, mencione la cifra específica
- NEGOCIACIÓN: Busque acuerdos, maneje objeciones con respeto, ofrezca alternativas
- CONCRETAR PAGO: Facilite el proceso, confirme fechas y métodos
- DESPEDIDA: Cierre cordialmente, confirme acuerdos, agradezca

Genere UNA respuesta concisa (máximo 2 oraciones) usando tratamiento formal y dirigiéndose como "${T}".`,D=`Basándose en el contexto y el evento "${i}", genere una respuesta apropiada como agente de cobranza usando tratamiento formal.`;let Q=((f=(u=(l=(await v.post("/chat/completions",{model:"gpt-3.5-turbo",messages:[{role:"system",content:k},{role:"user",content:D}],max_tokens:150,temperature:.7})).data.choices[0])==null?void 0:l.message)==null?void 0:u.content)==null?void 0:f.trim())||"";return Q||(Q=`${T}, entiendo su situación. ¿Podríamos coordinar una fecha para el pago de su deuda pendiente?`),{responseText:Q,explanation:`Respuesta generada por OpenAI con tratamiento formal "${T}" y tono "${N}"`,confidence:.9}}catch(p){return console.error("Error al generar respuesta con OpenAI:",p),s1(n,e,t,i)}},i1=(n,e,t)=>{const i=n.toLowerCase();let a="neutral";i.includes("pagar")||i.includes("transferir")||i.includes("depositar")?i.includes("completo")||i.includes("todo")||i.includes("total")?a="accepts_payment":i.includes("parte")||i.includes("parcial")||i.includes("algo")||i.includes("abono")?a="offers_partial":i.includes("próxima")||i.includes("después")||i.includes("luego")||i.includes("semana")?a="reschedule":a="accepts_payment":i.includes("gracias")||i.includes("agradezco")||i.includes("agradecida")?a="thanks":i.includes("ya pagué")||i.includes("realicé el pago")||i.includes("transferí")||i.includes("consigné")?a="confirms_payment":i.includes("no puedo")||i.includes("imposible")||i.includes("difícil")?a="evades":i.includes("molesto")||i.includes("harto")||i.includes("fastidio")||i.includes("joder")?a="annoyed":(i.includes("no voy a pagar")||i.includes("no pagaré")||i.includes("olvídate")||i.includes("no pienso"))&&(a="refuses");const l={neutral:{relationship:0,history:0,attitude:0,sensitivity:0,probability:0},accepts_payment:{relationship:5,history:10,attitude:10,sensitivity:-5,probability:20},offers_partial:{relationship:5,history:5,attitude:10,sensitivity:-5,probability:15},reschedule:{relationship:2,history:-5,attitude:5,sensitivity:0,probability:-5},evades:{relationship:-5,history:-5,attitude:-10,sensitivity:5,probability:-10},annoyed:{relationship:-10,history:-5,attitude:-15,sensitivity:10,probability:-15},refuses:{relationship:-20,history:-20,attitude:-20,sensitivity:20,probability:-30},thanks:{relationship:5,history:0,attitude:10,sensitivity:-5,probability:10},no_answer:{relationship:-5,history:-10,attitude:-5,sensitivity:0,probability:-10},confirms_payment:{relationship:10,history:20,attitude:20,sensitivity:-10,probability:30}},u=l[a]||l.neutral;return{eventType:a,deltas:u,explanation:`Evento detectado por análisis local mejorado: "${a}" basado en patrones de lenguaje.`,confidence:.7}},s1=(n,e,t,i)=>{let a="neutral";e.relationship>70?e.sensitivity>70?a="friendly_no_pressure":a="friendly":e.relationship<40&&(e.sensitivity<40?a="formal_direct":a="formal_soft");const l={accepts_payment:{friendly_no_pressure:"Excelente, me alegra mucho escuchar eso. Cuando usted pueda realizar el pago, solo avíseme y le envío toda la información necesaria.",friendly:"Perfecto, muchas gracias por su disposición. ¿Le parece bien que le envíe los datos bancarios ahora mismo?",formal_direct:"Muy bien, agradecemos su decisión. Le voy a proporcionar los datos para que pueda realizar el pago antes del viernes.",formal_soft:"Gracias por su confirmación. ¿Prefiere que le envíe la información de pago por WhatsApp o por correo?",neutral:"Entendido. ¿Desea que le proporcione los datos bancarios para realizar el pago?"},offers_partial:{friendly_no_pressure:"Agradezco mucho su esfuerzo por hacer este abono. Cualquier pago nos ayuda bastante y valoramos su compromiso.",friendly:"Gracias por ofrecerse a hacer un abono. Eso nos ayuda mucho. ¿Cuándo podría usted realizar esta transferencia?",formal_direct:"Tomamos nota de su propuesta de pago parcial. ¿Podría indicarnos cuándo haría este abono y cuándo el saldo restante?",formal_soft:"Entendemos su situación y agradecemos su disposición. ¿Qué porcentaje de la deuda podría usted cubrir inicialmente?",neutral:"De acuerdo con el pago parcial. ¿Podríamos coordinar cuándo haría usted este primer abono?"},reschedule:{friendly_no_pressure:"No hay ningún problema, entiendo que usted necesita más tiempo. ¿Qué fecha le resultaría más cómoda?",friendly:"Claro que podemos ajustar la fecha. ¿Cuál sería el mejor momento para usted realizar el pago?",formal_direct:"Podemos considerar una nueva fecha. ¿Cuál es su propuesta concreta y definitiva para el pago?",formal_soft:"Entendemos la necesidad de reprogramar. ¿Qué fecha le resultaría más conveniente para realizar el pago?",neutral:"De acuerdo. ¿Cuál sería la nueva fecha propuesta para efectuar el pago?"},evades:{friendly_no_pressure:"Entiendo que puede ser un tema delicado. No se preocupe, podemos buscar juntos la mejor solución para su situación.",friendly:"Comprendo que es una situación compleja. ¿Hay algo específico que podamos resolver para facilitar el pago?",formal_direct:"Necesitamos una respuesta concreta sobre el pago pendiente. ¿Podría indicarnos cuál es su situación actual?",formal_soft:"Entendemos que pueda ser un tema complicado. ¿Podríamos programar una fecha para hablar con más tranquilidad?",neutral:"¿Podría por favor ayudarnos a entender cuál es su situación respecto al pago pendiente?"},annoyed:{friendly_no_pressure:"Lamento mucho si le he causado alguna molestia. No es mi intención incomodarle, solo buscamos encontrar una solución que funcione para ambas partes.",friendly:"Disculpe si le he generado alguna molestia. ¿Qué podríamos hacer diferente para resolver esta situación de la mejor manera?",formal_direct:"Entendemos su molestia, sin embargo necesitamos resolver el tema del pago pendiente. ¿Qué alternativa propone usted?",formal_soft:"Lamentamos si esta comunicación le resulta incómoda. ¿Habría un mejor momento o forma para abordar este tema?",neutral:"Comprendo su posición. ¿Cómo preferiría usted que manejáramos esta situación para llegar a una solución?"},refuses:{friendly_no_pressure:"Entiendo su posición actual. Quizás podríamos explorar algunas alternativas de pago que se ajusten mejor a su situación.",friendly:"Comprendo que sea difícil en este momento. ¿Podríamos considerar un plan de pagos más flexible?",formal_direct:"Tomamos nota de su respuesta. Sin embargo, la deuda permanece vigente. ¿Podríamos discutir alternativas viables?",formal_soft:"Entendemos que pueda tener dificultades. ¿Le interesaría conocer otras opciones de pago disponibles?",neutral:"¿Podríamos explorar alternativas que faciliten el pago de la deuda pendiente?"},thanks:{friendly_no_pressure:"No hay de qué. Es un placer poder ayudarle. Si necesita cualquier cosa adicional, no dude en contactarme.",friendly:"Es un gusto poder ser de ayuda. ¿Hay algo más en lo que pueda asistirle para facilitar el proceso?",formal_direct:"De nada. ¿Podríamos entonces confirmar cuándo realizará el pago de la deuda pendiente?",formal_soft:"Nos alegra poder serle de utilidad. ¿Necesita alguna información adicional para proceder con el pago?",neutral:"De nada. ¿Tiene alguna otra consulta respecto al proceso de pago?"},confirms_payment:{friendly_no_pressure:"Excelente noticia. Muchas gracias por realizar el pago. Vamos a verificarlo y le confirmaremos en cuanto se refleje en el sistema.",friendly:"Genial. Gracias por confirmar su pago. Lo verificaremos inmediatamente y le daremos el comprobante correspondiente.",formal_direct:"Gracias por su confirmación. Procederemos a verificar el pago y le notificaremos una vez esté procesado en el sistema.",formal_soft:"Agradecemos mucho su pago. Realizaremos la verificación correspondiente y le informaremos cuando esté todo listo.",neutral:"Gracias por informarnos. Verificaremos el pago y actualizaremos el estado de su cuenta."},default:{friendly_no_pressure:"Entiendo perfectamente su situación. No se preocupe, cuando pueda realizar el pago solo avíseme.",friendly:"Agradezco que mantengamos esta comunicación. ¿Hay algo en lo que pueda ayudarle para facilitar el proceso de pago?",formal_direct:"Necesitamos regularizar su situación de deuda pendiente. ¿Podría indicarnos una fecha específica de pago?",formal_soft:"Entendemos que pueden surgir inconvenientes. ¿Podría comentarnos cuándo le sería posible realizar el pago?",neutral:"¿Podría por favor indicarnos cuándo podríamos esperar el pago de la deuda pendiente?"}},u=l[i]||l.default;return{responseText:u[a]||u.neutral,explanation:`Respuesta generada con tratamiento formal y tono "${a}" adaptado al perfil del cliente`,confidence:.8}},yt={GEMINI:"gemini",ZEPHYR:"zephyr",OPENAI:"openai"};let Ko=yt.OPENAI;const OM=n=>Object.values(yt).includes(n)?(Ko=n,!0):!1,DM=()=>Ko,jM=async(n,e,t,i=null)=>{switch(Ko){case yt.GEMINI:return $6(n);case yt.ZEPHYR:return wM(n,e,t);case yt.OPENAI:return RM(n,e,t,i);default:throw new Error(`Servicio de IA no reconocido: ${Ko}`)}},nh=async(n,e,t,i,a=null)=>{switch(Ko){case yt.GEMINI:return Y6(n,e,t,i);case yt.ZEPHYR:return AM(n,e,t,i);case yt.OPENAI:return IM(n,e,t,i,a);default:throw new Error(`Servicio de IA no reconocido: ${Ko}`)}},Uw=({phase:n,onChange:e})=>{const t=i=>{e(i.target.value)};return m.jsxs("div",{className:"form-group",children:[m.jsx("label",{className:"label",children:"Fase de la conversación"}),m.jsxs("select",{className:"input w-full",value:n,onChange:t,children:[m.jsx("option",{value:Re.GREETING,children:"Fase 1: Saludo"}),m.jsx("option",{value:Re.DEBT_NOTIFICATION,children:"Fase 2: Comunicación de deuda"}),m.jsx("option",{value:Re.NEGOTIATION,children:"Fase 3: Negociación"}),m.jsx("option",{value:Re.PAYMENT_CONFIRMATION,children:"Fase 4: Concretar pago"}),m.jsx("option",{value:Re.FAREWELL,children:"Fase 5: Despedida"})]})]})},PM=()=>{const{clientId:n}=Eg(),{currentUser:e}=iu(),t=An(),i=xe=>{if(!xe)return"estimado cliente";const Ve=["maria","ana","carmen","rosa","lucia","elena","patricia","laura","sandra","monica","claudia","alejandra","diana","beatriz","martha","gloria","adriana","paola","carolina","andrea","liliana","marcela","angela","catalina","esperanza"],He=xe.toLowerCase().split(" ")[0];return Ve.includes(He)?`Doña ${xe.split(" ")[0]}`:`Don ${xe.split(" ")[0]}`},l=(()=>{if(n)return n;const Ve=window.location.hash.match(/\/conversation\/new\/([^\/\?#]+)/);return Ve&&Ve[1]?Ve[1]:null})(),[u,f]=V.useState(null),[p,y]=V.useState(null),[v,b]=V.useState(null),[T,N]=V.useState([]),[A,k]=V.useState(""),[D,$]=V.useState(!0),[Q,U]=V.useState(!1),[ne,le]=V.useState(""),[pe,j]=V.useState(""),[C,R]=V.useState("neutral"),[M,z]=V.useState(""),[B,O]=V.useState(Re.GREETING),[ft,Pe]=V.useState(""),[Z,ue]=V.useState({relationship:0,history:0,attitude:0,sensitivity:0,probability:0}),ye=V.useRef(null);V.useEffect(()=>{l&&e&&(async()=>{var Ve,He;if(!l){Pe("Error: No se pudo identificar el cliente desde la URL. Por favor, vuelva a la lista de clientes e intente nuevamente."),$(!1);return}if(!e){Pe("Error: Usuario no autenticado. Por favor, inicie sesión nuevamente."),$(!1);return}try{$(!0),Pe("");const mt=await Ty(l);if(!mt){Pe(`Error: No se encontró el cliente con ID "${l}". Es posible que haya sido eliminado o que el enlace sea incorrecto.`),$(!1);return}if(!mt.name||!mt.soul){Pe("Error: Los datos del cliente están incompletos. Por favor, verifique la información del cliente."),$(!1);return}f(mt),b(mt.soul);const _r=await I6(l,e.uid,mt.soul);if(!_r){Pe("Error: No se pudo crear la conversación. Por favor, intente nuevamente."),$(!1);return}y(_r);const Ds=e.displayName||((Ve=e.email)==null?void 0:Ve.split("@")[0])||"el equipo",yn=`Buenos días ${i(mt.name)}, le saluda ${Ds} de Acriventas. Me comunico con usted respecto a su deuda pendiente por valor de $${mt.debt.toLocaleString("es-CO")} COP.`;z(yn),le(yn)}catch(mt){console.error("Error al iniciar conversación:",mt),mt.code==="permission-denied"?Pe("Error: No tiene permisos para acceder a este cliente o crear conversaciones."):mt.code==="not-found"?Pe("Error: El cliente especificado no existe o ha sido eliminado."):(He=mt.message)!=null&&He.includes("Firebase")?Pe("Error de conexión con la base de datos. Por favor, verifique su conexión a internet e intente nuevamente."):Pe(`Error inesperado al iniciar la conversación: ${mt.message||"Error desconocido"}`),f(null),b(null),y(null)}finally{$(!1)}})()},[l,e]),V.useEffect(()=>{var xe;(xe=ye.current)==null||xe.scrollIntoView({behavior:"smooth"})},[T]);const Fe=async()=>{if(!(!A.trim()||Q))try{U(!0);const xe={id:`agent-${Date.now()}`,sender:"agent",message:A,phase:B,timestamp:new Date};N(Ve=>[...Ve,xe]),await BE(p,{sender:"agent",message:A,phase:B,event:"neutral"}),k(""),B===Re.GREETING&&O(Re.DEBT_NOTIFICATION)}catch(xe){console.error("Error al enviar mensaje:",xe)}finally{U(!1)}},P=async xe=>{const Ve=xe.target.value;if(j(Ve),!(!l||!v)&&Ve.trim().split(/\s+/).length>3)try{const He=await jM(Ve,T,v,l);R(He.eventType),ue(He.deltas)}catch(He){console.error("Error al analizar mensaje:",He),R("neutral"),ue({relationship:0,history:0,attitude:0,sensitivity:0,probability:0})}},ae=async()=>{if(!(!pe.trim()||Q)){if(!p||!l||!v){Pe("Error: Datos de conversación incompletos. Por favor, recargue la página.");return}try{U(!0);const xe={id:`client-${Date.now()}`,sender:"client",message:pe,phase:B,timestamp:new Date,event:C};N(mt=>[...mt,xe]);const Ve=await BE(p,{sender:"client",message:pe,phase:B,event:C});b(Ve.currentSoul);const He=await nh(T,Ve.currentSoul,pe,C,l);le(He.responseText),j(""),R("neutral"),ue({relationship:0,history:0,attitude:0,sensitivity:0,probability:0}),C==="accepts_payment"&&B===Re.NEGOTIATION&&O(Re.PAYMENT_CONFIRMATION),C==="confirms_payment"&&B===Re.PAYMENT_CONFIRMATION&&O(Re.FAREWELL)}catch(xe){console.error("Error al agregar mensaje del cliente:",xe),Pe(`Error al procesar el mensaje: ${xe.message||"Error desconocido"}`)}finally{U(!1)}}},he=xe=>{const Ve=xe.target.value;R(Ve);const He={neutral:{relationship:0,history:0,attitude:0,sensitivity:0,probability:0},accepts_payment:{relationship:5,history:10,attitude:10,sensitivity:-5,probability:20},offers_partial:{relationship:5,history:5,attitude:10,sensitivity:-5,probability:15},reschedule:{relationship:2,history:-5,attitude:5,sensitivity:0,probability:-5},evades:{relationship:-5,history:-5,attitude:-10,sensitivity:5,probability:-10},annoyed:{relationship:-10,history:-5,attitude:-15,sensitivity:10,probability:-15},refuses:{relationship:-20,history:-20,attitude:-20,sensitivity:20,probability:-30},thanks:{relationship:5,history:0,attitude:10,sensitivity:-5,probability:10},no_answer:{relationship:-5,history:-10,attitude:-5,sensitivity:0,probability:-10},confirms_payment:{relationship:10,history:20,attitude:20,sensitivity:-10,probability:30}};ue(He[Ve]||He.neutral)},ce=xe=>{O(xe)},_e=()=>{ne&&(k(ne),le(""))},Oe=async xe=>{b(xe);try{await M6(p,xe)}catch(Ve){console.error("Error al actualizar valores del alma:",Ve)}},ee=()=>{t(`/conversation/${p}`)};if(D)return m.jsx("div",{className:"container mx-auto px-4 py-6",children:m.jsxs("div",{className:"text-center",children:[m.jsxs("div",{className:"animate-pulse space-y-4",children:[m.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3 mx-auto"}),m.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mx-auto"}),m.jsx("div",{className:"h-64 bg-gray-200 rounded"})]}),m.jsx("p",{className:"mt-4 text-gray-600",children:l?u?p?"Preparando interfaz...":"Creando conversación...":"Validando cliente...":"Obteniendo información del cliente..."})]})});if(ft)return m.jsx("div",{className:"container mx-auto px-4 py-6",children:m.jsxs("div",{className:"max-w-md mx-auto",children:[m.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-6 py-4 rounded-lg shadow",role:"alert",children:m.jsxs("div",{className:"flex",children:[m.jsx("div",{className:"flex-shrink-0",children:m.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),m.jsxs("div",{className:"ml-3",children:[m.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error al iniciar conversación"}),m.jsx("div",{className:"mt-2 text-sm text-red-700",children:m.jsx("p",{children:ft})})]})]})}),m.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row gap-3",children:[m.jsx("button",{className:"btn-primary flex-1",onClick:()=>{Pe(""),$(!0),window.location.reload()},children:"Reintentar"}),m.jsx("button",{className:"btn-secondary flex-1",onClick:()=>t("/clients"),children:"Volver a Clientes"})]}),!1]})});if(!u||!p||!v)return m.jsx("div",{className:"container mx-auto px-4 py-6",children:m.jsxs("div",{className:"bg-yellow-100 border border-yellow-400 text-yellow-700 px-4 py-3 rounded relative",role:"alert",children:[m.jsx("strong",{className:"font-bold",children:"Advertencia:"}),m.jsx("span",{className:"block sm:inline",children:" Los datos de la conversación no están completamente cargados."}),m.jsxs("div",{className:"mt-2",children:[m.jsx("button",{className:"btn-secondary mr-2",onClick:()=>window.location.reload(),children:"Recargar"}),m.jsx("button",{className:"btn-secondary",onClick:()=>t("/clients"),children:"Volver a Clientes"})]})]})});const ve=T.reduce((xe,Ve)=>{const He=Ve.phase||Re.NEGOTIATION;return xe[He]||(xe[He]=[]),xe[He].push(Ve),xe},{}),oe=[Re.GREETING,Re.DEBT_NOTIFICATION,Re.NEGOTIATION,Re.PAYMENT_CONFIRMATION,Re.FAREWELL],it=xe=>{switch(xe){case Re.GREETING:return"Fase 1: Saludo";case Re.DEBT_NOTIFICATION:return"Fase 2: Comunicación de deuda";case Re.NEGOTIATION:return"Fase 3: Negociación";case Re.PAYMENT_CONFIRMATION:return"Fase 4: Concretar pago";case Re.FAREWELL:return"Fase 5: Despedida";default:return"Fase desconocida"}};return m.jsxs("div",{className:"container mx-auto px-4 py-6",children:[m.jsxs("div",{className:"mb-6 flex justify-between items-center",children:[m.jsxs("h1",{className:"text-2xl font-bold",children:["Conversación con ",i(u.name)]}),m.jsx("div",{children:m.jsx("button",{className:"btn-primary",onClick:ee,children:"Finalizar Conversación"})})]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[m.jsxs("div",{className:"md:col-span-2",children:[ft&&m.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",role:"alert",children:m.jsxs("div",{className:"flex",children:[m.jsx("div",{className:"flex-shrink-0",children:m.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),m.jsx("div",{className:"ml-3",children:m.jsx("p",{className:"text-sm",children:ft})}),m.jsx("div",{className:"ml-auto pl-3",children:m.jsxs("button",{onClick:()=>Pe(""),className:"text-red-400 hover:text-red-600",children:[m.jsx("span",{className:"sr-only",children:"Cerrar"}),m.jsx("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})]})})]})}),m.jsxs("div",{className:"bg-white rounded-lg shadow p-4 mb-4",children:[m.jsxs("div",{className:"h-96 overflow-y-auto mb-4",children:[oe.map(xe=>{const Ve=ve[xe]||[];return Ve.length===0?null:m.jsxs("div",{className:"mb-6",children:[m.jsx("h3",{className:"text-md font-semibold mb-2 bg-gray-100 p-2 rounded",children:it(xe)}),m.jsx("div",{className:"space-y-4",children:Ve.map(He=>m.jsxs("div",{className:`mb-4 ${He.sender==="agent"?"text-right":"text-left"}`,children:[m.jsxs("div",{className:`inline-block rounded-lg px-4 py-2 max-w-[80%] ${He.sender==="agent"?"bg-primary-100 text-primary-800":"bg-gray-100 text-gray-800"}`,children:[m.jsx("p",{children:He.message}),m.jsx("p",{className:"text-xs text-gray-500 mt-1",children:He.timestamp.toLocaleTimeString()})]}),He.event&&He.event!=="neutral"&&m.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Evento: ",He.event]})]},He.id))})]},xe)}),T.length===0&&m.jsxs("div",{className:"text-center p-4",children:[m.jsx("p",{className:"text-gray-500",children:"No hay mensajes aún. Comience la conversación."}),M&&m.jsxs("div",{className:"mt-4 p-3 bg-blue-50 rounded-md",children:[m.jsx("p",{className:"text-sm text-blue-600 mb-1",children:"Saludo inicial sugerido:"}),m.jsx("p",{className:"text-sm",children:M}),m.jsx("button",{className:"text-xs text-blue-600 mt-1 underline",onClick:()=>k(M),children:"Usar este saludo"})]})]}),m.jsx("div",{ref:ye})]}),m.jsxs("div",{className:"mb-4",children:[m.jsx(Uw,{phase:B,onChange:ce}),m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1 mt-4",children:"Mensaje del Agente"}),m.jsxs("div",{className:"flex",children:[m.jsx("input",{type:"text",className:"input flex-grow",placeholder:"Escriba su mensaje...",value:A,onChange:xe=>k(xe.target.value)}),m.jsx("button",{className:"btn-primary ml-2",onClick:Fe,disabled:Q||!A.trim(),children:"Enviar"})]}),ne&&m.jsxs("div",{className:"mt-2 p-2 bg-blue-50 rounded-md",children:[m.jsx("p",{className:"text-sm text-blue-600 mb-1",children:"Respuesta sugerida:"}),m.jsx("p",{className:"text-sm",children:ne}),m.jsx("button",{className:"text-xs text-blue-600 mt-1 underline",onClick:_e,children:"Usar esta respuesta"})]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mensaje del Cliente"}),m.jsx("textarea",{className:"input w-full mb-2",rows:"3",placeholder:"Escriba lo que dijo el cliente...",value:pe,onChange:P}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-2",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de Evento"}),m.jsxs("select",{className:"input w-full",value:C,onChange:he,children:[m.jsx("option",{value:"neutral",children:"Evento Neutro"}),m.jsx("option",{value:"accepts_payment",children:"Acepta pagar en fecha acordada"}),m.jsx("option",{value:"offers_partial",children:"Ofrece pago parcial"}),m.jsx("option",{value:"reschedule",children:"Propone nueva fecha"}),m.jsx("option",{value:"evades",children:"Evade o no da respuesta clara"}),m.jsx("option",{value:"annoyed",children:"Se muestra molesto"}),m.jsx("option",{value:"refuses",children:"Se niega a pagar"}),m.jsx("option",{value:"thanks",children:"Agradece recordatorio"}),m.jsx("option",{value:"no_answer",children:"No contesta la llamada"}),m.jsx("option",{value:"confirms_payment",children:"Confirma pago realizado"})]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Modificaciones Sugeridas"}),m.jsxs("div",{className:"text-sm",children:[m.jsxs("p",{children:["Relación: ",Z.relationship>0?"+":"",Z.relationship]}),m.jsxs("p",{children:["Historial: ",Z.history>0?"+":"",Z.history]}),m.jsxs("p",{children:["Actitud: ",Z.attitude>0?"+":"",Z.attitude]}),m.jsxs("p",{children:["Sensibilidad: ",Z.sensitivity>0?"+":"",Z.sensitivity]}),m.jsxs("p",{children:["Probabilidad: ",Z.probability>0?"+":"",Z.probability]})]})]})]}),m.jsx("button",{className:"btn-secondary w-full",onClick:ae,disabled:Q||!pe.trim(),children:"Agregar Mensaje del Cliente"})]})]})]}),m.jsxs("div",{children:[m.jsxs("div",{className:"bg-white rounded-lg shadow p-4 mb-4",children:[m.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Información del Cliente"}),m.jsxs("div",{className:"space-y-2",children:[m.jsxs("p",{children:[m.jsx("span",{className:"font-medium",children:"Nombre:"})," ",u.name]}),m.jsxs("p",{children:[m.jsx("span",{className:"font-medium",children:"Tratamiento:"})," ",i(u.name)]}),m.jsxs("p",{children:[m.jsx("span",{className:"font-medium",children:"Teléfono:"})," ",u.phone]}),m.jsxs("p",{children:[m.jsx("span",{className:"font-medium",children:"Email:"})," ",u.email||"No disponible"]}),m.jsxs("p",{children:[m.jsx("span",{className:"font-medium",children:"Deuda:"})," $",u.debt.toLocaleString("es-CO")," COP"]}),!1]})]}),m.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[m.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Variables del Alma"}),m.jsx(Yo,{initialValues:v,readOnly:!1,onChange:Oe}),m.jsx("p",{className:"mt-3 text-xs text-gray-500",children:"Puede ajustar manualmente las variables según su percepción de la conversación."})]})]})]})]})},MM=()=>{const{conversationId:n}=Eg(),e=An(),[t,i]=V.useState(null),[a,l]=V.useState(!0),[u,f]=V.useState(!1),[p,y]=V.useState(!1),[v,b]=V.useState(null),[T,N]=V.useState(""),[A,k]=V.useState(!1),[D,$]=V.useState(Re.NEGOTIATION),[Q,U]=V.useState(""),[ne,le]=V.useState({sender:"agent",message:"",event:"neutral",phase:Re.NEGOTIATION,deltas:{relationship:0,history:0,attitude:0,sensitivity:0,probability:0},updateClientSoul:!1}),[pe,j]=V.useState({result:"pending",notes:"",nextActionDate:""});V.useEffect(()=>{(async()=>{var ve;if(!n){U("Error: ID de conversación no válido."),l(!1);return}try{l(!0),U("");const oe=await So(n);if(!oe){U("Error: No se encontró la conversación especificada. Es posible que haya sido eliminada."),l(!1);return}if(!oe.clientId||!oe.clientName){U("Error: Los datos de la conversación están incompletos."),l(!1);return}if(i(oe),oe.summary&&j(oe.summary),oe.turns&&oe.turns.length>0){const it=oe.turns[oe.turns.length-1];it.phase&&($(it.phase),le(xe=>({...xe,phase:it.phase})))}}catch(oe){console.error("Error al cargar conversación:",oe),oe.code==="permission-denied"?U("Error: No tiene permisos para acceder a esta conversación."):oe.code==="not-found"?U("Error: La conversación especificada no existe o ha sido eliminada."):(ve=oe.message)!=null&&ve.includes("Firebase")?U("Error de conexión con la base de datos. Por favor, verifique su conexión a internet."):U(`Error al cargar la conversación: ${oe.message||"Error desconocido"}`)}finally{l(!1)}})()},[n]);const C=ee=>{const{name:ve,value:oe}=ee.target;j(it=>({...it,[ve]:oe}))},R=async()=>{if(t)try{f(!0),await O6(n,pe);const ee=await So(n);i(ee),f(!1)}catch(ee){console.error("Error al cerrar conversación:",ee),U(`Error al cerrar la conversación: ${ee.message||"Error desconocido"}`),f(!1)}},M=ee=>{const{name:ve,value:oe}=ee.target;le(it=>({...it,[ve]:oe}))},z=ee=>{$(ee),le(ve=>({...ve,phase:ee}))},B=(ee,ve)=>{le(oe=>({...oe,deltas:{...oe.deltas,[ee]:parseInt(ve,10)||0}}))},O=async()=>{if(!(!ne.message.trim()||!t))try{const ee={sender:ne.sender,message:ne.message,event:ne.event,phase:ne.phase||D,deltas:ne.deltas,updateClientSoul:ne.updateClientSoul};await L6(n,ee);const ve=await So(n);if(i(ve),le({sender:"agent",message:"",event:"neutral",phase:D,deltas:{relationship:0,history:0,attitude:0,sensitivity:0,probability:0},updateClientSoul:!1}),ee.sender==="client"&&ve.isActive&&t.clientId)try{const oe=await nh(ve.turns,ve.currentSoul,ee.message,ee.event,t.clientId);N(oe.responseText),k(!0)}catch(oe){console.error("Error al generar sugerencia de respuesta:",oe)}}catch(ee){console.error("Error al agregar mensaje:",ee),U(`Error al agregar el mensaje: ${ee.message||"Error desconocido"}`)}},ft=async ee=>{var ve;if(t&&t.isActive&&t.clientId)try{const oe=v?v.message:((ve=t.turns.find(xe=>xe.sender==="client"))==null?void 0:ve.message)||"Mensaje del cliente",it=await nh(t.turns,t.currentSoul,oe,ee,t.clientId);N(it.responseText),k(!0)}catch(oe){console.error("Error al generar sugerencia:",oe)}},Pe=async(ee,ve)=>{if(t)try{await k6(n,ee,ve);const oe=await So(n);if(i(oe),v.sender==="client"&&t.isActive&&t.clientId)try{const it=await nh(oe.turns,oe.currentSoul,ve.message,ve.event,t.clientId);N(it.responseText),k(!0)}catch(it){console.error("Error al generar sugerencia de respuesta:",it)}b(null)}catch(oe){console.error("Error al editar mensaje:",oe),U(`Error al editar el mensaje: ${oe.message||"Error desconocido"}`)}},Z=async ee=>{if(window.confirm("¿Está seguro de que desea eliminar este mensaje?"))try{await V6(n,ee);const ve=await So(n);i(ve)}catch(ve){console.error("Error al eliminar mensaje:",ve),U(`Error al eliminar el mensaje: ${ve.message||"Error desconocido"}`)}},ue=async()=>{if(window.confirm("¿Está seguro que desea eliminar permanentemente esta conversación? Esta acción no se puede deshacer."))try{await uw(n),e("/")}catch(ee){console.error("Error al eliminar conversación:",ee),U(`Error al eliminar la conversación: ${ee.message||"Error desconocido"}`)}},ye=async()=>{if(t)try{t.isActive?await qE(n,Xt.INACTIVE,!1):await qE(n,Xt.ACTIVE,!0);const ee=await So(n);i(ee)}catch(ee){console.error("Error al cambiar estado de actividad:",ee),U(`Error al cambiar el estado: ${ee.message||"Error desconocido"}`)}},Fe=()=>{T&&(le(ee=>({...ee,message:T,sender:"agent"})),N(""),k(!1))},P=()=>{var ee;t&&!t.isActive&&ye(),(ee=document.getElementById("message-input"))==null||ee.focus()},ae=ee=>{if(!ee)return"N/A";if(ee.seconds){const ve=new Date(ee.seconds*1e3);return Vo(ve,"PPp",{locale:vs})}else{if(ee instanceof Date)return Vo(ee,"PPp",{locale:vs});{const ve=new Date(ee);return Vo(ve,"PPp",{locale:vs})}}};if(a)return m.jsx("div",{className:"container mx-auto px-4 py-6",children:m.jsxs("div",{className:"text-center",children:[m.jsxs("div",{className:"animate-pulse space-y-4",children:[m.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3 mx-auto"}),m.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mx-auto"}),m.jsx("div",{className:"h-64 bg-gray-200 rounded"})]}),m.jsx("p",{className:"mt-4 text-gray-600",children:"Cargando conversación..."})]})});if(Q&&!t)return m.jsx("div",{className:"container mx-auto px-4 py-6",children:m.jsxs("div",{className:"max-w-md mx-auto",children:[m.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-6 py-4 rounded-lg shadow",role:"alert",children:m.jsxs("div",{className:"flex",children:[m.jsx("div",{className:"flex-shrink-0",children:m.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),m.jsxs("div",{className:"ml-3",children:[m.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error al cargar conversación"}),m.jsx("div",{className:"mt-2 text-sm text-red-700",children:m.jsx("p",{children:Q})})]})]})}),m.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row gap-3",children:[m.jsx("button",{className:"btn-primary flex-1",onClick:()=>window.location.reload(),children:"Reintentar"}),m.jsx("button",{className:"btn-secondary flex-1",onClick:()=>e("/"),children:"Volver al Dashboard"})]})]})});const he=()=>!t||!t.turns?{}:t.turns.reduce((ee,ve)=>{const oe=ve.phase||Re.NEGOTIATION;return ee[oe]||(ee[oe]=[]),ee[oe].push(ve),ee},{}),ce=[Re.GREETING,Re.DEBT_NOTIFICATION,Re.NEGOTIATION,Re.PAYMENT_CONFIRMATION,Re.FAREWELL],_e=ee=>{switch(ee){case Re.GREETING:return"Fase 1: Saludo";case Re.DEBT_NOTIFICATION:return"Fase 2: Comunicación de deuda";case Re.NEGOTIATION:return"Fase 3: Negociación";case Re.PAYMENT_CONFIRMATION:return"Fase 4: Concretar pago";case Re.FAREWELL:return"Fase 5: Despedida";default:return"Fase desconocida"}},Oe=he();return m.jsxs("div",{className:"container mx-auto px-4 py-6",children:[m.jsxs("div",{className:"flex justify-between items-center mb-6",children:[m.jsxs("div",{children:[m.jsxs("h1",{className:"text-2xl font-bold",children:["Conversación con ",t.clientName]}),m.jsxs("p",{className:"text-gray-500",children:["Iniciada el ",ae(t.startedAt),m.jsx("span",{className:`ml-2 px-2 py-1 rounded-full text-xs ${t.isActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:t.isActive?"Activa":"Inactiva"})]})]}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx("button",{className:`btn-secondary ${p?"bg-blue-100 border-blue-300":""}`,onClick:()=>y(!p),children:p?"Salir de Edición":"Editar Conversación"}),m.jsx("button",{className:`btn-secondary ${t.isActive?"bg-amber-100 text-amber-800":"bg-green-100 text-green-800"}`,onClick:ye,children:t.isActive?"Desactivar":"Activar"}),!t.isActive&&m.jsx("button",{className:"btn-secondary",onClick:P,children:"Continuar Conversación"}),t.status!==Xt.CLOSED&&m.jsx("button",{className:"btn-primary",onClick:()=>f(!0),children:"Finalizar Conversación"}),m.jsx("button",{className:"btn-secondary bg-red-600 text-white hover:bg-red-700",onClick:ue,children:"Eliminar"}),m.jsx("button",{className:"btn-secondary",onClick:()=>e(-1),children:"Volver"})]})]}),Q&&m.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-6",role:"alert",children:m.jsxs("div",{className:"flex",children:[m.jsx("div",{className:"flex-shrink-0",children:m.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),m.jsx("div",{className:"ml-3",children:m.jsx("p",{className:"text-sm",children:Q})}),m.jsx("div",{className:"ml-auto pl-3",children:m.jsxs("button",{onClick:()=>U(""),className:"text-red-400 hover:text-red-600",children:[m.jsx("span",{className:"sr-only",children:"Cerrar"}),m.jsx("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})]})})]})}),p&&m.jsxs("div",{className:"bg-amber-50 border border-amber-200 text-amber-800 p-4 rounded mb-6",children:[m.jsx("h3",{className:"font-semibold mb-2",children:"Modo de edición activo"}),m.jsx("p",{children:"Puede modificar mensajes y eventos existentes. Si la conversación está activa, se generarán sugerencias de respuesta automáticamente basadas en los cambios realizados."})]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[m.jsxs("div",{className:"md:col-span-2",children:[m.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[m.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Mensajes por Fases"}),ce.map(ee=>{const ve=Oe[ee]||[];return ve.length===0?null:m.jsxs("div",{className:"mb-6",children:[m.jsx("h3",{className:"text-md font-semibold mb-2 bg-gray-100 p-2 rounded",children:_e(ee)}),m.jsx("div",{className:"space-y-4",children:ve.map(oe=>m.jsx("div",{className:`flex ${oe.sender==="agent"?"justify-end":"justify-start"}`,children:m.jsxs("div",{className:`rounded-lg px-4 py-2 max-w-[80%] relative ${oe.sender==="agent"?"bg-primary-100 text-primary-800":"bg-gray-100 text-gray-800"}`,children:[p&&m.jsxs("div",{className:"absolute top-1 right-1 flex gap-1",children:[m.jsx("button",{className:"text-xs text-blue-600 hover:text-blue-800",onClick:()=>b(oe),children:"✏️"}),m.jsx("button",{className:"text-xs text-red-600 hover:text-red-800",onClick:()=>Z(oe.id),children:"🗑️"})]}),v&&v.id===oe.id?m.jsx(kM,{turn:oe,onSave:it=>Pe(oe.id,it),onCancel:()=>b(null),onEventChange:ft}):m.jsxs(m.Fragment,{children:[m.jsx("p",{children:oe.message}),m.jsxs("div",{className:"text-xs text-gray-500 mt-1 flex justify-between",children:[m.jsx("span",{children:ae(oe.timestamp)}),oe.isManual&&m.jsx("span",{className:"text-blue-500",children:"Manual"}),oe.isEdited&&m.jsx("span",{className:"text-orange-500",children:"Editado"})]}),oe.event&&oe.event!=="neutral"&&m.jsxs("div",{className:"mt-2 text-xs",children:[m.jsx("span",{className:"font-medium",children:"Evento: "}),m.jsx("span",{children:oe.event}),oe.deltas&&m.jsxs("div",{className:"mt-1 grid grid-cols-5 gap-1",children:[m.jsxs("span",{className:`${oe.deltas.relationship>0?"text-green-600":oe.deltas.relationship<0?"text-red-600":"text-gray-500"}`,children:["R: ",oe.deltas.relationship>0?"+":"",oe.deltas.relationship]}),m.jsxs("span",{className:`${oe.deltas.history>0?"text-green-600":oe.deltas.history<0?"text-red-600":"text-gray-500"}`,children:["H: ",oe.deltas.history>0?"+":"",oe.deltas.history]}),m.jsxs("span",{className:`${oe.deltas.attitude>0?"text-green-600":oe.deltas.attitude<0?"text-red-600":"text-gray-500"}`,children:["A: ",oe.deltas.attitude>0?"+":"",oe.deltas.attitude]}),m.jsxs("span",{className:`${oe.deltas.sensitivity>0?"text-green-600":oe.deltas.sensitivity<0?"text-red-600":"text-gray-500"}`,children:["S: ",oe.deltas.sensitivity>0?"+":"",oe.deltas.sensitivity]}),m.jsxs("span",{className:`${oe.deltas.probability>0?"text-green-600":oe.deltas.probability<0?"text-red-600":"text-gray-500"}`,children:["P: ",oe.deltas.probability>0?"+":"",oe.deltas.probability]})]})]})]})]})},oe.id))})]},ee)}),(!t.turns||t.turns.length===0)&&m.jsx("p",{className:"text-gray-500 text-center py-4",children:"No hay mensajes en esta conversación."}),T&&m.jsxs("div",{className:`mt-4 p-3 bg-blue-50 border border-blue-100 rounded-md transition-all duration-300 ${A?"opacity-100":"opacity-0"}`,children:[m.jsxs("div",{className:"flex justify-between items-start",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-sm font-medium text-blue-700 mb-1",children:"Sugerencia de respuesta:"}),m.jsx("p",{className:"text-sm text-blue-800",children:T})]}),m.jsx("button",{className:"text-xs bg-blue-600 text-white px-2 py-1 rounded hover:bg-blue-700",onClick:Fe,children:"Usar esta respuesta"})]}),m.jsx("p",{className:"text-xs text-blue-600 mt-2",children:"Esta sugerencia se generó automáticamente basada en el contexto y los cambios realizados."})]}),t.isActive&&m.jsxs("div",{className:"mt-6 p-4 border-t border-gray-200",children:[m.jsx("h3",{className:"text-md font-semibold mb-3",children:"Agregar Nuevo Mensaje"}),m.jsxs("div",{className:"space-y-4",children:[m.jsx(Uw,{phase:D,onChange:z}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Emisor"}),m.jsxs("select",{name:"sender",className:"input w-full",value:ne.sender,onChange:M,children:[m.jsx("option",{value:"agent",children:"Agente"}),m.jsx("option",{value:"client",children:"Cliente"})]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de Evento"}),m.jsxs("select",{name:"event",className:"input w-full",value:ne.event,onChange:M,children:[m.jsx("option",{value:"neutral",children:"Evento Neutro"}),m.jsx("option",{value:"accepts_payment",children:"Acepta pagar"}),m.jsx("option",{value:"offers_partial",children:"Ofrece pago parcial"}),m.jsx("option",{value:"reschedule",children:"Propone nueva fecha"}),m.jsx("option",{value:"evades",children:"Evade"}),m.jsx("option",{value:"annoyed",children:"Se muestra molesto"}),m.jsx("option",{value:"refuses",children:"Se niega a pagar"}),m.jsx("option",{value:"thanks",children:"Agradece"}),m.jsx("option",{value:"no_answer",children:"No contesta"}),m.jsx("option",{value:"confirms_payment",children:"Confirma pago"})]})]})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"message-input",className:"block text-sm font-medium text-gray-700 mb-1",children:"Mensaje"}),m.jsx("textarea",{id:"message-input",name:"message",rows:"3",className:"input w-full",value:ne.message,onChange:M,placeholder:"Escriba el mensaje..."})]}),ne.event!=="neutral"&&m.jsxs(m.Fragment,{children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Deltas para Variables del Alma"}),m.jsxs("div",{className:"grid grid-cols-5 gap-2",children:[m.jsxs("div",{children:[m.jsx("label",{className:"text-xs text-gray-500",children:"Relación"}),m.jsx("input",{type:"number",min:"-100",max:"100",className:"input w-full text-sm",value:ne.deltas.relationship,onChange:ee=>B("relationship",ee.target.value)})]}),m.jsxs("div",{children:[m.jsx("label",{className:"text-xs text-gray-500",children:"Historial"}),m.jsx("input",{type:"number",min:"-100",max:"100",className:"input w-full text-sm",value:ne.deltas.history,onChange:ee=>B("history",ee.target.value)})]}),m.jsxs("div",{children:[m.jsx("label",{className:"text-xs text-gray-500",children:"Actitud"}),m.jsx("input",{type:"number",min:"-100",max:"100",className:"input w-full text-sm",value:ne.deltas.attitude,onChange:ee=>B("attitude",ee.target.value)})]}),m.jsxs("div",{children:[m.jsx("label",{className:"text-xs text-gray-500",children:"Sensibilidad"}),m.jsx("input",{type:"number",min:"-100",max:"100",className:"input w-full text-sm",value:ne.deltas.sensitivity,onChange:ee=>B("sensitivity",ee.target.value)})]}),m.jsxs("div",{children:[m.jsx("label",{className:"text-xs text-gray-500",children:"Probabilidad"}),m.jsx("input",{type:"number",min:"-100",max:"100",className:"input w-full text-sm",value:ne.deltas.probability,onChange:ee=>B("probability",ee.target.value)})]})]})]}),m.jsxs("div",{className:"flex items-center",children:[m.jsx("input",{type:"checkbox",id:"updateClientSoul",checked:ne.updateClientSoul,onChange:ee=>le(ve=>({...ve,updateClientSoul:ee.target.checked})),className:"mr-2"}),m.jsx("label",{htmlFor:"updateClientSoul",className:"text-sm text-gray-700",children:"Actualizar alma del cliente en la base de datos"})]})]}),m.jsx("button",{className:"btn-primary",onClick:O,disabled:!ne.message.trim(),children:"Agregar Mensaje"})]})]}),!t.isActive&&m.jsx("div",{className:"mt-6 p-4 border-t border-gray-200",children:m.jsx("div",{className:"bg-gray-50 p-4 rounded-md text-center",children:m.jsx("p",{className:"text-gray-600",children:'Esta conversación no está activa. Pulse "Activar" si desea añadir más mensajes.'})})})]}),t.status===Xt.CLOSED&&t.summary&&m.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[m.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Resumen de la Conversación"}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[m.jsxs("div",{children:[m.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Resultado"}),m.jsxs("p",{className:"font-medium",children:[t.summary.result==="payment"&&"Pago realizado",t.summary.result==="partial_payment"&&"Pago parcial",t.summary.result==="promise"&&"Promesa de pago",t.summary.result==="no_payment"&&"Sin pago",t.summary.result==="pending"&&"Pendiente"]})]}),t.summary.nextActionDate&&m.jsxs("div",{children:[m.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Próxima acción"}),m.jsx("p",{children:ae(t.summary.nextActionDate)})]}),t.summary.notes&&m.jsxs("div",{className:"md:col-span-2",children:[m.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Notas"}),m.jsx("p",{className:"whitespace-pre-line",children:t.summary.notes})]})]})]}),u&&m.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:m.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-lg w-full mx-4",children:[m.jsx("h2",{className:"text-xl font-bold mb-4",children:"Cerrar Conversación"}),m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Resultado"}),m.jsxs("select",{name:"result",className:"input w-full",value:pe.result,onChange:C,children:[m.jsx("option",{value:"payment",children:"Pago realizado"}),m.jsx("option",{value:"partial_payment",children:"Pago parcial"}),m.jsx("option",{value:"promise",children:"Promesa de pago"}),m.jsx("option",{value:"no_payment",children:"Sin pago"}),m.jsx("option",{value:"pending",children:"Pendiente"})]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha de próxima acción"}),m.jsx("input",{type:"date",name:"nextActionDate",className:"input w-full",value:pe.nextActionDate,onChange:C})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notas"}),m.jsx("textarea",{name:"notes",rows:"4",className:"input w-full",value:pe.notes,onChange:C,placeholder:"Resumen de la conversación, acuerdos, observaciones..."})]})]}),m.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[m.jsx("button",{className:"btn-secondary",onClick:()=>f(!1),children:"Cancelar"}),m.jsx("button",{className:"btn-primary",onClick:R,children:"Cerrar Conversación"})]})]})})]}),m.jsxs("div",{children:[m.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[m.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Información del Cliente"}),m.jsxs("p",{className:"mb-2",children:[m.jsx("span",{className:"font-medium",children:"Nombre:"})," ",t.clientName]}),t.client&&m.jsxs(m.Fragment,{children:[m.jsxs("p",{className:"mb-2",children:[m.jsx("span",{className:"font-medium",children:"Teléfono:"})," ",t.client.phone]}),m.jsxs("p",{className:"mb-2",children:[m.jsx("span",{className:"font-medium",children:"Email:"})," ",t.client.email||"No disponible"]}),m.jsxs("p",{className:"mb-2",children:[m.jsx("span",{className:"font-medium",children:"Estado:"})," Deuda pendiente"]}),m.jsx("p",{className:"text-sm text-gray-500 italic",children:"Nota: Por privacidad, no se muestran montos específicos."}),m.jsx("div",{className:"mt-4",children:m.jsx("button",{className:"text-primary-600 text-sm font-medium hover:text-primary-800",onClick:()=>e(`/clients/${t.clientId}`),children:"Ver perfil completo"})})]})]}),m.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[m.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Variables del Alma"}),t.initialSoul&&t.currentSoul&&m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-2",children:"Inicial"}),m.jsx(Yo,{initialValues:t.initialSoul,readOnly:!0})]}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-2",children:"Actual"}),m.jsx(Yo,{initialValues:t.currentSoul,readOnly:!0})]}),m.jsxs("div",{className:"mt-4 p-3 bg-gray-50 rounded-md",children:[m.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Cambios"}),m.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[m.jsxs("div",{children:[m.jsx("span",{className:"font-medium",children:"Relación:"})," ",m.jsxs("span",{className:t.currentSoul.relationship>t.initialSoul.relationship?"text-green-600":t.currentSoul.relationship<t.initialSoul.relationship?"text-red-600":"text-gray-500",children:[t.currentSoul.relationship-t.initialSoul.relationship>0?"+":"",t.currentSoul.relationship-t.initialSoul.relationship]})]}),m.jsxs("div",{children:[m.jsx("span",{className:"font-medium",children:"Historial:"})," ",m.jsxs("span",{className:t.currentSoul.history>t.initialSoul.history?"text-green-600":t.currentSoul.history<t.initialSoul.history?"text-red-600":"text-gray-500",children:[t.currentSoul.history-t.initialSoul.history>0?"+":"",t.currentSoul.history-t.initialSoul.history]})]}),m.jsxs("div",{children:[m.jsx("span",{className:"font-medium",children:"Actitud:"})," ",m.jsxs("span",{className:t.currentSoul.attitude>t.initialSoul.attitude?"text-green-600":t.currentSoul.attitude<t.initialSoul.attitude?"text-red-600":"text-gray-500",children:[t.currentSoul.attitude-t.initialSoul.attitude>0?"+":"",t.currentSoul.attitude-t.initialSoul.attitude]})]}),m.jsxs("div",{children:[m.jsx("span",{className:"font-medium",children:"Sensibilidad:"})," ",m.jsxs("span",{className:t.currentSoul.sensitivity<t.initialSoul.sensitivity?"text-green-600":t.currentSoul.sensitivity>t.initialSoul.sensitivity?"text-red-600":"text-gray-500",children:[t.currentSoul.sensitivity-t.initialSoul.sensitivity>0?"+":"",t.currentSoul.sensitivity-t.initialSoul.sensitivity]})]}),m.jsxs("div",{className:"col-span-2",children:[m.jsx("span",{className:"font-medium",children:"Probabilidad de pago:"})," ",m.jsxs("span",{className:t.currentSoul.probability>t.initialSoul.probability?"text-green-600":t.currentSoul.probability<t.initialSoul.probability?"text-red-600":"text-gray-500",children:[t.currentSoul.probability-t.initialSoul.probability>0?"+":"",t.currentSoul.probability-t.initialSoul.probability]})]})]})]})]})]})]})]})]})},kM=({turn:n,onSave:e,onCancel:t,onEventChange:i})=>{const[a,l]=V.useState({message:n.message,event:n.event||"neutral",phase:n.phase||Re.NEGOTIATION,deltas:n.deltas||{relationship:0,history:0,attitude:0,sensitivity:0,probability:0}}),u=v=>{const{name:b,value:T}=v.target;b==="event"&&T!==a.event&&i&&i(T),l(N=>({...N,[b]:T}))},f=v=>{l(b=>({...b,phase:v}))},p=(v,b)=>{l(T=>({...T,deltas:{...T.deltas,[v]:parseInt(b,10)||0}}))},y=v=>{v.preventDefault(),e(a)};return m.jsxs("form",{onSubmit:y,className:"space-y-3",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Mensaje"}),m.jsx("textarea",{name:"message",rows:"2",className:"w-full text-sm border border-gray-300 rounded px-2 py-1",value:a.message,onChange:u})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Fase"}),m.jsxs("select",{name:"phase",className:"w-full text-sm border border-gray-300 rounded px-2 py-1",value:a.phase,onChange:v=>f(v.target.value),children:[m.jsx("option",{value:Re.GREETING,children:"Fase 1: Saludo"}),m.jsx("option",{value:Re.DEBT_NOTIFICATION,children:"Fase 2: Comunicación de deuda"}),m.jsx("option",{value:Re.NEGOTIATION,children:"Fase 3: Negociación"}),m.jsx("option",{value:Re.PAYMENT_CONFIRMATION,children:"Fase 4: Concretar pago"}),m.jsx("option",{value:Re.FAREWELL,children:"Fase 5: Despedida"})]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Evento"}),m.jsxs("select",{name:"event",className:"w-full text-sm border border-gray-300 rounded px-2 py-1",value:a.event,onChange:u,children:[m.jsx("option",{value:"neutral",children:"Neutral"}),m.jsx("option",{value:"accepts_payment",children:"Acepta pagar"}),m.jsx("option",{value:"offers_partial",children:"Pago parcial"}),m.jsx("option",{value:"reschedule",children:"Nueva fecha"}),m.jsx("option",{value:"evades",children:"Evade"}),m.jsx("option",{value:"annoyed",children:"Molesto"}),m.jsx("option",{value:"refuses",children:"Se niega"}),m.jsx("option",{value:"thanks",children:"Agradece"}),m.jsx("option",{value:"no_answer",children:"No contesta"}),m.jsx("option",{value:"confirms_payment",children:"Confirma pago"})]})]}),a.event!=="neutral"&&m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Deltas"}),m.jsxs("div",{className:"grid grid-cols-5 gap-1",children:[m.jsx("input",{type:"number",min:"-100",max:"100",className:"w-full text-xs border border-gray-300 rounded px-1 py-1",value:a.deltas.relationship,onChange:v=>p("relationship",v.target.value),placeholder:"R"}),m.jsx("input",{type:"number",min:"-100",max:"100",className:"w-full text-xs border border-gray-300 rounded px-1 py-1",value:a.deltas.history,onChange:v=>p("history",v.target.value),placeholder:"H"}),m.jsx("input",{type:"number",min:"-100",max:"100",className:"w-full text-xs border border-gray-300 rounded px-1 py-1",value:a.deltas.attitude,onChange:v=>p("attitude",v.target.value),placeholder:"A"}),m.jsx("input",{type:"number",min:"-100",max:"100",className:"w-full text-xs border border-gray-300 rounded px-1 py-1",value:a.deltas.sensitivity,onChange:v=>p("sensitivity",v.target.value),placeholder:"S"}),m.jsx("input",{type:"number",min:"-100",max:"100",className:"w-full text-xs border border-gray-300 rounded px-1 py-1",value:a.deltas.probability,onChange:v=>p("probability",v.target.value),placeholder:"P"})]})]}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx("button",{type:"submit",className:"text-xs bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600",children:"Guardar"}),m.jsx("button",{type:"button",onClick:t,className:"text-xs bg-gray-500 text-white px-2 py-1 rounded hover:bg-gray-600",children:"Cancelar"})]})]})},VM=()=>{const[n,e]=V.useState(""),[t,i]=V.useState(""),[a,l]=V.useState(""),[u,f]=V.useState(!1),[p,y]=V.useState(""),v=An();V.useEffect(()=>{e(DM());const A=localStorage.getItem("huggingface_api_key")||"",k=localStorage.getItem("openai_api_key")||"";i(A),l(k)},[]);const b=async()=>{f(!0),y("");try{if(n===yt.ZEPHYR&&!t.trim()){y("Error: Debe proporcionar una API Key válida para Hugging Face.");return}if(n===yt.OPENAI&&!a.trim()){y("Error: Debe proporcionar una API Key válida para OpenAI.");return}OM(n),localStorage.setItem("huggingface_api_key",t),localStorage.setItem("openai_api_key",a),y("Configuración guardada correctamente"),setTimeout(()=>v("/"),1500)}catch(A){console.error("Error al guardar configuración:",A),y("Error al guardar la configuración")}finally{f(!1)}},T=A=>{switch(A){case yt.GEMINI:return"Servicio básico con respuestas predefinidas (no requiere configuración externa)";case yt.ZEPHYR:return"Modelo Zephyr 7B Beta de Hugging Face - Buena calidad, requiere API key gratuita";case yt.OPENAI:return"GPT-3.5 Turbo de OpenAI - Máxima calidad con contexto avanzado, requiere API key de pago";default:return""}},N=A=>!A||A.length<8?A:A.substring(0,4)+"..."+A.substring(A.length-4);return m.jsxs("div",{className:"container mx-auto px-4 py-6",children:[m.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Configuración de IA"}),m.jsxs("div",{className:"bg-blue-50 border border-blue-200 text-blue-800 p-4 rounded mb-6",children:[m.jsx("h3",{className:"font-semibold mb-2",children:"💡 Acerca de los servicios de IA"}),m.jsx("p",{className:"text-sm mb-2",children:"El sistema utiliza diferentes servicios de IA para analizar las conversaciones y generar respuestas inteligentes adaptadas al perfil de cada cliente."}),m.jsxs("p",{className:"text-sm",children:[m.jsx("strong",{children:"Novedad:"})," El servicio OpenAI incluye contexto avanzado que utiliza conversaciones previas con el mismo cliente, o aprende del estilo conversacional de clientes similares si no existe historial previo."]})]}),m.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[m.jsxs("div",{className:"form-group mb-6",children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Servicio de IA"}),m.jsxs("div",{className:"space-y-3",children:[m.jsxs("label",{className:"flex items-start space-x-3 p-3 border rounded-lg cursor-pointer hover:bg-gray-50",children:[m.jsx("input",{type:"radio",name:"aiService",value:yt.GEMINI,checked:n===yt.GEMINI,onChange:A=>e(A.target.value),className:"mt-1"}),m.jsxs("div",{className:"flex-1",children:[m.jsx("div",{className:"font-medium text-gray-900",children:"Gemini (Básico)"}),m.jsx("div",{className:"text-sm text-gray-500",children:T(yt.GEMINI)})]}),m.jsx("span",{className:"px-2 py-1 text-xs bg-green-100 text-green-800 rounded",children:"GRATIS"})]}),m.jsxs("label",{className:"flex items-start space-x-3 p-3 border rounded-lg cursor-pointer hover:bg-gray-50",children:[m.jsx("input",{type:"radio",name:"aiService",value:yt.ZEPHYR,checked:n===yt.ZEPHYR,onChange:A=>e(A.target.value),className:"mt-1"}),m.jsxs("div",{className:"flex-1",children:[m.jsx("div",{className:"font-medium text-gray-900",children:"Zephyr 7B Beta (Hugging Face)"}),m.jsx("div",{className:"text-sm text-gray-500",children:T(yt.ZEPHYR)})]}),m.jsx("span",{className:"px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded",children:"API GRATUITA"})]}),m.jsxs("label",{className:"flex items-start space-x-3 p-3 border rounded-lg cursor-pointer hover:bg-gray-50",children:[m.jsx("input",{type:"radio",name:"aiService",value:yt.OPENAI,checked:n===yt.OPENAI,onChange:A=>e(A.target.value),className:"mt-1"}),m.jsxs("div",{className:"flex-1",children:[m.jsx("div",{className:"font-medium text-gray-900",children:"OpenAI GPT-3.5 Turbo"}),m.jsx("div",{className:"text-sm text-gray-500",children:T(yt.OPENAI)}),m.jsx("div",{className:"text-xs text-green-600 mt-1"})]}),m.jsx("span",{className:"px-2 py-1 text-xs bg-purple-100 text-purple-800 rounded",children:"PREMIUM"})]})]})]}),m.jsxs("div",{className:"space-y-6",children:[n===yt.ZEPHYR&&m.jsxs("div",{className:"form-group border-t pt-6",children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"API Key de Hugging Face"}),m.jsx("input",{type:"password",className:"input w-full mb-2",value:t,onChange:A=>i(A.target.value),placeholder:"Ingresa tu API Key de Hugging Face"}),t&&m.jsxs("p",{className:"text-xs text-gray-500 mb-2",children:["API Key configurada: ",N(t)]}),m.jsxs("p",{className:"text-sm text-gray-500",children:["Obtén una API Key gratuita desde tu cuenta de"," ",m.jsx("a",{href:"https://huggingface.co/settings/tokens",target:"_blank",rel:"noopener noreferrer",className:"text-primary-600 hover:text-primary-800 underline",children:"Hugging Face"}),"."]})]}),n===yt.OPENAI&&m.jsxs("div",{className:"form-group border-t pt-6",children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"API Key de OpenAI"}),m.jsx("input",{type:"password",className:"input w-full mb-2",value:a,onChange:A=>l(A.target.value),placeholder:"Ingresa tu API Key de OpenAI (sk-...)"}),a&&m.jsxs("p",{className:"text-xs text-gray-500 mb-2",children:["API Key configurada: ",N(a)]}),m.jsxs("div",{className:"bg-amber-50 border border-amber-200 p-3 rounded text-sm text-amber-800 mb-2",children:[m.jsx("strong",{children:"💰 Costo estimado:"})," ~$0.002 USD por conversación (muy económico)"]}),m.jsxs("p",{className:"text-sm text-gray-500",children:["Obtén tu API Key desde"," ",m.jsx("a",{href:"https://platform.openai.com/api-keys",target:"_blank",rel:"noopener noreferrer",className:"text-primary-600 hover:text-primary-800 underline",children:"OpenAI Platform"}),". Necesitarás añadir créditos a tu cuenta (mínimo $5 USD)."]})]})]}),p&&m.jsx("div",{className:`p-3 rounded mt-4 ${p.includes("Error")?"bg-red-100 text-red-800":"bg-green-100 text-green-800"}`,children:p}),m.jsxs("div",{className:"flex justify-end gap-2 mt-8",children:[m.jsx("button",{className:"btn-secondary",onClick:()=>v(-1),disabled:u,children:"Cancelar"}),m.jsx("button",{className:"btn-primary",onClick:b,disabled:u,children:u?"Guardando...":"Guardar configuración"})]})]})]})},LM=()=>{const[n,e]=V.useState([]),[t,i]=V.useState([]),[a,l]=V.useState([]),[u,f]=V.useState(!0);V.useEffect(()=>{(async()=>{try{f(!0);const[T,N,A]=await Promise.all([lw(null,100),cw(null,100),au()]);e(T),i(N),l(A)}catch(T){console.error("Error al cargar datos para reportes:",T)}finally{f(!1)}})()},[]);const p=n.length+t.length,y={active:n.length,closed:t.length,payment:t.filter(b=>{var T;return((T=b.summary)==null?void 0:T.result)==="payment"}).length,partialPayment:t.filter(b=>{var T;return((T=b.summary)==null?void 0:T.result)==="partial_payment"}).length,promise:t.filter(b=>{var T;return((T=b.summary)==null?void 0:T.result)==="promise"}).length,noPayment:t.filter(b=>{var T;return((T=b.summary)==null?void 0:T.result)==="no_payment"}).length},v={total:a.length,withDebt:a.filter(b=>b.debt>0).length,totalDebt:a.reduce((b,T)=>b+(T.debt||0),0),highProbability:a.filter(b=>{var T;return((T=b.soul)==null?void 0:T.probability)>=70}).length,mediumProbability:a.filter(b=>{var T,N;return((T=b.soul)==null?void 0:T.probability)>=40&&((N=b.soul)==null?void 0:N.probability)<70}).length,lowProbability:a.filter(b=>{var T;return((T=b.soul)==null?void 0:T.probability)<40}).length};return u?m.jsxs("div",{className:"container mx-auto px-4 py-6",children:[m.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Reportes"}),m.jsxs("div",{className:"animate-pulse space-y-6",children:[m.jsx("div",{className:"h-40 bg-gray-200 rounded"}),m.jsx("div",{className:"h-40 bg-gray-200 rounded"}),m.jsx("div",{className:"h-60 bg-gray-200 rounded"})]})]}):m.jsxs("div",{className:"container mx-auto px-4 py-6",children:[m.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Reportes"}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[m.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[m.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Estadísticas de Conversaciones"}),m.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[m.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[m.jsx("h3",{className:"text-sm font-medium text-blue-800 mb-1",children:"Activas"}),m.jsx("p",{className:"text-2xl font-bold text-blue-600",children:y.active})]}),m.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[m.jsx("h3",{className:"text-sm font-medium text-green-800 mb-1",children:"Cerradas"}),m.jsx("p",{className:"text-2xl font-bold text-green-600",children:y.closed})]}),m.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[m.jsx("h3",{className:"text-sm font-medium text-green-800 mb-1",children:"Pagos completos"}),m.jsx("p",{className:"text-2xl font-bold text-green-600",children:y.payment}),m.jsxs("p",{className:"text-xs text-green-600",children:[p>0?Math.round(y.payment/p*100):0,"% del total"]})]}),m.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[m.jsx("h3",{className:"text-sm font-medium text-yellow-800 mb-1",children:"Pagos parciales"}),m.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:y.partialPayment}),m.jsxs("p",{className:"text-xs text-yellow-600",children:[p>0?Math.round(y.partialPayment/p*100):0,"% del total"]})]}),m.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[m.jsx("h3",{className:"text-sm font-medium text-yellow-800 mb-1",children:"Promesas de pago"}),m.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:y.promise}),m.jsxs("p",{className:"text-xs text-yellow-600",children:[p>0?Math.round(y.promise/p*100):0,"% del total"]})]}),m.jsxs("div",{className:"bg-red-50 p-4 rounded-lg",children:[m.jsx("h3",{className:"text-sm font-medium text-red-800 mb-1",children:"Sin pago"}),m.jsx("p",{className:"text-2xl font-bold text-red-600",children:y.noPayment}),m.jsxs("p",{className:"text-xs text-red-600",children:[p>0?Math.round(y.noPayment/p*100):0,"% del total"]})]})]})]}),m.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[m.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Estadísticas de Clientes"}),m.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[m.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[m.jsx("h3",{className:"text-sm font-medium text-blue-800 mb-1",children:"Total de clientes"}),m.jsx("p",{className:"text-2xl font-bold text-blue-600",children:v.total})]}),m.jsxs("div",{className:"bg-red-50 p-4 rounded-lg",children:[m.jsx("h3",{className:"text-sm font-medium text-red-800 mb-1",children:"Con deuda"}),m.jsx("p",{className:"text-2xl font-bold text-red-600",children:v.withDebt}),m.jsxs("p",{className:"text-xs text-red-600",children:[v.total>0?Math.round(v.withDebt/v.total*100):0,"% del total"]})]}),m.jsxs("div",{className:"bg-red-50 p-4 rounded-lg col-span-2",children:[m.jsx("h3",{className:"text-sm font-medium text-red-800 mb-1",children:"Deuda total"}),m.jsxs("p",{className:"text-2xl font-bold text-red-600",children:["$",v.totalDebt.toLocaleString("es-CO")]})]}),m.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[m.jsx("h3",{className:"text-sm font-medium text-green-800 mb-1",children:"Alta probabilidad de pago"}),m.jsx("p",{className:"text-2xl font-bold text-green-600",children:v.highProbability}),m.jsxs("p",{className:"text-xs text-green-600",children:[v.total>0?Math.round(v.highProbability/v.total*100):0,"% del total"]})]}),m.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[m.jsx("h3",{className:"text-sm font-medium text-yellow-800 mb-1",children:"Media probabilidad"}),m.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:v.mediumProbability}),m.jsxs("p",{className:"text-xs text-yellow-600",children:[v.total>0?Math.round(v.mediumProbability/v.total*100):0,"% del total"]})]})]})]})]}),m.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-8",children:[m.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Top 10 Clientes con Mayor Deuda"}),m.jsx("div",{className:"overflow-x-auto",children:m.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[m.jsx("thead",{className:"bg-gray-50",children:m.jsxs("tr",{children:[m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nombre"}),m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Deuda"}),m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Probabilidad de Pago"}),m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Última Conversación"})]})}),m.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a.sort((b,T)=>T.debt-b.debt).slice(0,10).map(b=>{var T,N,A;return m.jsxs("tr",{children:[m.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:m.jsx("div",{className:"font-medium text-gray-900",children:b.name})}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:m.jsxs("div",{className:"text-sm font-medium text-red-600",children:["$",b.debt.toLocaleString("es-CO")]})}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:m.jsxs("div",{className:`text-sm font-medium ${((T=b.soul)==null?void 0:T.probability)>=70?"text-green-600":((N=b.soul)==null?void 0:N.probability)>=40?"text-yellow-600":"text-red-600"}`,children:[((A=b.soul)==null?void 0:A.probability)||0,"%"]})}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:m.jsx("div",{className:"text-sm text-gray-500",children:b.lastContact?new Date(b.lastContact.seconds*1e3).toLocaleDateString():"Sin contacto"})})]},b.id)})})]})})]})]})},UM=()=>{const{currentUser:n,userDetails:e}=iu(),t=An(),i=async()=>{try{await dj(),t("/login")}catch(a){console.error("Error al cerrar sesión:",a)}};return m.jsx("nav",{className:"bg-white p-4 shadow",children:m.jsxs("div",{className:"container mx-auto flex justify-between items-center",children:[m.jsx("div",{className:"flex items-center",children:m.jsx("span",{className:"text-lg font-semibold text-gray-700",children:"Sistema de Cobranza Adaptativa"})}),m.jsx("div",{className:"flex items-center space-x-4",children:n&&m.jsxs(m.Fragment,{children:[m.jsx("span",{className:"text-sm text-gray-600",children:(e==null?void 0:e.displayName)||n.email}),m.jsx("button",{className:"text-sm text-gray-600 hover:text-gray-900",onClick:i,children:"Cerrar sesión"})]})})]})})},zM=()=>{const{isAdmin:n}=iu();return m.jsxs("div",{className:"bg-gray-800 text-white w-64 flex-shrink-0 hidden md:block",children:[m.jsx("div",{className:"p-4",children:m.jsx("h2",{className:"text-xl font-bold",children:"Acriventas"})}),m.jsxs("nav",{className:"mt-8",children:[m.jsxs(fa,{to:"/",className:({isActive:e})=>`flex items-center py-2 px-4 ${e?"bg-gray-700":"hover:bg-gray-700"}`,end:!0,children:[m.jsx(Sj,{className:"mr-3"}),"Dashboard"]}),m.jsxs(fa,{to:"/clients",className:({isActive:e})=>`flex items-center py-2 px-4 ${e?"bg-gray-700":"hover:bg-gray-700"}`,children:[m.jsx(Cj,{className:"mr-3"}),"Clientes"]}),m.jsxs(fa,{to:"/conversations",className:({isActive:e})=>`flex items-center py-2 px-4 ${e?"bg-gray-700":"hover:bg-gray-700"}`,children:[m.jsx(Aj,{className:"mr-3"}),"Conversaciones"]}),m.jsxs(fa,{to:"/reports",className:({isActive:e})=>`flex items-center py-2 px-4 ${e?"bg-gray-700":"hover:bg-gray-700"}`,children:[m.jsx(Tj,{className:"mr-3"}),"Reportes"]}),m.jsxs(fa,{to:"/settings/ai",className:({isActive:e})=>`flex items-center py-2 px-4 ${e?"bg-gray-700":"hover:bg-gray-700"}`,children:[m.jsx(Nj,{className:"mr-3"}),"Configuración IA"]}),n&&m.jsxs(fa,{to:"/settings",className:({isActive:e})=>`flex items-center py-2 px-4 ${e?"bg-gray-700":"hover:bg-gray-700"}`,children:[m.jsx(wj,{className:"mr-3"}),"Configuración"]})]})]})},BM=()=>m.jsxs("div",{className:"flex h-screen bg-gray-100",children:[m.jsx(zM,{}),m.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[m.jsx(UM,{}),m.jsx("main",{className:"flex-1 overflow-y-auto p-4",children:m.jsx(hN,{})})]})]}),qM=({children:n})=>{const{currentUser:e,loading:t}=iu();return t?m.jsx("div",{className:"flex h-screen items-center justify-center",children:"Cargando..."}):e?n:m.jsx(p1,{to:"/login"})};function FM(){return m.jsx(LN,{children:m.jsx(fj,{children:m.jsxs(mN,{children:[m.jsx(xn,{path:"/login",element:m.jsx(mj,{})}),m.jsx(xn,{path:"/register",element:m.jsx(pj,{})}),m.jsxs(xn,{path:"/",element:m.jsx(qM,{children:m.jsx(BM,{})}),children:[m.jsx(xn,{index:!0,element:m.jsx(z6,{})}),m.jsx(xn,{path:"clients",element:m.jsx(G6,{})}),m.jsx(xn,{path:"clients/:clientId",element:m.jsx(B6,{})}),m.jsx(xn,{path:"clients/search",element:m.jsx(q6,{})}),m.jsx(xn,{path:"clients/new",element:m.jsx(F6,{})}),m.jsx(xn,{path:"conversation/new",element:m.jsx(H6,{})}),m.jsx(xn,{path:"conversation/new/:clientId",element:m.jsx(PM,{})}),m.jsx(xn,{path:"conversation/:conversationId",element:m.jsx(MM,{})}),m.jsx(xn,{path:"reports",element:m.jsx(LM,{})}),m.jsx(xn,{path:"settings/ai",element:m.jsx(VM,{})})]}),m.jsx(xn,{path:"*",element:m.jsx(p1,{to:"/",replace:!0})})]})})})}bS.createRoot(document.getElementById("root")).render(m.jsx(V.StrictMode,{children:m.jsx(FM,{})}));
