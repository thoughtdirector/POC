(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();function eA(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var cp={exports:{}},uu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var P_;function tA(){if(P_)return uu;P_=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var f in a)f!=="key"&&(l[f]=a[f])}else l=a;return a=l.ref,{$$typeof:n,type:i,key:c,ref:a!==void 0?a:null,props:l}}return uu.Fragment=e,uu.jsx=t,uu.jsxs=t,uu}var M_;function nA(){return M_||(M_=1,cp.exports=tA()),cp.exports}var y=nA(),dp={exports:{}},Ie={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var j_;function rA(){if(j_)return Ie;j_=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),w=Symbol.iterator;function T(P){return P===null||typeof P!="object"?null:(P=w&&P[w]||P["@@iterator"],typeof P=="function"?P:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,U={};function I(P,te,ce){this.props=P,this.context=te,this.refs=U,this.updater=ce||C}I.prototype.isReactComponent={},I.prototype.setState=function(P,te){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,te,"setState")},I.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function q(){}q.prototype=I.prototype;function X(P,te,ce){this.props=P,this.context=te,this.refs=U,this.updater=ce||C}var Y=X.prototype=new q;Y.constructor=X,A(Y,I.prototype),Y.isPureReactComponent=!0;var de=Array.isArray,ue={H:null,A:null,T:null,S:null,V:null},ye=Object.prototype.hasOwnProperty;function M(P,te,ce,oe,be,Pe){return ce=Pe.ref,{$$typeof:n,type:P,key:te,ref:ce!==void 0?ce:null,props:Pe}}function R(P,te){return M(P.type,te,void 0,void 0,void 0,P.props)}function N(P){return typeof P=="object"&&P!==null&&P.$$typeof===n}function j(P){var te={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(ce){return te[ce]})}var L=/\/+/g;function B(P,te){return typeof P=="object"&&P!==null&&P.key!=null?j(""+P.key):te.toString(36)}function O(){}function ct(P){switch(P.status){case"fulfilled":return P.value;case"rejected":throw P.reason;default:switch(typeof P.status=="string"?P.then(O,O):(P.status="pending",P.then(function(te){P.status==="pending"&&(P.status="fulfilled",P.value=te)},function(te){P.status==="pending"&&(P.status="rejected",P.reason=te)})),P.status){case"fulfilled":return P.value;case"rejected":throw P.reason}}throw P}function se(P,te,ce,oe,be){var Pe=typeof P;(Pe==="undefined"||Pe==="boolean")&&(P=null);var Ae=!1;if(P===null)Ae=!0;else switch(Pe){case"bigint":case"string":case"number":Ae=!0;break;case"object":switch(P.$$typeof){case n:case e:Ae=!0;break;case v:return Ae=P._init,se(Ae(P._payload),te,ce,oe,be)}}if(Ae)return be=be(P),Ae=oe===""?"."+B(P,0):oe,de(be)?(ce="",Ae!=null&&(ce=Ae.replace(L,"$&/")+"/"),se(be,te,ce,"",function(ur){return ur})):be!=null&&(N(be)&&(be=R(be,ce+(be.key==null||P&&P.key===be.key?"":(""+be.key).replace(L,"$&/")+"/")+Ae)),te.push(be)),1;Ae=0;var kt=oe===""?".":oe+":";if(de(P))for(var rt=0;rt<P.length;rt++)oe=P[rt],Pe=kt+B(oe,rt),Ae+=se(oe,te,ce,Pe,be);else if(rt=T(P),typeof rt=="function")for(P=rt.call(P),rt=0;!(oe=P.next()).done;)oe=oe.value,Pe=kt+B(oe,rt++),Ae+=se(oe,te,ce,Pe,be);else if(Pe==="object"){if(typeof P.then=="function")return se(ct(P),te,ce,oe,be);throw te=String(P),Error("Objects are not valid as a React child (found: "+(te==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":te)+"). If you meant to render a collection of children, use an array instead.")}return Ae}function $(P,te,ce){if(P==null)return P;var oe=[],be=0;return se(P,oe,"","",function(Pe){return te.call(ce,Pe,be++)}),oe}function ae(P){if(P._status===-1){var te=P._result;te=te(),te.then(function(ce){(P._status===0||P._status===-1)&&(P._status=1,P._result=ce)},function(ce){(P._status===0||P._status===-1)&&(P._status=2,P._result=ce)}),P._status===-1&&(P._status=0,P._result=te)}if(P._status===1)return P._result.default;throw P._result}var me=typeof reportError=="function"?reportError:function(P){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var te=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof P=="object"&&P!==null&&typeof P.message=="string"?String(P.message):String(P),error:P});if(!window.dispatchEvent(te))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",P);return}console.error(P)};function ge(){}return Ie.Children={map:$,forEach:function(P,te,ce){$(P,function(){te.apply(this,arguments)},ce)},count:function(P){var te=0;return $(P,function(){te++}),te},toArray:function(P){return $(P,function(te){return te})||[]},only:function(P){if(!N(P))throw Error("React.Children.only expected to receive a single React element child.");return P}},Ie.Component=I,Ie.Fragment=t,Ie.Profiler=a,Ie.PureComponent=X,Ie.StrictMode=i,Ie.Suspense=m,Ie.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ue,Ie.__COMPILER_RUNTIME={__proto__:null,c:function(P){return ue.H.useMemoCache(P)}},Ie.cache=function(P){return function(){return P.apply(null,arguments)}},Ie.cloneElement=function(P,te,ce){if(P==null)throw Error("The argument must be a React element, but you passed "+P+".");var oe=A({},P.props),be=P.key,Pe=void 0;if(te!=null)for(Ae in te.ref!==void 0&&(Pe=void 0),te.key!==void 0&&(be=""+te.key),te)!ye.call(te,Ae)||Ae==="key"||Ae==="__self"||Ae==="__source"||Ae==="ref"&&te.ref===void 0||(oe[Ae]=te[Ae]);var Ae=arguments.length-2;if(Ae===1)oe.children=ce;else if(1<Ae){for(var kt=Array(Ae),rt=0;rt<Ae;rt++)kt[rt]=arguments[rt+2];oe.children=kt}return M(P.type,be,void 0,void 0,Pe,oe)},Ie.createContext=function(P){return P={$$typeof:c,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null},P.Provider=P,P.Consumer={$$typeof:l,_context:P},P},Ie.createElement=function(P,te,ce){var oe,be={},Pe=null;if(te!=null)for(oe in te.key!==void 0&&(Pe=""+te.key),te)ye.call(te,oe)&&oe!=="key"&&oe!=="__self"&&oe!=="__source"&&(be[oe]=te[oe]);var Ae=arguments.length-2;if(Ae===1)be.children=ce;else if(1<Ae){for(var kt=Array(Ae),rt=0;rt<Ae;rt++)kt[rt]=arguments[rt+2];be.children=kt}if(P&&P.defaultProps)for(oe in Ae=P.defaultProps,Ae)be[oe]===void 0&&(be[oe]=Ae[oe]);return M(P,Pe,void 0,void 0,null,be)},Ie.createRef=function(){return{current:null}},Ie.forwardRef=function(P){return{$$typeof:f,render:P}},Ie.isValidElement=N,Ie.lazy=function(P){return{$$typeof:v,_payload:{_status:-1,_result:P},_init:ae}},Ie.memo=function(P,te){return{$$typeof:g,type:P,compare:te===void 0?null:te}},Ie.startTransition=function(P){var te=ue.T,ce={};ue.T=ce;try{var oe=P(),be=ue.S;be!==null&&be(ce,oe),typeof oe=="object"&&oe!==null&&typeof oe.then=="function"&&oe.then(ge,me)}catch(Pe){me(Pe)}finally{ue.T=te}},Ie.unstable_useCacheRefresh=function(){return ue.H.useCacheRefresh()},Ie.use=function(P){return ue.H.use(P)},Ie.useActionState=function(P,te,ce){return ue.H.useActionState(P,te,ce)},Ie.useCallback=function(P,te){return ue.H.useCallback(P,te)},Ie.useContext=function(P){return ue.H.useContext(P)},Ie.useDebugValue=function(){},Ie.useDeferredValue=function(P,te){return ue.H.useDeferredValue(P,te)},Ie.useEffect=function(P,te,ce){var oe=ue.H;if(typeof ce=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return oe.useEffect(P,te)},Ie.useId=function(){return ue.H.useId()},Ie.useImperativeHandle=function(P,te,ce){return ue.H.useImperativeHandle(P,te,ce)},Ie.useInsertionEffect=function(P,te){return ue.H.useInsertionEffect(P,te)},Ie.useLayoutEffect=function(P,te){return ue.H.useLayoutEffect(P,te)},Ie.useMemo=function(P,te){return ue.H.useMemo(P,te)},Ie.useOptimistic=function(P,te){return ue.H.useOptimistic(P,te)},Ie.useReducer=function(P,te,ce){return ue.H.useReducer(P,te,ce)},Ie.useRef=function(P){return ue.H.useRef(P)},Ie.useState=function(P){return ue.H.useState(P)},Ie.useSyncExternalStore=function(P,te,ce){return ue.H.useSyncExternalStore(P,te,ce)},Ie.useTransition=function(){return ue.H.useTransition()},Ie.version="19.1.0",Ie}var k_;function mg(){return k_||(k_=1,dp.exports=rA()),dp.exports}var V=mg();const fa=eA(V);var hp={exports:{}},cu={},fp={exports:{}},mp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var V_;function iA(){return V_||(V_=1,function(n){function e($,ae){var me=$.length;$.push(ae);e:for(;0<me;){var ge=me-1>>>1,P=$[ge];if(0<a(P,ae))$[ge]=ae,$[me]=P,me=ge;else break e}}function t($){return $.length===0?null:$[0]}function i($){if($.length===0)return null;var ae=$[0],me=$.pop();if(me!==ae){$[0]=me;e:for(var ge=0,P=$.length,te=P>>>1;ge<te;){var ce=2*(ge+1)-1,oe=$[ce],be=ce+1,Pe=$[be];if(0>a(oe,me))be<P&&0>a(Pe,oe)?($[ge]=Pe,$[be]=me,ge=be):($[ge]=oe,$[ce]=me,ge=ce);else if(be<P&&0>a(Pe,me))$[ge]=Pe,$[be]=me,ge=be;else break e}}return ae}function a($,ae){var me=$.sortIndex-ae.sortIndex;return me!==0?me:$.id-ae.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,f=c.now();n.unstable_now=function(){return c.now()-f}}var m=[],g=[],v=1,w=null,T=3,C=!1,A=!1,U=!1,I=!1,q=typeof setTimeout=="function"?setTimeout:null,X=typeof clearTimeout=="function"?clearTimeout:null,Y=typeof setImmediate<"u"?setImmediate:null;function de($){for(var ae=t(g);ae!==null;){if(ae.callback===null)i(g);else if(ae.startTime<=$)i(g),ae.sortIndex=ae.expirationTime,e(m,ae);else break;ae=t(g)}}function ue($){if(U=!1,de($),!A)if(t(m)!==null)A=!0,ye||(ye=!0,B());else{var ae=t(g);ae!==null&&se(ue,ae.startTime-$)}}var ye=!1,M=-1,R=5,N=-1;function j(){return I?!0:!(n.unstable_now()-N<R)}function L(){if(I=!1,ye){var $=n.unstable_now();N=$;var ae=!0;try{e:{A=!1,U&&(U=!1,X(M),M=-1),C=!0;var me=T;try{t:{for(de($),w=t(m);w!==null&&!(w.expirationTime>$&&j());){var ge=w.callback;if(typeof ge=="function"){w.callback=null,T=w.priorityLevel;var P=ge(w.expirationTime<=$);if($=n.unstable_now(),typeof P=="function"){w.callback=P,de($),ae=!0;break t}w===t(m)&&i(m),de($)}else i(m);w=t(m)}if(w!==null)ae=!0;else{var te=t(g);te!==null&&se(ue,te.startTime-$),ae=!1}}break e}finally{w=null,T=me,C=!1}ae=void 0}}finally{ae?B():ye=!1}}}var B;if(typeof Y=="function")B=function(){Y(L)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,ct=O.port2;O.port1.onmessage=L,B=function(){ct.postMessage(null)}}else B=function(){q(L,0)};function se($,ae){M=q(function(){$(n.unstable_now())},ae)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function($){$.callback=null},n.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<$?Math.floor(1e3/$):5},n.unstable_getCurrentPriorityLevel=function(){return T},n.unstable_next=function($){switch(T){case 1:case 2:case 3:var ae=3;break;default:ae=T}var me=T;T=ae;try{return $()}finally{T=me}},n.unstable_requestPaint=function(){I=!0},n.unstable_runWithPriority=function($,ae){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var me=T;T=$;try{return ae()}finally{T=me}},n.unstable_scheduleCallback=function($,ae,me){var ge=n.unstable_now();switch(typeof me=="object"&&me!==null?(me=me.delay,me=typeof me=="number"&&0<me?ge+me:ge):me=ge,$){case 1:var P=-1;break;case 2:P=250;break;case 5:P=1073741823;break;case 4:P=1e4;break;default:P=5e3}return P=me+P,$={id:v++,callback:ae,priorityLevel:$,startTime:me,expirationTime:P,sortIndex:-1},me>ge?($.sortIndex=me,e(g,$),t(m)===null&&$===t(g)&&(U?(X(M),M=-1):U=!0,se(ue,me-ge))):($.sortIndex=P,e(m,$),A||C||(A=!0,ye||(ye=!0,B()))),$},n.unstable_shouldYield=j,n.unstable_wrapCallback=function($){var ae=T;return function(){var me=T;T=ae;try{return $.apply(this,arguments)}finally{T=me}}}}(mp)),mp}var L_;function sA(){return L_||(L_=1,fp.exports=iA()),fp.exports}var pp={exports:{}},tn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var U_;function aA(){if(U_)return tn;U_=1;var n=mg();function e(m){var g="https://react.dev/errors/"+m;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)g+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+m+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(m,g,v){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:w==null?null:""+w,children:m,containerInfo:g,implementation:v}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(m,g){if(m==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return tn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,tn.createPortal=function(m,g){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return l(m,g,null,v)},tn.flushSync=function(m){var g=c.T,v=i.p;try{if(c.T=null,i.p=2,m)return m()}finally{c.T=g,i.p=v,i.d.f()}},tn.preconnect=function(m,g){typeof m=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,i.d.C(m,g))},tn.prefetchDNS=function(m){typeof m=="string"&&i.d.D(m)},tn.preinit=function(m,g){if(typeof m=="string"&&g&&typeof g.as=="string"){var v=g.as,w=f(v,g.crossOrigin),T=typeof g.integrity=="string"?g.integrity:void 0,C=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;v==="style"?i.d.S(m,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:w,integrity:T,fetchPriority:C}):v==="script"&&i.d.X(m,{crossOrigin:w,integrity:T,fetchPriority:C,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},tn.preinitModule=function(m,g){if(typeof m=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var v=f(g.as,g.crossOrigin);i.d.M(m,{crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&i.d.M(m)},tn.preload=function(m,g){if(typeof m=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var v=g.as,w=f(v,g.crossOrigin);i.d.L(m,v,{crossOrigin:w,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},tn.preloadModule=function(m,g){if(typeof m=="string")if(g){var v=f(g.as,g.crossOrigin);i.d.m(m,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else i.d.m(m)},tn.requestFormReset=function(m){i.d.r(m)},tn.unstable_batchedUpdates=function(m,g){return m(g)},tn.useFormState=function(m,g,v){return c.H.useFormState(m,g,v)},tn.useFormStatus=function(){return c.H.useHostTransitionStatus()},tn.version="19.1.0",tn}var z_;function oA(){if(z_)return pp.exports;z_=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),pp.exports=aA(),pp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var B_;function lA(){if(B_)return cu;B_=1;var n=sA(),e=mg(),t=oA();function i(r){var s="https://react.dev/errors/"+r;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function l(r){var s=r,o=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,(s.flags&4098)!==0&&(o=s.return),r=s.return;while(r)}return s.tag===3?o:null}function c(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function f(r){if(l(r)!==r)throw Error(i(188))}function m(r){var s=r.alternate;if(!s){if(s=l(r),s===null)throw Error(i(188));return s!==r?null:r}for(var o=r,u=s;;){var h=o.return;if(h===null)break;var p=h.alternate;if(p===null){if(u=h.return,u!==null){o=u;continue}break}if(h.child===p.child){for(p=h.child;p;){if(p===o)return f(h),r;if(p===u)return f(h),s;p=p.sibling}throw Error(i(188))}if(o.return!==u.return)o=h,u=p;else{for(var E=!1,x=h.child;x;){if(x===o){E=!0,o=h,u=p;break}if(x===u){E=!0,u=h,o=p;break}x=x.sibling}if(!E){for(x=p.child;x;){if(x===o){E=!0,o=p,u=h;break}if(x===u){E=!0,u=p,o=h;break}x=x.sibling}if(!E)throw Error(i(189))}}if(o.alternate!==u)throw Error(i(190))}if(o.tag!==3)throw Error(i(188));return o.stateNode.current===o?r:s}function g(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r;for(r=r.child;r!==null;){if(s=g(r),s!==null)return s;r=r.sibling}return null}var v=Object.assign,w=Symbol.for("react.element"),T=Symbol.for("react.transitional.element"),C=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),U=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),q=Symbol.for("react.provider"),X=Symbol.for("react.consumer"),Y=Symbol.for("react.context"),de=Symbol.for("react.forward_ref"),ue=Symbol.for("react.suspense"),ye=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),j=Symbol.for("react.memo_cache_sentinel"),L=Symbol.iterator;function B(r){return r===null||typeof r!="object"?null:(r=L&&r[L]||r["@@iterator"],typeof r=="function"?r:null)}var O=Symbol.for("react.client.reference");function ct(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===O?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case A:return"Fragment";case I:return"Profiler";case U:return"StrictMode";case ue:return"Suspense";case ye:return"SuspenseList";case N:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case C:return"Portal";case Y:return(r.displayName||"Context")+".Provider";case X:return(r._context.displayName||"Context")+".Consumer";case de:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case M:return s=r.displayName||null,s!==null?s:ct(r.type)||"Memo";case R:s=r._payload,r=r._init;try{return ct(r(s))}catch{}}return null}var se=Array.isArray,$=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,me={pending:!1,data:null,method:null,action:null},ge=[],P=-1;function te(r){return{current:r}}function ce(r){0>P||(r.current=ge[P],ge[P]=null,P--)}function oe(r,s){P++,ge[P]=r.current,r.current=s}var be=te(null),Pe=te(null),Ae=te(null),kt=te(null);function rt(r,s){switch(oe(Ae,s),oe(Pe,r),oe(be,null),s.nodeType){case 9:case 11:r=(r=s.documentElement)&&(r=r.namespaceURI)?o_(r):0;break;default:if(r=s.tagName,s=s.namespaceURI)s=o_(s),r=l_(s,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}ce(be),oe(be,r)}function ur(){ce(be),ce(Pe),ce(Ae)}function Ai(r){r.memoizedState!==null&&oe(kt,r);var s=be.current,o=l_(s,r.type);s!==o&&(oe(Pe,r),oe(be,o))}function Vr(r){Pe.current===r&&(ce(be),ce(Pe)),kt.current===r&&(ce(kt),iu._currentValue=me)}var Ss=Object.prototype.hasOwnProperty,As=n.unstable_scheduleCallback,Rs=n.unstable_cancelCallback,tl=n.unstable_shouldYield,sc=n.unstable_requestPaint,Mn=n.unstable_now,cf=n.unstable_getCurrentPriorityLevel,nl=n.unstable_ImmediatePriority,Ca=n.unstable_UserBlockingPriority,Cs=n.unstable_NormalPriority,df=n.unstable_LowPriority,Na=n.unstable_IdlePriority,rl=n.log,ac=n.unstable_setDisableYieldValue,ft=null,Ke=null;function wn(r){if(typeof rl=="function"&&ac(r),Ke&&typeof Ke.setStrictMode=="function")try{Ke.setStrictMode(ft,r)}catch{}}var Jt=Math.clz32?Math.clz32:Ns,oc=Math.log,hf=Math.LN2;function Ns(r){return r>>>=0,r===0?32:31-(oc(r)/hf|0)|0}var Is=256,Ds=4194304;function Wn(r){var s=r&42;if(s!==0)return s;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function Ia(r,s,o){var u=r.pendingLanes;if(u===0)return 0;var h=0,p=r.suspendedLanes,E=r.pingedLanes;r=r.warmLanes;var x=u&134217727;return x!==0?(u=x&~p,u!==0?h=Wn(u):(E&=x,E!==0?h=Wn(E):o||(o=x&~r,o!==0&&(h=Wn(o))))):(x=u&~p,x!==0?h=Wn(x):E!==0?h=Wn(E):o||(o=u&~r,o!==0&&(h=Wn(o)))),h===0?0:s!==0&&s!==h&&(s&p)===0&&(p=h&-h,o=s&-s,p>=o||p===32&&(o&4194048)!==0)?s:h}function Os(r,s){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&s)===0}function il(r,s){switch(r){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function sl(){var r=Is;return Is<<=1,(Is&4194048)===0&&(Is=256),r}function al(){var r=Ds;return Ds<<=1,(Ds&62914560)===0&&(Ds=4194304),r}function Lr(r){for(var s=[],o=0;31>o;o++)s.push(r);return s}function Ur(r,s){r.pendingLanes|=s,s!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function ol(r,s,o,u,h,p){var E=r.pendingLanes;r.pendingLanes=o,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=o,r.entangledLanes&=o,r.errorRecoveryDisabledLanes&=o,r.shellSuspendCounter=0;var x=r.entanglements,D=r.expirationTimes,G=r.hiddenUpdates;for(o=E&~o;0<o;){var J=31-Jt(o),re=1<<J;x[J]=0,D[J]=-1;var K=G[J];if(K!==null)for(G[J]=null,J=0;J<K.length;J++){var Q=K[J];Q!==null&&(Q.lane&=-536870913)}o&=~re}u!==0&&cr(r,u,0),p!==0&&h===0&&r.tag!==0&&(r.suspendedLanes|=p&~(E&~s))}function cr(r,s,o){r.pendingLanes|=s,r.suspendedLanes&=~s;var u=31-Jt(s);r.entangledLanes|=s,r.entanglements[u]=r.entanglements[u]|1073741824|o&4194090}function ll(r,s){var o=r.entangledLanes|=s;for(r=r.entanglements;o;){var u=31-Jt(o),h=1<<u;h&s|r[u]&s&&(r[u]|=s),o&=~h}}function Ri(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function Da(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function Ci(){var r=ae.p;return r!==0?r:(r=window.event,r===void 0?32:R_(r.type))}function lc(r,s){var o=ae.p;try{return ae.p=r,s()}finally{ae.p=o}}var at=Math.random().toString(36).slice(2),Ct="__reactFiber$"+at,wt="__reactProps$"+at,jn="__reactContainer$"+at,ul="__reactEvents$"+at,ff="__reactListeners$"+at,Ni="__reactHandles$"+at,uc="__reactResources$"+at,Ps="__reactMarker$"+at;function Ii(r){delete r[Ct],delete r[wt],delete r[ul],delete r[ff],delete r[Ni]}function zr(r){var s=r[Ct];if(s)return s;for(var o=r.parentNode;o;){if(s=o[jn]||o[Ct]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(r=h_(r);r!==null;){if(o=r[Ct])return o;r=h_(r)}return s}r=o,o=r.parentNode}return null}function dr(r){if(r=r[Ct]||r[jn]){var s=r.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return r}return null}function hr(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r.stateNode;throw Error(i(33))}function ln(r){var s=r[uc];return s||(s=r[uc]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function vt(r){r[Ps]=!0}var cl=new Set,Oa={};function Zn(r,s){Br(r,s),Br(r+"Capture",s)}function Br(r,s){for(Oa[r]=s,r=0;r<s.length;r++)cl.add(s[r])}var cc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),dc={},Ms={};function hc(r){return Ss.call(Ms,r)?!0:Ss.call(dc,r)?!1:cc.test(r)?Ms[r]=!0:(dc[r]=!0,!1)}function Di(r,s,o){if(hc(s))if(o===null)r.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":r.removeAttribute(s);return;case"boolean":var u=s.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){r.removeAttribute(s);return}}r.setAttribute(s,""+o)}}function fr(r,s,o){if(o===null)r.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(s);return}r.setAttribute(s,""+o)}}function Ft(r,s,o,u){if(u===null)r.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(o);return}r.setAttributeNS(s,o,""+u)}}var js,fc;function qr(r){if(js===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);js=s&&s[1]||"",fc=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+js+r+fc}var Pa=!1;function Ma(r,s){if(!r||Pa)return"";Pa=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(s){var re=function(){throw Error()};if(Object.defineProperty(re.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(re,[])}catch(Q){var K=Q}Reflect.construct(r,[],re)}else{try{re.call()}catch(Q){K=Q}r.call(re.prototype)}}else{try{throw Error()}catch(Q){K=Q}(re=r())&&typeof re.catch=="function"&&re.catch(function(){})}}catch(Q){if(Q&&K&&typeof Q.stack=="string")return[Q.stack,K.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=u.DetermineComponentFrameRoot(),E=p[0],x=p[1];if(E&&x){var D=E.split(`
`),G=x.split(`
`);for(h=u=0;u<D.length&&!D[u].includes("DetermineComponentFrameRoot");)u++;for(;h<G.length&&!G[h].includes("DetermineComponentFrameRoot");)h++;if(u===D.length||h===G.length)for(u=D.length-1,h=G.length-1;1<=u&&0<=h&&D[u]!==G[h];)h--;for(;1<=u&&0<=h;u--,h--)if(D[u]!==G[h]){if(u!==1||h!==1)do if(u--,h--,0>h||D[u]!==G[h]){var J=`
`+D[u].replace(" at new "," at ");return r.displayName&&J.includes("<anonymous>")&&(J=J.replace("<anonymous>",r.displayName)),J}while(1<=u&&0<=h);break}}}finally{Pa=!1,Error.prepareStackTrace=o}return(o=r?r.displayName||r.name:"")?qr(o):""}function dl(r){switch(r.tag){case 26:case 27:case 5:return qr(r.type);case 16:return qr("Lazy");case 13:return qr("Suspense");case 19:return qr("SuspenseList");case 0:case 15:return Ma(r.type,!1);case 11:return Ma(r.type.render,!1);case 1:return Ma(r.type,!0);case 31:return qr("Activity");default:return""}}function ja(r){try{var s="";do s+=dl(r),r=r.return;while(r);return s}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function un(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function hl(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function mf(r){var s=hl(r)?"checked":"value",o=Object.getOwnPropertyDescriptor(r.constructor.prototype,s),u=""+r[s];if(!r.hasOwnProperty(s)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var h=o.get,p=o.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return h.call(this)},set:function(E){u=""+E,p.call(this,E)}}),Object.defineProperty(r,s,{enumerable:o.enumerable}),{getValue:function(){return u},setValue:function(E){u=""+E},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function ka(r){r._valueTracker||(r._valueTracker=mf(r))}function fl(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var o=s.getValue(),u="";return r&&(u=hl(r)?r.checked?"true":"false":r.value),r=u,r!==o?(s.setValue(r),!0):!1}function ks(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var pf=/[\n"\\]/g;function Tt(r){return r.replace(pf,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Tn(r,s,o,u,h,p,E,x){r.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?r.type=E:r.removeAttribute("type"),s!=null?E==="number"?(s===0&&r.value===""||r.value!=s)&&(r.value=""+un(s)):r.value!==""+un(s)&&(r.value=""+un(s)):E!=="submit"&&E!=="reset"||r.removeAttribute("value"),s!=null?Oi(r,E,un(s)):o!=null?Oi(r,E,un(o)):u!=null&&r.removeAttribute("value"),h==null&&p!=null&&(r.defaultChecked=!!p),h!=null&&(r.checked=h&&typeof h!="function"&&typeof h!="symbol"),x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?r.name=""+un(x):r.removeAttribute("name")}function Vs(r,s,o,u,h,p,E,x){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(r.type=p),s!=null||o!=null){if(!(p!=="submit"&&p!=="reset"||s!=null))return;o=o!=null?""+un(o):"",s=s!=null?""+un(s):o,x||s===r.value||(r.value=s),r.defaultValue=s}u=u??h,u=typeof u!="function"&&typeof u!="symbol"&&!!u,r.checked=x?r.checked:!!u,r.defaultChecked=!!u,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(r.name=E)}function Oi(r,s,o){s==="number"&&ks(r.ownerDocument)===r||r.defaultValue===""+o||(r.defaultValue=""+o)}function Hr(r,s,o,u){if(r=r.options,s){s={};for(var h=0;h<o.length;h++)s["$"+o[h]]=!0;for(o=0;o<r.length;o++)h=s.hasOwnProperty("$"+r[o].value),r[o].selected!==h&&(r[o].selected=h),h&&u&&(r[o].defaultSelected=!0)}else{for(o=""+un(o),s=null,h=0;h<r.length;h++){if(r[h].value===o){r[h].selected=!0,u&&(r[h].defaultSelected=!0);return}s!==null||r[h].disabled||(s=r[h])}s!==null&&(s.selected=!0)}}function Ze(r,s,o){if(s!=null&&(s=""+un(s),s!==r.value&&(r.value=s),o==null)){r.defaultValue!==s&&(r.defaultValue=s);return}r.defaultValue=o!=null?""+un(o):""}function Ls(r,s,o,u){if(s==null){if(u!=null){if(o!=null)throw Error(i(92));if(se(u)){if(1<u.length)throw Error(i(93));u=u[0]}o=u}o==null&&(o=""),s=o}o=un(s),r.defaultValue=o,u=r.textContent,u===o&&u!==""&&u!==null&&(r.value=u)}function kn(r,s){if(s){var o=r.firstChild;if(o&&o===r.lastChild&&o.nodeType===3){o.nodeValue=s;return}}r.textContent=s}var Us=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function mc(r,s,o){var u=s.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?r.setProperty(s,""):s==="float"?r.cssFloat="":r[s]="":u?r.setProperty(s,o):typeof o!="number"||o===0||Us.has(s)?s==="float"?r.cssFloat=o:r[s]=(""+o).trim():r[s]=o+"px"}function ml(r,s,o){if(s!=null&&typeof s!="object")throw Error(i(62));if(r=r.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||s!=null&&s.hasOwnProperty(u)||(u.indexOf("--")===0?r.setProperty(u,""):u==="float"?r.cssFloat="":r[u]="");for(var h in s)u=s[h],s.hasOwnProperty(h)&&o[h]!==u&&mc(r,h,u)}else for(var p in s)s.hasOwnProperty(p)&&mc(r,p,s[p])}function pl(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gf=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),yf=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Va(r){return yf.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}var Fr=null;function Vn(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Gr=null,$r=null;function gl(r){var s=dr(r);if(s&&(r=s.stateNode)){var o=r[wt]||null;e:switch(r=s.stateNode,s.type){case"input":if(Tn(r,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),s=o.name,o.type==="radio"&&s!=null){for(o=r;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Tt(""+s)+'"][type="radio"]'),s=0;s<o.length;s++){var u=o[s];if(u!==r&&u.form===r.form){var h=u[wt]||null;if(!h)throw Error(i(90));Tn(u,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(s=0;s<o.length;s++)u=o[s],u.form===r.form&&fl(u)}break e;case"textarea":Ze(r,o.value,o.defaultValue);break e;case"select":s=o.value,s!=null&&Hr(r,!!o.multiple,s,!1)}}}var mr=!1;function pc(r,s,o){if(mr)return r(s,o);mr=!0;try{var u=r(s);return u}finally{if(mr=!1,(Gr!==null||$r!==null)&&(ld(),Gr&&(s=Gr,r=$r,$r=Gr=null,gl(s),r)))for(s=0;s<r.length;s++)gl(r[s])}}function zs(r,s){var o=r.stateNode;if(o===null)return null;var u=o[wt]||null;if(u===null)return null;o=u[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(r=r.type,u=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!u;break e;default:r=!1}if(r)return null;if(o&&typeof o!="function")throw Error(i(231,s,typeof o));return o}var Jn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ln=!1;if(Jn)try{var Bs={};Object.defineProperty(Bs,"passive",{get:function(){Ln=!0}}),window.addEventListener("test",Bs,Bs),window.removeEventListener("test",Bs,Bs)}catch{Ln=!1}var pr=null,Pi=null,Yr=null;function yl(){if(Yr)return Yr;var r,s=Pi,o=s.length,u,h="value"in pr?pr.value:pr.textContent,p=h.length;for(r=0;r<o&&s[r]===h[r];r++);var E=o-r;for(u=1;u<=E&&s[o-u]===h[p-u];u++);return Yr=h.slice(r,1<u?1-u:void 0)}function gr(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function yr(){return!0}function vl(){return!1}function Vt(r){function s(o,u,h,p,E){this._reactName=o,this._targetInst=h,this.type=u,this.nativeEvent=p,this.target=E,this.currentTarget=null;for(var x in r)r.hasOwnProperty(x)&&(o=r[x],this[x]=o?o(p):p[x]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?yr:vl,this.isPropagationStopped=vl,this}return v(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=yr)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=yr)},persist:function(){},isPersistent:yr}),s}var $e={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},La=Vt($e),qs=v({},$e,{view:0,detail:0}),gc=Vt(qs),Ua,za,vr,Hs=v({},qs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$s,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==vr&&(vr&&r.type==="mousemove"?(Ua=r.screenX-vr.screenX,za=r.screenY-vr.screenY):za=Ua=0,vr=r),Ua)},movementY:function(r){return"movementY"in r?r.movementY:za}}),Un=Vt(Hs),yc=v({},Hs,{dataTransfer:0}),vf=Vt(yc),Fs=v({},qs,{relatedTarget:0}),Ba=Vt(Fs),_l=v({},$e,{animationName:0,elapsedTime:0,pseudoElement:0}),qa=Vt(_l),vc=v({},$e,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Ha=Vt(vc),_f=v({},$e,{data:0}),bl=Vt(_f),Gs={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_c={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},bc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function El(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=bc[r])?!!s[r]:!1}function $s(){return El}var Ec=v({},qs,{key:function(r){if(r.key){var s=Gs[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=gr(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?_c[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$s,charCode:function(r){return r.type==="keypress"?gr(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?gr(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Fa=Vt(Ec),wc=v({},Hs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),wl=Vt(wc),Kr=v({},qs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$s}),Tc=Vt(Kr),xc=v({},$e,{propertyName:0,elapsedTime:0,pseudoElement:0}),Sc=Vt(xc),Ac=v({},Hs,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Ga=Vt(Ac),cn=v({},$e,{newState:0,oldState:0}),Rc=Vt(cn),Cc=[9,13,27,32],_r=Jn&&"CompositionEvent"in window,d=null;Jn&&"documentMode"in document&&(d=document.documentMode);var _=Jn&&"TextEvent"in window&&!d,b=Jn&&(!_r||d&&8<d&&11>=d),S=" ",H=!1;function W(r,s){switch(r){case"keyup":return Cc.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function le(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Ue=!1;function Nt(r,s){switch(r){case"compositionend":return le(s);case"keypress":return s.which!==32?null:(H=!0,S);case"textInput":return r=s.data,r===S&&H?null:r;default:return null}}function ze(r,s){if(Ue)return r==="compositionend"||!_r&&W(r,s)?(r=yl(),Yr=Pi=pr=null,Ue=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return b&&s.locale!=="ko"?null:s.data;default:return null}}var Lt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function It(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!Lt[r.type]:s==="textarea"}function Qr(r,s,o,u){Gr?$r?$r.push(u):$r=[u]:Gr=u,s=md(s,"onChange"),0<s.length&&(o=new La("onChange","change",null,o,u),r.push({event:o,listeners:s}))}var Gt=null,br=null;function Tl(r){n_(r,0)}function Nc(r){var s=hr(r);if(fl(s))return r}function Ty(r,s){if(r==="change")return s}var xy=!1;if(Jn){var bf;if(Jn){var Ef="oninput"in document;if(!Ef){var Sy=document.createElement("div");Sy.setAttribute("oninput","return;"),Ef=typeof Sy.oninput=="function"}bf=Ef}else bf=!1;xy=bf&&(!document.documentMode||9<document.documentMode)}function Ay(){Gt&&(Gt.detachEvent("onpropertychange",Ry),br=Gt=null)}function Ry(r){if(r.propertyName==="value"&&Nc(br)){var s=[];Qr(s,br,r,Vn(r)),pc(Tl,s)}}function Ix(r,s,o){r==="focusin"?(Ay(),Gt=s,br=o,Gt.attachEvent("onpropertychange",Ry)):r==="focusout"&&Ay()}function Dx(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Nc(br)}function Ox(r,s){if(r==="click")return Nc(s)}function Px(r,s){if(r==="input"||r==="change")return Nc(s)}function Mx(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var xn=typeof Object.is=="function"?Object.is:Mx;function xl(r,s){if(xn(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var o=Object.keys(r),u=Object.keys(s);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var h=o[u];if(!Ss.call(s,h)||!xn(r[h],s[h]))return!1}return!0}function Cy(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Ny(r,s){var o=Cy(r);r=0;for(var u;o;){if(o.nodeType===3){if(u=r+o.textContent.length,r<=s&&u>=s)return{node:o,offset:s-r};r=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Cy(o)}}function Iy(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?Iy(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function Dy(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var s=ks(r.document);s instanceof r.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)r=s.contentWindow;else break;s=ks(r.document)}return s}function wf(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}var jx=Jn&&"documentMode"in document&&11>=document.documentMode,$a=null,Tf=null,Sl=null,xf=!1;function Oy(r,s,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;xf||$a==null||$a!==ks(u)||(u=$a,"selectionStart"in u&&wf(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Sl&&xl(Sl,u)||(Sl=u,u=md(Tf,"onSelect"),0<u.length&&(s=new La("onSelect","select",null,s,o),r.push({event:s,listeners:u}),s.target=$a)))}function Ys(r,s){var o={};return o[r.toLowerCase()]=s.toLowerCase(),o["Webkit"+r]="webkit"+s,o["Moz"+r]="moz"+s,o}var Ya={animationend:Ys("Animation","AnimationEnd"),animationiteration:Ys("Animation","AnimationIteration"),animationstart:Ys("Animation","AnimationStart"),transitionrun:Ys("Transition","TransitionRun"),transitionstart:Ys("Transition","TransitionStart"),transitioncancel:Ys("Transition","TransitionCancel"),transitionend:Ys("Transition","TransitionEnd")},Sf={},Py={};Jn&&(Py=document.createElement("div").style,"AnimationEvent"in window||(delete Ya.animationend.animation,delete Ya.animationiteration.animation,delete Ya.animationstart.animation),"TransitionEvent"in window||delete Ya.transitionend.transition);function Ks(r){if(Sf[r])return Sf[r];if(!Ya[r])return r;var s=Ya[r],o;for(o in s)if(s.hasOwnProperty(o)&&o in Py)return Sf[r]=s[o];return r}var My=Ks("animationend"),jy=Ks("animationiteration"),ky=Ks("animationstart"),kx=Ks("transitionrun"),Vx=Ks("transitionstart"),Lx=Ks("transitioncancel"),Vy=Ks("transitionend"),Ly=new Map,Af="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Af.push("scrollEnd");function er(r,s){Ly.set(r,s),Zn(s,[r])}var Uy=new WeakMap;function zn(r,s){if(typeof r=="object"&&r!==null){var o=Uy.get(r);return o!==void 0?o:(s={value:r,source:s,stack:ja(s)},Uy.set(r,s),s)}return{value:r,source:s,stack:ja(s)}}var Bn=[],Ka=0,Rf=0;function Ic(){for(var r=Ka,s=Rf=Ka=0;s<r;){var o=Bn[s];Bn[s++]=null;var u=Bn[s];Bn[s++]=null;var h=Bn[s];Bn[s++]=null;var p=Bn[s];if(Bn[s++]=null,u!==null&&h!==null){var E=u.pending;E===null?h.next=h:(h.next=E.next,E.next=h),u.pending=h}p!==0&&zy(o,h,p)}}function Dc(r,s,o,u){Bn[Ka++]=r,Bn[Ka++]=s,Bn[Ka++]=o,Bn[Ka++]=u,Rf|=u,r.lanes|=u,r=r.alternate,r!==null&&(r.lanes|=u)}function Cf(r,s,o,u){return Dc(r,s,o,u),Oc(r)}function Qa(r,s){return Dc(r,null,null,s),Oc(r)}function zy(r,s,o){r.lanes|=o;var u=r.alternate;u!==null&&(u.lanes|=o);for(var h=!1,p=r.return;p!==null;)p.childLanes|=o,u=p.alternate,u!==null&&(u.childLanes|=o),p.tag===22&&(r=p.stateNode,r===null||r._visibility&1||(h=!0)),r=p,p=p.return;return r.tag===3?(p=r.stateNode,h&&s!==null&&(h=31-Jt(o),r=p.hiddenUpdates,u=r[h],u===null?r[h]=[s]:u.push(s),s.lane=o|536870912),p):null}function Oc(r){if(50<Xl)throw Xl=0,Mm=null,Error(i(185));for(var s=r.return;s!==null;)r=s,s=r.return;return r.tag===3?r.stateNode:null}var Xa={};function Ux(r,s,o,u){this.tag=r,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Sn(r,s,o,u){return new Ux(r,s,o,u)}function Nf(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Xr(r,s){var o=r.alternate;return o===null?(o=Sn(r.tag,s,r.key,r.mode),o.elementType=r.elementType,o.type=r.type,o.stateNode=r.stateNode,o.alternate=r,r.alternate=o):(o.pendingProps=s,o.type=r.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=r.flags&65011712,o.childLanes=r.childLanes,o.lanes=r.lanes,o.child=r.child,o.memoizedProps=r.memoizedProps,o.memoizedState=r.memoizedState,o.updateQueue=r.updateQueue,s=r.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=r.sibling,o.index=r.index,o.ref=r.ref,o.refCleanup=r.refCleanup,o}function By(r,s){r.flags&=65011714;var o=r.alternate;return o===null?(r.childLanes=0,r.lanes=s,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,s=o.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),r}function Pc(r,s,o,u,h,p){var E=0;if(u=r,typeof r=="function")Nf(r)&&(E=1);else if(typeof r=="string")E=BS(r,o,be.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case N:return r=Sn(31,o,s,h),r.elementType=N,r.lanes=p,r;case A:return Qs(o.children,h,p,s);case U:E=8,h|=24;break;case I:return r=Sn(12,o,s,h|2),r.elementType=I,r.lanes=p,r;case ue:return r=Sn(13,o,s,h),r.elementType=ue,r.lanes=p,r;case ye:return r=Sn(19,o,s,h),r.elementType=ye,r.lanes=p,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case q:case Y:E=10;break e;case X:E=9;break e;case de:E=11;break e;case M:E=14;break e;case R:E=16,u=null;break e}E=29,o=Error(i(130,r===null?"null":typeof r,"")),u=null}return s=Sn(E,o,s,h),s.elementType=r,s.type=u,s.lanes=p,s}function Qs(r,s,o,u){return r=Sn(7,r,u,s),r.lanes=o,r}function If(r,s,o){return r=Sn(6,r,null,s),r.lanes=o,r}function Df(r,s,o){return s=Sn(4,r.children!==null?r.children:[],r.key,s),s.lanes=o,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}var Wa=[],Za=0,Mc=null,jc=0,qn=[],Hn=0,Xs=null,Wr=1,Zr="";function Ws(r,s){Wa[Za++]=jc,Wa[Za++]=Mc,Mc=r,jc=s}function qy(r,s,o){qn[Hn++]=Wr,qn[Hn++]=Zr,qn[Hn++]=Xs,Xs=r;var u=Wr;r=Zr;var h=32-Jt(u)-1;u&=~(1<<h),o+=1;var p=32-Jt(s)+h;if(30<p){var E=h-h%5;p=(u&(1<<E)-1).toString(32),u>>=E,h-=E,Wr=1<<32-Jt(s)+h|o<<h|u,Zr=p+r}else Wr=1<<p|o<<h|u,Zr=r}function Of(r){r.return!==null&&(Ws(r,1),qy(r,1,0))}function Pf(r){for(;r===Mc;)Mc=Wa[--Za],Wa[Za]=null,jc=Wa[--Za],Wa[Za]=null;for(;r===Xs;)Xs=qn[--Hn],qn[Hn]=null,Zr=qn[--Hn],qn[Hn]=null,Wr=qn[--Hn],qn[Hn]=null}var dn=null,mt=null,Fe=!1,Zs=null,Er=!1,Mf=Error(i(519));function Js(r){var s=Error(i(418,""));throw Cl(zn(s,r)),Mf}function Hy(r){var s=r.stateNode,o=r.type,u=r.memoizedProps;switch(s[Ct]=r,s[wt]=u,o){case"dialog":ke("cancel",s),ke("close",s);break;case"iframe":case"object":case"embed":ke("load",s);break;case"video":case"audio":for(o=0;o<Zl.length;o++)ke(Zl[o],s);break;case"source":ke("error",s);break;case"img":case"image":case"link":ke("error",s),ke("load",s);break;case"details":ke("toggle",s);break;case"input":ke("invalid",s),Vs(s,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),ka(s);break;case"select":ke("invalid",s);break;case"textarea":ke("invalid",s),Ls(s,u.value,u.defaultValue,u.children),ka(s)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||s.textContent===""+o||u.suppressHydrationWarning===!0||a_(s.textContent,o)?(u.popover!=null&&(ke("beforetoggle",s),ke("toggle",s)),u.onScroll!=null&&ke("scroll",s),u.onScrollEnd!=null&&ke("scrollend",s),u.onClick!=null&&(s.onclick=pd),s=!0):s=!1,s||Js(r)}function Fy(r){for(dn=r.return;dn;)switch(dn.tag){case 5:case 13:Er=!1;return;case 27:case 3:Er=!0;return;default:dn=dn.return}}function Al(r){if(r!==dn)return!1;if(!Fe)return Fy(r),Fe=!0,!1;var s=r.tag,o;if((o=s!==3&&s!==27)&&((o=s===5)&&(o=r.type,o=!(o!=="form"&&o!=="button")||Xm(r.type,r.memoizedProps)),o=!o),o&&mt&&Js(r),Fy(r),s===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));e:{for(r=r.nextSibling,s=0;r;){if(r.nodeType===8)if(o=r.data,o==="/$"){if(s===0){mt=nr(r.nextSibling);break e}s--}else o!=="$"&&o!=="$!"&&o!=="$?"||s++;r=r.nextSibling}mt=null}}else s===27?(s=mt,Qi(r.type)?(r=ep,ep=null,mt=r):mt=s):mt=dn?nr(r.stateNode.nextSibling):null;return!0}function Rl(){mt=dn=null,Fe=!1}function Gy(){var r=Zs;return r!==null&&(yn===null?yn=r:yn.push.apply(yn,r),Zs=null),r}function Cl(r){Zs===null?Zs=[r]:Zs.push(r)}var jf=te(null),ea=null,Jr=null;function Mi(r,s,o){oe(jf,s._currentValue),s._currentValue=o}function ei(r){r._currentValue=jf.current,ce(jf)}function kf(r,s,o){for(;r!==null;){var u=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),r===o)break;r=r.return}}function Vf(r,s,o,u){var h=r.child;for(h!==null&&(h.return=r);h!==null;){var p=h.dependencies;if(p!==null){var E=h.child;p=p.firstContext;e:for(;p!==null;){var x=p;p=h;for(var D=0;D<s.length;D++)if(x.context===s[D]){p.lanes|=o,x=p.alternate,x!==null&&(x.lanes|=o),kf(p.return,o,r),u||(E=null);break e}p=x.next}}else if(h.tag===18){if(E=h.return,E===null)throw Error(i(341));E.lanes|=o,p=E.alternate,p!==null&&(p.lanes|=o),kf(E,o,r),E=null}else E=h.child;if(E!==null)E.return=h;else for(E=h;E!==null;){if(E===r){E=null;break}if(h=E.sibling,h!==null){h.return=E.return,E=h;break}E=E.return}h=E}}function Nl(r,s,o,u){r=null;for(var h=s,p=!1;h!==null;){if(!p){if((h.flags&524288)!==0)p=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var E=h.alternate;if(E===null)throw Error(i(387));if(E=E.memoizedProps,E!==null){var x=h.type;xn(h.pendingProps.value,E.value)||(r!==null?r.push(x):r=[x])}}else if(h===kt.current){if(E=h.alternate,E===null)throw Error(i(387));E.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(r!==null?r.push(iu):r=[iu])}h=h.return}r!==null&&Vf(s,r,o,u),s.flags|=262144}function kc(r){for(r=r.firstContext;r!==null;){if(!xn(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function ta(r){ea=r,Jr=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function en(r){return $y(ea,r)}function Vc(r,s){return ea===null&&ta(r),$y(r,s)}function $y(r,s){var o=s._currentValue;if(s={context:s,memoizedValue:o,next:null},Jr===null){if(r===null)throw Error(i(308));Jr=s,r.dependencies={lanes:0,firstContext:s},r.flags|=524288}else Jr=Jr.next=s;return o}var zx=typeof AbortController<"u"?AbortController:function(){var r=[],s=this.signal={aborted:!1,addEventListener:function(o,u){r.push(u)}};this.abort=function(){s.aborted=!0,r.forEach(function(o){return o()})}},Bx=n.unstable_scheduleCallback,qx=n.unstable_NormalPriority,Dt={$$typeof:Y,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Lf(){return{controller:new zx,data:new Map,refCount:0}}function Il(r){r.refCount--,r.refCount===0&&Bx(qx,function(){r.controller.abort()})}var Dl=null,Uf=0,Ja=0,eo=null;function Hx(r,s){if(Dl===null){var o=Dl=[];Uf=0,Ja=Bm(),eo={status:"pending",value:void 0,then:function(u){o.push(u)}}}return Uf++,s.then(Yy,Yy),s}function Yy(){if(--Uf===0&&Dl!==null){eo!==null&&(eo.status="fulfilled");var r=Dl;Dl=null,Ja=0,eo=null;for(var s=0;s<r.length;s++)(0,r[s])()}}function Fx(r,s){var o=[],u={status:"pending",value:null,reason:null,then:function(h){o.push(h)}};return r.then(function(){u.status="fulfilled",u.value=s;for(var h=0;h<o.length;h++)(0,o[h])(s)},function(h){for(u.status="rejected",u.reason=h,h=0;h<o.length;h++)(0,o[h])(void 0)}),u}var Ky=$.S;$.S=function(r,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&Hx(r,s),Ky!==null&&Ky(r,s)};var na=te(null);function zf(){var r=na.current;return r!==null?r:it.pooledCache}function Lc(r,s){s===null?oe(na,na.current):oe(na,s.pool)}function Qy(){var r=zf();return r===null?null:{parent:Dt._currentValue,pool:r}}var Ol=Error(i(460)),Xy=Error(i(474)),Uc=Error(i(542)),Bf={then:function(){}};function Wy(r){return r=r.status,r==="fulfilled"||r==="rejected"}function zc(){}function Zy(r,s,o){switch(o=r[o],o===void 0?r.push(s):o!==s&&(s.then(zc,zc),s=o),s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,ev(r),r;default:if(typeof s.status=="string")s.then(zc,zc);else{if(r=it,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=s,r.status="pending",r.then(function(u){if(s.status==="pending"){var h=s;h.status="fulfilled",h.value=u}},function(u){if(s.status==="pending"){var h=s;h.status="rejected",h.reason=u}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,ev(r),r}throw Pl=s,Ol}}var Pl=null;function Jy(){if(Pl===null)throw Error(i(459));var r=Pl;return Pl=null,r}function ev(r){if(r===Ol||r===Uc)throw Error(i(483))}var ji=!1;function qf(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Hf(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function ki(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function Vi(r,s,o){var u=r.updateQueue;if(u===null)return null;if(u=u.shared,(Qe&2)!==0){var h=u.pending;return h===null?s.next=s:(s.next=h.next,h.next=s),u.pending=s,s=Oc(r),zy(r,null,o),s}return Dc(r,u,s,o),Oc(r)}function Ml(r,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194048)!==0)){var u=s.lanes;u&=r.pendingLanes,o|=u,s.lanes=o,ll(r,o)}}function Ff(r,s){var o=r.updateQueue,u=r.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var h=null,p=null;if(o=o.firstBaseUpdate,o!==null){do{var E={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};p===null?h=p=E:p=p.next=E,o=o.next}while(o!==null);p===null?h=p=s:p=p.next=s}else h=p=s;o={baseState:u.baseState,firstBaseUpdate:h,lastBaseUpdate:p,shared:u.shared,callbacks:u.callbacks},r.updateQueue=o;return}r=o.lastBaseUpdate,r===null?o.firstBaseUpdate=s:r.next=s,o.lastBaseUpdate=s}var Gf=!1;function jl(){if(Gf){var r=eo;if(r!==null)throw r}}function kl(r,s,o,u){Gf=!1;var h=r.updateQueue;ji=!1;var p=h.firstBaseUpdate,E=h.lastBaseUpdate,x=h.shared.pending;if(x!==null){h.shared.pending=null;var D=x,G=D.next;D.next=null,E===null?p=G:E.next=G,E=D;var J=r.alternate;J!==null&&(J=J.updateQueue,x=J.lastBaseUpdate,x!==E&&(x===null?J.firstBaseUpdate=G:x.next=G,J.lastBaseUpdate=D))}if(p!==null){var re=h.baseState;E=0,J=G=D=null,x=p;do{var K=x.lane&-536870913,Q=K!==x.lane;if(Q?(Be&K)===K:(u&K)===K){K!==0&&K===Ja&&(Gf=!0),J!==null&&(J=J.next={lane:0,tag:x.tag,payload:x.payload,callback:null,next:null});e:{var Se=r,Ee=x;K=s;var tt=o;switch(Ee.tag){case 1:if(Se=Ee.payload,typeof Se=="function"){re=Se.call(tt,re,K);break e}re=Se;break e;case 3:Se.flags=Se.flags&-65537|128;case 0:if(Se=Ee.payload,K=typeof Se=="function"?Se.call(tt,re,K):Se,K==null)break e;re=v({},re,K);break e;case 2:ji=!0}}K=x.callback,K!==null&&(r.flags|=64,Q&&(r.flags|=8192),Q=h.callbacks,Q===null?h.callbacks=[K]:Q.push(K))}else Q={lane:K,tag:x.tag,payload:x.payload,callback:x.callback,next:null},J===null?(G=J=Q,D=re):J=J.next=Q,E|=K;if(x=x.next,x===null){if(x=h.shared.pending,x===null)break;Q=x,x=Q.next,Q.next=null,h.lastBaseUpdate=Q,h.shared.pending=null}}while(!0);J===null&&(D=re),h.baseState=D,h.firstBaseUpdate=G,h.lastBaseUpdate=J,p===null&&(h.shared.lanes=0),Gi|=E,r.lanes=E,r.memoizedState=re}}function tv(r,s){if(typeof r!="function")throw Error(i(191,r));r.call(s)}function nv(r,s){var o=r.callbacks;if(o!==null)for(r.callbacks=null,r=0;r<o.length;r++)tv(o[r],s)}var to=te(null),Bc=te(0);function rv(r,s){r=oi,oe(Bc,r),oe(to,s),oi=r|s.baseLanes}function $f(){oe(Bc,oi),oe(to,to.current)}function Yf(){oi=Bc.current,ce(to),ce(Bc)}var Li=0,De=null,Je=null,xt=null,qc=!1,no=!1,ra=!1,Hc=0,Vl=0,ro=null,Gx=0;function _t(){throw Error(i(321))}function Kf(r,s){if(s===null)return!1;for(var o=0;o<s.length&&o<r.length;o++)if(!xn(r[o],s[o]))return!1;return!0}function Qf(r,s,o,u,h,p){return Li=p,De=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,$.H=r===null||r.memoizedState===null?zv:Bv,ra=!1,p=o(u,h),ra=!1,no&&(p=sv(s,o,u,h)),iv(r),p}function iv(r){$.H=Qc;var s=Je!==null&&Je.next!==null;if(Li=0,xt=Je=De=null,qc=!1,Vl=0,ro=null,s)throw Error(i(300));r===null||Ut||(r=r.dependencies,r!==null&&kc(r)&&(Ut=!0))}function sv(r,s,o,u){De=r;var h=0;do{if(no&&(ro=null),Vl=0,no=!1,25<=h)throw Error(i(301));if(h+=1,xt=Je=null,r.updateQueue!=null){var p=r.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}$.H=Zx,p=s(o,u)}while(no);return p}function $x(){var r=$.H,s=r.useState()[0];return s=typeof s.then=="function"?Ll(s):s,r=r.useState()[0],(Je!==null?Je.memoizedState:null)!==r&&(De.flags|=1024),s}function Xf(){var r=Hc!==0;return Hc=0,r}function Wf(r,s,o){s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~o}function Zf(r){if(qc){for(r=r.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}qc=!1}Li=0,xt=Je=De=null,no=!1,Vl=Hc=0,ro=null}function pn(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xt===null?De.memoizedState=xt=r:xt=xt.next=r,xt}function St(){if(Je===null){var r=De.alternate;r=r!==null?r.memoizedState:null}else r=Je.next;var s=xt===null?De.memoizedState:xt.next;if(s!==null)xt=s,Je=r;else{if(r===null)throw De.alternate===null?Error(i(467)):Error(i(310));Je=r,r={memoizedState:Je.memoizedState,baseState:Je.baseState,baseQueue:Je.baseQueue,queue:Je.queue,next:null},xt===null?De.memoizedState=xt=r:xt=xt.next=r}return xt}function Jf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ll(r){var s=Vl;return Vl+=1,ro===null&&(ro=[]),r=Zy(ro,r,s),s=De,(xt===null?s.memoizedState:xt.next)===null&&(s=s.alternate,$.H=s===null||s.memoizedState===null?zv:Bv),r}function Fc(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return Ll(r);if(r.$$typeof===Y)return en(r)}throw Error(i(438,String(r)))}function em(r){var s=null,o=De.updateQueue;if(o!==null&&(s=o.memoCache),s==null){var u=De.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(s={data:u.data.map(function(h){return h.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),o===null&&(o=Jf(),De.updateQueue=o),o.memoCache=s,o=s.data[s.index],o===void 0)for(o=s.data[s.index]=Array(r),u=0;u<r;u++)o[u]=j;return s.index++,o}function ti(r,s){return typeof s=="function"?s(r):s}function Gc(r){var s=St();return tm(s,Je,r)}function tm(r,s,o){var u=r.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=o;var h=r.baseQueue,p=u.pending;if(p!==null){if(h!==null){var E=h.next;h.next=p.next,p.next=E}s.baseQueue=h=p,u.pending=null}if(p=r.baseState,h===null)r.memoizedState=p;else{s=h.next;var x=E=null,D=null,G=s,J=!1;do{var re=G.lane&-536870913;if(re!==G.lane?(Be&re)===re:(Li&re)===re){var K=G.revertLane;if(K===0)D!==null&&(D=D.next={lane:0,revertLane:0,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),re===Ja&&(J=!0);else if((Li&K)===K){G=G.next,K===Ja&&(J=!0);continue}else re={lane:0,revertLane:G.revertLane,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},D===null?(x=D=re,E=p):D=D.next=re,De.lanes|=K,Gi|=K;re=G.action,ra&&o(p,re),p=G.hasEagerState?G.eagerState:o(p,re)}else K={lane:re,revertLane:G.revertLane,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},D===null?(x=D=K,E=p):D=D.next=K,De.lanes|=re,Gi|=re;G=G.next}while(G!==null&&G!==s);if(D===null?E=p:D.next=x,!xn(p,r.memoizedState)&&(Ut=!0,J&&(o=eo,o!==null)))throw o;r.memoizedState=p,r.baseState=E,r.baseQueue=D,u.lastRenderedState=p}return h===null&&(u.lanes=0),[r.memoizedState,u.dispatch]}function nm(r){var s=St(),o=s.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=r;var u=o.dispatch,h=o.pending,p=s.memoizedState;if(h!==null){o.pending=null;var E=h=h.next;do p=r(p,E.action),E=E.next;while(E!==h);xn(p,s.memoizedState)||(Ut=!0),s.memoizedState=p,s.baseQueue===null&&(s.baseState=p),o.lastRenderedState=p}return[p,u]}function av(r,s,o){var u=De,h=St(),p=Fe;if(p){if(o===void 0)throw Error(i(407));o=o()}else o=s();var E=!xn((Je||h).memoizedState,o);E&&(h.memoizedState=o,Ut=!0),h=h.queue;var x=uv.bind(null,u,h,r);if(Ul(2048,8,x,[r]),h.getSnapshot!==s||E||xt!==null&&xt.memoizedState.tag&1){if(u.flags|=2048,io(9,$c(),lv.bind(null,u,h,o,s),null),it===null)throw Error(i(349));p||(Li&124)!==0||ov(u,s,o)}return o}function ov(r,s,o){r.flags|=16384,r={getSnapshot:s,value:o},s=De.updateQueue,s===null?(s=Jf(),De.updateQueue=s,s.stores=[r]):(o=s.stores,o===null?s.stores=[r]:o.push(r))}function lv(r,s,o,u){s.value=o,s.getSnapshot=u,cv(s)&&dv(r)}function uv(r,s,o){return o(function(){cv(s)&&dv(r)})}function cv(r){var s=r.getSnapshot;r=r.value;try{var o=s();return!xn(r,o)}catch{return!0}}function dv(r){var s=Qa(r,2);s!==null&&In(s,r,2)}function rm(r){var s=pn();if(typeof r=="function"){var o=r;if(r=o(),ra){wn(!0);try{o()}finally{wn(!1)}}}return s.memoizedState=s.baseState=r,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ti,lastRenderedState:r},s}function hv(r,s,o,u){return r.baseState=o,tm(r,Je,typeof u=="function"?u:ti)}function Yx(r,s,o,u,h){if(Kc(r))throw Error(i(485));if(r=s.action,r!==null){var p={payload:h,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){p.listeners.push(E)}};$.T!==null?o(!0):p.isTransition=!1,u(p),o=s.pending,o===null?(p.next=s.pending=p,fv(s,p)):(p.next=o.next,s.pending=o.next=p)}}function fv(r,s){var o=s.action,u=s.payload,h=r.state;if(s.isTransition){var p=$.T,E={};$.T=E;try{var x=o(h,u),D=$.S;D!==null&&D(E,x),mv(r,s,x)}catch(G){im(r,s,G)}finally{$.T=p}}else try{p=o(h,u),mv(r,s,p)}catch(G){im(r,s,G)}}function mv(r,s,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){pv(r,s,u)},function(u){return im(r,s,u)}):pv(r,s,o)}function pv(r,s,o){s.status="fulfilled",s.value=o,gv(s),r.state=o,s=r.pending,s!==null&&(o=s.next,o===s?r.pending=null:(o=o.next,s.next=o,fv(r,o)))}function im(r,s,o){var u=r.pending;if(r.pending=null,u!==null){u=u.next;do s.status="rejected",s.reason=o,gv(s),s=s.next;while(s!==u)}r.action=null}function gv(r){r=r.listeners;for(var s=0;s<r.length;s++)(0,r[s])()}function yv(r,s){return s}function vv(r,s){if(Fe){var o=it.formState;if(o!==null){e:{var u=De;if(Fe){if(mt){t:{for(var h=mt,p=Er;h.nodeType!==8;){if(!p){h=null;break t}if(h=nr(h.nextSibling),h===null){h=null;break t}}p=h.data,h=p==="F!"||p==="F"?h:null}if(h){mt=nr(h.nextSibling),u=h.data==="F!";break e}}Js(u)}u=!1}u&&(s=o[0])}}return o=pn(),o.memoizedState=o.baseState=s,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:yv,lastRenderedState:s},o.queue=u,o=Vv.bind(null,De,u),u.dispatch=o,u=rm(!1),p=um.bind(null,De,!1,u.queue),u=pn(),h={state:s,dispatch:null,action:r,pending:null},u.queue=h,o=Yx.bind(null,De,h,p,o),h.dispatch=o,u.memoizedState=r,[s,o,!1]}function _v(r){var s=St();return bv(s,Je,r)}function bv(r,s,o){if(s=tm(r,s,yv)[0],r=Gc(ti)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var u=Ll(s)}catch(E){throw E===Ol?Uc:E}else u=s;s=St();var h=s.queue,p=h.dispatch;return o!==s.memoizedState&&(De.flags|=2048,io(9,$c(),Kx.bind(null,h,o),null)),[u,p,r]}function Kx(r,s){r.action=s}function Ev(r){var s=St(),o=Je;if(o!==null)return bv(s,o,r);St(),s=s.memoizedState,o=St();var u=o.queue.dispatch;return o.memoizedState=r,[s,u,!1]}function io(r,s,o,u){return r={tag:r,create:o,deps:u,inst:s,next:null},s=De.updateQueue,s===null&&(s=Jf(),De.updateQueue=s),o=s.lastEffect,o===null?s.lastEffect=r.next=r:(u=o.next,o.next=r,r.next=u,s.lastEffect=r),r}function $c(){return{destroy:void 0,resource:void 0}}function wv(){return St().memoizedState}function Yc(r,s,o,u){var h=pn();u=u===void 0?null:u,De.flags|=r,h.memoizedState=io(1|s,$c(),o,u)}function Ul(r,s,o,u){var h=St();u=u===void 0?null:u;var p=h.memoizedState.inst;Je!==null&&u!==null&&Kf(u,Je.memoizedState.deps)?h.memoizedState=io(s,p,o,u):(De.flags|=r,h.memoizedState=io(1|s,p,o,u))}function Tv(r,s){Yc(8390656,8,r,s)}function xv(r,s){Ul(2048,8,r,s)}function Sv(r,s){return Ul(4,2,r,s)}function Av(r,s){return Ul(4,4,r,s)}function Rv(r,s){if(typeof s=="function"){r=r();var o=s(r);return function(){typeof o=="function"?o():s(null)}}if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function Cv(r,s,o){o=o!=null?o.concat([r]):null,Ul(4,4,Rv.bind(null,s,r),o)}function sm(){}function Nv(r,s){var o=St();s=s===void 0?null:s;var u=o.memoizedState;return s!==null&&Kf(s,u[1])?u[0]:(o.memoizedState=[r,s],r)}function Iv(r,s){var o=St();s=s===void 0?null:s;var u=o.memoizedState;if(s!==null&&Kf(s,u[1]))return u[0];if(u=r(),ra){wn(!0);try{r()}finally{wn(!1)}}return o.memoizedState=[u,s],u}function am(r,s,o){return o===void 0||(Li&1073741824)!==0?r.memoizedState=s:(r.memoizedState=o,r=P0(),De.lanes|=r,Gi|=r,o)}function Dv(r,s,o,u){return xn(o,s)?o:to.current!==null?(r=am(r,o,u),xn(r,s)||(Ut=!0),r):(Li&42)===0?(Ut=!0,r.memoizedState=o):(r=P0(),De.lanes|=r,Gi|=r,s)}function Ov(r,s,o,u,h){var p=ae.p;ae.p=p!==0&&8>p?p:8;var E=$.T,x={};$.T=x,um(r,!1,s,o);try{var D=h(),G=$.S;if(G!==null&&G(x,D),D!==null&&typeof D=="object"&&typeof D.then=="function"){var J=Fx(D,u);zl(r,s,J,Nn(r))}else zl(r,s,u,Nn(r))}catch(re){zl(r,s,{then:function(){},status:"rejected",reason:re},Nn())}finally{ae.p=p,$.T=E}}function Qx(){}function om(r,s,o,u){if(r.tag!==5)throw Error(i(476));var h=Pv(r).queue;Ov(r,h,s,me,o===null?Qx:function(){return Mv(r),o(u)})}function Pv(r){var s=r.memoizedState;if(s!==null)return s;s={memoizedState:me,baseState:me,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ti,lastRenderedState:me},next:null};var o={};return s.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ti,lastRenderedState:o},next:null},r.memoizedState=s,r=r.alternate,r!==null&&(r.memoizedState=s),s}function Mv(r){var s=Pv(r).next.queue;zl(r,s,{},Nn())}function lm(){return en(iu)}function jv(){return St().memoizedState}function kv(){return St().memoizedState}function Xx(r){for(var s=r.return;s!==null;){switch(s.tag){case 24:case 3:var o=Nn();r=ki(o);var u=Vi(s,r,o);u!==null&&(In(u,s,o),Ml(u,s,o)),s={cache:Lf()},r.payload=s;return}s=s.return}}function Wx(r,s,o){var u=Nn();o={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},Kc(r)?Lv(s,o):(o=Cf(r,s,o,u),o!==null&&(In(o,r,u),Uv(o,s,u)))}function Vv(r,s,o){var u=Nn();zl(r,s,o,u)}function zl(r,s,o,u){var h={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(Kc(r))Lv(s,h);else{var p=r.alternate;if(r.lanes===0&&(p===null||p.lanes===0)&&(p=s.lastRenderedReducer,p!==null))try{var E=s.lastRenderedState,x=p(E,o);if(h.hasEagerState=!0,h.eagerState=x,xn(x,E))return Dc(r,s,h,0),it===null&&Ic(),!1}catch{}finally{}if(o=Cf(r,s,h,u),o!==null)return In(o,r,u),Uv(o,s,u),!0}return!1}function um(r,s,o,u){if(u={lane:2,revertLane:Bm(),action:u,hasEagerState:!1,eagerState:null,next:null},Kc(r)){if(s)throw Error(i(479))}else s=Cf(r,o,u,2),s!==null&&In(s,r,2)}function Kc(r){var s=r.alternate;return r===De||s!==null&&s===De}function Lv(r,s){no=qc=!0;var o=r.pending;o===null?s.next=s:(s.next=o.next,o.next=s),r.pending=s}function Uv(r,s,o){if((o&4194048)!==0){var u=s.lanes;u&=r.pendingLanes,o|=u,s.lanes=o,ll(r,o)}}var Qc={readContext:en,use:Fc,useCallback:_t,useContext:_t,useEffect:_t,useImperativeHandle:_t,useLayoutEffect:_t,useInsertionEffect:_t,useMemo:_t,useReducer:_t,useRef:_t,useState:_t,useDebugValue:_t,useDeferredValue:_t,useTransition:_t,useSyncExternalStore:_t,useId:_t,useHostTransitionStatus:_t,useFormState:_t,useActionState:_t,useOptimistic:_t,useMemoCache:_t,useCacheRefresh:_t},zv={readContext:en,use:Fc,useCallback:function(r,s){return pn().memoizedState=[r,s===void 0?null:s],r},useContext:en,useEffect:Tv,useImperativeHandle:function(r,s,o){o=o!=null?o.concat([r]):null,Yc(4194308,4,Rv.bind(null,s,r),o)},useLayoutEffect:function(r,s){return Yc(4194308,4,r,s)},useInsertionEffect:function(r,s){Yc(4,2,r,s)},useMemo:function(r,s){var o=pn();s=s===void 0?null:s;var u=r();if(ra){wn(!0);try{r()}finally{wn(!1)}}return o.memoizedState=[u,s],u},useReducer:function(r,s,o){var u=pn();if(o!==void 0){var h=o(s);if(ra){wn(!0);try{o(s)}finally{wn(!1)}}}else h=s;return u.memoizedState=u.baseState=h,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:h},u.queue=r,r=r.dispatch=Wx.bind(null,De,r),[u.memoizedState,r]},useRef:function(r){var s=pn();return r={current:r},s.memoizedState=r},useState:function(r){r=rm(r);var s=r.queue,o=Vv.bind(null,De,s);return s.dispatch=o,[r.memoizedState,o]},useDebugValue:sm,useDeferredValue:function(r,s){var o=pn();return am(o,r,s)},useTransition:function(){var r=rm(!1);return r=Ov.bind(null,De,r.queue,!0,!1),pn().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,s,o){var u=De,h=pn();if(Fe){if(o===void 0)throw Error(i(407));o=o()}else{if(o=s(),it===null)throw Error(i(349));(Be&124)!==0||ov(u,s,o)}h.memoizedState=o;var p={value:o,getSnapshot:s};return h.queue=p,Tv(uv.bind(null,u,p,r),[r]),u.flags|=2048,io(9,$c(),lv.bind(null,u,p,o,s),null),o},useId:function(){var r=pn(),s=it.identifierPrefix;if(Fe){var o=Zr,u=Wr;o=(u&~(1<<32-Jt(u)-1)).toString(32)+o,s="«"+s+"R"+o,o=Hc++,0<o&&(s+="H"+o.toString(32)),s+="»"}else o=Gx++,s="«"+s+"r"+o.toString(32)+"»";return r.memoizedState=s},useHostTransitionStatus:lm,useFormState:vv,useActionState:vv,useOptimistic:function(r){var s=pn();s.memoizedState=s.baseState=r;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=o,s=um.bind(null,De,!0,o),o.dispatch=s,[r,s]},useMemoCache:em,useCacheRefresh:function(){return pn().memoizedState=Xx.bind(null,De)}},Bv={readContext:en,use:Fc,useCallback:Nv,useContext:en,useEffect:xv,useImperativeHandle:Cv,useInsertionEffect:Sv,useLayoutEffect:Av,useMemo:Iv,useReducer:Gc,useRef:wv,useState:function(){return Gc(ti)},useDebugValue:sm,useDeferredValue:function(r,s){var o=St();return Dv(o,Je.memoizedState,r,s)},useTransition:function(){var r=Gc(ti)[0],s=St().memoizedState;return[typeof r=="boolean"?r:Ll(r),s]},useSyncExternalStore:av,useId:jv,useHostTransitionStatus:lm,useFormState:_v,useActionState:_v,useOptimistic:function(r,s){var o=St();return hv(o,Je,r,s)},useMemoCache:em,useCacheRefresh:kv},Zx={readContext:en,use:Fc,useCallback:Nv,useContext:en,useEffect:xv,useImperativeHandle:Cv,useInsertionEffect:Sv,useLayoutEffect:Av,useMemo:Iv,useReducer:nm,useRef:wv,useState:function(){return nm(ti)},useDebugValue:sm,useDeferredValue:function(r,s){var o=St();return Je===null?am(o,r,s):Dv(o,Je.memoizedState,r,s)},useTransition:function(){var r=nm(ti)[0],s=St().memoizedState;return[typeof r=="boolean"?r:Ll(r),s]},useSyncExternalStore:av,useId:jv,useHostTransitionStatus:lm,useFormState:Ev,useActionState:Ev,useOptimistic:function(r,s){var o=St();return Je!==null?hv(o,Je,r,s):(o.baseState=r,[r,o.queue.dispatch])},useMemoCache:em,useCacheRefresh:kv},so=null,Bl=0;function Xc(r){var s=Bl;return Bl+=1,so===null&&(so=[]),Zy(so,r,s)}function ql(r,s){s=s.props.ref,r.ref=s!==void 0?s:null}function Wc(r,s){throw s.$$typeof===w?Error(i(525)):(r=Object.prototype.toString.call(s),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r)))}function qv(r){var s=r._init;return s(r._payload)}function Hv(r){function s(z,k){if(r){var F=z.deletions;F===null?(z.deletions=[k],z.flags|=16):F.push(k)}}function o(z,k){if(!r)return null;for(;k!==null;)s(z,k),k=k.sibling;return null}function u(z){for(var k=new Map;z!==null;)z.key!==null?k.set(z.key,z):k.set(z.index,z),z=z.sibling;return k}function h(z,k){return z=Xr(z,k),z.index=0,z.sibling=null,z}function p(z,k,F){return z.index=F,r?(F=z.alternate,F!==null?(F=F.index,F<k?(z.flags|=67108866,k):F):(z.flags|=67108866,k)):(z.flags|=1048576,k)}function E(z){return r&&z.alternate===null&&(z.flags|=67108866),z}function x(z,k,F,ee){return k===null||k.tag!==6?(k=If(F,z.mode,ee),k.return=z,k):(k=h(k,F),k.return=z,k)}function D(z,k,F,ee){var pe=F.type;return pe===A?J(z,k,F.props.children,ee,F.key):k!==null&&(k.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===R&&qv(pe)===k.type)?(k=h(k,F.props),ql(k,F),k.return=z,k):(k=Pc(F.type,F.key,F.props,null,z.mode,ee),ql(k,F),k.return=z,k)}function G(z,k,F,ee){return k===null||k.tag!==4||k.stateNode.containerInfo!==F.containerInfo||k.stateNode.implementation!==F.implementation?(k=Df(F,z.mode,ee),k.return=z,k):(k=h(k,F.children||[]),k.return=z,k)}function J(z,k,F,ee,pe){return k===null||k.tag!==7?(k=Qs(F,z.mode,ee,pe),k.return=z,k):(k=h(k,F),k.return=z,k)}function re(z,k,F){if(typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint")return k=If(""+k,z.mode,F),k.return=z,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case T:return F=Pc(k.type,k.key,k.props,null,z.mode,F),ql(F,k),F.return=z,F;case C:return k=Df(k,z.mode,F),k.return=z,k;case R:var ee=k._init;return k=ee(k._payload),re(z,k,F)}if(se(k)||B(k))return k=Qs(k,z.mode,F,null),k.return=z,k;if(typeof k.then=="function")return re(z,Xc(k),F);if(k.$$typeof===Y)return re(z,Vc(z,k),F);Wc(z,k)}return null}function K(z,k,F,ee){var pe=k!==null?k.key:null;if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return pe!==null?null:x(z,k,""+F,ee);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case T:return F.key===pe?D(z,k,F,ee):null;case C:return F.key===pe?G(z,k,F,ee):null;case R:return pe=F._init,F=pe(F._payload),K(z,k,F,ee)}if(se(F)||B(F))return pe!==null?null:J(z,k,F,ee,null);if(typeof F.then=="function")return K(z,k,Xc(F),ee);if(F.$$typeof===Y)return K(z,k,Vc(z,F),ee);Wc(z,F)}return null}function Q(z,k,F,ee,pe){if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return z=z.get(F)||null,x(k,z,""+ee,pe);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case T:return z=z.get(ee.key===null?F:ee.key)||null,D(k,z,ee,pe);case C:return z=z.get(ee.key===null?F:ee.key)||null,G(k,z,ee,pe);case R:var Me=ee._init;return ee=Me(ee._payload),Q(z,k,F,ee,pe)}if(se(ee)||B(ee))return z=z.get(F)||null,J(k,z,ee,pe,null);if(typeof ee.then=="function")return Q(z,k,F,Xc(ee),pe);if(ee.$$typeof===Y)return Q(z,k,F,Vc(k,ee),pe);Wc(k,ee)}return null}function Se(z,k,F,ee){for(var pe=null,Me=null,ve=k,we=k=0,Bt=null;ve!==null&&we<F.length;we++){ve.index>we?(Bt=ve,ve=null):Bt=ve.sibling;var He=K(z,ve,F[we],ee);if(He===null){ve===null&&(ve=Bt);break}r&&ve&&He.alternate===null&&s(z,ve),k=p(He,k,we),Me===null?pe=He:Me.sibling=He,Me=He,ve=Bt}if(we===F.length)return o(z,ve),Fe&&Ws(z,we),pe;if(ve===null){for(;we<F.length;we++)ve=re(z,F[we],ee),ve!==null&&(k=p(ve,k,we),Me===null?pe=ve:Me.sibling=ve,Me=ve);return Fe&&Ws(z,we),pe}for(ve=u(ve);we<F.length;we++)Bt=Q(ve,z,we,F[we],ee),Bt!==null&&(r&&Bt.alternate!==null&&ve.delete(Bt.key===null?we:Bt.key),k=p(Bt,k,we),Me===null?pe=Bt:Me.sibling=Bt,Me=Bt);return r&&ve.forEach(function(es){return s(z,es)}),Fe&&Ws(z,we),pe}function Ee(z,k,F,ee){if(F==null)throw Error(i(151));for(var pe=null,Me=null,ve=k,we=k=0,Bt=null,He=F.next();ve!==null&&!He.done;we++,He=F.next()){ve.index>we?(Bt=ve,ve=null):Bt=ve.sibling;var es=K(z,ve,He.value,ee);if(es===null){ve===null&&(ve=Bt);break}r&&ve&&es.alternate===null&&s(z,ve),k=p(es,k,we),Me===null?pe=es:Me.sibling=es,Me=es,ve=Bt}if(He.done)return o(z,ve),Fe&&Ws(z,we),pe;if(ve===null){for(;!He.done;we++,He=F.next())He=re(z,He.value,ee),He!==null&&(k=p(He,k,we),Me===null?pe=He:Me.sibling=He,Me=He);return Fe&&Ws(z,we),pe}for(ve=u(ve);!He.done;we++,He=F.next())He=Q(ve,z,we,He.value,ee),He!==null&&(r&&He.alternate!==null&&ve.delete(He.key===null?we:He.key),k=p(He,k,we),Me===null?pe=He:Me.sibling=He,Me=He);return r&&ve.forEach(function(JS){return s(z,JS)}),Fe&&Ws(z,we),pe}function tt(z,k,F,ee){if(typeof F=="object"&&F!==null&&F.type===A&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case T:e:{for(var pe=F.key;k!==null;){if(k.key===pe){if(pe=F.type,pe===A){if(k.tag===7){o(z,k.sibling),ee=h(k,F.props.children),ee.return=z,z=ee;break e}}else if(k.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===R&&qv(pe)===k.type){o(z,k.sibling),ee=h(k,F.props),ql(ee,F),ee.return=z,z=ee;break e}o(z,k);break}else s(z,k);k=k.sibling}F.type===A?(ee=Qs(F.props.children,z.mode,ee,F.key),ee.return=z,z=ee):(ee=Pc(F.type,F.key,F.props,null,z.mode,ee),ql(ee,F),ee.return=z,z=ee)}return E(z);case C:e:{for(pe=F.key;k!==null;){if(k.key===pe)if(k.tag===4&&k.stateNode.containerInfo===F.containerInfo&&k.stateNode.implementation===F.implementation){o(z,k.sibling),ee=h(k,F.children||[]),ee.return=z,z=ee;break e}else{o(z,k);break}else s(z,k);k=k.sibling}ee=Df(F,z.mode,ee),ee.return=z,z=ee}return E(z);case R:return pe=F._init,F=pe(F._payload),tt(z,k,F,ee)}if(se(F))return Se(z,k,F,ee);if(B(F)){if(pe=B(F),typeof pe!="function")throw Error(i(150));return F=pe.call(F),Ee(z,k,F,ee)}if(typeof F.then=="function")return tt(z,k,Xc(F),ee);if(F.$$typeof===Y)return tt(z,k,Vc(z,F),ee);Wc(z,F)}return typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint"?(F=""+F,k!==null&&k.tag===6?(o(z,k.sibling),ee=h(k,F),ee.return=z,z=ee):(o(z,k),ee=If(F,z.mode,ee),ee.return=z,z=ee),E(z)):o(z,k)}return function(z,k,F,ee){try{Bl=0;var pe=tt(z,k,F,ee);return so=null,pe}catch(ve){if(ve===Ol||ve===Uc)throw ve;var Me=Sn(29,ve,null,z.mode);return Me.lanes=ee,Me.return=z,Me}finally{}}}var ao=Hv(!0),Fv=Hv(!1),Fn=te(null),wr=null;function Ui(r){var s=r.alternate;oe(Ot,Ot.current&1),oe(Fn,r),wr===null&&(s===null||to.current!==null||s.memoizedState!==null)&&(wr=r)}function Gv(r){if(r.tag===22){if(oe(Ot,Ot.current),oe(Fn,r),wr===null){var s=r.alternate;s!==null&&s.memoizedState!==null&&(wr=r)}}else zi()}function zi(){oe(Ot,Ot.current),oe(Fn,Fn.current)}function ni(r){ce(Fn),wr===r&&(wr=null),ce(Ot)}var Ot=te(0);function Zc(r){for(var s=r;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||Jm(o)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function cm(r,s,o,u){s=r.memoizedState,o=o(u,s),o=o==null?s:v({},s,o),r.memoizedState=o,r.lanes===0&&(r.updateQueue.baseState=o)}var dm={enqueueSetState:function(r,s,o){r=r._reactInternals;var u=Nn(),h=ki(u);h.payload=s,o!=null&&(h.callback=o),s=Vi(r,h,u),s!==null&&(In(s,r,u),Ml(s,r,u))},enqueueReplaceState:function(r,s,o){r=r._reactInternals;var u=Nn(),h=ki(u);h.tag=1,h.payload=s,o!=null&&(h.callback=o),s=Vi(r,h,u),s!==null&&(In(s,r,u),Ml(s,r,u))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var o=Nn(),u=ki(o);u.tag=2,s!=null&&(u.callback=s),s=Vi(r,u,o),s!==null&&(In(s,r,o),Ml(s,r,o))}};function $v(r,s,o,u,h,p,E){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(u,p,E):s.prototype&&s.prototype.isPureReactComponent?!xl(o,u)||!xl(h,p):!0}function Yv(r,s,o,u){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,u),s.state!==r&&dm.enqueueReplaceState(s,s.state,null)}function ia(r,s){var o=s;if("ref"in s){o={};for(var u in s)u!=="ref"&&(o[u]=s[u])}if(r=r.defaultProps){o===s&&(o=v({},o));for(var h in r)o[h]===void 0&&(o[h]=r[h])}return o}var Jc=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)};function Kv(r){Jc(r)}function Qv(r){console.error(r)}function Xv(r){Jc(r)}function ed(r,s){try{var o=r.onUncaughtError;o(s.value,{componentStack:s.stack})}catch(u){setTimeout(function(){throw u})}}function Wv(r,s,o){try{var u=r.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function hm(r,s,o){return o=ki(o),o.tag=3,o.payload={element:null},o.callback=function(){ed(r,s)},o}function Zv(r){return r=ki(r),r.tag=3,r}function Jv(r,s,o,u){var h=o.type.getDerivedStateFromError;if(typeof h=="function"){var p=u.value;r.payload=function(){return h(p)},r.callback=function(){Wv(s,o,u)}}var E=o.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(r.callback=function(){Wv(s,o,u),typeof h!="function"&&($i===null?$i=new Set([this]):$i.add(this));var x=u.stack;this.componentDidCatch(u.value,{componentStack:x!==null?x:""})})}function Jx(r,s,o,u,h){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(s=o.alternate,s!==null&&Nl(s,o,h,!0),o=Fn.current,o!==null){switch(o.tag){case 13:return wr===null?km():o.alternate===null&&pt===0&&(pt=3),o.flags&=-257,o.flags|=65536,o.lanes=h,u===Bf?o.flags|=16384:(s=o.updateQueue,s===null?o.updateQueue=new Set([u]):s.add(u),Lm(r,u,h)),!1;case 22:return o.flags|=65536,u===Bf?o.flags|=16384:(s=o.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=s):(o=s.retryQueue,o===null?s.retryQueue=new Set([u]):o.add(u)),Lm(r,u,h)),!1}throw Error(i(435,o.tag))}return Lm(r,u,h),km(),!1}if(Fe)return s=Fn.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=h,u!==Mf&&(r=Error(i(422),{cause:u}),Cl(zn(r,o)))):(u!==Mf&&(s=Error(i(423),{cause:u}),Cl(zn(s,o))),r=r.current.alternate,r.flags|=65536,h&=-h,r.lanes|=h,u=zn(u,o),h=hm(r.stateNode,u,h),Ff(r,h),pt!==4&&(pt=2)),!1;var p=Error(i(520),{cause:u});if(p=zn(p,o),Ql===null?Ql=[p]:Ql.push(p),pt!==4&&(pt=2),s===null)return!0;u=zn(u,o),o=s;do{switch(o.tag){case 3:return o.flags|=65536,r=h&-h,o.lanes|=r,r=hm(o.stateNode,u,r),Ff(o,r),!1;case 1:if(s=o.type,p=o.stateNode,(o.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&($i===null||!$i.has(p))))return o.flags|=65536,h&=-h,o.lanes|=h,h=Zv(h),Jv(h,r,o,u),Ff(o,h),!1}o=o.return}while(o!==null);return!1}var e0=Error(i(461)),Ut=!1;function $t(r,s,o,u){s.child=r===null?Fv(s,null,o,u):ao(s,r.child,o,u)}function t0(r,s,o,u,h){o=o.render;var p=s.ref;if("ref"in u){var E={};for(var x in u)x!=="ref"&&(E[x]=u[x])}else E=u;return ta(s),u=Qf(r,s,o,E,p,h),x=Xf(),r!==null&&!Ut?(Wf(r,s,h),ri(r,s,h)):(Fe&&x&&Of(s),s.flags|=1,$t(r,s,u,h),s.child)}function n0(r,s,o,u,h){if(r===null){var p=o.type;return typeof p=="function"&&!Nf(p)&&p.defaultProps===void 0&&o.compare===null?(s.tag=15,s.type=p,r0(r,s,p,u,h)):(r=Pc(o.type,null,u,s,s.mode,h),r.ref=s.ref,r.return=s,s.child=r)}if(p=r.child,!bm(r,h)){var E=p.memoizedProps;if(o=o.compare,o=o!==null?o:xl,o(E,u)&&r.ref===s.ref)return ri(r,s,h)}return s.flags|=1,r=Xr(p,u),r.ref=s.ref,r.return=s,s.child=r}function r0(r,s,o,u,h){if(r!==null){var p=r.memoizedProps;if(xl(p,u)&&r.ref===s.ref)if(Ut=!1,s.pendingProps=u=p,bm(r,h))(r.flags&131072)!==0&&(Ut=!0);else return s.lanes=r.lanes,ri(r,s,h)}return fm(r,s,o,u,h)}function i0(r,s,o){var u=s.pendingProps,h=u.children,p=r!==null?r.memoizedState:null;if(u.mode==="hidden"){if((s.flags&128)!==0){if(u=p!==null?p.baseLanes|o:o,r!==null){for(h=s.child=r.child,p=0;h!==null;)p=p|h.lanes|h.childLanes,h=h.sibling;s.childLanes=p&~u}else s.childLanes=0,s.child=null;return s0(r,s,u,o)}if((o&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},r!==null&&Lc(s,p!==null?p.cachePool:null),p!==null?rv(s,p):$f(),Gv(s);else return s.lanes=s.childLanes=536870912,s0(r,s,p!==null?p.baseLanes|o:o,o)}else p!==null?(Lc(s,p.cachePool),rv(s,p),zi(),s.memoizedState=null):(r!==null&&Lc(s,null),$f(),zi());return $t(r,s,h,o),s.child}function s0(r,s,o,u){var h=zf();return h=h===null?null:{parent:Dt._currentValue,pool:h},s.memoizedState={baseLanes:o,cachePool:h},r!==null&&Lc(s,null),$f(),Gv(s),r!==null&&Nl(r,s,u,!0),null}function td(r,s){var o=s.ref;if(o===null)r!==null&&r.ref!==null&&(s.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(i(284));(r===null||r.ref!==o)&&(s.flags|=4194816)}}function fm(r,s,o,u,h){return ta(s),o=Qf(r,s,o,u,void 0,h),u=Xf(),r!==null&&!Ut?(Wf(r,s,h),ri(r,s,h)):(Fe&&u&&Of(s),s.flags|=1,$t(r,s,o,h),s.child)}function a0(r,s,o,u,h,p){return ta(s),s.updateQueue=null,o=sv(s,u,o,h),iv(r),u=Xf(),r!==null&&!Ut?(Wf(r,s,p),ri(r,s,p)):(Fe&&u&&Of(s),s.flags|=1,$t(r,s,o,p),s.child)}function o0(r,s,o,u,h){if(ta(s),s.stateNode===null){var p=Xa,E=o.contextType;typeof E=="object"&&E!==null&&(p=en(E)),p=new o(u,p),s.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=dm,s.stateNode=p,p._reactInternals=s,p=s.stateNode,p.props=u,p.state=s.memoizedState,p.refs={},qf(s),E=o.contextType,p.context=typeof E=="object"&&E!==null?en(E):Xa,p.state=s.memoizedState,E=o.getDerivedStateFromProps,typeof E=="function"&&(cm(s,o,E,u),p.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(E=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),E!==p.state&&dm.enqueueReplaceState(p,p.state,null),kl(s,u,p,h),jl(),p.state=s.memoizedState),typeof p.componentDidMount=="function"&&(s.flags|=4194308),u=!0}else if(r===null){p=s.stateNode;var x=s.memoizedProps,D=ia(o,x);p.props=D;var G=p.context,J=o.contextType;E=Xa,typeof J=="object"&&J!==null&&(E=en(J));var re=o.getDerivedStateFromProps;J=typeof re=="function"||typeof p.getSnapshotBeforeUpdate=="function",x=s.pendingProps!==x,J||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(x||G!==E)&&Yv(s,p,u,E),ji=!1;var K=s.memoizedState;p.state=K,kl(s,u,p,h),jl(),G=s.memoizedState,x||K!==G||ji?(typeof re=="function"&&(cm(s,o,re,u),G=s.memoizedState),(D=ji||$v(s,o,D,u,K,G,E))?(J||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(s.flags|=4194308)):(typeof p.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=G),p.props=u,p.state=G,p.context=E,u=D):(typeof p.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{p=s.stateNode,Hf(r,s),E=s.memoizedProps,J=ia(o,E),p.props=J,re=s.pendingProps,K=p.context,G=o.contextType,D=Xa,typeof G=="object"&&G!==null&&(D=en(G)),x=o.getDerivedStateFromProps,(G=typeof x=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(E!==re||K!==D)&&Yv(s,p,u,D),ji=!1,K=s.memoizedState,p.state=K,kl(s,u,p,h),jl();var Q=s.memoizedState;E!==re||K!==Q||ji||r!==null&&r.dependencies!==null&&kc(r.dependencies)?(typeof x=="function"&&(cm(s,o,x,u),Q=s.memoizedState),(J=ji||$v(s,o,J,u,K,Q,D)||r!==null&&r.dependencies!==null&&kc(r.dependencies))?(G||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(u,Q,D),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(u,Q,D)),typeof p.componentDidUpdate=="function"&&(s.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof p.componentDidUpdate!="function"||E===r.memoizedProps&&K===r.memoizedState||(s.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||E===r.memoizedProps&&K===r.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=Q),p.props=u,p.state=Q,p.context=D,u=J):(typeof p.componentDidUpdate!="function"||E===r.memoizedProps&&K===r.memoizedState||(s.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||E===r.memoizedProps&&K===r.memoizedState||(s.flags|=1024),u=!1)}return p=u,td(r,s),u=(s.flags&128)!==0,p||u?(p=s.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:p.render(),s.flags|=1,r!==null&&u?(s.child=ao(s,r.child,null,h),s.child=ao(s,null,o,h)):$t(r,s,o,h),s.memoizedState=p.state,r=s.child):r=ri(r,s,h),r}function l0(r,s,o,u){return Rl(),s.flags|=256,$t(r,s,o,u),s.child}var mm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function pm(r){return{baseLanes:r,cachePool:Qy()}}function gm(r,s,o){return r=r!==null?r.childLanes&~o:0,s&&(r|=Gn),r}function u0(r,s,o){var u=s.pendingProps,h=!1,p=(s.flags&128)!==0,E;if((E=p)||(E=r!==null&&r.memoizedState===null?!1:(Ot.current&2)!==0),E&&(h=!0,s.flags&=-129),E=(s.flags&32)!==0,s.flags&=-33,r===null){if(Fe){if(h?Ui(s):zi(),Fe){var x=mt,D;if(D=x){e:{for(D=x,x=Er;D.nodeType!==8;){if(!x){x=null;break e}if(D=nr(D.nextSibling),D===null){x=null;break e}}x=D}x!==null?(s.memoizedState={dehydrated:x,treeContext:Xs!==null?{id:Wr,overflow:Zr}:null,retryLane:536870912,hydrationErrors:null},D=Sn(18,null,null,0),D.stateNode=x,D.return=s,s.child=D,dn=s,mt=null,D=!0):D=!1}D||Js(s)}if(x=s.memoizedState,x!==null&&(x=x.dehydrated,x!==null))return Jm(x)?s.lanes=32:s.lanes=536870912,null;ni(s)}return x=u.children,u=u.fallback,h?(zi(),h=s.mode,x=nd({mode:"hidden",children:x},h),u=Qs(u,h,o,null),x.return=s,u.return=s,x.sibling=u,s.child=x,h=s.child,h.memoizedState=pm(o),h.childLanes=gm(r,E,o),s.memoizedState=mm,u):(Ui(s),ym(s,x))}if(D=r.memoizedState,D!==null&&(x=D.dehydrated,x!==null)){if(p)s.flags&256?(Ui(s),s.flags&=-257,s=vm(r,s,o)):s.memoizedState!==null?(zi(),s.child=r.child,s.flags|=128,s=null):(zi(),h=u.fallback,x=s.mode,u=nd({mode:"visible",children:u.children},x),h=Qs(h,x,o,null),h.flags|=2,u.return=s,h.return=s,u.sibling=h,s.child=u,ao(s,r.child,null,o),u=s.child,u.memoizedState=pm(o),u.childLanes=gm(r,E,o),s.memoizedState=mm,s=h);else if(Ui(s),Jm(x)){if(E=x.nextSibling&&x.nextSibling.dataset,E)var G=E.dgst;E=G,u=Error(i(419)),u.stack="",u.digest=E,Cl({value:u,source:null,stack:null}),s=vm(r,s,o)}else if(Ut||Nl(r,s,o,!1),E=(o&r.childLanes)!==0,Ut||E){if(E=it,E!==null&&(u=o&-o,u=(u&42)!==0?1:Ri(u),u=(u&(E.suspendedLanes|o))!==0?0:u,u!==0&&u!==D.retryLane))throw D.retryLane=u,Qa(r,u),In(E,r,u),e0;x.data==="$?"||km(),s=vm(r,s,o)}else x.data==="$?"?(s.flags|=192,s.child=r.child,s=null):(r=D.treeContext,mt=nr(x.nextSibling),dn=s,Fe=!0,Zs=null,Er=!1,r!==null&&(qn[Hn++]=Wr,qn[Hn++]=Zr,qn[Hn++]=Xs,Wr=r.id,Zr=r.overflow,Xs=s),s=ym(s,u.children),s.flags|=4096);return s}return h?(zi(),h=u.fallback,x=s.mode,D=r.child,G=D.sibling,u=Xr(D,{mode:"hidden",children:u.children}),u.subtreeFlags=D.subtreeFlags&65011712,G!==null?h=Xr(G,h):(h=Qs(h,x,o,null),h.flags|=2),h.return=s,u.return=s,u.sibling=h,s.child=u,u=h,h=s.child,x=r.child.memoizedState,x===null?x=pm(o):(D=x.cachePool,D!==null?(G=Dt._currentValue,D=D.parent!==G?{parent:G,pool:G}:D):D=Qy(),x={baseLanes:x.baseLanes|o,cachePool:D}),h.memoizedState=x,h.childLanes=gm(r,E,o),s.memoizedState=mm,u):(Ui(s),o=r.child,r=o.sibling,o=Xr(o,{mode:"visible",children:u.children}),o.return=s,o.sibling=null,r!==null&&(E=s.deletions,E===null?(s.deletions=[r],s.flags|=16):E.push(r)),s.child=o,s.memoizedState=null,o)}function ym(r,s){return s=nd({mode:"visible",children:s},r.mode),s.return=r,r.child=s}function nd(r,s){return r=Sn(22,r,null,s),r.lanes=0,r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},r}function vm(r,s,o){return ao(s,r.child,null,o),r=ym(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function c0(r,s,o){r.lanes|=s;var u=r.alternate;u!==null&&(u.lanes|=s),kf(r.return,s,o)}function _m(r,s,o,u,h){var p=r.memoizedState;p===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:h}:(p.isBackwards=s,p.rendering=null,p.renderingStartTime=0,p.last=u,p.tail=o,p.tailMode=h)}function d0(r,s,o){var u=s.pendingProps,h=u.revealOrder,p=u.tail;if($t(r,s,u.children,o),u=Ot.current,(u&2)!==0)u=u&1|2,s.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&c0(r,o,s);else if(r.tag===19)c0(r,o,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}u&=1}switch(oe(Ot,u),h){case"forwards":for(o=s.child,h=null;o!==null;)r=o.alternate,r!==null&&Zc(r)===null&&(h=o),o=o.sibling;o=h,o===null?(h=s.child,s.child=null):(h=o.sibling,o.sibling=null),_m(s,!1,h,o,p);break;case"backwards":for(o=null,h=s.child,s.child=null;h!==null;){if(r=h.alternate,r!==null&&Zc(r)===null){s.child=h;break}r=h.sibling,h.sibling=o,o=h,h=r}_m(s,!0,o,null,p);break;case"together":_m(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function ri(r,s,o){if(r!==null&&(s.dependencies=r.dependencies),Gi|=s.lanes,(o&s.childLanes)===0)if(r!==null){if(Nl(r,s,o,!1),(o&s.childLanes)===0)return null}else return null;if(r!==null&&s.child!==r.child)throw Error(i(153));if(s.child!==null){for(r=s.child,o=Xr(r,r.pendingProps),s.child=o,o.return=s;r.sibling!==null;)r=r.sibling,o=o.sibling=Xr(r,r.pendingProps),o.return=s;o.sibling=null}return s.child}function bm(r,s){return(r.lanes&s)!==0?!0:(r=r.dependencies,!!(r!==null&&kc(r)))}function eS(r,s,o){switch(s.tag){case 3:rt(s,s.stateNode.containerInfo),Mi(s,Dt,r.memoizedState.cache),Rl();break;case 27:case 5:Ai(s);break;case 4:rt(s,s.stateNode.containerInfo);break;case 10:Mi(s,s.type,s.memoizedProps.value);break;case 13:var u=s.memoizedState;if(u!==null)return u.dehydrated!==null?(Ui(s),s.flags|=128,null):(o&s.child.childLanes)!==0?u0(r,s,o):(Ui(s),r=ri(r,s,o),r!==null?r.sibling:null);Ui(s);break;case 19:var h=(r.flags&128)!==0;if(u=(o&s.childLanes)!==0,u||(Nl(r,s,o,!1),u=(o&s.childLanes)!==0),h){if(u)return d0(r,s,o);s.flags|=128}if(h=s.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),oe(Ot,Ot.current),u)break;return null;case 22:case 23:return s.lanes=0,i0(r,s,o);case 24:Mi(s,Dt,r.memoizedState.cache)}return ri(r,s,o)}function h0(r,s,o){if(r!==null)if(r.memoizedProps!==s.pendingProps)Ut=!0;else{if(!bm(r,o)&&(s.flags&128)===0)return Ut=!1,eS(r,s,o);Ut=(r.flags&131072)!==0}else Ut=!1,Fe&&(s.flags&1048576)!==0&&qy(s,jc,s.index);switch(s.lanes=0,s.tag){case 16:e:{r=s.pendingProps;var u=s.elementType,h=u._init;if(u=h(u._payload),s.type=u,typeof u=="function")Nf(u)?(r=ia(u,r),s.tag=1,s=o0(null,s,u,r,o)):(s.tag=0,s=fm(null,s,u,r,o));else{if(u!=null){if(h=u.$$typeof,h===de){s.tag=11,s=t0(null,s,u,r,o);break e}else if(h===M){s.tag=14,s=n0(null,s,u,r,o);break e}}throw s=ct(u)||u,Error(i(306,s,""))}}return s;case 0:return fm(r,s,s.type,s.pendingProps,o);case 1:return u=s.type,h=ia(u,s.pendingProps),o0(r,s,u,h,o);case 3:e:{if(rt(s,s.stateNode.containerInfo),r===null)throw Error(i(387));u=s.pendingProps;var p=s.memoizedState;h=p.element,Hf(r,s),kl(s,u,null,o);var E=s.memoizedState;if(u=E.cache,Mi(s,Dt,u),u!==p.cache&&Vf(s,[Dt],o,!0),jl(),u=E.element,p.isDehydrated)if(p={element:u,isDehydrated:!1,cache:E.cache},s.updateQueue.baseState=p,s.memoizedState=p,s.flags&256){s=l0(r,s,u,o);break e}else if(u!==h){h=zn(Error(i(424)),s),Cl(h),s=l0(r,s,u,o);break e}else{switch(r=s.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(mt=nr(r.firstChild),dn=s,Fe=!0,Zs=null,Er=!0,o=Fv(s,null,u,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(Rl(),u===h){s=ri(r,s,o);break e}$t(r,s,u,o)}s=s.child}return s;case 26:return td(r,s),r===null?(o=g_(s.type,null,s.pendingProps,null))?s.memoizedState=o:Fe||(o=s.type,r=s.pendingProps,u=gd(Ae.current).createElement(o),u[Ct]=s,u[wt]=r,Kt(u,o,r),vt(u),s.stateNode=u):s.memoizedState=g_(s.type,r.memoizedProps,s.pendingProps,r.memoizedState),null;case 27:return Ai(s),r===null&&Fe&&(u=s.stateNode=f_(s.type,s.pendingProps,Ae.current),dn=s,Er=!0,h=mt,Qi(s.type)?(ep=h,mt=nr(u.firstChild)):mt=h),$t(r,s,s.pendingProps.children,o),td(r,s),r===null&&(s.flags|=4194304),s.child;case 5:return r===null&&Fe&&((h=u=mt)&&(u=CS(u,s.type,s.pendingProps,Er),u!==null?(s.stateNode=u,dn=s,mt=nr(u.firstChild),Er=!1,h=!0):h=!1),h||Js(s)),Ai(s),h=s.type,p=s.pendingProps,E=r!==null?r.memoizedProps:null,u=p.children,Xm(h,p)?u=null:E!==null&&Xm(h,E)&&(s.flags|=32),s.memoizedState!==null&&(h=Qf(r,s,$x,null,null,o),iu._currentValue=h),td(r,s),$t(r,s,u,o),s.child;case 6:return r===null&&Fe&&((r=o=mt)&&(o=NS(o,s.pendingProps,Er),o!==null?(s.stateNode=o,dn=s,mt=null,r=!0):r=!1),r||Js(s)),null;case 13:return u0(r,s,o);case 4:return rt(s,s.stateNode.containerInfo),u=s.pendingProps,r===null?s.child=ao(s,null,u,o):$t(r,s,u,o),s.child;case 11:return t0(r,s,s.type,s.pendingProps,o);case 7:return $t(r,s,s.pendingProps,o),s.child;case 8:return $t(r,s,s.pendingProps.children,o),s.child;case 12:return $t(r,s,s.pendingProps.children,o),s.child;case 10:return u=s.pendingProps,Mi(s,s.type,u.value),$t(r,s,u.children,o),s.child;case 9:return h=s.type._context,u=s.pendingProps.children,ta(s),h=en(h),u=u(h),s.flags|=1,$t(r,s,u,o),s.child;case 14:return n0(r,s,s.type,s.pendingProps,o);case 15:return r0(r,s,s.type,s.pendingProps,o);case 19:return d0(r,s,o);case 31:return u=s.pendingProps,o=s.mode,u={mode:u.mode,children:u.children},r===null?(o=nd(u,o),o.ref=s.ref,s.child=o,o.return=s,s=o):(o=Xr(r.child,u),o.ref=s.ref,s.child=o,o.return=s,s=o),s;case 22:return i0(r,s,o);case 24:return ta(s),u=en(Dt),r===null?(h=zf(),h===null&&(h=it,p=Lf(),h.pooledCache=p,p.refCount++,p!==null&&(h.pooledCacheLanes|=o),h=p),s.memoizedState={parent:u,cache:h},qf(s),Mi(s,Dt,h)):((r.lanes&o)!==0&&(Hf(r,s),kl(s,null,null,o),jl()),h=r.memoizedState,p=s.memoizedState,h.parent!==u?(h={parent:u,cache:u},s.memoizedState=h,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=h),Mi(s,Dt,u)):(u=p.cache,Mi(s,Dt,u),u!==h.cache&&Vf(s,[Dt],o,!0))),$t(r,s,s.pendingProps.children,o),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function ii(r){r.flags|=4}function f0(r,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!E_(s)){if(s=Fn.current,s!==null&&((Be&4194048)===Be?wr!==null:(Be&62914560)!==Be&&(Be&536870912)===0||s!==wr))throw Pl=Bf,Xy;r.flags|=8192}}function rd(r,s){s!==null&&(r.flags|=4),r.flags&16384&&(s=r.tag!==22?al():536870912,r.lanes|=s,co|=s)}function Hl(r,s){if(!Fe)switch(r.tailMode){case"hidden":s=r.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?r.tail=null:o.sibling=null;break;case"collapsed":o=r.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:u.sibling=null}}function dt(r){var s=r.alternate!==null&&r.alternate.child===r.child,o=0,u=0;if(s)for(var h=r.child;h!==null;)o|=h.lanes|h.childLanes,u|=h.subtreeFlags&65011712,u|=h.flags&65011712,h.return=r,h=h.sibling;else for(h=r.child;h!==null;)o|=h.lanes|h.childLanes,u|=h.subtreeFlags,u|=h.flags,h.return=r,h=h.sibling;return r.subtreeFlags|=u,r.childLanes=o,s}function tS(r,s,o){var u=s.pendingProps;switch(Pf(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return dt(s),null;case 1:return dt(s),null;case 3:return o=s.stateNode,u=null,r!==null&&(u=r.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),ei(Dt),ur(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(r===null||r.child===null)&&(Al(s)?ii(s):r===null||r.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Gy())),dt(s),null;case 26:return o=s.memoizedState,r===null?(ii(s),o!==null?(dt(s),f0(s,o)):(dt(s),s.flags&=-16777217)):o?o!==r.memoizedState?(ii(s),dt(s),f0(s,o)):(dt(s),s.flags&=-16777217):(r.memoizedProps!==u&&ii(s),dt(s),s.flags&=-16777217),null;case 27:Vr(s),o=Ae.current;var h=s.type;if(r!==null&&s.stateNode!=null)r.memoizedProps!==u&&ii(s);else{if(!u){if(s.stateNode===null)throw Error(i(166));return dt(s),null}r=be.current,Al(s)?Hy(s):(r=f_(h,u,o),s.stateNode=r,ii(s))}return dt(s),null;case 5:if(Vr(s),o=s.type,r!==null&&s.stateNode!=null)r.memoizedProps!==u&&ii(s);else{if(!u){if(s.stateNode===null)throw Error(i(166));return dt(s),null}if(r=be.current,Al(s))Hy(s);else{switch(h=gd(Ae.current),r){case 1:r=h.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:r=h.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":r=h.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":r=h.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":r=h.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof u.is=="string"?h.createElement("select",{is:u.is}):h.createElement("select"),u.multiple?r.multiple=!0:u.size&&(r.size=u.size);break;default:r=typeof u.is=="string"?h.createElement(o,{is:u.is}):h.createElement(o)}}r[Ct]=s,r[wt]=u;e:for(h=s.child;h!==null;){if(h.tag===5||h.tag===6)r.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===s)break e;for(;h.sibling===null;){if(h.return===null||h.return===s)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}s.stateNode=r;e:switch(Kt(r,o,u),o){case"button":case"input":case"select":case"textarea":r=!!u.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&ii(s)}}return dt(s),s.flags&=-16777217,null;case 6:if(r&&s.stateNode!=null)r.memoizedProps!==u&&ii(s);else{if(typeof u!="string"&&s.stateNode===null)throw Error(i(166));if(r=Ae.current,Al(s)){if(r=s.stateNode,o=s.memoizedProps,u=null,h=dn,h!==null)switch(h.tag){case 27:case 5:u=h.memoizedProps}r[Ct]=s,r=!!(r.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||a_(r.nodeValue,o)),r||Js(s)}else r=gd(r).createTextNode(u),r[Ct]=s,s.stateNode=r}return dt(s),null;case 13:if(u=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(h=Al(s),u!==null&&u.dehydrated!==null){if(r===null){if(!h)throw Error(i(318));if(h=s.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(i(317));h[Ct]=s}else Rl(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;dt(s),h=!1}else h=Gy(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=h),h=!0;if(!h)return s.flags&256?(ni(s),s):(ni(s),null)}if(ni(s),(s.flags&128)!==0)return s.lanes=o,s;if(o=u!==null,r=r!==null&&r.memoizedState!==null,o){u=s.child,h=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(h=u.alternate.memoizedState.cachePool.pool);var p=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(p=u.memoizedState.cachePool.pool),p!==h&&(u.flags|=2048)}return o!==r&&o&&(s.child.flags|=8192),rd(s,s.updateQueue),dt(s),null;case 4:return ur(),r===null&&Gm(s.stateNode.containerInfo),dt(s),null;case 10:return ei(s.type),dt(s),null;case 19:if(ce(Ot),h=s.memoizedState,h===null)return dt(s),null;if(u=(s.flags&128)!==0,p=h.rendering,p===null)if(u)Hl(h,!1);else{if(pt!==0||r!==null&&(r.flags&128)!==0)for(r=s.child;r!==null;){if(p=Zc(r),p!==null){for(s.flags|=128,Hl(h,!1),r=p.updateQueue,s.updateQueue=r,rd(s,r),s.subtreeFlags=0,r=o,o=s.child;o!==null;)By(o,r),o=o.sibling;return oe(Ot,Ot.current&1|2),s.child}r=r.sibling}h.tail!==null&&Mn()>ad&&(s.flags|=128,u=!0,Hl(h,!1),s.lanes=4194304)}else{if(!u)if(r=Zc(p),r!==null){if(s.flags|=128,u=!0,r=r.updateQueue,s.updateQueue=r,rd(s,r),Hl(h,!0),h.tail===null&&h.tailMode==="hidden"&&!p.alternate&&!Fe)return dt(s),null}else 2*Mn()-h.renderingStartTime>ad&&o!==536870912&&(s.flags|=128,u=!0,Hl(h,!1),s.lanes=4194304);h.isBackwards?(p.sibling=s.child,s.child=p):(r=h.last,r!==null?r.sibling=p:s.child=p,h.last=p)}return h.tail!==null?(s=h.tail,h.rendering=s,h.tail=s.sibling,h.renderingStartTime=Mn(),s.sibling=null,r=Ot.current,oe(Ot,u?r&1|2:r&1),s):(dt(s),null);case 22:case 23:return ni(s),Yf(),u=s.memoizedState!==null,r!==null?r.memoizedState!==null!==u&&(s.flags|=8192):u&&(s.flags|=8192),u?(o&536870912)!==0&&(s.flags&128)===0&&(dt(s),s.subtreeFlags&6&&(s.flags|=8192)):dt(s),o=s.updateQueue,o!==null&&rd(s,o.retryQueue),o=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==o&&(s.flags|=2048),r!==null&&ce(na),null;case 24:return o=null,r!==null&&(o=r.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),ei(Dt),dt(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function nS(r,s){switch(Pf(s),s.tag){case 1:return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return ei(Dt),ur(),r=s.flags,(r&65536)!==0&&(r&128)===0?(s.flags=r&-65537|128,s):null;case 26:case 27:case 5:return Vr(s),null;case 13:if(ni(s),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(i(340));Rl()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return ce(Ot),null;case 4:return ur(),null;case 10:return ei(s.type),null;case 22:case 23:return ni(s),Yf(),r!==null&&ce(na),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 24:return ei(Dt),null;case 25:return null;default:return null}}function m0(r,s){switch(Pf(s),s.tag){case 3:ei(Dt),ur();break;case 26:case 27:case 5:Vr(s);break;case 4:ur();break;case 13:ni(s);break;case 19:ce(Ot);break;case 10:ei(s.type);break;case 22:case 23:ni(s),Yf(),r!==null&&ce(na);break;case 24:ei(Dt)}}function Fl(r,s){try{var o=s.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var h=u.next;o=h;do{if((o.tag&r)===r){u=void 0;var p=o.create,E=o.inst;u=p(),E.destroy=u}o=o.next}while(o!==h)}}catch(x){nt(s,s.return,x)}}function Bi(r,s,o){try{var u=s.updateQueue,h=u!==null?u.lastEffect:null;if(h!==null){var p=h.next;u=p;do{if((u.tag&r)===r){var E=u.inst,x=E.destroy;if(x!==void 0){E.destroy=void 0,h=s;var D=o,G=x;try{G()}catch(J){nt(h,D,J)}}}u=u.next}while(u!==p)}}catch(J){nt(s,s.return,J)}}function p0(r){var s=r.updateQueue;if(s!==null){var o=r.stateNode;try{nv(s,o)}catch(u){nt(r,r.return,u)}}}function g0(r,s,o){o.props=ia(r.type,r.memoizedProps),o.state=r.memoizedState;try{o.componentWillUnmount()}catch(u){nt(r,s,u)}}function Gl(r,s){try{var o=r.ref;if(o!==null){switch(r.tag){case 26:case 27:case 5:var u=r.stateNode;break;case 30:u=r.stateNode;break;default:u=r.stateNode}typeof o=="function"?r.refCleanup=o(u):o.current=u}}catch(h){nt(r,s,h)}}function Tr(r,s){var o=r.ref,u=r.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(h){nt(r,s,h)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(h){nt(r,s,h)}else o.current=null}function y0(r){var s=r.type,o=r.memoizedProps,u=r.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(h){nt(r,r.return,h)}}function Em(r,s,o){try{var u=r.stateNode;TS(u,r.type,o,s),u[wt]=s}catch(h){nt(r,r.return,h)}}function v0(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&Qi(r.type)||r.tag===4}function wm(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||v0(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&Qi(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Tm(r,s,o){var u=r.tag;if(u===5||u===6)r=r.stateNode,s?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(r,s):(s=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,s.appendChild(r),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=pd));else if(u!==4&&(u===27&&Qi(r.type)&&(o=r.stateNode,s=null),r=r.child,r!==null))for(Tm(r,s,o),r=r.sibling;r!==null;)Tm(r,s,o),r=r.sibling}function id(r,s,o){var u=r.tag;if(u===5||u===6)r=r.stateNode,s?o.insertBefore(r,s):o.appendChild(r);else if(u!==4&&(u===27&&Qi(r.type)&&(o=r.stateNode),r=r.child,r!==null))for(id(r,s,o),r=r.sibling;r!==null;)id(r,s,o),r=r.sibling}function _0(r){var s=r.stateNode,o=r.memoizedProps;try{for(var u=r.type,h=s.attributes;h.length;)s.removeAttributeNode(h[0]);Kt(s,u,o),s[Ct]=r,s[wt]=o}catch(p){nt(r,r.return,p)}}var si=!1,bt=!1,xm=!1,b0=typeof WeakSet=="function"?WeakSet:Set,zt=null;function rS(r,s){if(r=r.containerInfo,Km=wd,r=Dy(r),wf(r)){if("selectionStart"in r)var o={start:r.selectionStart,end:r.selectionEnd};else e:{o=(o=r.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var h=u.anchorOffset,p=u.focusNode;u=u.focusOffset;try{o.nodeType,p.nodeType}catch{o=null;break e}var E=0,x=-1,D=-1,G=0,J=0,re=r,K=null;t:for(;;){for(var Q;re!==o||h!==0&&re.nodeType!==3||(x=E+h),re!==p||u!==0&&re.nodeType!==3||(D=E+u),re.nodeType===3&&(E+=re.nodeValue.length),(Q=re.firstChild)!==null;)K=re,re=Q;for(;;){if(re===r)break t;if(K===o&&++G===h&&(x=E),K===p&&++J===u&&(D=E),(Q=re.nextSibling)!==null)break;re=K,K=re.parentNode}re=Q}o=x===-1||D===-1?null:{start:x,end:D}}else o=null}o=o||{start:0,end:0}}else o=null;for(Qm={focusedElem:r,selectionRange:o},wd=!1,zt=s;zt!==null;)if(s=zt,r=s.child,(s.subtreeFlags&1024)!==0&&r!==null)r.return=s,zt=r;else for(;zt!==null;){switch(s=zt,p=s.alternate,r=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((r&1024)!==0&&p!==null){r=void 0,o=s,h=p.memoizedProps,p=p.memoizedState,u=o.stateNode;try{var Se=ia(o.type,h,o.elementType===o.type);r=u.getSnapshotBeforeUpdate(Se,p),u.__reactInternalSnapshotBeforeUpdate=r}catch(Ee){nt(o,o.return,Ee)}}break;case 3:if((r&1024)!==0){if(r=s.stateNode.containerInfo,o=r.nodeType,o===9)Zm(r);else if(o===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":Zm(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=s.sibling,r!==null){r.return=s.return,zt=r;break}zt=s.return}}function E0(r,s,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:qi(r,o),u&4&&Fl(5,o);break;case 1:if(qi(r,o),u&4)if(r=o.stateNode,s===null)try{r.componentDidMount()}catch(E){nt(o,o.return,E)}else{var h=ia(o.type,s.memoizedProps);s=s.memoizedState;try{r.componentDidUpdate(h,s,r.__reactInternalSnapshotBeforeUpdate)}catch(E){nt(o,o.return,E)}}u&64&&p0(o),u&512&&Gl(o,o.return);break;case 3:if(qi(r,o),u&64&&(r=o.updateQueue,r!==null)){if(s=null,o.child!==null)switch(o.child.tag){case 27:case 5:s=o.child.stateNode;break;case 1:s=o.child.stateNode}try{nv(r,s)}catch(E){nt(o,o.return,E)}}break;case 27:s===null&&u&4&&_0(o);case 26:case 5:qi(r,o),s===null&&u&4&&y0(o),u&512&&Gl(o,o.return);break;case 12:qi(r,o);break;case 13:qi(r,o),u&4&&x0(r,o),u&64&&(r=o.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(o=hS.bind(null,o),IS(r,o))));break;case 22:if(u=o.memoizedState!==null||si,!u){s=s!==null&&s.memoizedState!==null||bt,h=si;var p=bt;si=u,(bt=s)&&!p?Hi(r,o,(o.subtreeFlags&8772)!==0):qi(r,o),si=h,bt=p}break;case 30:break;default:qi(r,o)}}function w0(r){var s=r.alternate;s!==null&&(r.alternate=null,w0(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&Ii(s)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var ot=null,gn=!1;function ai(r,s,o){for(o=o.child;o!==null;)T0(r,s,o),o=o.sibling}function T0(r,s,o){if(Ke&&typeof Ke.onCommitFiberUnmount=="function")try{Ke.onCommitFiberUnmount(ft,o)}catch{}switch(o.tag){case 26:bt||Tr(o,s),ai(r,s,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:bt||Tr(o,s);var u=ot,h=gn;Qi(o.type)&&(ot=o.stateNode,gn=!1),ai(r,s,o),eu(o.stateNode),ot=u,gn=h;break;case 5:bt||Tr(o,s);case 6:if(u=ot,h=gn,ot=null,ai(r,s,o),ot=u,gn=h,ot!==null)if(gn)try{(ot.nodeType===9?ot.body:ot.nodeName==="HTML"?ot.ownerDocument.body:ot).removeChild(o.stateNode)}catch(p){nt(o,s,p)}else try{ot.removeChild(o.stateNode)}catch(p){nt(o,s,p)}break;case 18:ot!==null&&(gn?(r=ot,d_(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,o.stateNode),lu(r)):d_(ot,o.stateNode));break;case 4:u=ot,h=gn,ot=o.stateNode.containerInfo,gn=!0,ai(r,s,o),ot=u,gn=h;break;case 0:case 11:case 14:case 15:bt||Bi(2,o,s),bt||Bi(4,o,s),ai(r,s,o);break;case 1:bt||(Tr(o,s),u=o.stateNode,typeof u.componentWillUnmount=="function"&&g0(o,s,u)),ai(r,s,o);break;case 21:ai(r,s,o);break;case 22:bt=(u=bt)||o.memoizedState!==null,ai(r,s,o),bt=u;break;default:ai(r,s,o)}}function x0(r,s){if(s.memoizedState===null&&(r=s.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{lu(r)}catch(o){nt(s,s.return,o)}}function iS(r){switch(r.tag){case 13:case 19:var s=r.stateNode;return s===null&&(s=r.stateNode=new b0),s;case 22:return r=r.stateNode,s=r._retryCache,s===null&&(s=r._retryCache=new b0),s;default:throw Error(i(435,r.tag))}}function Sm(r,s){var o=iS(r);s.forEach(function(u){var h=fS.bind(null,r,u);o.has(u)||(o.add(u),u.then(h,h))})}function An(r,s){var o=s.deletions;if(o!==null)for(var u=0;u<o.length;u++){var h=o[u],p=r,E=s,x=E;e:for(;x!==null;){switch(x.tag){case 27:if(Qi(x.type)){ot=x.stateNode,gn=!1;break e}break;case 5:ot=x.stateNode,gn=!1;break e;case 3:case 4:ot=x.stateNode.containerInfo,gn=!0;break e}x=x.return}if(ot===null)throw Error(i(160));T0(p,E,h),ot=null,gn=!1,p=h.alternate,p!==null&&(p.return=null),h.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)S0(s,r),s=s.sibling}var tr=null;function S0(r,s){var o=r.alternate,u=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:An(s,r),Rn(r),u&4&&(Bi(3,r,r.return),Fl(3,r),Bi(5,r,r.return));break;case 1:An(s,r),Rn(r),u&512&&(bt||o===null||Tr(o,o.return)),u&64&&si&&(r=r.updateQueue,r!==null&&(u=r.callbacks,u!==null&&(o=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var h=tr;if(An(s,r),Rn(r),u&512&&(bt||o===null||Tr(o,o.return)),u&4){var p=o!==null?o.memoizedState:null;if(u=r.memoizedState,o===null)if(u===null)if(r.stateNode===null){e:{u=r.type,o=r.memoizedProps,h=h.ownerDocument||h;t:switch(u){case"title":p=h.getElementsByTagName("title")[0],(!p||p[Ps]||p[Ct]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=h.createElement(u),h.head.insertBefore(p,h.querySelector("head > title"))),Kt(p,u,o),p[Ct]=r,vt(p),u=p;break e;case"link":var E=__("link","href",h).get(u+(o.href||""));if(E){for(var x=0;x<E.length;x++)if(p=E[x],p.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&p.getAttribute("rel")===(o.rel==null?null:o.rel)&&p.getAttribute("title")===(o.title==null?null:o.title)&&p.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){E.splice(x,1);break t}}p=h.createElement(u),Kt(p,u,o),h.head.appendChild(p);break;case"meta":if(E=__("meta","content",h).get(u+(o.content||""))){for(x=0;x<E.length;x++)if(p=E[x],p.getAttribute("content")===(o.content==null?null:""+o.content)&&p.getAttribute("name")===(o.name==null?null:o.name)&&p.getAttribute("property")===(o.property==null?null:o.property)&&p.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&p.getAttribute("charset")===(o.charSet==null?null:o.charSet)){E.splice(x,1);break t}}p=h.createElement(u),Kt(p,u,o),h.head.appendChild(p);break;default:throw Error(i(468,u))}p[Ct]=r,vt(p),u=p}r.stateNode=u}else b_(h,r.type,r.stateNode);else r.stateNode=v_(h,u,r.memoizedProps);else p!==u?(p===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):p.count--,u===null?b_(h,r.type,r.stateNode):v_(h,u,r.memoizedProps)):u===null&&r.stateNode!==null&&Em(r,r.memoizedProps,o.memoizedProps)}break;case 27:An(s,r),Rn(r),u&512&&(bt||o===null||Tr(o,o.return)),o!==null&&u&4&&Em(r,r.memoizedProps,o.memoizedProps);break;case 5:if(An(s,r),Rn(r),u&512&&(bt||o===null||Tr(o,o.return)),r.flags&32){h=r.stateNode;try{kn(h,"")}catch(Q){nt(r,r.return,Q)}}u&4&&r.stateNode!=null&&(h=r.memoizedProps,Em(r,h,o!==null?o.memoizedProps:h)),u&1024&&(xm=!0);break;case 6:if(An(s,r),Rn(r),u&4){if(r.stateNode===null)throw Error(i(162));u=r.memoizedProps,o=r.stateNode;try{o.nodeValue=u}catch(Q){nt(r,r.return,Q)}}break;case 3:if(_d=null,h=tr,tr=yd(s.containerInfo),An(s,r),tr=h,Rn(r),u&4&&o!==null&&o.memoizedState.isDehydrated)try{lu(s.containerInfo)}catch(Q){nt(r,r.return,Q)}xm&&(xm=!1,A0(r));break;case 4:u=tr,tr=yd(r.stateNode.containerInfo),An(s,r),Rn(r),tr=u;break;case 12:An(s,r),Rn(r);break;case 13:An(s,r),Rn(r),r.child.flags&8192&&r.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Dm=Mn()),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,Sm(r,u)));break;case 22:h=r.memoizedState!==null;var D=o!==null&&o.memoizedState!==null,G=si,J=bt;if(si=G||h,bt=J||D,An(s,r),bt=J,si=G,Rn(r),u&8192)e:for(s=r.stateNode,s._visibility=h?s._visibility&-2:s._visibility|1,h&&(o===null||D||si||bt||sa(r)),o=null,s=r;;){if(s.tag===5||s.tag===26){if(o===null){D=o=s;try{if(p=D.stateNode,h)E=p.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{x=D.stateNode;var re=D.memoizedProps.style,K=re!=null&&re.hasOwnProperty("display")?re.display:null;x.style.display=K==null||typeof K=="boolean"?"":(""+K).trim()}}catch(Q){nt(D,D.return,Q)}}}else if(s.tag===6){if(o===null){D=s;try{D.stateNode.nodeValue=h?"":D.memoizedProps}catch(Q){nt(D,D.return,Q)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===r)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break e;for(;s.sibling===null;){if(s.return===null||s.return===r)break e;o===s&&(o=null),s=s.return}o===s&&(o=null),s.sibling.return=s.return,s=s.sibling}u&4&&(u=r.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,Sm(r,o))));break;case 19:An(s,r),Rn(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,Sm(r,u)));break;case 30:break;case 21:break;default:An(s,r),Rn(r)}}function Rn(r){var s=r.flags;if(s&2){try{for(var o,u=r.return;u!==null;){if(v0(u)){o=u;break}u=u.return}if(o==null)throw Error(i(160));switch(o.tag){case 27:var h=o.stateNode,p=wm(r);id(r,p,h);break;case 5:var E=o.stateNode;o.flags&32&&(kn(E,""),o.flags&=-33);var x=wm(r);id(r,x,E);break;case 3:case 4:var D=o.stateNode.containerInfo,G=wm(r);Tm(r,G,D);break;default:throw Error(i(161))}}catch(J){nt(r,r.return,J)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function A0(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var s=r;A0(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),r=r.sibling}}function qi(r,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)E0(r,s.alternate,s),s=s.sibling}function sa(r){for(r=r.child;r!==null;){var s=r;switch(s.tag){case 0:case 11:case 14:case 15:Bi(4,s,s.return),sa(s);break;case 1:Tr(s,s.return);var o=s.stateNode;typeof o.componentWillUnmount=="function"&&g0(s,s.return,o),sa(s);break;case 27:eu(s.stateNode);case 26:case 5:Tr(s,s.return),sa(s);break;case 22:s.memoizedState===null&&sa(s);break;case 30:sa(s);break;default:sa(s)}r=r.sibling}}function Hi(r,s,o){for(o=o&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var u=s.alternate,h=r,p=s,E=p.flags;switch(p.tag){case 0:case 11:case 15:Hi(h,p,o),Fl(4,p);break;case 1:if(Hi(h,p,o),u=p,h=u.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(G){nt(u,u.return,G)}if(u=p,h=u.updateQueue,h!==null){var x=u.stateNode;try{var D=h.shared.hiddenCallbacks;if(D!==null)for(h.shared.hiddenCallbacks=null,h=0;h<D.length;h++)tv(D[h],x)}catch(G){nt(u,u.return,G)}}o&&E&64&&p0(p),Gl(p,p.return);break;case 27:_0(p);case 26:case 5:Hi(h,p,o),o&&u===null&&E&4&&y0(p),Gl(p,p.return);break;case 12:Hi(h,p,o);break;case 13:Hi(h,p,o),o&&E&4&&x0(h,p);break;case 22:p.memoizedState===null&&Hi(h,p,o),Gl(p,p.return);break;case 30:break;default:Hi(h,p,o)}s=s.sibling}}function Am(r,s){var o=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),r=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(r=s.memoizedState.cachePool.pool),r!==o&&(r!=null&&r.refCount++,o!=null&&Il(o))}function Rm(r,s){r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&Il(r))}function xr(r,s,o,u){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)R0(r,s,o,u),s=s.sibling}function R0(r,s,o,u){var h=s.flags;switch(s.tag){case 0:case 11:case 15:xr(r,s,o,u),h&2048&&Fl(9,s);break;case 1:xr(r,s,o,u);break;case 3:xr(r,s,o,u),h&2048&&(r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&Il(r)));break;case 12:if(h&2048){xr(r,s,o,u),r=s.stateNode;try{var p=s.memoizedProps,E=p.id,x=p.onPostCommit;typeof x=="function"&&x(E,s.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(D){nt(s,s.return,D)}}else xr(r,s,o,u);break;case 13:xr(r,s,o,u);break;case 23:break;case 22:p=s.stateNode,E=s.alternate,s.memoizedState!==null?p._visibility&2?xr(r,s,o,u):$l(r,s):p._visibility&2?xr(r,s,o,u):(p._visibility|=2,oo(r,s,o,u,(s.subtreeFlags&10256)!==0)),h&2048&&Am(E,s);break;case 24:xr(r,s,o,u),h&2048&&Rm(s.alternate,s);break;default:xr(r,s,o,u)}}function oo(r,s,o,u,h){for(h=h&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var p=r,E=s,x=o,D=u,G=E.flags;switch(E.tag){case 0:case 11:case 15:oo(p,E,x,D,h),Fl(8,E);break;case 23:break;case 22:var J=E.stateNode;E.memoizedState!==null?J._visibility&2?oo(p,E,x,D,h):$l(p,E):(J._visibility|=2,oo(p,E,x,D,h)),h&&G&2048&&Am(E.alternate,E);break;case 24:oo(p,E,x,D,h),h&&G&2048&&Rm(E.alternate,E);break;default:oo(p,E,x,D,h)}s=s.sibling}}function $l(r,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var o=r,u=s,h=u.flags;switch(u.tag){case 22:$l(o,u),h&2048&&Am(u.alternate,u);break;case 24:$l(o,u),h&2048&&Rm(u.alternate,u);break;default:$l(o,u)}s=s.sibling}}var Yl=8192;function lo(r){if(r.subtreeFlags&Yl)for(r=r.child;r!==null;)C0(r),r=r.sibling}function C0(r){switch(r.tag){case 26:lo(r),r.flags&Yl&&r.memoizedState!==null&&HS(tr,r.memoizedState,r.memoizedProps);break;case 5:lo(r);break;case 3:case 4:var s=tr;tr=yd(r.stateNode.containerInfo),lo(r),tr=s;break;case 22:r.memoizedState===null&&(s=r.alternate,s!==null&&s.memoizedState!==null?(s=Yl,Yl=16777216,lo(r),Yl=s):lo(r));break;default:lo(r)}}function N0(r){var s=r.alternate;if(s!==null&&(r=s.child,r!==null)){s.child=null;do s=r.sibling,r.sibling=null,r=s;while(r!==null)}}function Kl(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];zt=u,D0(u,r)}N0(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)I0(r),r=r.sibling}function I0(r){switch(r.tag){case 0:case 11:case 15:Kl(r),r.flags&2048&&Bi(9,r,r.return);break;case 3:Kl(r);break;case 12:Kl(r);break;case 22:var s=r.stateNode;r.memoizedState!==null&&s._visibility&2&&(r.return===null||r.return.tag!==13)?(s._visibility&=-3,sd(r)):Kl(r);break;default:Kl(r)}}function sd(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];zt=u,D0(u,r)}N0(r)}for(r=r.child;r!==null;){switch(s=r,s.tag){case 0:case 11:case 15:Bi(8,s,s.return),sd(s);break;case 22:o=s.stateNode,o._visibility&2&&(o._visibility&=-3,sd(s));break;default:sd(s)}r=r.sibling}}function D0(r,s){for(;zt!==null;){var o=zt;switch(o.tag){case 0:case 11:case 15:Bi(8,o,s);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Il(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,zt=u;else e:for(o=r;zt!==null;){u=zt;var h=u.sibling,p=u.return;if(w0(u),u===o){zt=null;break e}if(h!==null){h.return=p,zt=h;break e}zt=p}}}var sS={getCacheForType:function(r){var s=en(Dt),o=s.data.get(r);return o===void 0&&(o=r(),s.data.set(r,o)),o}},aS=typeof WeakMap=="function"?WeakMap:Map,Qe=0,it=null,je=null,Be=0,Xe=0,Cn=null,Fi=!1,uo=!1,Cm=!1,oi=0,pt=0,Gi=0,aa=0,Nm=0,Gn=0,co=0,Ql=null,yn=null,Im=!1,Dm=0,ad=1/0,od=null,$i=null,Yt=0,Yi=null,ho=null,fo=0,Om=0,Pm=null,O0=null,Xl=0,Mm=null;function Nn(){if((Qe&2)!==0&&Be!==0)return Be&-Be;if($.T!==null){var r=Ja;return r!==0?r:Bm()}return Ci()}function P0(){Gn===0&&(Gn=(Be&536870912)===0||Fe?sl():536870912);var r=Fn.current;return r!==null&&(r.flags|=32),Gn}function In(r,s,o){(r===it&&(Xe===2||Xe===9)||r.cancelPendingCommit!==null)&&(mo(r,0),Ki(r,Be,Gn,!1)),Ur(r,o),((Qe&2)===0||r!==it)&&(r===it&&((Qe&2)===0&&(aa|=o),pt===4&&Ki(r,Be,Gn,!1)),Sr(r))}function M0(r,s,o){if((Qe&6)!==0)throw Error(i(327));var u=!o&&(s&124)===0&&(s&r.expiredLanes)===0||Os(r,s),h=u?uS(r,s):Vm(r,s,!0),p=u;do{if(h===0){uo&&!u&&Ki(r,s,0,!1);break}else{if(o=r.current.alternate,p&&!oS(o)){h=Vm(r,s,!1),p=!1;continue}if(h===2){if(p=s,r.errorRecoveryDisabledLanes&p)var E=0;else E=r.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){s=E;e:{var x=r;h=Ql;var D=x.current.memoizedState.isDehydrated;if(D&&(mo(x,E).flags|=256),E=Vm(x,E,!1),E!==2){if(Cm&&!D){x.errorRecoveryDisabledLanes|=p,aa|=p,h=4;break e}p=yn,yn=h,p!==null&&(yn===null?yn=p:yn.push.apply(yn,p))}h=E}if(p=!1,h!==2)continue}}if(h===1){mo(r,0),Ki(r,s,0,!0);break}e:{switch(u=r,p=h,p){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:Ki(u,s,Gn,!Fi);break e;case 2:yn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(h=Dm+300-Mn(),10<h)){if(Ki(u,s,Gn,!Fi),Ia(u,0,!0)!==0)break e;u.timeoutHandle=u_(j0.bind(null,u,o,yn,od,Im,s,Gn,aa,co,Fi,p,2,-0,0),h);break e}j0(u,o,yn,od,Im,s,Gn,aa,co,Fi,p,0,-0,0)}}break}while(!0);Sr(r)}function j0(r,s,o,u,h,p,E,x,D,G,J,re,K,Q){if(r.timeoutHandle=-1,re=s.subtreeFlags,(re&8192||(re&16785408)===16785408)&&(ru={stylesheets:null,count:0,unsuspend:qS},C0(s),re=FS(),re!==null)){r.cancelPendingCommit=re(q0.bind(null,r,s,p,o,u,h,E,x,D,J,1,K,Q)),Ki(r,p,E,!G);return}q0(r,s,p,o,u,h,E,x,D)}function oS(r){for(var s=r;;){var o=s.tag;if((o===0||o===11||o===15)&&s.flags&16384&&(o=s.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var h=o[u],p=h.getSnapshot;h=h.value;try{if(!xn(p(),h))return!1}catch{return!1}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Ki(r,s,o,u){s&=~Nm,s&=~aa,r.suspendedLanes|=s,r.pingedLanes&=~s,u&&(r.warmLanes|=s),u=r.expirationTimes;for(var h=s;0<h;){var p=31-Jt(h),E=1<<p;u[p]=-1,h&=~E}o!==0&&cr(r,o,s)}function ld(){return(Qe&6)===0?(Wl(0),!1):!0}function jm(){if(je!==null){if(Xe===0)var r=je.return;else r=je,Jr=ea=null,Zf(r),so=null,Bl=0,r=je;for(;r!==null;)m0(r.alternate,r),r=r.return;je=null}}function mo(r,s){var o=r.timeoutHandle;o!==-1&&(r.timeoutHandle=-1,SS(o)),o=r.cancelPendingCommit,o!==null&&(r.cancelPendingCommit=null,o()),jm(),it=r,je=o=Xr(r.current,null),Be=s,Xe=0,Cn=null,Fi=!1,uo=Os(r,s),Cm=!1,co=Gn=Nm=aa=Gi=pt=0,yn=Ql=null,Im=!1,(s&8)!==0&&(s|=s&32);var u=r.entangledLanes;if(u!==0)for(r=r.entanglements,u&=s;0<u;){var h=31-Jt(u),p=1<<h;s|=r[h],u&=~p}return oi=s,Ic(),o}function k0(r,s){De=null,$.H=Qc,s===Ol||s===Uc?(s=Jy(),Xe=3):s===Xy?(s=Jy(),Xe=4):Xe=s===e0?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Cn=s,je===null&&(pt=1,ed(r,zn(s,r.current)))}function V0(){var r=$.H;return $.H=Qc,r===null?Qc:r}function L0(){var r=$.A;return $.A=sS,r}function km(){pt=4,Fi||(Be&4194048)!==Be&&Fn.current!==null||(uo=!0),(Gi&134217727)===0&&(aa&134217727)===0||it===null||Ki(it,Be,Gn,!1)}function Vm(r,s,o){var u=Qe;Qe|=2;var h=V0(),p=L0();(it!==r||Be!==s)&&(od=null,mo(r,s)),s=!1;var E=pt;e:do try{if(Xe!==0&&je!==null){var x=je,D=Cn;switch(Xe){case 8:jm(),E=6;break e;case 3:case 2:case 9:case 6:Fn.current===null&&(s=!0);var G=Xe;if(Xe=0,Cn=null,po(r,x,D,G),o&&uo){E=0;break e}break;default:G=Xe,Xe=0,Cn=null,po(r,x,D,G)}}lS(),E=pt;break}catch(J){k0(r,J)}while(!0);return s&&r.shellSuspendCounter++,Jr=ea=null,Qe=u,$.H=h,$.A=p,je===null&&(it=null,Be=0,Ic()),E}function lS(){for(;je!==null;)U0(je)}function uS(r,s){var o=Qe;Qe|=2;var u=V0(),h=L0();it!==r||Be!==s?(od=null,ad=Mn()+500,mo(r,s)):uo=Os(r,s);e:do try{if(Xe!==0&&je!==null){s=je;var p=Cn;t:switch(Xe){case 1:Xe=0,Cn=null,po(r,s,p,1);break;case 2:case 9:if(Wy(p)){Xe=0,Cn=null,z0(s);break}s=function(){Xe!==2&&Xe!==9||it!==r||(Xe=7),Sr(r)},p.then(s,s);break e;case 3:Xe=7;break e;case 4:Xe=5;break e;case 7:Wy(p)?(Xe=0,Cn=null,z0(s)):(Xe=0,Cn=null,po(r,s,p,7));break;case 5:var E=null;switch(je.tag){case 26:E=je.memoizedState;case 5:case 27:var x=je;if(!E||E_(E)){Xe=0,Cn=null;var D=x.sibling;if(D!==null)je=D;else{var G=x.return;G!==null?(je=G,ud(G)):je=null}break t}}Xe=0,Cn=null,po(r,s,p,5);break;case 6:Xe=0,Cn=null,po(r,s,p,6);break;case 8:jm(),pt=6;break e;default:throw Error(i(462))}}cS();break}catch(J){k0(r,J)}while(!0);return Jr=ea=null,$.H=u,$.A=h,Qe=o,je!==null?0:(it=null,Be=0,Ic(),pt)}function cS(){for(;je!==null&&!tl();)U0(je)}function U0(r){var s=h0(r.alternate,r,oi);r.memoizedProps=r.pendingProps,s===null?ud(r):je=s}function z0(r){var s=r,o=s.alternate;switch(s.tag){case 15:case 0:s=a0(o,s,s.pendingProps,s.type,void 0,Be);break;case 11:s=a0(o,s,s.pendingProps,s.type.render,s.ref,Be);break;case 5:Zf(s);default:m0(o,s),s=je=By(s,oi),s=h0(o,s,oi)}r.memoizedProps=r.pendingProps,s===null?ud(r):je=s}function po(r,s,o,u){Jr=ea=null,Zf(s),so=null,Bl=0;var h=s.return;try{if(Jx(r,h,s,o,Be)){pt=1,ed(r,zn(o,r.current)),je=null;return}}catch(p){if(h!==null)throw je=h,p;pt=1,ed(r,zn(o,r.current)),je=null;return}s.flags&32768?(Fe||u===1?r=!0:uo||(Be&536870912)!==0?r=!1:(Fi=r=!0,(u===2||u===9||u===3||u===6)&&(u=Fn.current,u!==null&&u.tag===13&&(u.flags|=16384))),B0(s,r)):ud(s)}function ud(r){var s=r;do{if((s.flags&32768)!==0){B0(s,Fi);return}r=s.return;var o=tS(s.alternate,s,oi);if(o!==null){je=o;return}if(s=s.sibling,s!==null){je=s;return}je=s=r}while(s!==null);pt===0&&(pt=5)}function B0(r,s){do{var o=nS(r.alternate,r);if(o!==null){o.flags&=32767,je=o;return}if(o=r.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!s&&(r=r.sibling,r!==null)){je=r;return}je=r=o}while(r!==null);pt=6,je=null}function q0(r,s,o,u,h,p,E,x,D){r.cancelPendingCommit=null;do cd();while(Yt!==0);if((Qe&6)!==0)throw Error(i(327));if(s!==null){if(s===r.current)throw Error(i(177));if(p=s.lanes|s.childLanes,p|=Rf,ol(r,o,p,E,x,D),r===it&&(je=it=null,Be=0),ho=s,Yi=r,fo=o,Om=p,Pm=h,O0=u,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,mS(Cs,function(){return Y0(),null})):(r.callbackNode=null,r.callbackPriority=0),u=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||u){u=$.T,$.T=null,h=ae.p,ae.p=2,E=Qe,Qe|=4;try{rS(r,s,o)}finally{Qe=E,ae.p=h,$.T=u}}Yt=1,H0(),F0(),G0()}}function H0(){if(Yt===1){Yt=0;var r=Yi,s=ho,o=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||o){o=$.T,$.T=null;var u=ae.p;ae.p=2;var h=Qe;Qe|=4;try{S0(s,r);var p=Qm,E=Dy(r.containerInfo),x=p.focusedElem,D=p.selectionRange;if(E!==x&&x&&x.ownerDocument&&Iy(x.ownerDocument.documentElement,x)){if(D!==null&&wf(x)){var G=D.start,J=D.end;if(J===void 0&&(J=G),"selectionStart"in x)x.selectionStart=G,x.selectionEnd=Math.min(J,x.value.length);else{var re=x.ownerDocument||document,K=re&&re.defaultView||window;if(K.getSelection){var Q=K.getSelection(),Se=x.textContent.length,Ee=Math.min(D.start,Se),tt=D.end===void 0?Ee:Math.min(D.end,Se);!Q.extend&&Ee>tt&&(E=tt,tt=Ee,Ee=E);var z=Ny(x,Ee),k=Ny(x,tt);if(z&&k&&(Q.rangeCount!==1||Q.anchorNode!==z.node||Q.anchorOffset!==z.offset||Q.focusNode!==k.node||Q.focusOffset!==k.offset)){var F=re.createRange();F.setStart(z.node,z.offset),Q.removeAllRanges(),Ee>tt?(Q.addRange(F),Q.extend(k.node,k.offset)):(F.setEnd(k.node,k.offset),Q.addRange(F))}}}}for(re=[],Q=x;Q=Q.parentNode;)Q.nodeType===1&&re.push({element:Q,left:Q.scrollLeft,top:Q.scrollTop});for(typeof x.focus=="function"&&x.focus(),x=0;x<re.length;x++){var ee=re[x];ee.element.scrollLeft=ee.left,ee.element.scrollTop=ee.top}}wd=!!Km,Qm=Km=null}finally{Qe=h,ae.p=u,$.T=o}}r.current=s,Yt=2}}function F0(){if(Yt===2){Yt=0;var r=Yi,s=ho,o=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||o){o=$.T,$.T=null;var u=ae.p;ae.p=2;var h=Qe;Qe|=4;try{E0(r,s.alternate,s)}finally{Qe=h,ae.p=u,$.T=o}}Yt=3}}function G0(){if(Yt===4||Yt===3){Yt=0,sc();var r=Yi,s=ho,o=fo,u=O0;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Yt=5:(Yt=0,ho=Yi=null,$0(r,r.pendingLanes));var h=r.pendingLanes;if(h===0&&($i=null),Da(o),s=s.stateNode,Ke&&typeof Ke.onCommitFiberRoot=="function")try{Ke.onCommitFiberRoot(ft,s,void 0,(s.current.flags&128)===128)}catch{}if(u!==null){s=$.T,h=ae.p,ae.p=2,$.T=null;try{for(var p=r.onRecoverableError,E=0;E<u.length;E++){var x=u[E];p(x.value,{componentStack:x.stack})}}finally{$.T=s,ae.p=h}}(fo&3)!==0&&cd(),Sr(r),h=r.pendingLanes,(o&4194090)!==0&&(h&42)!==0?r===Mm?Xl++:(Xl=0,Mm=r):Xl=0,Wl(0)}}function $0(r,s){(r.pooledCacheLanes&=s)===0&&(s=r.pooledCache,s!=null&&(r.pooledCache=null,Il(s)))}function cd(r){return H0(),F0(),G0(),Y0()}function Y0(){if(Yt!==5)return!1;var r=Yi,s=Om;Om=0;var o=Da(fo),u=$.T,h=ae.p;try{ae.p=32>o?32:o,$.T=null,o=Pm,Pm=null;var p=Yi,E=fo;if(Yt=0,ho=Yi=null,fo=0,(Qe&6)!==0)throw Error(i(331));var x=Qe;if(Qe|=4,I0(p.current),R0(p,p.current,E,o),Qe=x,Wl(0,!1),Ke&&typeof Ke.onPostCommitFiberRoot=="function")try{Ke.onPostCommitFiberRoot(ft,p)}catch{}return!0}finally{ae.p=h,$.T=u,$0(r,s)}}function K0(r,s,o){s=zn(o,s),s=hm(r.stateNode,s,2),r=Vi(r,s,2),r!==null&&(Ur(r,2),Sr(r))}function nt(r,s,o){if(r.tag===3)K0(r,r,o);else for(;s!==null;){if(s.tag===3){K0(s,r,o);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&($i===null||!$i.has(u))){r=zn(o,r),o=Zv(2),u=Vi(s,o,2),u!==null&&(Jv(o,u,s,r),Ur(u,2),Sr(u));break}}s=s.return}}function Lm(r,s,o){var u=r.pingCache;if(u===null){u=r.pingCache=new aS;var h=new Set;u.set(s,h)}else h=u.get(s),h===void 0&&(h=new Set,u.set(s,h));h.has(o)||(Cm=!0,h.add(o),r=dS.bind(null,r,s,o),s.then(r,r))}function dS(r,s,o){var u=r.pingCache;u!==null&&u.delete(s),r.pingedLanes|=r.suspendedLanes&o,r.warmLanes&=~o,it===r&&(Be&o)===o&&(pt===4||pt===3&&(Be&62914560)===Be&&300>Mn()-Dm?(Qe&2)===0&&mo(r,0):Nm|=o,co===Be&&(co=0)),Sr(r)}function Q0(r,s){s===0&&(s=al()),r=Qa(r,s),r!==null&&(Ur(r,s),Sr(r))}function hS(r){var s=r.memoizedState,o=0;s!==null&&(o=s.retryLane),Q0(r,o)}function fS(r,s){var o=0;switch(r.tag){case 13:var u=r.stateNode,h=r.memoizedState;h!==null&&(o=h.retryLane);break;case 19:u=r.stateNode;break;case 22:u=r.stateNode._retryCache;break;default:throw Error(i(314))}u!==null&&u.delete(s),Q0(r,o)}function mS(r,s){return As(r,s)}var dd=null,go=null,Um=!1,hd=!1,zm=!1,oa=0;function Sr(r){r!==go&&r.next===null&&(go===null?dd=go=r:go=go.next=r),hd=!0,Um||(Um=!0,gS())}function Wl(r,s){if(!zm&&hd){zm=!0;do for(var o=!1,u=dd;u!==null;){if(r!==0){var h=u.pendingLanes;if(h===0)var p=0;else{var E=u.suspendedLanes,x=u.pingedLanes;p=(1<<31-Jt(42|r)+1)-1,p&=h&~(E&~x),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(o=!0,J0(u,p))}else p=Be,p=Ia(u,u===it?p:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(p&3)===0||Os(u,p)||(o=!0,J0(u,p));u=u.next}while(o);zm=!1}}function pS(){X0()}function X0(){hd=Um=!1;var r=0;oa!==0&&(xS()&&(r=oa),oa=0);for(var s=Mn(),o=null,u=dd;u!==null;){var h=u.next,p=W0(u,s);p===0?(u.next=null,o===null?dd=h:o.next=h,h===null&&(go=o)):(o=u,(r!==0||(p&3)!==0)&&(hd=!0)),u=h}Wl(r)}function W0(r,s){for(var o=r.suspendedLanes,u=r.pingedLanes,h=r.expirationTimes,p=r.pendingLanes&-62914561;0<p;){var E=31-Jt(p),x=1<<E,D=h[E];D===-1?((x&o)===0||(x&u)!==0)&&(h[E]=il(x,s)):D<=s&&(r.expiredLanes|=x),p&=~x}if(s=it,o=Be,o=Ia(r,r===s?o:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u=r.callbackNode,o===0||r===s&&(Xe===2||Xe===9)||r.cancelPendingCommit!==null)return u!==null&&u!==null&&Rs(u),r.callbackNode=null,r.callbackPriority=0;if((o&3)===0||Os(r,o)){if(s=o&-o,s===r.callbackPriority)return s;switch(u!==null&&Rs(u),Da(o)){case 2:case 8:o=Ca;break;case 32:o=Cs;break;case 268435456:o=Na;break;default:o=Cs}return u=Z0.bind(null,r),o=As(o,u),r.callbackPriority=s,r.callbackNode=o,s}return u!==null&&u!==null&&Rs(u),r.callbackPriority=2,r.callbackNode=null,2}function Z0(r,s){if(Yt!==0&&Yt!==5)return r.callbackNode=null,r.callbackPriority=0,null;var o=r.callbackNode;if(cd()&&r.callbackNode!==o)return null;var u=Be;return u=Ia(r,r===it?u:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u===0?null:(M0(r,u,s),W0(r,Mn()),r.callbackNode!=null&&r.callbackNode===o?Z0.bind(null,r):null)}function J0(r,s){if(cd())return null;M0(r,s,!0)}function gS(){AS(function(){(Qe&6)!==0?As(nl,pS):X0()})}function Bm(){return oa===0&&(oa=sl()),oa}function e_(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:Va(""+r)}function t_(r,s){var o=s.ownerDocument.createElement("input");return o.name=s.name,o.value=s.value,r.id&&o.setAttribute("form",r.id),s.parentNode.insertBefore(o,s),r=new FormData(r),o.parentNode.removeChild(o),r}function yS(r,s,o,u,h){if(s==="submit"&&o&&o.stateNode===h){var p=e_((h[wt]||null).action),E=u.submitter;E&&(s=(s=E[wt]||null)?e_(s.formAction):E.getAttribute("formAction"),s!==null&&(p=s,E=null));var x=new La("action","action",null,u,h);r.push({event:x,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(oa!==0){var D=E?t_(h,E):new FormData(h);om(o,{pending:!0,data:D,method:h.method,action:p},null,D)}}else typeof p=="function"&&(x.preventDefault(),D=E?t_(h,E):new FormData(h),om(o,{pending:!0,data:D,method:h.method,action:p},p,D))},currentTarget:h}]})}}for(var qm=0;qm<Af.length;qm++){var Hm=Af[qm],vS=Hm.toLowerCase(),_S=Hm[0].toUpperCase()+Hm.slice(1);er(vS,"on"+_S)}er(My,"onAnimationEnd"),er(jy,"onAnimationIteration"),er(ky,"onAnimationStart"),er("dblclick","onDoubleClick"),er("focusin","onFocus"),er("focusout","onBlur"),er(kx,"onTransitionRun"),er(Vx,"onTransitionStart"),er(Lx,"onTransitionCancel"),er(Vy,"onTransitionEnd"),Br("onMouseEnter",["mouseout","mouseover"]),Br("onMouseLeave",["mouseout","mouseover"]),Br("onPointerEnter",["pointerout","pointerover"]),Br("onPointerLeave",["pointerout","pointerover"]),Zn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Zn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Zn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Zn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Zn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Zn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),bS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Zl));function n_(r,s){s=(s&4)!==0;for(var o=0;o<r.length;o++){var u=r[o],h=u.event;u=u.listeners;e:{var p=void 0;if(s)for(var E=u.length-1;0<=E;E--){var x=u[E],D=x.instance,G=x.currentTarget;if(x=x.listener,D!==p&&h.isPropagationStopped())break e;p=x,h.currentTarget=G;try{p(h)}catch(J){Jc(J)}h.currentTarget=null,p=D}else for(E=0;E<u.length;E++){if(x=u[E],D=x.instance,G=x.currentTarget,x=x.listener,D!==p&&h.isPropagationStopped())break e;p=x,h.currentTarget=G;try{p(h)}catch(J){Jc(J)}h.currentTarget=null,p=D}}}}function ke(r,s){var o=s[ul];o===void 0&&(o=s[ul]=new Set);var u=r+"__bubble";o.has(u)||(r_(s,r,2,!1),o.add(u))}function Fm(r,s,o){var u=0;s&&(u|=4),r_(o,r,u,s)}var fd="_reactListening"+Math.random().toString(36).slice(2);function Gm(r){if(!r[fd]){r[fd]=!0,cl.forEach(function(o){o!=="selectionchange"&&(bS.has(o)||Fm(o,!1,r),Fm(o,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[fd]||(s[fd]=!0,Fm("selectionchange",!1,s))}}function r_(r,s,o,u){switch(R_(s)){case 2:var h=YS;break;case 8:h=KS;break;default:h=sp}o=h.bind(null,s,o,r),h=void 0,!Ln||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(h=!0),u?h!==void 0?r.addEventListener(s,o,{capture:!0,passive:h}):r.addEventListener(s,o,!0):h!==void 0?r.addEventListener(s,o,{passive:h}):r.addEventListener(s,o,!1)}function $m(r,s,o,u,h){var p=u;if((s&1)===0&&(s&2)===0&&u!==null)e:for(;;){if(u===null)return;var E=u.tag;if(E===3||E===4){var x=u.stateNode.containerInfo;if(x===h)break;if(E===4)for(E=u.return;E!==null;){var D=E.tag;if((D===3||D===4)&&E.stateNode.containerInfo===h)return;E=E.return}for(;x!==null;){if(E=zr(x),E===null)return;if(D=E.tag,D===5||D===6||D===26||D===27){u=p=E;continue e}x=x.parentNode}}u=u.return}pc(function(){var G=p,J=Vn(o),re=[];e:{var K=Ly.get(r);if(K!==void 0){var Q=La,Se=r;switch(r){case"keypress":if(gr(o)===0)break e;case"keydown":case"keyup":Q=Fa;break;case"focusin":Se="focus",Q=Ba;break;case"focusout":Se="blur",Q=Ba;break;case"beforeblur":case"afterblur":Q=Ba;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Q=Un;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Q=vf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Q=Tc;break;case My:case jy:case ky:Q=qa;break;case Vy:Q=Sc;break;case"scroll":case"scrollend":Q=gc;break;case"wheel":Q=Ga;break;case"copy":case"cut":case"paste":Q=Ha;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Q=wl;break;case"toggle":case"beforetoggle":Q=Rc}var Ee=(s&4)!==0,tt=!Ee&&(r==="scroll"||r==="scrollend"),z=Ee?K!==null?K+"Capture":null:K;Ee=[];for(var k=G,F;k!==null;){var ee=k;if(F=ee.stateNode,ee=ee.tag,ee!==5&&ee!==26&&ee!==27||F===null||z===null||(ee=zs(k,z),ee!=null&&Ee.push(Jl(k,ee,F))),tt)break;k=k.return}0<Ee.length&&(K=new Q(K,Se,null,o,J),re.push({event:K,listeners:Ee}))}}if((s&7)===0){e:{if(K=r==="mouseover"||r==="pointerover",Q=r==="mouseout"||r==="pointerout",K&&o!==Fr&&(Se=o.relatedTarget||o.fromElement)&&(zr(Se)||Se[jn]))break e;if((Q||K)&&(K=J.window===J?J:(K=J.ownerDocument)?K.defaultView||K.parentWindow:window,Q?(Se=o.relatedTarget||o.toElement,Q=G,Se=Se?zr(Se):null,Se!==null&&(tt=l(Se),Ee=Se.tag,Se!==tt||Ee!==5&&Ee!==27&&Ee!==6)&&(Se=null)):(Q=null,Se=G),Q!==Se)){if(Ee=Un,ee="onMouseLeave",z="onMouseEnter",k="mouse",(r==="pointerout"||r==="pointerover")&&(Ee=wl,ee="onPointerLeave",z="onPointerEnter",k="pointer"),tt=Q==null?K:hr(Q),F=Se==null?K:hr(Se),K=new Ee(ee,k+"leave",Q,o,J),K.target=tt,K.relatedTarget=F,ee=null,zr(J)===G&&(Ee=new Ee(z,k+"enter",Se,o,J),Ee.target=F,Ee.relatedTarget=tt,ee=Ee),tt=ee,Q&&Se)t:{for(Ee=Q,z=Se,k=0,F=Ee;F;F=yo(F))k++;for(F=0,ee=z;ee;ee=yo(ee))F++;for(;0<k-F;)Ee=yo(Ee),k--;for(;0<F-k;)z=yo(z),F--;for(;k--;){if(Ee===z||z!==null&&Ee===z.alternate)break t;Ee=yo(Ee),z=yo(z)}Ee=null}else Ee=null;Q!==null&&i_(re,K,Q,Ee,!1),Se!==null&&tt!==null&&i_(re,tt,Se,Ee,!0)}}e:{if(K=G?hr(G):window,Q=K.nodeName&&K.nodeName.toLowerCase(),Q==="select"||Q==="input"&&K.type==="file")var pe=Ty;else if(It(K))if(xy)pe=Px;else{pe=Dx;var Me=Ix}else Q=K.nodeName,!Q||Q.toLowerCase()!=="input"||K.type!=="checkbox"&&K.type!=="radio"?G&&pl(G.elementType)&&(pe=Ty):pe=Ox;if(pe&&(pe=pe(r,G))){Qr(re,pe,o,J);break e}Me&&Me(r,K,G),r==="focusout"&&G&&K.type==="number"&&G.memoizedProps.value!=null&&Oi(K,"number",K.value)}switch(Me=G?hr(G):window,r){case"focusin":(It(Me)||Me.contentEditable==="true")&&($a=Me,Tf=G,Sl=null);break;case"focusout":Sl=Tf=$a=null;break;case"mousedown":xf=!0;break;case"contextmenu":case"mouseup":case"dragend":xf=!1,Oy(re,o,J);break;case"selectionchange":if(jx)break;case"keydown":case"keyup":Oy(re,o,J)}var ve;if(_r)e:{switch(r){case"compositionstart":var we="onCompositionStart";break e;case"compositionend":we="onCompositionEnd";break e;case"compositionupdate":we="onCompositionUpdate";break e}we=void 0}else Ue?W(r,o)&&(we="onCompositionEnd"):r==="keydown"&&o.keyCode===229&&(we="onCompositionStart");we&&(b&&o.locale!=="ko"&&(Ue||we!=="onCompositionStart"?we==="onCompositionEnd"&&Ue&&(ve=yl()):(pr=J,Pi="value"in pr?pr.value:pr.textContent,Ue=!0)),Me=md(G,we),0<Me.length&&(we=new bl(we,r,null,o,J),re.push({event:we,listeners:Me}),ve?we.data=ve:(ve=le(o),ve!==null&&(we.data=ve)))),(ve=_?Nt(r,o):ze(r,o))&&(we=md(G,"onBeforeInput"),0<we.length&&(Me=new bl("onBeforeInput","beforeinput",null,o,J),re.push({event:Me,listeners:we}),Me.data=ve)),yS(re,r,G,o,J)}n_(re,s)})}function Jl(r,s,o){return{instance:r,listener:s,currentTarget:o}}function md(r,s){for(var o=s+"Capture",u=[];r!==null;){var h=r,p=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||p===null||(h=zs(r,o),h!=null&&u.unshift(Jl(r,h,p)),h=zs(r,s),h!=null&&u.push(Jl(r,h,p))),r.tag===3)return u;r=r.return}return[]}function yo(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function i_(r,s,o,u,h){for(var p=s._reactName,E=[];o!==null&&o!==u;){var x=o,D=x.alternate,G=x.stateNode;if(x=x.tag,D!==null&&D===u)break;x!==5&&x!==26&&x!==27||G===null||(D=G,h?(G=zs(o,p),G!=null&&E.unshift(Jl(o,G,D))):h||(G=zs(o,p),G!=null&&E.push(Jl(o,G,D)))),o=o.return}E.length!==0&&r.push({event:s,listeners:E})}var ES=/\r\n?/g,wS=/\u0000|\uFFFD/g;function s_(r){return(typeof r=="string"?r:""+r).replace(ES,`
`).replace(wS,"")}function a_(r,s){return s=s_(s),s_(r)===s}function pd(){}function et(r,s,o,u,h,p){switch(o){case"children":typeof u=="string"?s==="body"||s==="textarea"&&u===""||kn(r,u):(typeof u=="number"||typeof u=="bigint")&&s!=="body"&&kn(r,""+u);break;case"className":fr(r,"class",u);break;case"tabIndex":fr(r,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":fr(r,o,u);break;case"style":ml(r,u,p);break;case"data":if(s!=="object"){fr(r,"data",u);break}case"src":case"href":if(u===""&&(s!=="a"||o!=="href")){r.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(o);break}u=Va(""+u),r.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){r.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(o==="formAction"?(s!=="input"&&et(r,s,"name",h.name,h,null),et(r,s,"formEncType",h.formEncType,h,null),et(r,s,"formMethod",h.formMethod,h,null),et(r,s,"formTarget",h.formTarget,h,null)):(et(r,s,"encType",h.encType,h,null),et(r,s,"method",h.method,h,null),et(r,s,"target",h.target,h,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(o);break}u=Va(""+u),r.setAttribute(o,u);break;case"onClick":u!=null&&(r.onclick=pd);break;case"onScroll":u!=null&&ke("scroll",r);break;case"onScrollEnd":u!=null&&ke("scrollend",r);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(o=u.__html,o!=null){if(h.children!=null)throw Error(i(60));r.innerHTML=o}}break;case"multiple":r.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":r.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){r.removeAttribute("xlink:href");break}o=Va(""+u),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,""+u):r.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,""):r.removeAttribute(o);break;case"capture":case"download":u===!0?r.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,u):r.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?r.setAttribute(o,u):r.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?r.removeAttribute(o):r.setAttribute(o,u);break;case"popover":ke("beforetoggle",r),ke("toggle",r),Di(r,"popover",u);break;case"xlinkActuate":Ft(r,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Ft(r,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Ft(r,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Ft(r,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Ft(r,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Ft(r,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Ft(r,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Ft(r,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Ft(r,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Di(r,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=gf.get(o)||o,Di(r,o,u))}}function Ym(r,s,o,u,h,p){switch(o){case"style":ml(r,u,p);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(o=u.__html,o!=null){if(h.children!=null)throw Error(i(60));r.innerHTML=o}}break;case"children":typeof u=="string"?kn(r,u):(typeof u=="number"||typeof u=="bigint")&&kn(r,""+u);break;case"onScroll":u!=null&&ke("scroll",r);break;case"onScrollEnd":u!=null&&ke("scrollend",r);break;case"onClick":u!=null&&(r.onclick=pd);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Oa.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(h=o.endsWith("Capture"),s=o.slice(2,h?o.length-7:void 0),p=r[wt]||null,p=p!=null?p[o]:null,typeof p=="function"&&r.removeEventListener(s,p,h),typeof u=="function")){typeof p!="function"&&p!==null&&(o in r?r[o]=null:r.hasAttribute(o)&&r.removeAttribute(o)),r.addEventListener(s,u,h);break e}o in r?r[o]=u:u===!0?r.setAttribute(o,""):Di(r,o,u)}}}function Kt(r,s,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ke("error",r),ke("load",r);var u=!1,h=!1,p;for(p in o)if(o.hasOwnProperty(p)){var E=o[p];if(E!=null)switch(p){case"src":u=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:et(r,s,p,E,o,null)}}h&&et(r,s,"srcSet",o.srcSet,o,null),u&&et(r,s,"src",o.src,o,null);return;case"input":ke("invalid",r);var x=p=E=h=null,D=null,G=null;for(u in o)if(o.hasOwnProperty(u)){var J=o[u];if(J!=null)switch(u){case"name":h=J;break;case"type":E=J;break;case"checked":D=J;break;case"defaultChecked":G=J;break;case"value":p=J;break;case"defaultValue":x=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(i(137,s));break;default:et(r,s,u,J,o,null)}}Vs(r,p,x,D,G,E,h,!1),ka(r);return;case"select":ke("invalid",r),u=E=p=null;for(h in o)if(o.hasOwnProperty(h)&&(x=o[h],x!=null))switch(h){case"value":p=x;break;case"defaultValue":E=x;break;case"multiple":u=x;default:et(r,s,h,x,o,null)}s=p,o=E,r.multiple=!!u,s!=null?Hr(r,!!u,s,!1):o!=null&&Hr(r,!!u,o,!0);return;case"textarea":ke("invalid",r),p=h=u=null;for(E in o)if(o.hasOwnProperty(E)&&(x=o[E],x!=null))switch(E){case"value":u=x;break;case"defaultValue":h=x;break;case"children":p=x;break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(i(91));break;default:et(r,s,E,x,o,null)}Ls(r,u,h,p),ka(r);return;case"option":for(D in o)if(o.hasOwnProperty(D)&&(u=o[D],u!=null))switch(D){case"selected":r.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:et(r,s,D,u,o,null)}return;case"dialog":ke("beforetoggle",r),ke("toggle",r),ke("cancel",r),ke("close",r);break;case"iframe":case"object":ke("load",r);break;case"video":case"audio":for(u=0;u<Zl.length;u++)ke(Zl[u],r);break;case"image":ke("error",r),ke("load",r);break;case"details":ke("toggle",r);break;case"embed":case"source":case"link":ke("error",r),ke("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(G in o)if(o.hasOwnProperty(G)&&(u=o[G],u!=null))switch(G){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:et(r,s,G,u,o,null)}return;default:if(pl(s)){for(J in o)o.hasOwnProperty(J)&&(u=o[J],u!==void 0&&Ym(r,s,J,u,o,void 0));return}}for(x in o)o.hasOwnProperty(x)&&(u=o[x],u!=null&&et(r,s,x,u,o,null))}function TS(r,s,o,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,p=null,E=null,x=null,D=null,G=null,J=null;for(Q in o){var re=o[Q];if(o.hasOwnProperty(Q)&&re!=null)switch(Q){case"checked":break;case"value":break;case"defaultValue":D=re;default:u.hasOwnProperty(Q)||et(r,s,Q,null,u,re)}}for(var K in u){var Q=u[K];if(re=o[K],u.hasOwnProperty(K)&&(Q!=null||re!=null))switch(K){case"type":p=Q;break;case"name":h=Q;break;case"checked":G=Q;break;case"defaultChecked":J=Q;break;case"value":E=Q;break;case"defaultValue":x=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(i(137,s));break;default:Q!==re&&et(r,s,K,Q,u,re)}}Tn(r,E,x,D,G,J,p,h);return;case"select":Q=E=x=K=null;for(p in o)if(D=o[p],o.hasOwnProperty(p)&&D!=null)switch(p){case"value":break;case"multiple":Q=D;default:u.hasOwnProperty(p)||et(r,s,p,null,u,D)}for(h in u)if(p=u[h],D=o[h],u.hasOwnProperty(h)&&(p!=null||D!=null))switch(h){case"value":K=p;break;case"defaultValue":x=p;break;case"multiple":E=p;default:p!==D&&et(r,s,h,p,u,D)}s=x,o=E,u=Q,K!=null?Hr(r,!!o,K,!1):!!u!=!!o&&(s!=null?Hr(r,!!o,s,!0):Hr(r,!!o,o?[]:"",!1));return;case"textarea":Q=K=null;for(x in o)if(h=o[x],o.hasOwnProperty(x)&&h!=null&&!u.hasOwnProperty(x))switch(x){case"value":break;case"children":break;default:et(r,s,x,null,u,h)}for(E in u)if(h=u[E],p=o[E],u.hasOwnProperty(E)&&(h!=null||p!=null))switch(E){case"value":K=h;break;case"defaultValue":Q=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(i(91));break;default:h!==p&&et(r,s,E,h,u,p)}Ze(r,K,Q);return;case"option":for(var Se in o)if(K=o[Se],o.hasOwnProperty(Se)&&K!=null&&!u.hasOwnProperty(Se))switch(Se){case"selected":r.selected=!1;break;default:et(r,s,Se,null,u,K)}for(D in u)if(K=u[D],Q=o[D],u.hasOwnProperty(D)&&K!==Q&&(K!=null||Q!=null))switch(D){case"selected":r.selected=K&&typeof K!="function"&&typeof K!="symbol";break;default:et(r,s,D,K,u,Q)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ee in o)K=o[Ee],o.hasOwnProperty(Ee)&&K!=null&&!u.hasOwnProperty(Ee)&&et(r,s,Ee,null,u,K);for(G in u)if(K=u[G],Q=o[G],u.hasOwnProperty(G)&&K!==Q&&(K!=null||Q!=null))switch(G){case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(i(137,s));break;default:et(r,s,G,K,u,Q)}return;default:if(pl(s)){for(var tt in o)K=o[tt],o.hasOwnProperty(tt)&&K!==void 0&&!u.hasOwnProperty(tt)&&Ym(r,s,tt,void 0,u,K);for(J in u)K=u[J],Q=o[J],!u.hasOwnProperty(J)||K===Q||K===void 0&&Q===void 0||Ym(r,s,J,K,u,Q);return}}for(var z in o)K=o[z],o.hasOwnProperty(z)&&K!=null&&!u.hasOwnProperty(z)&&et(r,s,z,null,u,K);for(re in u)K=u[re],Q=o[re],!u.hasOwnProperty(re)||K===Q||K==null&&Q==null||et(r,s,re,K,u,Q)}var Km=null,Qm=null;function gd(r){return r.nodeType===9?r:r.ownerDocument}function o_(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function l_(r,s){if(r===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&s==="foreignObject"?0:r}function Xm(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Wm=null;function xS(){var r=window.event;return r&&r.type==="popstate"?r===Wm?!1:(Wm=r,!0):(Wm=null,!1)}var u_=typeof setTimeout=="function"?setTimeout:void 0,SS=typeof clearTimeout=="function"?clearTimeout:void 0,c_=typeof Promise=="function"?Promise:void 0,AS=typeof queueMicrotask=="function"?queueMicrotask:typeof c_<"u"?function(r){return c_.resolve(null).then(r).catch(RS)}:u_;function RS(r){setTimeout(function(){throw r})}function Qi(r){return r==="head"}function d_(r,s){var o=s,u=0,h=0;do{var p=o.nextSibling;if(r.removeChild(o),p&&p.nodeType===8)if(o=p.data,o==="/$"){if(0<u&&8>u){o=u;var E=r.ownerDocument;if(o&1&&eu(E.documentElement),o&2&&eu(E.body),o&4)for(o=E.head,eu(o),E=o.firstChild;E;){var x=E.nextSibling,D=E.nodeName;E[Ps]||D==="SCRIPT"||D==="STYLE"||D==="LINK"&&E.rel.toLowerCase()==="stylesheet"||o.removeChild(E),E=x}}if(h===0){r.removeChild(p),lu(s);return}h--}else o==="$"||o==="$?"||o==="$!"?h++:u=o.charCodeAt(0)-48;else u=0;o=p}while(o);lu(s)}function Zm(r){var s=r.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var o=s;switch(s=s.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Zm(o),Ii(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}r.removeChild(o)}}function CS(r,s,o,u){for(;r.nodeType===1;){var h=o;if(r.nodeName.toLowerCase()!==s.toLowerCase()){if(!u&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(u){if(!r[Ps])switch(s){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(p=r.getAttribute("rel"),p==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(p!==h.rel||r.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||r.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||r.getAttribute("title")!==(h.title==null?null:h.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(p=r.getAttribute("src"),(p!==(h.src==null?null:h.src)||r.getAttribute("type")!==(h.type==null?null:h.type)||r.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&p&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(s==="input"&&r.type==="hidden"){var p=h.name==null?null:""+h.name;if(h.type==="hidden"&&r.getAttribute("name")===p)return r}else return r;if(r=nr(r.nextSibling),r===null)break}return null}function NS(r,s,o){if(s==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!o||(r=nr(r.nextSibling),r===null))return null;return r}function Jm(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState==="complete"}function IS(r,s){var o=r.ownerDocument;if(r.data!=="$?"||o.readyState==="complete")s();else{var u=function(){s(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),r._reactRetry=u}}function nr(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return r}var ep=null;function h_(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var o=r.data;if(o==="$"||o==="$!"||o==="$?"){if(s===0)return r;s--}else o==="/$"&&s++}r=r.previousSibling}return null}function f_(r,s,o){switch(s=gd(o),r){case"html":if(r=s.documentElement,!r)throw Error(i(452));return r;case"head":if(r=s.head,!r)throw Error(i(453));return r;case"body":if(r=s.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}function eu(r){for(var s=r.attributes;s.length;)r.removeAttributeNode(s[0]);Ii(r)}var $n=new Map,m_=new Set;function yd(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var li=ae.d;ae.d={f:DS,r:OS,D:PS,C:MS,L:jS,m:kS,X:LS,S:VS,M:US};function DS(){var r=li.f(),s=ld();return r||s}function OS(r){var s=dr(r);s!==null&&s.tag===5&&s.type==="form"?Mv(s):li.r(r)}var vo=typeof document>"u"?null:document;function p_(r,s,o){var u=vo;if(u&&typeof s=="string"&&s){var h=Tt(s);h='link[rel="'+r+'"][href="'+h+'"]',typeof o=="string"&&(h+='[crossorigin="'+o+'"]'),m_.has(h)||(m_.add(h),r={rel:r,crossOrigin:o,href:s},u.querySelector(h)===null&&(s=u.createElement("link"),Kt(s,"link",r),vt(s),u.head.appendChild(s)))}}function PS(r){li.D(r),p_("dns-prefetch",r,null)}function MS(r,s){li.C(r,s),p_("preconnect",r,s)}function jS(r,s,o){li.L(r,s,o);var u=vo;if(u&&r&&s){var h='link[rel="preload"][as="'+Tt(s)+'"]';s==="image"&&o&&o.imageSrcSet?(h+='[imagesrcset="'+Tt(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(h+='[imagesizes="'+Tt(o.imageSizes)+'"]')):h+='[href="'+Tt(r)+'"]';var p=h;switch(s){case"style":p=_o(r);break;case"script":p=bo(r)}$n.has(p)||(r=v({rel:"preload",href:s==="image"&&o&&o.imageSrcSet?void 0:r,as:s},o),$n.set(p,r),u.querySelector(h)!==null||s==="style"&&u.querySelector(tu(p))||s==="script"&&u.querySelector(nu(p))||(s=u.createElement("link"),Kt(s,"link",r),vt(s),u.head.appendChild(s)))}}function kS(r,s){li.m(r,s);var o=vo;if(o&&r){var u=s&&typeof s.as=="string"?s.as:"script",h='link[rel="modulepreload"][as="'+Tt(u)+'"][href="'+Tt(r)+'"]',p=h;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=bo(r)}if(!$n.has(p)&&(r=v({rel:"modulepreload",href:r},s),$n.set(p,r),o.querySelector(h)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(nu(p)))return}u=o.createElement("link"),Kt(u,"link",r),vt(u),o.head.appendChild(u)}}}function VS(r,s,o){li.S(r,s,o);var u=vo;if(u&&r){var h=ln(u).hoistableStyles,p=_o(r);s=s||"default";var E=h.get(p);if(!E){var x={loading:0,preload:null};if(E=u.querySelector(tu(p)))x.loading=5;else{r=v({rel:"stylesheet",href:r,"data-precedence":s},o),(o=$n.get(p))&&tp(r,o);var D=E=u.createElement("link");vt(D),Kt(D,"link",r),D._p=new Promise(function(G,J){D.onload=G,D.onerror=J}),D.addEventListener("load",function(){x.loading|=1}),D.addEventListener("error",function(){x.loading|=2}),x.loading|=4,vd(E,s,u)}E={type:"stylesheet",instance:E,count:1,state:x},h.set(p,E)}}}function LS(r,s){li.X(r,s);var o=vo;if(o&&r){var u=ln(o).hoistableScripts,h=bo(r),p=u.get(h);p||(p=o.querySelector(nu(h)),p||(r=v({src:r,async:!0},s),(s=$n.get(h))&&np(r,s),p=o.createElement("script"),vt(p),Kt(p,"link",r),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},u.set(h,p))}}function US(r,s){li.M(r,s);var o=vo;if(o&&r){var u=ln(o).hoistableScripts,h=bo(r),p=u.get(h);p||(p=o.querySelector(nu(h)),p||(r=v({src:r,async:!0,type:"module"},s),(s=$n.get(h))&&np(r,s),p=o.createElement("script"),vt(p),Kt(p,"link",r),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},u.set(h,p))}}function g_(r,s,o,u){var h=(h=Ae.current)?yd(h):null;if(!h)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(s=_o(o.href),o=ln(h).hoistableStyles,u=o.get(s),u||(u={type:"style",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){r=_o(o.href);var p=ln(h).hoistableStyles,E=p.get(r);if(E||(h=h.ownerDocument||h,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(r,E),(p=h.querySelector(tu(r)))&&!p._p&&(E.instance=p,E.state.loading=5),$n.has(r)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},$n.set(r,o),p||zS(h,r,o,E.state))),s&&u===null)throw Error(i(528,""));return E}if(s&&u!==null)throw Error(i(529,""));return null;case"script":return s=o.async,o=o.src,typeof o=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=bo(o),o=ln(h).hoistableScripts,u=o.get(s),u||(u={type:"script",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function _o(r){return'href="'+Tt(r)+'"'}function tu(r){return'link[rel="stylesheet"]['+r+"]"}function y_(r){return v({},r,{"data-precedence":r.precedence,precedence:null})}function zS(r,s,o,u){r.querySelector('link[rel="preload"][as="style"]['+s+"]")?u.loading=1:(s=r.createElement("link"),u.preload=s,s.addEventListener("load",function(){return u.loading|=1}),s.addEventListener("error",function(){return u.loading|=2}),Kt(s,"link",o),vt(s),r.head.appendChild(s))}function bo(r){return'[src="'+Tt(r)+'"]'}function nu(r){return"script[async]"+r}function v_(r,s,o){if(s.count++,s.instance===null)switch(s.type){case"style":var u=r.querySelector('style[data-href~="'+Tt(o.href)+'"]');if(u)return s.instance=u,vt(u),u;var h=v({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(r.ownerDocument||r).createElement("style"),vt(u),Kt(u,"style",h),vd(u,o.precedence,r),s.instance=u;case"stylesheet":h=_o(o.href);var p=r.querySelector(tu(h));if(p)return s.state.loading|=4,s.instance=p,vt(p),p;u=y_(o),(h=$n.get(h))&&tp(u,h),p=(r.ownerDocument||r).createElement("link"),vt(p);var E=p;return E._p=new Promise(function(x,D){E.onload=x,E.onerror=D}),Kt(p,"link",u),s.state.loading|=4,vd(p,o.precedence,r),s.instance=p;case"script":return p=bo(o.src),(h=r.querySelector(nu(p)))?(s.instance=h,vt(h),h):(u=o,(h=$n.get(p))&&(u=v({},o),np(u,h)),r=r.ownerDocument||r,h=r.createElement("script"),vt(h),Kt(h,"link",u),r.head.appendChild(h),s.instance=h);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(u=s.instance,s.state.loading|=4,vd(u,o.precedence,r));return s.instance}function vd(r,s,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=u.length?u[u.length-1]:null,p=h,E=0;E<u.length;E++){var x=u[E];if(x.dataset.precedence===s)p=x;else if(p!==h)break}p?p.parentNode.insertBefore(r,p.nextSibling):(s=o.nodeType===9?o.head:o,s.insertBefore(r,s.firstChild))}function tp(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.title==null&&(r.title=s.title)}function np(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.integrity==null&&(r.integrity=s.integrity)}var _d=null;function __(r,s,o){if(_d===null){var u=new Map,h=_d=new Map;h.set(o,u)}else h=_d,u=h.get(o),u||(u=new Map,h.set(o,u));if(u.has(r))return u;for(u.set(r,null),o=o.getElementsByTagName(r),h=0;h<o.length;h++){var p=o[h];if(!(p[Ps]||p[Ct]||r==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var E=p.getAttribute(s)||"";E=r+E;var x=u.get(E);x?x.push(p):u.set(E,[p])}}return u}function b_(r,s,o){r=r.ownerDocument||r,r.head.insertBefore(o,s==="title"?r.querySelector("head > title"):null)}function BS(r,s,o){if(o===1||s.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return r=s.disabled,typeof s.precedence=="string"&&r==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function E_(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}var ru=null;function qS(){}function HS(r,s,o){if(ru===null)throw Error(i(475));var u=ru;if(s.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var h=_o(o.href),p=r.querySelector(tu(h));if(p){r=p._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(u.count++,u=bd.bind(u),r.then(u,u)),s.state.loading|=4,s.instance=p,vt(p);return}p=r.ownerDocument||r,o=y_(o),(h=$n.get(h))&&tp(o,h),p=p.createElement("link"),vt(p);var E=p;E._p=new Promise(function(x,D){E.onload=x,E.onerror=D}),Kt(p,"link",o),s.instance=p}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(s,r),(r=s.state.preload)&&(s.state.loading&3)===0&&(u.count++,s=bd.bind(u),r.addEventListener("load",s),r.addEventListener("error",s))}}function FS(){if(ru===null)throw Error(i(475));var r=ru;return r.stylesheets&&r.count===0&&rp(r,r.stylesheets),0<r.count?function(s){var o=setTimeout(function(){if(r.stylesheets&&rp(r,r.stylesheets),r.unsuspend){var u=r.unsuspend;r.unsuspend=null,u()}},6e4);return r.unsuspend=s,function(){r.unsuspend=null,clearTimeout(o)}}:null}function bd(){if(this.count--,this.count===0){if(this.stylesheets)rp(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var Ed=null;function rp(r,s){r.stylesheets=null,r.unsuspend!==null&&(r.count++,Ed=new Map,s.forEach(GS,r),Ed=null,bd.call(r))}function GS(r,s){if(!(s.state.loading&4)){var o=Ed.get(r);if(o)var u=o.get(null);else{o=new Map,Ed.set(r,o);for(var h=r.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<h.length;p++){var E=h[p];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(o.set(E.dataset.precedence,E),u=E)}u&&o.set(null,u)}h=s.instance,E=h.getAttribute("data-precedence"),p=o.get(E)||u,p===u&&o.set(null,h),o.set(E,h),this.count++,u=bd.bind(this),h.addEventListener("load",u),h.addEventListener("error",u),p?p.parentNode.insertBefore(h,p.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(h,r.firstChild)),s.state.loading|=4}}var iu={$$typeof:Y,Provider:null,Consumer:null,_currentValue:me,_currentValue2:me,_threadCount:0};function $S(r,s,o,u,h,p,E,x){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Lr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Lr(0),this.hiddenUpdates=Lr(null),this.identifierPrefix=u,this.onUncaughtError=h,this.onCaughtError=p,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=x,this.incompleteTransitions=new Map}function w_(r,s,o,u,h,p,E,x,D,G,J,re){return r=new $S(r,s,o,E,x,D,G,re),s=1,p===!0&&(s|=24),p=Sn(3,null,null,s),r.current=p,p.stateNode=r,s=Lf(),s.refCount++,r.pooledCache=s,s.refCount++,p.memoizedState={element:u,isDehydrated:o,cache:s},qf(p),r}function T_(r){return r?(r=Xa,r):Xa}function x_(r,s,o,u,h,p){h=T_(h),u.context===null?u.context=h:u.pendingContext=h,u=ki(s),u.payload={element:o},p=p===void 0?null:p,p!==null&&(u.callback=p),o=Vi(r,u,s),o!==null&&(In(o,r,s),Ml(o,r,s))}function S_(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var o=r.retryLane;r.retryLane=o!==0&&o<s?o:s}}function ip(r,s){S_(r,s),(r=r.alternate)&&S_(r,s)}function A_(r){if(r.tag===13){var s=Qa(r,67108864);s!==null&&In(s,r,67108864),ip(r,67108864)}}var wd=!0;function YS(r,s,o,u){var h=$.T;$.T=null;var p=ae.p;try{ae.p=2,sp(r,s,o,u)}finally{ae.p=p,$.T=h}}function KS(r,s,o,u){var h=$.T;$.T=null;var p=ae.p;try{ae.p=8,sp(r,s,o,u)}finally{ae.p=p,$.T=h}}function sp(r,s,o,u){if(wd){var h=ap(u);if(h===null)$m(r,s,u,Td,o),C_(r,u);else if(XS(h,r,s,o,u))u.stopPropagation();else if(C_(r,u),s&4&&-1<QS.indexOf(r)){for(;h!==null;){var p=dr(h);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var E=Wn(p.pendingLanes);if(E!==0){var x=p;for(x.pendingLanes|=2,x.entangledLanes|=2;E;){var D=1<<31-Jt(E);x.entanglements[1]|=D,E&=~D}Sr(p),(Qe&6)===0&&(ad=Mn()+500,Wl(0))}}break;case 13:x=Qa(p,2),x!==null&&In(x,p,2),ld(),ip(p,2)}if(p=ap(u),p===null&&$m(r,s,u,Td,o),p===h)break;h=p}h!==null&&u.stopPropagation()}else $m(r,s,u,null,o)}}function ap(r){return r=Vn(r),op(r)}var Td=null;function op(r){if(Td=null,r=zr(r),r!==null){var s=l(r);if(s===null)r=null;else{var o=s.tag;if(o===13){if(r=c(s),r!==null)return r;r=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null)}}return Td=r,null}function R_(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(cf()){case nl:return 2;case Ca:return 8;case Cs:case df:return 32;case Na:return 268435456;default:return 32}default:return 32}}var lp=!1,Xi=null,Wi=null,Zi=null,su=new Map,au=new Map,Ji=[],QS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function C_(r,s){switch(r){case"focusin":case"focusout":Xi=null;break;case"dragenter":case"dragleave":Wi=null;break;case"mouseover":case"mouseout":Zi=null;break;case"pointerover":case"pointerout":su.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":au.delete(s.pointerId)}}function ou(r,s,o,u,h,p){return r===null||r.nativeEvent!==p?(r={blockedOn:s,domEventName:o,eventSystemFlags:u,nativeEvent:p,targetContainers:[h]},s!==null&&(s=dr(s),s!==null&&A_(s)),r):(r.eventSystemFlags|=u,s=r.targetContainers,h!==null&&s.indexOf(h)===-1&&s.push(h),r)}function XS(r,s,o,u,h){switch(s){case"focusin":return Xi=ou(Xi,r,s,o,u,h),!0;case"dragenter":return Wi=ou(Wi,r,s,o,u,h),!0;case"mouseover":return Zi=ou(Zi,r,s,o,u,h),!0;case"pointerover":var p=h.pointerId;return su.set(p,ou(su.get(p)||null,r,s,o,u,h)),!0;case"gotpointercapture":return p=h.pointerId,au.set(p,ou(au.get(p)||null,r,s,o,u,h)),!0}return!1}function N_(r){var s=zr(r.target);if(s!==null){var o=l(s);if(o!==null){if(s=o.tag,s===13){if(s=c(o),s!==null){r.blockedOn=s,lc(r.priority,function(){if(o.tag===13){var u=Nn();u=Ri(u);var h=Qa(o,u);h!==null&&In(h,o,u),ip(o,u)}});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){r.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}r.blockedOn=null}function xd(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var o=ap(r.nativeEvent);if(o===null){o=r.nativeEvent;var u=new o.constructor(o.type,o);Fr=u,o.target.dispatchEvent(u),Fr=null}else return s=dr(o),s!==null&&A_(s),r.blockedOn=o,!1;s.shift()}return!0}function I_(r,s,o){xd(r)&&o.delete(s)}function WS(){lp=!1,Xi!==null&&xd(Xi)&&(Xi=null),Wi!==null&&xd(Wi)&&(Wi=null),Zi!==null&&xd(Zi)&&(Zi=null),su.forEach(I_),au.forEach(I_)}function Sd(r,s){r.blockedOn===s&&(r.blockedOn=null,lp||(lp=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,WS)))}var Ad=null;function D_(r){Ad!==r&&(Ad=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Ad===r&&(Ad=null);for(var s=0;s<r.length;s+=3){var o=r[s],u=r[s+1],h=r[s+2];if(typeof u!="function"){if(op(u||o)===null)continue;break}var p=dr(o);p!==null&&(r.splice(s,3),s-=3,om(p,{pending:!0,data:h,method:o.method,action:u},u,h))}}))}function lu(r){function s(D){return Sd(D,r)}Xi!==null&&Sd(Xi,r),Wi!==null&&Sd(Wi,r),Zi!==null&&Sd(Zi,r),su.forEach(s),au.forEach(s);for(var o=0;o<Ji.length;o++){var u=Ji[o];u.blockedOn===r&&(u.blockedOn=null)}for(;0<Ji.length&&(o=Ji[0],o.blockedOn===null);)N_(o),o.blockedOn===null&&Ji.shift();if(o=(r.ownerDocument||r).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var h=o[u],p=o[u+1],E=h[wt]||null;if(typeof p=="function")E||D_(o);else if(E){var x=null;if(p&&p.hasAttribute("formAction")){if(h=p,E=p[wt]||null)x=E.formAction;else if(op(h)!==null)continue}else x=E.action;typeof x=="function"?o[u+1]=x:(o.splice(u,3),u-=3),D_(o)}}}function up(r){this._internalRoot=r}Rd.prototype.render=up.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(i(409));var o=s.current,u=Nn();x_(o,u,r,s,null,null)},Rd.prototype.unmount=up.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;x_(r.current,2,null,r,null,null),ld(),s[jn]=null}};function Rd(r){this._internalRoot=r}Rd.prototype.unstable_scheduleHydration=function(r){if(r){var s=Ci();r={blockedOn:null,target:r,priority:s};for(var o=0;o<Ji.length&&s!==0&&s<Ji[o].priority;o++);Ji.splice(o,0,r),o===0&&N_(r)}};var O_=e.version;if(O_!=="19.1.0")throw Error(i(527,O_,"19.1.0"));ae.findDOMNode=function(r){var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=m(s),r=r!==null?g(r):null,r=r===null?null:r.stateNode,r};var ZS={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:$,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Cd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Cd.isDisabled&&Cd.supportsFiber)try{ft=Cd.inject(ZS),Ke=Cd}catch{}}return cu.createRoot=function(r,s){if(!a(r))throw Error(i(299));var o=!1,u="",h=Kv,p=Qv,E=Xv,x=null;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onUncaughtError!==void 0&&(h=s.onUncaughtError),s.onCaughtError!==void 0&&(p=s.onCaughtError),s.onRecoverableError!==void 0&&(E=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(x=s.unstable_transitionCallbacks)),s=w_(r,1,!1,null,null,o,u,h,p,E,x,null),r[jn]=s.current,Gm(r),new up(s)},cu.hydrateRoot=function(r,s,o){if(!a(r))throw Error(i(299));var u=!1,h="",p=Kv,E=Qv,x=Xv,D=null,G=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(h=o.identifierPrefix),o.onUncaughtError!==void 0&&(p=o.onUncaughtError),o.onCaughtError!==void 0&&(E=o.onCaughtError),o.onRecoverableError!==void 0&&(x=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(D=o.unstable_transitionCallbacks),o.formState!==void 0&&(G=o.formState)),s=w_(r,1,!0,s,o??null,u,h,p,E,x,D,G),s.context=T_(null),o=s.current,u=Nn(),u=Ri(u),h=ki(u),h.callback=null,Vi(o,h,u),o=u,s.current.lanes=o,Ur(s,o),Sr(s),r[jn]=s.current,Gm(r),new Rd(s)},cu.version="19.1.0",cu}var q_;function uA(){if(q_)return hp.exports;q_=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),hp.exports=lA(),hp.exports}var cA=uA(),du={},H_;function dA(){if(H_)return du;H_=1,Object.defineProperty(du,"__esModule",{value:!0}),du.parse=c,du.serialize=g;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,i=/^[\u0020-\u003A\u003D-\u007E]*$/,a=Object.prototype.toString,l=(()=>{const T=function(){};return T.prototype=Object.create(null),T})();function c(T,C){const A=new l,U=T.length;if(U<2)return A;const I=(C==null?void 0:C.decode)||v;let q=0;do{const X=T.indexOf("=",q);if(X===-1)break;const Y=T.indexOf(";",q),de=Y===-1?U:Y;if(X>de){q=T.lastIndexOf(";",X-1)+1;continue}const ue=f(T,q,X),ye=m(T,X,ue),M=T.slice(ue,ye);if(A[M]===void 0){let R=f(T,X+1,de),N=m(T,de,R);const j=I(T.slice(R,N));A[M]=j}q=de+1}while(q<U);return A}function f(T,C,A){do{const U=T.charCodeAt(C);if(U!==32&&U!==9)return C}while(++C<A);return A}function m(T,C,A){for(;C>A;){const U=T.charCodeAt(--C);if(U!==32&&U!==9)return C+1}return A}function g(T,C,A){const U=(A==null?void 0:A.encode)||encodeURIComponent;if(!n.test(T))throw new TypeError(`argument name is invalid: ${T}`);const I=U(C);if(!e.test(I))throw new TypeError(`argument val is invalid: ${C}`);let q=T+"="+I;if(!A)return q;if(A.maxAge!==void 0){if(!Number.isInteger(A.maxAge))throw new TypeError(`option maxAge is invalid: ${A.maxAge}`);q+="; Max-Age="+A.maxAge}if(A.domain){if(!t.test(A.domain))throw new TypeError(`option domain is invalid: ${A.domain}`);q+="; Domain="+A.domain}if(A.path){if(!i.test(A.path))throw new TypeError(`option path is invalid: ${A.path}`);q+="; Path="+A.path}if(A.expires){if(!w(A.expires)||!Number.isFinite(A.expires.valueOf()))throw new TypeError(`option expires is invalid: ${A.expires}`);q+="; Expires="+A.expires.toUTCString()}if(A.httpOnly&&(q+="; HttpOnly"),A.secure&&(q+="; Secure"),A.partitioned&&(q+="; Partitioned"),A.priority)switch(typeof A.priority=="string"?A.priority.toLowerCase():void 0){case"low":q+="; Priority=Low";break;case"medium":q+="; Priority=Medium";break;case"high":q+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${A.priority}`)}if(A.sameSite)switch(typeof A.sameSite=="string"?A.sameSite.toLowerCase():A.sameSite){case!0:case"strict":q+="; SameSite=Strict";break;case"lax":q+="; SameSite=Lax";break;case"none":q+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${A.sameSite}`)}return q}function v(T){if(T.indexOf("%")===-1)return T;try{return decodeURIComponent(T)}catch{return T}}function w(T){return a.call(T)==="[object Date]"}return du}dA();var F_="popstate";function hA(n={}){function e(a,l){let{pathname:c="/",search:f="",hash:m=""}=Ta(a.location.hash.substring(1));return!c.startsWith("/")&&!c.startsWith(".")&&(c="/"+c),Mp("",{pathname:c,search:f,hash:m},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function t(a,l){let c=a.document.querySelector("base"),f="";if(c&&c.getAttribute("href")){let m=a.location.href,g=m.indexOf("#");f=g===-1?m:m.slice(0,g)}return f+"#"+(typeof l=="string"?l:Cu(l))}function i(a,l){Qn(a.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(l)})`)}return mA(e,t,i,n)}function ut(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Qn(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function fA(){return Math.random().toString(36).substring(2,10)}function G_(n,e){return{usr:n.state,key:n.key,idx:e}}function Mp(n,e,t=null,i){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Ta(e):e,state:t,key:e&&e.key||i||fA()}}function Cu({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Ta(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substring(i),n=n.substring(0,i)),n&&(e.pathname=n)}return e}function mA(n,e,t,i={}){let{window:a=document.defaultView,v5Compat:l=!1}=i,c=a.history,f="POP",m=null,g=v();g==null&&(g=0,c.replaceState({...c.state,idx:g},""));function v(){return(c.state||{idx:null}).idx}function w(){f="POP";let I=v(),q=I==null?null:I-g;g=I,m&&m({action:f,location:U.location,delta:q})}function T(I,q){f="PUSH";let X=Mp(U.location,I,q);t&&t(X,I),g=v()+1;let Y=G_(X,g),de=U.createHref(X);try{c.pushState(Y,"",de)}catch(ue){if(ue instanceof DOMException&&ue.name==="DataCloneError")throw ue;a.location.assign(de)}l&&m&&m({action:f,location:U.location,delta:1})}function C(I,q){f="REPLACE";let X=Mp(U.location,I,q);t&&t(X,I),g=v();let Y=G_(X,g),de=U.createHref(X);c.replaceState(Y,"",de),l&&m&&m({action:f,location:U.location,delta:0})}function A(I){return pA(I)}let U={get action(){return f},get location(){return n(a,c)},listen(I){if(m)throw new Error("A history only accepts one active listener");return a.addEventListener(F_,w),m=I,()=>{a.removeEventListener(F_,w),m=null}},createHref(I){return e(a,I)},createURL:A,encodeLocation(I){let q=A(I);return{pathname:q.pathname,search:q.search,hash:q.hash}},push:T,replace:C,go(I){return c.go(I)}};return U}function pA(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),ut(t,"No window.location.(origin|href) available to create URL");let i=typeof n=="string"?n:Cu(n);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=t+i),new URL(i,t)}function ZE(n,e,t="/"){return gA(n,e,t,!1)}function gA(n,e,t,i){let a=typeof e=="string"?Ta(e):e,l=pi(a.pathname||"/",t);if(l==null)return null;let c=JE(n);yA(c);let f=null;for(let m=0;f==null&&m<c.length;++m){let g=CA(l);f=AA(c[m],g,i)}return f}function JE(n,e=[],t=[],i=""){let a=(l,c,f)=>{let m={relativePath:f===void 0?l.path||"":f,caseSensitive:l.caseSensitive===!0,childrenIndex:c,route:l};m.relativePath.startsWith("/")&&(ut(m.relativePath.startsWith(i),`Absolute route path "${m.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),m.relativePath=m.relativePath.slice(i.length));let g=di([i,m.relativePath]),v=t.concat(m);l.children&&l.children.length>0&&(ut(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),JE(l.children,e,v,g)),!(l.path==null&&!l.index)&&e.push({path:g,score:xA(g,l.index),routesMeta:v})};return n.forEach((l,c)=>{var f;if(l.path===""||!((f=l.path)!=null&&f.includes("?")))a(l,c);else for(let m of e1(l.path))a(l,c,m)}),e}function e1(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,a=t.endsWith("?"),l=t.replace(/\?$/,"");if(i.length===0)return a?[l,""]:[l];let c=e1(i.join("/")),f=[];return f.push(...c.map(m=>m===""?l:[l,m].join("/"))),a&&f.push(...c),f.map(m=>n.startsWith("/")&&m===""?"/":m)}function yA(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:SA(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var vA=/^:[\w-]+$/,_A=3,bA=2,EA=1,wA=10,TA=-2,$_=n=>n==="*";function xA(n,e){let t=n.split("/"),i=t.length;return t.some($_)&&(i+=TA),e&&(i+=bA),t.filter(a=>!$_(a)).reduce((a,l)=>a+(vA.test(l)?_A:l===""?EA:wA),i)}function SA(n,e){return n.length===e.length&&n.slice(0,-1).every((i,a)=>i===e[a])?n[n.length-1]-e[e.length-1]:0}function AA(n,e,t=!1){let{routesMeta:i}=n,a={},l="/",c=[];for(let f=0;f<i.length;++f){let m=i[f],g=f===i.length-1,v=l==="/"?e:e.slice(l.length)||"/",w=eh({path:m.relativePath,caseSensitive:m.caseSensitive,end:g},v),T=m.route;if(!w&&g&&t&&!i[i.length-1].route.index&&(w=eh({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},v)),!w)return null;Object.assign(a,w.params),c.push({params:a,pathname:di([l,w.pathname]),pathnameBase:OA(di([l,w.pathnameBase])),route:T}),w.pathnameBase!=="/"&&(l=di([l,w.pathnameBase]))}return c}function eh(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=RA(n.path,n.caseSensitive,n.end),a=e.match(t);if(!a)return null;let l=a[0],c=l.replace(/(.)\/+$/,"$1"),f=a.slice(1);return{params:i.reduce((g,{paramName:v,isOptional:w},T)=>{if(v==="*"){let A=f[T]||"";c=l.slice(0,l.length-A.length).replace(/(.)\/+$/,"$1")}const C=f[T];return w&&!C?g[v]=void 0:g[v]=(C||"").replace(/%2F/g,"/"),g},{}),pathname:l,pathnameBase:c,pattern:n}}function RA(n,e=!1,t=!0){Qn(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let i=[],a="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,f,m)=>(i.push({paramName:f,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(i.push({paramName:"*"}),a+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?a+="\\/*$":n!==""&&n!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),i]}function CA(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Qn(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function pi(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}function NA(n,e="/"){let{pathname:t,search:i="",hash:a=""}=typeof n=="string"?Ta(n):n;return{pathname:t?t.startsWith("/")?t:IA(t,e):e,search:PA(i),hash:MA(a)}}function IA(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(a=>{a===".."?t.length>1&&t.pop():a!=="."&&t.push(a)}),t.length>1?t.join("/"):"/"}function gp(n,e,t,i){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function DA(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function pg(n){let e=DA(n);return e.map((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)}function gg(n,e,t,i=!1){let a;typeof n=="string"?a=Ta(n):(a={...n},ut(!a.pathname||!a.pathname.includes("?"),gp("?","pathname","search",a)),ut(!a.pathname||!a.pathname.includes("#"),gp("#","pathname","hash",a)),ut(!a.search||!a.search.includes("#"),gp("#","search","hash",a)));let l=n===""||a.pathname==="",c=l?"/":a.pathname,f;if(c==null)f=t;else{let w=e.length-1;if(!i&&c.startsWith("..")){let T=c.split("/");for(;T[0]==="..";)T.shift(),w-=1;a.pathname=T.join("/")}f=w>=0?e[w]:"/"}let m=NA(a,f),g=c&&c!=="/"&&c.endsWith("/"),v=(l||c===".")&&t.endsWith("/");return!m.pathname.endsWith("/")&&(g||v)&&(m.pathname+="/"),m}var di=n=>n.join("/").replace(/\/\/+/g,"/"),OA=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),PA=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,MA=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function jA(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var t1=["POST","PUT","PATCH","DELETE"];new Set(t1);var kA=["GET",...t1];new Set(kA);var Ho=V.createContext(null);Ho.displayName="DataRouter";var Ah=V.createContext(null);Ah.displayName="DataRouterState";var n1=V.createContext({isTransitioning:!1});n1.displayName="ViewTransition";var VA=V.createContext(new Map);VA.displayName="Fetchers";var LA=V.createContext(null);LA.displayName="Await";var or=V.createContext(null);or.displayName="Navigation";var Bu=V.createContext(null);Bu.displayName="Location";var Xn=V.createContext({outlet:null,matches:[],isDataRoute:!1});Xn.displayName="Route";var yg=V.createContext(null);yg.displayName="RouteError";function UA(n,{relative:e}={}){ut(Fo(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=V.useContext(or),{hash:a,pathname:l,search:c}=qu(n,{relative:e}),f=l;return t!=="/"&&(f=l==="/"?t:di([t,l])),i.createHref({pathname:f,search:c,hash:a})}function Fo(){return V.useContext(Bu)!=null}function bs(){return ut(Fo(),"useLocation() may be used only in the context of a <Router> component."),V.useContext(Bu).location}var r1="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function i1(n){V.useContext(or).static||V.useLayoutEffect(n)}function mn(){let{isDataRoute:n}=V.useContext(Xn);return n?eR():zA()}function zA(){ut(Fo(),"useNavigate() may be used only in the context of a <Router> component.");let n=V.useContext(Ho),{basename:e,navigator:t}=V.useContext(or),{matches:i}=V.useContext(Xn),{pathname:a}=bs(),l=JSON.stringify(pg(i)),c=V.useRef(!1);return i1(()=>{c.current=!0}),V.useCallback((m,g={})=>{if(Qn(c.current,r1),!c.current)return;if(typeof m=="number"){t.go(m);return}let v=gg(m,JSON.parse(l),a,g.relative==="path");n==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:di([e,v.pathname])),(g.replace?t.replace:t.push)(v,g.state,g)},[e,t,l,a,n])}var BA=V.createContext(null);function qA(n){let e=V.useContext(Xn).outlet;return e&&V.createElement(BA.Provider,{value:n},e)}function vg(){let{matches:n}=V.useContext(Xn),e=n[n.length-1];return e?e.params:{}}function qu(n,{relative:e}={}){let{matches:t}=V.useContext(Xn),{pathname:i}=bs(),a=JSON.stringify(pg(t));return V.useMemo(()=>gg(n,JSON.parse(a),i,e==="path"),[n,a,i,e])}function HA(n,e){return s1(n,e)}function s1(n,e,t,i){var X;ut(Fo(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a,static:l}=V.useContext(or),{matches:c}=V.useContext(Xn),f=c[c.length-1],m=f?f.params:{},g=f?f.pathname:"/",v=f?f.pathnameBase:"/",w=f&&f.route;{let Y=w&&w.path||"";a1(g,!w||Y.endsWith("*")||Y.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${Y}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${Y}"> to <Route path="${Y==="/"?"*":`${Y}/*`}">.`)}let T=bs(),C;if(e){let Y=typeof e=="string"?Ta(e):e;ut(v==="/"||((X=Y.pathname)==null?void 0:X.startsWith(v)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${v}" but pathname "${Y.pathname}" was given in the \`location\` prop.`),C=Y}else C=T;let A=C.pathname||"/",U=A;if(v!=="/"){let Y=v.replace(/^\//,"").split("/");U="/"+A.replace(/^\//,"").split("/").slice(Y.length).join("/")}let I=!l&&t&&t.matches&&t.matches.length>0?t.matches:ZE(n,{pathname:U});Qn(w||I!=null,`No routes matched location "${C.pathname}${C.search}${C.hash}" `),Qn(I==null||I[I.length-1].route.element!==void 0||I[I.length-1].route.Component!==void 0||I[I.length-1].route.lazy!==void 0,`Matched leaf route at location "${C.pathname}${C.search}${C.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let q=KA(I&&I.map(Y=>Object.assign({},Y,{params:Object.assign({},m,Y.params),pathname:di([v,a.encodeLocation?a.encodeLocation(Y.pathname).pathname:Y.pathname]),pathnameBase:Y.pathnameBase==="/"?v:di([v,a.encodeLocation?a.encodeLocation(Y.pathnameBase).pathname:Y.pathnameBase])})),c,t,i);return e&&q?V.createElement(Bu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...C},navigationType:"POP"}},q):q}function FA(){let n=JA(),e=jA(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i},l={padding:"2px 4px",backgroundColor:i},c=null;return console.error("Error handled by React Router default ErrorBoundary:",n),c=V.createElement(V.Fragment,null,V.createElement("p",null,"💿 Hey developer 👋"),V.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",V.createElement("code",{style:l},"ErrorBoundary")," or"," ",V.createElement("code",{style:l},"errorElement")," prop on your route.")),V.createElement(V.Fragment,null,V.createElement("h2",null,"Unexpected Application Error!"),V.createElement("h3",{style:{fontStyle:"italic"}},e),t?V.createElement("pre",{style:a},t):null,c)}var GA=V.createElement(FA,null),$A=class extends V.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?V.createElement(Xn.Provider,{value:this.props.routeContext},V.createElement(yg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function YA({routeContext:n,match:e,children:t}){let i=V.useContext(Ho);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),V.createElement(Xn.Provider,{value:n},t)}function KA(n,e=[],t=null,i=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let a=n,l=t==null?void 0:t.errors;if(l!=null){let m=a.findIndex(g=>g.route.id&&(l==null?void 0:l[g.route.id])!==void 0);ut(m>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),a=a.slice(0,Math.min(a.length,m+1))}let c=!1,f=-1;if(t)for(let m=0;m<a.length;m++){let g=a[m];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(f=m),g.route.id){let{loaderData:v,errors:w}=t,T=g.route.loader&&!v.hasOwnProperty(g.route.id)&&(!w||w[g.route.id]===void 0);if(g.route.lazy||T){c=!0,f>=0?a=a.slice(0,f+1):a=[a[0]];break}}}return a.reduceRight((m,g,v)=>{let w,T=!1,C=null,A=null;t&&(w=l&&g.route.id?l[g.route.id]:void 0,C=g.route.errorElement||GA,c&&(f<0&&v===0?(a1("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),T=!0,A=null):f===v&&(T=!0,A=g.route.hydrateFallbackElement||null)));let U=e.concat(a.slice(0,v+1)),I=()=>{let q;return w?q=C:T?q=A:g.route.Component?q=V.createElement(g.route.Component,null):g.route.element?q=g.route.element:q=m,V.createElement(YA,{match:g,routeContext:{outlet:m,matches:U,isDataRoute:t!=null},children:q})};return t&&(g.route.ErrorBoundary||g.route.errorElement||v===0)?V.createElement($A,{location:t.location,revalidation:t.revalidation,component:C,error:w,children:I(),routeContext:{outlet:null,matches:U,isDataRoute:!0}}):I()},null)}function _g(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function QA(n){let e=V.useContext(Ho);return ut(e,_g(n)),e}function XA(n){let e=V.useContext(Ah);return ut(e,_g(n)),e}function WA(n){let e=V.useContext(Xn);return ut(e,_g(n)),e}function bg(n){let e=WA(n),t=e.matches[e.matches.length-1];return ut(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function ZA(){return bg("useRouteId")}function JA(){var i;let n=V.useContext(yg),e=XA("useRouteError"),t=bg("useRouteError");return n!==void 0?n:(i=e.errors)==null?void 0:i[t]}function eR(){let{router:n}=QA("useNavigate"),e=bg("useNavigate"),t=V.useRef(!1);return i1(()=>{t.current=!0}),V.useCallback(async(a,l={})=>{Qn(t.current,r1),t.current&&(typeof a=="number"?n.navigate(a):await n.navigate(a,{fromRouteId:e,...l}))},[n,e])}var Y_={};function a1(n,e,t){!e&&!Y_[n]&&(Y_[n]=!0,Qn(!1,t))}V.memo(tR);function tR({routes:n,future:e,state:t}){return s1(n,void 0,t,e)}function o1({to:n,replace:e,state:t,relative:i}){ut(Fo(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=V.useContext(or);Qn(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=V.useContext(Xn),{pathname:c}=bs(),f=mn(),m=gg(n,pg(l),c,i==="path"),g=JSON.stringify(m);return V.useEffect(()=>{f(JSON.parse(g),{replace:e,state:t,relative:i})},[f,g,i,e,t]),null}function nR(n){return qA(n.context)}function hn(n){ut(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function rR({basename:n="/",children:e=null,location:t,navigationType:i="POP",navigator:a,static:l=!1}){ut(!Fo(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=n.replace(/^\/*/,"/"),f=V.useMemo(()=>({basename:c,navigator:a,static:l,future:{}}),[c,a,l]);typeof t=="string"&&(t=Ta(t));let{pathname:m="/",search:g="",hash:v="",state:w=null,key:T="default"}=t,C=V.useMemo(()=>{let A=pi(m,c);return A==null?null:{location:{pathname:A,search:g,hash:v,state:w,key:T},navigationType:i}},[c,m,g,v,w,T,i]);return Qn(C!=null,`<Router basename="${c}"> is not able to match the URL "${m}${g}${v}" because it does not start with the basename, so the <Router> won't render anything.`),C==null?null:V.createElement(or.Provider,{value:f},V.createElement(Bu.Provider,{children:e,value:C}))}function iR({children:n,location:e}){return HA(jp(n),e)}function jp(n,e=[]){let t=[];return V.Children.forEach(n,(i,a)=>{if(!V.isValidElement(i))return;let l=[...e,a];if(i.type===V.Fragment){t.push.apply(t,jp(i.props.children,l));return}ut(i.type===hn,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ut(!i.props.index||!i.props.children,"An index route cannot have child routes.");let c={id:i.props.id||l.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(c.children=jp(i.props.children,l)),t.push(c)}),t}var Vd="get",Ld="application/x-www-form-urlencoded";function Rh(n){return n!=null&&typeof n.tagName=="string"}function sR(n){return Rh(n)&&n.tagName.toLowerCase()==="button"}function aR(n){return Rh(n)&&n.tagName.toLowerCase()==="form"}function oR(n){return Rh(n)&&n.tagName.toLowerCase()==="input"}function lR(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function uR(n,e){return n.button===0&&(!e||e==="_self")&&!lR(n)}var Nd=null;function cR(){if(Nd===null)try{new FormData(document.createElement("form"),0),Nd=!1}catch{Nd=!0}return Nd}var dR=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function yp(n){return n!=null&&!dR.has(n)?(Qn(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Ld}"`),null):n}function hR(n,e){let t,i,a,l,c;if(aR(n)){let f=n.getAttribute("action");i=f?pi(f,e):null,t=n.getAttribute("method")||Vd,a=yp(n.getAttribute("enctype"))||Ld,l=new FormData(n)}else if(sR(n)||oR(n)&&(n.type==="submit"||n.type==="image")){let f=n.form;if(f==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=n.getAttribute("formaction")||f.getAttribute("action");if(i=m?pi(m,e):null,t=n.getAttribute("formmethod")||f.getAttribute("method")||Vd,a=yp(n.getAttribute("formenctype"))||yp(f.getAttribute("enctype"))||Ld,l=new FormData(f,n),!cR()){let{name:g,type:v,value:w}=n;if(v==="image"){let T=g?`${g}.`:"";l.append(`${T}x`,"0"),l.append(`${T}y`,"0")}else g&&l.append(g,w)}}else{if(Rh(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Vd,i=null,a=Ld,c=n}return l&&a==="text/plain"&&(c=l,l=void 0),{action:i,method:t.toLowerCase(),encType:a,formData:l,body:c}}function Eg(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function fR(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function mR(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function pR(n,e,t){let i=await Promise.all(n.map(async a=>{let l=e.routes[a.route.id];if(l){let c=await fR(l,t);return c.links?c.links():[]}return[]}));return _R(i.flat(1).filter(mR).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function K_(n,e,t,i,a,l){let c=(m,g)=>t[g]?m.route.id!==t[g].route.id:!0,f=(m,g)=>{var v;return t[g].pathname!==m.pathname||((v=t[g].route.path)==null?void 0:v.endsWith("*"))&&t[g].params["*"]!==m.params["*"]};return l==="assets"?e.filter((m,g)=>c(m,g)||f(m,g)):l==="data"?e.filter((m,g)=>{var w;let v=i.routes[m.route.id];if(!v||!v.hasLoader)return!1;if(c(m,g)||f(m,g))return!0;if(m.route.shouldRevalidate){let T=m.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((w=t[0])==null?void 0:w.params)||{},nextUrl:new URL(n,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof T=="boolean")return T}return!0}):[]}function gR(n,e,{includeHydrateFallback:t}={}){return yR(n.map(i=>{let a=e.routes[i.route.id];if(!a)return[];let l=[a.module];return a.clientActionModule&&(l=l.concat(a.clientActionModule)),a.clientLoaderModule&&(l=l.concat(a.clientLoaderModule)),t&&a.hydrateFallbackModule&&(l=l.concat(a.hydrateFallbackModule)),a.imports&&(l=l.concat(a.imports)),l}).flat(1))}function yR(n){return[...new Set(n)]}function vR(n){let e={},t=Object.keys(n).sort();for(let i of t)e[i]=n[i];return e}function _R(n,e){let t=new Set;return new Set(e),n.reduce((i,a)=>{let l=JSON.stringify(vR(a));return t.has(l)||(t.add(l),i.push({key:l,link:a})),i},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var bR=new Set([100,101,204,205]);function ER(n,e){let t=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t.pathname==="/"?t.pathname="_root.data":e&&pi(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function l1(){let n=V.useContext(Ho);return Eg(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function wR(){let n=V.useContext(Ah);return Eg(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var wg=V.createContext(void 0);wg.displayName="FrameworkContext";function u1(){let n=V.useContext(wg);return Eg(n,"You must render this element inside a <HydratedRouter> element"),n}function TR(n,e){let t=V.useContext(wg),[i,a]=V.useState(!1),[l,c]=V.useState(!1),{onFocus:f,onBlur:m,onMouseEnter:g,onMouseLeave:v,onTouchStart:w}=e,T=V.useRef(null);V.useEffect(()=>{if(n==="render"&&c(!0),n==="viewport"){let U=q=>{q.forEach(X=>{c(X.isIntersecting)})},I=new IntersectionObserver(U,{threshold:.5});return T.current&&I.observe(T.current),()=>{I.disconnect()}}},[n]),V.useEffect(()=>{if(i){let U=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(U)}}},[i]);let C=()=>{a(!0)},A=()=>{a(!1),c(!1)};return t?n!=="intent"?[l,T,{}]:[l,T,{onFocus:hu(f,C),onBlur:hu(m,A),onMouseEnter:hu(g,C),onMouseLeave:hu(v,A),onTouchStart:hu(w,C)}]:[!1,T,{}]}function hu(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function xR({page:n,...e}){let{router:t}=l1(),i=V.useMemo(()=>ZE(t.routes,n,t.basename),[t.routes,n,t.basename]);return i?V.createElement(AR,{page:n,matches:i,...e}):null}function SR(n){let{manifest:e,routeModules:t}=u1(),[i,a]=V.useState([]);return V.useEffect(()=>{let l=!1;return pR(n,e,t).then(c=>{l||a(c)}),()=>{l=!0}},[n,e,t]),i}function AR({page:n,matches:e,...t}){let i=bs(),{manifest:a,routeModules:l}=u1(),{basename:c}=l1(),{loaderData:f,matches:m}=wR(),g=V.useMemo(()=>K_(n,e,m,a,i,"data"),[n,e,m,a,i]),v=V.useMemo(()=>K_(n,e,m,a,i,"assets"),[n,e,m,a,i]),w=V.useMemo(()=>{if(n===i.pathname+i.search+i.hash)return[];let A=new Set,U=!1;if(e.forEach(q=>{var Y;let X=a.routes[q.route.id];!X||!X.hasLoader||(!g.some(de=>de.route.id===q.route.id)&&q.route.id in f&&((Y=l[q.route.id])!=null&&Y.shouldRevalidate)||X.hasClientLoader?U=!0:A.add(q.route.id))}),A.size===0)return[];let I=ER(n,c);return U&&A.size>0&&I.searchParams.set("_routes",e.filter(q=>A.has(q.route.id)).map(q=>q.route.id).join(",")),[I.pathname+I.search]},[c,f,i,a,g,e,n,l]),T=V.useMemo(()=>gR(v,a),[v,a]),C=SR(v);return V.createElement(V.Fragment,null,w.map(A=>V.createElement("link",{key:A,rel:"prefetch",as:"fetch",href:A,...t})),T.map(A=>V.createElement("link",{key:A,rel:"modulepreload",href:A,...t})),C.map(({key:A,link:U})=>V.createElement("link",{key:A,...U})))}function RR(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var c1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{c1&&(window.__reactRouterVersion="7.6.0")}catch{}function CR({basename:n,children:e,window:t}){let i=V.useRef();i.current==null&&(i.current=hA({window:t,v5Compat:!0}));let a=i.current,[l,c]=V.useState({action:a.action,location:a.location}),f=V.useCallback(m=>{V.startTransition(()=>c(m))},[c]);return V.useLayoutEffect(()=>a.listen(f),[a,f]),V.createElement(rR,{basename:n,children:e,location:l.location,navigationType:l.action,navigator:a})}var d1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ch=V.forwardRef(function({onClick:e,discover:t="render",prefetch:i="none",relative:a,reloadDocument:l,replace:c,state:f,target:m,to:g,preventScrollReset:v,viewTransition:w,...T},C){let{basename:A}=V.useContext(or),U=typeof g=="string"&&d1.test(g),I,q=!1;if(typeof g=="string"&&U&&(I=g,c1))try{let N=new URL(window.location.href),j=g.startsWith("//")?new URL(N.protocol+g):new URL(g),L=pi(j.pathname,A);j.origin===N.origin&&L!=null?g=L+j.search+j.hash:q=!0}catch{Qn(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let X=UA(g,{relative:a}),[Y,de,ue]=TR(i,T),ye=DR(g,{replace:c,state:f,target:m,preventScrollReset:v,relative:a,viewTransition:w});function M(N){e&&e(N),N.defaultPrevented||ye(N)}let R=V.createElement("a",{...T,...ue,href:I||X,onClick:q||l?e:M,ref:RR(C,de),target:m,"data-discover":!U&&t==="render"?"true":void 0});return Y&&!U?V.createElement(V.Fragment,null,R,V.createElement(xR,{page:X})):R});Ch.displayName="Link";var la=V.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:i="",end:a=!1,style:l,to:c,viewTransition:f,children:m,...g},v){let w=qu(c,{relative:g.relative}),T=bs(),C=V.useContext(Ah),{navigator:A,basename:U}=V.useContext(or),I=C!=null&&kR(w)&&f===!0,q=A.encodeLocation?A.encodeLocation(w).pathname:w.pathname,X=T.pathname,Y=C&&C.navigation&&C.navigation.location?C.navigation.location.pathname:null;t||(X=X.toLowerCase(),Y=Y?Y.toLowerCase():null,q=q.toLowerCase()),Y&&U&&(Y=pi(Y,U)||Y);const de=q!=="/"&&q.endsWith("/")?q.length-1:q.length;let ue=X===q||!a&&X.startsWith(q)&&X.charAt(de)==="/",ye=Y!=null&&(Y===q||!a&&Y.startsWith(q)&&Y.charAt(q.length)==="/"),M={isActive:ue,isPending:ye,isTransitioning:I},R=ue?e:void 0,N;typeof i=="function"?N=i(M):N=[i,ue?"active":null,ye?"pending":null,I?"transitioning":null].filter(Boolean).join(" ");let j=typeof l=="function"?l(M):l;return V.createElement(Ch,{...g,"aria-current":R,className:N,ref:v,style:j,to:c,viewTransition:f},typeof m=="function"?m(M):m)});la.displayName="NavLink";var NR=V.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:i,replace:a,state:l,method:c=Vd,action:f,onSubmit:m,relative:g,preventScrollReset:v,viewTransition:w,...T},C)=>{let A=MR(),U=jR(f,{relative:g}),I=c.toLowerCase()==="get"?"get":"post",q=typeof f=="string"&&d1.test(f),X=Y=>{if(m&&m(Y),Y.defaultPrevented)return;Y.preventDefault();let de=Y.nativeEvent.submitter,ue=(de==null?void 0:de.getAttribute("formmethod"))||c;A(de||Y.currentTarget,{fetcherKey:e,method:ue,navigate:t,replace:a,state:l,relative:g,preventScrollReset:v,viewTransition:w})};return V.createElement("form",{ref:C,method:I,action:U,onSubmit:i?m:X,...T,"data-discover":!q&&n==="render"?"true":void 0})});NR.displayName="Form";function IR(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function h1(n){let e=V.useContext(Ho);return ut(e,IR(n)),e}function DR(n,{target:e,replace:t,state:i,preventScrollReset:a,relative:l,viewTransition:c}={}){let f=mn(),m=bs(),g=qu(n,{relative:l});return V.useCallback(v=>{if(uR(v,e)){v.preventDefault();let w=t!==void 0?t:Cu(m)===Cu(g);f(n,{replace:w,state:i,preventScrollReset:a,relative:l,viewTransition:c})}},[m,f,g,t,i,e,n,a,l,c])}var OR=0,PR=()=>`__${String(++OR)}__`;function MR(){let{router:n}=h1("useSubmit"),{basename:e}=V.useContext(or),t=ZA();return V.useCallback(async(i,a={})=>{let{action:l,method:c,encType:f,formData:m,body:g}=hR(i,e);if(a.navigate===!1){let v=a.fetcherKey||PR();await n.fetch(v,t,a.action||l,{preventScrollReset:a.preventScrollReset,formData:m,body:g,formMethod:a.method||c,formEncType:a.encType||f,flushSync:a.flushSync})}else await n.navigate(a.action||l,{preventScrollReset:a.preventScrollReset,formData:m,body:g,formMethod:a.method||c,formEncType:a.encType||f,replace:a.replace,state:a.state,fromRouteId:t,flushSync:a.flushSync,viewTransition:a.viewTransition})},[n,e,t])}function jR(n,{relative:e}={}){let{basename:t}=V.useContext(or),i=V.useContext(Xn);ut(i,"useFormAction must be used inside a RouteContext");let[a]=i.matches.slice(-1),l={...qu(n||".",{relative:e})},c=bs();if(n==null){l.search=c.search;let f=new URLSearchParams(l.search),m=f.getAll("index");if(m.some(v=>v==="")){f.delete("index"),m.filter(w=>w).forEach(w=>f.append("index",w));let v=f.toString();l.search=v?`?${v}`:""}}return(!n||n===".")&&a.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:di([t,l.pathname])),Cu(l)}function kR(n,e={}){let t=V.useContext(n1);ut(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=h1("useViewTransitionState"),a=qu(n,{relative:e.relative});if(!t.isTransitioning)return!1;let l=pi(t.currentLocation.pathname,i)||t.currentLocation.pathname,c=pi(t.nextLocation.pathname,i)||t.nextLocation.pathname;return eh(a.pathname,c)!=null||eh(a.pathname,l)!=null}[...bR];const VR=()=>{};var Q_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f1=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let a=n.charCodeAt(i);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(a=65536+((a&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},LR=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const a=n[t++];if(a<128)e[i++]=String.fromCharCode(a);else if(a>191&&a<224){const l=n[t++];e[i++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=n[t++],c=n[t++],f=n[t++],m=((a&7)<<18|(l&63)<<12|(c&63)<<6|f&63)-65536;e[i++]=String.fromCharCode(55296+(m>>10)),e[i++]=String.fromCharCode(56320+(m&1023))}else{const l=n[t++],c=n[t++];e[i++]=String.fromCharCode((a&15)<<12|(l&63)<<6|c&63)}}return e.join("")},m1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let a=0;a<n.length;a+=3){const l=n[a],c=a+1<n.length,f=c?n[a+1]:0,m=a+2<n.length,g=m?n[a+2]:0,v=l>>2,w=(l&3)<<4|f>>4;let T=(f&15)<<2|g>>6,C=g&63;m||(C=64,c||(T=64)),i.push(t[v],t[w],t[T],t[C])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(f1(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):LR(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let a=0;a<n.length;){const l=t[n.charAt(a++)],f=a<n.length?t[n.charAt(a)]:0;++a;const g=a<n.length?t[n.charAt(a)]:64;++a;const w=a<n.length?t[n.charAt(a)]:64;if(++a,l==null||f==null||g==null||w==null)throw new UR;const T=l<<2|f>>4;if(i.push(T),g!==64){const C=f<<4&240|g>>2;if(i.push(C),w!==64){const A=g<<6&192|w;i.push(A)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class UR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const zR=function(n){const e=f1(n);return m1.encodeByteArray(e,!0)},th=function(n){return zR(n).replace(/\./g,"")},p1=function(n){try{return m1.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qR=()=>BR().__FIREBASE_DEFAULTS__,HR=()=>{if(typeof process>"u"||typeof Q_>"u")return;const n=Q_.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},FR=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&p1(n[1]);return e&&JSON.parse(e)},Nh=()=>{try{return VR()||qR()||HR()||FR()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},g1=n=>{var e,t;return(t=(e=Nh())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},GR=n=>{const e=g1(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},y1=()=>{var n;return(n=Nh())===null||n===void 0?void 0:n.config},v1=n=>{var e;return(e=Nh())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $R{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hu(n){return n.endsWith(".cloudworkstations.dev")}async function _1(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YR(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",a=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},n);return[th(JSON.stringify(t)),th(JSON.stringify(c)),""].join(".")}const Eu={};function KR(){const n={prod:[],emulator:[]};for(const e of Object.keys(Eu))Eu[e]?n.emulator.push(e):n.prod.push(e);return n}function QR(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let X_=!1;function Ih(n,e){if(typeof window>"u"||typeof document>"u"||!Hu(window.location.host)||Eu[n]===e||Eu[n]||X_)return;Eu[n]=e;function t(T){return`__firebase__banner__${T}`}const i="__firebase__banner",l=KR().prod.length>0;function c(){const T=document.getElementById(i);T&&T.remove()}function f(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function m(T,C){T.setAttribute("width","24"),T.setAttribute("id",C),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function g(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{X_=!0,c()},T}function v(T,C){T.setAttribute("id",C),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function w(){const T=QR(i),C=t("text"),A=document.getElementById(C)||document.createElement("span"),U=t("learnmore"),I=document.getElementById(U)||document.createElement("a"),q=t("preprendIcon"),X=document.getElementById(q)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const Y=T.element;f(Y),v(I,U);const de=g();m(X,q),Y.append(X,A,I,de),document.body.appendChild(Y)}l?(A.innerText="Preview backend disconnected.",X.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(X.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,A.innerText="Preview backend running in this workspace."),A.setAttribute("id",C)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",w):w()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function on(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function XR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(on())}function WR(){var n;const e=(n=Nh())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function ZR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function JR(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function eC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function tC(){const n=on();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function nC(){return!WR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function rC(){try{return typeof indexedDB=="object"}catch{return!1}}function iC(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(i);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{var l;e(((l=a.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sC="FirebaseError";class Ti extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=sC,Object.setPrototypeOf(this,Ti.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Fu.prototype.create)}}class Fu{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],c=l?aC(l,i):"Error",f=`${this.serviceName}: ${c} (${a}).`;return new Ti(a,f,i)}}function aC(n,e){return n.replace(oC,(t,i)=>{const a=e[i];return a!=null?String(a):`<${i}?>`})}const oC=/\{\$([^}]+)}/g;function lC(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function ga(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const a of t){if(!i.includes(a))return!1;const l=n[a],c=e[a];if(W_(l)&&W_(c)){if(!ga(l,c))return!1}else if(l!==c)return!1}for(const a of i)if(!t.includes(a))return!1;return!0}function W_(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gu(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function pu(n){const e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[a,l]=i.split("=");e[decodeURIComponent(a)]=decodeURIComponent(l)}}),e}function gu(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function uC(n,e){const t=new cC(n,e);return t.subscribe.bind(t)}class cC{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let a;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");dC(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:i},a.next===void 0&&(a.next=vp),a.error===void 0&&(a.error=vp),a.complete===void 0&&(a.complete=vp);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function dC(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function vp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jt(n){return n&&n._delegate?n._delegate:n}class ya{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ua="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new $R;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&i.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(l){if(a)return null;throw l}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(mC(e))try{this.getOrInitializeService({instanceIdentifier:ua})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});i.resolve(l)}catch{}}}}clearInstance(e=ua){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ua){return this.instances.has(e)}getOptions(e=ua){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,c]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);i===f&&c.resolve(a)}return a}onInit(e,t){var i;const a=this.normalizeInstanceIdentifier(t),l=(i=this.onInitCallbacks.get(a))!==null&&i!==void 0?i:new Set;l.add(e),this.onInitCallbacks.set(a,l);const c=this.instances.get(a);return c&&e(c,a),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const a of i)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:fC(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=ua){return this.component?this.component.multipleInstances?e:ua:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function fC(n){return n===ua?void 0:n}function mC(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new hC(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ve;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ve||(Ve={}));const gC={debug:Ve.DEBUG,verbose:Ve.VERBOSE,info:Ve.INFO,warn:Ve.WARN,error:Ve.ERROR,silent:Ve.SILENT},yC=Ve.INFO,vC={[Ve.DEBUG]:"log",[Ve.VERBOSE]:"log",[Ve.INFO]:"info",[Ve.WARN]:"warn",[Ve.ERROR]:"error"},_C=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),a=vC[e];if(a)console[a](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Tg{constructor(e){this.name=e,this._logLevel=yC,this._logHandler=_C,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ve))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?gC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ve.DEBUG,...e),this._logHandler(this,Ve.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ve.VERBOSE,...e),this._logHandler(this,Ve.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ve.INFO,...e),this._logHandler(this,Ve.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ve.WARN,...e),this._logHandler(this,Ve.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ve.ERROR,...e),this._logHandler(this,Ve.ERROR,...e)}}const bC=(n,e)=>e.some(t=>n instanceof t);let Z_,J_;function EC(){return Z_||(Z_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function wC(){return J_||(J_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const b1=new WeakMap,kp=new WeakMap,E1=new WeakMap,_p=new WeakMap,xg=new WeakMap;function TC(n){const e=new Promise((t,i)=>{const a=()=>{n.removeEventListener("success",l),n.removeEventListener("error",c)},l=()=>{t(ls(n.result)),a()},c=()=>{i(n.error),a()};n.addEventListener("success",l),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&b1.set(t,n)}).catch(()=>{}),xg.set(e,n),e}function xC(n){if(kp.has(n))return;const e=new Promise((t,i)=>{const a=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",c),n.removeEventListener("abort",c)},l=()=>{t(),a()},c=()=>{i(n.error||new DOMException("AbortError","AbortError")),a()};n.addEventListener("complete",l),n.addEventListener("error",c),n.addEventListener("abort",c)});kp.set(n,e)}let Vp={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return kp.get(n);if(e==="objectStoreNames")return n.objectStoreNames||E1.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ls(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function SC(n){Vp=n(Vp)}function AC(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(bp(this),e,...t);return E1.set(i,e.sort?e.sort():[e]),ls(i)}:wC().includes(n)?function(...e){return n.apply(bp(this),e),ls(b1.get(this))}:function(...e){return ls(n.apply(bp(this),e))}}function RC(n){return typeof n=="function"?AC(n):(n instanceof IDBTransaction&&xC(n),bC(n,EC())?new Proxy(n,Vp):n)}function ls(n){if(n instanceof IDBRequest)return TC(n);if(_p.has(n))return _p.get(n);const e=RC(n);return e!==n&&(_p.set(n,e),xg.set(e,n)),e}const bp=n=>xg.get(n);function CC(n,e,{blocked:t,upgrade:i,blocking:a,terminated:l}={}){const c=indexedDB.open(n,e),f=ls(c);return i&&c.addEventListener("upgradeneeded",m=>{i(ls(c.result),m.oldVersion,m.newVersion,ls(c.transaction),m)}),t&&c.addEventListener("blocked",m=>t(m.oldVersion,m.newVersion,m)),f.then(m=>{l&&m.addEventListener("close",()=>l()),a&&m.addEventListener("versionchange",g=>a(g.oldVersion,g.newVersion,g))}).catch(()=>{}),f}const NC=["get","getKey","getAll","getAllKeys","count"],IC=["put","add","delete","clear"],Ep=new Map;function eb(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Ep.get(e))return Ep.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,a=IC.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(a||NC.includes(t)))return;const l=async function(c,...f){const m=this.transaction(c,a?"readwrite":"readonly");let g=m.store;return i&&(g=g.index(f.shift())),(await Promise.all([g[t](...f),a&&m.done]))[0]};return Ep.set(e,l),l}SC(n=>({...n,get:(e,t,i)=>eb(e,t)||n.get(e,t,i),has:(e,t)=>!!eb(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(OC(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function OC(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Lp="@firebase/app",tb="0.12.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gi=new Tg("@firebase/app"),PC="@firebase/app-compat",MC="@firebase/analytics-compat",jC="@firebase/analytics",kC="@firebase/app-check-compat",VC="@firebase/app-check",LC="@firebase/auth",UC="@firebase/auth-compat",zC="@firebase/database",BC="@firebase/data-connect",qC="@firebase/database-compat",HC="@firebase/functions",FC="@firebase/functions-compat",GC="@firebase/installations",$C="@firebase/installations-compat",YC="@firebase/messaging",KC="@firebase/messaging-compat",QC="@firebase/performance",XC="@firebase/performance-compat",WC="@firebase/remote-config",ZC="@firebase/remote-config-compat",JC="@firebase/storage",e2="@firebase/storage-compat",t2="@firebase/firestore",n2="@firebase/vertexai",r2="@firebase/firestore-compat",i2="firebase",s2="11.7.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Up="[DEFAULT]",a2={[Lp]:"fire-core",[PC]:"fire-core-compat",[jC]:"fire-analytics",[MC]:"fire-analytics-compat",[VC]:"fire-app-check",[kC]:"fire-app-check-compat",[LC]:"fire-auth",[UC]:"fire-auth-compat",[zC]:"fire-rtdb",[BC]:"fire-data-connect",[qC]:"fire-rtdb-compat",[HC]:"fire-fn",[FC]:"fire-fn-compat",[GC]:"fire-iid",[$C]:"fire-iid-compat",[YC]:"fire-fcm",[KC]:"fire-fcm-compat",[QC]:"fire-perf",[XC]:"fire-perf-compat",[WC]:"fire-rc",[ZC]:"fire-rc-compat",[JC]:"fire-gcs",[e2]:"fire-gcs-compat",[t2]:"fire-fst",[r2]:"fire-fst-compat",[n2]:"fire-vertex","fire-js":"fire-js",[i2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nh=new Map,o2=new Map,zp=new Map;function nb(n,e){try{n.container.addComponent(e)}catch(t){gi.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Oo(n){const e=n.name;if(zp.has(e))return gi.debug(`There were multiple attempts to register component ${e}.`),!1;zp.set(e,n);for(const t of nh.values())nb(t,n);for(const t of o2.values())nb(t,n);return!0}function Sg(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Yn(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},us=new Fu("app","Firebase",l2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u2{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ya("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw us.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Go=s2;function w1(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i=Object.assign({name:Up,automaticDataCollectionEnabled:!1},e),a=i.name;if(typeof a!="string"||!a)throw us.create("bad-app-name",{appName:String(a)});if(t||(t=y1()),!t)throw us.create("no-options");const l=nh.get(a);if(l){if(ga(t,l.options)&&ga(i,l.config))return l;throw us.create("duplicate-app",{appName:a})}const c=new pC(a);for(const m of zp.values())c.addComponent(m);const f=new u2(t,i,c);return nh.set(a,f),f}function T1(n=Up){const e=nh.get(n);if(!e&&n===Up&&y1())return w1();if(!e)throw us.create("no-app",{appName:n});return e}function cs(n,e,t){var i;let a=(i=a2[n])!==null&&i!==void 0?i:n;t&&(a+=`-${t}`);const l=a.match(/\s|\//),c=e.match(/\s|\//);if(l||c){const f=[`Unable to register library "${a}" with version "${e}":`];l&&f.push(`library name "${a}" contains illegal characters (whitespace or "/")`),l&&c&&f.push("and"),c&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),gi.warn(f.join(" "));return}Oo(new ya(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c2="firebase-heartbeat-database",d2=1,Nu="firebase-heartbeat-store";let wp=null;function x1(){return wp||(wp=CC(c2,d2,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Nu)}catch(t){console.warn(t)}}}}).catch(n=>{throw us.create("idb-open",{originalErrorMessage:n.message})})),wp}async function h2(n){try{const t=(await x1()).transaction(Nu),i=await t.objectStore(Nu).get(S1(n));return await t.done,i}catch(e){if(e instanceof Ti)gi.warn(e.message);else{const t=us.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});gi.warn(t.message)}}}async function rb(n,e){try{const i=(await x1()).transaction(Nu,"readwrite");await i.objectStore(Nu).put(e,S1(n)),await i.done}catch(t){if(t instanceof Ti)gi.warn(t.message);else{const i=us.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});gi.warn(i.message)}}}function S1(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f2=1024,m2=30;class p2{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new y2(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=ib();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:a}),this._heartbeatsCache.heartbeats.length>m2){const c=v2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){gi.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=ib(),{heartbeatsToSend:i,unsentEntries:a}=g2(this._heartbeatsCache.heartbeats),l=th(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return gi.warn(t),""}}}function ib(){return new Date().toISOString().substring(0,10)}function g2(n,e=f2){const t=[];let i=n.slice();for(const a of n){const l=t.find(c=>c.agent===a.agent);if(l){if(l.dates.push(a.date),sb(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),sb(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class y2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return rC()?iC().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await h2(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const a=await this.read();return rb(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const a=await this.read();return rb(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function sb(n){return th(JSON.stringify({version:2,heartbeats:n})).length}function v2(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _2(n){Oo(new ya("platform-logger",e=>new DC(e),"PRIVATE")),Oo(new ya("heartbeat",e=>new p2(e),"PRIVATE")),cs(Lp,tb,n),cs(Lp,tb,"esm2017"),cs("fire-js","")}_2("");function Ag(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(n);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(n,i[a])&&(t[i[a]]=n[i[a]]);return t}function A1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const b2=A1,R1=new Fu("auth","Firebase",A1());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rh=new Tg("@firebase/auth");function E2(n,...e){rh.logLevel<=Ve.WARN&&rh.warn(`Auth (${Go}): ${n}`,...e)}function Ud(n,...e){rh.logLevel<=Ve.ERROR&&rh.error(`Auth (${Go}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sr(n,...e){throw Rg(n,...e)}function Ir(n,...e){return Rg(n,...e)}function C1(n,e,t){const i=Object.assign(Object.assign({},b2()),{[e]:t});return new Fu("auth","Firebase",i).create(e,{appName:n.name})}function hi(n){return C1(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Rg(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return R1.create(n,...e)}function Te(n,e,...t){if(!n)throw Rg(e,...t)}function ui(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Ud(e),new Error(e)}function yi(n,e){n||ui(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bp(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function w2(){return ab()==="http:"||ab()==="https:"}function ab(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T2(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(w2()||JR()||"connection"in navigator)?navigator.onLine:!0}function x2(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $u{constructor(e,t){this.shortDelay=e,this.longDelay=t,yi(t>e,"Short delay should be less than long delay!"),this.isMobile=XR()||eC()}get(){return T2()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cg(n,e){yi(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N1{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ui("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ui("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ui("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S2={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A2=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],R2=new $u(3e4,6e4);function Es(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function xi(n,e,t,i,a={}){return I1(n,a,async()=>{let l={},c={};i&&(e==="GET"?c=i:l={body:JSON.stringify(i)});const f=Gu(Object.assign({key:n.config.apiKey},c)).slice(1),m=await n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);const g=Object.assign({method:e,headers:m},l);return ZR()||(g.referrerPolicy="no-referrer"),n.emulatorConfig&&Hu(n.emulatorConfig.host)&&(g.credentials="include"),N1.fetch()(await D1(n,n.config.apiHost,t,f),g)})}async function I1(n,e,t){n._canInitEmulator=!1;const i=Object.assign(Object.assign({},S2),e);try{const a=new N2(n),l=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw Id(n,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const f=l.ok?c.errorMessage:c.error.message,[m,g]=f.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw Id(n,"credential-already-in-use",c);if(m==="EMAIL_EXISTS")throw Id(n,"email-already-in-use",c);if(m==="USER_DISABLED")throw Id(n,"user-disabled",c);const v=i[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw C1(n,v,g);sr(n,v)}}catch(a){if(a instanceof Ti)throw a;sr(n,"network-request-failed",{message:String(a)})}}async function Yu(n,e,t,i,a={}){const l=await xi(n,e,t,i,a);return"mfaPendingCredential"in l&&sr(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function D1(n,e,t,i){const a=`${e}${t}?${i}`,l=n,c=l.config.emulator?Cg(n.config,a):`${n.config.apiScheme}://${a}`;return A2.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}function C2(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class N2{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Ir(this.auth,"network-request-failed")),R2.get())})}}function Id(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const a=Ir(n,e,i);return a.customData._tokenResponse=t,a}function ob(n){return n!==void 0&&n.enterprise!==void 0}class I2{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return C2(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function D2(n,e){return xi(n,"GET","/v2/recaptchaConfig",Es(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function O2(n,e){return xi(n,"POST","/v1/accounts:delete",e)}async function ih(n,e){return xi(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wu(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function P2(n,e=!1){const t=jt(n),i=await t.getIdToken(e),a=Ng(i);Te(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,c=l==null?void 0:l.sign_in_provider;return{claims:a,token:i,authTime:wu(Tp(a.auth_time)),issuedAtTime:wu(Tp(a.iat)),expirationTime:wu(Tp(a.exp)),signInProvider:c||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Tp(n){return Number(n)*1e3}function Ng(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return Ud("JWT malformed, contained fewer than 3 sections"),null;try{const a=p1(t);return a?JSON.parse(a):(Ud("Failed to decode base64 JWT payload"),null)}catch(a){return Ud("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function lb(n){const e=Ng(n);return Te(e,"internal-error"),Te(typeof e.exp<"u","internal-error"),Te(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Po(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Ti&&M2(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function M2({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j2{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const a=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=wu(this.lastLoginAt),this.creationTime=wu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sh(n){var e;const t=n.auth,i=await n.getIdToken(),a=await Po(n,ih(t,{idToken:i}));Te(a==null?void 0:a.users.length,t,"internal-error");const l=a.users[0];n._notifyReloadListener(l);const c=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?O1(l.providerUserInfo):[],f=V2(n.providerData,c),m=n.isAnonymous,g=!(n.email&&l.passwordHash)&&!(f!=null&&f.length),v=m?g:!1,w={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:f,metadata:new qp(l.createdAt,l.lastLoginAt),isAnonymous:v};Object.assign(n,w)}async function k2(n){const e=jt(n);await sh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function V2(n,e){return[...n.filter(i=>!e.some(a=>a.providerId===i.providerId)),...e]}function O1(n){return n.map(e=>{var{providerId:t}=e,i=Ag(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function L2(n,e){const t=await I1(n,{},async()=>{const i=Gu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=n.config,c=await D1(n,a,"/v1/token",`key=${l}`),f=await n._getAdditionalHeaders();return f["Content-Type"]="application/x-www-form-urlencoded",N1.fetch()(c,{method:"POST",headers:f,body:i})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function U2(n,e){return xi(n,"POST","/v2/accounts:revokeToken",Es(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Te(e.idToken,"internal-error"),Te(typeof e.idToken<"u","internal-error"),Te(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):lb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Te(e.length!==0,"internal-error");const t=lb(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Te(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:a,expiresIn:l}=await L2(e,t);this.updateTokensAndExpiration(i,a,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:a,expirationTime:l}=t,c=new Ro;return i&&(Te(typeof i=="string","internal-error",{appName:e}),c.refreshToken=i),a&&(Te(typeof a=="string","internal-error",{appName:e}),c.accessToken=a),l&&(Te(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ro,this.toJSON())}_performRefresh(){return ui("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ts(n,e){Te(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class rr{constructor(e){var{uid:t,auth:i,stsTokenManager:a}=e,l=Ag(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new j2(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new qp(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await Po(this,this.stsTokenManager.getToken(this.auth,e));return Te(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return P2(this,e)}reload(){return k2(this)}_assign(e){this!==e&&(Te(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new rr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await sh(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Yn(this.auth.app))return Promise.reject(hi(this.auth));const e=await this.getIdToken();return await Po(this,O2(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,a,l,c,f,m,g,v;const w=(i=t.displayName)!==null&&i!==void 0?i:void 0,T=(a=t.email)!==null&&a!==void 0?a:void 0,C=(l=t.phoneNumber)!==null&&l!==void 0?l:void 0,A=(c=t.photoURL)!==null&&c!==void 0?c:void 0,U=(f=t.tenantId)!==null&&f!==void 0?f:void 0,I=(m=t._redirectEventId)!==null&&m!==void 0?m:void 0,q=(g=t.createdAt)!==null&&g!==void 0?g:void 0,X=(v=t.lastLoginAt)!==null&&v!==void 0?v:void 0,{uid:Y,emailVerified:de,isAnonymous:ue,providerData:ye,stsTokenManager:M}=t;Te(Y&&M,e,"internal-error");const R=Ro.fromJSON(this.name,M);Te(typeof Y=="string",e,"internal-error"),ts(w,e.name),ts(T,e.name),Te(typeof de=="boolean",e,"internal-error"),Te(typeof ue=="boolean",e,"internal-error"),ts(C,e.name),ts(A,e.name),ts(U,e.name),ts(I,e.name),ts(q,e.name),ts(X,e.name);const N=new rr({uid:Y,auth:e,email:T,emailVerified:de,displayName:w,isAnonymous:ue,photoURL:A,phoneNumber:C,tenantId:U,stsTokenManager:R,createdAt:q,lastLoginAt:X});return ye&&Array.isArray(ye)&&(N.providerData=ye.map(j=>Object.assign({},j))),I&&(N._redirectEventId=I),N}static async _fromIdTokenResponse(e,t,i=!1){const a=new Ro;a.updateFromServerResponse(t);const l=new rr({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:i});return await sh(l),l}static async _fromGetAccountInfoResponse(e,t,i){const a=t.users[0];Te(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?O1(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!(l!=null&&l.length),f=new Ro;f.updateFromIdToken(i);const m=new rr({uid:a.localId,auth:e,stsTokenManager:f,isAnonymous:c}),g={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new qp(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(l!=null&&l.length)};return Object.assign(m,g),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ub=new Map;function ci(n){yi(n instanceof Function,"Expected a class definition");let e=ub.get(n);return e?(yi(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,ub.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}P1.type="NONE";const cb=P1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zd(n,e,t){return`firebase:${n}:${e}:${t}`}class Co{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:a,name:l}=this.auth;this.fullUserKey=zd(this.userKey,a.apiKey,l),this.fullPersistenceKey=zd("persistence",a.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await ih(this.auth,{idToken:e}).catch(()=>{});return t?rr._fromGetAccountInfoResponse(this.auth,t,e):null}return rr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Co(ci(cb),e,i);const a=(await Promise.all(t.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let l=a[0]||ci(cb);const c=zd(i,e.config.apiKey,e.name);let f=null;for(const g of t)try{const v=await g._get(c);if(v){let w;if(typeof v=="string"){const T=await ih(e,{idToken:v}).catch(()=>{});if(!T)break;w=await rr._fromGetAccountInfoResponse(e,T,v)}else w=rr._fromJSON(e,v);g!==l&&(f=w),l=g;break}}catch{}const m=a.filter(g=>g._shouldAllowMigration);return!l._shouldAllowMigration||!m.length?new Co(l,e,i):(l=m[0],f&&await l._set(c,f.toJSON()),await Promise.all(t.map(async g=>{if(g!==l)try{await g._remove(c)}catch{}})),new Co(l,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function db(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(V1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(M1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(U1(e))return"Blackberry";if(z1(e))return"Webos";if(j1(e))return"Safari";if((e.includes("chrome/")||k1(e))&&!e.includes("edge/"))return"Chrome";if(L1(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function M1(n=on()){return/firefox\//i.test(n)}function j1(n=on()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function k1(n=on()){return/crios\//i.test(n)}function V1(n=on()){return/iemobile/i.test(n)}function L1(n=on()){return/android/i.test(n)}function U1(n=on()){return/blackberry/i.test(n)}function z1(n=on()){return/webos/i.test(n)}function Ig(n=on()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function z2(n=on()){var e;return Ig(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function B2(){return tC()&&document.documentMode===10}function B1(n=on()){return Ig(n)||L1(n)||z1(n)||U1(n)||/windows phone/i.test(n)||V1(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q1(n,e=[]){let t;switch(n){case"Browser":t=db(on());break;case"Worker":t=`${db(on())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Go}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q2{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((c,f)=>{try{const m=e(l);c(m)}catch(m){f(m)}});i.onAbort=t,this.queue.push(i);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function H2(n,e={}){return xi(n,"GET","/v2/passwordPolicy",Es(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F2=6;class G2{constructor(e){var t,i,a,l;const c=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=c.minPasswordLength)!==null&&t!==void 0?t:F2,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(a=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&a!==void 0?a:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,a,l,c,f;const m={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,m),this.validatePasswordCharacterOptions(e,m),m.isValid&&(m.isValid=(t=m.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),m.isValid&&(m.isValid=(i=m.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),m.isValid&&(m.isValid=(a=m.containsLowercaseLetter)!==null&&a!==void 0?a:!0),m.isValid&&(m.isValid=(l=m.containsUppercaseLetter)!==null&&l!==void 0?l:!0),m.isValid&&(m.isValid=(c=m.containsNumericCharacter)!==null&&c!==void 0?c:!0),m.isValid&&(m.isValid=(f=m.containsNonAlphanumericCharacter)!==null&&f!==void 0?f:!0),m}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let a=0;a<e.length;a++)i=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $2{constructor(e,t,i,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new hb(this),this.idTokenSubscription=new hb(this),this.beforeStateQueue=new q2(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=R1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ci(t)),this._initializationPromise=this.queue(async()=>{var i,a,l;if(!this._deleted&&(this.persistenceManager=await Co.create(this,e),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((a=this._popupRedirectResolver)===null||a===void 0)&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)===null||l===void 0?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await ih(this,{idToken:e}),i=await rr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Yn(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(f,f))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let a=i,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,f=a==null?void 0:a._redirectEventId,m=await this.tryRedirectSignIn(e);(!c||c===f)&&(m!=null&&m.user)&&(a=m.user,l=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(a)}catch(c){a=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return Te(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await sh(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=x2()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Yn(this.app))return Promise.reject(hi(this));const t=e?jt(e):null;return t&&Te(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Te(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Yn(this.app)?Promise.reject(hi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Yn(this.app)?Promise.reject(hi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ci(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await H2(this),t=new G2(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Fu("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await U2(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ci(e)||this._popupRedirectResolver;Te(t,this,"argument-error"),this.redirectPersistenceManager=await Co.create(this,[ci(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,a){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(Te(f,this,"internal-error"),f.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const m=e.addObserver(t,i,a);return()=>{c=!0,m()}}else{const m=e.addObserver(t);return()=>{c=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=q1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);const a=await this._getAppCheckToken();return a&&(t["X-Firebase-AppCheck"]=a),t}async _getAppCheckToken(){var e;if(Yn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&E2(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function xa(n){return jt(n)}class hb{constructor(e){this.auth=e,this.observer=null,this.addObserver=uC(t=>this.observer=t)}get next(){return Te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Y2(n){Dh=n}function H1(n){return Dh.loadJS(n)}function K2(){return Dh.recaptchaEnterpriseScript}function Q2(){return Dh.gapiScript}function X2(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class W2{constructor(){this.enterprise=new Z2}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Z2{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const J2="recaptcha-enterprise",F1="NO_RECAPTCHA";class eN{constructor(e){this.type=J2,this.auth=xa(e)}async verify(e="verify",t=!1){async function i(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(c,f)=>{D2(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(m=>{if(m.recaptchaKey===void 0)f(new Error("recaptcha Enterprise site key undefined"));else{const g=new I2(m);return l.tenantId==null?l._agentRecaptchaConfig=g:l._tenantRecaptchaConfigs[l.tenantId]=g,c(g.siteKey)}}).catch(m=>{f(m)})})}function a(l,c,f){const m=window.grecaptcha;ob(m)?m.enterprise.ready(()=>{m.enterprise.execute(l,{action:e}).then(g=>{c(g)}).catch(()=>{c(F1)})}):f(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new W2().execute("siteKey",{action:"verify"}):new Promise((l,c)=>{i(this.auth).then(f=>{if(!t&&ob(window.grecaptcha))a(f,l,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let m=K2();m.length!==0&&(m+=f),H1(m).then(()=>{a(f,l,c)}).catch(g=>{c(g)})}}).catch(f=>{c(f)})})}}async function fb(n,e,t,i=!1,a=!1){const l=new eN(n);let c;if(a)c=F1;else try{c=await l.verify(t)}catch{c=await l.verify(t,!0)}const f=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in f){const m=f.phoneEnrollmentInfo.phoneNumber,g=f.phoneEnrollmentInfo.recaptchaToken;Object.assign(f,{phoneEnrollmentInfo:{phoneNumber:m,recaptchaToken:g,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in f){const m=f.phoneSignInInfo.recaptchaToken;Object.assign(f,{phoneSignInInfo:{recaptchaToken:m,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return f}return i?Object.assign(f,{captchaResp:c}):Object.assign(f,{captchaResponse:c}),Object.assign(f,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(f,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),f}async function Hp(n,e,t,i,a){var l;if(!((l=n._getRecaptchaConfig())===null||l===void 0)&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await fb(n,e,t,t==="getOobCode");return i(n,c)}else return i(n,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await fb(n,e,t,t==="getOobCode");return i(n,f)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tN(n,e){const t=Sg(n,"auth");if(t.isInitialized()){const a=t.getImmediate(),l=t.getOptions();if(ga(l,e??{}))return a;sr(a,"already-initialized")}return t.initialize({options:e})}function nN(n,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(ci);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function rN(n,e,t){const i=xa(n);Te(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const a=!1,l=G1(e),{host:c,port:f}=iN(e),m=f===null?"":`:${f}`,g={url:`${l}//${c}${m}/`},v=Object.freeze({host:c,port:f,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!i._canInitEmulator){Te(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Te(ga(g,i.config.emulator)&&ga(v,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=g,i.emulatorConfig=v,i.settings.appVerificationDisabledForTesting=!0,Hu(c)?(Ih("Auth",!0),_1(`${l}//${c}${m}`)):sN()}function G1(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function iN(n){const e=G1(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(i);if(a){const l=a[1];return{host:l,port:mb(i.substr(l.length+1))}}else{const[l,c]=i.split(":");return{host:l,port:mb(c)}}}function mb(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function sN(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dg{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ui("not implemented")}_getIdTokenResponse(e){return ui("not implemented")}_linkToIdToken(e,t){return ui("not implemented")}_getReauthenticationResolver(e){return ui("not implemented")}}async function aN(n,e){return xi(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oN(n,e){return Yu(n,"POST","/v1/accounts:signInWithPassword",Es(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lN(n,e){return Yu(n,"POST","/v1/accounts:signInWithEmailLink",Es(n,e))}async function uN(n,e){return Yu(n,"POST","/v1/accounts:signInWithEmailLink",Es(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu extends Dg{constructor(e,t,i,a=null){super("password",i),this._email=e,this._password=t,this._tenantId=a}static _fromEmailAndPassword(e,t){return new Iu(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new Iu(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Hp(e,t,"signInWithPassword",oN);case"emailLink":return lN(e,{email:this._email,oobCode:this._password});default:sr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Hp(e,i,"signUpPassword",aN);case"emailLink":return uN(e,{idToken:t,email:this._email,oobCode:this._password});default:sr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function No(n,e){return Yu(n,"POST","/v1/accounts:signInWithIdp",Es(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cN="http://localhost";class va extends Dg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new va(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):sr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:a}=t,l=Ag(t,["providerId","signInMethod"]);if(!i||!a)return null;const c=new va(i,a);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return No(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,No(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,No(e,t)}buildRequest(){const e={requestUri:cN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Gu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dN(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function hN(n){const e=pu(gu(n)).link,t=e?pu(gu(e)).deep_link_id:null,i=pu(gu(n)).deep_link_id;return(i?pu(gu(i)).link:null)||i||t||e||n}class Og{constructor(e){var t,i,a,l,c,f;const m=pu(gu(e)),g=(t=m.apiKey)!==null&&t!==void 0?t:null,v=(i=m.oobCode)!==null&&i!==void 0?i:null,w=dN((a=m.mode)!==null&&a!==void 0?a:null);Te(g&&v&&w,"argument-error"),this.apiKey=g,this.operation=w,this.code=v,this.continueUrl=(l=m.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(c=m.lang)!==null&&c!==void 0?c:null,this.tenantId=(f=m.tenantId)!==null&&f!==void 0?f:null}static parseLink(e){const t=hN(e);try{return new Og(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o{constructor(){this.providerId=$o.PROVIDER_ID}static credential(e,t){return Iu._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=Og.parseLink(t);return Te(i,"argument-error"),Iu._fromEmailAndCode(e,i.code,i.tenantId)}}$o.PROVIDER_ID="password";$o.EMAIL_PASSWORD_SIGN_IN_METHOD="password";$o.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $1{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku extends $1{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs extends Ku{constructor(){super("facebook.com")}static credential(e){return va._fromParams({providerId:rs.PROVIDER_ID,signInMethod:rs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return rs.credentialFromTaggedObject(e)}static credentialFromError(e){return rs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return rs.credential(e.oauthAccessToken)}catch{return null}}}rs.FACEBOOK_SIGN_IN_METHOD="facebook.com";rs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is extends Ku{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return va._fromParams({providerId:is.PROVIDER_ID,signInMethod:is.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return is.credentialFromTaggedObject(e)}static credentialFromError(e){return is.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return is.credential(t,i)}catch{return null}}}is.GOOGLE_SIGN_IN_METHOD="google.com";is.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss extends Ku{constructor(){super("github.com")}static credential(e){return va._fromParams({providerId:ss.PROVIDER_ID,signInMethod:ss.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ss.credentialFromTaggedObject(e)}static credentialFromError(e){return ss.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ss.credential(e.oauthAccessToken)}catch{return null}}}ss.GITHUB_SIGN_IN_METHOD="github.com";ss.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as extends Ku{constructor(){super("twitter.com")}static credential(e,t){return va._fromParams({providerId:as.PROVIDER_ID,signInMethod:as.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return as.credentialFromTaggedObject(e)}static credentialFromError(e){return as.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return as.credential(t,i)}catch{return null}}}as.TWITTER_SIGN_IN_METHOD="twitter.com";as.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fN(n,e){return Yu(n,"POST","/v1/accounts:signUp",Es(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,a=!1){const l=await rr._fromIdTokenResponse(e,i,a),c=pb(i);return new _a({user:l,providerId:c,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const a=pb(i);return new _a({user:e,providerId:a,_tokenResponse:i,operationType:t})}}function pb(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ah extends Ti{constructor(e,t,i,a){var l;super(t.code,t.message),this.operationType=i,this.user=a,Object.setPrototypeOf(this,ah.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,a){return new ah(e,t,i,a)}}function Y1(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?ah._fromErrorAndOperation(n,l,e,i):l})}async function mN(n,e,t=!1){const i=await Po(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return _a._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pN(n,e,t=!1){const{auth:i}=n;if(Yn(i.app))return Promise.reject(hi(i));const a="reauthenticate";try{const l=await Po(n,Y1(i,a,e,n),t);Te(l.idToken,i,"internal-error");const c=Ng(l.idToken);Te(c,i,"internal-error");const{sub:f}=c;return Te(n.uid===f,i,"user-mismatch"),_a._forOperation(n,a,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&sr(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K1(n,e,t=!1){if(Yn(n.app))return Promise.reject(hi(n));const i="signIn",a=await Y1(n,i,e),l=await _a._fromIdTokenResponse(n,i,a);return t||await n._updateCurrentUser(l.user),l}async function gN(n,e){return K1(xa(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Q1(n){const e=xa(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function yN(n,e,t){if(Yn(n.app))return Promise.reject(hi(n));const i=xa(n),c=await Hp(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",fN).catch(m=>{throw m.code==="auth/password-does-not-meet-requirements"&&Q1(n),m}),f=await _a._fromIdTokenResponse(i,"signIn",c);return await i._updateCurrentUser(f.user),f}function vN(n,e,t){return Yn(n.app)?Promise.reject(hi(n)):gN(jt(n),$o.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&Q1(n),i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _N(n,e){return xi(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bN(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const i=jt(n),l={idToken:await i.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},c=await Po(i,_N(i.auth,l));i.displayName=c.displayName||null,i.photoURL=c.photoUrl||null;const f=i.providerData.find(({providerId:m})=>m==="password");f&&(f.displayName=i.displayName,f.photoURL=i.photoURL),await i._updateTokensIfNecessary(c)}function EN(n,e,t,i){return jt(n).onIdTokenChanged(e,t,i)}function wN(n,e,t){return jt(n).beforeAuthStateChanged(e,t)}function TN(n,e,t,i){return jt(n).onAuthStateChanged(e,t,i)}function xN(n){return jt(n).signOut()}const oh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(oh,"1"),this.storage.removeItem(oh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SN=1e3,AN=10;class W1 extends X1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=B1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),a=this.localCache[t];i!==a&&e(t,a,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,f,m)=>{this.notifyListeners(c,m)});return}const i=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(i);!t&&this.localCache[i]===c||this.notifyListeners(i,c)},l=this.storage.getItem(i);B2()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,AN):a()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},SN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}W1.type="LOCAL";const RN=W1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z1 extends X1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Z1.type="SESSION";const J1=Z1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CN(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const i=new Oh(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:a,data:l}=t.data,c=this.handlersMap[a];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:a});const f=Array.from(c).map(async g=>g(t.origin,l)),m=await CN(f);t.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:m})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Oh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pg(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NN{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,c;return new Promise((f,m)=>{const g=Pg("",20);a.port1.start();const v=setTimeout(()=>{m(new Error("unsupported_event"))},i);c={messageChannel:a,onMessage(w){const T=w;if(T.data.eventId===g)switch(T.data.status){case"ack":clearTimeout(v),l=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),f(T.data.response);break;default:clearTimeout(v),clearTimeout(l),m(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:g,data:t},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dr(){return window}function IN(n){Dr().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ew(){return typeof Dr().WorkerGlobalScope<"u"&&typeof Dr().importScripts=="function"}async function DN(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function ON(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function PN(){return ew()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tw="firebaseLocalStorageDb",MN=1,lh="firebaseLocalStorage",nw="fbase_key";class Qu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Ph(n,e){return n.transaction([lh],e?"readwrite":"readonly").objectStore(lh)}function jN(){const n=indexedDB.deleteDatabase(tw);return new Qu(n).toPromise()}function Fp(){const n=indexedDB.open(tw,MN);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(lh,{keyPath:nw})}catch(a){t(a)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(lh)?e(i):(i.close(),await jN(),e(await Fp()))})})}async function gb(n,e,t){const i=Ph(n,!0).put({[nw]:e,value:t});return new Qu(i).toPromise()}async function kN(n,e){const t=Ph(n,!1).get(e),i=await new Qu(t).toPromise();return i===void 0?null:i.value}function yb(n,e){const t=Ph(n,!0).delete(e);return new Qu(t).toPromise()}const VN=800,LN=3;class rw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Fp(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>LN)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ew()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Oh._getInstance(PN()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await DN(),!this.activeServiceWorker)return;this.sender=new NN(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((t=i[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||ON()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Fp();return await gb(e,oh,"1"),await yb(e,oh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>gb(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>kN(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>yb(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=Ph(a,!1).getAll();return new Qu(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)i.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!i.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),VN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}rw.type="LOCAL";const UN=rw;new $u(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zN(n,e){return e?ci(e):(Te(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mg extends Dg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return No(e,this._buildIdpRequest())}_linkToIdToken(e,t){return No(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return No(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function BN(n){return K1(n.auth,new Mg(n),n.bypassAuthState)}function qN(n){const{auth:e,user:t}=n;return Te(t,e,"internal-error"),pN(t,new Mg(n),n.bypassAuthState)}async function HN(n){const{auth:e,user:t}=n;return Te(t,e,"internal-error"),mN(t,new Mg(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iw{constructor(e,t,i,a,l=!1){this.auth=e,this.resolver=i,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:a,tenantId:l,error:c,type:f}=e;if(c){this.reject(c);return}const m={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(m))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return BN;case"linkViaPopup":case"linkViaRedirect":return HN;case"reauthViaPopup":case"reauthViaRedirect":return qN;default:sr(this.auth,"internal-error")}}resolve(e){yi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){yi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FN=new $u(2e3,1e4);class Ao extends iw{constructor(e,t,i,a,l){super(e,t,a,l),this.provider=i,this.authWindow=null,this.pollId=null,Ao.currentPopupAction&&Ao.currentPopupAction.cancel(),Ao.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Te(e,this.auth,"internal-error"),e}async onExecution(){yi(this.filter.length===1,"Popup operations only handle one event");const e=Pg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Ir(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Ir(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ao.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if(!((i=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ir(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,FN.get())};e()}}Ao.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GN="pendingRedirect",Bd=new Map;class $N extends iw{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Bd.get(this.auth._key());if(!e){try{const i=await YN(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Bd.set(this.auth._key(),e)}return this.bypassAuthState||Bd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function YN(n,e){const t=XN(e),i=QN(n);if(!await i._isAvailable())return!1;const a=await i._get(t)==="true";return await i._remove(t),a}function KN(n,e){Bd.set(n._key(),e)}function QN(n){return ci(n._redirectPersistence)}function XN(n){return zd(GN,n.config.apiKey,n.name)}async function WN(n,e,t=!1){if(Yn(n.app))return Promise.reject(hi(n));const i=xa(n),a=zN(i,e),c=await new $N(i,a,t).execute();return c&&!t&&(delete c.user._redirectEventId,await i._persistUserIfCurrent(c.user),await i._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZN=10*60*1e3;class JN{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!eI(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!sw(e)){const a=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(Ir(this.auth,a))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=ZN&&this.cachedEventUids.clear(),this.cachedEventUids.has(vb(e))}saveEventToCache(e){this.cachedEventUids.add(vb(e)),this.lastProcessedEventTime=Date.now()}}function vb(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function sw({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function eI(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return sw(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tI(n,e={}){return xi(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nI=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,rI=/^https?/;async function iI(n){if(n.config.emulator)return;const{authorizedDomains:e}=await tI(n);for(const t of e)try{if(sI(t))return}catch{}sr(n,"unauthorized-domain")}function sI(n){const e=Bp(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===i}if(!rI.test(t))return!1;if(nI.test(n))return i===n;const a=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aI=new $u(3e4,6e4);function _b(){const n=Dr().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function oI(n){return new Promise((e,t)=>{var i,a,l;function c(){_b(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{_b(),t(Ir(n,"network-request-failed"))},timeout:aI.get()})}if(!((a=(i=Dr().gapi)===null||i===void 0?void 0:i.iframes)===null||a===void 0)&&a.Iframe)e(gapi.iframes.getContext());else if(!((l=Dr().gapi)===null||l===void 0)&&l.load)c();else{const f=X2("iframefcb");return Dr()[f]=()=>{gapi.load?c():t(Ir(n,"network-request-failed"))},H1(`${Q2()}?onload=${f}`).catch(m=>t(m))}}).catch(e=>{throw qd=null,e})}let qd=null;function lI(n){return qd=qd||oI(n),qd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uI=new $u(5e3,15e3),cI="__/auth/iframe",dI="emulator/auth/iframe",hI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},fI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function mI(n){const e=n.config;Te(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Cg(e,dI):`https://${n.config.authDomain}/${cI}`,i={apiKey:e.apiKey,appName:n.name,v:Go},a=fI.get(n.config.apiHost);a&&(i.eid=a);const l=n._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${Gu(i).slice(1)}`}async function pI(n){const e=await lI(n),t=Dr().gapi;return Te(t,n,"internal-error"),e.open({where:document.body,url:mI(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:hI,dontclear:!0},i=>new Promise(async(a,l)=>{await i.restyle({setHideOnLeave:!1});const c=Ir(n,"network-request-failed"),f=Dr().setTimeout(()=>{l(c)},uI.get());function m(){Dr().clearTimeout(f),a(i)}i.ping(m).then(m,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},yI=500,vI=600,_I="_blank",bI="http://localhost";class bb{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function EI(n,e,t,i=yI,a=vI){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-i)/2,0).toString();let f="";const m=Object.assign(Object.assign({},gI),{width:i.toString(),height:a.toString(),top:l,left:c}),g=on().toLowerCase();t&&(f=k1(g)?_I:t),M1(g)&&(e=e||bI,m.scrollbars="yes");const v=Object.entries(m).reduce((T,[C,A])=>`${T}${C}=${A},`,"");if(z2(g)&&f!=="_self")return wI(e||"",f),new bb(null);const w=window.open(e||"",f,v);Te(w,n,"popup-blocked");try{w.focus()}catch{}return new bb(w)}function wI(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TI="__/auth/handler",xI="emulator/auth/handler",SI=encodeURIComponent("fac");async function Eb(n,e,t,i,a,l){Te(n.config.authDomain,n,"auth-domain-config-required"),Te(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:Go,eventId:a};if(e instanceof $1){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",lC(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,w]of Object.entries({}))c[v]=w}if(e instanceof Ku){const v=e.getScopes().filter(w=>w!=="");v.length>0&&(c.scopes=v.join(","))}n.tenantId&&(c.tid=n.tenantId);const f=c;for(const v of Object.keys(f))f[v]===void 0&&delete f[v];const m=await n._getAppCheckToken(),g=m?`#${SI}=${encodeURIComponent(m)}`:"";return`${AI(n)}?${Gu(f).slice(1)}${g}`}function AI({config:n}){return n.emulator?Cg(n,xI):`https://${n.authDomain}/${TI}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xp="webStorageSupport";class RI{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=J1,this._completeRedirectFn=WN,this._overrideRedirectResult=KN}async _openPopup(e,t,i,a){var l;yi((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const c=await Eb(e,t,i,Bp(),a);return EI(e,c,Pg())}async _openRedirect(e,t,i,a){await this._originValidation(e);const l=await Eb(e,t,i,Bp(),a);return IN(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:l}=this.eventManagers[t];return a?Promise.resolve(a):(yi(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await pI(e),i=new JN(e);return t.register("authEvent",a=>(Te(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:i.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(xp,{type:xp},a=>{var l;const c=(l=a==null?void 0:a[0])===null||l===void 0?void 0:l[xp];c!==void 0&&t(!!c),sr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=iI(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return B1()||j1()||Ig()}}const CI=RI;var wb="@firebase/auth",Tb="1.10.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NI{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function II(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function DI(n){Oo(new ya("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:f}=i.options;Te(c&&!c.includes(":"),"invalid-api-key",{appName:i.name});const m={apiKey:c,authDomain:f,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:q1(n)},g=new $2(i,a,l,m);return nN(g,t),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Oo(new ya("auth-internal",e=>{const t=xa(e.getProvider("auth").getImmediate());return(i=>new NI(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),cs(wb,Tb,II(n)),cs(wb,Tb,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OI=5*60,PI=v1("authIdTokenMaxAge")||OI;let xb=null;const MI=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>PI)return;const a=t==null?void 0:t.token;xb!==a&&(xb=a,await fetch(n,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function jI(n=T1()){const e=Sg(n,"auth");if(e.isInitialized())return e.getImmediate();const t=tN(n,{popupRedirectResolver:CI,persistence:[UN,RN,J1]}),i=v1("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const c=MI(l.toString());wN(t,c,()=>c(t.currentUser)),EN(t,f=>c(f))}}const a=g1("auth");return a?rN(t,`http://${a}`):Ih("Auth",!1),t}function kI(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}Y2({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=a=>{const l=Ir("internal-error");l.customData=a,t(l)},i.type="text/javascript",i.charset="UTF-8",kI().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});DI("Browser");var VI="firebase",LI="11.7.3";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */cs(VI,LI,"app");var Sb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ds,aw;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(M,R){function N(){}N.prototype=R.prototype,M.D=R.prototype,M.prototype=new N,M.prototype.constructor=M,M.C=function(j,L,B){for(var O=Array(arguments.length-2),ct=2;ct<arguments.length;ct++)O[ct-2]=arguments[ct];return R.prototype[L].apply(j,O)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(M,R,N){N||(N=0);var j=Array(16);if(typeof R=="string")for(var L=0;16>L;++L)j[L]=R.charCodeAt(N++)|R.charCodeAt(N++)<<8|R.charCodeAt(N++)<<16|R.charCodeAt(N++)<<24;else for(L=0;16>L;++L)j[L]=R[N++]|R[N++]<<8|R[N++]<<16|R[N++]<<24;R=M.g[0],N=M.g[1],L=M.g[2];var B=M.g[3],O=R+(B^N&(L^B))+j[0]+3614090360&4294967295;R=N+(O<<7&4294967295|O>>>25),O=B+(L^R&(N^L))+j[1]+3905402710&4294967295,B=R+(O<<12&4294967295|O>>>20),O=L+(N^B&(R^N))+j[2]+606105819&4294967295,L=B+(O<<17&4294967295|O>>>15),O=N+(R^L&(B^R))+j[3]+3250441966&4294967295,N=L+(O<<22&4294967295|O>>>10),O=R+(B^N&(L^B))+j[4]+4118548399&4294967295,R=N+(O<<7&4294967295|O>>>25),O=B+(L^R&(N^L))+j[5]+1200080426&4294967295,B=R+(O<<12&4294967295|O>>>20),O=L+(N^B&(R^N))+j[6]+2821735955&4294967295,L=B+(O<<17&4294967295|O>>>15),O=N+(R^L&(B^R))+j[7]+4249261313&4294967295,N=L+(O<<22&4294967295|O>>>10),O=R+(B^N&(L^B))+j[8]+1770035416&4294967295,R=N+(O<<7&4294967295|O>>>25),O=B+(L^R&(N^L))+j[9]+2336552879&4294967295,B=R+(O<<12&4294967295|O>>>20),O=L+(N^B&(R^N))+j[10]+4294925233&4294967295,L=B+(O<<17&4294967295|O>>>15),O=N+(R^L&(B^R))+j[11]+2304563134&4294967295,N=L+(O<<22&4294967295|O>>>10),O=R+(B^N&(L^B))+j[12]+1804603682&4294967295,R=N+(O<<7&4294967295|O>>>25),O=B+(L^R&(N^L))+j[13]+4254626195&4294967295,B=R+(O<<12&4294967295|O>>>20),O=L+(N^B&(R^N))+j[14]+2792965006&4294967295,L=B+(O<<17&4294967295|O>>>15),O=N+(R^L&(B^R))+j[15]+1236535329&4294967295,N=L+(O<<22&4294967295|O>>>10),O=R+(L^B&(N^L))+j[1]+4129170786&4294967295,R=N+(O<<5&4294967295|O>>>27),O=B+(N^L&(R^N))+j[6]+3225465664&4294967295,B=R+(O<<9&4294967295|O>>>23),O=L+(R^N&(B^R))+j[11]+643717713&4294967295,L=B+(O<<14&4294967295|O>>>18),O=N+(B^R&(L^B))+j[0]+3921069994&4294967295,N=L+(O<<20&4294967295|O>>>12),O=R+(L^B&(N^L))+j[5]+3593408605&4294967295,R=N+(O<<5&4294967295|O>>>27),O=B+(N^L&(R^N))+j[10]+38016083&4294967295,B=R+(O<<9&4294967295|O>>>23),O=L+(R^N&(B^R))+j[15]+3634488961&4294967295,L=B+(O<<14&4294967295|O>>>18),O=N+(B^R&(L^B))+j[4]+3889429448&4294967295,N=L+(O<<20&4294967295|O>>>12),O=R+(L^B&(N^L))+j[9]+568446438&4294967295,R=N+(O<<5&4294967295|O>>>27),O=B+(N^L&(R^N))+j[14]+3275163606&4294967295,B=R+(O<<9&4294967295|O>>>23),O=L+(R^N&(B^R))+j[3]+4107603335&4294967295,L=B+(O<<14&4294967295|O>>>18),O=N+(B^R&(L^B))+j[8]+1163531501&4294967295,N=L+(O<<20&4294967295|O>>>12),O=R+(L^B&(N^L))+j[13]+2850285829&4294967295,R=N+(O<<5&4294967295|O>>>27),O=B+(N^L&(R^N))+j[2]+4243563512&4294967295,B=R+(O<<9&4294967295|O>>>23),O=L+(R^N&(B^R))+j[7]+1735328473&4294967295,L=B+(O<<14&4294967295|O>>>18),O=N+(B^R&(L^B))+j[12]+2368359562&4294967295,N=L+(O<<20&4294967295|O>>>12),O=R+(N^L^B)+j[5]+4294588738&4294967295,R=N+(O<<4&4294967295|O>>>28),O=B+(R^N^L)+j[8]+2272392833&4294967295,B=R+(O<<11&4294967295|O>>>21),O=L+(B^R^N)+j[11]+1839030562&4294967295,L=B+(O<<16&4294967295|O>>>16),O=N+(L^B^R)+j[14]+4259657740&4294967295,N=L+(O<<23&4294967295|O>>>9),O=R+(N^L^B)+j[1]+2763975236&4294967295,R=N+(O<<4&4294967295|O>>>28),O=B+(R^N^L)+j[4]+1272893353&4294967295,B=R+(O<<11&4294967295|O>>>21),O=L+(B^R^N)+j[7]+4139469664&4294967295,L=B+(O<<16&4294967295|O>>>16),O=N+(L^B^R)+j[10]+3200236656&4294967295,N=L+(O<<23&4294967295|O>>>9),O=R+(N^L^B)+j[13]+681279174&4294967295,R=N+(O<<4&4294967295|O>>>28),O=B+(R^N^L)+j[0]+3936430074&4294967295,B=R+(O<<11&4294967295|O>>>21),O=L+(B^R^N)+j[3]+3572445317&4294967295,L=B+(O<<16&4294967295|O>>>16),O=N+(L^B^R)+j[6]+76029189&4294967295,N=L+(O<<23&4294967295|O>>>9),O=R+(N^L^B)+j[9]+3654602809&4294967295,R=N+(O<<4&4294967295|O>>>28),O=B+(R^N^L)+j[12]+3873151461&4294967295,B=R+(O<<11&4294967295|O>>>21),O=L+(B^R^N)+j[15]+530742520&4294967295,L=B+(O<<16&4294967295|O>>>16),O=N+(L^B^R)+j[2]+3299628645&4294967295,N=L+(O<<23&4294967295|O>>>9),O=R+(L^(N|~B))+j[0]+4096336452&4294967295,R=N+(O<<6&4294967295|O>>>26),O=B+(N^(R|~L))+j[7]+1126891415&4294967295,B=R+(O<<10&4294967295|O>>>22),O=L+(R^(B|~N))+j[14]+2878612391&4294967295,L=B+(O<<15&4294967295|O>>>17),O=N+(B^(L|~R))+j[5]+4237533241&4294967295,N=L+(O<<21&4294967295|O>>>11),O=R+(L^(N|~B))+j[12]+1700485571&4294967295,R=N+(O<<6&4294967295|O>>>26),O=B+(N^(R|~L))+j[3]+2399980690&4294967295,B=R+(O<<10&4294967295|O>>>22),O=L+(R^(B|~N))+j[10]+4293915773&4294967295,L=B+(O<<15&4294967295|O>>>17),O=N+(B^(L|~R))+j[1]+2240044497&4294967295,N=L+(O<<21&4294967295|O>>>11),O=R+(L^(N|~B))+j[8]+1873313359&4294967295,R=N+(O<<6&4294967295|O>>>26),O=B+(N^(R|~L))+j[15]+4264355552&4294967295,B=R+(O<<10&4294967295|O>>>22),O=L+(R^(B|~N))+j[6]+2734768916&4294967295,L=B+(O<<15&4294967295|O>>>17),O=N+(B^(L|~R))+j[13]+1309151649&4294967295,N=L+(O<<21&4294967295|O>>>11),O=R+(L^(N|~B))+j[4]+4149444226&4294967295,R=N+(O<<6&4294967295|O>>>26),O=B+(N^(R|~L))+j[11]+3174756917&4294967295,B=R+(O<<10&4294967295|O>>>22),O=L+(R^(B|~N))+j[2]+718787259&4294967295,L=B+(O<<15&4294967295|O>>>17),O=N+(B^(L|~R))+j[9]+3951481745&4294967295,M.g[0]=M.g[0]+R&4294967295,M.g[1]=M.g[1]+(L+(O<<21&4294967295|O>>>11))&4294967295,M.g[2]=M.g[2]+L&4294967295,M.g[3]=M.g[3]+B&4294967295}i.prototype.u=function(M,R){R===void 0&&(R=M.length);for(var N=R-this.blockSize,j=this.B,L=this.h,B=0;B<R;){if(L==0)for(;B<=N;)a(this,M,B),B+=this.blockSize;if(typeof M=="string"){for(;B<R;)if(j[L++]=M.charCodeAt(B++),L==this.blockSize){a(this,j),L=0;break}}else for(;B<R;)if(j[L++]=M[B++],L==this.blockSize){a(this,j),L=0;break}}this.h=L,this.o+=R},i.prototype.v=function(){var M=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);M[0]=128;for(var R=1;R<M.length-8;++R)M[R]=0;var N=8*this.o;for(R=M.length-8;R<M.length;++R)M[R]=N&255,N/=256;for(this.u(M),M=Array(16),R=N=0;4>R;++R)for(var j=0;32>j;j+=8)M[N++]=this.g[R]>>>j&255;return M};function l(M,R){var N=f;return Object.prototype.hasOwnProperty.call(N,M)?N[M]:N[M]=R(M)}function c(M,R){this.h=R;for(var N=[],j=!0,L=M.length-1;0<=L;L--){var B=M[L]|0;j&&B==R||(N[L]=B,j=!1)}this.g=N}var f={};function m(M){return-128<=M&&128>M?l(M,function(R){return new c([R|0],0>R?-1:0)}):new c([M|0],0>M?-1:0)}function g(M){if(isNaN(M)||!isFinite(M))return w;if(0>M)return I(g(-M));for(var R=[],N=1,j=0;M>=N;j++)R[j]=M/N|0,N*=4294967296;return new c(R,0)}function v(M,R){if(M.length==0)throw Error("number format error: empty string");if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(M.charAt(0)=="-")return I(v(M.substring(1),R));if(0<=M.indexOf("-"))throw Error('number format error: interior "-" character');for(var N=g(Math.pow(R,8)),j=w,L=0;L<M.length;L+=8){var B=Math.min(8,M.length-L),O=parseInt(M.substring(L,L+B),R);8>B?(B=g(Math.pow(R,B)),j=j.j(B).add(g(O))):(j=j.j(N),j=j.add(g(O)))}return j}var w=m(0),T=m(1),C=m(16777216);n=c.prototype,n.m=function(){if(U(this))return-I(this).m();for(var M=0,R=1,N=0;N<this.g.length;N++){var j=this.i(N);M+=(0<=j?j:4294967296+j)*R,R*=4294967296}return M},n.toString=function(M){if(M=M||10,2>M||36<M)throw Error("radix out of range: "+M);if(A(this))return"0";if(U(this))return"-"+I(this).toString(M);for(var R=g(Math.pow(M,6)),N=this,j="";;){var L=de(N,R).g;N=q(N,L.j(R));var B=((0<N.g.length?N.g[0]:N.h)>>>0).toString(M);if(N=L,A(N))return B+j;for(;6>B.length;)B="0"+B;j=B+j}},n.i=function(M){return 0>M?0:M<this.g.length?this.g[M]:this.h};function A(M){if(M.h!=0)return!1;for(var R=0;R<M.g.length;R++)if(M.g[R]!=0)return!1;return!0}function U(M){return M.h==-1}n.l=function(M){return M=q(this,M),U(M)?-1:A(M)?0:1};function I(M){for(var R=M.g.length,N=[],j=0;j<R;j++)N[j]=~M.g[j];return new c(N,~M.h).add(T)}n.abs=function(){return U(this)?I(this):this},n.add=function(M){for(var R=Math.max(this.g.length,M.g.length),N=[],j=0,L=0;L<=R;L++){var B=j+(this.i(L)&65535)+(M.i(L)&65535),O=(B>>>16)+(this.i(L)>>>16)+(M.i(L)>>>16);j=O>>>16,B&=65535,O&=65535,N[L]=O<<16|B}return new c(N,N[N.length-1]&-2147483648?-1:0)};function q(M,R){return M.add(I(R))}n.j=function(M){if(A(this)||A(M))return w;if(U(this))return U(M)?I(this).j(I(M)):I(I(this).j(M));if(U(M))return I(this.j(I(M)));if(0>this.l(C)&&0>M.l(C))return g(this.m()*M.m());for(var R=this.g.length+M.g.length,N=[],j=0;j<2*R;j++)N[j]=0;for(j=0;j<this.g.length;j++)for(var L=0;L<M.g.length;L++){var B=this.i(j)>>>16,O=this.i(j)&65535,ct=M.i(L)>>>16,se=M.i(L)&65535;N[2*j+2*L]+=O*se,X(N,2*j+2*L),N[2*j+2*L+1]+=B*se,X(N,2*j+2*L+1),N[2*j+2*L+1]+=O*ct,X(N,2*j+2*L+1),N[2*j+2*L+2]+=B*ct,X(N,2*j+2*L+2)}for(j=0;j<R;j++)N[j]=N[2*j+1]<<16|N[2*j];for(j=R;j<2*R;j++)N[j]=0;return new c(N,0)};function X(M,R){for(;(M[R]&65535)!=M[R];)M[R+1]+=M[R]>>>16,M[R]&=65535,R++}function Y(M,R){this.g=M,this.h=R}function de(M,R){if(A(R))throw Error("division by zero");if(A(M))return new Y(w,w);if(U(M))return R=de(I(M),R),new Y(I(R.g),I(R.h));if(U(R))return R=de(M,I(R)),new Y(I(R.g),R.h);if(30<M.g.length){if(U(M)||U(R))throw Error("slowDivide_ only works with positive integers.");for(var N=T,j=R;0>=j.l(M);)N=ue(N),j=ue(j);var L=ye(N,1),B=ye(j,1);for(j=ye(j,2),N=ye(N,2);!A(j);){var O=B.add(j);0>=O.l(M)&&(L=L.add(N),B=O),j=ye(j,1),N=ye(N,1)}return R=q(M,L.j(R)),new Y(L,R)}for(L=w;0<=M.l(R);){for(N=Math.max(1,Math.floor(M.m()/R.m())),j=Math.ceil(Math.log(N)/Math.LN2),j=48>=j?1:Math.pow(2,j-48),B=g(N),O=B.j(R);U(O)||0<O.l(M);)N-=j,B=g(N),O=B.j(R);A(B)&&(B=T),L=L.add(B),M=q(M,O)}return new Y(L,M)}n.A=function(M){return de(this,M).h},n.and=function(M){for(var R=Math.max(this.g.length,M.g.length),N=[],j=0;j<R;j++)N[j]=this.i(j)&M.i(j);return new c(N,this.h&M.h)},n.or=function(M){for(var R=Math.max(this.g.length,M.g.length),N=[],j=0;j<R;j++)N[j]=this.i(j)|M.i(j);return new c(N,this.h|M.h)},n.xor=function(M){for(var R=Math.max(this.g.length,M.g.length),N=[],j=0;j<R;j++)N[j]=this.i(j)^M.i(j);return new c(N,this.h^M.h)};function ue(M){for(var R=M.g.length+1,N=[],j=0;j<R;j++)N[j]=M.i(j)<<1|M.i(j-1)>>>31;return new c(N,M.h)}function ye(M,R){var N=R>>5;R%=32;for(var j=M.g.length-N,L=[],B=0;B<j;B++)L[B]=0<R?M.i(B+N)>>>R|M.i(B+N+1)<<32-R:M.i(B+N);return new c(L,M.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,aw=i,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=g,c.fromString=v,ds=c}).apply(typeof Sb<"u"?Sb:typeof self<"u"?self:typeof window<"u"?window:{});var Dd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ow,yu,lw,Hd,Gp,uw,cw,dw;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,_,b){return d==Array.prototype||d==Object.prototype||(d[_]=b.value),d};function t(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof Dd=="object"&&Dd];for(var _=0;_<d.length;++_){var b=d[_];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var i=t(this);function a(d,_){if(_)e:{var b=i;d=d.split(".");for(var S=0;S<d.length-1;S++){var H=d[S];if(!(H in b))break e;b=b[H]}d=d[d.length-1],S=b[d],_=_(S),_!=S&&_!=null&&e(b,d,{configurable:!0,writable:!0,value:_})}}function l(d,_){d instanceof String&&(d+="");var b=0,S=!1,H={next:function(){if(!S&&b<d.length){var W=b++;return{value:_(W,d[W]),done:!1}}return S=!0,{done:!0,value:void 0}}};return H[Symbol.iterator]=function(){return H},H}a("Array.prototype.values",function(d){return d||function(){return l(this,function(_,b){return b})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},f=this||self;function m(d){var _=typeof d;return _=_!="object"?_:d?Array.isArray(d)?"array":_:"null",_=="array"||_=="object"&&typeof d.length=="number"}function g(d){var _=typeof d;return _=="object"&&d!=null||_=="function"}function v(d,_,b){return d.call.apply(d.bind,arguments)}function w(d,_,b){if(!d)throw Error();if(2<arguments.length){var S=Array.prototype.slice.call(arguments,2);return function(){var H=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(H,S),d.apply(_,H)}}return function(){return d.apply(_,arguments)}}function T(d,_,b){return T=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?v:w,T.apply(null,arguments)}function C(d,_){var b=Array.prototype.slice.call(arguments,1);return function(){var S=b.slice();return S.push.apply(S,arguments),d.apply(this,S)}}function A(d,_){function b(){}b.prototype=_.prototype,d.aa=_.prototype,d.prototype=new b,d.prototype.constructor=d,d.Qb=function(S,H,W){for(var le=Array(arguments.length-2),Ue=2;Ue<arguments.length;Ue++)le[Ue-2]=arguments[Ue];return _.prototype[H].apply(S,le)}}function U(d){const _=d.length;if(0<_){const b=Array(_);for(let S=0;S<_;S++)b[S]=d[S];return b}return[]}function I(d,_){for(let b=1;b<arguments.length;b++){const S=arguments[b];if(m(S)){const H=d.length||0,W=S.length||0;d.length=H+W;for(let le=0;le<W;le++)d[H+le]=S[le]}else d.push(S)}}class q{constructor(_,b){this.i=_,this.j=b,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function X(d){return/^[\s\xa0]*$/.test(d)}function Y(){var d=f.navigator;return d&&(d=d.userAgent)?d:""}function de(d){return de[" "](d),d}de[" "]=function(){};var ue=Y().indexOf("Gecko")!=-1&&!(Y().toLowerCase().indexOf("webkit")!=-1&&Y().indexOf("Edge")==-1)&&!(Y().indexOf("Trident")!=-1||Y().indexOf("MSIE")!=-1)&&Y().indexOf("Edge")==-1;function ye(d,_,b){for(const S in d)_.call(b,d[S],S,d)}function M(d,_){for(const b in d)_.call(void 0,d[b],b,d)}function R(d){const _={};for(const b in d)_[b]=d[b];return _}const N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function j(d,_){let b,S;for(let H=1;H<arguments.length;H++){S=arguments[H];for(b in S)d[b]=S[b];for(let W=0;W<N.length;W++)b=N[W],Object.prototype.hasOwnProperty.call(S,b)&&(d[b]=S[b])}}function L(d){var _=1;d=d.split(":");const b=[];for(;0<_&&d.length;)b.push(d.shift()),_--;return d.length&&b.push(d.join(":")),b}function B(d){f.setTimeout(()=>{throw d},0)}function O(){var d=ge;let _=null;return d.g&&(_=d.g,d.g=d.g.next,d.g||(d.h=null),_.next=null),_}class ct{constructor(){this.h=this.g=null}add(_,b){const S=se.get();S.set(_,b),this.h?this.h.next=S:this.g=S,this.h=S}}var se=new q(()=>new $,d=>d.reset());class ${constructor(){this.next=this.g=this.h=null}set(_,b){this.h=_,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let ae,me=!1,ge=new ct,P=()=>{const d=f.Promise.resolve(void 0);ae=()=>{d.then(te)}};var te=()=>{for(var d;d=O();){try{d.h.call(d.g)}catch(b){B(b)}var _=se;_.j(d),100>_.h&&(_.h++,d.next=_.g,_.g=d)}me=!1};function ce(){this.s=this.s,this.C=this.C}ce.prototype.s=!1,ce.prototype.ma=function(){this.s||(this.s=!0,this.N())},ce.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function oe(d,_){this.type=d,this.g=this.target=_,this.defaultPrevented=!1}oe.prototype.h=function(){this.defaultPrevented=!0};var be=function(){if(!f.addEventListener||!Object.defineProperty)return!1;var d=!1,_=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const b=()=>{};f.addEventListener("test",b,_),f.removeEventListener("test",b,_)}catch{}return d}();function Pe(d,_){if(oe.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var b=this.type=d.type,S=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=_,_=d.relatedTarget){if(ue){e:{try{de(_.nodeName);var H=!0;break e}catch{}H=!1}H||(_=null)}}else b=="mouseover"?_=d.fromElement:b=="mouseout"&&(_=d.toElement);this.relatedTarget=_,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:Ae[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&Pe.aa.h.call(this)}}A(Pe,oe);var Ae={2:"touch",3:"pen",4:"mouse"};Pe.prototype.h=function(){Pe.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var kt="closure_listenable_"+(1e6*Math.random()|0),rt=0;function ur(d,_,b,S,H){this.listener=d,this.proxy=null,this.src=_,this.type=b,this.capture=!!S,this.ha=H,this.key=++rt,this.da=this.fa=!1}function Ai(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function Vr(d){this.src=d,this.g={},this.h=0}Vr.prototype.add=function(d,_,b,S,H){var W=d.toString();d=this.g[W],d||(d=this.g[W]=[],this.h++);var le=As(d,_,S,H);return-1<le?(_=d[le],b||(_.fa=!1)):(_=new ur(_,this.src,W,!!S,H),_.fa=b,d.push(_)),_};function Ss(d,_){var b=_.type;if(b in d.g){var S=d.g[b],H=Array.prototype.indexOf.call(S,_,void 0),W;(W=0<=H)&&Array.prototype.splice.call(S,H,1),W&&(Ai(_),d.g[b].length==0&&(delete d.g[b],d.h--))}}function As(d,_,b,S){for(var H=0;H<d.length;++H){var W=d[H];if(!W.da&&W.listener==_&&W.capture==!!b&&W.ha==S)return H}return-1}var Rs="closure_lm_"+(1e6*Math.random()|0),tl={};function sc(d,_,b,S,H){if(Array.isArray(_)){for(var W=0;W<_.length;W++)sc(d,_[W],b,S,H);return null}return b=ac(b),d&&d[kt]?d.K(_,b,g(S)?!!S.capture:!1,H):Mn(d,_,b,!1,S,H)}function Mn(d,_,b,S,H,W){if(!_)throw Error("Invalid event type");var le=g(H)?!!H.capture:!!H,Ue=Na(d);if(Ue||(d[Rs]=Ue=new Vr(d)),b=Ue.add(_,b,S,le,W),b.proxy)return b;if(S=cf(),b.proxy=S,S.src=d,S.listener=b,d.addEventListener)be||(H=le),H===void 0&&(H=!1),d.addEventListener(_.toString(),S,H);else if(d.attachEvent)d.attachEvent(Cs(_.toString()),S);else if(d.addListener&&d.removeListener)d.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return b}function cf(){function d(b){return _.call(d.src,d.listener,b)}const _=df;return d}function nl(d,_,b,S,H){if(Array.isArray(_))for(var W=0;W<_.length;W++)nl(d,_[W],b,S,H);else S=g(S)?!!S.capture:!!S,b=ac(b),d&&d[kt]?(d=d.i,_=String(_).toString(),_ in d.g&&(W=d.g[_],b=As(W,b,S,H),-1<b&&(Ai(W[b]),Array.prototype.splice.call(W,b,1),W.length==0&&(delete d.g[_],d.h--)))):d&&(d=Na(d))&&(_=d.g[_.toString()],d=-1,_&&(d=As(_,b,S,H)),(b=-1<d?_[d]:null)&&Ca(b))}function Ca(d){if(typeof d!="number"&&d&&!d.da){var _=d.src;if(_&&_[kt])Ss(_.i,d);else{var b=d.type,S=d.proxy;_.removeEventListener?_.removeEventListener(b,S,d.capture):_.detachEvent?_.detachEvent(Cs(b),S):_.addListener&&_.removeListener&&_.removeListener(S),(b=Na(_))?(Ss(b,d),b.h==0&&(b.src=null,_[Rs]=null)):Ai(d)}}}function Cs(d){return d in tl?tl[d]:tl[d]="on"+d}function df(d,_){if(d.da)d=!0;else{_=new Pe(_,this);var b=d.listener,S=d.ha||d.src;d.fa&&Ca(d),d=b.call(S,_)}return d}function Na(d){return d=d[Rs],d instanceof Vr?d:null}var rl="__closure_events_fn_"+(1e9*Math.random()>>>0);function ac(d){return typeof d=="function"?d:(d[rl]||(d[rl]=function(_){return d.handleEvent(_)}),d[rl])}function ft(){ce.call(this),this.i=new Vr(this),this.M=this,this.F=null}A(ft,ce),ft.prototype[kt]=!0,ft.prototype.removeEventListener=function(d,_,b,S){nl(this,d,_,b,S)};function Ke(d,_){var b,S=d.F;if(S)for(b=[];S;S=S.F)b.push(S);if(d=d.M,S=_.type||_,typeof _=="string")_=new oe(_,d);else if(_ instanceof oe)_.target=_.target||d;else{var H=_;_=new oe(S,d),j(_,H)}if(H=!0,b)for(var W=b.length-1;0<=W;W--){var le=_.g=b[W];H=wn(le,S,!0,_)&&H}if(le=_.g=d,H=wn(le,S,!0,_)&&H,H=wn(le,S,!1,_)&&H,b)for(W=0;W<b.length;W++)le=_.g=b[W],H=wn(le,S,!1,_)&&H}ft.prototype.N=function(){if(ft.aa.N.call(this),this.i){var d=this.i,_;for(_ in d.g){for(var b=d.g[_],S=0;S<b.length;S++)Ai(b[S]);delete d.g[_],d.h--}}this.F=null},ft.prototype.K=function(d,_,b,S){return this.i.add(String(d),_,!1,b,S)},ft.prototype.L=function(d,_,b,S){return this.i.add(String(d),_,!0,b,S)};function wn(d,_,b,S){if(_=d.i.g[String(_)],!_)return!0;_=_.concat();for(var H=!0,W=0;W<_.length;++W){var le=_[W];if(le&&!le.da&&le.capture==b){var Ue=le.listener,Nt=le.ha||le.src;le.fa&&Ss(d.i,le),H=Ue.call(Nt,S)!==!1&&H}}return H&&!S.defaultPrevented}function Jt(d,_,b){if(typeof d=="function")b&&(d=T(d,b));else if(d&&typeof d.handleEvent=="function")d=T(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(_)?-1:f.setTimeout(d,_||0)}function oc(d){d.g=Jt(()=>{d.g=null,d.i&&(d.i=!1,oc(d))},d.l);const _=d.h;d.h=null,d.m.apply(null,_)}class hf extends ce{constructor(_,b){super(),this.m=_,this.l=b,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:oc(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ns(d){ce.call(this),this.h=d,this.g={}}A(Ns,ce);var Is=[];function Ds(d){ye(d.g,function(_,b){this.g.hasOwnProperty(b)&&Ca(_)},d),d.g={}}Ns.prototype.N=function(){Ns.aa.N.call(this),Ds(this)},Ns.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Wn=f.JSON.stringify,Ia=f.JSON.parse,Os=class{stringify(d){return f.JSON.stringify(d,void 0)}parse(d){return f.JSON.parse(d,void 0)}};function il(){}il.prototype.h=null;function sl(d){return d.h||(d.h=d.i())}function al(){}var Lr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ur(){oe.call(this,"d")}A(Ur,oe);function ol(){oe.call(this,"c")}A(ol,oe);var cr={},ll=null;function Ri(){return ll=ll||new ft}cr.La="serverreachability";function Da(d){oe.call(this,cr.La,d)}A(Da,oe);function Ci(d){const _=Ri();Ke(_,new Da(_))}cr.STAT_EVENT="statevent";function lc(d,_){oe.call(this,cr.STAT_EVENT,d),this.stat=_}A(lc,oe);function at(d){const _=Ri();Ke(_,new lc(_,d))}cr.Ma="timingevent";function Ct(d,_){oe.call(this,cr.Ma,d),this.size=_}A(Ct,oe);function wt(d,_){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){d()},_)}function jn(){this.g=!0}jn.prototype.xa=function(){this.g=!1};function ul(d,_,b,S,H,W){d.info(function(){if(d.g)if(W)for(var le="",Ue=W.split("&"),Nt=0;Nt<Ue.length;Nt++){var ze=Ue[Nt].split("=");if(1<ze.length){var Lt=ze[0];ze=ze[1];var It=Lt.split("_");le=2<=It.length&&It[1]=="type"?le+(Lt+"="+ze+"&"):le+(Lt+"=redacted&")}}else le=null;else le=W;return"XMLHTTP REQ ("+S+") [attempt "+H+"]: "+_+`
`+b+`
`+le})}function ff(d,_,b,S,H,W,le){d.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+H+"]: "+_+`
`+b+`
`+W+" "+le})}function Ni(d,_,b,S){d.info(function(){return"XMLHTTP TEXT ("+_+"): "+Ps(d,b)+(S?" "+S:"")})}function uc(d,_){d.info(function(){return"TIMEOUT: "+_})}jn.prototype.info=function(){};function Ps(d,_){if(!d.g)return _;if(!_)return null;try{var b=JSON.parse(_);if(b){for(d=0;d<b.length;d++)if(Array.isArray(b[d])){var S=b[d];if(!(2>S.length)){var H=S[1];if(Array.isArray(H)&&!(1>H.length)){var W=H[0];if(W!="noop"&&W!="stop"&&W!="close")for(var le=1;le<H.length;le++)H[le]=""}}}}return Wn(b)}catch{return _}}var Ii={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},zr={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},dr;function hr(){}A(hr,il),hr.prototype.g=function(){return new XMLHttpRequest},hr.prototype.i=function(){return{}},dr=new hr;function ln(d,_,b,S){this.j=d,this.i=_,this.l=b,this.R=S||1,this.U=new Ns(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new vt}function vt(){this.i=null,this.g="",this.h=!1}var cl={},Oa={};function Zn(d,_,b){d.L=1,d.v=Ls(Tn(_)),d.m=b,d.P=!0,Br(d,null)}function Br(d,_){d.F=Date.now(),Ms(d),d.A=Tn(d.v);var b=d.A,S=d.R;Array.isArray(S)||(S=[String(S)]),gl(b.i,"t",S),d.C=0,b=d.j.J,d.h=new vt,d.g=Sc(d.j,b?_:null,!d.m),0<d.O&&(d.M=new hf(T(d.Y,d,d.g),d.O)),_=d.U,b=d.g,S=d.ca;var H="readystatechange";Array.isArray(H)||(H&&(Is[0]=H.toString()),H=Is);for(var W=0;W<H.length;W++){var le=sc(b,H[W],S||_.handleEvent,!1,_.h||_);if(!le)break;_.g[le.key]=le}_=d.H?R(d.H):{},d.m?(d.u||(d.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,_)):(d.u="GET",d.g.ea(d.A,d.u,null,_)),Ci(),ul(d.i,d.u,d.A,d.l,d.R,d.m)}ln.prototype.ca=function(d){d=d.target;const _=this.M;_&&Un(d)==3?_.j():this.Y(d)},ln.prototype.Y=function(d){try{if(d==this.g)e:{const It=Un(this.g);var _=this.g.Ba();const Qr=this.g.Z();if(!(3>It)&&(It!=3||this.g&&(this.h.h||this.g.oa()||yc(this.g)))){this.J||It!=4||_==7||(_==8||0>=Qr?Ci(3):Ci(2)),Di(this);var b=this.g.Z();this.X=b;t:if(cc(this)){var S=yc(this.g);d="";var H=S.length,W=Un(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ft(this),fr(this);var le="";break t}this.h.i=new f.TextDecoder}for(_=0;_<H;_++)this.h.h=!0,d+=this.h.i.decode(S[_],{stream:!(W&&_==H-1)});S.length=0,this.h.g+=d,this.C=0,le=this.h.g}else le=this.g.oa();if(this.o=b==200,ff(this.i,this.u,this.A,this.l,this.R,It,b),this.o){if(this.T&&!this.K){t:{if(this.g){var Ue,Nt=this.g;if((Ue=Nt.g?Nt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!X(Ue)){var ze=Ue;break t}}ze=null}if(b=ze)Ni(this.i,this.l,b,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,js(this,b);else{this.o=!1,this.s=3,at(12),Ft(this),fr(this);break e}}if(this.P){b=!0;let Gt;for(;!this.J&&this.C<le.length;)if(Gt=dc(this,le),Gt==Oa){It==4&&(this.s=4,at(14),b=!1),Ni(this.i,this.l,null,"[Incomplete Response]");break}else if(Gt==cl){this.s=4,at(15),Ni(this.i,this.l,le,"[Invalid Chunk]"),b=!1;break}else Ni(this.i,this.l,Gt,null),js(this,Gt);if(cc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),It!=4||le.length!=0||this.h.h||(this.s=1,at(16),b=!1),this.o=this.o&&b,!b)Ni(this.i,this.l,le,"[Invalid Chunked Response]"),Ft(this),fr(this);else if(0<le.length&&!this.W){this.W=!0;var Lt=this.j;Lt.g==this&&Lt.ba&&!Lt.M&&(Lt.j.info("Great, no buffering proxy detected. Bytes received: "+le.length),$s(Lt),Lt.M=!0,at(11))}}else Ni(this.i,this.l,le,null),js(this,le);It==4&&Ft(this),this.o&&!this.J&&(It==4?wc(this.j,this):(this.o=!1,Ms(this)))}else vf(this.g),b==400&&0<le.indexOf("Unknown SID")?(this.s=3,at(12)):(this.s=0,at(13)),Ft(this),fr(this)}}}catch{}finally{}};function cc(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function dc(d,_){var b=d.C,S=_.indexOf(`
`,b);return S==-1?Oa:(b=Number(_.substring(b,S)),isNaN(b)?cl:(S+=1,S+b>_.length?Oa:(_=_.slice(S,S+b),d.C=S+b,_)))}ln.prototype.cancel=function(){this.J=!0,Ft(this)};function Ms(d){d.S=Date.now()+d.I,hc(d,d.I)}function hc(d,_){if(d.B!=null)throw Error("WatchDog timer not null");d.B=wt(T(d.ba,d),_)}function Di(d){d.B&&(f.clearTimeout(d.B),d.B=null)}ln.prototype.ba=function(){this.B=null;const d=Date.now();0<=d-this.S?(uc(this.i,this.A),this.L!=2&&(Ci(),at(17)),Ft(this),this.s=2,fr(this)):hc(this,this.S-d)};function fr(d){d.j.G==0||d.J||wc(d.j,d)}function Ft(d){Di(d);var _=d.M;_&&typeof _.ma=="function"&&_.ma(),d.M=null,Ds(d.U),d.g&&(_=d.g,d.g=null,_.abort(),_.ma())}function js(d,_){try{var b=d.j;if(b.G!=0&&(b.g==d||dl(b.h,d))){if(!d.K&&dl(b.h,d)&&b.G==3){try{var S=b.Da.g.parse(_)}catch{S=null}if(Array.isArray(S)&&S.length==3){var H=S;if(H[0]==0){e:if(!b.u){if(b.g)if(b.g.F+3e3<d.F)Fa(b),qa(b);else break e;El(b),at(18)}}else b.za=H[1],0<b.za-b.T&&37500>H[2]&&b.F&&b.v==0&&!b.C&&(b.C=wt(T(b.Za,b),6e3));if(1>=Ma(b.h)&&b.ca){try{b.ca()}catch{}b.ca=void 0}}else Kr(b,11)}else if((d.K||b.g==d)&&Fa(b),!X(_))for(H=b.Da.g.parse(_),_=0;_<H.length;_++){let ze=H[_];if(b.T=ze[0],ze=ze[1],b.G==2)if(ze[0]=="c"){b.K=ze[1],b.ia=ze[2];const Lt=ze[3];Lt!=null&&(b.la=Lt,b.j.info("VER="+b.la));const It=ze[4];It!=null&&(b.Aa=It,b.j.info("SVER="+b.Aa));const Qr=ze[5];Qr!=null&&typeof Qr=="number"&&0<Qr&&(S=1.5*Qr,b.L=S,b.j.info("backChannelRequestTimeoutMs_="+S)),S=b;const Gt=d.g;if(Gt){const br=Gt.g?Gt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(br){var W=S.h;W.g||br.indexOf("spdy")==-1&&br.indexOf("quic")==-1&&br.indexOf("h2")==-1||(W.j=W.l,W.g=new Set,W.h&&(ja(W,W.h),W.h=null))}if(S.D){const Tl=Gt.g?Gt.g.getResponseHeader("X-HTTP-Session-Id"):null;Tl&&(S.ya=Tl,Ze(S.I,S.D,Tl))}}b.G=3,b.l&&b.l.ua(),b.ba&&(b.R=Date.now()-d.F,b.j.info("Handshake RTT: "+b.R+"ms")),S=b;var le=d;if(S.qa=xc(S,S.J?S.ia:null,S.W),le.K){un(S.h,le);var Ue=le,Nt=S.L;Nt&&(Ue.I=Nt),Ue.B&&(Di(Ue),Ms(Ue)),S.g=le}else bc(S);0<b.i.length&&Ha(b)}else ze[0]!="stop"&&ze[0]!="close"||Kr(b,7);else b.G==3&&(ze[0]=="stop"||ze[0]=="close"?ze[0]=="stop"?Kr(b,7):_l(b):ze[0]!="noop"&&b.l&&b.l.ta(ze),b.v=0)}}Ci(4)}catch{}}var fc=class{constructor(d,_){this.g=d,this.map=_}};function qr(d){this.l=d||10,f.PerformanceNavigationTiming?(d=f.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Pa(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function Ma(d){return d.h?1:d.g?d.g.size:0}function dl(d,_){return d.h?d.h==_:d.g?d.g.has(_):!1}function ja(d,_){d.g?d.g.add(_):d.h=_}function un(d,_){d.h&&d.h==_?d.h=null:d.g&&d.g.has(_)&&d.g.delete(_)}qr.prototype.cancel=function(){if(this.i=hl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function hl(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let _=d.i;for(const b of d.g.values())_=_.concat(b.D);return _}return U(d.i)}function mf(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(m(d)){for(var _=[],b=d.length,S=0;S<b;S++)_.push(d[S]);return _}_=[],b=0;for(S in d)_[b++]=d[S];return _}function ka(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(m(d)||typeof d=="string"){var _=[];d=d.length;for(var b=0;b<d;b++)_.push(b);return _}_=[],b=0;for(const S in d)_[b++]=S;return _}}}function fl(d,_){if(d.forEach&&typeof d.forEach=="function")d.forEach(_,void 0);else if(m(d)||typeof d=="string")Array.prototype.forEach.call(d,_,void 0);else for(var b=ka(d),S=mf(d),H=S.length,W=0;W<H;W++)_.call(void 0,S[W],b&&b[W],d)}var ks=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function pf(d,_){if(d){d=d.split("&");for(var b=0;b<d.length;b++){var S=d[b].indexOf("="),H=null;if(0<=S){var W=d[b].substring(0,S);H=d[b].substring(S+1)}else W=d[b];_(W,H?decodeURIComponent(H.replace(/\+/g," ")):"")}}}function Tt(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof Tt){this.h=d.h,Vs(this,d.j),this.o=d.o,this.g=d.g,Oi(this,d.s),this.l=d.l;var _=d.i,b=new Fr;b.i=_.i,_.g&&(b.g=new Map(_.g),b.h=_.h),Hr(this,b),this.m=d.m}else d&&(_=String(d).match(ks))?(this.h=!1,Vs(this,_[1]||"",!0),this.o=kn(_[2]||""),this.g=kn(_[3]||"",!0),Oi(this,_[4]),this.l=kn(_[5]||"",!0),Hr(this,_[6]||"",!0),this.m=kn(_[7]||"")):(this.h=!1,this.i=new Fr(null,this.h))}Tt.prototype.toString=function(){var d=[],_=this.j;_&&d.push(Us(_,ml,!0),":");var b=this.g;return(b||_=="file")&&(d.push("//"),(_=this.o)&&d.push(Us(_,ml,!0),"@"),d.push(encodeURIComponent(String(b)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.s,b!=null&&d.push(":",String(b))),(b=this.l)&&(this.g&&b.charAt(0)!="/"&&d.push("/"),d.push(Us(b,b.charAt(0)=="/"?gf:pl,!0))),(b=this.i.toString())&&d.push("?",b),(b=this.m)&&d.push("#",Us(b,Va)),d.join("")};function Tn(d){return new Tt(d)}function Vs(d,_,b){d.j=b?kn(_,!0):_,d.j&&(d.j=d.j.replace(/:$/,""))}function Oi(d,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);d.s=_}else d.s=null}function Hr(d,_,b){_ instanceof Fr?(d.i=_,pc(d.i,d.h)):(b||(_=Us(_,yf)),d.i=new Fr(_,d.h))}function Ze(d,_,b){d.i.set(_,b)}function Ls(d){return Ze(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function kn(d,_){return d?_?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Us(d,_,b){return typeof d=="string"?(d=encodeURI(d).replace(_,mc),b&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function mc(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var ml=/[#\/\?@]/g,pl=/[#\?:]/g,gf=/[#\?]/g,yf=/[#\?@]/g,Va=/#/g;function Fr(d,_){this.h=this.g=null,this.i=d||null,this.j=!!_}function Vn(d){d.g||(d.g=new Map,d.h=0,d.i&&pf(d.i,function(_,b){d.add(decodeURIComponent(_.replace(/\+/g," ")),b)}))}n=Fr.prototype,n.add=function(d,_){Vn(this),this.i=null,d=mr(this,d);var b=this.g.get(d);return b||this.g.set(d,b=[]),b.push(_),this.h+=1,this};function Gr(d,_){Vn(d),_=mr(d,_),d.g.has(_)&&(d.i=null,d.h-=d.g.get(_).length,d.g.delete(_))}function $r(d,_){return Vn(d),_=mr(d,_),d.g.has(_)}n.forEach=function(d,_){Vn(this),this.g.forEach(function(b,S){b.forEach(function(H){d.call(_,H,S,this)},this)},this)},n.na=function(){Vn(this);const d=Array.from(this.g.values()),_=Array.from(this.g.keys()),b=[];for(let S=0;S<_.length;S++){const H=d[S];for(let W=0;W<H.length;W++)b.push(_[S])}return b},n.V=function(d){Vn(this);let _=[];if(typeof d=="string")$r(this,d)&&(_=_.concat(this.g.get(mr(this,d))));else{d=Array.from(this.g.values());for(let b=0;b<d.length;b++)_=_.concat(d[b])}return _},n.set=function(d,_){return Vn(this),this.i=null,d=mr(this,d),$r(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[_]),this.h+=1,this},n.get=function(d,_){return d?(d=this.V(d),0<d.length?String(d[0]):_):_};function gl(d,_,b){Gr(d,_),0<b.length&&(d.i=null,d.g.set(mr(d,_),U(b)),d.h+=b.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],_=Array.from(this.g.keys());for(var b=0;b<_.length;b++){var S=_[b];const W=encodeURIComponent(String(S)),le=this.V(S);for(S=0;S<le.length;S++){var H=W;le[S]!==""&&(H+="="+encodeURIComponent(String(le[S]))),d.push(H)}}return this.i=d.join("&")};function mr(d,_){return _=String(_),d.j&&(_=_.toLowerCase()),_}function pc(d,_){_&&!d.j&&(Vn(d),d.i=null,d.g.forEach(function(b,S){var H=S.toLowerCase();S!=H&&(Gr(this,S),gl(this,H,b))},d)),d.j=_}function zs(d,_){const b=new jn;if(f.Image){const S=new Image;S.onload=C(Ln,b,"TestLoadImage: loaded",!0,_,S),S.onerror=C(Ln,b,"TestLoadImage: error",!1,_,S),S.onabort=C(Ln,b,"TestLoadImage: abort",!1,_,S),S.ontimeout=C(Ln,b,"TestLoadImage: timeout",!1,_,S),f.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=d}else _(!1)}function Jn(d,_){const b=new jn,S=new AbortController,H=setTimeout(()=>{S.abort(),Ln(b,"TestPingServer: timeout",!1,_)},1e4);fetch(d,{signal:S.signal}).then(W=>{clearTimeout(H),W.ok?Ln(b,"TestPingServer: ok",!0,_):Ln(b,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(H),Ln(b,"TestPingServer: error",!1,_)})}function Ln(d,_,b,S,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),S(b)}catch{}}function Bs(){this.g=new Os}function pr(d,_,b){const S=b||"";try{fl(d,function(H,W){let le=H;g(H)&&(le=Wn(H)),_.push(S+W+"="+encodeURIComponent(le))})}catch(H){throw _.push(S+"type="+encodeURIComponent("_badmap")),H}}function Pi(d){this.l=d.Ub||null,this.j=d.eb||!1}A(Pi,il),Pi.prototype.g=function(){return new Yr(this.l,this.j)},Pi.prototype.i=function(d){return function(){return d}}({});function Yr(d,_){ft.call(this),this.D=d,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}A(Yr,ft),n=Yr.prototype,n.open=function(d,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=_,this.readyState=1,yr(this)},n.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(_.body=d),(this.D||f).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,gr(this)),this.readyState=0},n.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,yr(this)),this.g&&(this.readyState=3,yr(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;yl(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function yl(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}n.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var _=d.value?d.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!d.done}))&&(this.response=this.responseText+=_)}d.done?gr(this):yr(this),this.readyState==3&&yl(this)}},n.Ra=function(d){this.g&&(this.response=this.responseText=d,gr(this))},n.Qa=function(d){this.g&&(this.response=d,gr(this))},n.ga=function(){this.g&&gr(this)};function gr(d){d.readyState=4,d.l=null,d.j=null,d.v=null,yr(d)}n.setRequestHeader=function(d,_){this.u.append(d,_)},n.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],_=this.h.entries();for(var b=_.next();!b.done;)b=b.value,d.push(b[0]+": "+b[1]),b=_.next();return d.join(`\r
`)};function yr(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Yr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function vl(d){let _="";return ye(d,function(b,S){_+=S,_+=":",_+=b,_+=`\r
`}),_}function Vt(d,_,b){e:{for(S in b){var S=!1;break e}S=!0}S||(b=vl(b),typeof d=="string"?b!=null&&encodeURIComponent(String(b)):Ze(d,_,b))}function $e(d){ft.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}A($e,ft);var La=/^https?$/i,qs=["POST","PUT"];n=$e.prototype,n.Ha=function(d){this.J=d},n.ea=function(d,_,b,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);_=_?_.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():dr.g(),this.v=this.o?sl(this.o):sl(dr),this.g.onreadystatechange=T(this.Ea,this);try{this.B=!0,this.g.open(_,String(d),!0),this.B=!1}catch(W){gc(this,W);return}if(d=b||"",b=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var H in S)b.set(H,S[H]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const W of S.keys())b.set(W,S.get(W));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(b.keys()).find(W=>W.toLowerCase()=="content-type"),H=f.FormData&&d instanceof f.FormData,!(0<=Array.prototype.indexOf.call(qs,_,void 0))||S||H||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[W,le]of b)this.g.setRequestHeader(W,le);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Hs(this),this.u=!0,this.g.send(d),this.u=!1}catch(W){gc(this,W)}};function gc(d,_){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=_,d.m=5,Ua(d),vr(d)}function Ua(d){d.A||(d.A=!0,Ke(d,"complete"),Ke(d,"error"))}n.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,Ke(this,"complete"),Ke(this,"abort"),vr(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),vr(this,!0)),$e.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?za(this):this.bb())},n.bb=function(){za(this)};function za(d){if(d.h&&typeof c<"u"&&(!d.v[1]||Un(d)!=4||d.Z()!=2)){if(d.u&&Un(d)==4)Jt(d.Ea,0,d);else if(Ke(d,"readystatechange"),Un(d)==4){d.h=!1;try{const le=d.Z();e:switch(le){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var b;if(!(b=_)){var S;if(S=le===0){var H=String(d.D).match(ks)[1]||null;!H&&f.self&&f.self.location&&(H=f.self.location.protocol.slice(0,-1)),S=!La.test(H?H.toLowerCase():"")}b=S}if(b)Ke(d,"complete"),Ke(d,"success");else{d.m=6;try{var W=2<Un(d)?d.g.statusText:""}catch{W=""}d.l=W+" ["+d.Z()+"]",Ua(d)}}finally{vr(d)}}}}function vr(d,_){if(d.g){Hs(d);const b=d.g,S=d.v[0]?()=>{}:null;d.g=null,d.v=null,_||Ke(d,"ready");try{b.onreadystatechange=S}catch{}}}function Hs(d){d.I&&(f.clearTimeout(d.I),d.I=null)}n.isActive=function(){return!!this.g};function Un(d){return d.g?d.g.readyState:0}n.Z=function(){try{return 2<Un(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(d){if(this.g){var _=this.g.responseText;return d&&_.indexOf(d)==0&&(_=_.substring(d.length)),Ia(_)}};function yc(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function vf(d){const _={};d=(d.g&&2<=Un(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<d.length;S++){if(X(d[S]))continue;var b=L(d[S]);const H=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const W=_[H]||[];_[H]=W,W.push(b)}M(_,function(S){return S.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Fs(d,_,b){return b&&b.internalChannelParams&&b.internalChannelParams[d]||_}function Ba(d){this.Aa=0,this.i=[],this.j=new jn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Fs("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Fs("baseRetryDelayMs",5e3,d),this.cb=Fs("retryDelaySeedMs",1e4,d),this.Wa=Fs("forwardChannelMaxRetries",2,d),this.wa=Fs("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new qr(d&&d.concurrentRequestLimit),this.Da=new Bs,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Ba.prototype,n.la=8,n.G=1,n.connect=function(d,_,b,S){at(0),this.W=d,this.H=_||{},b&&S!==void 0&&(this.H.OSID=b,this.H.OAID=S),this.F=this.X,this.I=xc(this,null,this.W),Ha(this)};function _l(d){if(vc(d),d.G==3){var _=d.U++,b=Tn(d.I);if(Ze(b,"SID",d.K),Ze(b,"RID",_),Ze(b,"TYPE","terminate"),Gs(d,b),_=new ln(d,d.j,_),_.L=2,_.v=Ls(Tn(b)),b=!1,f.navigator&&f.navigator.sendBeacon)try{b=f.navigator.sendBeacon(_.v.toString(),"")}catch{}!b&&f.Image&&(new Image().src=_.v,b=!0),b||(_.g=Sc(_.j,null),_.g.ea(_.v)),_.F=Date.now(),Ms(_)}Tc(d)}function qa(d){d.g&&($s(d),d.g.cancel(),d.g=null)}function vc(d){qa(d),d.u&&(f.clearTimeout(d.u),d.u=null),Fa(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&f.clearTimeout(d.s),d.s=null)}function Ha(d){if(!Pa(d.h)&&!d.s){d.s=!0;var _=d.Ga;ae||P(),me||(ae(),me=!0),ge.add(_,d),d.B=0}}function _f(d,_){return Ma(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=_.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=wt(T(d.Ga,d,_),wl(d,d.B)),d.B++,!0)}n.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;const H=new ln(this,this.j,d);let W=this.o;if(this.S&&(W?(W=R(W),j(W,this.S)):W=this.S),this.m!==null||this.O||(H.H=W,W=null),this.P)e:{for(var _=0,b=0;b<this.i.length;b++){t:{var S=this.i[b];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(_+=S,4096<_){_=b;break e}if(_===4096||b===this.i.length-1){_=b+1;break e}}_=1e3}else _=1e3;_=_c(this,H,_),b=Tn(this.I),Ze(b,"RID",d),Ze(b,"CVER",22),this.D&&Ze(b,"X-HTTP-Session-Id",this.D),Gs(this,b),W&&(this.O?_="headers="+encodeURIComponent(String(vl(W)))+"&"+_:this.m&&Vt(b,this.m,W)),ja(this.h,H),this.Ua&&Ze(b,"TYPE","init"),this.P?(Ze(b,"$req",_),Ze(b,"SID","null"),H.T=!0,Zn(H,b,null)):Zn(H,b,_),this.G=2}}else this.G==3&&(d?bl(this,d):this.i.length==0||Pa(this.h)||bl(this))};function bl(d,_){var b;_?b=_.l:b=d.U++;const S=Tn(d.I);Ze(S,"SID",d.K),Ze(S,"RID",b),Ze(S,"AID",d.T),Gs(d,S),d.m&&d.o&&Vt(S,d.m,d.o),b=new ln(d,d.j,b,d.B+1),d.m===null&&(b.H=d.o),_&&(d.i=_.D.concat(d.i)),_=_c(d,b,1e3),b.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),ja(d.h,b),Zn(b,S,_)}function Gs(d,_){d.H&&ye(d.H,function(b,S){Ze(_,S,b)}),d.l&&fl({},function(b,S){Ze(_,S,b)})}function _c(d,_,b){b=Math.min(d.i.length,b);var S=d.l?T(d.l.Na,d.l,d):null;e:{var H=d.i;let W=-1;for(;;){const le=["count="+b];W==-1?0<b?(W=H[0].g,le.push("ofs="+W)):W=0:le.push("ofs="+W);let Ue=!0;for(let Nt=0;Nt<b;Nt++){let ze=H[Nt].g;const Lt=H[Nt].map;if(ze-=W,0>ze)W=Math.max(0,H[Nt].g-100),Ue=!1;else try{pr(Lt,le,"req"+ze+"_")}catch{S&&S(Lt)}}if(Ue){S=le.join("&");break e}}}return d=d.i.splice(0,b),_.D=d,S}function bc(d){if(!d.g&&!d.u){d.Y=1;var _=d.Fa;ae||P(),me||(ae(),me=!0),ge.add(_,d),d.v=0}}function El(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=wt(T(d.Fa,d),wl(d,d.v)),d.v++,!0)}n.Fa=function(){if(this.u=null,Ec(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=wt(T(this.ab,this),d)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,at(10),qa(this),Ec(this))};function $s(d){d.A!=null&&(f.clearTimeout(d.A),d.A=null)}function Ec(d){d.g=new ln(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var _=Tn(d.qa);Ze(_,"RID","rpc"),Ze(_,"SID",d.K),Ze(_,"AID",d.T),Ze(_,"CI",d.F?"0":"1"),!d.F&&d.ja&&Ze(_,"TO",d.ja),Ze(_,"TYPE","xmlhttp"),Gs(d,_),d.m&&d.o&&Vt(_,d.m,d.o),d.L&&(d.g.I=d.L);var b=d.g;d=d.ia,b.L=1,b.v=Ls(Tn(_)),b.m=null,b.P=!0,Br(b,d)}n.Za=function(){this.C!=null&&(this.C=null,qa(this),El(this),at(19))};function Fa(d){d.C!=null&&(f.clearTimeout(d.C),d.C=null)}function wc(d,_){var b=null;if(d.g==_){Fa(d),$s(d),d.g=null;var S=2}else if(dl(d.h,_))b=_.D,un(d.h,_),S=1;else return;if(d.G!=0){if(_.o)if(S==1){b=_.m?_.m.length:0,_=Date.now()-_.F;var H=d.B;S=Ri(),Ke(S,new Ct(S,b)),Ha(d)}else bc(d);else if(H=_.s,H==3||H==0&&0<_.X||!(S==1&&_f(d,_)||S==2&&El(d)))switch(b&&0<b.length&&(_=d.h,_.i=_.i.concat(b)),H){case 1:Kr(d,5);break;case 4:Kr(d,10);break;case 3:Kr(d,6);break;default:Kr(d,2)}}}function wl(d,_){let b=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(b*=2),b*_}function Kr(d,_){if(d.j.info("Error code "+_),_==2){var b=T(d.fb,d),S=d.Xa;const H=!S;S=new Tt(S||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||Vs(S,"https"),Ls(S),H?zs(S.toString(),b):Jn(S.toString(),b)}else at(2);d.G=0,d.l&&d.l.sa(_),Tc(d),vc(d)}n.fb=function(d){d?(this.j.info("Successfully pinged google.com"),at(2)):(this.j.info("Failed to ping google.com"),at(1))};function Tc(d){if(d.G=0,d.ka=[],d.l){const _=hl(d.h);(_.length!=0||d.i.length!=0)&&(I(d.ka,_),I(d.ka,d.i),d.h.i.length=0,U(d.i),d.i.length=0),d.l.ra()}}function xc(d,_,b){var S=b instanceof Tt?Tn(b):new Tt(b);if(S.g!="")_&&(S.g=_+"."+S.g),Oi(S,S.s);else{var H=f.location;S=H.protocol,_=_?_+"."+H.hostname:H.hostname,H=+H.port;var W=new Tt(null);S&&Vs(W,S),_&&(W.g=_),H&&Oi(W,H),b&&(W.l=b),S=W}return b=d.D,_=d.ya,b&&_&&Ze(S,b,_),Ze(S,"VER",d.la),Gs(d,S),S}function Sc(d,_,b){if(_&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return _=d.Ca&&!d.pa?new $e(new Pi({eb:b})):new $e(d.pa),_.Ha(d.J),_}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ac(){}n=Ac.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Ga(){}Ga.prototype.g=function(d,_){return new cn(d,_)};function cn(d,_){ft.call(this),this.g=new Ba(_),this.l=d,this.h=_&&_.messageUrlParams||null,d=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(d?d["X-WebChannel-Content-Type"]=_.messageContentType:d={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(d?d["X-WebChannel-Client-Profile"]=_.va:d={"X-WebChannel-Client-Profile":_.va}),this.g.S=d,(d=_&&_.Sb)&&!X(d)&&(this.g.m=d),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!X(_)&&(this.g.D=_,d=this.h,d!==null&&_ in d&&(d=this.h,_ in d&&delete d[_])),this.j=new _r(this)}A(cn,ft),cn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},cn.prototype.close=function(){_l(this.g)},cn.prototype.o=function(d){var _=this.g;if(typeof d=="string"){var b={};b.__data__=d,d=b}else this.u&&(b={},b.__data__=Wn(d),d=b);_.i.push(new fc(_.Ya++,d)),_.G==3&&Ha(_)},cn.prototype.N=function(){this.g.l=null,delete this.j,_l(this.g),delete this.g,cn.aa.N.call(this)};function Rc(d){Ur.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var _=d.__sm__;if(_){e:{for(const b in _){d=b;break e}d=void 0}(this.i=d)&&(d=this.i,_=_!==null&&d in _?_[d]:void 0),this.data=_}else this.data=d}A(Rc,Ur);function Cc(){ol.call(this),this.status=1}A(Cc,ol);function _r(d){this.g=d}A(_r,Ac),_r.prototype.ua=function(){Ke(this.g,"a")},_r.prototype.ta=function(d){Ke(this.g,new Rc(d))},_r.prototype.sa=function(d){Ke(this.g,new Cc)},_r.prototype.ra=function(){Ke(this.g,"b")},Ga.prototype.createWebChannel=Ga.prototype.g,cn.prototype.send=cn.prototype.o,cn.prototype.open=cn.prototype.m,cn.prototype.close=cn.prototype.close,dw=function(){return new Ga},cw=function(){return Ri()},uw=cr,Gp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ii.NO_ERROR=0,Ii.TIMEOUT=8,Ii.HTTP_ERROR=6,Hd=Ii,zr.COMPLETE="complete",lw=zr,al.EventType=Lr,Lr.OPEN="a",Lr.CLOSE="b",Lr.ERROR="c",Lr.MESSAGE="d",ft.prototype.listen=ft.prototype.K,yu=al,$e.prototype.listenOnce=$e.prototype.L,$e.prototype.getLastError=$e.prototype.Ka,$e.prototype.getLastErrorCode=$e.prototype.Ba,$e.prototype.getStatus=$e.prototype.Z,$e.prototype.getResponseJson=$e.prototype.Oa,$e.prototype.getResponseText=$e.prototype.oa,$e.prototype.send=$e.prototype.ea,$e.prototype.setWithCredentials=$e.prototype.Ha,ow=$e}).apply(typeof Dd<"u"?Dd:typeof self<"u"?self:typeof window<"u"?window:{});const Ab="@firebase/firestore",Rb="4.7.14";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}rn.UNAUTHENTICATED=new rn(null),rn.GOOGLE_CREDENTIALS=new rn("google-credentials-uid"),rn.FIRST_PARTY=new rn("first-party-uid"),rn.MOCK_USER=new rn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yo="11.7.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ba=new Tg("@firebase/firestore");function wo(){return ba.logLevel}function fe(n,...e){if(ba.logLevel<=Ve.DEBUG){const t=e.map(jg);ba.debug(`Firestore (${Yo}): ${n}`,...t)}}function vi(n,...e){if(ba.logLevel<=Ve.ERROR){const t=e.map(jg);ba.error(`Firestore (${Yo}): ${n}`,...t)}}function Mo(n,...e){if(ba.logLevel<=Ve.WARN){const t=e.map(jg);ba.warn(`Firestore (${Yo}): ${n}`,...t)}}function jg(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xe(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,hw(n,i,t)}function hw(n,e,t){let i=`FIRESTORE (${Yo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw vi(i),new Error(i)}function Ye(n,e,t,i){let a="Unexpected state";typeof t=="string"?a=t:i=t,n||hw(e,a,i)}function Ce(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ne={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class he extends Ti{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fw{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class UI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(rn.UNAUTHENTICATED))}shutdown(){}}class zI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class BI{constructor(e){this.t=e,this.currentUser=rn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ye(this.o===void 0,42304);let i=this.i;const a=m=>this.i!==i?(i=this.i,t(m)):Promise.resolve();let l=new fi;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new fi,e.enqueueRetryable(()=>a(this.currentUser))};const c=()=>{const m=l;e.enqueueRetryable(async()=>{await m.promise,await a(this.currentUser)})},f=m=>{fe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(m=>f(m)),setTimeout(()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?f(m):(fe("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new fi)}},0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(fe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Ye(typeof i.accessToken=="string",31837,{l:i}),new fw(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ye(e===null||typeof e=="string",2055,{h:e}),new rn(e)}}class qI{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=rn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class HI{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new qI(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(rn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Cb{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class FI{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Yn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ye(this.o===void 0,3512);const i=l=>{l.error!=null&&fe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,fe("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>i(l))};const a=l=>{fe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(l=>a(l)),setTimeout(()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):fe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Cb(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ye(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Cb(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GI(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mw(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pw{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const a=GI(40);for(let l=0;l<a.length;++l)i.length<20&&a[l]<t&&(i+=e.charAt(a[l]%62))}return i}}function Oe(n,e){return n<e?-1:n>e?1:0}function $p(n,e){let t=0;for(;t<n.length&&t<e.length;){const i=n.codePointAt(t),a=e.codePointAt(t);if(i!==a){if(i<128&&a<128)return Oe(i,a);{const l=mw(),c=$I(l.encode(Nb(n,t)),l.encode(Nb(e,t)));return c!==0?c:Oe(i,a)}}t+=i>65535?2:1}return Oe(n.length,e.length)}function Nb(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function $I(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return Oe(n[t],e[t]);return Oe(n.length,e.length)}function jo(n,e,t){return n.length===e.length&&n.every((i,a)=>t(i,e[a]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ib=-62135596800,Db=1e6;class Pt{static now(){return Pt.fromMillis(Date.now())}static fromDate(e){return Pt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*Db);return new Pt(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new he(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new he(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Ib)throw new he(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new he(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Db}_compareTo(e){return this.seconds===e.seconds?Oe(this.nanoseconds,e.nanoseconds):Oe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-Ib;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{static fromTimestamp(e){return new Re(e)}static min(){return new Re(new Pt(0,0))}static max(){return new Re(new Pt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ob="__name__";class Rr{constructor(e,t,i){t===void 0?t=0:t>e.length&&xe(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&xe(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Rr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Rr?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let a=0;a<i;a++){const l=Rr.compareSegments(e.get(a),t.get(a));if(l!==0)return l}return Oe(e.length,t.length)}static compareSegments(e,t){const i=Rr.isNumericId(e),a=Rr.isNumericId(t);return i&&!a?-1:!i&&a?1:i&&a?Rr.extractNumericId(e).compare(Rr.extractNumericId(t)):$p(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ds.fromString(e.substring(4,e.length-2))}}class st extends Rr{construct(e,t,i){return new st(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new he(ne.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(a=>a.length>0))}return new st(t)}static emptyPath(){return new st([])}}const YI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Wt extends Rr{construct(e,t,i){return new Wt(e,t,i)}static isValidIdentifier(e){return YI.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Wt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Ob}static keyField(){return new Wt([Ob])}static fromServerFormat(e){const t=[];let i="",a=0;const l=()=>{if(i.length===0)throw new he(ne.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let c=!1;for(;a<e.length;){const f=e[a];if(f==="\\"){if(a+1===e.length)throw new he(ne.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[a+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new he(ne.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=m,a+=2}else f==="`"?(c=!c,a++):f!=="."||c?(i+=f,a++):(l(),a++)}if(l(),c)throw new he(ne.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Wt(t)}static emptyPath(){return new Wt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e{constructor(e){this.path=e}static fromPath(e){return new _e(st.fromString(e))}static fromName(e){return new _e(st.fromString(e).popFirst(5))}static empty(){return new _e(st.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&st.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return st.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new _e(new st(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Du=-1;function KI(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,a=Re.fromTimestamp(i===1e9?new Pt(t+1,0):new Pt(t,i));return new fs(a,_e.empty(),e)}function QI(n){return new fs(n.readTime,n.key,Du)}class fs{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new fs(Re.min(),_e.empty(),Du)}static max(){return new fs(Re.max(),_e.empty(),Du)}}function XI(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=_e.comparator(n.documentKey,e.documentKey),t!==0?t:Oe(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ZI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ko(n){if(n.code!==ne.FAILED_PRECONDITION||n.message!==WI)throw n;fe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&xe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ie((i,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,a)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ie?t:ie.resolve(t)}catch(t){return ie.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ie.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ie.reject(t)}static resolve(e){return new ie((t,i)=>{t(e)})}static reject(e){return new ie((t,i)=>{i(e)})}static waitFor(e){return new ie((t,i)=>{let a=0,l=0,c=!1;e.forEach(f=>{++a,f.next(()=>{++l,c&&l===a&&t()},m=>i(m))}),c=!0,l===a&&t()})}static or(e){let t=ie.resolve(!1);for(const i of e)t=t.next(a=>a?ie.resolve(a):i());return t}static forEach(e,t){const i=[];return e.forEach((a,l)=>{i.push(t.call(this,a,l))}),this.waitFor(i)}static mapArray(e,t){return new ie((i,a)=>{const l=e.length,c=new Array(l);let f=0;for(let m=0;m<l;m++){const g=m;t(e[g]).next(v=>{c[g]=v,++f,f===l&&i(c)},v=>a(v))}})}static doWhile(e,t){return new ie((i,a)=>{const l=()=>{e()===!0?t().next(()=>{l()},a):i()};l()})}}function JI(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Qo(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mh{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ue(i),this.ce=i=>t.writeSequenceNumber(i))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}Mh.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kg=-1;function jh(n){return n==null}function uh(n){return n===0&&1/n==-1/0}function eD(n){return typeof n=="number"&&Number.isInteger(n)&&!uh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gw="";function tD(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Pb(e)),e=nD(n.get(t),e);return Pb(e)}function nD(n,e){let t=e;const i=n.length;for(let a=0;a<i;a++){const l=n.charAt(a);switch(l){case"\0":t+="";break;case gw:t+="";break;default:t+=l}}return t}function Pb(n){return n+gw+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mb(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ws(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function yw(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e,t){this.comparator=e,this.root=t||Xt.EMPTY}insert(e,t){return new ht(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Xt.BLACK,null,null))}remove(e){return new ht(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Xt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const a=this.comparator(e,i.key);if(a===0)return t+i.left.size;a<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Od(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Od(this.root,e,this.comparator,!1)}getReverseIterator(){return new Od(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Od(this.root,e,this.comparator,!0)}}class Od{constructor(e,t,i,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Xt{constructor(e,t,i,a,l){this.key=e,this.value=t,this.color=i??Xt.RED,this.left=a??Xt.EMPTY,this.right=l??Xt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,a,l){return new Xt(e??this.key,t??this.value,i??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let a=this;const l=i(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,i),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,i)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Xt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return Xt.EMPTY;i=a.right.min(),a=a.copy(i.key,i.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Xt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Xt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw xe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw xe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw xe(27949);return e+(this.isRed()?0:1)}}Xt.EMPTY=null,Xt.RED=!0,Xt.BLACK=!1;Xt.EMPTY=new class{constructor(){this.size=0}get key(){throw xe(57766)}get value(){throw xe(16141)}get color(){throw xe(16727)}get left(){throw xe(29726)}get right(){throw xe(36894)}copy(e,t,i,a,l){return this}insert(e,t,i){return new Xt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e){this.comparator=e,this.data=new ht(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const a=i.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new jb(this.data.getIterator())}getIteratorFrom(e){return new jb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof Mt)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=i.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Mt(this.comparator);return t.data=e,t}}class jb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e){this.fields=e,e.sort(Wt.comparator)}static empty(){return new Dn([])}unionWith(e){let t=new Mt(Wt.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Dn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return jo(this.fields,e.fields,(t,i)=>t.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new vw("Invalid base64 string: "+l):l}}(e);return new Zt(t)}static fromUint8Array(e){const t=function(a){let l="";for(let c=0;c<a.length;++c)l+=String.fromCharCode(a[c]);return l}(e);return new Zt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const i=new Uint8Array(t.length);for(let a=0;a<t.length;a++)i[a]=t.charCodeAt(a);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Oe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Zt.EMPTY_BYTE_STRING=new Zt("");const rD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ms(n){if(Ye(!!n,39018),typeof n=="string"){let e=0;const t=rD.exec(n);if(Ye(!!t,46558,{timestamp:n}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Et(n.seconds),nanos:Et(n.nanos)}}function Et(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ps(n){return typeof n=="string"?Zt.fromBase64String(n):Zt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _w="server_timestamp",bw="__type__",Ew="__previous_value__",ww="__local_write_time__";function Vg(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[bw])===null||t===void 0?void 0:t.stringValue)===_w}function kh(n){const e=n.mapValue.fields[Ew];return Vg(e)?kh(e):e}function Ou(n){const e=ms(n.mapValue.fields[ww].timestampValue);return new Pt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iD{constructor(e,t,i,a,l,c,f,m,g,v){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=a,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=f,this.longPollingOptions=m,this.useFetchStreams=g,this.isUsingEmulator=v}}const ch="(default)";class Pu{constructor(e,t){this.projectId=e,this.database=t||ch}static empty(){return new Pu("","")}get isDefaultDatabase(){return this.database===ch}isEqual(e){return e instanceof Pu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tw="__type__",sD="__max__",Pd={mapValue:{}},xw="__vector__",dh="value";function gs(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Vg(n)?4:oD(n)?9007199254740991:aD(n)?10:11:xe(28295,{value:n})}function Mr(n,e){if(n===e)return!0;const t=gs(n);if(t!==gs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Ou(n).isEqual(Ou(e));case 3:return function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const c=ms(a.timestampValue),f=ms(l.timestampValue);return c.seconds===f.seconds&&c.nanos===f.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(a,l){return ps(a.bytesValue).isEqual(ps(l.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(a,l){return Et(a.geoPointValue.latitude)===Et(l.geoPointValue.latitude)&&Et(a.geoPointValue.longitude)===Et(l.geoPointValue.longitude)}(n,e);case 2:return function(a,l){if("integerValue"in a&&"integerValue"in l)return Et(a.integerValue)===Et(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const c=Et(a.doubleValue),f=Et(l.doubleValue);return c===f?uh(c)===uh(f):isNaN(c)&&isNaN(f)}return!1}(n,e);case 9:return jo(n.arrayValue.values||[],e.arrayValue.values||[],Mr);case 10:case 11:return function(a,l){const c=a.mapValue.fields||{},f=l.mapValue.fields||{};if(Mb(c)!==Mb(f))return!1;for(const m in c)if(c.hasOwnProperty(m)&&(f[m]===void 0||!Mr(c[m],f[m])))return!1;return!0}(n,e);default:return xe(52216,{left:n})}}function Mu(n,e){return(n.values||[]).find(t=>Mr(t,e))!==void 0}function ko(n,e){if(n===e)return 0;const t=gs(n),i=gs(e);if(t!==i)return Oe(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Oe(n.booleanValue,e.booleanValue);case 2:return function(l,c){const f=Et(l.integerValue||l.doubleValue),m=Et(c.integerValue||c.doubleValue);return f<m?-1:f>m?1:f===m?0:isNaN(f)?isNaN(m)?0:-1:1}(n,e);case 3:return kb(n.timestampValue,e.timestampValue);case 4:return kb(Ou(n),Ou(e));case 5:return $p(n.stringValue,e.stringValue);case 6:return function(l,c){const f=ps(l),m=ps(c);return f.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(l,c){const f=l.split("/"),m=c.split("/");for(let g=0;g<f.length&&g<m.length;g++){const v=Oe(f[g],m[g]);if(v!==0)return v}return Oe(f.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(l,c){const f=Oe(Et(l.latitude),Et(c.latitude));return f!==0?f:Oe(Et(l.longitude),Et(c.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return Vb(n.arrayValue,e.arrayValue);case 10:return function(l,c){var f,m,g,v;const w=l.fields||{},T=c.fields||{},C=(f=w[dh])===null||f===void 0?void 0:f.arrayValue,A=(m=T[dh])===null||m===void 0?void 0:m.arrayValue,U=Oe(((g=C==null?void 0:C.values)===null||g===void 0?void 0:g.length)||0,((v=A==null?void 0:A.values)===null||v===void 0?void 0:v.length)||0);return U!==0?U:Vb(C,A)}(n.mapValue,e.mapValue);case 11:return function(l,c){if(l===Pd.mapValue&&c===Pd.mapValue)return 0;if(l===Pd.mapValue)return 1;if(c===Pd.mapValue)return-1;const f=l.fields||{},m=Object.keys(f),g=c.fields||{},v=Object.keys(g);m.sort(),v.sort();for(let w=0;w<m.length&&w<v.length;++w){const T=$p(m[w],v[w]);if(T!==0)return T;const C=ko(f[m[w]],g[v[w]]);if(C!==0)return C}return Oe(m.length,v.length)}(n.mapValue,e.mapValue);default:throw xe(23264,{Pe:t})}}function kb(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Oe(n,e);const t=ms(n),i=ms(e),a=Oe(t.seconds,i.seconds);return a!==0?a:Oe(t.nanos,i.nanos)}function Vb(n,e){const t=n.values||[],i=e.values||[];for(let a=0;a<t.length&&a<i.length;++a){const l=ko(t[a],i[a]);if(l)return l}return Oe(t.length,i.length)}function Vo(n){return Yp(n)}function Yp(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const i=ms(t);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return ps(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return _e.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let i="[",a=!0;for(const l of t.values||[])a?a=!1:i+=",",i+=Yp(l);return i+"]"}(n.arrayValue):"mapValue"in n?function(t){const i=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const c of i)l?l=!1:a+=",",a+=`${c}:${Yp(t.fields[c])}`;return a+"}"}(n.mapValue):xe(61005,{value:n})}function Fd(n){switch(gs(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=kh(n);return e?16+Fd(e):16;case 5:return 2*n.stringValue.length;case 6:return ps(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((a,l)=>a+Fd(l),0)}(n.arrayValue);case 10:case 11:return function(i){let a=0;return ws(i.fields,(l,c)=>{a+=l.length+Fd(c)}),a}(n.mapValue);default:throw xe(13486,{value:n})}}function Lb(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Kp(n){return!!n&&"integerValue"in n}function Lg(n){return!!n&&"arrayValue"in n}function Ub(n){return!!n&&"nullValue"in n}function zb(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Gd(n){return!!n&&"mapValue"in n}function aD(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[Tw])===null||t===void 0?void 0:t.stringValue)===xw}function Tu(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return ws(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=Tu(i)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Tu(n.arrayValue.values[t]);return e}return Object.assign({},n)}function oD(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===sD}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e){this.value=e}static empty(){return new _n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Gd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Tu(t)}setAll(e){let t=Wt.emptyPath(),i={},a=[];e.forEach((c,f)=>{if(!t.isImmediateParentOf(f)){const m=this.getFieldsMap(t);this.applyChanges(m,i,a),i={},a=[],t=f.popLast()}c?i[f.lastSegment()]=Tu(c):a.push(f.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,i,a)}delete(e){const t=this.field(e.popLast());Gd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Mr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let a=t.mapValue.fields[e.get(i)];Gd(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,i){ws(t,(a,l)=>e[a]=l);for(const a of i)delete e[a]}clone(){return new _n(Tu(this.value))}}function Sw(n){const e=[];return ws(n.fields,(t,i)=>{const a=new Wt([t]);if(Gd(i)){const l=Sw(i.mapValue).fields;if(l.length===0)e.push(a);else for(const c of l)e.push(a.child(c))}else e.push(a)}),new Dn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e,t,i,a,l,c,f){this.key=e,this.documentType=t,this.version=i,this.readTime=a,this.createTime=l,this.data=c,this.documentState=f}static newInvalidDocument(e){return new sn(e,0,Re.min(),Re.min(),Re.min(),_n.empty(),0)}static newFoundDocument(e,t,i,a){return new sn(e,1,t,Re.min(),i,a,0)}static newNoDocument(e,t){return new sn(e,2,t,Re.min(),Re.min(),_n.empty(),0)}static newUnknownDocument(e,t){return new sn(e,3,t,Re.min(),Re.min(),_n.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=_n.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=_n.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof sn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new sn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hh{constructor(e,t){this.position=e,this.inclusive=t}}function Bb(n,e,t){let i=0;for(let a=0;a<n.position.length;a++){const l=e[a],c=n.position[a];if(l.field.isKeyField()?i=_e.comparator(_e.fromName(c.referenceValue),t.key):i=ko(c,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function qb(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Mr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju{constructor(e,t="asc"){this.field=e,this.dir=t}}function lD(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aw{}class Rt extends Aw{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new cD(e,t,i):t==="array-contains"?new fD(e,i):t==="in"?new mD(e,i):t==="not-in"?new pD(e,i):t==="array-contains-any"?new gD(e,i):new Rt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new dD(e,i):new hD(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(ko(t,this.value)):t!==null&&gs(this.value)===gs(t)&&this.matchesComparison(ko(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return xe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ar extends Aw{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new ar(e,t)}matches(e){return Rw(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function Rw(n){return n.op==="and"}function Cw(n){return uD(n)&&Rw(n)}function uD(n){for(const e of n.filters)if(e instanceof ar)return!1;return!0}function Qp(n){if(n instanceof Rt)return n.field.canonicalString()+n.op.toString()+Vo(n.value);if(Cw(n))return n.filters.map(e=>Qp(e)).join(",");{const e=n.filters.map(t=>Qp(t)).join(",");return`${n.op}(${e})`}}function Nw(n,e){return n instanceof Rt?function(i,a){return a instanceof Rt&&i.op===a.op&&i.field.isEqual(a.field)&&Mr(i.value,a.value)}(n,e):n instanceof ar?function(i,a){return a instanceof ar&&i.op===a.op&&i.filters.length===a.filters.length?i.filters.reduce((l,c,f)=>l&&Nw(c,a.filters[f]),!0):!1}(n,e):void xe(19439)}function Iw(n){return n instanceof Rt?function(t){return`${t.field.canonicalString()} ${t.op} ${Vo(t.value)}`}(n):n instanceof ar?function(t){return t.op.toString()+" {"+t.getFilters().map(Iw).join(" ,")+"}"}(n):"Filter"}class cD extends Rt{constructor(e,t,i){super(e,t,i),this.key=_e.fromName(i.referenceValue)}matches(e){const t=_e.comparator(e.key,this.key);return this.matchesComparison(t)}}class dD extends Rt{constructor(e,t){super(e,"in",t),this.keys=Dw("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class hD extends Rt{constructor(e,t){super(e,"not-in",t),this.keys=Dw("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Dw(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(i=>_e.fromName(i.referenceValue))}class fD extends Rt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Lg(t)&&Mu(t.arrayValue,this.value)}}class mD extends Rt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Mu(this.value.arrayValue,t)}}class pD extends Rt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Mu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Mu(this.value.arrayValue,t)}}class gD extends Rt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Lg(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>Mu(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yD{constructor(e,t=null,i=[],a=[],l=null,c=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=a,this.limit=l,this.startAt=c,this.endAt=f,this.Ie=null}}function Hb(n,e=null,t=[],i=[],a=null,l=null,c=null){return new yD(n,e,t,i,a,l,c)}function Ug(n){const e=Ce(n);if(e.Ie===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>Qp(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>function(l){return l.field.canonicalString()+l.dir}(i)).join(","),jh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>Vo(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>Vo(i)).join(",")),e.Ie=t}return e.Ie}function zg(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!lD(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Nw(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!qb(n.startAt,e.startAt)&&qb(n.endAt,e.endAt)}function Xp(n){return _e.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(e,t=null,i=[],a=[],l=null,c="F",f=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=a,this.limit=l,this.limitType=c,this.startAt=f,this.endAt=m,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function vD(n,e,t,i,a,l,c,f){return new Xo(n,e,t,i,a,l,c,f)}function Bg(n){return new Xo(n)}function Fb(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Ow(n){return n.collectionGroup!==null}function xu(n){const e=Ce(n);if(e.Ee===null){e.Ee=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ee.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let f=new Mt(Wt.comparator);return c.filters.forEach(m=>{m.getFlattenedFilters().forEach(g=>{g.isInequality()&&(f=f.add(g.field))})}),f})(e).forEach(l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ee.push(new ju(l,i))}),t.has(Wt.keyField().canonicalString())||e.Ee.push(new ju(Wt.keyField(),i))}return e.Ee}function Or(n){const e=Ce(n);return e.de||(e.de=_D(e,xu(n))),e.de}function _D(n,e){if(n.limitType==="F")return Hb(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(a=>{const l=a.dir==="desc"?"asc":"desc";return new ju(a.field,l)});const t=n.endAt?new hh(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new hh(n.startAt.position,n.startAt.inclusive):null;return Hb(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function Wp(n,e){const t=n.filters.concat([e]);return new Xo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function fh(n,e,t){return new Xo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Vh(n,e){return zg(Or(n),Or(e))&&n.limitType===e.limitType}function Pw(n){return`${Ug(Or(n))}|lt:${n.limitType}`}function To(n){return`Query(target=${function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map(a=>Iw(a)).join(", ")}]`),jh(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map(a=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(a)).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(a=>Vo(a)).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(a=>Vo(a)).join(",")),`Target(${i})`}(Or(n))}; limitType=${n.limitType})`}function Lh(n,e){return e.isFoundDocument()&&function(i,a){const l=a.key.path;return i.collectionGroup!==null?a.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):_e.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)}(n,e)&&function(i,a){for(const l of xu(i))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0}(n,e)&&function(i,a){for(const l of i.filters)if(!l.matches(a))return!1;return!0}(n,e)&&function(i,a){return!(i.startAt&&!function(c,f,m){const g=Bb(c,f,m);return c.inclusive?g<=0:g<0}(i.startAt,xu(i),a)||i.endAt&&!function(c,f,m){const g=Bb(c,f,m);return c.inclusive?g>=0:g>0}(i.endAt,xu(i),a))}(n,e)}function bD(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Mw(n){return(e,t)=>{let i=!1;for(const a of xu(n)){const l=ED(a,e,t);if(l!==0)return l;i=i||a.field.isKeyField()}return 0}}function ED(n,e,t){const i=n.field.isKeyField()?_e.comparator(e.key,t.key):function(l,c,f){const m=c.data.field(l),g=f.data.field(l);return m!==null&&g!==null?ko(m,g):xe(42886)}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return xe(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[a,l]of i)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),a=this.inner[i];if(a===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return i.length===1?delete this.inner[t]:i.splice(a,1),this.innerSize--,!0;return!1}forEach(e){ws(this.inner,(t,i)=>{for(const[a,l]of i)e(a,l)})}isEmpty(){return yw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wD=new ht(_e.comparator);function _i(){return wD}const jw=new ht(_e.comparator);function vu(...n){let e=jw;for(const t of n)e=e.insert(t.key,t);return e}function kw(n){let e=jw;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function da(){return Su()}function Vw(){return Su()}function Su(){return new Sa(n=>n.toString(),(n,e)=>n.isEqual(e))}const TD=new ht(_e.comparator),xD=new Mt(_e.comparator);function Le(...n){let e=xD;for(const t of n)e=e.add(t);return e}const SD=new Mt(Oe);function AD(){return SD}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qg(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:uh(e)?"-0":e}}function Lw(n){return{integerValue:""+n}}function RD(n,e){return eD(e)?Lw(e):qg(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uh{constructor(){this._=void 0}}function CD(n,e,t){return n instanceof ku?function(a,l){const c={fields:{[bw]:{stringValue:_w},[ww]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&Vg(l)&&(l=kh(l)),l&&(c.fields[Ew]=l),{mapValue:c}}(t,e):n instanceof Vu?zw(n,e):n instanceof Lu?Bw(n,e):function(a,l){const c=Uw(a,l),f=Gb(c)+Gb(a.Re);return Kp(c)&&Kp(a.Re)?Lw(f):qg(a.serializer,f)}(n,e)}function ND(n,e,t){return n instanceof Vu?zw(n,e):n instanceof Lu?Bw(n,e):t}function Uw(n,e){return n instanceof mh?function(i){return Kp(i)||function(l){return!!l&&"doubleValue"in l}(i)}(e)?e:{integerValue:0}:null}class ku extends Uh{}class Vu extends Uh{constructor(e){super(),this.elements=e}}function zw(n,e){const t=qw(e);for(const i of n.elements)t.some(a=>Mr(a,i))||t.push(i);return{arrayValue:{values:t}}}class Lu extends Uh{constructor(e){super(),this.elements=e}}function Bw(n,e){let t=qw(e);for(const i of n.elements)t=t.filter(a=>!Mr(a,i));return{arrayValue:{values:t}}}class mh extends Uh{constructor(e,t){super(),this.serializer=e,this.Re=t}}function Gb(n){return Et(n.integerValue||n.doubleValue)}function qw(n){return Lg(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ID{constructor(e,t){this.field=e,this.transform=t}}function DD(n,e){return n.field.isEqual(e.field)&&function(i,a){return i instanceof Vu&&a instanceof Vu||i instanceof Lu&&a instanceof Lu?jo(i.elements,a.elements,Mr):i instanceof mh&&a instanceof mh?Mr(i.Re,a.Re):i instanceof ku&&a instanceof ku}(n.transform,e.transform)}class OD{constructor(e,t){this.version=e,this.transformResults=t}}class ir{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ir}static exists(e){return new ir(void 0,e)}static updateTime(e){return new ir(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function $d(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class zh{}function Hw(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Gw(n.key,ir.none()):new Xu(n.key,n.data,ir.none());{const t=n.data,i=_n.empty();let a=new Mt(Wt.comparator);for(let l of e.fields)if(!a.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?i.delete(l):i.set(l,c),a=a.add(l)}return new Ts(n.key,i,new Dn(a.toArray()),ir.none())}}function PD(n,e,t){n instanceof Xu?function(a,l,c){const f=a.value.clone(),m=Yb(a.fieldTransforms,l,c.transformResults);f.setAll(m),l.convertToFoundDocument(c.version,f).setHasCommittedMutations()}(n,e,t):n instanceof Ts?function(a,l,c){if(!$d(a.precondition,l))return void l.convertToUnknownDocument(c.version);const f=Yb(a.fieldTransforms,l,c.transformResults),m=l.data;m.setAll(Fw(a)),m.setAll(f),l.convertToFoundDocument(c.version,m).setHasCommittedMutations()}(n,e,t):function(a,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()}(0,e,t)}function Au(n,e,t,i){return n instanceof Xu?function(l,c,f,m){if(!$d(l.precondition,c))return f;const g=l.value.clone(),v=Kb(l.fieldTransforms,m,c);return g.setAll(v),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),null}(n,e,t,i):n instanceof Ts?function(l,c,f,m){if(!$d(l.precondition,c))return f;const g=Kb(l.fieldTransforms,m,c),v=c.data;return v.setAll(Fw(l)),v.setAll(g),c.convertToFoundDocument(c.version,v).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(w=>w.field))}(n,e,t,i):function(l,c,f){return $d(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):f}(n,e,t)}function MD(n,e){let t=null;for(const i of n.fieldTransforms){const a=e.data.field(i.field),l=Uw(i.transform,a||null);l!=null&&(t===null&&(t=_n.empty()),t.set(i.field,l))}return t||null}function $b(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(i,a){return i===void 0&&a===void 0||!(!i||!a)&&jo(i,a,(l,c)=>DD(l,c))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Xu extends zh{constructor(e,t,i,a=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Ts extends zh{constructor(e,t,i,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function Fw(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}}),e}function Yb(n,e,t){const i=new Map;Ye(n.length===t.length,32656,{Ve:t.length,me:n.length});for(let a=0;a<t.length;a++){const l=n[a],c=l.transform,f=e.data.field(l.field);i.set(l.field,ND(c,f,t[a]))}return i}function Kb(n,e,t){const i=new Map;for(const a of n){const l=a.transform,c=t.data.field(a.field);i.set(a.field,CD(l,c,e))}return i}class Gw extends zh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class jD extends zh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kD{constructor(e,t,i,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=a}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&PD(l,e,i[a])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=Au(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=Au(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=Vw();return this.mutations.forEach(a=>{const l=e.get(a.key),c=l.overlayedDocument;let f=this.applyToLocalView(c,l.mutatedFields);f=t.has(a.key)?null:f;const m=Hw(c,f);m!==null&&i.set(a.key,m),c.isValidDocument()||c.convertToNoDocument(Re.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Le())}isEqual(e){return this.batchId===e.batchId&&jo(this.mutations,e.mutations,(t,i)=>$b(t,i))&&jo(this.baseMutations,e.baseMutations,(t,i)=>$b(t,i))}}class Hg{constructor(e,t,i,a){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=a}static from(e,t,i){Ye(e.mutations.length===i.length,58842,{fe:e.mutations.length,ge:i.length});let a=function(){return TD}();const l=e.mutations;for(let c=0;c<l.length;c++)a=a.insert(l[c].key,i[c].version);return new Hg(e,t,i,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VD{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LD{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var At,qe;function UD(n){switch(n){case ne.OK:return xe(64938);case ne.CANCELLED:case ne.UNKNOWN:case ne.DEADLINE_EXCEEDED:case ne.RESOURCE_EXHAUSTED:case ne.INTERNAL:case ne.UNAVAILABLE:case ne.UNAUTHENTICATED:return!1;case ne.INVALID_ARGUMENT:case ne.NOT_FOUND:case ne.ALREADY_EXISTS:case ne.PERMISSION_DENIED:case ne.FAILED_PRECONDITION:case ne.ABORTED:case ne.OUT_OF_RANGE:case ne.UNIMPLEMENTED:case ne.DATA_LOSS:return!0;default:return xe(15467,{code:n})}}function $w(n){if(n===void 0)return vi("GRPC error has no .code"),ne.UNKNOWN;switch(n){case At.OK:return ne.OK;case At.CANCELLED:return ne.CANCELLED;case At.UNKNOWN:return ne.UNKNOWN;case At.DEADLINE_EXCEEDED:return ne.DEADLINE_EXCEEDED;case At.RESOURCE_EXHAUSTED:return ne.RESOURCE_EXHAUSTED;case At.INTERNAL:return ne.INTERNAL;case At.UNAVAILABLE:return ne.UNAVAILABLE;case At.UNAUTHENTICATED:return ne.UNAUTHENTICATED;case At.INVALID_ARGUMENT:return ne.INVALID_ARGUMENT;case At.NOT_FOUND:return ne.NOT_FOUND;case At.ALREADY_EXISTS:return ne.ALREADY_EXISTS;case At.PERMISSION_DENIED:return ne.PERMISSION_DENIED;case At.FAILED_PRECONDITION:return ne.FAILED_PRECONDITION;case At.ABORTED:return ne.ABORTED;case At.OUT_OF_RANGE:return ne.OUT_OF_RANGE;case At.UNIMPLEMENTED:return ne.UNIMPLEMENTED;case At.DATA_LOSS:return ne.DATA_LOSS;default:return xe(39323,{code:n})}}(qe=At||(At={}))[qe.OK=0]="OK",qe[qe.CANCELLED=1]="CANCELLED",qe[qe.UNKNOWN=2]="UNKNOWN",qe[qe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",qe[qe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",qe[qe.NOT_FOUND=5]="NOT_FOUND",qe[qe.ALREADY_EXISTS=6]="ALREADY_EXISTS",qe[qe.PERMISSION_DENIED=7]="PERMISSION_DENIED",qe[qe.UNAUTHENTICATED=16]="UNAUTHENTICATED",qe[qe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",qe[qe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",qe[qe.ABORTED=10]="ABORTED",qe[qe.OUT_OF_RANGE=11]="OUT_OF_RANGE",qe[qe.UNIMPLEMENTED=12]="UNIMPLEMENTED",qe[qe.INTERNAL=13]="INTERNAL",qe[qe.UNAVAILABLE=14]="UNAVAILABLE",qe[qe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zD=new ds([4294967295,4294967295],0);function Qb(n){const e=mw().encode(n),t=new aw;return t.update(e),new Uint8Array(t.digest())}function Xb(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new ds([t,i],0),new ds([a,l],0)]}class Fg{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new _u(`Invalid padding: ${t}`);if(i<0)throw new _u(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new _u(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new _u(`Invalid padding when bitmap length is 0: ${t}`);this.pe=8*e.length-t,this.ye=ds.fromNumber(this.pe)}we(e,t,i){let a=e.add(t.multiply(ds.fromNumber(i)));return a.compare(zD)===1&&(a=new ds([a.getBits(0),a.getBits(1)],0)),a.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const t=Qb(e),[i,a]=Xb(t);for(let l=0;l<this.hashCount;l++){const c=this.we(i,a,l);if(!this.be(c))return!1}return!0}static create(e,t,i){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new Fg(l,a,t);return i.forEach(f=>c.insert(f)),c}insert(e){if(this.pe===0)return;const t=Qb(e),[i,a]=Xb(t);for(let l=0;l<this.hashCount;l++){const c=this.we(i,a,l);this.Se(c)}}Se(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class _u extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh{constructor(e,t,i,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const a=new Map;return a.set(e,Wu.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Bh(Re.min(),a,new ht(Oe),_i(),Le())}}class Wu{constructor(e,t,i,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Wu(i,t,Le(),Le(),Le())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yd{constructor(e,t,i,a){this.De=e,this.removedTargetIds=t,this.key=i,this.ve=a}}class Yw{constructor(e,t){this.targetId=e,this.Ce=t}}class Kw{constructor(e,t,i=Zt.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=a}}class Wb{constructor(){this.Fe=0,this.Me=Zb(),this.xe=Zt.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=Le(),t=Le(),i=Le();return this.Me.forEach((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:i=i.add(a);break;default:xe(38017,{changeType:l})}}),new Wu(this.xe,this.Oe,e,t,i)}Qe(){this.Ne=!1,this.Me=Zb()}$e(e,t){this.Ne=!0,this.Me=this.Me.insert(e,t)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,Ye(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class BD{constructor(e){this.ze=e,this.je=new Map,this.He=_i(),this.Je=Md(),this.Ye=Md(),this.Ze=new ht(Oe)}Xe(e){for(const t of e.De)e.ve&&e.ve.isFoundDocument()?this.et(t,e.ve):this.tt(t,e.key,e.ve);for(const t of e.removedTargetIds)this.tt(t,e.key,e.ve)}nt(e){this.forEachTarget(e,t=>{const i=this.rt(t);switch(e.state){case 0:this.it(t)&&i.ke(e.resumeToken);break;case 1:i.We(),i.Be||i.Qe(),i.ke(e.resumeToken);break;case 2:i.We(),i.Be||this.removeTarget(t);break;case 3:this.it(t)&&(i.Ge(),i.ke(e.resumeToken));break;case 4:this.it(t)&&(this.st(t),i.ke(e.resumeToken));break;default:xe(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.je.forEach((i,a)=>{this.it(a)&&t(a)})}ot(e){const t=e.targetId,i=e.Ce.count,a=this._t(t);if(a){const l=a.target;if(Xp(l))if(i===0){const c=new _e(l.path);this.tt(t,c,sn.newNoDocument(c,Re.min()))}else Ye(i===1,20013,{expectedCount:i});else{const c=this.ut(t);if(c!==i){const f=this.ct(e),m=f?this.lt(f,e,c):1;if(m!==0){this.st(t);const g=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,g)}}}}}ct(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:a=0},hashCount:l=0}=t;let c,f;try{c=ps(i).toUint8Array()}catch(m){if(m instanceof vw)return Mo("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{f=new Fg(c,a,l)}catch(m){return Mo(m instanceof _u?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return f.pe===0?null:f}lt(e,t,i){return t.Ce.count===i-this.Tt(e,t.targetId)?0:2}Tt(e,t){const i=this.ze.getRemoteKeysForTarget(t);let a=0;return i.forEach(l=>{const c=this.ze.Pt(),f=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(f)||(this.tt(t,l,null),a++)}),a}It(e){const t=new Map;this.je.forEach((l,c)=>{const f=this._t(c);if(f){if(l.current&&Xp(f.target)){const m=new _e(f.target.path);this.Et(m).has(c)||this.dt(c,m)||this.tt(c,m,sn.newNoDocument(m,e))}l.Le&&(t.set(c,l.qe()),l.Qe())}});let i=Le();this.Ye.forEach((l,c)=>{let f=!0;c.forEachWhile(m=>{const g=this._t(m);return!g||g.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)}),f&&(i=i.add(l))}),this.He.forEach((l,c)=>c.setReadTime(e));const a=new Bh(e,t,this.Ze,this.He,i);return this.He=_i(),this.Je=Md(),this.Ye=Md(),this.Ze=new ht(Oe),a}et(e,t){if(!this.it(e))return;const i=this.dt(e,t.key)?2:0;this.rt(e).$e(t.key,i),this.He=this.He.insert(t.key,t),this.Je=this.Je.insert(t.key,this.Et(t.key).add(e)),this.Ye=this.Ye.insert(t.key,this.At(t.key).add(e))}tt(e,t,i){if(!this.it(e))return;const a=this.rt(e);this.dt(e,t)?a.$e(t,1):a.Ue(t),this.Ye=this.Ye.insert(t,this.At(t).delete(e)),this.Ye=this.Ye.insert(t,this.At(t).add(e)),i&&(this.He=this.He.insert(t,i))}removeTarget(e){this.je.delete(e)}ut(e){const t=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let t=this.je.get(e);return t||(t=new Wb,this.je.set(e,t)),t}At(e){let t=this.Ye.get(e);return t||(t=new Mt(Oe),this.Ye=this.Ye.insert(e,t)),t}Et(e){let t=this.Je.get(e);return t||(t=new Mt(Oe),this.Je=this.Je.insert(e,t)),t}it(e){const t=this._t(e)!==null;return t||fe("WatchChangeAggregator","Detected inactive target",e),t}_t(e){const t=this.je.get(e);return t&&t.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new Wb),this.ze.getRemoteKeysForTarget(e).forEach(t=>{this.tt(e,t,null)})}dt(e,t){return this.ze.getRemoteKeysForTarget(e).has(t)}}function Md(){return new ht(_e.comparator)}function Zb(){return new ht(_e.comparator)}const qD={asc:"ASCENDING",desc:"DESCENDING"},HD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},FD={and:"AND",or:"OR"};class GD{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Zp(n,e){return n.useProto3Json||jh(e)?e:{value:e}}function ph(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Qw(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function $D(n,e){return ph(n,e.toTimestamp())}function Pr(n){return Ye(!!n,49232),Re.fromTimestamp(function(t){const i=ms(t);return new Pt(i.seconds,i.nanos)}(n))}function Gg(n,e){return Jp(n,e).canonicalString()}function Jp(n,e){const t=function(a){return new st(["projects",a.projectId,"databases",a.database])}(n).child("documents");return e===void 0?t:t.child(e)}function Xw(n){const e=st.fromString(n);return Ye(tT(e),10190,{key:e.toString()}),e}function eg(n,e){return Gg(n.databaseId,e.path)}function Sp(n,e){const t=Xw(e);if(t.get(1)!==n.databaseId.projectId)throw new he(ne.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new he(ne.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new _e(Zw(t))}function Ww(n,e){return Gg(n.databaseId,e)}function YD(n){const e=Xw(n);return e.length===4?st.emptyPath():Zw(e)}function tg(n){return new st(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Zw(n){return Ye(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Jb(n,e,t){return{name:eg(n,e),fields:t.value.mapValue.fields}}function KD(n,e){let t;if("targetChange"in e){e.targetChange;const i=function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:xe(39313,{state:g})}(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=function(g,v){return g.useProto3Json?(Ye(v===void 0||typeof v=="string",58123),Zt.fromBase64String(v||"")):(Ye(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),Zt.fromUint8Array(v||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,f=c&&function(g){const v=g.code===void 0?ne.UNKNOWN:$w(g.code);return new he(v,g.message||"")}(c);t=new Kw(i,a,l,f||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const a=Sp(n,i.document.name),l=Pr(i.document.updateTime),c=i.document.createTime?Pr(i.document.createTime):Re.min(),f=new _n({mapValue:{fields:i.document.fields}}),m=sn.newFoundDocument(a,l,c,f),g=i.targetIds||[],v=i.removedTargetIds||[];t=new Yd(g,v,m.key,m)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const a=Sp(n,i.document),l=i.readTime?Pr(i.readTime):Re.min(),c=sn.newNoDocument(a,l),f=i.removedTargetIds||[];t=new Yd([],f,c.key,c)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const a=Sp(n,i.document),l=i.removedTargetIds||[];t=new Yd([],l,a,null)}else{if(!("filter"in e))return xe(11601,{Vt:e});{e.filter;const i=e.filter;i.targetId;const{count:a=0,unchangedNames:l}=i,c=new LD(a,l),f=i.targetId;t=new Yw(f,c)}}return t}function QD(n,e){let t;if(e instanceof Xu)t={update:Jb(n,e.key,e.value)};else if(e instanceof Gw)t={delete:eg(n,e.key)};else if(e instanceof Ts)t={update:Jb(n,e.key,e.data),updateMask:i4(e.fieldMask)};else{if(!(e instanceof jD))return xe(16599,{ft:e.type});t={verify:eg(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(l,c){const f=c.transform;if(f instanceof ku)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof Vu)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof Lu)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof mh)return{fieldPath:c.field.canonicalString(),increment:f.Re};throw xe(20930,{transform:c.transform})}(0,i))),e.precondition.isNone||(t.currentDocument=function(a,l){return l.updateTime!==void 0?{updateTime:$D(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:xe(27497)}(n,e.precondition)),t}function XD(n,e){return n&&n.length>0?(Ye(e!==void 0,14353),n.map(t=>function(a,l){let c=a.updateTime?Pr(a.updateTime):Pr(l);return c.isEqual(Re.min())&&(c=Pr(l)),new OD(c,a.transformResults||[])}(t,e))):[]}function WD(n,e){return{documents:[Ww(n,e.path)]}}function ZD(n,e){const t={structuredQuery:{}},i=e.path;let a;e.collectionGroup!==null?(a=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=Ww(n,a);const l=function(g){if(g.length!==0)return eT(ar.create(g,"and"))}(e.filters);l&&(t.structuredQuery.where=l);const c=function(g){if(g.length!==0)return g.map(v=>function(T){return{field:xo(T.field),direction:t4(T.dir)}}(v))}(e.orderBy);c&&(t.structuredQuery.orderBy=c);const f=Zp(n,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=function(g){return{before:g.inclusive,values:g.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(g){return{before:!g.inclusive,values:g.position}}(e.endAt)),{gt:t,parent:a}}function JD(n){let e=YD(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let a=null;if(i>0){Ye(i===1,65062);const v=t.from[0];v.allDescendants?a=v.collectionId:e=e.child(v.collectionId)}let l=[];t.where&&(l=function(w){const T=Jw(w);return T instanceof ar&&Cw(T)?T.getFilters():[T]}(t.where));let c=[];t.orderBy&&(c=function(w){return w.map(T=>function(A){return new ju(So(A.field),function(I){switch(I){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(A.direction))}(T))}(t.orderBy));let f=null;t.limit&&(f=function(w){let T;return T=typeof w=="object"?w.value:w,jh(T)?null:T}(t.limit));let m=null;t.startAt&&(m=function(w){const T=!!w.before,C=w.values||[];return new hh(C,T)}(t.startAt));let g=null;return t.endAt&&(g=function(w){const T=!w.before,C=w.values||[];return new hh(C,T)}(t.endAt)),vD(e,a,c,l,f,"F",m,g)}function e4(n,e){const t=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return xe(28987,{purpose:a})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Jw(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=So(t.unaryFilter.field);return Rt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const a=So(t.unaryFilter.field);return Rt.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=So(t.unaryFilter.field);return Rt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=So(t.unaryFilter.field);return Rt.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return xe(61313);default:return xe(60726)}}(n):n.fieldFilter!==void 0?function(t){return Rt.create(So(t.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return xe(58110);default:return xe(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return ar.create(t.compositeFilter.filters.map(i=>Jw(i)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return xe(1026)}}(t.compositeFilter.op))}(n):xe(30097,{filter:n})}function t4(n){return qD[n]}function n4(n){return HD[n]}function r4(n){return FD[n]}function xo(n){return{fieldPath:n.canonicalString()}}function So(n){return Wt.fromServerFormat(n.fieldPath)}function eT(n){return n instanceof Rt?function(t){if(t.op==="=="){if(zb(t.value))return{unaryFilter:{field:xo(t.field),op:"IS_NAN"}};if(Ub(t.value))return{unaryFilter:{field:xo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(zb(t.value))return{unaryFilter:{field:xo(t.field),op:"IS_NOT_NAN"}};if(Ub(t.value))return{unaryFilter:{field:xo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:xo(t.field),op:n4(t.op),value:t.value}}}(n):n instanceof ar?function(t){const i=t.getFilters().map(a=>eT(a));return i.length===1?i[0]:{compositeFilter:{op:r4(t.op),filters:i}}}(n):xe(54877,{filter:n})}function i4(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function tT(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os{constructor(e,t,i,a,l=Re.min(),c=Re.min(),f=Zt.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=f,this.expectedCount=m}withSequenceNumber(e){return new os(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new os(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new os(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new os(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s4{constructor(e){this.wt=e}}function a4(n){const e=JD({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?fh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o4{constructor(){this.yn=new l4}addToCollectionParentIndex(e,t){return this.yn.add(t),ie.resolve()}getCollectionParents(e,t){return ie.resolve(this.yn.getEntries(t))}addFieldIndex(e,t){return ie.resolve()}deleteFieldIndex(e,t){return ie.resolve()}deleteAllFieldIndexes(e){return ie.resolve()}createTargetIndexes(e,t){return ie.resolve()}getDocumentsMatchingTarget(e,t){return ie.resolve(null)}getIndexType(e,t){return ie.resolve(0)}getFieldIndexes(e,t){return ie.resolve([])}getNextCollectionGroupToUpdate(e){return ie.resolve(null)}getMinOffset(e,t){return ie.resolve(fs.min())}getMinOffsetFromCollectionGroup(e,t){return ie.resolve(fs.min())}updateCollectionGroup(e,t,i){return ie.resolve()}updateIndexEntries(e,t){return ie.resolve()}}class l4{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t]||new Mt(st.comparator),l=!a.has(i);return this.index[t]=a.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t];return a&&a.has(i)}getEntries(e){return(this.index[e]||new Mt(st.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},nT=41943040;class vn{static withCacheSize(e){return new vn(e,vn.DEFAULT_COLLECTION_PERCENTILE,vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */vn.DEFAULT_COLLECTION_PERCENTILE=10,vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,vn.DEFAULT=new vn(nT,vn.DEFAULT_COLLECTION_PERCENTILE,vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),vn.DISABLED=new vn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(e){this.nr=e}next(){return this.nr+=2,this.nr}static rr(){return new Lo(0)}static ir(){return new Lo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tE="LruGarbageCollector",u4=1048576;function nE([n,e],[t,i]){const a=Oe(n,t);return a===0?Oe(e,i):a}class c4{constructor(e){this.cr=e,this.buffer=new Mt(nE),this.lr=0}hr(){return++this.lr}Pr(e){const t=[e,this.hr()];if(this.buffer.size<this.cr)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();nE(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class d4{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Tr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ir(6e4)}stop(){this.Tr&&(this.Tr.cancel(),this.Tr=null)}get started(){return this.Tr!==null}Ir(e){fe(tE,`Garbage collection scheduled in ${e}ms`),this.Tr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Tr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Qo(t)?fe(tE,"Ignoring IndexedDB error during garbage collection: ",t):await Ko(t)}await this.Ir(3e5)})}}class h4{constructor(e,t){this.Er=e,this.params=t}calculateTargetCount(e,t){return this.Er.dr(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(t===0)return ie.resolve(Mh.le);const i=new c4(t);return this.Er.forEachTarget(e,a=>i.Pr(a.sequenceNumber)).next(()=>this.Er.Ar(e,a=>i.Pr(a))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.Er.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Er.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(fe("LruGarbageCollector","Garbage collection skipped; disabled"),ie.resolve(eE)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(fe("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),eE):this.Rr(e,t))}getCacheSize(e){return this.Er.getCacheSize(e)}Rr(e,t){let i,a,l,c,f,m,g;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(w=>(w>this.params.maximumSequenceNumbersToCollect?(fe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),a=this.params.maximumSequenceNumbersToCollect):a=w,c=Date.now(),this.nthSequenceNumber(e,a))).next(w=>(i=w,f=Date.now(),this.removeTargets(e,i,t))).next(w=>(l=w,m=Date.now(),this.removeOrphanedDocuments(e,i))).next(w=>(g=Date.now(),wo()<=Ve.DEBUG&&fe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-v}ms
	Determined least recently used ${a} in `+(f-c)+`ms
	Removed ${l} targets in `+(m-f)+`ms
	Removed ${w} documents in `+(g-m)+`ms
Total Duration: ${g-v}ms`),ie.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:w})))}}function f4(n,e){return new h4(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m4{constructor(){this.changes=new Sa(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,sn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?ie.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p4{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g4{constructor(e,t,i,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=a}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(a=>(i=a,this.remoteDocumentCache.getEntry(e,t))).next(a=>(i!==null&&Au(i.mutation,a,Dn.empty(),Pt.now()),a))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,Le()).next(()=>i))}getLocalViewOfDocuments(e,t,i=Le()){const a=da();return this.populateOverlays(e,a,t).next(()=>this.computeViews(e,t,a,i).next(l=>{let c=vu();return l.forEach((f,m)=>{c=c.insert(f,m.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const i=da();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,Le()))}populateOverlays(e,t,i){const a=[];return i.forEach(l=>{t.has(l)||a.push(l)}),this.documentOverlayCache.getOverlays(e,a).next(l=>{l.forEach((c,f)=>{t.set(c,f)})})}computeViews(e,t,i,a){let l=_i();const c=Su(),f=function(){return Su()}();return t.forEach((m,g)=>{const v=i.get(g.key);a.has(g.key)&&(v===void 0||v.mutation instanceof Ts)?l=l.insert(g.key,g):v!==void 0?(c.set(g.key,v.mutation.getFieldMask()),Au(v.mutation,g,v.mutation.getFieldMask(),Pt.now())):c.set(g.key,Dn.empty())}),this.recalculateAndSaveOverlays(e,l).next(m=>(m.forEach((g,v)=>c.set(g,v)),t.forEach((g,v)=>{var w;return f.set(g,new p4(v,(w=c.get(g))!==null&&w!==void 0?w:null))}),f))}recalculateAndSaveOverlays(e,t){const i=Su();let a=new ht((c,f)=>c-f),l=Le();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const f of c)f.keys().forEach(m=>{const g=t.get(m);if(g===null)return;let v=i.get(m)||Dn.empty();v=f.applyToLocalView(g,v),i.set(m,v);const w=(a.get(f.batchId)||Le()).add(m);a=a.insert(f.batchId,w)})}).next(()=>{const c=[],f=a.getReverseIterator();for(;f.hasNext();){const m=f.getNext(),g=m.key,v=m.value,w=Vw();v.forEach(T=>{if(!l.has(T)){const C=Hw(t.get(T),i.get(T));C!==null&&w.set(T,C),l=l.add(T)}}),c.push(this.documentOverlayCache.saveOverlays(e,g,w))}return ie.waitFor(c)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i,a){return function(c){return _e.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Ow(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,a):this.getDocumentsMatchingCollectionQuery(e,t,i,a)}getNextDocuments(e,t,i,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,a).next(l=>{const c=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,a-l.size):ie.resolve(da());let f=Du,m=l;return c.next(g=>ie.forEach(g,(v,w)=>(f<w.largestBatchId&&(f=w.largestBatchId),l.get(v)?ie.resolve():this.remoteDocumentCache.getEntry(e,v).next(T=>{m=m.insert(v,T)}))).next(()=>this.populateOverlays(e,g,l)).next(()=>this.computeViews(e,m,g,Le())).next(v=>({batchId:f,changes:kw(v)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new _e(t)).next(i=>{let a=vu();return i.isFoundDocument()&&(a=a.insert(i.key,i)),a})}getDocumentsMatchingCollectionGroupQuery(e,t,i,a){const l=t.collectionGroup;let c=vu();return this.indexManager.getCollectionParents(e,l).next(f=>ie.forEach(f,m=>{const g=function(w,T){return new Xo(T,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)}(t,m.child(l));return this.getDocumentsMatchingCollectionQuery(e,g,i,a).next(v=>{v.forEach((w,T)=>{c=c.insert(w,T)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,t,i,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,a))).next(c=>{l.forEach((m,g)=>{const v=g.getKey();c.get(v)===null&&(c=c.insert(v,sn.newInvalidDocument(v)))});let f=vu();return c.forEach((m,g)=>{const v=l.get(m);v!==void 0&&Au(v.mutation,g,Dn.empty(),Pt.now()),Lh(t,g)&&(f=f.insert(m,g))}),f})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y4{constructor(e){this.serializer=e,this.Fr=new Map,this.Mr=new Map}getBundleMetadata(e,t){return ie.resolve(this.Fr.get(t))}saveBundleMetadata(e,t){return this.Fr.set(t.id,function(a){return{id:a.id,version:a.version,createTime:Pr(a.createTime)}}(t)),ie.resolve()}getNamedQuery(e,t){return ie.resolve(this.Mr.get(t))}saveNamedQuery(e,t){return this.Mr.set(t.name,function(a){return{name:a.name,query:a4(a.bundledQuery),readTime:Pr(a.readTime)}}(t)),ie.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v4{constructor(){this.overlays=new ht(_e.comparator),this.Or=new Map}getOverlay(e,t){return ie.resolve(this.overlays.get(t))}getOverlays(e,t){const i=da();return ie.forEach(t,a=>this.getOverlay(e,a).next(l=>{l!==null&&i.set(a,l)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((a,l)=>{this.St(e,t,l)}),ie.resolve()}removeOverlaysForBatchId(e,t,i){const a=this.Or.get(i);return a!==void 0&&(a.forEach(l=>this.overlays=this.overlays.remove(l)),this.Or.delete(i)),ie.resolve()}getOverlaysForCollection(e,t,i){const a=da(),l=t.length+1,c=new _e(t.child("")),f=this.overlays.getIteratorFrom(c);for(;f.hasNext();){const m=f.getNext().value,g=m.getKey();if(!t.isPrefixOf(g.path))break;g.path.length===l&&m.largestBatchId>i&&a.set(m.getKey(),m)}return ie.resolve(a)}getOverlaysForCollectionGroup(e,t,i,a){let l=new ht((g,v)=>g-v);const c=this.overlays.getIterator();for(;c.hasNext();){const g=c.getNext().value;if(g.getKey().getCollectionGroup()===t&&g.largestBatchId>i){let v=l.get(g.largestBatchId);v===null&&(v=da(),l=l.insert(g.largestBatchId,v)),v.set(g.getKey(),g)}}const f=da(),m=l.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach((g,v)=>f.set(g,v)),!(f.size()>=a)););return ie.resolve(f)}St(e,t,i){const a=this.overlays.get(i.key);if(a!==null){const c=this.Or.get(a.largestBatchId).delete(i.key);this.Or.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new VD(t,i));let l=this.Or.get(t);l===void 0&&(l=Le(),this.Or.set(t,l)),this.Or.set(t,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _4{constructor(){this.sessionToken=Zt.EMPTY_BYTE_STRING}getSessionToken(e){return ie.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ie.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $g{constructor(){this.Nr=new Mt(qt.Br),this.Lr=new Mt(qt.kr)}isEmpty(){return this.Nr.isEmpty()}addReference(e,t){const i=new qt(e,t);this.Nr=this.Nr.add(i),this.Lr=this.Lr.add(i)}qr(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.Qr(new qt(e,t))}$r(e,t){e.forEach(i=>this.removeReference(i,t))}Ur(e){const t=new _e(new st([])),i=new qt(t,e),a=new qt(t,e+1),l=[];return this.Lr.forEachInRange([i,a],c=>{this.Qr(c),l.push(c.key)}),l}Kr(){this.Nr.forEach(e=>this.Qr(e))}Qr(e){this.Nr=this.Nr.delete(e),this.Lr=this.Lr.delete(e)}Wr(e){const t=new _e(new st([])),i=new qt(t,e),a=new qt(t,e+1);let l=Le();return this.Lr.forEachInRange([i,a],c=>{l=l.add(c.key)}),l}containsKey(e){const t=new qt(e,0),i=this.Nr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class qt{constructor(e,t){this.key=e,this.Gr=t}static Br(e,t){return _e.comparator(e.key,t.key)||Oe(e.Gr,t.Gr)}static kr(e,t){return Oe(e.Gr,t.Gr)||_e.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b4{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Jn=1,this.zr=new Mt(qt.Br)}checkEmpty(e){return ie.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,a){const l=this.Jn;this.Jn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new kD(l,t,i,a);this.mutationQueue.push(c);for(const f of a)this.zr=this.zr.add(new qt(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return ie.resolve(c)}lookupMutationBatch(e,t){return ie.resolve(this.jr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,a=this.Hr(i),l=a<0?0:a;return ie.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return ie.resolve(this.mutationQueue.length===0?kg:this.Jn-1)}getAllMutationBatches(e){return ie.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new qt(t,0),a=new qt(t,Number.POSITIVE_INFINITY),l=[];return this.zr.forEachInRange([i,a],c=>{const f=this.jr(c.Gr);l.push(f)}),ie.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Mt(Oe);return t.forEach(a=>{const l=new qt(a,0),c=new qt(a,Number.POSITIVE_INFINITY);this.zr.forEachInRange([l,c],f=>{i=i.add(f.Gr)})}),ie.resolve(this.Jr(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,a=i.length+1;let l=i;_e.isDocumentKey(l)||(l=l.child(""));const c=new qt(new _e(l),0);let f=new Mt(Oe);return this.zr.forEachWhile(m=>{const g=m.key.path;return!!i.isPrefixOf(g)&&(g.length===a&&(f=f.add(m.Gr)),!0)},c),ie.resolve(this.Jr(f))}Jr(e){const t=[];return e.forEach(i=>{const a=this.jr(i);a!==null&&t.push(a)}),t}removeMutationBatch(e,t){Ye(this.Yr(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.zr;return ie.forEach(t.mutations,a=>{const l=new qt(a.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.zr=i})}Xn(e){}containsKey(e,t){const i=new qt(t,0),a=this.zr.firstAfterOrEqual(i);return ie.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,ie.resolve()}Yr(e,t){return this.Hr(e)}Hr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}jr(e){const t=this.Hr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E4{constructor(e){this.Zr=e,this.docs=function(){return new ht(_e.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,a=this.docs.get(i),l=a?a.size:0,c=this.Zr(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return ie.resolve(i?i.document.mutableCopy():sn.newInvalidDocument(t))}getEntries(e,t){let i=_i();return t.forEach(a=>{const l=this.docs.get(a);i=i.insert(a,l?l.document.mutableCopy():sn.newInvalidDocument(a))}),ie.resolve(i)}getDocumentsMatchingQuery(e,t,i,a){let l=_i();const c=t.path,f=new _e(c.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(f);for(;m.hasNext();){const{key:g,value:{document:v}}=m.getNext();if(!c.isPrefixOf(g.path))break;g.path.length>c.length+1||XI(QI(v),i)<=0||(a.has(v.key)||Lh(t,v))&&(l=l.insert(v.key,v.mutableCopy()))}return ie.resolve(l)}getAllFromCollectionGroup(e,t,i,a){xe(9500)}Xr(e,t){return ie.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new w4(this)}getSize(e){return ie.resolve(this.size)}}class w4 extends m4{constructor(e){super(),this.vr=e}applyChanges(e){const t=[];return this.changes.forEach((i,a)=>{a.isValidDocument()?t.push(this.vr.addEntry(e,a)):this.vr.removeEntry(i)}),ie.waitFor(t)}getFromCache(e,t){return this.vr.getEntry(e,t)}getAllFromCache(e,t){return this.vr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T4{constructor(e){this.persistence=e,this.ei=new Sa(t=>Ug(t),zg),this.lastRemoteSnapshotVersion=Re.min(),this.highestTargetId=0,this.ti=0,this.ni=new $g,this.targetCount=0,this.ri=Lo.rr()}forEachTarget(e,t){return this.ei.forEach((i,a)=>t(a)),ie.resolve()}getLastRemoteSnapshotVersion(e){return ie.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ie.resolve(this.ti)}allocateTargetId(e){return this.highestTargetId=this.ri.next(),ie.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.ti&&(this.ti=t),ie.resolve()}ar(e){this.ei.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ri=new Lo(t),this.highestTargetId=t),e.sequenceNumber>this.ti&&(this.ti=e.sequenceNumber)}addTargetData(e,t){return this.ar(t),this.targetCount+=1,ie.resolve()}updateTargetData(e,t){return this.ar(t),ie.resolve()}removeTargetData(e,t){return this.ei.delete(t.target),this.ni.Ur(t.targetId),this.targetCount-=1,ie.resolve()}removeTargets(e,t,i){let a=0;const l=[];return this.ei.forEach((c,f)=>{f.sequenceNumber<=t&&i.get(f.targetId)===null&&(this.ei.delete(c),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),a++)}),ie.waitFor(l).next(()=>a)}getTargetCount(e){return ie.resolve(this.targetCount)}getTargetData(e,t){const i=this.ei.get(t)||null;return ie.resolve(i)}addMatchingKeys(e,t,i){return this.ni.qr(t,i),ie.resolve()}removeMatchingKeys(e,t,i){this.ni.$r(t,i);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach(c=>{l.push(a.markPotentiallyOrphaned(e,c))}),ie.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.ni.Ur(t),ie.resolve()}getMatchingKeysForTargetId(e,t){const i=this.ni.Wr(t);return ie.resolve(i)}containsKey(e,t){return ie.resolve(this.ni.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rT{constructor(e,t){this.ii={},this.overlays={},this.si=new Mh(0),this.oi=!1,this.oi=!0,this._i=new _4,this.referenceDelegate=e(this),this.ai=new T4(this),this.indexManager=new o4,this.remoteDocumentCache=function(a){return new E4(a)}(i=>this.referenceDelegate.ui(i)),this.serializer=new s4(t),this.ci=new y4(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.oi=!1,Promise.resolve()}get started(){return this.oi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new v4,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ii[e.toKey()];return i||(i=new b4(t,this.referenceDelegate),this.ii[e.toKey()]=i),i}getGlobalsCache(){return this._i}getTargetCache(){return this.ai}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.ci}runTransaction(e,t,i){fe("MemoryPersistence","Starting transaction:",e);const a=new x4(this.si.next());return this.referenceDelegate.li(),i(a).next(l=>this.referenceDelegate.hi(a).next(()=>l)).toPromise().then(l=>(a.raiseOnCommittedEvent(),l))}Pi(e,t){return ie.or(Object.values(this.ii).map(i=>()=>i.containsKey(e,t)))}}class x4 extends ZI{constructor(e){super(),this.currentSequenceNumber=e}}class Yg{constructor(e){this.persistence=e,this.Ti=new $g,this.Ii=null}static Ei(e){return new Yg(e)}get di(){if(this.Ii)return this.Ii;throw xe(60996)}addReference(e,t,i){return this.Ti.addReference(i,t),this.di.delete(i.toString()),ie.resolve()}removeReference(e,t,i){return this.Ti.removeReference(i,t),this.di.add(i.toString()),ie.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),ie.resolve()}removeTarget(e,t){this.Ti.Ur(t.targetId).forEach(a=>this.di.add(a.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(a=>{a.forEach(l=>this.di.add(l.toString()))}).next(()=>i.removeTargetData(e,t))}li(){this.Ii=new Set}hi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ie.forEach(this.di,i=>{const a=_e.fromPath(i);return this.Ai(e,a).next(l=>{l||t.removeEntry(a,Re.min())})}).next(()=>(this.Ii=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ai(e,t).next(i=>{i?this.di.delete(t.toString()):this.di.add(t.toString())})}ui(e){return 0}Ai(e,t){return ie.or([()=>ie.resolve(this.Ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Pi(e,t)])}}class gh{constructor(e,t){this.persistence=e,this.Ri=new Sa(i=>tD(i.path),(i,a)=>i.isEqual(a)),this.garbageCollector=f4(this,t)}static Ei(e,t){return new gh(e,t)}li(){}hi(e){return ie.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.Vr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>t.next(a=>i+a))}Vr(e){let t=0;return this.Ar(e,i=>{t++}).next(()=>t)}Ar(e,t){return ie.forEach(this.Ri,(i,a)=>this.gr(e,i,a).next(l=>l?ie.resolve():t(a)))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.Xr(e,c=>this.gr(e,c,t).next(f=>{f||(i++,l.removeEntry(c,Re.min()))})).next(()=>l.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,t){return this.Ri.set(t,e.currentSequenceNumber),ie.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.Ri.set(i,e.currentSequenceNumber),ie.resolve()}removeReference(e,t,i){return this.Ri.set(i,e.currentSequenceNumber),ie.resolve()}updateLimboDocument(e,t){return this.Ri.set(t,e.currentSequenceNumber),ie.resolve()}ui(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Fd(e.data.value)),t}gr(e,t,i){return ie.or([()=>this.persistence.Pi(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.Ri.get(t);return ie.resolve(a!==void 0&&a>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kg{constructor(e,t,i,a){this.targetId=e,this.fromCache=t,this.ls=i,this.hs=a}static Ps(e,t){let i=Le(),a=Le();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new Kg(e,t.fromCache,i,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S4{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A4{constructor(){this.Ts=!1,this.Is=!1,this.Es=100,this.ds=function(){return nC()?8:JI(on())>0?6:4}()}initialize(e,t){this.As=e,this.indexManager=t,this.Ts=!0}getDocumentsMatchingQuery(e,t,i,a){const l={result:null};return this.Rs(e,t).next(c=>{l.result=c}).next(()=>{if(!l.result)return this.Vs(e,t,a,i).next(c=>{l.result=c})}).next(()=>{if(l.result)return;const c=new S4;return this.fs(e,t,c).next(f=>{if(l.result=f,this.Is)return this.gs(e,t,c,f.size)})}).next(()=>l.result)}gs(e,t,i,a){return i.documentReadCount<this.Es?(wo()<=Ve.DEBUG&&fe("QueryEngine","SDK will not create cache indexes for query:",To(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Es,"documents"),ie.resolve()):(wo()<=Ve.DEBUG&&fe("QueryEngine","Query:",To(t),"scans",i.documentReadCount,"local documents and returns",a,"documents as results."),i.documentReadCount>this.ds*a?(wo()<=Ve.DEBUG&&fe("QueryEngine","The SDK decides to create cache indexes for query:",To(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Or(t))):ie.resolve())}Rs(e,t){if(Fb(t))return ie.resolve(null);let i=Or(t);return this.indexManager.getIndexType(e,i).next(a=>a===0?null:(t.limit!==null&&a===1&&(t=fh(t,null,"F"),i=Or(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(l=>{const c=Le(...l);return this.As.getDocuments(e,c).next(f=>this.indexManager.getMinOffset(e,i).next(m=>{const g=this.ps(t,f);return this.ys(t,g,c,m.readTime)?this.Rs(e,fh(t,null,"F")):this.ws(e,g,t,m)}))})))}Vs(e,t,i,a){return Fb(t)||a.isEqual(Re.min())?ie.resolve(null):this.As.getDocuments(e,i).next(l=>{const c=this.ps(t,l);return this.ys(t,c,i,a)?ie.resolve(null):(wo()<=Ve.DEBUG&&fe("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),To(t)),this.ws(e,c,t,KI(a,Du)).next(f=>f))})}ps(e,t){let i=new Mt(Mw(e));return t.forEach((a,l)=>{Lh(e,l)&&(i=i.add(l))}),i}ys(e,t,i,a){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}fs(e,t,i){return wo()<=Ve.DEBUG&&fe("QueryEngine","Using full collection scan to execute query:",To(t)),this.As.getDocumentsMatchingQuery(e,t,fs.min(),i)}ws(e,t,i,a){return this.As.getDocumentsMatchingQuery(e,i,a).next(l=>(t.forEach(c=>{l=l.insert(c.key,c)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qg="LocalStore",R4=3e8;class C4{constructor(e,t,i,a){this.persistence=e,this.bs=t,this.serializer=a,this.Ss=new ht(Oe),this.Ds=new Sa(l=>Ug(l),zg),this.vs=new Map,this.Cs=e.getRemoteDocumentCache(),this.ai=e.getTargetCache(),this.ci=e.getBundleCache(),this.Fs(i)}Fs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new g4(this.Cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Cs.setIndexManager(this.indexManager),this.bs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ss))}}function N4(n,e,t,i){return new C4(n,e,t,i)}async function iT(n,e){const t=Ce(n);return await t.persistence.runTransaction("Handle user change","readonly",i=>{let a;return t.mutationQueue.getAllMutationBatches(i).next(l=>(a=l,t.Fs(e),t.mutationQueue.getAllMutationBatches(i))).next(l=>{const c=[],f=[];let m=Le();for(const g of a){c.push(g.batchId);for(const v of g.mutations)m=m.add(v.key)}for(const g of l){f.push(g.batchId);for(const v of g.mutations)m=m.add(v.key)}return t.localDocuments.getDocuments(i,m).next(g=>({Ms:g,removedBatchIds:c,addedBatchIds:f}))})})}function I4(n,e){const t=Ce(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const a=e.batch.keys(),l=t.Cs.newChangeBuffer({trackRemovals:!0});return function(f,m,g,v){const w=g.batch,T=w.keys();let C=ie.resolve();return T.forEach(A=>{C=C.next(()=>v.getEntry(m,A)).next(U=>{const I=g.docVersions.get(A);Ye(I!==null,48541),U.version.compareTo(I)<0&&(w.applyToRemoteDocument(U,g),U.isValidDocument()&&(U.setReadTime(g.commitVersion),v.addEntry(U)))})}),C.next(()=>f.mutationQueue.removeMutationBatch(m,w))}(t,i,e,l).next(()=>l.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,a,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(f){let m=Le();for(let g=0;g<f.mutationResults.length;++g)f.mutationResults[g].transformResults.length>0&&(m=m.add(f.batch.mutations[g].key));return m}(e))).next(()=>t.localDocuments.getDocuments(i,a))})}function sT(n){const e=Ce(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.ai.getLastRemoteSnapshotVersion(t))}function D4(n,e){const t=Ce(n),i=e.snapshotVersion;let a=t.Ss;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const c=t.Cs.newChangeBuffer({trackRemovals:!0});a=t.Ss;const f=[];e.targetChanges.forEach((v,w)=>{const T=a.get(w);if(!T)return;f.push(t.ai.removeMatchingKeys(l,v.removedDocuments,w).next(()=>t.ai.addMatchingKeys(l,v.addedDocuments,w)));let C=T.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(w)!==null?C=C.withResumeToken(Zt.EMPTY_BYTE_STRING,Re.min()).withLastLimboFreeSnapshotVersion(Re.min()):v.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(v.resumeToken,i)),a=a.insert(w,C),function(U,I,q){return U.resumeToken.approximateByteSize()===0||I.snapshotVersion.toMicroseconds()-U.snapshotVersion.toMicroseconds()>=R4?!0:q.addedDocuments.size+q.modifiedDocuments.size+q.removedDocuments.size>0}(T,C,v)&&f.push(t.ai.updateTargetData(l,C))});let m=_i(),g=Le();if(e.documentUpdates.forEach(v=>{e.resolvedLimboDocuments.has(v)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(l,v))}),f.push(O4(l,c,e.documentUpdates).next(v=>{m=v.xs,g=v.Os})),!i.isEqual(Re.min())){const v=t.ai.getLastRemoteSnapshotVersion(l).next(w=>t.ai.setTargetsMetadata(l,l.currentSequenceNumber,i));f.push(v)}return ie.waitFor(f).next(()=>c.apply(l)).next(()=>t.localDocuments.getLocalViewOfDocuments(l,m,g)).next(()=>m)}).then(l=>(t.Ss=a,l))}function O4(n,e,t){let i=Le(),a=Le();return t.forEach(l=>i=i.add(l)),e.getEntries(n,i).next(l=>{let c=_i();return t.forEach((f,m)=>{const g=l.get(f);m.isFoundDocument()!==g.isFoundDocument()&&(a=a.add(f)),m.isNoDocument()&&m.version.isEqual(Re.min())?(e.removeEntry(f,m.readTime),c=c.insert(f,m)):!g.isValidDocument()||m.version.compareTo(g.version)>0||m.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(m),c=c.insert(f,m)):fe(Qg,"Ignoring outdated watch update for ",f,". Current version:",g.version," Watch version:",m.version)}),{xs:c,Os:a}})}function P4(n,e){const t=Ce(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=kg),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function M4(n,e){const t=Ce(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let a;return t.ai.getTargetData(i,e).next(l=>l?(a=l,ie.resolve(a)):t.ai.allocateTargetId(i).next(c=>(a=new os(e,c,"TargetPurposeListen",i.currentSequenceNumber),t.ai.addTargetData(i,a).next(()=>a))))}).then(i=>{const a=t.Ss.get(i.targetId);return(a===null||i.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ss=t.Ss.insert(i.targetId,i),t.Ds.set(e,i.targetId)),i})}async function ng(n,e,t){const i=Ce(n),a=i.Ss.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,c=>i.persistence.referenceDelegate.removeTarget(c,a))}catch(c){if(!Qo(c))throw c;fe(Qg,`Failed to update sequence numbers for target ${e}: ${c}`)}i.Ss=i.Ss.remove(e),i.Ds.delete(a.target)}function rE(n,e,t){const i=Ce(n);let a=Re.min(),l=Le();return i.persistence.runTransaction("Execute query","readwrite",c=>function(m,g,v){const w=Ce(m),T=w.Ds.get(v);return T!==void 0?ie.resolve(w.Ss.get(T)):w.ai.getTargetData(g,v)}(i,c,Or(e)).next(f=>{if(f)return a=f.lastLimboFreeSnapshotVersion,i.ai.getMatchingKeysForTargetId(c,f.targetId).next(m=>{l=m})}).next(()=>i.bs.getDocumentsMatchingQuery(c,e,t?a:Re.min(),t?l:Le())).next(f=>(j4(i,bD(e),f),{documents:f,Ns:l})))}function j4(n,e,t){let i=n.vs.get(e)||Re.min();t.forEach((a,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)}),n.vs.set(e,i)}class iE{constructor(){this.activeTargetIds=AD()}$s(e){this.activeTargetIds=this.activeTargetIds.add(e)}Us(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Qs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class k4{constructor(){this.So=new iE,this.Do={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.So.$s(e),this.Do[e]||"not-current"}updateQueryState(e,t,i){this.Do[e]=t}removeLocalQueryTarget(e){this.So.Us(e)}isLocalQueryTarget(e){return this.So.activeTargetIds.has(e)}clearQueryState(e){delete this.Do[e]}getAllActiveQueryTargets(){return this.So.activeTargetIds}isActiveQueryTarget(e){return this.So.activeTargetIds.has(e)}start(){return this.So=new iE,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V4{vo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sE="ConnectivityMonitor";class aE{constructor(){this.Co=()=>this.Fo(),this.Mo=()=>this.xo(),this.Oo=[],this.No()}vo(e){this.Oo.push(e)}shutdown(){window.removeEventListener("online",this.Co),window.removeEventListener("offline",this.Mo)}No(){window.addEventListener("online",this.Co),window.addEventListener("offline",this.Mo)}Fo(){fe(sE,"Network connectivity changed: AVAILABLE");for(const e of this.Oo)e(0)}xo(){fe(sE,"Network connectivity changed: UNAVAILABLE");for(const e of this.Oo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jd=null;function rg(){return jd===null?jd=function(){return 268435456+Math.round(2147483648*Math.random())}():jd++,"0x"+jd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ap="RestConnection",L4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class U4{get Bo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Lo=t+"://"+e.host,this.ko=`projects/${i}/databases/${a}`,this.qo=this.databaseId.database===ch?`project_id=${i}`:`project_id=${i}&database_id=${a}`}Qo(e,t,i,a,l){const c=rg(),f=this.$o(e,t.toUriEncodedString());fe(Ap,`Sending RPC '${e}' ${c}:`,f,i);const m={"google-cloud-resource-prefix":this.ko,"x-goog-request-params":this.qo};this.Uo(m,a,l);const{host:g}=new URL(f),v=Hu(g);return this.Ko(e,f,m,i,v).then(w=>(fe(Ap,`Received RPC '${e}' ${c}: `,w),w),w=>{throw Mo(Ap,`RPC '${e}' ${c} failed with error: `,w,"url: ",f,"request:",i),w})}Wo(e,t,i,a,l,c){return this.Qo(e,t,i,a,l)}Uo(e,t,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Yo}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((a,l)=>e[l]=a),i&&i.headers.forEach((a,l)=>e[l]=a)}$o(e,t){const i=L4[e];return`${this.Lo}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z4{constructor(e){this.Go=e.Go,this.zo=e.zo}jo(e){this.Ho=e}Jo(e){this.Yo=e}Zo(e){this.Xo=e}onMessage(e){this.e_=e}close(){this.zo()}send(e){this.Go(e)}t_(){this.Ho()}n_(){this.Yo()}r_(e){this.Xo(e)}i_(e){this.e_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nn="WebChannelConnection";class B4 extends U4{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ko(e,t,i,a,l){const c=rg();return new Promise((f,m)=>{const g=new ow;g.setWithCredentials(!0),g.listenOnce(lw.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case Hd.NO_ERROR:const w=g.getResponseJson();fe(nn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(w)),f(w);break;case Hd.TIMEOUT:fe(nn,`RPC '${e}' ${c} timed out`),m(new he(ne.DEADLINE_EXCEEDED,"Request time out"));break;case Hd.HTTP_ERROR:const T=g.getStatus();if(fe(nn,`RPC '${e}' ${c} failed with status:`,T,"response text:",g.getResponseText()),T>0){let C=g.getResponseJson();Array.isArray(C)&&(C=C[0]);const A=C==null?void 0:C.error;if(A&&A.status&&A.message){const U=function(q){const X=q.toLowerCase().replace(/_/g,"-");return Object.values(ne).indexOf(X)>=0?X:ne.UNKNOWN}(A.status);m(new he(U,A.message))}else m(new he(ne.UNKNOWN,"Server responded with status "+g.getStatus()))}else m(new he(ne.UNAVAILABLE,"Connection failed."));break;default:xe(9055,{s_:e,streamId:c,o_:g.getLastErrorCode(),__:g.getLastError()})}}finally{fe(nn,`RPC '${e}' ${c} completed.`)}});const v=JSON.stringify(a);fe(nn,`RPC '${e}' ${c} sending request:`,a),g.send(t,"POST",v,i,15)})}a_(e,t,i){const a=rg(),l=[this.Lo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=dw(),f=cw(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(m.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(m.useFetchStreams=!0),this.Uo(m.initMessageHeaders,t,i),m.encodeInitMessageHeaders=!0;const v=l.join("");fe(nn,`Creating RPC '${e}' stream ${a}: ${v}`,m);const w=c.createWebChannel(v,m);let T=!1,C=!1;const A=new z4({Go:I=>{C?fe(nn,`Not sending because RPC '${e}' stream ${a} is closed:`,I):(T||(fe(nn,`Opening RPC '${e}' stream ${a} transport.`),w.open(),T=!0),fe(nn,`RPC '${e}' stream ${a} sending:`,I),w.send(I))},zo:()=>w.close()}),U=(I,q,X)=>{I.listen(q,Y=>{try{X(Y)}catch(de){setTimeout(()=>{throw de},0)}})};return U(w,yu.EventType.OPEN,()=>{C||(fe(nn,`RPC '${e}' stream ${a} transport opened.`),A.t_())}),U(w,yu.EventType.CLOSE,()=>{C||(C=!0,fe(nn,`RPC '${e}' stream ${a} transport closed`),A.r_())}),U(w,yu.EventType.ERROR,I=>{C||(C=!0,Mo(nn,`RPC '${e}' stream ${a} transport errored. Name:`,I.name,"Message:",I.message),A.r_(new he(ne.UNAVAILABLE,"The operation could not be completed")))}),U(w,yu.EventType.MESSAGE,I=>{var q;if(!C){const X=I.data[0];Ye(!!X,16349);const Y=X,de=(Y==null?void 0:Y.error)||((q=Y[0])===null||q===void 0?void 0:q.error);if(de){fe(nn,`RPC '${e}' stream ${a} received error:`,de);const ue=de.status;let ye=function(N){const j=At[N];if(j!==void 0)return $w(j)}(ue),M=de.message;ye===void 0&&(ye=ne.INTERNAL,M="Unknown error status: "+ue+" with message "+de.message),C=!0,A.r_(new he(ye,M)),w.close()}else fe(nn,`RPC '${e}' stream ${a} received:`,X),A.i_(X)}}),U(f,uw.STAT_EVENT,I=>{I.stat===Gp.PROXY?fe(nn,`RPC '${e}' stream ${a} detected buffering proxy`):I.stat===Gp.NOPROXY&&fe(nn,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{A.n_()},0),A}}function Rp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qh(n){return new GD(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aT{constructor(e,t,i=1e3,a=1.5,l=6e4){this.bi=e,this.timerId=t,this.u_=i,this.c_=a,this.l_=l,this.h_=0,this.P_=null,this.T_=Date.now(),this.reset()}reset(){this.h_=0}I_(){this.h_=this.l_}E_(e){this.cancel();const t=Math.floor(this.h_+this.d_()),i=Math.max(0,Date.now()-this.T_),a=Math.max(0,t-i);a>0&&fe("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.h_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.P_=this.bi.enqueueAfterDelay(this.timerId,a,()=>(this.T_=Date.now(),e())),this.h_*=this.c_,this.h_<this.u_&&(this.h_=this.u_),this.h_>this.l_&&(this.h_=this.l_)}A_(){this.P_!==null&&(this.P_.skipDelay(),this.P_=null)}cancel(){this.P_!==null&&(this.P_.cancel(),this.P_=null)}d_(){return(Math.random()-.5)*this.h_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oE="PersistentStream";class oT{constructor(e,t,i,a,l,c,f,m){this.bi=e,this.R_=i,this.V_=a,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=f,this.listener=m,this.state=0,this.m_=0,this.f_=null,this.g_=null,this.stream=null,this.p_=0,this.y_=new aT(e,t)}w_(){return this.state===1||this.state===5||this.b_()}b_(){return this.state===2||this.state===3}start(){this.p_=0,this.state!==4?this.auth():this.S_()}async stop(){this.w_()&&await this.close(0)}D_(){this.state=0,this.y_.reset()}v_(){this.b_()&&this.f_===null&&(this.f_=this.bi.enqueueAfterDelay(this.R_,6e4,()=>this.C_()))}F_(e){this.M_(),this.stream.send(e)}async C_(){if(this.b_())return this.close(0)}M_(){this.f_&&(this.f_.cancel(),this.f_=null)}x_(){this.g_&&(this.g_.cancel(),this.g_=null)}async close(e,t){this.M_(),this.x_(),this.y_.cancel(),this.m_++,e!==4?this.y_.reset():t&&t.code===ne.RESOURCE_EXHAUSTED?(vi(t.toString()),vi("Using maximum backoff delay to prevent overloading the backend."),this.y_.I_()):t&&t.code===ne.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.O_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Zo(t)}O_(){}auth(){this.state=1;const e=this.N_(this.m_),t=this.m_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,a])=>{this.m_===t&&this.B_(i,a)},i=>{e(()=>{const a=new he(ne.UNKNOWN,"Fetching auth token failed: "+i.message);return this.L_(a)})})}B_(e,t){const i=this.N_(this.m_);this.stream=this.k_(e,t),this.stream.jo(()=>{i(()=>this.listener.jo())}),this.stream.Jo(()=>{i(()=>(this.state=2,this.g_=this.bi.enqueueAfterDelay(this.V_,1e4,()=>(this.b_()&&(this.state=3),Promise.resolve())),this.listener.Jo()))}),this.stream.Zo(a=>{i(()=>this.L_(a))}),this.stream.onMessage(a=>{i(()=>++this.p_==1?this.q_(a):this.onNext(a))})}S_(){this.state=5,this.y_.E_(async()=>{this.state=0,this.start()})}L_(e){return fe(oE,`close with error: ${e}`),this.stream=null,this.close(4,e)}N_(e){return t=>{this.bi.enqueueAndForget(()=>this.m_===e?t():(fe(oE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class q4 extends oT{constructor(e,t,i,a,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,a,c),this.serializer=l}k_(e,t){return this.connection.a_("Listen",e,t)}q_(e){return this.onNext(e)}onNext(e){this.y_.reset();const t=KD(this.serializer,e),i=function(l){if(!("targetChange"in l))return Re.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Re.min():c.readTime?Pr(c.readTime):Re.min()}(e);return this.listener.Q_(t,i)}U_(e){const t={};t.database=tg(this.serializer),t.addTarget=function(l,c){let f;const m=c.target;if(f=Xp(m)?{documents:WD(l,m)}:{query:ZD(l,m).gt},f.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){f.resumeToken=Qw(l,c.resumeToken);const g=Zp(l,c.expectedCount);g!==null&&(f.expectedCount=g)}else if(c.snapshotVersion.compareTo(Re.min())>0){f.readTime=ph(l,c.snapshotVersion.toTimestamp());const g=Zp(l,c.expectedCount);g!==null&&(f.expectedCount=g)}return f}(this.serializer,e);const i=e4(this.serializer,e);i&&(t.labels=i),this.F_(t)}K_(e){const t={};t.database=tg(this.serializer),t.removeTarget=e,this.F_(t)}}class H4 extends oT{constructor(e,t,i,a,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,a,c),this.serializer=l}get W_(){return this.p_>0}start(){this.lastStreamToken=void 0,super.start()}O_(){this.W_&&this.G_([])}k_(e,t){return this.connection.a_("Write",e,t)}q_(e){return Ye(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ye(!e.writeResults||e.writeResults.length===0,55816),this.listener.z_()}onNext(e){Ye(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.y_.reset();const t=XD(e.writeResults,e.commitTime),i=Pr(e.commitTime);return this.listener.j_(i,t)}H_(){const e={};e.database=tg(this.serializer),this.F_(e)}G_(e){const t={streamToken:this.lastStreamToken,writes:e.map(i=>QD(this.serializer,i))};this.F_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F4{}class G4 extends F4{constructor(e,t,i,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=a,this.J_=!1}Y_(){if(this.J_)throw new he(ne.FAILED_PRECONDITION,"The client has already been terminated.")}Qo(e,t,i,a){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,c])=>this.connection.Qo(e,Jp(t,i),a,l,c)).catch(l=>{throw l.name==="FirebaseError"?(l.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new he(ne.UNKNOWN,l.toString())})}Wo(e,t,i,a,l){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,f])=>this.connection.Wo(e,Jp(t,i),a,c,f,l)).catch(c=>{throw c.name==="FirebaseError"?(c.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new he(ne.UNKNOWN,c.toString())})}terminate(){this.J_=!0,this.connection.terminate()}}class $4{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.Z_=0,this.X_=null,this.ea=!0}ta(){this.Z_===0&&(this.na("Unknown"),this.X_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.X_=null,this.ra("Backend didn't respond within 10 seconds."),this.na("Offline"),Promise.resolve())))}ia(e){this.state==="Online"?this.na("Unknown"):(this.Z_++,this.Z_>=1&&(this.sa(),this.ra(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.na("Offline")))}set(e){this.sa(),this.Z_=0,e==="Online"&&(this.ea=!1),this.na(e)}na(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ra(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ea?(vi(t),this.ea=!1):fe("OnlineStateTracker",t)}sa(){this.X_!==null&&(this.X_.cancel(),this.X_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ea="RemoteStore";class Y4{constructor(e,t,i,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.oa=[],this._a=new Map,this.aa=new Set,this.ua=[],this.ca=l,this.ca.vo(c=>{i.enqueueAndForget(async()=>{Aa(this)&&(fe(Ea,"Restarting streams for network reachability change."),await async function(m){const g=Ce(m);g.aa.add(4),await Zu(g),g.la.set("Unknown"),g.aa.delete(4),await Hh(g)}(this))})}),this.la=new $4(i,a)}}async function Hh(n){if(Aa(n))for(const e of n.ua)await e(!0)}async function Zu(n){for(const e of n.ua)await e(!1)}function lT(n,e){const t=Ce(n);t._a.has(e.targetId)||(t._a.set(e.targetId,e),Jg(t)?Zg(t):Wo(t).b_()&&Wg(t,e))}function Xg(n,e){const t=Ce(n),i=Wo(t);t._a.delete(e),i.b_()&&uT(t,e),t._a.size===0&&(i.b_()?i.v_():Aa(t)&&t.la.set("Unknown"))}function Wg(n,e){if(n.ha.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Re.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Wo(n).U_(e)}function uT(n,e){n.ha.Ke(e),Wo(n).K_(e)}function Zg(n){n.ha=new BD({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>n._a.get(e)||null,Pt:()=>n.datastore.serializer.databaseId}),Wo(n).start(),n.la.ta()}function Jg(n){return Aa(n)&&!Wo(n).w_()&&n._a.size>0}function Aa(n){return Ce(n).aa.size===0}function cT(n){n.ha=void 0}async function K4(n){n.la.set("Online")}async function Q4(n){n._a.forEach((e,t)=>{Wg(n,e)})}async function X4(n,e){cT(n),Jg(n)?(n.la.ia(e),Zg(n)):n.la.set("Unknown")}async function W4(n,e,t){if(n.la.set("Online"),e instanceof Kw&&e.state===2&&e.cause)try{await async function(a,l){const c=l.cause;for(const f of l.targetIds)a._a.has(f)&&(await a.remoteSyncer.rejectListen(f,c),a._a.delete(f),a.ha.removeTarget(f))}(n,e)}catch(i){fe(Ea,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await yh(n,i)}else if(e instanceof Yd?n.ha.Xe(e):e instanceof Yw?n.ha.ot(e):n.ha.nt(e),!t.isEqual(Re.min()))try{const i=await sT(n.localStore);t.compareTo(i)>=0&&await function(l,c){const f=l.ha.It(c);return f.targetChanges.forEach((m,g)=>{if(m.resumeToken.approximateByteSize()>0){const v=l._a.get(g);v&&l._a.set(g,v.withResumeToken(m.resumeToken,c))}}),f.targetMismatches.forEach((m,g)=>{const v=l._a.get(m);if(!v)return;l._a.set(m,v.withResumeToken(Zt.EMPTY_BYTE_STRING,v.snapshotVersion)),uT(l,m);const w=new os(v.target,m,g,v.sequenceNumber);Wg(l,w)}),l.remoteSyncer.applyRemoteEvent(f)}(n,t)}catch(i){fe(Ea,"Failed to raise snapshot:",i),await yh(n,i)}}async function yh(n,e,t){if(!Qo(e))throw e;n.aa.add(1),await Zu(n),n.la.set("Offline"),t||(t=()=>sT(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{fe(Ea,"Retrying IndexedDB access"),await t(),n.aa.delete(1),await Hh(n)})}function dT(n,e){return e().catch(t=>yh(n,t,e))}async function Fh(n){const e=Ce(n),t=ys(e);let i=e.oa.length>0?e.oa[e.oa.length-1].batchId:kg;for(;Z4(e);)try{const a=await P4(e.localStore,i);if(a===null){e.oa.length===0&&t.v_();break}i=a.batchId,J4(e,a)}catch(a){await yh(e,a)}hT(e)&&fT(e)}function Z4(n){return Aa(n)&&n.oa.length<10}function J4(n,e){n.oa.push(e);const t=ys(n);t.b_()&&t.W_&&t.G_(e.mutations)}function hT(n){return Aa(n)&&!ys(n).w_()&&n.oa.length>0}function fT(n){ys(n).start()}async function eO(n){ys(n).H_()}async function tO(n){const e=ys(n);for(const t of n.oa)e.G_(t.mutations)}async function nO(n,e,t){const i=n.oa.shift(),a=Hg.from(i,e,t);await dT(n,()=>n.remoteSyncer.applySuccessfulWrite(a)),await Fh(n)}async function rO(n,e){e&&ys(n).W_&&await async function(i,a){if(function(c){return UD(c)&&c!==ne.ABORTED}(a.code)){const l=i.oa.shift();ys(i).D_(),await dT(i,()=>i.remoteSyncer.rejectFailedWrite(l.batchId,a)),await Fh(i)}}(n,e),hT(n)&&fT(n)}async function lE(n,e){const t=Ce(n);t.asyncQueue.verifyOperationInProgress(),fe(Ea,"RemoteStore received new credentials");const i=Aa(t);t.aa.add(3),await Zu(t),i&&t.la.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.aa.delete(3),await Hh(t)}async function iO(n,e){const t=Ce(n);e?(t.aa.delete(2),await Hh(t)):e||(t.aa.add(2),await Zu(t),t.la.set("Unknown"))}function Wo(n){return n.Pa||(n.Pa=function(t,i,a){const l=Ce(t);return l.Y_(),new q4(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)}(n.datastore,n.asyncQueue,{jo:K4.bind(null,n),Jo:Q4.bind(null,n),Zo:X4.bind(null,n),Q_:W4.bind(null,n)}),n.ua.push(async e=>{e?(n.Pa.D_(),Jg(n)?Zg(n):n.la.set("Unknown")):(await n.Pa.stop(),cT(n))})),n.Pa}function ys(n){return n.Ta||(n.Ta=function(t,i,a){const l=Ce(t);return l.Y_(),new H4(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)}(n.datastore,n.asyncQueue,{jo:()=>Promise.resolve(),Jo:eO.bind(null,n),Zo:rO.bind(null,n),z_:tO.bind(null,n),j_:nO.bind(null,n)}),n.ua.push(async e=>{e?(n.Ta.D_(),await Fh(n)):(await n.Ta.stop(),n.oa.length>0&&(fe(Ea,`Stopping write stream with ${n.oa.length} pending writes`),n.oa=[]))})),n.Ta}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ey{constructor(e,t,i,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=a,this.removalCallback=l,this.deferred=new fi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,a,l){const c=Date.now()+i,f=new ey(e,t,c,a,l);return f.start(i),f}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new he(ne.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ty(n,e){if(vi("AsyncQueue",`${e}: ${n}`),Qo(n))return new he(ne.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{static emptySet(e){return new Io(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||_e.comparator(t.key,i.key):(t,i)=>_e.comparator(t.key,i.key),this.keyedMap=vu(),this.sortedSet=new ht(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Io)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=i.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Io;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uE{constructor(){this.Ia=new ht(_e.comparator)}track(e){const t=e.doc.key,i=this.Ia.get(t);i?e.type!==0&&i.type===3?this.Ia=this.Ia.insert(t,e):e.type===3&&i.type!==1?this.Ia=this.Ia.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.Ia=this.Ia.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.Ia=this.Ia.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.Ia=this.Ia.remove(t):e.type===1&&i.type===2?this.Ia=this.Ia.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.Ia=this.Ia.insert(t,{type:2,doc:e.doc}):xe(63341,{Vt:e,Ea:i}):this.Ia=this.Ia.insert(t,e)}da(){const e=[];return this.Ia.inorderTraversal((t,i)=>{e.push(i)}),e}}class Uo{constructor(e,t,i,a,l,c,f,m,g){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=a,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=f,this.excludesMetadataChanges=m,this.hasCachedResults=g}static fromInitialDocuments(e,t,i,a,l){const c=[];return t.forEach(f=>{c.push({type:0,doc:f})}),new Uo(e,t,Io.emptySet(t),c,i,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Vh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==i[a].type||!t[a].doc.isEqual(i[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sO{constructor(){this.Aa=void 0,this.Ra=[]}Va(){return this.Ra.some(e=>e.ma())}}class aO{constructor(){this.queries=cE(),this.onlineState="Unknown",this.fa=new Set}terminate(){(function(t,i){const a=Ce(t),l=a.queries;a.queries=cE(),l.forEach((c,f)=>{for(const m of f.Ra)m.onError(i)})})(this,new he(ne.ABORTED,"Firestore shutting down"))}}function cE(){return new Sa(n=>Pw(n),Vh)}async function mT(n,e){const t=Ce(n);let i=3;const a=e.query;let l=t.queries.get(a);l?!l.Va()&&e.ma()&&(i=2):(l=new sO,i=e.ma()?0:1);try{switch(i){case 0:l.Aa=await t.onListen(a,!0);break;case 1:l.Aa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(c){const f=ty(c,`Initialization of query '${To(e.query)}' failed`);return void e.onError(f)}t.queries.set(a,l),l.Ra.push(e),e.ga(t.onlineState),l.Aa&&e.pa(l.Aa)&&ny(t)}async function pT(n,e){const t=Ce(n),i=e.query;let a=3;const l=t.queries.get(i);if(l){const c=l.Ra.indexOf(e);c>=0&&(l.Ra.splice(c,1),l.Ra.length===0?a=e.ma()?0:1:!l.Va()&&e.ma()&&(a=2))}switch(a){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function oO(n,e){const t=Ce(n);let i=!1;for(const a of e){const l=a.query,c=t.queries.get(l);if(c){for(const f of c.Ra)f.pa(a)&&(i=!0);c.Aa=a}}i&&ny(t)}function lO(n,e,t){const i=Ce(n),a=i.queries.get(e);if(a)for(const l of a.Ra)l.onError(t);i.queries.delete(e)}function ny(n){n.fa.forEach(e=>{e.next()})}var ig,dE;(dE=ig||(ig={})).ya="default",dE.Cache="cache";class gT{constructor(e,t,i){this.query=e,this.wa=t,this.ba=!1,this.Sa=null,this.onlineState="Unknown",this.options=i||{}}pa(e){if(!this.options.includeMetadataChanges){const i=[];for(const a of e.docChanges)a.type!==3&&i.push(a);e=new Uo(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ba?this.Da(e)&&(this.wa.next(e),t=!0):this.va(e,this.onlineState)&&(this.Ca(e),t=!0),this.Sa=e,t}onError(e){this.wa.error(e)}ga(e){this.onlineState=e;let t=!1;return this.Sa&&!this.ba&&this.va(this.Sa,e)&&(this.Ca(this.Sa),t=!0),t}va(e,t){if(!e.fromCache||!this.ma())return!0;const i=t!=="Offline";return(!this.options.Fa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Da(e){if(e.docChanges.length>0)return!0;const t=this.Sa&&this.Sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Ca(e){e=Uo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ba=!0,this.wa.next(e)}ma(){return this.options.source!==ig.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yT{constructor(e){this.key=e}}class vT{constructor(e){this.key=e}}class uO{constructor(e,t){this.query=e,this.qa=t,this.Qa=null,this.hasCachedResults=!1,this.current=!1,this.$a=Le(),this.mutatedKeys=Le(),this.Ua=Mw(e),this.Ka=new Io(this.Ua)}get Wa(){return this.qa}Ga(e,t){const i=t?t.za:new uE,a=t?t.Ka:this.Ka;let l=t?t.mutatedKeys:this.mutatedKeys,c=a,f=!1;const m=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,g=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((v,w)=>{const T=a.get(v),C=Lh(this.query,w)?w:null,A=!!T&&this.mutatedKeys.has(T.key),U=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations);let I=!1;T&&C?T.data.isEqual(C.data)?A!==U&&(i.track({type:3,doc:C}),I=!0):this.ja(T,C)||(i.track({type:2,doc:C}),I=!0,(m&&this.Ua(C,m)>0||g&&this.Ua(C,g)<0)&&(f=!0)):!T&&C?(i.track({type:0,doc:C}),I=!0):T&&!C&&(i.track({type:1,doc:T}),I=!0,(m||g)&&(f=!0)),I&&(C?(c=c.add(C),l=U?l.add(v):l.delete(v)):(c=c.delete(v),l=l.delete(v)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const v=this.query.limitType==="F"?c.last():c.first();c=c.delete(v.key),l=l.delete(v.key),i.track({type:1,doc:v})}return{Ka:c,za:i,ys:f,mutatedKeys:l}}ja(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,a){const l=this.Ka;this.Ka=e.Ka,this.mutatedKeys=e.mutatedKeys;const c=e.za.da();c.sort((v,w)=>function(C,A){const U=I=>{switch(I){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return xe(20277,{Vt:I})}};return U(C)-U(A)}(v.type,w.type)||this.Ua(v.doc,w.doc)),this.Ha(i),a=a!=null&&a;const f=t&&!a?this.Ja():[],m=this.$a.size===0&&this.current&&!a?1:0,g=m!==this.Qa;return this.Qa=m,c.length!==0||g?{snapshot:new Uo(this.query,e.Ka,l,c,e.mutatedKeys,m===0,g,!1,!!i&&i.resumeToken.approximateByteSize()>0),Ya:f}:{Ya:f}}ga(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ka:this.Ka,za:new uE,mutatedKeys:this.mutatedKeys,ys:!1},!1)):{Ya:[]}}Za(e){return!this.qa.has(e)&&!!this.Ka.has(e)&&!this.Ka.get(e).hasLocalMutations}Ha(e){e&&(e.addedDocuments.forEach(t=>this.qa=this.qa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.qa=this.qa.delete(t)),this.current=e.current)}Ja(){if(!this.current)return[];const e=this.$a;this.$a=Le(),this.Ka.forEach(i=>{this.Za(i.key)&&(this.$a=this.$a.add(i.key))});const t=[];return e.forEach(i=>{this.$a.has(i)||t.push(new vT(i))}),this.$a.forEach(i=>{e.has(i)||t.push(new yT(i))}),t}Xa(e){this.qa=e.Ns,this.$a=Le();const t=this.Ga(e.documents);return this.applyChanges(t,!0)}eu(){return Uo.fromInitialDocuments(this.query,this.Ka,this.mutatedKeys,this.Qa===0,this.hasCachedResults)}}const ry="SyncEngine";class cO{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class dO{constructor(e){this.key=e,this.tu=!1}}class hO{constructor(e,t,i,a,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.nu={},this.ru=new Sa(f=>Pw(f),Vh),this.iu=new Map,this.su=new Set,this.ou=new ht(_e.comparator),this._u=new Map,this.au=new $g,this.uu={},this.cu=new Map,this.lu=Lo.ir(),this.onlineState="Unknown",this.hu=void 0}get isPrimaryClient(){return this.hu===!0}}async function fO(n,e,t=!0){const i=xT(n);let a;const l=i.ru.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.eu()):a=await _T(i,e,t,!0),a}async function mO(n,e){const t=xT(n);await _T(t,e,!0,!1)}async function _T(n,e,t,i){const a=await M4(n.localStore,Or(e)),l=a.targetId,c=n.sharedClientState.addLocalQueryTarget(l,t);let f;return i&&(f=await pO(n,e,l,c==="current",a.resumeToken)),n.isPrimaryClient&&t&&lT(n.remoteStore,a),f}async function pO(n,e,t,i,a){n.Pu=(w,T,C)=>async function(U,I,q,X){let Y=I.view.Ga(q);Y.ys&&(Y=await rE(U.localStore,I.query,!1).then(({documents:M})=>I.view.Ga(M,Y)));const de=X&&X.targetChanges.get(I.targetId),ue=X&&X.targetMismatches.get(I.targetId)!=null,ye=I.view.applyChanges(Y,U.isPrimaryClient,de,ue);return fE(U,I.targetId,ye.Ya),ye.snapshot}(n,w,T,C);const l=await rE(n.localStore,e,!0),c=new uO(e,l.Ns),f=c.Ga(l.documents),m=Wu.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",a),g=c.applyChanges(f,n.isPrimaryClient,m);fE(n,t,g.Ya);const v=new cO(e,t,c);return n.ru.set(e,v),n.iu.has(t)?n.iu.get(t).push(e):n.iu.set(t,[e]),g.snapshot}async function gO(n,e,t){const i=Ce(n),a=i.ru.get(e),l=i.iu.get(a.targetId);if(l.length>1)return i.iu.set(a.targetId,l.filter(c=>!Vh(c,e))),void i.ru.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(a.targetId),i.sharedClientState.isActiveQueryTarget(a.targetId)||await ng(i.localStore,a.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(a.targetId),t&&Xg(i.remoteStore,a.targetId),sg(i,a.targetId)}).catch(Ko)):(sg(i,a.targetId),await ng(i.localStore,a.targetId,!0))}async function yO(n,e){const t=Ce(n),i=t.ru.get(e),a=t.iu.get(i.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),Xg(t.remoteStore,i.targetId))}async function vO(n,e,t){const i=SO(n);try{const a=await function(c,f){const m=Ce(c),g=Pt.now(),v=f.reduce((C,A)=>C.add(A.key),Le());let w,T;return m.persistence.runTransaction("Locally write mutations","readwrite",C=>{let A=_i(),U=Le();return m.Cs.getEntries(C,v).next(I=>{A=I,A.forEach((q,X)=>{X.isValidDocument()||(U=U.add(q))})}).next(()=>m.localDocuments.getOverlayedDocuments(C,A)).next(I=>{w=I;const q=[];for(const X of f){const Y=MD(X,w.get(X.key).overlayedDocument);Y!=null&&q.push(new Ts(X.key,Y,Sw(Y.value.mapValue),ir.exists(!0)))}return m.mutationQueue.addMutationBatch(C,g,q,f)}).next(I=>{T=I;const q=I.applyToLocalDocumentSet(w,U);return m.documentOverlayCache.saveOverlays(C,I.batchId,q)})}).then(()=>({batchId:T.batchId,changes:kw(w)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(a.batchId),function(c,f,m){let g=c.uu[c.currentUser.toKey()];g||(g=new ht(Oe)),g=g.insert(f,m),c.uu[c.currentUser.toKey()]=g}(i,a.batchId,t),await Ju(i,a.changes),await Fh(i.remoteStore)}catch(a){const l=ty(a,"Failed to persist write");t.reject(l)}}async function bT(n,e){const t=Ce(n);try{const i=await D4(t.localStore,e);e.targetChanges.forEach((a,l)=>{const c=t._u.get(l);c&&(Ye(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?c.tu=!0:a.modifiedDocuments.size>0?Ye(c.tu,14607):a.removedDocuments.size>0&&(Ye(c.tu,42227),c.tu=!1))}),await Ju(t,i,e)}catch(i){await Ko(i)}}function hE(n,e,t){const i=Ce(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const a=[];i.ru.forEach((l,c)=>{const f=c.view.ga(e);f.snapshot&&a.push(f.snapshot)}),function(c,f){const m=Ce(c);m.onlineState=f;let g=!1;m.queries.forEach((v,w)=>{for(const T of w.Ra)T.ga(f)&&(g=!0)}),g&&ny(m)}(i.eventManager,e),a.length&&i.nu.Q_(a),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function _O(n,e,t){const i=Ce(n);i.sharedClientState.updateQueryState(e,"rejected",t);const a=i._u.get(e),l=a&&a.key;if(l){let c=new ht(_e.comparator);c=c.insert(l,sn.newNoDocument(l,Re.min()));const f=Le().add(l),m=new Bh(Re.min(),new Map,new ht(Oe),c,f);await bT(i,m),i.ou=i.ou.remove(l),i._u.delete(e),iy(i)}else await ng(i.localStore,e,!1).then(()=>sg(i,e,t)).catch(Ko)}async function bO(n,e){const t=Ce(n),i=e.batch.batchId;try{const a=await I4(t.localStore,e);wT(t,i,null),ET(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Ju(t,a)}catch(a){await Ko(a)}}async function EO(n,e,t){const i=Ce(n);try{const a=await function(c,f){const m=Ce(c);return m.persistence.runTransaction("Reject batch","readwrite-primary",g=>{let v;return m.mutationQueue.lookupMutationBatch(g,f).next(w=>(Ye(w!==null,37113),v=w.keys(),m.mutationQueue.removeMutationBatch(g,w))).next(()=>m.mutationQueue.performConsistencyCheck(g)).next(()=>m.documentOverlayCache.removeOverlaysForBatchId(g,v,f)).next(()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,v)).next(()=>m.localDocuments.getDocuments(g,v))})}(i.localStore,e);wT(i,e,t),ET(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Ju(i,a)}catch(a){await Ko(a)}}function ET(n,e){(n.cu.get(e)||[]).forEach(t=>{t.resolve()}),n.cu.delete(e)}function wT(n,e,t){const i=Ce(n);let a=i.uu[i.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),i.uu[i.currentUser.toKey()]=a}}function sg(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.iu.get(e))n.ru.delete(i),t&&n.nu.Tu(i,t);n.iu.delete(e),n.isPrimaryClient&&n.au.Ur(e).forEach(i=>{n.au.containsKey(i)||TT(n,i)})}function TT(n,e){n.su.delete(e.path.canonicalString());const t=n.ou.get(e);t!==null&&(Xg(n.remoteStore,t),n.ou=n.ou.remove(e),n._u.delete(t),iy(n))}function fE(n,e,t){for(const i of t)i instanceof yT?(n.au.addReference(i.key,e),wO(n,i)):i instanceof vT?(fe(ry,"Document no longer in limbo: "+i.key),n.au.removeReference(i.key,e),n.au.containsKey(i.key)||TT(n,i.key)):xe(19791,{Iu:i})}function wO(n,e){const t=e.key,i=t.path.canonicalString();n.ou.get(t)||n.su.has(i)||(fe(ry,"New document in limbo: "+t),n.su.add(i),iy(n))}function iy(n){for(;n.su.size>0&&n.ou.size<n.maxConcurrentLimboResolutions;){const e=n.su.values().next().value;n.su.delete(e);const t=new _e(st.fromString(e)),i=n.lu.next();n._u.set(i,new dO(t)),n.ou=n.ou.insert(t,i),lT(n.remoteStore,new os(Or(Bg(t.path)),i,"TargetPurposeLimboResolution",Mh.le))}}async function Ju(n,e,t){const i=Ce(n),a=[],l=[],c=[];i.ru.isEmpty()||(i.ru.forEach((f,m)=>{c.push(i.Pu(m,e,t).then(g=>{var v;if((g||t)&&i.isPrimaryClient){const w=g?!g.fromCache:(v=t==null?void 0:t.targetChanges.get(m.targetId))===null||v===void 0?void 0:v.current;i.sharedClientState.updateQueryState(m.targetId,w?"current":"not-current")}if(g){a.push(g);const w=Kg.Ps(m.targetId,g);l.push(w)}}))}),await Promise.all(c),i.nu.Q_(a),await async function(m,g){const v=Ce(m);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",w=>ie.forEach(g,T=>ie.forEach(T.ls,C=>v.persistence.referenceDelegate.addReference(w,T.targetId,C)).next(()=>ie.forEach(T.hs,C=>v.persistence.referenceDelegate.removeReference(w,T.targetId,C)))))}catch(w){if(!Qo(w))throw w;fe(Qg,"Failed to update sequence numbers: "+w)}for(const w of g){const T=w.targetId;if(!w.fromCache){const C=v.Ss.get(T),A=C.snapshotVersion,U=C.withLastLimboFreeSnapshotVersion(A);v.Ss=v.Ss.insert(T,U)}}}(i.localStore,l))}async function TO(n,e){const t=Ce(n);if(!t.currentUser.isEqual(e)){fe(ry,"User change. New user:",e.toKey());const i=await iT(t.localStore,e);t.currentUser=e,function(l,c){l.cu.forEach(f=>{f.forEach(m=>{m.reject(new he(ne.CANCELLED,c))})}),l.cu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Ju(t,i.Ms)}}function xO(n,e){const t=Ce(n),i=t._u.get(e);if(i&&i.tu)return Le().add(i.key);{let a=Le();const l=t.iu.get(e);if(!l)return a;for(const c of l){const f=t.ru.get(c);a=a.unionWith(f.view.Wa)}return a}}function xT(n){const e=Ce(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=bT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=xO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=_O.bind(null,e),e.nu.Q_=oO.bind(null,e.eventManager),e.nu.Tu=lO.bind(null,e.eventManager),e}function SO(n){const e=Ce(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=bO.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=EO.bind(null,e),e}class vh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=qh(e.databaseInfo.databaseId),this.sharedClientState=this.Au(e),this.persistence=this.Ru(e),await this.persistence.start(),this.localStore=this.Vu(e),this.gcScheduler=this.mu(e,this.localStore),this.indexBackfillerScheduler=this.fu(e,this.localStore)}mu(e,t){return null}fu(e,t){return null}Vu(e){return N4(this.persistence,new A4,e.initialUser,this.serializer)}Ru(e){return new rT(Yg.Ei,this.serializer)}Au(e){return new k4}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}vh.provider={build:()=>new vh};class AO extends vh{constructor(e){super(),this.cacheSizeBytes=e}mu(e,t){Ye(this.persistence.referenceDelegate instanceof gh,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new d4(i,e.asyncQueue,t)}Ru(e){const t=this.cacheSizeBytes!==void 0?vn.withCacheSize(this.cacheSizeBytes):vn.DEFAULT;return new rT(i=>gh.Ei(i,t),this.serializer)}}class ag{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>hE(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=TO.bind(null,this.syncEngine),await iO(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new aO}()}createDatastore(e){const t=qh(e.databaseInfo.databaseId),i=function(l){return new B4(l)}(e.databaseInfo);return function(l,c,f,m){return new G4(l,c,f,m)}(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return function(i,a,l,c,f){return new Y4(i,a,l,c,f)}(this.localStore,this.datastore,e.asyncQueue,t=>hE(this.syncEngine,t,0),function(){return aE.C()?new aE:new V4}())}createSyncEngine(e,t){return function(a,l,c,f,m,g,v){const w=new hO(a,l,c,f,m,g);return v&&(w.hu=!0),w}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(a){const l=Ce(a);fe(Ea,"RemoteStore shutting down."),l.aa.add(5),await Zu(l),l.ca.shutdown(),l.la.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}ag.provider={build:()=>new ag};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ST{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.pu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.pu(this.observer.error,e):vi("Uncaught Error in snapshot listener:",e.toString()))}yu(){this.muted=!0}pu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vs="FirestoreClient";class RO{constructor(e,t,i,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=a,this.user=rn.UNAUTHENTICATED,this.clientId=pw.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,async c=>{fe(vs,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(i,c=>(fe(vs,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new fi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=ty(t,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function Cp(n,e){n.asyncQueue.verifyOperationInProgress(),fe(vs,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(async a=>{i.isEqual(a)||(await iT(e.localStore,a),i=a)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function mE(n,e){n.asyncQueue.verifyOperationInProgress();const t=await CO(n);fe(vs,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(i=>lE(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>lE(e.remoteStore,a)),n._onlineComponents=e}async function CO(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){fe(vs,"Using user provided OfflineComponentProvider");try{await Cp(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(a){return a.name==="FirebaseError"?a.code===ne.FAILED_PRECONDITION||a.code===ne.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(t))throw t;Mo("Error using user provided cache. Falling back to memory cache: "+t),await Cp(n,new vh)}}else fe(vs,"Using default OfflineComponentProvider"),await Cp(n,new AO(void 0));return n._offlineComponents}async function AT(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(fe(vs,"Using user provided OnlineComponentProvider"),await mE(n,n._uninitializedComponentsProvider._online)):(fe(vs,"Using default OnlineComponentProvider"),await mE(n,new ag))),n._onlineComponents}function NO(n){return AT(n).then(e=>e.syncEngine)}async function RT(n){const e=await AT(n),t=e.eventManager;return t.onListen=fO.bind(null,e.syncEngine),t.onUnlisten=gO.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=mO.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=yO.bind(null,e.syncEngine),t}function IO(n,e,t={}){const i=new fi;return n.asyncQueue.enqueueAndForget(async()=>function(l,c,f,m,g){const v=new ST({next:T=>{v.yu(),c.enqueueAndForget(()=>pT(l,w));const C=T.docs.has(f);!C&&T.fromCache?g.reject(new he(ne.UNAVAILABLE,"Failed to get document because the client is offline.")):C&&T.fromCache&&m&&m.source==="server"?g.reject(new he(ne.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(T)},error:T=>g.reject(T)}),w=new gT(Bg(f.path),v,{includeMetadataChanges:!0,Fa:!0});return mT(l,w)}(await RT(n),n.asyncQueue,e,t,i)),i.promise}function DO(n,e,t={}){const i=new fi;return n.asyncQueue.enqueueAndForget(async()=>function(l,c,f,m,g){const v=new ST({next:T=>{v.yu(),c.enqueueAndForget(()=>pT(l,w)),T.fromCache&&m.source==="server"?g.reject(new he(ne.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(T)},error:T=>g.reject(T)}),w=new gT(f,v,{includeMetadataChanges:!0,Fa:!0});return mT(l,w)}(await RT(n),n.asyncQueue,e,t,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CT(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pE=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NT(n,e,t){if(!t)throw new he(ne.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function OO(n,e,t,i){if(e===!0&&i===!0)throw new he(ne.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function gE(n){if(!_e.isDocumentKey(n))throw new he(ne.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function yE(n){if(_e.isDocumentKey(n))throw new he(ne.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Gh(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":xe(12329,{type:typeof n})}function jr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new he(ne.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Gh(n);throw new he(ne.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function PO(n,e){if(e<=0)throw new he(ne.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IT="firestore.googleapis.com",vE=!0;class _E{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new he(ne.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=IT,this.ssl=vE}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:vE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=nT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<u4)throw new he(ne.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}OO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=CT((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new he(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new he(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new he(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,a){return i.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class $h{constructor(e,t,i,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new _E({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new he(ne.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new he(ne.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new _E(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new UI;switch(i.type){case"firstParty":return new HI(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new he(ne.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,Ih("Firestore",this._settings.isUsingEmulator),this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const i=pE.get(t);i&&(fe("ComponentProvider","Removing Datastore"),pE.delete(t),i.terminate())}(this),Promise.resolve()}}function MO(n,e,t,i={}){var a;n=jr(n,$h);const l=Hu(e),c=n._getSettings(),f=Object.assign(Object.assign({},c),{emulatorOptions:n._getEmulatorOptions()}),m=`${e}:${t}`;c.host!==IT&&c.host!==m&&Mo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g=Object.assign(Object.assign({},c),{host:m,ssl:l,emulatorOptions:i});if(!ga(g,f)&&(n._setSettings(g),l&&(_1(`https://${m}`),Ih("Firestore",!0)),i.mockUserToken)){let v,w;if(typeof i.mockUserToken=="string")v=i.mockUserToken,w=rn.MOCK_USER;else{v=YR(i.mockUserToken,(a=n._app)===null||a===void 0?void 0:a.options.projectId);const T=i.mockUserToken.sub||i.mockUserToken.user_id;if(!T)throw new he(ne.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");w=new rn(T)}n._authCredentials=new zI(new fw(v,w))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new xs(this.firestore,e,this._query)}}class fn{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new hs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new fn(this.firestore,e,this._key)}}class hs extends xs{constructor(e,t,i){super(e,t,Bg(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new fn(this.firestore,null,new _e(e))}withConverter(e){return new hs(this.firestore,e,this._path)}}function kr(n,e,...t){if(n=jt(n),NT("collection","path",e),n instanceof $h){const i=st.fromString(e,...t);return yE(i),new hs(n,null,i)}{if(!(n instanceof fn||n instanceof hs))throw new he(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(st.fromString(e,...t));return yE(i),new hs(n.firestore,null,i)}}function gt(n,e,...t){if(n=jt(n),arguments.length===1&&(e=pw.newId()),NT("doc","path",e),n instanceof $h){const i=st.fromString(e,...t);return gE(i),new fn(n,null,new _e(i))}{if(!(n instanceof fn||n instanceof hs))throw new he(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(st.fromString(e,...t));return gE(i),new fn(n.firestore,n instanceof hs?n.converter:null,new _e(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bE="AsyncQueue";class EE{constructor(e=Promise.resolve()){this.Qu=[],this.$u=!1,this.Uu=[],this.Ku=null,this.Wu=!1,this.Gu=!1,this.zu=[],this.y_=new aT(this,"async_queue_retry"),this.ju=()=>{const i=Rp();i&&fe(bE,"Visibility state changed to "+i.visibilityState),this.y_.A_()},this.Hu=e;const t=Rp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.ju)}get isShuttingDown(){return this.$u}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ju(),this.Yu(e)}enterRestrictedMode(e){if(!this.$u){this.$u=!0,this.Gu=e||!1;const t=Rp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.ju)}}enqueue(e){if(this.Ju(),this.$u)return new Promise(()=>{});const t=new fi;return this.Yu(()=>this.$u&&this.Gu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qu.push(e),this.Zu()))}async Zu(){if(this.Qu.length!==0){try{await this.Qu[0](),this.Qu.shift(),this.y_.reset()}catch(e){if(!Qo(e))throw e;fe(bE,"Operation failed with retryable error: "+e)}this.Qu.length>0&&this.y_.E_(()=>this.Zu())}}Yu(e){const t=this.Hu.then(()=>(this.Wu=!0,e().catch(i=>{throw this.Ku=i,this.Wu=!1,vi("INTERNAL UNHANDLED ERROR: ",wE(i)),i}).then(i=>(this.Wu=!1,i))));return this.Hu=t,t}enqueueAfterDelay(e,t,i){this.Ju(),this.zu.indexOf(e)>-1&&(t=0);const a=ey.createAndSchedule(this,e,t,i,l=>this.Xu(l));return this.Uu.push(a),a}Ju(){this.Ku&&xe(47125,{ec:wE(this.Ku)})}verifyOperationInProgress(){}async tc(){let e;do e=this.Hu,await e;while(e!==this.Hu)}nc(e){for(const t of this.Uu)if(t.timerId===e)return!0;return!1}rc(e){return this.tc().then(()=>{this.Uu.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this.Uu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.tc()})}sc(e){this.zu.push(e)}Xu(e){const t=this.Uu.indexOf(e);this.Uu.splice(t,1)}}function wE(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Zo extends $h{constructor(e,t,i,a){super(e,t,i,a),this.type="firestore",this._queue=new EE,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new EE(e),this._firestoreClient=void 0,await e}}}function jO(n,e){const t=typeof n=="object"?n:T1(),i=typeof n=="string"?n:ch,a=Sg(t,"firestore").getImmediate({identifier:i});if(!a._initialized){const l=GR("firestore");l&&MO(a,...l)}return a}function sy(n){if(n._terminated)throw new he(ne.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||kO(n),n._firestoreClient}function kO(n){var e,t,i;const a=n._freezeSettings(),l=function(f,m,g,v){return new iD(f,m,g,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,CT(v.experimentalLongPollingOptions),v.useFetchStreams,v.isUsingEmulator)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,a);n._componentsProvider||!((t=a.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=a.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),n._firestoreClient=new RO(n._authCredentials,n._appCheckCredentials,n._queue,l,n._componentsProvider&&function(f){const m=f==null?void 0:f._online.build();return{_offline:f==null?void 0:f._offline.build(m),_online:m}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new zo(Zt.fromBase64String(e))}catch(t){throw new he(ne.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new zo(Zt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new he(ne.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Wt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ay{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new he(ne.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new he(ne.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Oe(this._lat,e._lat)||Oe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oy{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,a){if(i.length!==a.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==a[l])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VO=/^__.*__$/;class LO{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Ts(e,this.data,this.fieldMask,t,this.fieldTransforms):new Xu(e,this.data,t,this.fieldTransforms)}}class DT{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Ts(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function OT(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw xe(40011,{oc:n})}}class ly{constructor(e,t,i,a,l,c){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=a,l===void 0&&this._c(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get oc(){return this.settings.oc}ac(e){return new ly(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}uc(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),a=this.ac({path:i,cc:!1});return a.lc(e),a}hc(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),a=this.ac({path:i,cc:!1});return a._c(),a}Pc(e){return this.ac({path:void 0,cc:!0})}Tc(e){return _h(e,this.settings.methodName,this.settings.Ic||!1,this.path,this.settings.Ec)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}_c(){if(this.path)for(let e=0;e<this.path.length;e++)this.lc(this.path.get(e))}lc(e){if(e.length===0)throw this.Tc("Document fields must not be empty");if(OT(this.oc)&&VO.test(e))throw this.Tc('Document fields cannot begin and end with "__"')}}class UO{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||qh(e)}dc(e,t,i,a=!1){return new ly({oc:e,methodName:t,Ec:i,path:Wt.emptyPath(),cc:!1,Ic:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Qh(n){const e=n._freezeSettings(),t=qh(n._databaseId);return new UO(n._databaseId,!!e.ignoreUndefinedProperties,t)}function PT(n,e,t,i,a,l={}){const c=n.dc(l.merge||l.mergeFields?2:0,e,t,a);cy("Data must be an object, but it was:",c,i);const f=MT(i,c);let m,g;if(l.merge)m=new Dn(c.fieldMask),g=c.fieldTransforms;else if(l.mergeFields){const v=[];for(const w of l.mergeFields){const T=og(e,w,t);if(!c.contains(T))throw new he(ne.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);kT(v,T)||v.push(T)}m=new Dn(v),g=c.fieldTransforms.filter(w=>m.covers(w.field))}else m=null,g=c.fieldTransforms;return new LO(new _n(f),m,g)}class Xh extends Kh{_toFieldTransform(e){if(e.oc!==2)throw e.oc===1?e.Tc(`${this._methodName}() can only appear at the top level of your update data`):e.Tc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Xh}}class uy extends Kh{_toFieldTransform(e){return new ID(e.path,new ku)}isEqual(e){return e instanceof uy}}function zO(n,e,t,i){const a=n.dc(1,e,t);cy("Data must be an object, but it was:",a,i);const l=[],c=_n.empty();ws(i,(m,g)=>{const v=dy(e,m,t);g=jt(g);const w=a.hc(v);if(g instanceof Xh)l.push(v);else{const T=ec(g,w);T!=null&&(l.push(v),c.set(v,T))}});const f=new Dn(l);return new DT(c,f,a.fieldTransforms)}function BO(n,e,t,i,a,l){const c=n.dc(1,e,t),f=[og(e,i,t)],m=[a];if(l.length%2!=0)throw new he(ne.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<l.length;T+=2)f.push(og(e,l[T])),m.push(l[T+1]);const g=[],v=_n.empty();for(let T=f.length-1;T>=0;--T)if(!kT(g,f[T])){const C=f[T];let A=m[T];A=jt(A);const U=c.hc(C);if(A instanceof Xh)g.push(C);else{const I=ec(A,U);I!=null&&(g.push(C),v.set(C,I))}}const w=new Dn(g);return new DT(v,w,c.fieldTransforms)}function qO(n,e,t,i=!1){return ec(t,n.dc(i?4:3,e))}function ec(n,e){if(jT(n=jt(n)))return cy("Unsupported field value:",e,n),MT(n,e);if(n instanceof Kh)return function(i,a){if(!OT(a.oc))throw a.Tc(`${i._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Tc(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(a);l&&a.fieldTransforms.push(l)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.cc&&e.oc!==4)throw e.Tc("Nested arrays are not supported");return function(i,a){const l=[];let c=0;for(const f of i){let m=ec(f,a.Pc(c));m==null&&(m={nullValue:"NULL_VALUE"}),l.push(m),c++}return{arrayValue:{values:l}}}(n,e)}return function(i,a){if((i=jt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return RD(a.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=Pt.fromDate(i);return{timestampValue:ph(a.serializer,l)}}if(i instanceof Pt){const l=new Pt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:ph(a.serializer,l)}}if(i instanceof ay)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof zo)return{bytesValue:Qw(a.serializer,i._byteString)};if(i instanceof fn){const l=a.databaseId,c=i.firestore._databaseId;if(!c.isEqual(l))throw a.Tc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Gg(i.firestore._databaseId||a.databaseId,i._key.path)}}if(i instanceof oy)return function(c,f){return{mapValue:{fields:{[Tw]:{stringValue:xw},[dh]:{arrayValue:{values:c.toArray().map(g=>{if(typeof g!="number")throw f.Tc("VectorValues must only contain numeric values.");return qg(f.serializer,g)})}}}}}}(i,a);throw a.Tc(`Unsupported field value: ${Gh(i)}`)}(n,e)}function MT(n,e){const t={};return yw(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ws(n,(i,a)=>{const l=ec(a,e.uc(i));l!=null&&(t[i]=l)}),{mapValue:{fields:t}}}function jT(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Pt||n instanceof ay||n instanceof zo||n instanceof fn||n instanceof Kh||n instanceof oy)}function cy(n,e,t){if(!jT(t)||!function(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)}(t)){const i=Gh(t);throw i==="an object"?e.Tc(n+" a custom object"):e.Tc(n+" "+i)}}function og(n,e,t){if((e=jt(e))instanceof Yh)return e._internalPath;if(typeof e=="string")return dy(n,e);throw _h("Field path arguments must be of type string or ",n,!1,void 0,t)}const HO=new RegExp("[~\\*/\\[\\]]");function dy(n,e,t){if(e.search(HO)>=0)throw _h(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Yh(...e.split("."))._internalPath}catch{throw _h(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function _h(n,e,t,i,a){const l=i&&!i.isEmpty(),c=a!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let m="";return(l||c)&&(m+=" (found",l&&(m+=` in field ${i}`),c&&(m+=` in document ${a}`),m+=")"),new he(ne.INVALID_ARGUMENT,f+n+m)}function kT(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VT{constructor(e,t,i,a,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new fn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new FO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Wh("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class FO extends VT{data(){return super.data()}}function Wh(n,e){return typeof e=="string"?dy(n,e):e instanceof Yh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GO(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new he(ne.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class hy{}class fy extends hy{}function bi(n,e,...t){let i=[];e instanceof hy&&i.push(e),i=i.concat(t),function(l){const c=l.filter(m=>m instanceof my).length,f=l.filter(m=>m instanceof Zh).length;if(c>1||c>0&&f>0)throw new he(ne.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const a of i)n=a._apply(n);return n}class Zh extends fy{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new Zh(e,t,i)}_apply(e){const t=this._parse(e);return LT(e._query,t),new xs(e.firestore,e.converter,Wp(e._query,t))}_parse(e){const t=Qh(e.firestore);return function(l,c,f,m,g,v,w){let T;if(g.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new he(ne.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){xE(w,v);const A=[];for(const U of w)A.push(TE(m,l,U));T={arrayValue:{values:A}}}else T=TE(m,l,w)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||xE(w,v),T=qO(f,c,w,v==="in"||v==="not-in");return Rt.create(g,v,T)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Kn(n,e,t){const i=e,a=Wh("where",n);return Zh._create(a,i,t)}class my extends hy{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new my(e,t)}_parse(e){const t=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return t.length===1?t[0]:ar.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(a,l){let c=a;const f=l.getFlattenedFilters();for(const m of f)LT(c,m),c=Wp(c,m)}(e._query,t),new xs(e.firestore,e.converter,Wp(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class py extends fy{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new py(e,t)}_apply(e){const t=function(a,l,c){if(a.startAt!==null)throw new he(ne.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new he(ne.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ju(l,c)}(e._query,this._field,this._direction);return new xs(e.firestore,e.converter,function(a,l){const c=a.explicitOrderBy.concat([l]);return new Xo(a.path,a.collectionGroup,c,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(e._query,t))}}function Ei(n,e="asc"){const t=e,i=Wh("orderBy",n);return py._create(i,t)}class gy extends fy{constructor(e,t,i){super(),this.type=e,this._limit=t,this._limitType=i}static _create(e,t,i){return new gy(e,t,i)}_apply(e){return new xs(e.firestore,e.converter,fh(e._query,this._limit,this._limitType))}}function _s(n){return PO("limit",n),gy._create("limit",n,"F")}function TE(n,e,t){if(typeof(t=jt(t))=="string"){if(t==="")throw new he(ne.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ow(e)&&t.indexOf("/")!==-1)throw new he(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(st.fromString(t));if(!_e.isDocumentKey(i))throw new he(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Lb(n,new _e(i))}if(t instanceof fn)return Lb(n,t._key);throw new he(ne.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Gh(t)}.`)}function xE(n,e){if(!Array.isArray(n)||n.length===0)throw new he(ne.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function LT(n,e){const t=function(a,l){for(const c of a)for(const f of c.getFlattenedFilters())if(l.indexOf(f.op)>=0)return f.op;return null}(n.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new he(ne.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new he(ne.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class $O{convertValue(e,t="none"){switch(gs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Et(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ps(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw xe(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return ws(e,(a,l)=>{i[a]=this.convertValue(l,t)}),i}convertVectorValue(e){var t,i,a;const l=(a=(i=(t=e.fields)===null||t===void 0?void 0:t[dh].arrayValue)===null||i===void 0?void 0:i.values)===null||a===void 0?void 0:a.map(c=>Et(c.doubleValue));return new oy(l)}convertGeoPoint(e){return new ay(Et(e.latitude),Et(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=kh(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Ou(e));default:return null}}convertTimestamp(e){const t=ms(e);return new Pt(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=st.fromString(e);Ye(tT(i),9688,{name:e});const a=new Pu(i.get(1),i.get(3)),l=new _e(i.popFirst(5));return a.isEqual(t)||vi(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UT(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class zT extends VT{constructor(e,t,i,a,l,c){super(e,t,i,a,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Kd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(Wh("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class Kd extends zT{data(e={}){return super.data(e)}}class YO{constructor(e,t,i,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new bu(a.hasPendingWrites,a.fromCache),this.query=i}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new Kd(this._firestore,this._userDataWriter,i.key,i,new bu(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new he(ne.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(a,l){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map(f=>{const m=new Kd(a._firestore,a._userDataWriter,f.doc.key,f.doc,new bu(a._snapshot.mutatedKeys.has(f.doc.key),a._snapshot.fromCache),a.query.converter);return f.doc,{type:"added",doc:m,oldIndex:-1,newIndex:c++}})}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(f=>l||f.type!==3).map(f=>{const m=new Kd(a._firestore,a._userDataWriter,f.doc.key,f.doc,new bu(a._snapshot.mutatedKeys.has(f.doc.key),a._snapshot.fromCache),a.query.converter);let g=-1,v=-1;return f.type!==0&&(g=c.indexOf(f.doc.key),c=c.delete(f.doc.key)),f.type!==1&&(c=c.add(f.doc),v=c.indexOf(f.doc.key)),{type:KO(f.type),doc:m,oldIndex:g,newIndex:v}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function KO(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return xe(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function On(n){n=jr(n,fn);const e=jr(n.firestore,Zo);return IO(sy(e),n._key).then(t=>XO(e,n,t))}class BT extends $O{constructor(e){super(),this.firestore=e}convertBytes(e){return new zo(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new fn(this.firestore,null,t)}}function Ra(n){n=jr(n,xs);const e=jr(n.firestore,Zo),t=sy(e),i=new BT(e);return GO(n._query),DO(t,n._query).then(a=>new YO(e,i,n,a))}function yy(n,e,t){n=jr(n,fn);const i=jr(n.firestore,Zo),a=UT(n.converter,e,t);return vy(i,[PT(Qh(i),"setDoc",n._key,a,n.converter!==null,t).toMutation(n._key,ir.none())])}function Pn(n,e,t,...i){n=jr(n,fn);const a=jr(n.firestore,Zo),l=Qh(a);let c;return c=typeof(e=jt(e))=="string"||e instanceof Yh?BO(l,"updateDoc",n._key,e,t,i):zO(l,"updateDoc",n._key,e),vy(a,[c.toMutation(n._key,ir.exists(!0))])}function QO(n,e){const t=jr(n.firestore,Zo),i=gt(n),a=UT(n.converter,e);return vy(t,[PT(Qh(n.firestore),"addDoc",i._key,a,n.converter!==null,{}).toMutation(i._key,ir.exists(!1))]).then(()=>i)}function vy(n,e){return function(i,a){const l=new fi;return i.asyncQueue.enqueueAndForget(async()=>vO(await NO(i),a,l)),l.promise}(sy(n),e)}function XO(n,e,t){const i=t.docs.get(e._key),a=new BT(n);return new zT(n,a,e._key,i,new bu(t.hasPendingWrites,t.fromCache),e.converter)}function lt(){return new uy("serverTimestamp")}(function(e,t=!0){(function(a){Yo=a})(Go),Oo(new ya("firestore",(i,{instanceIdentifier:a,options:l})=>{const c=i.getProvider("app").getImmediate(),f=new Zo(new BI(i.getProvider("auth-internal")),new FI(c,i.getProvider("app-check-internal")),function(g,v){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new he(ne.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Pu(g.options.projectId,v)}(c,a),c);return l=Object.assign({useFetchStreams:t},l),f._setSettings(l),f},"PUBLIC").setMultipleInstances(!0)),cs(Ab,Rb,e),cs(Ab,Rb,"esm2017")})();const WO={apiKey:"AIzaSyApEi7CgbADU0urEtkdRBheJubnyEA-qnw",authDomain:"acriventas-poc.firebaseapp.com",databaseURL:"https://acriventas-poc-default-rtdb.firebaseio.com",projectId:"acriventas-poc",storageBucket:"acriventas-poc.firebasestorage.app",messagingSenderId:"718850780341",appId:"1:718850780341:web:aec07ccdad37235dece2fc",measurementId:"G-0DGH1RQX2G"},qT=w1(WO),Jh=jI(qT),Ge=jO(qT),ZO=async(n,e,t,i="agent")=>{try{const l=(await yN(Jh,n,e)).user;return await bN(l,{displayName:t}),await yy(gt(Ge,"users",l.uid),{uid:l.uid,email:n,displayName:t,role:i,createdAt:lt(),lastLogin:lt()}),l}catch(a){throw console.error("Error al registrar usuario:",a),a}},JO=async(n,e)=>{try{const t=await vN(Jh,n,e);return await yy(gt(Ge,"users",t.user.uid),{lastLogin:lt()},{merge:!0}),t.user}catch(t){throw console.error("Error al iniciar sesión:",t),t}},e6=async()=>xN(Jh),t6=async n=>{try{const e=await On(gt(Ge,"users",n));return e.exists()?e.data():null}catch(e){throw console.error("Error al obtener datos del usuario:",e),e}},HT=V.createContext(),tc=()=>V.useContext(HT),n6=({children:n})=>{const[e,t]=V.useState(null),[i,a]=V.useState(null),[l,c]=V.useState(!0);V.useEffect(()=>TN(Jh,async g=>{if(t(g),g)try{const v=await t6(g.uid);a(v)}catch(v){console.error("Error al cargar detalles del usuario:",v)}else a(null);c(!1)}),[]);const f={currentUser:e,userDetails:i,isAdmin:(i==null?void 0:i.role)==="admin",isAgent:(i==null?void 0:i.role)==="agent",loading:l};return y.jsx(HT.Provider,{value:f,children:!l&&n})},r6=()=>{const[n,e]=V.useState(""),[t,i]=V.useState(""),[a,l]=V.useState(""),[c,f]=V.useState(!1),m=mn(),g=async v=>{v.preventDefault();try{l(""),f(!0),await JO(n,t),m("/")}catch(w){l("Credenciales incorrectas. Intente nuevamente."),console.error(w)}finally{f(!1)}};return y.jsx("div",{className:"min-h-screen bg-gradient-to-b from-gray-800 to-gray-900 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:y.jsxs("div",{className:"max-w-md w-full space-y-8 bg-white p-10 rounded-xl shadow-2xl",children:[y.jsxs("div",{children:[y.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Sistema de Cobranza Adaptativa"}),y.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Inicie sesión para continuar"})]}),a&&y.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-md",role:"alert",children:y.jsx("span",{className:"block sm:inline",children:a})}),y.jsxs("form",{className:"mt-8 space-y-6",onSubmit:g,children:[y.jsxs("div",{className:"rounded-md space-y-4",children:[y.jsxs("div",{children:[y.jsx("label",{htmlFor:"email-address",className:"block text-sm font-medium text-gray-700",children:"Email"}),y.jsx("input",{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,className:"appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Correo electrónico",value:n,onChange:v=>e(v.target.value)})]}),y.jsxs("div",{children:[y.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Contraseña"}),y.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,className:"appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Contraseña",value:t,onChange:v=>i(v.target.value)})]})]}),y.jsx("div",{children:y.jsx("button",{type:"submit",disabled:c,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:c?"Iniciando sesión...":"Iniciar sesión"})}),y.jsx("div",{className:"text-center text-sm",children:y.jsx(Ch,{to:"/register",className:"font-medium text-primary-600 hover:text-primary-500",children:"¿No tiene cuenta? Regístrese aquí"})})]})]})})},i6=()=>{const[n,e]=V.useState({displayName:"",email:"",password:"",passwordConfirm:""}),[t,i]=V.useState(""),[a,l]=V.useState(!1),c=mn(),f=g=>{const{name:v,value:w}=g.target;e(T=>({...T,[v]:w}))},m=async g=>{if(g.preventDefault(),n.password!==n.passwordConfirm)return i("Las contraseñas no coinciden");if(n.password.length<6)return i("La contraseña debe tener al menos 6 caracteres");try{i(""),l(!0),await ZO(n.email,n.password,n.displayName),c("/")}catch(v){console.error("Error al registrar:",v),i(v.code==="auth/email-already-in-use"?"Este correo ya está registrado":"Error al crear la cuenta. Intente nuevamente.")}finally{l(!1)}};return y.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:y.jsxs("div",{className:"max-w-md w-full space-y-8 bg-white p-10 rounded-lg shadow-md",children:[y.jsxs("div",{children:[y.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Crear nueva cuenta"}),y.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Complete el formulario para registrarse"})]}),t&&y.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:y.jsx("span",{className:"block sm:inline",children:t})}),y.jsxs("form",{className:"mt-8 space-y-6",onSubmit:m,children:[y.jsxs("div",{className:"rounded-md shadow-sm space-y-4",children:[y.jsxs("div",{children:[y.jsx("label",{htmlFor:"displayName",className:"sr-only",children:"Nombre completo"}),y.jsx("input",{id:"displayName",name:"displayName",type:"text",required:!0,className:"appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-primary-500 focus:border-primary-500 focus:z-10 sm:text-sm",placeholder:"Nombre completo",value:n.displayName,onChange:f})]}),y.jsxs("div",{children:[y.jsx("label",{htmlFor:"email-address",className:"sr-only",children:"Email"}),y.jsx("input",{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,className:"appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-primary-500 focus:border-primary-500 focus:z-10 sm:text-sm",placeholder:"Correo electrónico",value:n.email,onChange:f})]}),y.jsxs("div",{children:[y.jsx("label",{htmlFor:"password",className:"sr-only",children:"Contraseña"}),y.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"new-password",required:!0,className:"appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-primary-500 focus:border-primary-500 focus:z-10 sm:text-sm",placeholder:"Contraseña",value:n.password,onChange:f})]}),y.jsxs("div",{children:[y.jsx("label",{htmlFor:"passwordConfirm",className:"sr-only",children:"Confirmar contraseña"}),y.jsx("input",{id:"passwordConfirm",name:"passwordConfirm",type:"password",autoComplete:"new-password",required:!0,className:"appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-primary-500 focus:border-primary-500 focus:z-10 sm:text-sm",placeholder:"Confirmar contraseña",value:n.passwordConfirm,onChange:f})]})]}),y.jsx("div",{children:y.jsx("button",{type:"submit",disabled:a,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:a?"Creando cuenta...":"Registrarse"})}),y.jsx("div",{className:"text-center",children:y.jsx(Ch,{to:"/login",className:"text-sm text-primary-600 hover:text-primary-500",children:"¿Ya tiene una cuenta? Inicie sesión"})})]})]})})};var FT={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},SE=fa.createContext&&fa.createContext(FT),s6=["attr","size","title"];function a6(n,e){if(n==null)return{};var t=o6(n,e),i,a;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(n);for(a=0;a<l.length;a++)i=l[a],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}function o6(n,e){if(n==null)return{};var t={};for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)){if(e.indexOf(i)>=0)continue;t[i]=n[i]}return t}function bh(){return bh=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},bh.apply(this,arguments)}function AE(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),t.push.apply(t,i)}return t}function Eh(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?AE(Object(t),!0).forEach(function(i){l6(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):AE(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function l6(n,e,t){return e=u6(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function u6(n){var e=c6(n,"string");return typeof e=="symbol"?e:e+""}function c6(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function GT(n){return n&&n.map((e,t)=>fa.createElement(e.tag,Eh({key:t},e.attr),GT(e.child)))}function Si(n){return e=>fa.createElement(d6,bh({attr:Eh({},n.attr)},e),GT(n.child))}function d6(n){var e=t=>{var{attr:i,size:a,title:l}=n,c=a6(n,s6),f=a||t.size||"1em",m;return t.className&&(m=t.className),n.className&&(m=(m?m+" ":"")+n.className),fa.createElement("svg",bh({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,i,c,{className:m,style:Eh(Eh({color:n.color||t.color},t.style),n.style),height:f,width:f,xmlns:"http://www.w3.org/2000/svg"}),l&&fa.createElement("title",null,l),n.children)};return SE!==void 0?fa.createElement(SE.Consumer,null,t=>e(t)):e(FT)}function h6(n){return Si({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M496 384H64V80c0-8.84-7.16-16-16-16H16C7.16 64 0 71.16 0 80v336c0 17.67 14.33 32 32 32h464c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16zM464 96H345.94c-21.38 0-32.09 25.85-16.97 40.97l32.4 32.4L288 242.75l-73.37-73.37c-12.5-12.5-32.76-12.5-45.25 0l-68.69 68.69c-6.25 6.25-6.25 16.38 0 22.63l22.62 22.62c6.25 6.25 16.38 6.25 22.63 0L192 237.25l73.37 73.37c12.5 12.5 32.76 12.5 45.25 0l96-96 32.4 32.4c15.12 15.12 40.97 4.41 40.97-16.97V112c.01-8.84-7.15-16-15.99-16z"},child:[]}]})(n)}function f6(n){return Si({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14-11.1-35.6-30-67.8-54.7-94.6-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7-36.7-8.2-74.3-7.8-109.2 0-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3-24.7 26.7-43.6 58.9-54.7 94.6-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14 11.1 35.6 30 67.8 54.7 94.6 3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7 36.7 8.2 74.3 7.8 109.2 0 5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3 24.7-26.7 43.6-58.9 54.7-94.6 1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z"},child:[]}]})(n)}function m6(n){return Si({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M416 192c0-88.4-93.1-160-208-160S0 103.6 0 192c0 34.3 14.1 65.9 38 92-13.4 30.2-35.5 54.2-35.8 54.5-2.2 2.3-2.8 5.7-1.5 8.7S4.8 352 8 352c36.6 0 66.9-12.3 88.7-25 32.2 15.7 70.3 25 111.3 25 114.9 0 208-71.6 208-160zm122 220c23.9-26 38-57.7 38-92 0-66.9-53.5-124.2-129.3-148.1.9 6.6 1.3 13.3 1.3 20.1 0 105.9-107.7 192-240 192-10.8 0-21.3-.8-31.7-1.9C207.8 439.6 281.8 480 368 480c41 0 79.1-9.2 111.3-25 21.8 12.7 52.1 25 88.7 25 3.2 0 6.1-1.9 7.3-4.8 1.3-2.9.7-6.3-1.5-8.7-.3-.3-22.4-24.2-35.8-54.5z"},child:[]}]})(n)}function p6(n){return Si({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"},child:[]}]})(n)}function $T(n){return Si({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(n)}function g6(n){return Si({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M32,224H64V416H32A31.96166,31.96166,0,0,1,0,384V256A31.96166,31.96166,0,0,1,32,224Zm512-48V448a64.06328,64.06328,0,0,1-64,64H160a64.06328,64.06328,0,0,1-64-64V176a79.974,79.974,0,0,1,80-80H288V32a32,32,0,0,1,64,0V96H464A79.974,79.974,0,0,1,544,176ZM264,256a40,40,0,1,0-40,40A39.997,39.997,0,0,0,264,256Zm-8,128H192v32h64Zm96,0H288v32h64ZM456,256a40,40,0,1,0-40,40A39.997,39.997,0,0,0,456,256Zm-8,128H384v32h64ZM640,256V384a31.96166,31.96166,0,0,1-32,32H576V224h32A31.96166,31.96166,0,0,1,640,256Z"},child:[]}]})(n)}function YT(n){return Si({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"},child:[]}]})(n)}function y6(n){return Si({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M192 256c61.9 0 112-50.1 112-112S253.9 32 192 32 80 82.1 80 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C51.6 288 0 339.6 0 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zM480 256c53 0 96-43 96-96s-43-96-96-96-96 43-96 96 43 96 96 96zm48 32h-3.8c-13.9 4.8-28.6 8-44.2 8s-30.3-3.2-44.2-8H432c-20.4 0-39.2 5.9-55.7 15.4 24.4 26.3 39.7 61.2 39.7 99.8v38.4c0 2.2-.5 4.3-.6 6.4H592c26.5 0 48-21.5 48-48 0-61.9-50.1-112-112-112z"},child:[]}]})(n)}function v6(n){return Si({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M624 208h-64v-64c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v64h-64c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h64v64c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-64h64c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zm-400 48c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(n)}const _6=()=>{const n=mn();return y.jsxs("div",{className:"flex flex-wrap gap-4 mb-8",children:[y.jsxs("button",{onClick:()=>n("/conversation/new"),className:"btn-primary flex items-center gap-2",children:[y.jsx($T,{})," Iniciar Conversación"]}),y.jsxs("button",{onClick:()=>n("/clients/search"),className:"btn-secondary flex items-center gap-2",children:[y.jsx(YT,{})," Buscar Cliente"]}),y.jsxs("button",{onClick:()=>n("/clients/new"),className:"btn-secondary flex items-center gap-2",children:[y.jsx(v6,{})," Agregar Cliente"]})]})},KT=6048e5,b6=864e5,kd=43200,RE=1440,CE=Symbol.for("constructDateFrom");function wi(n,e){return typeof n=="function"?n(e):n&&typeof n=="object"&&CE in n?n[CE](e):n instanceof Date?new n.constructor(e):new Date(e)}function Ht(n,e){return wi(e||n,n)}let E6={};function nc(){return E6}function Uu(n,e){var f,m,g,v;const t=nc(),i=(e==null?void 0:e.weekStartsOn)??((m=(f=e==null?void 0:e.locale)==null?void 0:f.options)==null?void 0:m.weekStartsOn)??t.weekStartsOn??((v=(g=t.locale)==null?void 0:g.options)==null?void 0:v.weekStartsOn)??0,a=Ht(n,e==null?void 0:e.in),l=a.getDay(),c=(l<i?7:0)+l-i;return a.setDate(a.getDate()-c),a.setHours(0,0,0,0),a}function wh(n,e){return Uu(n,{...e,weekStartsOn:1})}function QT(n,e){const t=Ht(n,e==null?void 0:e.in),i=t.getFullYear(),a=wi(t,0);a.setFullYear(i+1,0,4),a.setHours(0,0,0,0);const l=wh(a),c=wi(t,0);c.setFullYear(i,0,4),c.setHours(0,0,0,0);const f=wh(c);return t.getTime()>=l.getTime()?i+1:t.getTime()>=f.getTime()?i:i-1}function Th(n){const e=Ht(n),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+n-+t}function ef(n,...e){const t=wi.bind(null,n||e.find(i=>typeof i=="object"));return e.map(t)}function NE(n,e){const t=Ht(n,e==null?void 0:e.in);return t.setHours(0,0,0,0),t}function w6(n,e,t){const[i,a]=ef(t==null?void 0:t.in,n,e),l=NE(i),c=NE(a),f=+l-Th(l),m=+c-Th(c);return Math.round((f-m)/b6)}function T6(n,e){const t=QT(n,e),i=wi(n,0);return i.setFullYear(t,0,4),i.setHours(0,0,0,0),wh(i)}function Qd(n,e){const t=+Ht(n)-+Ht(e);return t<0?-1:t>0?1:t}function x6(n){return wi(n,Date.now())}function S6(n){return n instanceof Date||typeof n=="object"&&Object.prototype.toString.call(n)==="[object Date]"}function A6(n){return!(!S6(n)&&typeof n!="number"||isNaN(+Ht(n)))}function R6(n,e,t){const[i,a]=ef(t==null?void 0:t.in,n,e),l=i.getFullYear()-a.getFullYear(),c=i.getMonth()-a.getMonth();return l*12+c}function C6(n){return e=>{const i=(n?Math[n]:Math.trunc)(e);return i===0?0:i}}function N6(n,e){return+Ht(n)-+Ht(e)}function I6(n,e){const t=Ht(n,e==null?void 0:e.in);return t.setHours(23,59,59,999),t}function D6(n,e){const t=Ht(n,e==null?void 0:e.in),i=t.getMonth();return t.setFullYear(t.getFullYear(),i+1,0),t.setHours(23,59,59,999),t}function O6(n,e){const t=Ht(n,e==null?void 0:e.in);return+I6(t,e)==+D6(t,e)}function P6(n,e,t){const[i,a,l]=ef(t==null?void 0:t.in,n,n,e),c=Qd(a,l),f=Math.abs(R6(a,l));if(f<1)return 0;a.getMonth()===1&&a.getDate()>27&&a.setDate(30),a.setMonth(a.getMonth()-c*f);let m=Qd(a,l)===-c;O6(i)&&f===1&&Qd(i,l)===1&&(m=!1);const g=c*(f-+m);return g===0?0:g}function M6(n,e,t){const i=N6(n,e)/1e3;return C6(t==null?void 0:t.roundingMethod)(i)}function j6(n,e){const t=Ht(n,e==null?void 0:e.in);return t.setFullYear(t.getFullYear(),0,1),t.setHours(0,0,0,0),t}const k6={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},V6=(n,e,t)=>{let i;const a=k6[n];return typeof a=="string"?i=a:e===1?i=a.one:i=a.other.replace("{{count}}",e.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+i:i+" ago":i};function Do(n){return(e={})=>{const t=e.width?String(e.width):n.defaultWidth;return n.formats[t]||n.formats[n.defaultWidth]}}const L6={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},U6={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},z6={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},B6={date:Do({formats:L6,defaultWidth:"full"}),time:Do({formats:U6,defaultWidth:"full"}),dateTime:Do({formats:z6,defaultWidth:"full"})},q6={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},H6=(n,e,t,i)=>q6[n];function Cr(n){return(e,t)=>{const i=t!=null&&t.context?String(t.context):"standalone";let a;if(i==="formatting"&&n.formattingValues){const c=n.defaultFormattingWidth||n.defaultWidth,f=t!=null&&t.width?String(t.width):c;a=n.formattingValues[f]||n.formattingValues[c]}else{const c=n.defaultWidth,f=t!=null&&t.width?String(t.width):n.defaultWidth;a=n.values[f]||n.values[c]}const l=n.argumentCallback?n.argumentCallback(e):e;return a[l]}}const F6={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},G6={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},$6={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Y6={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},K6={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Q6={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},X6=(n,e)=>{const t=Number(n),i=t%100;if(i>20||i<10)switch(i%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},W6={ordinalNumber:X6,era:Cr({values:F6,defaultWidth:"wide"}),quarter:Cr({values:G6,defaultWidth:"wide",argumentCallback:n=>n-1}),month:Cr({values:$6,defaultWidth:"wide"}),day:Cr({values:Y6,defaultWidth:"wide"}),dayPeriod:Cr({values:K6,defaultWidth:"wide",formattingValues:Q6,defaultFormattingWidth:"wide"})};function Nr(n){return(e,t={})=>{const i=t.width,a=i&&n.matchPatterns[i]||n.matchPatterns[n.defaultMatchWidth],l=e.match(a);if(!l)return null;const c=l[0],f=i&&n.parsePatterns[i]||n.parsePatterns[n.defaultParseWidth],m=Array.isArray(f)?J6(f,w=>w.test(c)):Z6(f,w=>w.test(c));let g;g=n.valueCallback?n.valueCallback(m):m,g=t.valueCallback?t.valueCallback(g):g;const v=e.slice(c.length);return{value:g,rest:v}}}function Z6(n,e){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&e(n[t]))return t}function J6(n,e){for(let t=0;t<n.length;t++)if(e(n[t]))return t}function XT(n){return(e,t={})=>{const i=e.match(n.matchPattern);if(!i)return null;const a=i[0],l=e.match(n.parsePattern);if(!l)return null;let c=n.valueCallback?n.valueCallback(l[0]):l[0];c=t.valueCallback?t.valueCallback(c):c;const f=e.slice(a.length);return{value:c,rest:f}}}const eP=/^(\d+)(th|st|nd|rd)?/i,tP=/\d+/i,nP={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},rP={any:[/^b/i,/^(a|c)/i]},iP={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},sP={any:[/1/i,/2/i,/3/i,/4/i]},aP={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},oP={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},lP={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},uP={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},cP={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},dP={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},hP={ordinalNumber:XT({matchPattern:eP,parsePattern:tP,valueCallback:n=>parseInt(n,10)}),era:Nr({matchPatterns:nP,defaultMatchWidth:"wide",parsePatterns:rP,defaultParseWidth:"any"}),quarter:Nr({matchPatterns:iP,defaultMatchWidth:"wide",parsePatterns:sP,defaultParseWidth:"any",valueCallback:n=>n+1}),month:Nr({matchPatterns:aP,defaultMatchWidth:"wide",parsePatterns:oP,defaultParseWidth:"any"}),day:Nr({matchPatterns:lP,defaultMatchWidth:"wide",parsePatterns:uP,defaultParseWidth:"any"}),dayPeriod:Nr({matchPatterns:cP,defaultMatchWidth:"any",parsePatterns:dP,defaultParseWidth:"any"})},WT={code:"en-US",formatDistance:V6,formatLong:B6,formatRelative:H6,localize:W6,match:hP,options:{weekStartsOn:0,firstWeekContainsDate:1}};function fP(n,e){const t=Ht(n,e==null?void 0:e.in);return w6(t,j6(t))+1}function mP(n,e){const t=Ht(n,e==null?void 0:e.in),i=+wh(t)-+T6(t);return Math.round(i/KT)+1}function ZT(n,e){var v,w,T,C;const t=Ht(n,e==null?void 0:e.in),i=t.getFullYear(),a=nc(),l=(e==null?void 0:e.firstWeekContainsDate)??((w=(v=e==null?void 0:e.locale)==null?void 0:v.options)==null?void 0:w.firstWeekContainsDate)??a.firstWeekContainsDate??((C=(T=a.locale)==null?void 0:T.options)==null?void 0:C.firstWeekContainsDate)??1,c=wi((e==null?void 0:e.in)||n,0);c.setFullYear(i+1,0,l),c.setHours(0,0,0,0);const f=Uu(c,e),m=wi((e==null?void 0:e.in)||n,0);m.setFullYear(i,0,l),m.setHours(0,0,0,0);const g=Uu(m,e);return+t>=+f?i+1:+t>=+g?i:i-1}function pP(n,e){var f,m,g,v;const t=nc(),i=(e==null?void 0:e.firstWeekContainsDate)??((m=(f=e==null?void 0:e.locale)==null?void 0:f.options)==null?void 0:m.firstWeekContainsDate)??t.firstWeekContainsDate??((v=(g=t.locale)==null?void 0:g.options)==null?void 0:v.firstWeekContainsDate)??1,a=ZT(n,e),l=wi((e==null?void 0:e.in)||n,0);return l.setFullYear(a,0,i),l.setHours(0,0,0,0),Uu(l,e)}function gP(n,e){const t=Ht(n,e==null?void 0:e.in),i=+Uu(t,e)-+pP(t,e);return Math.round(i/KT)+1}function We(n,e){const t=n<0?"-":"",i=Math.abs(n).toString().padStart(e,"0");return t+i}const ns={y(n,e){const t=n.getFullYear(),i=t>0?t:1-t;return We(e==="yy"?i%100:i,e.length)},M(n,e){const t=n.getMonth();return e==="M"?String(t+1):We(t+1,2)},d(n,e){return We(n.getDate(),e.length)},a(n,e){const t=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(n,e){return We(n.getHours()%12||12,e.length)},H(n,e){return We(n.getHours(),e.length)},m(n,e){return We(n.getMinutes(),e.length)},s(n,e){return We(n.getSeconds(),e.length)},S(n,e){const t=e.length,i=n.getMilliseconds(),a=Math.trunc(i*Math.pow(10,t-3));return We(a,e.length)}},Eo={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},IE={G:function(n,e,t){const i=n.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(i,{width:"abbreviated"});case"GGGGG":return t.era(i,{width:"narrow"});case"GGGG":default:return t.era(i,{width:"wide"})}},y:function(n,e,t){if(e==="yo"){const i=n.getFullYear(),a=i>0?i:1-i;return t.ordinalNumber(a,{unit:"year"})}return ns.y(n,e)},Y:function(n,e,t,i){const a=ZT(n,i),l=a>0?a:1-a;if(e==="YY"){const c=l%100;return We(c,2)}return e==="Yo"?t.ordinalNumber(l,{unit:"year"}):We(l,e.length)},R:function(n,e){const t=QT(n);return We(t,e.length)},u:function(n,e){const t=n.getFullYear();return We(t,e.length)},Q:function(n,e,t){const i=Math.ceil((n.getMonth()+1)/3);switch(e){case"Q":return String(i);case"QQ":return We(i,2);case"Qo":return t.ordinalNumber(i,{unit:"quarter"});case"QQQ":return t.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(i,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(i,{width:"wide",context:"formatting"})}},q:function(n,e,t){const i=Math.ceil((n.getMonth()+1)/3);switch(e){case"q":return String(i);case"qq":return We(i,2);case"qo":return t.ordinalNumber(i,{unit:"quarter"});case"qqq":return t.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(i,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(i,{width:"wide",context:"standalone"})}},M:function(n,e,t){const i=n.getMonth();switch(e){case"M":case"MM":return ns.M(n,e);case"Mo":return t.ordinalNumber(i+1,{unit:"month"});case"MMM":return t.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(i,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(i,{width:"wide",context:"formatting"})}},L:function(n,e,t){const i=n.getMonth();switch(e){case"L":return String(i+1);case"LL":return We(i+1,2);case"Lo":return t.ordinalNumber(i+1,{unit:"month"});case"LLL":return t.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(i,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(i,{width:"wide",context:"standalone"})}},w:function(n,e,t,i){const a=gP(n,i);return e==="wo"?t.ordinalNumber(a,{unit:"week"}):We(a,e.length)},I:function(n,e,t){const i=mP(n);return e==="Io"?t.ordinalNumber(i,{unit:"week"}):We(i,e.length)},d:function(n,e,t){return e==="do"?t.ordinalNumber(n.getDate(),{unit:"date"}):ns.d(n,e)},D:function(n,e,t){const i=fP(n);return e==="Do"?t.ordinalNumber(i,{unit:"dayOfYear"}):We(i,e.length)},E:function(n,e,t){const i=n.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(i,{width:"short",context:"formatting"});case"EEEE":default:return t.day(i,{width:"wide",context:"formatting"})}},e:function(n,e,t,i){const a=n.getDay(),l=(a-i.weekStartsOn+8)%7||7;switch(e){case"e":return String(l);case"ee":return We(l,2);case"eo":return t.ordinalNumber(l,{unit:"day"});case"eee":return t.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(a,{width:"short",context:"formatting"});case"eeee":default:return t.day(a,{width:"wide",context:"formatting"})}},c:function(n,e,t,i){const a=n.getDay(),l=(a-i.weekStartsOn+8)%7||7;switch(e){case"c":return String(l);case"cc":return We(l,e.length);case"co":return t.ordinalNumber(l,{unit:"day"});case"ccc":return t.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(a,{width:"narrow",context:"standalone"});case"cccccc":return t.day(a,{width:"short",context:"standalone"});case"cccc":default:return t.day(a,{width:"wide",context:"standalone"})}},i:function(n,e,t){const i=n.getDay(),a=i===0?7:i;switch(e){case"i":return String(a);case"ii":return We(a,e.length);case"io":return t.ordinalNumber(a,{unit:"day"});case"iii":return t.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(i,{width:"short",context:"formatting"});case"iiii":default:return t.day(i,{width:"wide",context:"formatting"})}},a:function(n,e,t){const a=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(n,e,t){const i=n.getHours();let a;switch(i===12?a=Eo.noon:i===0?a=Eo.midnight:a=i/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(n,e,t){const i=n.getHours();let a;switch(i>=17?a=Eo.evening:i>=12?a=Eo.afternoon:i>=4?a=Eo.morning:a=Eo.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(n,e,t){if(e==="ho"){let i=n.getHours()%12;return i===0&&(i=12),t.ordinalNumber(i,{unit:"hour"})}return ns.h(n,e)},H:function(n,e,t){return e==="Ho"?t.ordinalNumber(n.getHours(),{unit:"hour"}):ns.H(n,e)},K:function(n,e,t){const i=n.getHours()%12;return e==="Ko"?t.ordinalNumber(i,{unit:"hour"}):We(i,e.length)},k:function(n,e,t){let i=n.getHours();return i===0&&(i=24),e==="ko"?t.ordinalNumber(i,{unit:"hour"}):We(i,e.length)},m:function(n,e,t){return e==="mo"?t.ordinalNumber(n.getMinutes(),{unit:"minute"}):ns.m(n,e)},s:function(n,e,t){return e==="so"?t.ordinalNumber(n.getSeconds(),{unit:"second"}):ns.s(n,e)},S:function(n,e){return ns.S(n,e)},X:function(n,e,t){const i=n.getTimezoneOffset();if(i===0)return"Z";switch(e){case"X":return OE(i);case"XXXX":case"XX":return ca(i);case"XXXXX":case"XXX":default:return ca(i,":")}},x:function(n,e,t){const i=n.getTimezoneOffset();switch(e){case"x":return OE(i);case"xxxx":case"xx":return ca(i);case"xxxxx":case"xxx":default:return ca(i,":")}},O:function(n,e,t){const i=n.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+DE(i,":");case"OOOO":default:return"GMT"+ca(i,":")}},z:function(n,e,t){const i=n.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+DE(i,":");case"zzzz":default:return"GMT"+ca(i,":")}},t:function(n,e,t){const i=Math.trunc(+n/1e3);return We(i,e.length)},T:function(n,e,t){return We(+n,e.length)}};function DE(n,e=""){const t=n>0?"-":"+",i=Math.abs(n),a=Math.trunc(i/60),l=i%60;return l===0?t+String(a):t+String(a)+e+We(l,2)}function OE(n,e){return n%60===0?(n>0?"-":"+")+We(Math.abs(n)/60,2):ca(n,e)}function ca(n,e=""){const t=n>0?"-":"+",i=Math.abs(n),a=We(Math.trunc(i/60),2),l=We(i%60,2);return t+a+e+l}const PE=(n,e)=>{switch(n){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},JT=(n,e)=>{switch(n){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},yP=(n,e)=>{const t=n.match(/(P+)(p+)?/)||[],i=t[1],a=t[2];if(!a)return PE(n,e);let l;switch(i){case"P":l=e.dateTime({width:"short"});break;case"PP":l=e.dateTime({width:"medium"});break;case"PPP":l=e.dateTime({width:"long"});break;case"PPPP":default:l=e.dateTime({width:"full"});break}return l.replace("{{date}}",PE(i,e)).replace("{{time}}",JT(a,e))},vP={p:JT,P:yP},_P=/^D+$/,bP=/^Y+$/,EP=["D","DD","YY","YYYY"];function wP(n){return _P.test(n)}function TP(n){return bP.test(n)}function xP(n,e,t){const i=SP(n,e,t);if(console.warn(i),EP.includes(n))throw new RangeError(i)}function SP(n,e,t){const i=n[0]==="Y"?"years":"days of the month";return`Use \`${n.toLowerCase()}\` instead of \`${n}\` (in \`${e}\`) for formatting ${i} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const AP=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,RP=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,CP=/^'([^]*?)'?$/,NP=/''/g,IP=/[a-zA-Z]/;function Ru(n,e,t){var v,w,T,C,A,U,I,q;const i=nc(),a=(t==null?void 0:t.locale)??i.locale??WT,l=(t==null?void 0:t.firstWeekContainsDate)??((w=(v=t==null?void 0:t.locale)==null?void 0:v.options)==null?void 0:w.firstWeekContainsDate)??i.firstWeekContainsDate??((C=(T=i.locale)==null?void 0:T.options)==null?void 0:C.firstWeekContainsDate)??1,c=(t==null?void 0:t.weekStartsOn)??((U=(A=t==null?void 0:t.locale)==null?void 0:A.options)==null?void 0:U.weekStartsOn)??i.weekStartsOn??((q=(I=i.locale)==null?void 0:I.options)==null?void 0:q.weekStartsOn)??0,f=Ht(n,t==null?void 0:t.in);if(!A6(f))throw new RangeError("Invalid time value");let m=e.match(RP).map(X=>{const Y=X[0];if(Y==="p"||Y==="P"){const de=vP[Y];return de(X,a.formatLong)}return X}).join("").match(AP).map(X=>{if(X==="''")return{isToken:!1,value:"'"};const Y=X[0];if(Y==="'")return{isToken:!1,value:DP(X)};if(IE[Y])return{isToken:!0,value:X};if(Y.match(IP))throw new RangeError("Format string contains an unescaped latin alphabet character `"+Y+"`");return{isToken:!1,value:X}});a.localize.preprocessor&&(m=a.localize.preprocessor(f,m));const g={firstWeekContainsDate:l,weekStartsOn:c,locale:a};return m.map(X=>{if(!X.isToken)return X.value;const Y=X.value;(!(t!=null&&t.useAdditionalWeekYearTokens)&&TP(Y)||!(t!=null&&t.useAdditionalDayOfYearTokens)&&wP(Y))&&xP(Y,e,String(n));const de=IE[Y[0]];return de(f,Y,a.localize,g)}).join("")}function DP(n){const e=n.match(CP);return e?e[1].replace(NP,"'"):n}function OP(n,e,t){const i=nc(),a=(t==null?void 0:t.locale)??i.locale??WT,l=2520,c=Qd(n,e);if(isNaN(c))throw new RangeError("Invalid time value");const f=Object.assign({},t,{addSuffix:t==null?void 0:t.addSuffix,comparison:c}),[m,g]=ef(t==null?void 0:t.in,...c>0?[e,n]:[n,e]),v=M6(g,m),w=(Th(g)-Th(m))/1e3,T=Math.round((v-w)/60);let C;if(T<2)return t!=null&&t.includeSeconds?v<5?a.formatDistance("lessThanXSeconds",5,f):v<10?a.formatDistance("lessThanXSeconds",10,f):v<20?a.formatDistance("lessThanXSeconds",20,f):v<40?a.formatDistance("halfAMinute",0,f):v<60?a.formatDistance("lessThanXMinutes",1,f):a.formatDistance("xMinutes",1,f):T===0?a.formatDistance("lessThanXMinutes",1,f):a.formatDistance("xMinutes",T,f);if(T<45)return a.formatDistance("xMinutes",T,f);if(T<90)return a.formatDistance("aboutXHours",1,f);if(T<RE){const A=Math.round(T/60);return a.formatDistance("aboutXHours",A,f)}else{if(T<l)return a.formatDistance("xDays",1,f);if(T<kd){const A=Math.round(T/RE);return a.formatDistance("xDays",A,f)}else if(T<kd*2)return C=Math.round(T/kd),a.formatDistance("aboutXMonths",C,f)}if(C=P6(g,m),C<12){const A=Math.round(T/kd);return a.formatDistance("xMonths",A,f)}else{const A=C%12,U=Math.trunc(C/12);return A<3?a.formatDistance("aboutXYears",U,f):A<9?a.formatDistance("overXYears",U,f):a.formatDistance("almostXYears",U+1,f)}}function ME(n,e){return OP(n,x6(n),e)}const PP={lessThanXSeconds:{one:"menos de un segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"medio minuto",lessThanXMinutes:{one:"menos de un minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"alrededor de 1 hora",other:"alrededor de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 día",other:"{{count}} días"},aboutXWeeks:{one:"alrededor de 1 semana",other:"alrededor de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"alrededor de 1 mes",other:"alrededor de {{count}} meses"},xMonths:{one:"1 mes",other:"{{count}} meses"},aboutXYears:{one:"alrededor de 1 año",other:"alrededor de {{count}} años"},xYears:{one:"1 año",other:"{{count}} años"},overXYears:{one:"más de 1 año",other:"más de {{count}} años"},almostXYears:{one:"casi 1 año",other:"casi {{count}} años"}},MP=(n,e,t)=>{let i;const a=PP[n];return typeof a=="string"?i=a:e===1?i=a.one:i=a.other.replace("{{count}}",e.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"en "+i:"hace "+i:i},jP={full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/y"},kP={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},VP={full:"{{date}} 'a las' {{time}}",long:"{{date}} 'a las' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},LP={date:Do({formats:jP,defaultWidth:"full"}),time:Do({formats:kP,defaultWidth:"full"}),dateTime:Do({formats:VP,defaultWidth:"full"})},UP={lastWeek:"'el' eeee 'pasado a la' p",yesterday:"'ayer a la' p",today:"'hoy a la' p",tomorrow:"'mañana a la' p",nextWeek:"eeee 'a la' p",other:"P"},zP={lastWeek:"'el' eeee 'pasado a las' p",yesterday:"'ayer a las' p",today:"'hoy a las' p",tomorrow:"'mañana a las' p",nextWeek:"eeee 'a las' p",other:"P"},BP=(n,e,t,i)=>e.getHours()!==1?zP[n]:UP[n],qP={narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","después de cristo"]},HP={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1º trimestre","2º trimestre","3º trimestre","4º trimestre"]},FP={narrow:["e","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],wide:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]},GP={narrow:["d","l","m","m","j","v","s"],short:["do","lu","ma","mi","ju","vi","sá"],abbreviated:["dom","lun","mar","mié","jue","vie","sáb"],wide:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"]},$P={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"}},YP={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"}},KP=(n,e)=>Number(n)+"º",QP={ordinalNumber:KP,era:Cr({values:qP,defaultWidth:"wide"}),quarter:Cr({values:HP,defaultWidth:"wide",argumentCallback:n=>Number(n)-1}),month:Cr({values:FP,defaultWidth:"wide"}),day:Cr({values:GP,defaultWidth:"wide"}),dayPeriod:Cr({values:$P,defaultWidth:"wide",formattingValues:YP,defaultFormattingWidth:"wide"})},XP=/^(\d+)(º)?/i,WP=/\d+/i,ZP={narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|a\.?\s?e\.?\s?c\.?|d\.?\s?c\.?|e\.?\s?c\.?)/i,wide:/^(antes de cristo|antes de la era com[uú]n|despu[eé]s de cristo|era com[uú]n)/i},JP={any:[/^ac/i,/^dc/i],wide:[/^(antes de cristo|antes de la era com[uú]n)/i,/^(despu[eé]s de cristo|era com[uú]n)/i]},eM={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234](º)? trimestre/i},tM={any:[/1/i,/2/i,/3/i,/4/i]},nM={narrow:/^[efmajsond]/i,abbreviated:/^(ene|feb|mar|abr|may|jun|jul|ago|sep|oct|nov|dic)/i,wide:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i},rM={narrow:[/^e/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^en/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i]},iM={narrow:/^[dlmjvs]/i,short:/^(do|lu|ma|mi|ju|vi|s[áa])/i,abbreviated:/^(dom|lun|mar|mi[ée]|jue|vie|s[áa]b)/i,wide:/^(domingo|lunes|martes|mi[ée]rcoles|jueves|viernes|s[áa]bado)/i},sM={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^do/i,/^lu/i,/^ma/i,/^mi/i,/^ju/i,/^vi/i,/^sa/i]},aM={narrow:/^(a|p|mn|md|(de la|a las) (mañana|tarde|noche))/i,any:/^([ap]\.?\s?m\.?|medianoche|mediodia|(de la|a las) (mañana|tarde|noche))/i},oM={any:{am:/^a/i,pm:/^p/i,midnight:/^mn/i,noon:/^md/i,morning:/mañana/i,afternoon:/tarde/i,evening:/tarde/i,night:/noche/i}},lM={ordinalNumber:XT({matchPattern:XP,parsePattern:WP,valueCallback:function(n){return parseInt(n,10)}}),era:Nr({matchPatterns:ZP,defaultMatchWidth:"wide",parsePatterns:JP,defaultParseWidth:"any"}),quarter:Nr({matchPatterns:eM,defaultMatchWidth:"wide",parsePatterns:tM,defaultParseWidth:"any",valueCallback:n=>n+1}),month:Nr({matchPatterns:nM,defaultMatchWidth:"wide",parsePatterns:rM,defaultParseWidth:"any"}),day:Nr({matchPatterns:iM,defaultMatchWidth:"wide",parsePatterns:sM,defaultParseWidth:"any"}),dayPeriod:Nr({matchPatterns:aM,defaultMatchWidth:"any",parsePatterns:oM,defaultParseWidth:"any"})},ma={code:"es",formatDistance:MP,formatLong:LP,formatRelative:BP,localize:QP,match:lM,options:{weekStartsOn:1,firstWeekContainsDate:1}},Np=({title:n,conversations:e,isLoading:t,emptyMessage:i="No hay conversaciones disponibles",showClientInfo:a=!0})=>{const l=mn();return t?y.jsxs("div",{className:"bg-white p-4 rounded-lg shadow mb-6",children:[y.jsx("h2",{className:"text-lg font-semibold mb-4",children:n}),y.jsx("div",{className:"animate-pulse flex space-x-4",children:y.jsxs("div",{className:"flex-1 space-y-4 py-1",children:[y.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),y.jsxs("div",{className:"space-y-2",children:[y.jsx("div",{className:"h-4 bg-gray-200 rounded"}),y.jsx("div",{className:"h-4 bg-gray-200 rounded w-5/6"})]})]})})]}):y.jsxs("div",{className:"bg-white p-4 rounded-lg shadow mb-6",children:[y.jsx("h2",{className:"text-lg font-semibold mb-4",children:n}),e.length===0?y.jsx("p",{className:"text-gray-500 text-center py-4",children:i}):y.jsx("ul",{className:"divide-y divide-gray-200",children:e.map(c=>{const m=(c.turns&&c.turns.length>0?c.turns[c.turns.length-1].sender:null)==="client"?"border-l-4 border-green-500":"border-l-4 border-gray-300",g=c.startedAt?ME(new Date(c.startedAt.seconds*1e3),{addSuffix:!0,locale:ma}):"Fecha desconocida";return y.jsxs("li",{className:`p-3 hover:bg-gray-50 cursor-pointer ${m}`,onClick:()=>l(`/conversation/${c.id}`),children:[y.jsxs("div",{className:"flex justify-between",children:[y.jsx("span",{className:"font-medium",children:a?c.clientName||"Cliente":""}),y.jsx("span",{className:"text-sm text-gray-500",children:g})]}),c.turns&&c.turns.length>0&&y.jsx("p",{className:"text-sm text-gray-600 mt-1 truncate",children:c.turns[c.turns.length-1].message}),c.nextActionDate&&y.jsxs("div",{className:"mt-2 text-xs text-blue-600",children:["Próxima acción: ",ME(new Date(c.nextActionDate.seconds*1e3),{addSuffix:!0,locale:ma})]})]},c.id)})})]})},uM=({onFilterChange:n})=>{const[e,t]=V.useState("newest"),i=a=>{t(a),n(a)};return y.jsxs("div",{className:"flex space-x-2 mb-4",children:[y.jsx("button",{className:`px-3 py-1 text-sm rounded-full ${e==="newest"?"bg-primary-100 text-primary-800":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,onClick:()=>i("newest"),children:"Más recientes"}),y.jsx("button",{className:`px-3 py-1 text-sm rounded-full ${e==="upcoming"?"bg-primary-100 text-primary-800":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,onClick:()=>i("upcoming"),children:"Próxima fecha"})]})},Qt=[];for(let n=0;n<256;++n)Qt.push((n+256).toString(16).slice(1));function cM(n,e=0){return(Qt[n[e+0]]+Qt[n[e+1]]+Qt[n[e+2]]+Qt[n[e+3]]+"-"+Qt[n[e+4]]+Qt[n[e+5]]+"-"+Qt[n[e+6]]+Qt[n[e+7]]+"-"+Qt[n[e+8]]+Qt[n[e+9]]+"-"+Qt[n[e+10]]+Qt[n[e+11]]+Qt[n[e+12]]+Qt[n[e+13]]+Qt[n[e+14]]+Qt[n[e+15]]).toLowerCase()}let Ip;const dM=new Uint8Array(16);function hM(){if(!Ip){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Ip=crypto.getRandomValues.bind(crypto)}return Ip(dM)}const fM=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),jE={randomUUID:fM};function _y(n,e,t){var a;if(jE.randomUUID&&!n)return jE.randomUUID();n=n||{};const i=n.random??((a=n.rng)==null?void 0:a.call(n))??hM();if(i.length<16)throw new Error("Random bytes length must be >= 16");return i[6]=i[6]&15|64,i[8]=i[8]&63|128,cM(i)}const ex=kr(Ge,"clients"),mM=async n=>{const e=_y(),t=gt(Ge,"clients",e),i={relationship:n.relationship||50,history:n.history||50,attitude:n.attitude||50,sensitivity:n.sensitivity||50,probability:n.probability||50};return await yy(t,{id:e,name:n.name,email:n.email||"",phone:n.phone||"",debt:Number(n.debt)||0,createdAt:lt(),updatedAt:lt(),soul:i,status:"active",tags:n.tags||[],notes:n.notes||"",lastContact:null,paymentHistory:[]}),e},tx=async n=>{const e=await On(gt(Ge,"clients",n));return e.exists()?{id:e.id,...e.data()}:null},tf=async()=>(await Ra(bi(ex,Ei("name","asc")))).docs.map(e=>({id:e.id,...e.data()})),pM=async n=>{if(!n||n.trim()==="")return tf();const e=n.toLowerCase().trim();return(await Ra(ex)).docs.map(a=>({id:a.id,...a.data()})).filter(a=>a.name.toLowerCase().includes(e)||a.email&&a.email.toLowerCase().includes(e)||a.phone&&a.phone.includes(e))},gM=async(n,e)=>{const t=gt(Ge,"clients",n);if(!(await On(t)).exists())throw new Error("Cliente no encontrado");return delete e.id,delete e.createdAt,await Pn(t,{...e,updatedAt:lt()}),n},yM=async(n,e,t=null)=>{const i=gt(Ge,"clients",n),a=await On(i);if(!a.exists())throw new Error("Cliente no encontrado");const l=a.data(),c={debt:Number(e),updatedAt:lt()};return t&&(c.paymentHistory=[...l.paymentHistory||[],{date:lt(),amount:t.amount,type:t.type||"payment",notes:t.notes||""}]),await Pn(i,c),n},vM=async n=>{const e=gt(Ge,"clients",n);await Pn(e,{lastContact:lt(),updatedAt:lt()})},_M={neutral:{relationship:0,history:0,attitude:0,sensitivity:0,probability:0},accepts_payment:{relationship:5,history:10,attitude:10,sensitivity:-5,probability:20},offers_partial:{relationship:5,history:5,attitude:10,sensitivity:-5,probability:15},reschedule:{relationship:2,history:-5,attitude:5,sensitivity:0,probability:-5},evades:{relationship:-5,history:-5,attitude:-10,sensitivity:5,probability:-10},annoyed:{relationship:-10,history:-5,attitude:-15,sensitivity:10,probability:-15},refuses:{relationship:-20,history:-20,attitude:-20,sensitivity:20,probability:-30},thanks:{relationship:5,history:0,attitude:10,sensitivity:-5,probability:10},no_answer:{relationship:-5,history:-10,attitude:-5,sensitivity:0,probability:-10},confirms_payment:{relationship:10,history:20,attitude:20,sensitivity:-10,probability:30}},bM=async(n,e,t)=>{const i=gt(Ge,"clients",n),a=await On(i);if(!a.exists())throw new Error("Cliente no encontrado");const l=a.data();await vM(n);const c={clientId:n,clientName:l.name,agentId:e,startedAt:lt(),updatedAt:lt(),status:"new",initialSoul:t||l.soul,currentSoul:t||l.soul,turns:[],nextActionDate:null,summary:null};return(await QO(kr(Ge,"conversations"),c)).id},kE=async(n,e)=>{const t=gt(Ge,"conversations",n),i=await On(t);if(!i.exists())throw new Error("Conversación no encontrada");const a=i.data();let l={...a.currentSoul},c={relationship:0,history:0,attitude:0,sensitivity:0,probability:0};if(e.event&&e.event!=="neutral"){c=_M[e.event]||c;const v=w=>Math.min(Math.max(w,0),100);l={relationship:v(l.relationship+(c.relationship||0)),history:v(l.history+(c.history||0)),attitude:v(l.attitude+(c.attitude||0)),sensitivity:v(l.sensitivity+(c.sensitivity||0)),probability:v(l.probability+(c.probability||0))}}const f=new Date,m={id:_y(),timestamp:f,timestampMillis:f.getTime(),...e,deltas:c,currentSoul:l},g=[...a.turns,m];if(await Pn(t,{turns:g,currentSoul:l,updatedAt:lt()}),e.sender==="client"&&e.event!=="neutral"){const v=gt(Ge,"clients",a.clientId);await Pn(v,{soul:l,updatedAt:lt()})}return{turns:g,currentSoul:l}},fu=async n=>{const e=await On(gt(Ge,"conversations",n));if(!e.exists())return null;const t={id:e.id,...e.data()};if(t.clientId)try{const i=await On(gt(Ge,"clients",t.clientId));i.exists()&&(t.client={id:i.id,...i.data()})}catch(i){console.error("Error al cargar datos del cliente:",i)}return t},EM=async(n,e=5)=>{const t=bi(kr(Ge,"conversations"),Kn("clientId","==",n),Ei("startedAt","desc"),_s(e));return(await Ra(t)).docs.map(a=>({id:a.id,...a.data()}))},wM=async(n,e)=>{const t=gt(Ge,"conversations",n),i=await On(t);if(!i.exists())throw new Error("Conversación no encontrada");const a=i.data();if(await Pn(t,{status:"closed",closedAt:lt(),updatedAt:lt(),summary:{...e,createdAt:lt()}}),a.clientId){const l=gt(Ge,"clients",a.clientId);await Pn(l,{soul:a.currentSoul,updatedAt:lt()})}return n},TM=async(n=null,e=10)=>{let t;return n?t=bi(kr(Ge,"conversations"),Kn("status","==","new"),Kn("agentId","==",n),Ei("startedAt","desc"),_s(e)):t=bi(kr(Ge,"conversations"),Kn("status","==","new"),Ei("startedAt","desc"),_s(e)),(await Ra(t)).docs.map(a=>({id:a.id,...a.data()}))},nx=async(n=null,e=10)=>{let t;return n?t=bi(kr(Ge,"conversations"),Kn("status","==","active"),Kn("agentId","==",n),Ei("startedAt","desc"),_s(e)):t=bi(kr(Ge,"conversations"),Kn("status","==","active"),Ei("startedAt","desc"),_s(e)),(await Ra(t)).docs.map(a=>({id:a.id,...a.data()}))},rx=async(n=null,e=100)=>{let t;return n?t=bi(kr(Ge,"conversations"),Kn("status","==","closed"),Kn("agentId","==",n),Ei("closedAt","desc"),_s(e)):t=bi(kr(Ge,"conversations"),Kn("status","==","closed"),Ei("closedAt","desc"),_s(e)),(await Ra(t)).docs.map(a=>({id:a.id,...a.data()}))},xM=async(n=10)=>{const e=new Date,t=bi(kr(Ge,"conversations"),Kn("status","==","active"),Kn("nextActionDate",">=",e),Ei("nextActionDate","asc"),_s(n));return(await Ra(t)).docs.map(a=>({id:a.id,...a.data()}))},SM=async(n,e)=>{try{const t=gt(Ge,"conversations",n),i=await On(t);if(!i.exists())throw new Error("Conversación no encontrada");const a=i.data();if(await Pn(t,{currentSoul:e,updatedAt:lt()}),a.clientId){const l=gt(Ge,"clients",a.clientId);await Pn(l,{soul:e,updatedAt:lt()})}return e}catch(t){throw console.error("Error al actualizar valores del alma:",t),t}},AM=async(n,e)=>{const t=gt(Ge,"conversations",n),i=await On(t);if(!i.exists())throw new Error("Conversación no encontrada");const a=i.data(),l=e.deltas||{relationship:0,history:0,attitude:0,sensitivity:0,probability:0};let c={...a.currentSoul};if(e.event&&e.event!=="neutral"&&e.deltas){const v=w=>Math.min(Math.max(w,0),100);c={relationship:v(c.relationship+(l.relationship||0)),history:v(c.history+(l.history||0)),attitude:v(c.attitude+(l.attitude||0)),sensitivity:v(c.sensitivity+(l.sensitivity||0)),probability:v(c.probability+(l.probability||0))}}const f=new Date,m={id:_y(),timestamp:f,timestampMillis:f.getTime(),...e,deltas:l,currentSoul:c,isManual:!0},g=[...a.turns,m];if(await Pn(t,{turns:g,currentSoul:c,updatedAt:lt()}),e.updateClientSoul&&e.sender==="client"&&e.event!=="neutral"){const v=gt(Ge,"clients",a.clientId);await Pn(v,{soul:c,updatedAt:lt()})}return{turns:g,currentSoul:c}},RM=async(n,e,t)=>{const i=gt(Ge,"conversations",n),a=await On(i);if(!a.exists())throw new Error("Conversación no encontrada");const c=a.data().turns.map(f=>f.id===e?{...f,...t,isEdited:!0,editedAt:new Date}:f);return await Pn(i,{turns:c,updatedAt:lt()}),c},CM=async(n,e)=>{const t=gt(Ge,"conversations",n),i=await On(t);if(!i.exists())throw new Error("Conversación no encontrada");const l=i.data().turns.filter(c=>c.id!==e);return await Pn(t,{turns:l,updatedAt:lt()}),l},NM=()=>{const{currentUser:n}=tc(),[e,t]=V.useState([]),[i,a]=V.useState([]),[l,c]=V.useState([]),[f,m]=V.useState(!0),[g,v]=V.useState("newest");V.useEffect(()=>{(async()=>{m(!0);try{let C;g==="newest"?C=await TM(n.uid):C=await xM();const A=await nx(n.uid),U=await rx(n.uid);t(C),a(A),c(U)}catch(C){console.error("Error al cargar conversaciones:",C)}finally{m(!1)}})()},[n,g]);const w=T=>{v(T)};return y.jsxs("div",{className:"container mx-auto px-4 py-6",children:[y.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Dashboard"}),y.jsx(_6,{}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[y.jsxs("div",{children:[y.jsxs("div",{className:"mb-2",children:[y.jsx("h2",{className:"text-lg font-semibold",children:"Nuevas Conversaciones"}),y.jsx(uM,{onFilterChange:w})]}),y.jsx(Np,{title:"",conversations:e,isLoading:f,emptyMessage:"No hay nuevas conversaciones"}),y.jsx(Np,{title:"Conversaciones Activas",conversations:i,isLoading:f,emptyMessage:"No hay conversaciones activas"})]}),y.jsx("div",{children:y.jsx(Np,{title:"Historial de Conversaciones",conversations:l,isLoading:f,emptyMessage:"No hay conversaciones en el historial"})})]})]})},Bo=({initialValues:n,onChange:e,readOnly:t=!1})=>{const[i,a]=V.useState({relationship:50,history:50,attitude:50,sensitivity:50,probability:50,...n});V.useEffect(()=>{n&&a({relationship:50,history:50,attitude:50,sensitivity:50,probability:50,...n})},[n]);const l=(m,g)=>{const v={...i,[m]:parseInt(g,10)};a(v),e&&e(v)},c=m=>m<30?"bg-red-500":m<50?"bg-orange-500":m<70?"bg-yellow-500":"bg-green-500",f=(m,g,v)=>y.jsxs("div",{className:"mb-6",children:[y.jsxs("div",{className:"flex justify-between items-center mb-2",children:[y.jsx("label",{className:"text-sm font-medium text-gray-700",children:m}),y.jsx("span",{className:`px-2 py-1 rounded-full text-white text-xs font-medium ${c(i[g])}`,children:i[g]})]}),y.jsx("input",{type:"range",min:"0",max:"100",step:"1",value:i[g],onChange:w=>l(g,w.target.value),disabled:t,className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"}),y.jsx("p",{className:"mt-1 text-sm text-gray-500",children:v})]});return y.jsxs("div",{className:"space-y-2",children:[f("Relación/Cercanía","relationship","Indica cuán cercana es la relación con el cliente."),f("Historial de Pago","history","Nivel de cumplimiento de pagos en el pasado."),f("Actitud en la Llamada","attitude","Disposición emocional del cliente en la conversación."),f("Sensibilidad a Presión","sensitivity","Nivel de reacción negativa a la insistencia o tono de urgencia."),f("Probabilidad de Pago","probability","Estimación de si pagará pronto.")]})},IM=()=>{const{clientId:n}=vg(),e=mn(),[t,i]=V.useState(null),[a,l]=V.useState([]),[c,f]=V.useState(!0),[m,g]=V.useState(!1),[v,w]=V.useState(null);V.useEffect(()=>{(async()=>{try{f(!0);const X=await tx(n);i(X),w(X);const Y=await EM(n);l(Y)}catch(X){console.error("Error al cargar datos del cliente:",X)}finally{f(!1)}})()},[n]);const T=q=>{const{name:X,value:Y}=q.target;w(de=>({...de,[X]:X==="debt"?parseFloat(Y)||0:Y}))},C=q=>{w(X=>({...X,soul:q}))},A=async q=>{q.preventDefault();try{f(!0),await gM(n,{name:v.name,email:v.email,phone:v.phone,notes:v.notes,soul:v.soul}),t.debt!==v.debt&&await yM(n,v.debt),i(v),g(!1)}catch(X){console.error("Error al actualizar cliente:",X)}finally{f(!1)}},U=()=>{e(`/conversation/new/${n}`)},I=q=>{if(!q)return"N/A";const X=new Date(q.seconds*1e3);return Ru(X,"PPP",{locale:ma})};return c&&!t?y.jsx("div",{className:"container mx-auto px-4 py-6",children:y.jsxs("div",{className:"animate-pulse",children:[y.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-6"}),y.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-4"}),y.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-4"}),y.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/3 mb-4"})]})}):t?y.jsxs("div",{className:"container mx-auto px-4 py-6",children:[y.jsxs("div",{className:"flex justify-between items-center mb-6",children:[y.jsx("h1",{className:"text-2xl font-bold",children:t.name}),y.jsx("div",{className:"flex gap-2",children:m?y.jsx("button",{className:"btn-secondary",onClick:()=>{w(t),g(!1)},children:"Cancelar Edición"}):y.jsxs(y.Fragment,{children:[y.jsx("button",{className:"btn-secondary",onClick:()=>g(!0),children:"Editar"}),y.jsx("button",{className:"btn-primary",onClick:U,children:"Nueva Conversación"})]})})]}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[y.jsxs("div",{className:"md:col-span-2",children:[m?y.jsxs("form",{onSubmit:A,className:"bg-white rounded-lg shadow p-6",children:[y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"name",className:"label",children:"Nombre completo"}),y.jsx("input",{type:"text",id:"name",name:"name",className:"input",value:v.name,onChange:T,required:!0})]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"email",className:"label",children:"Email"}),y.jsx("input",{type:"email",id:"email",name:"email",className:"input",value:v.email,onChange:T})]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"phone",className:"label",children:"Teléfono"}),y.jsx("input",{type:"text",id:"phone",name:"phone",className:"input",value:v.phone,onChange:T,required:!0})]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"debt",className:"label",children:"Monto de deuda"}),y.jsx("input",{type:"number",id:"debt",name:"debt",className:"input",value:v.debt,onChange:T,required:!0})]}),y.jsxs("div",{className:"form-group md:col-span-2",children:[y.jsx("label",{htmlFor:"notes",className:"label",children:"Notas"}),y.jsx("textarea",{id:"notes",name:"notes",rows:"3",className:"input",value:v.notes,onChange:T})]})]}),y.jsxs("div",{className:"mt-6",children:[y.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Variables del Alma"}),y.jsx(Bo,{initialValues:v.soul,onChange:C,readOnly:!1}),y.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Ajuste las variables de relación con el cliente según su conocimiento actual."})]}),y.jsx("div",{className:"flex justify-end mt-6",children:y.jsx("button",{type:"submit",className:"btn-primary",disabled:c,children:c?"Guardando...":"Guardar Cambios"})})]}):y.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-y-4",children:[y.jsxs("div",{children:[y.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Email"}),y.jsx("p",{children:t.email||"No disponible"})]}),y.jsxs("div",{children:[y.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Teléfono"}),y.jsx("p",{children:t.phone||"No disponible"})]}),y.jsxs("div",{children:[y.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Monto de deuda"}),y.jsxs("p",{className:"text-xl font-semibold text-red-600",children:["$",t.debt.toLocaleString("es-CO")]})]}),y.jsxs("div",{children:[y.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Último contacto"}),y.jsx("p",{children:t.lastContact?I(t.lastContact):"Sin contacto reciente"})]}),t.notes&&y.jsxs("div",{className:"md:col-span-2 mt-4",children:[y.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"Notas"}),y.jsx("p",{className:"text-gray-700 whitespace-pre-line",children:t.notes})]})]})}),y.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mt-6",children:[y.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Conversaciones Recientes"}),a.length===0?y.jsx("p",{className:"text-gray-500 text-center py-4",children:"No hay conversaciones registradas con este cliente."}):y.jsx("ul",{className:"divide-y divide-gray-200",children:a.map(q=>{const X=q.startedAt?Ru(new Date(q.startedAt.seconds*1e3),"PPp",{locale:ma}):"Fecha desconocida",Y=q.turns&&q.turns.length>0?q.turns[q.turns.length-1]:null;return y.jsxs("li",{className:"py-3 cursor-pointer hover:bg-gray-50",onClick:()=>e(`/conversation/${q.id}`),children:[y.jsxs("div",{className:"flex justify-between",children:[y.jsxs("span",{className:"font-medium",children:["Conversación del ",X]}),y.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${q.status==="closed"?"bg-green-100 text-green-800":"bg-blue-100 text-blue-800"}`,children:q.status==="closed"?"Finalizada":"Activa"})]}),Y&&y.jsxs("p",{className:"text-sm text-gray-600 mt-1 truncate",children:[y.jsx("span",{className:"font-medium",children:Y.sender==="agent"?"Agente: ":"Cliente: "}),Y.message]}),q.summary&&y.jsxs("div",{className:"mt-1 text-xs",children:[y.jsx("span",{className:"text-gray-500",children:"Resultado: "}),y.jsx("span",{className:"font-medium",children:q.summary.result})]})]},q.id)})}),y.jsx("div",{className:"mt-4",children:y.jsx("button",{className:"text-primary-600 text-sm font-medium hover:text-primary-800",onClick:()=>e(`/client/${n}/conversations`),children:"Ver todas las conversaciones"})})]})]}),y.jsx("div",{children:y.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[y.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Variables del Alma"}),y.jsx(Bo,{initialValues:m?v.soul:t.soul,onChange:m?C:null,readOnly:!m}),y.jsxs("div",{className:"mt-4 text-sm text-gray-500",children:[y.jsx("p",{children:"Estas variables representan la disposición y relación del cliente, y se ajustan automáticamente durante las conversaciones."}),y.jsx("p",{className:"mt-2",children:'Para modificar estos valores, utilice el botón "Editar" en la parte superior.'})]})]})})]})]}):y.jsxs("div",{className:"container mx-auto px-4 py-6",children:[y.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:[y.jsx("strong",{className:"font-bold",children:"Error:"}),y.jsx("span",{className:"block sm:inline",children:" No se pudo encontrar el cliente."})]}),y.jsx("button",{className:"btn-secondary mt-4",onClick:()=>e(-1),children:"Volver"})]})},DM=()=>{const n=mn(),[e,t]=V.useState(""),[i,a]=V.useState([]),[l,c]=V.useState(!1),[f,m]=V.useState(!1),g=async v=>{if(v.preventDefault(),!!e.trim()){c(!0),m(!0);try{const w=await pM(e);a(w)}catch(w){console.error("Error al buscar clientes:",w)}finally{c(!1)}}};return y.jsxs("div",{className:"container mx-auto px-4 py-6",children:[y.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Buscar Cliente"}),y.jsx("form",{onSubmit:g,className:"mb-6",children:y.jsxs("div",{className:"flex gap-2",children:[y.jsx("input",{type:"text",className:"input flex-grow",placeholder:"Nombre, teléfono o email del cliente",value:e,onChange:v=>t(v.target.value)}),y.jsx("button",{type:"submit",className:"btn-primary",disabled:l,children:l?"Buscando...":"Buscar"})]})}),y.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[y.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Resultados"}),l?y.jsxs("div",{className:"animate-pulse space-y-4 py-4",children:[y.jsx("div",{className:"h-5 bg-gray-200 rounded w-3/4"}),y.jsx("div",{className:"h-5 bg-gray-200 rounded w-1/2"}),y.jsx("div",{className:"h-5 bg-gray-200 rounded w-5/6"})]}):i.length===0?y.jsx("p",{className:"text-gray-500 text-center py-4",children:f?"No se encontraron resultados. Intente con otros términos de búsqueda.":"Ingrese un término de búsqueda para encontrar clientes."}):y.jsx("ul",{className:"divide-y divide-gray-200",children:i.map(v=>y.jsxs("li",{className:"py-3 hover:bg-gray-50 cursor-pointer",onClick:()=>n(`/clients/${v.id}`),children:[y.jsxs("div",{className:"flex justify-between",children:[y.jsx("span",{className:"font-medium",children:v.name}),y.jsxs("span",{className:"text-red-600 font-medium",children:["$",v.debt.toLocaleString("es-CO")]})]}),y.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:[v.phone," ",v.email&&`| ${v.email}`]}),y.jsxs("div",{className:"flex mt-2 space-x-2",children:[y.jsx("button",{className:"text-sm text-primary-600 hover:text-primary-800",onClick:w=>{w.stopPropagation(),n(`/clients/${v.id}`)},children:"Ver detalles"}),y.jsx("button",{className:"text-sm text-primary-600 hover:text-primary-800",onClick:w=>{w.stopPropagation(),n(`/conversation/new/${v.id}`)},children:"Iniciar conversación"})]})]},v.id))})]}),y.jsx("div",{className:"mt-6",children:y.jsx("button",{className:"btn-secondary",onClick:()=>n(-1),children:"Volver"})})]})},OM=()=>{const n=mn(),[e,t]=V.useState({name:"",email:"",phone:"",debt:"",notes:""}),[i,a]=V.useState({relationship:50,history:50,attitude:50,sensitivity:50,probability:50}),[l,c]=V.useState(!1),[f,m]=V.useState(""),g=w=>{const{name:T,value:C}=w.target;t(A=>({...A,[T]:T==="debt"?parseFloat(C)||"":C}))},v=async w=>{if(w.preventDefault(),m(""),!e.name.trim()){m("El nombre del cliente es obligatorio");return}if(!e.phone.trim()){m("El teléfono es obligatorio");return}if(isNaN(e.debt)||e.debt===""){m("Debe ingresar un monto de deuda válido");return}try{c(!0);const T={...e,...i},C=await mM(T);console.log("Cliente creado con ID:",C),n(`/clients/${C}`)}catch(T){console.error("Error al crear el cliente:",T),m("Ocurrió un error al crear el cliente. Por favor, intente nuevamente.")}finally{c(!1)}};return y.jsxs("div",{className:"container mx-auto px-4 py-6",children:[y.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Agregar Nuevo Cliente"}),f&&y.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-6",role:"alert",children:y.jsx("span",{className:"block sm:inline",children:f})}),y.jsxs("form",{onSubmit:v,className:"bg-white rounded-lg shadow p-6",children:[y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"name",className:"label",children:"Nombre completo *"}),y.jsx("input",{type:"text",id:"name",name:"name",className:"input",value:e.name,onChange:g,required:!0})]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"email",className:"label",children:"Email"}),y.jsx("input",{type:"email",id:"email",name:"email",className:"input",value:e.email,onChange:g})]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"phone",className:"label",children:"Teléfono *"}),y.jsx("input",{type:"text",id:"phone",name:"phone",className:"input",value:e.phone,onChange:g,required:!0})]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"debt",className:"label",children:"Monto de deuda *"}),y.jsx("input",{type:"number",id:"debt",name:"debt",className:"input",value:e.debt,onChange:g,required:!0})]}),y.jsxs("div",{className:"form-group md:col-span-2",children:[y.jsx("label",{htmlFor:"notes",className:"label",children:"Notas"}),y.jsx("textarea",{id:"notes",name:"notes",rows:"3",className:"input",value:e.notes,onChange:g})]})]}),y.jsx("h3",{className:"text-lg font-semibold mt-8 mb-4",children:"Variables del Alma del Cliente"}),y.jsx(Bo,{initialValues:i,onChange:a}),y.jsxs("div",{className:"flex justify-end gap-4 mt-8",children:[y.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>n(-1),disabled:l,children:"Cancelar"}),y.jsx("button",{type:"submit",className:"btn-primary",disabled:l,children:l?"Guardando...":"Guardar Cliente"})]})]})]})},PM=()=>{const n=mn(),[e,t]=V.useState([]),[i,a]=V.useState(!0),[l,c]=V.useState("");V.useEffect(()=>{(async()=>{try{const g=await tf();t(g)}catch(g){console.error("Error al cargar clientes:",g)}finally{a(!1)}})()},[]);const f=e.filter(m=>m.name.toLowerCase().includes(l.toLowerCase())||m.email.toLowerCase().includes(l.toLowerCase())||m.phone.includes(l));return y.jsxs("div",{className:"container mx-auto px-4 py-6",children:[y.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Seleccionar Cliente para Conversación"}),y.jsx("div",{className:"mb-6",children:y.jsx("input",{type:"text",className:"input",placeholder:"Buscar cliente...",value:l,onChange:m=>c(m.target.value)})}),y.jsx("div",{className:"bg-white rounded-lg shadow",children:i?y.jsx("div",{className:"p-4",children:"Cargando clientes..."}):f.length===0?y.jsxs("div",{className:"p-4 text-center",children:[y.jsx("p",{className:"text-gray-500",children:"No se encontraron clientes."}),y.jsx("button",{className:"btn-primary mt-4",onClick:()=>n("/clients/new"),children:"Agregar Nuevo Cliente"})]}):y.jsx("ul",{className:"divide-y divide-gray-200",children:f.map(m=>y.jsxs("li",{className:"p-4 hover:bg-gray-50 cursor-pointer",onClick:()=>n(`/conversation/new/${m.id}`),children:[y.jsxs("div",{className:"flex justify-between",children:[y.jsx("span",{className:"font-medium",children:m.name}),y.jsxs("span",{className:"text-primary-600 font-semibold",children:["$",m.debt.toLocaleString()]})]}),y.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:[m.phone," | ",m.email]})]},m.id))})}),y.jsx("div",{className:"mt-6",children:y.jsx("button",{className:"btn-secondary",onClick:()=>n(-1),children:"Volver"})})]})},MM=()=>{const n=mn(),[e,t]=V.useState([]),[i,a]=V.useState(!0),[l,c]=V.useState("");V.useEffect(()=>{(async()=>{try{a(!0);const g=await tf();t(g)}catch(g){console.error("Error al cargar clientes:",g)}finally{a(!1)}})()},[]);const f=e.filter(m=>m.name.toLowerCase().includes(l.toLowerCase())||m.email&&m.email.toLowerCase().includes(l.toLowerCase())||m.phone&&m.phone.includes(l));return y.jsxs("div",{className:"container mx-auto px-4 py-6",children:[y.jsxs("div",{className:"flex justify-between items-center mb-6",children:[y.jsx("h1",{className:"text-2xl font-bold",children:"Clientes"}),y.jsxs("div",{className:"flex space-x-2",children:[y.jsxs("button",{className:"btn-primary flex items-center gap-2",onClick:()=>n("/clients/new"),children:[y.jsx($T,{})," Agregar Cliente"]}),y.jsxs("button",{className:"btn-secondary flex items-center gap-2",onClick:()=>n("/clients/search"),children:[y.jsx(YT,{})," Búsqueda Avanzada"]})]})]}),y.jsx("div",{className:"mb-6",children:y.jsx("input",{type:"text",className:"input",placeholder:"Buscar cliente por nombre, email o teléfono...",value:l,onChange:m=>c(m.target.value)})}),y.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:i?y.jsx("div",{className:"p-4",children:y.jsxs("div",{className:"animate-pulse space-y-4",children:[y.jsx("div",{className:"h-5 bg-gray-200 rounded"}),y.jsx("div",{className:"h-5 bg-gray-200 rounded"}),y.jsx("div",{className:"h-5 bg-gray-200 rounded"})]})}):f.length===0?y.jsxs("div",{className:"p-8 text-center",children:[y.jsx("p",{className:"text-gray-500 mb-4",children:"No se encontraron clientes."}),y.jsx("button",{className:"btn-primary",onClick:()=>n("/clients/new"),children:"Agregar Nuevo Cliente"})]}):y.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[y.jsx("thead",{className:"bg-gray-50",children:y.jsxs("tr",{children:[y.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nombre"}),y.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contacto"}),y.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Deuda"}),y.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado del Alma"}),y.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),y.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:f.map(m=>y.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>n(`/clients/${m.id}`),children:[y.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:y.jsx("div",{className:"font-medium text-gray-900",children:m.name})}),y.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[y.jsx("div",{className:"text-sm text-gray-500",children:m.phone}),y.jsx("div",{className:"text-sm text-gray-500",children:m.email})]}),y.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:y.jsxs("div",{className:"text-sm font-medium text-red-600",children:["$",m.debt.toLocaleString("es-CO")]})}),y.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:y.jsx("div",{className:"flex space-x-1",children:m.soul&&y.jsxs(y.Fragment,{children:[y.jsxs("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${m.soul.relationship>70?"bg-green-100 text-green-800":m.soul.relationship>40?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:["R:",m.soul.relationship]}),y.jsxs("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${m.soul.probability>70?"bg-green-100 text-green-800":m.soul.probability>40?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:["P:",m.soul.probability]})]})})}),y.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:y.jsx("button",{className:"text-primary-600 hover:text-primary-900 mr-3",onClick:g=>{g.stopPropagation(),n(`/conversation/new/${m.id}`)},children:"Iniciar Conversación"})})]},m.id))})]})})]})},jM=async(n,e,t)=>{const i=n.toLowerCase();let a="neutral";i.includes("pagar")||i.includes("transferir")||i.includes("depositar")?i.includes("completo")||i.includes("todo")?a="accepts_payment":i.includes("parte")||i.includes("parcial")||i.includes("algo")?a="offers_partial":(i.includes("próxima")||i.includes("después")||i.includes("luego"))&&(a="reschedule"):i.includes("gracias")||i.includes("agradezco")?a="thanks":i.includes("ya pagué")||i.includes("realicé el pago")||i.includes("transferí")?a="confirms_payment":i.includes("no puedo")||i.includes("imposible")?a="evades":i.includes("molesto")||i.includes("harto")||i.includes("fastidio")?a="annoyed":(i.includes("no voy a pagar")||i.includes("no pagaré")||i.includes("olvídate"))&&(a="refuses");const l={neutral:{relationship:0,history:0,attitude:0,sensitivity:0,probability:0},accepts_payment:{relationship:5,history:10,attitude:10,sensitivity:-5,probability:20},offers_partial:{relationship:5,history:5,attitude:10,sensitivity:-5,probability:15},reschedule:{relationship:2,history:-5,attitude:5,sensitivity:0,probability:-5},evades:{relationship:-5,history:-5,attitude:-10,sensitivity:5,probability:-10},annoyed:{relationship:-10,history:-5,attitude:-15,sensitivity:10,probability:-15},refuses:{relationship:-20,history:-20,attitude:-20,sensitivity:20,probability:-30},thanks:{relationship:5,history:0,attitude:10,sensitivity:-5,probability:10},no_answer:{relationship:-5,history:-10,attitude:-5,sensitivity:0,probability:-10},confirms_payment:{relationship:10,history:20,attitude:20,sensitivity:-10,probability:30}},c=l[a]||l.neutral;return{eventType:a,deltas:c,explanation:`Evento detectado "${a}" basado en palabras clave como "${i.split(" ").slice(0,3).join(" ")}..."`,confidence:.7}},kM=async(n,e,t,i)=>{let a="neutral";e.relationship>70?e.sensitivity>70?a="friendly_no_pressure":a="friendly":e.relationship<40&&(e.sensitivity<40?a="formal_direct":a="formal_soft");const l={accepts_payment:{friendly_no_pressure:"¡Excelente noticia! Gracias por tu disposición. Cuando puedas hacer el pago, solo avísame.",friendly:"¡Perfecto! Muchas gracias por tu colaboración. ¿Te envío los datos para el pago?",formal_direct:"Muy bien. Le agradecemos su decisión. Necesitamos que realice el pago antes del fin de semana.",formal_soft:"Gracias por su confirmación. ¿Prefiere que le enviemos los datos bancarios por este medio?",neutral:"Entendido. ¿Desea que le enviemos la información para realizar el pago?"},offers_partial:{friendly_no_pressure:"Agradezco mucho tu esfuerzo por pagar una parte. Cualquier aporte es bienvenido.",friendly:"Gracias por tu disposición. Un pago parcial nos ayuda mucho. ¿Cuándo podrías realizar este abono?",formal_direct:"Tomamos nota de su oferta de pago parcial. ¿Cuándo podríamos esperar el resto del monto?",formal_soft:"Entendemos su situación. El pago parcial es un buen primer paso. ¿Cuándo sería posible?",neutral:"De acuerdo con el pago parcial. ¿Qué monto podría transferir y cuándo?"},default:{friendly_no_pressure:"Entiendo perfectamente. No te preocupes, cuando puedas realizar el pago me avisas.",friendly:"Agradezco que estemos en contacto. ¿Hay algo en lo que pueda ayudarte para facilitar el proceso?",formal_direct:"Necesitamos regularizar su situación. ¿Podría por favor indicarnos una fecha concreta de pago?",formal_soft:"Entendemos que pueden surgir contratiempos. ¿Podría comentarnos cuándo le sería posible realizar el pago?",neutral:"¿Podría por favor indicarnos cuándo podríamos esperar el pago?"}},c=l[i]||l.default;return{responseText:c[a]||c.neutral,explanation:`Respuesta generada usando tono "${a}" basado en Relación: ${e.relationship}, Sensibilidad: ${e.sensitivity}`,confidence:.8}};function ix(n,e){return function(){return n.apply(e,arguments)}}const{toString:VM}=Object.prototype,{getPrototypeOf:by}=Object,{iterator:nf,toStringTag:sx}=Symbol,rf=(n=>e=>{const t=VM.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),lr=n=>(n=n.toLowerCase(),e=>rf(e)===n),sf=n=>e=>typeof e===n,{isArray:Jo}=Array,zu=sf("undefined");function LM(n){return n!==null&&!zu(n)&&n.constructor!==null&&!zu(n.constructor)&&bn(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const ax=lr("ArrayBuffer");function UM(n){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&ax(n.buffer),e}const zM=sf("string"),bn=sf("function"),ox=sf("number"),af=n=>n!==null&&typeof n=="object",BM=n=>n===!0||n===!1,Xd=n=>{if(rf(n)!=="object")return!1;const e=by(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(sx in n)&&!(nf in n)},qM=lr("Date"),HM=lr("File"),FM=lr("Blob"),GM=lr("FileList"),$M=n=>af(n)&&bn(n.pipe),YM=n=>{let e;return n&&(typeof FormData=="function"&&n instanceof FormData||bn(n.append)&&((e=rf(n))==="formdata"||e==="object"&&bn(n.toString)&&n.toString()==="[object FormData]"))},KM=lr("URLSearchParams"),[QM,XM,WM,ZM]=["ReadableStream","Request","Response","Headers"].map(lr),JM=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function rc(n,e,{allOwnKeys:t=!1}={}){if(n===null||typeof n>"u")return;let i,a;if(typeof n!="object"&&(n=[n]),Jo(n))for(i=0,a=n.length;i<a;i++)e.call(null,n[i],i,n);else{const l=t?Object.getOwnPropertyNames(n):Object.keys(n),c=l.length;let f;for(i=0;i<c;i++)f=l[i],e.call(null,n[f],f,n)}}function lx(n,e){e=e.toLowerCase();const t=Object.keys(n);let i=t.length,a;for(;i-- >0;)if(a=t[i],e===a.toLowerCase())return a;return null}const ha=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,ux=n=>!zu(n)&&n!==ha;function lg(){const{caseless:n}=ux(this)&&this||{},e={},t=(i,a)=>{const l=n&&lx(e,a)||a;Xd(e[l])&&Xd(i)?e[l]=lg(e[l],i):Xd(i)?e[l]=lg({},i):Jo(i)?e[l]=i.slice():e[l]=i};for(let i=0,a=arguments.length;i<a;i++)arguments[i]&&rc(arguments[i],t);return e}const ej=(n,e,t,{allOwnKeys:i}={})=>(rc(e,(a,l)=>{t&&bn(a)?n[l]=ix(a,t):n[l]=a},{allOwnKeys:i}),n),tj=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),nj=(n,e,t,i)=>{n.prototype=Object.create(e.prototype,i),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:e.prototype}),t&&Object.assign(n.prototype,t)},rj=(n,e,t,i)=>{let a,l,c;const f={};if(e=e||{},n==null)return e;do{for(a=Object.getOwnPropertyNames(n),l=a.length;l-- >0;)c=a[l],(!i||i(c,n,e))&&!f[c]&&(e[c]=n[c],f[c]=!0);n=t!==!1&&by(n)}while(n&&(!t||t(n,e))&&n!==Object.prototype);return e},ij=(n,e,t)=>{n=String(n),(t===void 0||t>n.length)&&(t=n.length),t-=e.length;const i=n.indexOf(e,t);return i!==-1&&i===t},sj=n=>{if(!n)return null;if(Jo(n))return n;let e=n.length;if(!ox(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=n[e];return t},aj=(n=>e=>n&&e instanceof n)(typeof Uint8Array<"u"&&by(Uint8Array)),oj=(n,e)=>{const i=(n&&n[nf]).call(n);let a;for(;(a=i.next())&&!a.done;){const l=a.value;e.call(n,l[0],l[1])}},lj=(n,e)=>{let t;const i=[];for(;(t=n.exec(e))!==null;)i.push(t);return i},uj=lr("HTMLFormElement"),cj=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,i,a){return i.toUpperCase()+a}),VE=(({hasOwnProperty:n})=>(e,t)=>n.call(e,t))(Object.prototype),dj=lr("RegExp"),cx=(n,e)=>{const t=Object.getOwnPropertyDescriptors(n),i={};rc(t,(a,l)=>{let c;(c=e(a,l,n))!==!1&&(i[l]=c||a)}),Object.defineProperties(n,i)},hj=n=>{cx(n,(e,t)=>{if(bn(n)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const i=n[t];if(bn(i)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},fj=(n,e)=>{const t={},i=a=>{a.forEach(l=>{t[l]=!0})};return Jo(n)?i(n):i(String(n).split(e)),t},mj=()=>{},pj=(n,e)=>n!=null&&Number.isFinite(n=+n)?n:e;function gj(n){return!!(n&&bn(n.append)&&n[sx]==="FormData"&&n[nf])}const yj=n=>{const e=new Array(10),t=(i,a)=>{if(af(i)){if(e.indexOf(i)>=0)return;if(!("toJSON"in i)){e[a]=i;const l=Jo(i)?[]:{};return rc(i,(c,f)=>{const m=t(c,a+1);!zu(m)&&(l[f]=m)}),e[a]=void 0,l}}return i};return t(n,0)},vj=lr("AsyncFunction"),_j=n=>n&&(af(n)||bn(n))&&bn(n.then)&&bn(n.catch),dx=((n,e)=>n?setImmediate:e?((t,i)=>(ha.addEventListener("message",({source:a,data:l})=>{a===ha&&l===t&&i.length&&i.shift()()},!1),a=>{i.push(a),ha.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",bn(ha.postMessage)),bj=typeof queueMicrotask<"u"?queueMicrotask.bind(ha):typeof process<"u"&&process.nextTick||dx,Ej=n=>n!=null&&bn(n[nf]),Z={isArray:Jo,isArrayBuffer:ax,isBuffer:LM,isFormData:YM,isArrayBufferView:UM,isString:zM,isNumber:ox,isBoolean:BM,isObject:af,isPlainObject:Xd,isReadableStream:QM,isRequest:XM,isResponse:WM,isHeaders:ZM,isUndefined:zu,isDate:qM,isFile:HM,isBlob:FM,isRegExp:dj,isFunction:bn,isStream:$M,isURLSearchParams:KM,isTypedArray:aj,isFileList:GM,forEach:rc,merge:lg,extend:ej,trim:JM,stripBOM:tj,inherits:nj,toFlatObject:rj,kindOf:rf,kindOfTest:lr,endsWith:ij,toArray:sj,forEachEntry:oj,matchAll:lj,isHTMLForm:uj,hasOwnProperty:VE,hasOwnProp:VE,reduceDescriptors:cx,freezeMethods:hj,toObjectSet:fj,toCamelCase:cj,noop:mj,toFiniteNumber:pj,findKey:lx,global:ha,isContextDefined:ux,isSpecCompliantForm:gj,toJSONObject:yj,isAsyncFn:vj,isThenable:_j,setImmediate:dx,asap:bj,isIterable:Ej};function Ne(n,e,t,i,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),i&&(this.request=i),a&&(this.response=a,this.status=a.status?a.status:null)}Z.inherits(Ne,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Z.toJSONObject(this.config),code:this.code,status:this.status}}});const hx=Ne.prototype,fx={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{fx[n]={value:n}});Object.defineProperties(Ne,fx);Object.defineProperty(hx,"isAxiosError",{value:!0});Ne.from=(n,e,t,i,a,l)=>{const c=Object.create(hx);return Z.toFlatObject(n,c,function(m){return m!==Error.prototype},f=>f!=="isAxiosError"),Ne.call(c,n.message,e,t,i,a),c.cause=n,c.name=n.name,l&&Object.assign(c,l),c};const wj=null;function ug(n){return Z.isPlainObject(n)||Z.isArray(n)}function mx(n){return Z.endsWith(n,"[]")?n.slice(0,-2):n}function LE(n,e,t){return n?n.concat(e).map(function(a,l){return a=mx(a),!t&&l?"["+a+"]":a}).join(t?".":""):e}function Tj(n){return Z.isArray(n)&&!n.some(ug)}const xj=Z.toFlatObject(Z,{},null,function(e){return/^is[A-Z]/.test(e)});function of(n,e,t){if(!Z.isObject(n))throw new TypeError("target must be an object");e=e||new FormData,t=Z.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(U,I){return!Z.isUndefined(I[U])});const i=t.metaTokens,a=t.visitor||v,l=t.dots,c=t.indexes,m=(t.Blob||typeof Blob<"u"&&Blob)&&Z.isSpecCompliantForm(e);if(!Z.isFunction(a))throw new TypeError("visitor must be a function");function g(A){if(A===null)return"";if(Z.isDate(A))return A.toISOString();if(!m&&Z.isBlob(A))throw new Ne("Blob is not supported. Use a Buffer instead.");return Z.isArrayBuffer(A)||Z.isTypedArray(A)?m&&typeof Blob=="function"?new Blob([A]):Buffer.from(A):A}function v(A,U,I){let q=A;if(A&&!I&&typeof A=="object"){if(Z.endsWith(U,"{}"))U=i?U:U.slice(0,-2),A=JSON.stringify(A);else if(Z.isArray(A)&&Tj(A)||(Z.isFileList(A)||Z.endsWith(U,"[]"))&&(q=Z.toArray(A)))return U=mx(U),q.forEach(function(Y,de){!(Z.isUndefined(Y)||Y===null)&&e.append(c===!0?LE([U],de,l):c===null?U:U+"[]",g(Y))}),!1}return ug(A)?!0:(e.append(LE(I,U,l),g(A)),!1)}const w=[],T=Object.assign(xj,{defaultVisitor:v,convertValue:g,isVisitable:ug});function C(A,U){if(!Z.isUndefined(A)){if(w.indexOf(A)!==-1)throw Error("Circular reference detected in "+U.join("."));w.push(A),Z.forEach(A,function(q,X){(!(Z.isUndefined(q)||q===null)&&a.call(e,q,Z.isString(X)?X.trim():X,U,T))===!0&&C(q,U?U.concat(X):[X])}),w.pop()}}if(!Z.isObject(n))throw new TypeError("data must be an object");return C(n),e}function UE(n){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(i){return e[i]})}function Ey(n,e){this._pairs=[],n&&of(n,this,e)}const px=Ey.prototype;px.append=function(e,t){this._pairs.push([e,t])};px.toString=function(e){const t=e?function(i){return e.call(this,i,UE)}:UE;return this._pairs.map(function(a){return t(a[0])+"="+t(a[1])},"").join("&")};function Sj(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function gx(n,e,t){if(!e)return n;const i=t&&t.encode||Sj;Z.isFunction(t)&&(t={serialize:t});const a=t&&t.serialize;let l;if(a?l=a(e,t):l=Z.isURLSearchParams(e)?e.toString():new Ey(e,t).toString(i),l){const c=n.indexOf("#");c!==-1&&(n=n.slice(0,c)),n+=(n.indexOf("?")===-1?"?":"&")+l}return n}class zE{constructor(){this.handlers=[]}use(e,t,i){return this.handlers.push({fulfilled:e,rejected:t,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Z.forEach(this.handlers,function(i){i!==null&&e(i)})}}const yx={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Aj=typeof URLSearchParams<"u"?URLSearchParams:Ey,Rj=typeof FormData<"u"?FormData:null,Cj=typeof Blob<"u"?Blob:null,Nj={isBrowser:!0,classes:{URLSearchParams:Aj,FormData:Rj,Blob:Cj},protocols:["http","https","file","blob","url","data"]},wy=typeof window<"u"&&typeof document<"u",cg=typeof navigator=="object"&&navigator||void 0,Ij=wy&&(!cg||["ReactNative","NativeScript","NS"].indexOf(cg.product)<0),Dj=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Oj=wy&&window.location.href||"http://localhost",Pj=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:wy,hasStandardBrowserEnv:Ij,hasStandardBrowserWebWorkerEnv:Dj,navigator:cg,origin:Oj},Symbol.toStringTag,{value:"Module"})),an={...Pj,...Nj};function Mj(n,e){return of(n,new an.classes.URLSearchParams,Object.assign({visitor:function(t,i,a,l){return an.isNode&&Z.isBuffer(t)?(this.append(i,t.toString("base64")),!1):l.defaultVisitor.apply(this,arguments)}},e))}function jj(n){return Z.matchAll(/\w+|\[(\w*)]/g,n).map(e=>e[0]==="[]"?"":e[1]||e[0])}function kj(n){const e={},t=Object.keys(n);let i;const a=t.length;let l;for(i=0;i<a;i++)l=t[i],e[l]=n[l];return e}function vx(n){function e(t,i,a,l){let c=t[l++];if(c==="__proto__")return!0;const f=Number.isFinite(+c),m=l>=t.length;return c=!c&&Z.isArray(a)?a.length:c,m?(Z.hasOwnProp(a,c)?a[c]=[a[c],i]:a[c]=i,!f):((!a[c]||!Z.isObject(a[c]))&&(a[c]=[]),e(t,i,a[c],l)&&Z.isArray(a[c])&&(a[c]=kj(a[c])),!f)}if(Z.isFormData(n)&&Z.isFunction(n.entries)){const t={};return Z.forEachEntry(n,(i,a)=>{e(jj(i),a,t,0)}),t}return null}function Vj(n,e,t){if(Z.isString(n))try{return(e||JSON.parse)(n),Z.trim(n)}catch(i){if(i.name!=="SyntaxError")throw i}return(t||JSON.stringify)(n)}const ic={transitional:yx,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const i=t.getContentType()||"",a=i.indexOf("application/json")>-1,l=Z.isObject(e);if(l&&Z.isHTMLForm(e)&&(e=new FormData(e)),Z.isFormData(e))return a?JSON.stringify(vx(e)):e;if(Z.isArrayBuffer(e)||Z.isBuffer(e)||Z.isStream(e)||Z.isFile(e)||Z.isBlob(e)||Z.isReadableStream(e))return e;if(Z.isArrayBufferView(e))return e.buffer;if(Z.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let f;if(l){if(i.indexOf("application/x-www-form-urlencoded")>-1)return Mj(e,this.formSerializer).toString();if((f=Z.isFileList(e))||i.indexOf("multipart/form-data")>-1){const m=this.env&&this.env.FormData;return of(f?{"files[]":e}:e,m&&new m,this.formSerializer)}}return l||a?(t.setContentType("application/json",!1),Vj(e)):e}],transformResponse:[function(e){const t=this.transitional||ic.transitional,i=t&&t.forcedJSONParsing,a=this.responseType==="json";if(Z.isResponse(e)||Z.isReadableStream(e))return e;if(e&&Z.isString(e)&&(i&&!this.responseType||a)){const c=!(t&&t.silentJSONParsing)&&a;try{return JSON.parse(e)}catch(f){if(c)throw f.name==="SyntaxError"?Ne.from(f,Ne.ERR_BAD_RESPONSE,this,null,this.response):f}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:an.classes.FormData,Blob:an.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Z.forEach(["delete","get","head","post","put","patch"],n=>{ic.headers[n]={}});const Lj=Z.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Uj=n=>{const e={};let t,i,a;return n&&n.split(`
`).forEach(function(c){a=c.indexOf(":"),t=c.substring(0,a).trim().toLowerCase(),i=c.substring(a+1).trim(),!(!t||e[t]&&Lj[t])&&(t==="set-cookie"?e[t]?e[t].push(i):e[t]=[i]:e[t]=e[t]?e[t]+", "+i:i)}),e},BE=Symbol("internals");function mu(n){return n&&String(n).trim().toLowerCase()}function Wd(n){return n===!1||n==null?n:Z.isArray(n)?n.map(Wd):String(n)}function zj(n){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=t.exec(n);)e[i[1]]=i[2];return e}const Bj=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function Dp(n,e,t,i,a){if(Z.isFunction(i))return i.call(this,e,t);if(a&&(e=t),!!Z.isString(e)){if(Z.isString(i))return e.indexOf(i)!==-1;if(Z.isRegExp(i))return i.test(e)}}function qj(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,i)=>t.toUpperCase()+i)}function Hj(n,e){const t=Z.toCamelCase(" "+e);["get","set","has"].forEach(i=>{Object.defineProperty(n,i+t,{value:function(a,l,c){return this[i].call(this,e,a,l,c)},configurable:!0})})}let En=class{constructor(e){e&&this.set(e)}set(e,t,i){const a=this;function l(f,m,g){const v=mu(m);if(!v)throw new Error("header name must be a non-empty string");const w=Z.findKey(a,v);(!w||a[w]===void 0||g===!0||g===void 0&&a[w]!==!1)&&(a[w||m]=Wd(f))}const c=(f,m)=>Z.forEach(f,(g,v)=>l(g,v,m));if(Z.isPlainObject(e)||e instanceof this.constructor)c(e,t);else if(Z.isString(e)&&(e=e.trim())&&!Bj(e))c(Uj(e),t);else if(Z.isObject(e)&&Z.isIterable(e)){let f={},m,g;for(const v of e){if(!Z.isArray(v))throw TypeError("Object iterator must return a key-value pair");f[g=v[0]]=(m=f[g])?Z.isArray(m)?[...m,v[1]]:[m,v[1]]:v[1]}c(f,t)}else e!=null&&l(t,e,i);return this}get(e,t){if(e=mu(e),e){const i=Z.findKey(this,e);if(i){const a=this[i];if(!t)return a;if(t===!0)return zj(a);if(Z.isFunction(t))return t.call(this,a,i);if(Z.isRegExp(t))return t.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=mu(e),e){const i=Z.findKey(this,e);return!!(i&&this[i]!==void 0&&(!t||Dp(this,this[i],i,t)))}return!1}delete(e,t){const i=this;let a=!1;function l(c){if(c=mu(c),c){const f=Z.findKey(i,c);f&&(!t||Dp(i,i[f],f,t))&&(delete i[f],a=!0)}}return Z.isArray(e)?e.forEach(l):l(e),a}clear(e){const t=Object.keys(this);let i=t.length,a=!1;for(;i--;){const l=t[i];(!e||Dp(this,this[l],l,e,!0))&&(delete this[l],a=!0)}return a}normalize(e){const t=this,i={};return Z.forEach(this,(a,l)=>{const c=Z.findKey(i,l);if(c){t[c]=Wd(a),delete t[l];return}const f=e?qj(l):String(l).trim();f!==l&&delete t[l],t[f]=Wd(a),i[f]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return Z.forEach(this,(i,a)=>{i!=null&&i!==!1&&(t[a]=e&&Z.isArray(i)?i.join(", "):i)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const i=new this(e);return t.forEach(a=>i.set(a)),i}static accessor(e){const i=(this[BE]=this[BE]={accessors:{}}).accessors,a=this.prototype;function l(c){const f=mu(c);i[f]||(Hj(a,c),i[f]=!0)}return Z.isArray(e)?e.forEach(l):l(e),this}};En.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Z.reduceDescriptors(En.prototype,({value:n},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(i){this[t]=i}}});Z.freezeMethods(En);function Op(n,e){const t=this||ic,i=e||t,a=En.from(i.headers);let l=i.data;return Z.forEach(n,function(f){l=f.call(t,l,a.normalize(),e?e.status:void 0)}),a.normalize(),l}function _x(n){return!!(n&&n.__CANCEL__)}function el(n,e,t){Ne.call(this,n??"canceled",Ne.ERR_CANCELED,e,t),this.name="CanceledError"}Z.inherits(el,Ne,{__CANCEL__:!0});function bx(n,e,t){const i=t.config.validateStatus;!t.status||!i||i(t.status)?n(t):e(new Ne("Request failed with status code "+t.status,[Ne.ERR_BAD_REQUEST,Ne.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function Fj(n){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return e&&e[1]||""}function Gj(n,e){n=n||10;const t=new Array(n),i=new Array(n);let a=0,l=0,c;return e=e!==void 0?e:1e3,function(m){const g=Date.now(),v=i[l];c||(c=g),t[a]=m,i[a]=g;let w=l,T=0;for(;w!==a;)T+=t[w++],w=w%n;if(a=(a+1)%n,a===l&&(l=(l+1)%n),g-c<e)return;const C=v&&g-v;return C?Math.round(T*1e3/C):void 0}}function $j(n,e){let t=0,i=1e3/e,a,l;const c=(g,v=Date.now())=>{t=v,a=null,l&&(clearTimeout(l),l=null),n.apply(null,g)};return[(...g)=>{const v=Date.now(),w=v-t;w>=i?c(g,v):(a=g,l||(l=setTimeout(()=>{l=null,c(a)},i-w)))},()=>a&&c(a)]}const xh=(n,e,t=3)=>{let i=0;const a=Gj(50,250);return $j(l=>{const c=l.loaded,f=l.lengthComputable?l.total:void 0,m=c-i,g=a(m),v=c<=f;i=c;const w={loaded:c,total:f,progress:f?c/f:void 0,bytes:m,rate:g||void 0,estimated:g&&f&&v?(f-c)/g:void 0,event:l,lengthComputable:f!=null,[e?"download":"upload"]:!0};n(w)},t)},qE=(n,e)=>{const t=n!=null;return[i=>e[0]({lengthComputable:t,total:n,loaded:i}),e[1]]},HE=n=>(...e)=>Z.asap(()=>n(...e)),Yj=an.hasStandardBrowserEnv?((n,e)=>t=>(t=new URL(t,an.origin),n.protocol===t.protocol&&n.host===t.host&&(e||n.port===t.port)))(new URL(an.origin),an.navigator&&/(msie|trident)/i.test(an.navigator.userAgent)):()=>!0,Kj=an.hasStandardBrowserEnv?{write(n,e,t,i,a,l){const c=[n+"="+encodeURIComponent(e)];Z.isNumber(t)&&c.push("expires="+new Date(t).toGMTString()),Z.isString(i)&&c.push("path="+i),Z.isString(a)&&c.push("domain="+a),l===!0&&c.push("secure"),document.cookie=c.join("; ")},read(n){const e=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(n){this.write(n,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Qj(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function Xj(n,e){return e?n.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):n}function Ex(n,e,t){let i=!Qj(e);return n&&(i||t==!1)?Xj(n,e):e}const FE=n=>n instanceof En?{...n}:n;function wa(n,e){e=e||{};const t={};function i(g,v,w,T){return Z.isPlainObject(g)&&Z.isPlainObject(v)?Z.merge.call({caseless:T},g,v):Z.isPlainObject(v)?Z.merge({},v):Z.isArray(v)?v.slice():v}function a(g,v,w,T){if(Z.isUndefined(v)){if(!Z.isUndefined(g))return i(void 0,g,w,T)}else return i(g,v,w,T)}function l(g,v){if(!Z.isUndefined(v))return i(void 0,v)}function c(g,v){if(Z.isUndefined(v)){if(!Z.isUndefined(g))return i(void 0,g)}else return i(void 0,v)}function f(g,v,w){if(w in e)return i(g,v);if(w in n)return i(void 0,g)}const m={url:l,method:l,data:l,baseURL:c,transformRequest:c,transformResponse:c,paramsSerializer:c,timeout:c,timeoutMessage:c,withCredentials:c,withXSRFToken:c,adapter:c,responseType:c,xsrfCookieName:c,xsrfHeaderName:c,onUploadProgress:c,onDownloadProgress:c,decompress:c,maxContentLength:c,maxBodyLength:c,beforeRedirect:c,transport:c,httpAgent:c,httpsAgent:c,cancelToken:c,socketPath:c,responseEncoding:c,validateStatus:f,headers:(g,v,w)=>a(FE(g),FE(v),w,!0)};return Z.forEach(Object.keys(Object.assign({},n,e)),function(v){const w=m[v]||a,T=w(n[v],e[v],v);Z.isUndefined(T)&&w!==f||(t[v]=T)}),t}const wx=n=>{const e=wa({},n);let{data:t,withXSRFToken:i,xsrfHeaderName:a,xsrfCookieName:l,headers:c,auth:f}=e;e.headers=c=En.from(c),e.url=gx(Ex(e.baseURL,e.url,e.allowAbsoluteUrls),n.params,n.paramsSerializer),f&&c.set("Authorization","Basic "+btoa((f.username||"")+":"+(f.password?unescape(encodeURIComponent(f.password)):"")));let m;if(Z.isFormData(t)){if(an.hasStandardBrowserEnv||an.hasStandardBrowserWebWorkerEnv)c.setContentType(void 0);else if((m=c.getContentType())!==!1){const[g,...v]=m?m.split(";").map(w=>w.trim()).filter(Boolean):[];c.setContentType([g||"multipart/form-data",...v].join("; "))}}if(an.hasStandardBrowserEnv&&(i&&Z.isFunction(i)&&(i=i(e)),i||i!==!1&&Yj(e.url))){const g=a&&l&&Kj.read(l);g&&c.set(a,g)}return e},Wj=typeof XMLHttpRequest<"u",Zj=Wj&&function(n){return new Promise(function(t,i){const a=wx(n);let l=a.data;const c=En.from(a.headers).normalize();let{responseType:f,onUploadProgress:m,onDownloadProgress:g}=a,v,w,T,C,A;function U(){C&&C(),A&&A(),a.cancelToken&&a.cancelToken.unsubscribe(v),a.signal&&a.signal.removeEventListener("abort",v)}let I=new XMLHttpRequest;I.open(a.method.toUpperCase(),a.url,!0),I.timeout=a.timeout;function q(){if(!I)return;const Y=En.from("getAllResponseHeaders"in I&&I.getAllResponseHeaders()),ue={data:!f||f==="text"||f==="json"?I.responseText:I.response,status:I.status,statusText:I.statusText,headers:Y,config:n,request:I};bx(function(M){t(M),U()},function(M){i(M),U()},ue),I=null}"onloadend"in I?I.onloadend=q:I.onreadystatechange=function(){!I||I.readyState!==4||I.status===0&&!(I.responseURL&&I.responseURL.indexOf("file:")===0)||setTimeout(q)},I.onabort=function(){I&&(i(new Ne("Request aborted",Ne.ECONNABORTED,n,I)),I=null)},I.onerror=function(){i(new Ne("Network Error",Ne.ERR_NETWORK,n,I)),I=null},I.ontimeout=function(){let de=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const ue=a.transitional||yx;a.timeoutErrorMessage&&(de=a.timeoutErrorMessage),i(new Ne(de,ue.clarifyTimeoutError?Ne.ETIMEDOUT:Ne.ECONNABORTED,n,I)),I=null},l===void 0&&c.setContentType(null),"setRequestHeader"in I&&Z.forEach(c.toJSON(),function(de,ue){I.setRequestHeader(ue,de)}),Z.isUndefined(a.withCredentials)||(I.withCredentials=!!a.withCredentials),f&&f!=="json"&&(I.responseType=a.responseType),g&&([T,A]=xh(g,!0),I.addEventListener("progress",T)),m&&I.upload&&([w,C]=xh(m),I.upload.addEventListener("progress",w),I.upload.addEventListener("loadend",C)),(a.cancelToken||a.signal)&&(v=Y=>{I&&(i(!Y||Y.type?new el(null,n,I):Y),I.abort(),I=null)},a.cancelToken&&a.cancelToken.subscribe(v),a.signal&&(a.signal.aborted?v():a.signal.addEventListener("abort",v)));const X=Fj(a.url);if(X&&an.protocols.indexOf(X)===-1){i(new Ne("Unsupported protocol "+X+":",Ne.ERR_BAD_REQUEST,n));return}I.send(l||null)})},Jj=(n,e)=>{const{length:t}=n=n?n.filter(Boolean):[];if(e||t){let i=new AbortController,a;const l=function(g){if(!a){a=!0,f();const v=g instanceof Error?g:this.reason;i.abort(v instanceof Ne?v:new el(v instanceof Error?v.message:v))}};let c=e&&setTimeout(()=>{c=null,l(new Ne(`timeout ${e} of ms exceeded`,Ne.ETIMEDOUT))},e);const f=()=>{n&&(c&&clearTimeout(c),c=null,n.forEach(g=>{g.unsubscribe?g.unsubscribe(l):g.removeEventListener("abort",l)}),n=null)};n.forEach(g=>g.addEventListener("abort",l));const{signal:m}=i;return m.unsubscribe=()=>Z.asap(f),m}},e3=function*(n,e){let t=n.byteLength;if(t<e){yield n;return}let i=0,a;for(;i<t;)a=i+e,yield n.slice(i,a),i=a},t3=async function*(n,e){for await(const t of n3(n))yield*e3(t,e)},n3=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const e=n.getReader();try{for(;;){const{done:t,value:i}=await e.read();if(t)break;yield i}}finally{await e.cancel()}},GE=(n,e,t,i)=>{const a=t3(n,e);let l=0,c,f=m=>{c||(c=!0,i&&i(m))};return new ReadableStream({async pull(m){try{const{done:g,value:v}=await a.next();if(g){f(),m.close();return}let w=v.byteLength;if(t){let T=l+=w;t(T)}m.enqueue(new Uint8Array(v))}catch(g){throw f(g),g}},cancel(m){return f(m),a.return()}},{highWaterMark:2})},lf=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Tx=lf&&typeof ReadableStream=="function",r3=lf&&(typeof TextEncoder=="function"?(n=>e=>n.encode(e))(new TextEncoder):async n=>new Uint8Array(await new Response(n).arrayBuffer())),xx=(n,...e)=>{try{return!!n(...e)}catch{return!1}},i3=Tx&&xx(()=>{let n=!1;const e=new Request(an.origin,{body:new ReadableStream,method:"POST",get duplex(){return n=!0,"half"}}).headers.has("Content-Type");return n&&!e}),$E=64*1024,dg=Tx&&xx(()=>Z.isReadableStream(new Response("").body)),Sh={stream:dg&&(n=>n.body)};lf&&(n=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Sh[e]&&(Sh[e]=Z.isFunction(n[e])?t=>t[e]():(t,i)=>{throw new Ne(`Response type '${e}' is not supported`,Ne.ERR_NOT_SUPPORT,i)})})})(new Response);const s3=async n=>{if(n==null)return 0;if(Z.isBlob(n))return n.size;if(Z.isSpecCompliantForm(n))return(await new Request(an.origin,{method:"POST",body:n}).arrayBuffer()).byteLength;if(Z.isArrayBufferView(n)||Z.isArrayBuffer(n))return n.byteLength;if(Z.isURLSearchParams(n)&&(n=n+""),Z.isString(n))return(await r3(n)).byteLength},a3=async(n,e)=>{const t=Z.toFiniteNumber(n.getContentLength());return t??s3(e)},o3=lf&&(async n=>{let{url:e,method:t,data:i,signal:a,cancelToken:l,timeout:c,onDownloadProgress:f,onUploadProgress:m,responseType:g,headers:v,withCredentials:w="same-origin",fetchOptions:T}=wx(n);g=g?(g+"").toLowerCase():"text";let C=Jj([a,l&&l.toAbortSignal()],c),A;const U=C&&C.unsubscribe&&(()=>{C.unsubscribe()});let I;try{if(m&&i3&&t!=="get"&&t!=="head"&&(I=await a3(v,i))!==0){let ue=new Request(e,{method:"POST",body:i,duplex:"half"}),ye;if(Z.isFormData(i)&&(ye=ue.headers.get("content-type"))&&v.setContentType(ye),ue.body){const[M,R]=qE(I,xh(HE(m)));i=GE(ue.body,$E,M,R)}}Z.isString(w)||(w=w?"include":"omit");const q="credentials"in Request.prototype;A=new Request(e,{...T,signal:C,method:t.toUpperCase(),headers:v.normalize().toJSON(),body:i,duplex:"half",credentials:q?w:void 0});let X=await fetch(A);const Y=dg&&(g==="stream"||g==="response");if(dg&&(f||Y&&U)){const ue={};["status","statusText","headers"].forEach(N=>{ue[N]=X[N]});const ye=Z.toFiniteNumber(X.headers.get("content-length")),[M,R]=f&&qE(ye,xh(HE(f),!0))||[];X=new Response(GE(X.body,$E,M,()=>{R&&R(),U&&U()}),ue)}g=g||"text";let de=await Sh[Z.findKey(Sh,g)||"text"](X,n);return!Y&&U&&U(),await new Promise((ue,ye)=>{bx(ue,ye,{data:de,headers:En.from(X.headers),status:X.status,statusText:X.statusText,config:n,request:A})})}catch(q){throw U&&U(),q&&q.name==="TypeError"&&/Load failed|fetch/i.test(q.message)?Object.assign(new Ne("Network Error",Ne.ERR_NETWORK,n,A),{cause:q.cause||q}):Ne.from(q,q&&q.code,n,A)}}),hg={http:wj,xhr:Zj,fetch:o3};Z.forEach(hg,(n,e)=>{if(n){try{Object.defineProperty(n,"name",{value:e})}catch{}Object.defineProperty(n,"adapterName",{value:e})}});const YE=n=>`- ${n}`,l3=n=>Z.isFunction(n)||n===null||n===!1,Sx={getAdapter:n=>{n=Z.isArray(n)?n:[n];const{length:e}=n;let t,i;const a={};for(let l=0;l<e;l++){t=n[l];let c;if(i=t,!l3(t)&&(i=hg[(c=String(t)).toLowerCase()],i===void 0))throw new Ne(`Unknown adapter '${c}'`);if(i)break;a[c||"#"+l]=i}if(!i){const l=Object.entries(a).map(([f,m])=>`adapter ${f} `+(m===!1?"is not supported by the environment":"is not available in the build"));let c=e?l.length>1?`since :
`+l.map(YE).join(`
`):" "+YE(l[0]):"as no adapter specified";throw new Ne("There is no suitable adapter to dispatch the request "+c,"ERR_NOT_SUPPORT")}return i},adapters:hg};function Pp(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new el(null,n)}function KE(n){return Pp(n),n.headers=En.from(n.headers),n.data=Op.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),Sx.getAdapter(n.adapter||ic.adapter)(n).then(function(i){return Pp(n),i.data=Op.call(n,n.transformResponse,i),i.headers=En.from(i.headers),i},function(i){return _x(i)||(Pp(n),i&&i.response&&(i.response.data=Op.call(n,n.transformResponse,i.response),i.response.headers=En.from(i.response.headers))),Promise.reject(i)})}const Ax="1.9.0",uf={};["object","boolean","number","function","string","symbol"].forEach((n,e)=>{uf[n]=function(i){return typeof i===n||"a"+(e<1?"n ":" ")+n}});const QE={};uf.transitional=function(e,t,i){function a(l,c){return"[Axios v"+Ax+"] Transitional option '"+l+"'"+c+(i?". "+i:"")}return(l,c,f)=>{if(e===!1)throw new Ne(a(c," has been removed"+(t?" in "+t:"")),Ne.ERR_DEPRECATED);return t&&!QE[c]&&(QE[c]=!0,console.warn(a(c," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(l,c,f):!0}};uf.spelling=function(e){return(t,i)=>(console.warn(`${i} is likely a misspelling of ${e}`),!0)};function u3(n,e,t){if(typeof n!="object")throw new Ne("options must be an object",Ne.ERR_BAD_OPTION_VALUE);const i=Object.keys(n);let a=i.length;for(;a-- >0;){const l=i[a],c=e[l];if(c){const f=n[l],m=f===void 0||c(f,l,n);if(m!==!0)throw new Ne("option "+l+" must be "+m,Ne.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new Ne("Unknown option "+l,Ne.ERR_BAD_OPTION)}}const Zd={assertOptions:u3,validators:uf},Ar=Zd.validators;let pa=class{constructor(e){this.defaults=e||{},this.interceptors={request:new zE,response:new zE}}async request(e,t){try{return await this._request(e,t)}catch(i){if(i instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const l=a.stack?a.stack.replace(/^.+\n/,""):"";try{i.stack?l&&!String(i.stack).endsWith(l.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+l):i.stack=l}catch{}}throw i}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=wa(this.defaults,t);const{transitional:i,paramsSerializer:a,headers:l}=t;i!==void 0&&Zd.assertOptions(i,{silentJSONParsing:Ar.transitional(Ar.boolean),forcedJSONParsing:Ar.transitional(Ar.boolean),clarifyTimeoutError:Ar.transitional(Ar.boolean)},!1),a!=null&&(Z.isFunction(a)?t.paramsSerializer={serialize:a}:Zd.assertOptions(a,{encode:Ar.function,serialize:Ar.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),Zd.assertOptions(t,{baseUrl:Ar.spelling("baseURL"),withXsrfToken:Ar.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let c=l&&Z.merge(l.common,l[t.method]);l&&Z.forEach(["delete","get","head","post","put","patch","common"],A=>{delete l[A]}),t.headers=En.concat(c,l);const f=[];let m=!0;this.interceptors.request.forEach(function(U){typeof U.runWhen=="function"&&U.runWhen(t)===!1||(m=m&&U.synchronous,f.unshift(U.fulfilled,U.rejected))});const g=[];this.interceptors.response.forEach(function(U){g.push(U.fulfilled,U.rejected)});let v,w=0,T;if(!m){const A=[KE.bind(this),void 0];for(A.unshift.apply(A,f),A.push.apply(A,g),T=A.length,v=Promise.resolve(t);w<T;)v=v.then(A[w++],A[w++]);return v}T=f.length;let C=t;for(w=0;w<T;){const A=f[w++],U=f[w++];try{C=A(C)}catch(I){U.call(this,I);break}}try{v=KE.call(this,C)}catch(A){return Promise.reject(A)}for(w=0,T=g.length;w<T;)v=v.then(g[w++],g[w++]);return v}getUri(e){e=wa(this.defaults,e);const t=Ex(e.baseURL,e.url,e.allowAbsoluteUrls);return gx(t,e.params,e.paramsSerializer)}};Z.forEach(["delete","get","head","options"],function(e){pa.prototype[e]=function(t,i){return this.request(wa(i||{},{method:e,url:t,data:(i||{}).data}))}});Z.forEach(["post","put","patch"],function(e){function t(i){return function(l,c,f){return this.request(wa(f||{},{method:e,headers:i?{"Content-Type":"multipart/form-data"}:{},url:l,data:c}))}}pa.prototype[e]=t(),pa.prototype[e+"Form"]=t(!0)});let c3=class Rx{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(l){t=l});const i=this;this.promise.then(a=>{if(!i._listeners)return;let l=i._listeners.length;for(;l-- >0;)i._listeners[l](a);i._listeners=null}),this.promise.then=a=>{let l;const c=new Promise(f=>{i.subscribe(f),l=f}).then(a);return c.cancel=function(){i.unsubscribe(l)},c},e(function(l,c,f){i.reason||(i.reason=new el(l,c,f),t(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=i=>{e.abort(i)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new Rx(function(a){e=a}),cancel:e}}};function d3(n){return function(t){return n.apply(null,t)}}function h3(n){return Z.isObject(n)&&n.isAxiosError===!0}const fg={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(fg).forEach(([n,e])=>{fg[e]=n});function Cx(n){const e=new pa(n),t=ix(pa.prototype.request,e);return Z.extend(t,pa.prototype,e,{allOwnKeys:!0}),Z.extend(t,e,null,{allOwnKeys:!0}),t.create=function(a){return Cx(wa(n,a))},t}const yt=Cx(ic);yt.Axios=pa;yt.CanceledError=el;yt.CancelToken=c3;yt.isCancel=_x;yt.VERSION=Ax;yt.toFormData=of;yt.AxiosError=Ne;yt.Cancel=yt.CanceledError;yt.all=function(e){return Promise.all(e)};yt.spread=d3;yt.isAxiosError=h3;yt.mergeConfig=wa;yt.AxiosHeaders=En;yt.formToJSON=n=>vx(Z.isHTMLForm(n)?new FormData(n):n);yt.getAdapter=Sx.getAdapter;yt.HttpStatusCode=fg;yt.default=yt;const{Axios:D3,AxiosError:O3,CanceledError:P3,isCancel:M3,CancelToken:j3,VERSION:k3,all:V3,Cancel:L3,isAxiosError:U3,spread:z3,toFormData:B3,AxiosHeaders:q3,HttpStatusCode:H3,formToJSON:F3,getAdapter:G3,mergeConfig:$3}=yt,Nx=()=>localStorage.getItem("huggingface_api_key")||".",f3=async(n,e,t)=>{var i;try{const a=Nx();if(!a||a.trim()==="")return console.log("No hay API key configurada para Hugging Face, usando fallback local"),XE(n,e,t);const c=yt.create({baseURL:"https://api-inference.huggingface.co/models/HuggingFaceH4/zephyr-7b-beta",headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}});let f="";const m=e.slice(-5);for(const I of m)I.sender==="agent"?f+=`Agente: ${I.message}
`:f+=`Cliente: ${I.message}
`;const g=`<|system|>
Eres un asistente especializado en analizar mensajes en un contexto de cobranza. Tu tarea es categorizar la respuesta del cliente.

IMPORTANTE: NUNCA debes mencionar montos específicos de deuda. Habla siempre en términos de "deuda pendiente" o porcentajes, nunca valores monetarios exactos.

El cliente tiene las siguientes características:
- Relación/Cercanía: ${t.relationship}/100
- Historial de Pago: ${t.history}/100
- Actitud: ${t.attitude}/100
- Sensibilidad a Presión: ${t.sensitivity}/100
- Probabilidad de Pago: ${t.probability}/100

Historial reciente de la conversación: 
${f}
<|user|>
Clasifica este mensaje del cliente: "${n}"

Elige UNA de estas categorías EXACTAS sin explicación:
- neutral
- accepts_payment
- offers_partial
- reschedule
- evades
- annoyed
- refuses
- thanks
- no_answer
- confirms_payment
<|assistant|>`;console.log("Enviando solicitud a Hugging Face API para análisis...");const v=await c.post("",{inputs:g,parameters:{max_new_tokens:20,temperature:.1,top_p:.95,do_sample:!0,return_full_text:!1}});console.log("Respuesta de Hugging Face:",v.data);let w="";Array.isArray(v.data)?w=((i=v.data[0])==null?void 0:i.generated_text)||"":w=v.data.generated_text||"";let T="neutral";const C=["neutral","accepts_payment","offers_partial","reschedule","evades","annoyed","refuses","thanks","no_answer","confirms_payment"];for(const I of C)if(w.toLowerCase().includes(I)){T=I;break}const A={neutral:{relationship:0,history:0,attitude:0,sensitivity:0,probability:0},accepts_payment:{relationship:5,history:10,attitude:10,sensitivity:-5,probability:20},offers_partial:{relationship:5,history:5,attitude:10,sensitivity:-5,probability:15},reschedule:{relationship:2,history:-5,attitude:5,sensitivity:0,probability:-5},evades:{relationship:-5,history:-5,attitude:-10,sensitivity:5,probability:-10},annoyed:{relationship:-10,history:-5,attitude:-15,sensitivity:10,probability:-15},refuses:{relationship:-20,history:-20,attitude:-20,sensitivity:20,probability:-30},thanks:{relationship:5,history:0,attitude:10,sensitivity:-5,probability:10},no_answer:{relationship:-5,history:-10,attitude:-5,sensitivity:0,probability:-10},confirms_payment:{relationship:10,history:20,attitude:20,sensitivity:-10,probability:30}},U=A[T]||A.neutral;return console.log(`Evento detectado por Zephyr: "${T}" con deltas:`,U),{eventType:T,deltas:U,explanation:`Evento detectado por Zephyr: "${T}"`,confidence:.8}}catch(a){return console.error("Error al analizar mensaje con Zephyr:",a),console.log("Usando fallback local debido al error"),XE(n)}},m3=async(n,e,t,i)=>{var a;try{const l=Nx();if(!l||l.trim()==="")return console.log("No hay API key configurada para Hugging Face, usando fallback local"),WE(n,e,t,i);const f=yt.create({baseURL:"https://api-inference.huggingface.co/models/HuggingFaceH4/zephyr-7b-beta",headers:{Authorization:`Bearer ${l}`,"Content-Type":"application/json"}});let m="";const g=n.slice(-6);for(const A of g)A.sender==="agent"?m+=`Agente: ${A.message}
`:m+=`Cliente: ${A.message}
`;let v="neutral";e.relationship>70?v=e.sensitivity>70?"amistoso sin presión":"amistoso directo":e.relationship<40&&(v=e.sensitivity<40?"formal directo":"formal suave");const w=`<|system|>
Eres un agente de cobranza de la empresa Acriventas. Tu objetivo es obtener el pago de una deuda pendiente mientras mantienes una buena relación con el cliente.

INSTRUCCIONES IMPORTANTES: 
1. NUNCA menciones montos específicos de dinero o deuda en tus respuestas.
2. Siempre habla en términos de "deuda pendiente" o usando porcentajes, no valores exactos.
3. No repitas los montos que el cliente mencione en sus mensajes.
4. Sé siempre respetuoso y profesional.

Debes usar un tono "${v}" basado en el perfil del cliente:
- Relación/Cercanía: ${e.relationship}/100
- Historial de Pago: ${e.history}/100
- Actitud: ${e.attitude}/100
- Sensibilidad a Presión: ${e.sensitivity}/100
- Probabilidad de Pago: ${e.probability}/100

Historial reciente de la conversación:
${m}

El último mensaje del cliente fue: "${t}"
El tipo de evento detectado es: "${i}"
<|user|>
Genera una respuesta empática y efectiva como agente de cobranza. La respuesta debe ser concisa (máximo 2 frases), adaptada al perfil del cliente, enfocada en lograr el pago de la deuda, y NUNCA debe mencionar montos específicos de dinero.
<|assistant|>`;console.log("Enviando solicitud para generar respuesta a Hugging Face API...");const T=await f.post("",{inputs:w,parameters:{max_new_tokens:100,temperature:.7,top_p:.95,do_sample:!0,return_full_text:!1}});console.log("Respuesta de Hugging Face para generación:",T.data);let C="";return Array.isArray(T.data)?C=((a=T.data[0])==null?void 0:a.generated_text)||"":C=T.data.generated_text||"",C=C.trim(),C||(C="Entiendo. ¿Podría por favor indicarnos cuándo podríamos esperar el pago de su deuda pendiente?"),console.log(`Respuesta generada por Zephyr usando tono "${v}": ${C}`),{responseText:C,explanation:`Respuesta generada por Zephyr usando tono "${v}"`,confidence:.8}}catch(l){return console.error("Error al generar respuesta con Zephyr:",l),console.log("Usando fallback local para respuesta debido al error"),WE(n,e,t,i)}},XE=(n,e,t)=>{const i=n.toLowerCase();let a="neutral";i.includes("pagar")||i.includes("transferir")||i.includes("depositar")?i.includes("completo")||i.includes("todo")?a="accepts_payment":i.includes("parte")||i.includes("parcial")||i.includes("algo")?a="offers_partial":(i.includes("próxima")||i.includes("después")||i.includes("luego"))&&(a="reschedule"):i.includes("gracias")||i.includes("agradezco")?a="thanks":i.includes("ya pagué")||i.includes("realicé el pago")||i.includes("transferí")?a="confirms_payment":i.includes("no puedo")||i.includes("imposible")?a="evades":i.includes("molesto")||i.includes("harto")||i.includes("fastidio")?a="annoyed":(i.includes("no voy a pagar")||i.includes("no pagaré")||i.includes("olvídate"))&&(a="refuses");const l={neutral:{relationship:0,history:0,attitude:0,sensitivity:0,probability:0},accepts_payment:{relationship:5,history:10,attitude:10,sensitivity:-5,probability:20},offers_partial:{relationship:5,history:5,attitude:10,sensitivity:-5,probability:15},reschedule:{relationship:2,history:-5,attitude:5,sensitivity:0,probability:-5},evades:{relationship:-5,history:-5,attitude:-10,sensitivity:5,probability:-10},annoyed:{relationship:-10,history:-5,attitude:-15,sensitivity:10,probability:-15},refuses:{relationship:-20,history:-20,attitude:-20,sensitivity:20,probability:-30},thanks:{relationship:5,history:0,attitude:10,sensitivity:-5,probability:10},no_answer:{relationship:-5,history:-10,attitude:-5,sensitivity:0,probability:-10},confirms_payment:{relationship:10,history:20,attitude:20,sensitivity:-10,probability:30}},c=l[a]||l.neutral;return console.log(`Evento detectado por fallback: "${a}" con deltas:`,c),{eventType:a,deltas:c,explanation:`Evento detectado por fallback: "${a}" basado en palabras clave.`,confidence:.6}},WE=(n,e,t,i)=>{let a="neutral";e.relationship>70?e.sensitivity>70?a="friendly_no_pressure":a="friendly":e.relationship<40&&(e.sensitivity<40?a="formal_direct":a="formal_soft");const l={accepts_payment:{friendly_no_pressure:"¡Excelente noticia! Gracias por tu disposición. Cuando puedas hacer el pago, solo avísame.",friendly:"¡Perfecto! Muchas gracias por tu colaboración. ¿Te envío los datos para el pago?",formal_direct:"Muy bien. Le agradecemos su decisión. Necesitamos que realice el pago antes del fin de semana.",formal_soft:"Gracias por su confirmación. ¿Prefiere que le enviemos los datos bancarios por este medio?",neutral:"Entendido. ¿Desea que le enviemos la información para realizar el pago?"},offers_partial:{friendly_no_pressure:"Agradezco mucho tu esfuerzo por pagar una parte. Cualquier aporte es bienvenido.",friendly:"Gracias por tu disposición. Un pago parcial nos ayuda mucho. ¿Cuándo podrías realizar este abono?",formal_direct:"Tomamos nota de su oferta de pago parcial. ¿Cuándo podríamos esperar el resto del monto pendiente?",formal_soft:"Entendemos su situación. El pago parcial es un buen primer paso. ¿Cuándo sería posible?",neutral:"De acuerdo con el pago parcial. ¿Qué porcentaje de la deuda podría transferir y cuándo?"},reschedule:{friendly_no_pressure:"No hay problema, entiendo que necesitas reprogramar. ¿Qué fecha te resultaría más conveniente?",friendly:"Claro que podemos ajustar la fecha. ¿Cuál sería el mejor momento para ti?",formal_direct:"Podemos considerar una nueva fecha. ¿Cuál es su propuesta concreta para el pago?",formal_soft:"Entendemos la necesidad de reprogramar. ¿Qué fecha le resultaría adecuada para realizar el pago?",neutral:"De acuerdo. ¿Cuál sería la nueva fecha propuesta para el pago?"},evades:{friendly_no_pressure:"Entiendo que quizás no es el mejor momento para hablar de esto. ¿Te parece si retomamos la conversación en otro momento?",friendly:"Noto que es un tema delicado. ¿Hay algo específico que podamos resolver para facilitar el pago?",formal_direct:"Necesitamos una respuesta concreta respecto al pago pendiente. ¿Podría indicarnos su plan de acción?",formal_soft:"Entendemos que pueda ser un tema complicado. ¿Podríamos concretar cuándo sería posible abordar el pago?",neutral:"¿Podría por favor indicarnos cuál es su situación respecto al pago pendiente?"},annoyed:{friendly_no_pressure:"Lamento si te he incomodado. No es mi intención molestar, solo buscamos encontrar una solución que funcione para ambos.",friendly:"Disculpa si te he molestado. ¿Qué podríamos hacer para resolver esta situación de la mejor manera?",formal_direct:"Entendemos su molestia. Sin embargo, necesitamos resolver el tema del pago pendiente. ¿Qué solución propone?",formal_soft:"Lamentamos si esta comunicación le resulta incómoda. ¿Habría un mejor momento o forma para abordar el tema?",neutral:"Entiendo. ¿Cómo preferiría que manejemos esta situación para llegar a una solución?"},refuses:{friendly_no_pressure:"Entiendo tu posición. Quizás podríamos explorar algunas alternativas que se ajusten mejor a tu situación actual.",friendly:"Comprendo que sea difícil en este momento. ¿Podríamos considerar opciones de pago más flexibles?",formal_direct:"Tomamos nota de su negativa. Sin embargo, la deuda permanece vigente. ¿Podríamos discutir alternativas de pago?",formal_soft:"Entendemos que pueda tener dificultades. ¿Le interesaría conocer otras opciones disponibles para resolver esta situación?",neutral:"¿Podríamos explorar alternativas que faciliten el pago de la deuda pendiente?"},thanks:{friendly_no_pressure:"¡No hay de qué! Estamos aquí para ayudarte. Si necesitas cualquier cosa, no dudes en hacérmelo saber.",friendly:"Es un placer poder ser de ayuda. ¿Hay algo más en lo que pueda asistirte?",formal_direct:"De nada. ¿Podríamos entonces confirmar cuándo realizará el pago?",formal_soft:"Nos alegra poder serle de utilidad. ¿Necesita alguna otra información para proceder?",neutral:"De nada. ¿Tiene alguna otra consulta respecto al pago?"},confirms_payment:{friendly_no_pressure:"¡Excelente noticia! Muchas gracias por tu pago. Verificaremos y te confirmaremos en cuanto se refleje en nuestro sistema.",friendly:"¡Genial! Gracias por confirmar tu pago. Lo verificaremos a la brevedad y te daremos el comprobante.",formal_direct:"Gracias por su confirmación. Procederemos a verificar el pago y le notificaremos cuando esté procesado.",formal_soft:"Agradecemos su pago. Realizaremos la verificación correspondiente y le informaremos una vez completado el proceso.",neutral:"Gracias por informarnos. Verificaremos el pago y actualizaremos el estado de su cuenta."},default:{friendly_no_pressure:"Entiendo perfectamente. No te preocupes, cuando puedas realizar el pago me avisas.",friendly:"Agradezco que estemos en contacto. ¿Hay algo en lo que pueda ayudarte para facilitar el proceso?",formal_direct:"Necesitamos regularizar su situación. ¿Podría por favor indicarnos una fecha concreta de pago?",formal_soft:"Entendemos que pueden surgir contratiempos. ¿Podría comentarnos cuándo le sería posible realizar el pago?",neutral:"¿Podría por favor indicarnos cuándo podríamos esperar el pago de la deuda pendiente?"}},c=l[i]||l.default,f=c[a]||c.neutral;return console.log(`Respuesta generada por fallback usando tono "${a}": ${f}`),{responseText:f,explanation:`Respuesta generada por fallback usando tono "${a}"`,confidence:.7}},mi={GEMINI:"gemini",ZEPHYR:"zephyr"};let qo=mi.ZEPHYR;const p3=n=>Object.values(mi).includes(n)?(qo=n,!0):!1,g3=()=>qo,y3=async(n,e,t)=>{switch(qo){case mi.GEMINI:return jM(n);case mi.ZEPHYR:return f3(n,e,t);default:throw new Error(`Servicio de IA no reconocido: ${qo}`)}},Jd=async(n,e,t,i)=>{switch(qo){case mi.GEMINI:return kM(n,e,t,i);case mi.ZEPHYR:return m3(n,e,t,i);default:throw new Error(`Servicio de IA no reconocido: ${qo}`)}},v3=()=>{const{clientId:n}=vg(),{currentUser:e}=tc(),t=mn(),[i,a]=V.useState(null),[l,c]=V.useState(null),[f,m]=V.useState(null),[g,v]=V.useState([]),[w,T]=V.useState(""),[C,A]=V.useState(!0),[U,I]=V.useState(!1),[q,X]=V.useState(""),[Y,de]=V.useState(""),[ue,ye]=V.useState("neutral"),[M,R]=V.useState(""),[N,j]=V.useState({relationship:0,history:0,attitude:0,sensitivity:0,probability:0}),L=V.useRef(null);V.useEffect(()=>{(async()=>{try{A(!0);const P=await tx(n);a(P),m(P.soul);const te=await bM(n,e.uid,P.soul);c(te);const ce=`Hola ${P.name}, le saluda ${e.displayName} de Acriventas. Me comunico con usted respecto a su deuda pendiente.`;R(ce),X(ce)}catch(P){console.error("Error al iniciar conversación:",P)}finally{A(!1)}})()},[n,e]),V.useEffect(()=>{var ge;(ge=L.current)==null||ge.scrollIntoView({behavior:"smooth"})},[g]);const B=async()=>{if(!(!w.trim()||U))try{I(!0);const ge={id:`agent-${Date.now()}`,sender:"agent",message:w,timestamp:new Date};v(P=>[...P,ge]),await kE(l,{sender:"agent",message:w,event:"neutral"}),T("")}catch(ge){console.error("Error al enviar mensaje:",ge)}finally{I(!1)}},O=async ge=>{const P=ge.target.value;if(de(P),P.trim().split(/\s+/).length>3)try{const te=await y3(P,g,f);ye(te.eventType),j(te.deltas)}catch(te){console.error("Error al analizar mensaje:",te)}},ct=async()=>{if(!(!Y.trim()||U))try{I(!0);const ge={id:`client-${Date.now()}`,sender:"client",message:Y,timestamp:new Date,event:ue};v(ce=>[...ce,ge]);const P=await kE(l,{sender:"client",message:Y,event:ue});m(P.currentSoul);const te=await Jd(g,P.currentSoul,Y,ue);X(te.responseText),de(""),ye("neutral"),j({relationship:0,history:0,attitude:0,sensitivity:0,probability:0})}catch(ge){console.error("Error al agregar mensaje del cliente:",ge)}finally{I(!1)}},se=ge=>{const P=ge.target.value;ye(P);const te={neutral:{relationship:0,history:0,attitude:0,sensitivity:0,probability:0},accepts_payment:{relationship:5,history:10,attitude:10,sensitivity:-5,probability:20},offers_partial:{relationship:5,history:5,attitude:10,sensitivity:-5,probability:15},reschedule:{relationship:2,history:-5,attitude:5,sensitivity:0,probability:-5},evades:{relationship:-5,history:-5,attitude:-10,sensitivity:5,probability:-10},annoyed:{relationship:-10,history:-5,attitude:-15,sensitivity:10,probability:-15},refuses:{relationship:-20,history:-20,attitude:-20,sensitivity:20,probability:-30},thanks:{relationship:5,history:0,attitude:10,sensitivity:-5,probability:10},no_answer:{relationship:-5,history:-10,attitude:-5,sensitivity:0,probability:-10},confirms_payment:{relationship:10,history:20,attitude:20,sensitivity:-10,probability:30}};j(te[P]||te.neutral)},$=()=>{q&&(T(q),X(""))},ae=async ge=>{m(ge);try{await SM(l,ge)}catch(P){console.error("Error al actualizar valores del alma:",P)}},me=()=>{t(`/conversation/${l}`)};return C?y.jsx("div",{className:"container mx-auto px-4 py-6",children:y.jsxs("div",{className:"animate-pulse space-y-4",children:[y.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4"}),y.jsx("div",{className:"h-64 bg-gray-200 rounded"}),y.jsx("div",{className:"h-10 bg-gray-200 rounded"})]})}):i?y.jsxs("div",{className:"container mx-auto px-4 py-6",children:[y.jsxs("div",{className:"mb-6 flex justify-between items-center",children:[y.jsxs("h1",{className:"text-2xl font-bold",children:["Conversación con ",i.name]}),y.jsx("div",{children:y.jsx("button",{className:"btn-primary",onClick:me,children:"Finalizar Conversación"})})]}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[y.jsx("div",{className:"md:col-span-2",children:y.jsxs("div",{className:"bg-white rounded-lg shadow p-4 mb-4",children:[y.jsxs("div",{className:"h-96 overflow-y-auto mb-4",children:[g.map(ge=>y.jsxs("div",{className:`mb-4 ${ge.sender==="agent"?"text-right":"text-left"}`,children:[y.jsxs("div",{className:`inline-block rounded-lg px-4 py-2 max-w-[80%] ${ge.sender==="agent"?"bg-primary-100 text-primary-800":"bg-gray-100 text-gray-800"}`,children:[y.jsx("p",{children:ge.message}),y.jsx("p",{className:"text-xs text-gray-500 mt-1",children:ge.timestamp.toLocaleTimeString()})]}),ge.event&&ge.event!=="neutral"&&y.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Evento: ",ge.event]})]},ge.id)),y.jsx("div",{ref:L})]}),y.jsxs("div",{className:"mb-4",children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mensaje del Agente"}),y.jsxs("div",{className:"flex",children:[y.jsx("input",{type:"text",className:"input flex-grow",placeholder:"Escriba su mensaje...",value:w,onChange:ge=>T(ge.target.value)}),y.jsx("button",{className:"btn-primary ml-2",onClick:B,disabled:U||!w.trim(),children:"Enviar"})]}),q&&y.jsxs("div",{className:"mt-2 p-2 bg-blue-50 rounded-md",children:[y.jsx("p",{className:"text-sm text-blue-600 mb-1",children:"Respuesta sugerida:"}),y.jsx("p",{className:"text-sm",children:q}),y.jsx("button",{className:"text-xs text-blue-600 mt-1 underline",onClick:$,children:"Usar esta respuesta"})]})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mensaje del Cliente"}),y.jsx("textarea",{className:"input w-full mb-2",rows:"3",placeholder:"Escriba lo que dijo el cliente...",value:Y,onChange:O}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-2",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de Evento"}),y.jsxs("select",{className:"input w-full",value:ue,onChange:se,children:[y.jsx("option",{value:"neutral",children:"Evento Neutro"}),y.jsx("option",{value:"accepts_payment",children:"Acepta pagar en fecha acordada"}),y.jsx("option",{value:"offers_partial",children:"Ofrece pago parcial"}),y.jsx("option",{value:"reschedule",children:"Propone nueva fecha"}),y.jsx("option",{value:"evades",children:"Evade o no da respuesta clara"}),y.jsx("option",{value:"annoyed",children:"Se muestra molesto"}),y.jsx("option",{value:"refuses",children:"Se niega a pagar"}),y.jsx("option",{value:"thanks",children:"Agradece recordatorio"}),y.jsx("option",{value:"no_answer",children:"No contesta la llamada"}),y.jsx("option",{value:"confirms_payment",children:"Confirma pago realizado"})]})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Modificaciones Sugeridas"}),y.jsxs("div",{className:"text-sm",children:[y.jsxs("p",{children:["Relación: ",N.relationship>0?"+":"",N.relationship]}),y.jsxs("p",{children:["Historial: ",N.history>0?"+":"",N.history]}),y.jsxs("p",{children:["Actitud: ",N.attitude>0?"+":"",N.attitude]}),y.jsxs("p",{children:["Sensibilidad: ",N.sensitivity>0?"+":"",N.sensitivity]}),y.jsxs("p",{children:["Probabilidad: ",N.probability>0?"+":"",N.probability]})]})]})]}),y.jsx("button",{className:"btn-secondary w-full",onClick:ct,disabled:U||!Y.trim(),children:"Agregar Mensaje del Cliente"})]})]})}),y.jsxs("div",{children:[y.jsxs("div",{className:"bg-white rounded-lg shadow p-4 mb-4",children:[y.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Información del Cliente"}),y.jsxs("div",{className:"space-y-2",children:[y.jsxs("p",{children:[y.jsx("span",{className:"font-medium",children:"Teléfono:"})," ",i.phone]}),y.jsxs("p",{children:[y.jsx("span",{className:"font-medium",children:"Email:"})," ",i.email||"No disponible"]}),y.jsxs("p",{children:[y.jsx("span",{className:"font-medium",children:"Estado de deuda:"})," Deuda pendiente"]}),y.jsx("p",{className:"text-sm text-gray-500 mt-2 italic",children:"Nota: Por razones de privacidad, no se muestran montos específicos en este módulo."})]})]}),y.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[y.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Variables del Alma"}),y.jsx(Bo,{initialValues:f,readOnly:!1,onChange:ae}),y.jsx("p",{className:"mt-3 text-xs text-gray-500",children:"Puede ajustar manualmente las variables según su percepción de la conversación."})]})]})]})]}):y.jsxs("div",{className:"container mx-auto px-4 py-6",children:[y.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:[y.jsx("strong",{className:"font-bold",children:"Error:"}),y.jsx("span",{className:"block sm:inline",children:" No se pudo encontrar el cliente."})]}),y.jsx("button",{className:"btn-secondary mt-4",onClick:()=>t(-1),children:"Volver"})]})},_3=()=>{const{conversationId:n}=vg(),e=mn(),[t,i]=V.useState(null),[a,l]=V.useState(!0),[c,f]=V.useState(!1),[m,g]=V.useState(!1),[v,w]=V.useState(null),[T,C]=V.useState(""),[A,U]=V.useState(!1),[I,q]=V.useState({sender:"agent",message:"",event:"neutral",deltas:{relationship:0,history:0,attitude:0,sensitivity:0,probability:0},updateClientSoul:!1}),[X,Y]=V.useState({result:"pending",notes:"",nextActionDate:""});V.useEffect(()=>{(async()=>{try{l(!0);const $=await fu(n);i($),$.summary&&Y($.summary)}catch($){console.error("Error al cargar conversación:",$)}finally{l(!1)}})()},[n]);const de=se=>{const{name:$,value:ae}=se.target;Y(me=>({...me,[$]:ae}))},ue=async()=>{try{f(!0),await wM(n,X);const se=await fu(n);i(se),f(!1)}catch(se){console.error("Error al cerrar conversación:",se),f(!1)}},ye=se=>{const{name:$,value:ae}=se.target;q(me=>({...me,[$]:ae}))},M=(se,$)=>{q(ae=>({...ae,deltas:{...ae.deltas,[se]:parseInt($,10)||0}}))},R=async()=>{if(I.message.trim())try{const se={sender:I.sender,message:I.message,event:I.event,deltas:I.deltas,updateClientSoul:I.updateClientSoul};await AM(n,se);const $=await fu(n);if(i($),q({sender:"agent",message:"",event:"neutral",deltas:{relationship:0,history:0,attitude:0,sensitivity:0,probability:0},updateClientSoul:!1}),se.sender==="client"&&t.status==="active")try{const ae=await Jd($.turns,$.currentSoul,se.message,se.event);C(ae.responseText),U(!0)}catch(ae){console.error("Error al generar sugerencia de respuesta:",ae)}}catch(se){console.error("Error al agregar mensaje:",se)}},N=async se=>{var $;if(t&&t.status==="active")try{const ae=v?v.message:(($=t.turns.find(ge=>ge.sender==="client"))==null?void 0:$.message)||"Mensaje del cliente",me=await Jd(t.turns,t.currentSoul,ae,se);C(me.responseText),U(!0)}catch(ae){console.error("Error al generar sugerencia:",ae)}},j=async(se,$)=>{try{await RM(n,se,$);const ae=await fu(n);if(i(ae),v.sender==="client"&&t.status==="active")try{const me=await Jd(ae.turns,ae.currentSoul,$.message,$.event);C(me.responseText),U(!0)}catch(me){console.error("Error al generar sugerencia de respuesta:",me)}w(null)}catch(ae){console.error("Error al editar mensaje:",ae)}},L=async se=>{if(window.confirm("¿Está seguro de que desea eliminar este mensaje?"))try{await CM(n,se);const $=await fu(n);i($)}catch($){console.error("Error al eliminar mensaje:",$)}},B=()=>{T&&(q(se=>({...se,message:T,sender:"agent"})),C(""),U(!1))},O=()=>{var se;if(t&&t.status!=="active"){alert("Esta conversación ya ha sido cerrada. No se pueden agregar más mensajes.");return}(se=document.getElementById("message-input"))==null||se.focus()},ct=se=>{if(!se)return"N/A";if(se.seconds){const $=new Date(se.seconds*1e3);return Ru($,"PPp",{locale:ma})}else{if(se instanceof Date)return Ru(se,"PPp",{locale:ma});{const $=new Date(se);return Ru($,"PPp",{locale:ma})}}};return a?y.jsx("div",{className:"container mx-auto px-4 py-6",children:y.jsxs("div",{className:"animate-pulse space-y-4",children:[y.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-6"}),y.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-4"}),y.jsx("div",{className:"h-64 bg-gray-200 rounded mb-4"}),y.jsx("div",{className:"h-24 bg-gray-200 rounded"})]})}):t?y.jsxs("div",{className:"container mx-auto px-4 py-6",children:[y.jsxs("div",{className:"flex justify-between items-center mb-6",children:[y.jsxs("div",{children:[y.jsxs("h1",{className:"text-2xl font-bold",children:["Conversación con ",t.clientName]}),y.jsxs("p",{className:"text-gray-500",children:["Iniciada el ",ct(t.startedAt),y.jsx("span",{className:`ml-2 px-2 py-1 rounded-full text-xs ${t.status==="active"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:t.status==="active"?"Activa":"Cerrada"})]})]}),y.jsxs("div",{className:"flex gap-2",children:[y.jsx("button",{className:`btn-secondary ${m?"bg-blue-100 border-blue-300":""}`,onClick:()=>g(!m),children:m?"Salir de Edición":"Editar Conversación"}),t.status==="active"&&y.jsx("button",{className:"btn-secondary",onClick:O,children:"Continuar Conversación"}),t.status==="active"&&y.jsx("button",{className:"btn-primary",onClick:()=>f(!0),children:"Finalizar Conversación"}),y.jsx("button",{className:"btn-secondary",onClick:()=>e(-1),children:"Volver"})]})]}),m&&y.jsxs("div",{className:"bg-amber-50 border border-amber-200 text-amber-800 p-4 rounded mb-6",children:[y.jsx("h3",{className:"font-semibold mb-2",children:"Nota sobre edición de conversaciones"}),y.jsx("p",{children:"En este modo de edición puede modificar mensajes y eventos. Si la conversación está activa, se generarán sugerencias de respuesta basadas en los cambios realizados. Estas sugerencias se generan automáticamente al cambiar un tipo de evento o editar un mensaje del cliente."})]}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[y.jsxs("div",{className:"md:col-span-2",children:[y.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[y.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Mensajes"}),t.turns&&t.turns.length>0?y.jsx("div",{className:"space-y-4",children:t.turns.map((se,$)=>y.jsx("div",{className:`flex ${se.sender==="agent"?"justify-end":"justify-start"}`,children:y.jsxs("div",{className:`rounded-lg px-4 py-2 max-w-[80%] relative ${se.sender==="agent"?"bg-primary-100 text-primary-800":"bg-gray-100 text-gray-800"}`,children:[m&&y.jsxs("div",{className:"absolute top-1 right-1 flex gap-1",children:[y.jsx("button",{className:"text-xs text-blue-600 hover:text-blue-800",onClick:()=>w(se),children:"✏️"}),y.jsx("button",{className:"text-xs text-red-600 hover:text-red-800",onClick:()=>L(se.id),children:"🗑️"})]}),v&&v.id===se.id?y.jsx(b3,{turn:se,onSave:ae=>j(se.id,ae),onCancel:()=>w(null),onEventChange:N}):y.jsxs(y.Fragment,{children:[y.jsx("p",{children:se.message}),y.jsxs("div",{className:"text-xs text-gray-500 mt-1 flex justify-between",children:[y.jsx("span",{children:ct(se.timestamp)}),se.isManual&&y.jsx("span",{className:"text-blue-500",children:"Manual"}),se.isEdited&&y.jsx("span",{className:"text-orange-500",children:"Editado"})]}),se.event&&se.event!=="neutral"&&y.jsxs("div",{className:"mt-2 text-xs",children:[y.jsx("span",{className:"font-medium",children:"Evento: "}),y.jsx("span",{children:se.event}),se.deltas&&y.jsxs("div",{className:"mt-1 grid grid-cols-5 gap-1",children:[y.jsxs("span",{className:`${se.deltas.relationship>0?"text-green-600":se.deltas.relationship<0?"text-red-600":"text-gray-500"}`,children:["R: ",se.deltas.relationship>0?"+":"",se.deltas.relationship]}),y.jsxs("span",{className:`${se.deltas.history>0?"text-green-600":se.deltas.history<0?"text-red-600":"text-gray-500"}`,children:["H: ",se.deltas.history>0?"+":"",se.deltas.history]}),y.jsxs("span",{className:`${se.deltas.attitude>0?"text-green-600":se.deltas.attitude<0?"text-red-600":"text-gray-500"}`,children:["A: ",se.deltas.attitude>0?"+":"",se.deltas.attitude]}),y.jsxs("span",{className:`${se.deltas.sensitivity>0?"text-green-600":se.deltas.sensitivity<0?"text-red-600":"text-gray-500"}`,children:["S: ",se.deltas.sensitivity>0?"+":"",se.deltas.sensitivity]}),y.jsxs("span",{className:`${se.deltas.probability>0?"text-green-600":se.deltas.probability<0?"text-red-600":"text-gray-500"}`,children:["P: ",se.deltas.probability>0?"+":"",se.deltas.probability]})]})]})]})]})},se.id||$))}):y.jsx("p",{className:"text-gray-500 text-center py-4",children:"No hay mensajes en esta conversación."}),T&&y.jsxs("div",{className:`mt-4 p-3 bg-blue-50 border border-blue-100 rounded-md transition-all duration-300 ${A?"opacity-100":"opacity-0"}`,children:[y.jsxs("div",{className:"flex justify-between items-start",children:[y.jsxs("div",{children:[y.jsx("p",{className:"text-sm font-medium text-blue-700 mb-1",children:"Sugerencia de respuesta:"}),y.jsx("p",{className:"text-sm text-blue-800",children:T})]}),y.jsx("button",{className:"text-xs bg-blue-600 text-white px-2 py-1 rounded hover:bg-blue-700",onClick:B,children:"Usar esta respuesta"})]}),y.jsx("p",{className:"text-xs text-blue-600 mt-2",children:"Esta sugerencia se generó automáticamente basada en el contexto y los cambios realizados."})]}),t.status==="active"&&y.jsxs("div",{className:"mt-6 p-4 border-t border-gray-200",children:[y.jsx("h3",{className:"text-md font-semibold mb-3",children:"Agregar Nuevo Mensaje"}),y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Emisor"}),y.jsxs("select",{name:"sender",className:"input w-full",value:I.sender,onChange:ye,children:[y.jsx("option",{value:"agent",children:"Agente"}),y.jsx("option",{value:"client",children:"Cliente"})]})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de Evento"}),y.jsxs("select",{name:"event",className:"input w-full",value:I.event,onChange:ye,children:[y.jsx("option",{value:"neutral",children:"Evento Neutro"}),y.jsx("option",{value:"accepts_payment",children:"Acepta pagar"}),y.jsx("option",{value:"offers_partial",children:"Ofrece pago parcial"}),y.jsx("option",{value:"reschedule",children:"Propone nueva fecha"}),y.jsx("option",{value:"evades",children:"Evade"}),y.jsx("option",{value:"annoyed",children:"Se muestra molesto"}),y.jsx("option",{value:"refuses",children:"Se niega a pagar"}),y.jsx("option",{value:"thanks",children:"Agradece"}),y.jsx("option",{value:"no_answer",children:"No contesta"}),y.jsx("option",{value:"confirms_payment",children:"Confirma pago"})]})]})]}),y.jsxs("div",{children:[y.jsx("label",{htmlFor:"message-input",className:"block text-sm font-medium text-gray-700 mb-1",children:"Mensaje"}),y.jsx("textarea",{id:"message-input",name:"message",rows:"3",className:"input w-full",value:I.message,onChange:ye,placeholder:"Escriba el mensaje..."})]}),I.event!=="neutral"&&y.jsxs(y.Fragment,{children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Deltas para Variables del Alma"}),y.jsxs("div",{className:"grid grid-cols-5 gap-2",children:[y.jsxs("div",{children:[y.jsx("label",{className:"text-xs text-gray-500",children:"Relación"}),y.jsx("input",{type:"number",min:"-100",max:"100",className:"input w-full text-sm",value:I.deltas.relationship,onChange:se=>M("relationship",se.target.value)})]}),y.jsxs("div",{children:[y.jsx("label",{className:"text-xs text-gray-500",children:"Historial"}),y.jsx("input",{type:"number",min:"-100",max:"100",className:"input w-full text-sm",value:I.deltas.history,onChange:se=>M("history",se.target.value)})]}),y.jsxs("div",{children:[y.jsx("label",{className:"text-xs text-gray-500",children:"Actitud"}),y.jsx("input",{type:"number",min:"-100",max:"100",className:"input w-full text-sm",value:I.deltas.attitude,onChange:se=>M("attitude",se.target.value)})]}),y.jsxs("div",{children:[y.jsx("label",{className:"text-xs text-gray-500",children:"Sensibilidad"}),y.jsx("input",{type:"number",min:"-100",max:"100",className:"input w-full text-sm",value:I.deltas.sensitivity,onChange:se=>M("sensitivity",se.target.value)})]}),y.jsxs("div",{children:[y.jsx("label",{className:"text-xs text-gray-500",children:"Probabilidad"}),y.jsx("input",{type:"number",min:"-100",max:"100",className:"input w-full text-sm",value:I.deltas.probability,onChange:se=>M("probability",se.target.value)})]})]})]}),y.jsxs("div",{className:"flex items-center",children:[y.jsx("input",{type:"checkbox",id:"updateClientSoul",checked:I.updateClientSoul,onChange:se=>q($=>({...$,updateClientSoul:se.target.checked})),className:"mr-2"}),y.jsx("label",{htmlFor:"updateClientSoul",className:"text-sm text-gray-700",children:"Actualizar alma del cliente en la base de datos"})]})]}),y.jsx("button",{className:"btn-primary",onClick:R,disabled:!I.message.trim(),children:"Agregar Mensaje"})]})]}),t.status!=="active"&&y.jsx("div",{className:"mt-6 p-4 border-t border-gray-200",children:y.jsx("div",{className:"bg-gray-50 p-4 rounded-md text-center",children:y.jsx("p",{className:"text-gray-600",children:"Esta conversación ha sido cerrada. No se pueden agregar más mensajes."})})})]}),t.status==="closed"&&t.summary&&y.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[y.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Resumen de la Conversación"}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[y.jsxs("div",{children:[y.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Resultado"}),y.jsxs("p",{className:"font-medium",children:[t.summary.result==="payment"&&"Pago realizado",t.summary.result==="partial_payment"&&"Pago parcial",t.summary.result==="promise"&&"Promesa de pago",t.summary.result==="no_payment"&&"Sin pago",t.summary.result==="pending"&&"Pendiente"]})]}),t.summary.nextActionDate&&y.jsxs("div",{children:[y.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Próxima acción"}),y.jsx("p",{children:ct(t.summary.nextActionDate)})]}),t.summary.notes&&y.jsxs("div",{className:"md:col-span-2",children:[y.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Notas"}),y.jsx("p",{className:"whitespace-pre-line",children:t.summary.notes})]})]})]}),c&&y.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:y.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-lg w-full mx-4",children:[y.jsx("h2",{className:"text-xl font-bold mb-4",children:"Cerrar Conversación"}),y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Resultado"}),y.jsxs("select",{name:"result",className:"input w-full",value:X.result,onChange:de,children:[y.jsx("option",{value:"payment",children:"Pago realizado"}),y.jsx("option",{value:"partial_payment",children:"Pago parcial"}),y.jsx("option",{value:"promise",children:"Promesa de pago"}),y.jsx("option",{value:"no_payment",children:"Sin pago"}),y.jsx("option",{value:"pending",children:"Pendiente"})]})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha de próxima acción"}),y.jsx("input",{type:"date",name:"nextActionDate",className:"input w-full",value:X.nextActionDate,onChange:de})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notas"}),y.jsx("textarea",{name:"notes",rows:"4",className:"input w-full",value:X.notes,onChange:de,placeholder:"Resumen de la conversación, acuerdos, observaciones..."})]})]}),y.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[y.jsx("button",{className:"btn-secondary",onClick:()=>f(!1),children:"Cancelar"}),y.jsx("button",{className:"btn-primary",onClick:ue,children:"Cerrar Conversación"})]})]})})]}),y.jsxs("div",{children:[y.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[y.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Información del Cliente"}),y.jsxs("p",{className:"mb-2",children:[y.jsx("span",{className:"font-medium",children:"Nombre:"})," ",t.clientName]}),t.client&&y.jsxs(y.Fragment,{children:[y.jsxs("p",{className:"mb-2",children:[y.jsx("span",{className:"font-medium",children:"Teléfono:"})," ",t.client.phone]}),y.jsxs("p",{className:"mb-2",children:[y.jsx("span",{className:"font-medium",children:"Email:"})," ",t.client.email||"No disponible"]}),y.jsxs("p",{className:"mb-2",children:[y.jsx("span",{className:"font-medium",children:"Estado:"})," Deuda pendiente"]}),y.jsx("p",{className:"text-sm text-gray-500 italic",children:"Nota: Por privacidad, no se muestran montos específicos."}),y.jsx("div",{className:"mt-4",children:y.jsx("button",{className:"text-primary-600 text-sm font-medium hover:text-primary-800",onClick:()=>e(`/clients/${t.clientId}`),children:"Ver perfil completo"})})]})]}),y.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[y.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Variables del Alma"}),t.initialSoul&&t.currentSoul&&y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{children:[y.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-2",children:"Inicial"}),y.jsx(Bo,{initialValues:t.initialSoul,readOnly:!0})]}),y.jsxs("div",{children:[y.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-2",children:"Actual"}),y.jsx(Bo,{initialValues:t.currentSoul,readOnly:!0})]}),y.jsxs("div",{className:"mt-4 p-3 bg-gray-50 rounded-md",children:[y.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Cambios"}),y.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[y.jsxs("div",{children:[y.jsx("span",{className:"font-medium",children:"Relación:"})," ",y.jsxs("span",{className:t.currentSoul.relationship>t.initialSoul.relationship?"text-green-600":t.currentSoul.relationship<t.initialSoul.relationship?"text-red-600":"text-gray-500",children:[t.currentSoul.relationship-t.initialSoul.relationship>0?"+":"",t.currentSoul.relationship-t.initialSoul.relationship]})]}),y.jsxs("div",{children:[y.jsx("span",{className:"font-medium",children:"Historial:"})," ",y.jsxs("span",{className:t.currentSoul.history>t.initialSoul.history?"text-green-600":t.currentSoul.history<t.initialSoul.history?"text-red-600":"text-gray-500",children:[t.currentSoul.history-t.initialSoul.history>0?"+":"",t.currentSoul.history-t.initialSoul.history]})]}),y.jsxs("div",{children:[y.jsx("span",{className:"font-medium",children:"Actitud:"})," ",y.jsxs("span",{className:t.currentSoul.attitude>t.initialSoul.attitude?"text-green-600":t.currentSoul.attitude<t.initialSoul.attitude?"text-red-600":"text-gray-500",children:[t.currentSoul.attitude-t.initialSoul.attitude>0?"+":"",t.currentSoul.attitude-t.initialSoul.attitude]})]}),y.jsxs("div",{children:[y.jsx("span",{className:"font-medium",children:"Sensibilidad:"})," ",y.jsxs("span",{className:t.currentSoul.sensitivity<t.initialSoul.sensitivity?"text-green-600":t.currentSoul.sensitivity>t.initialSoul.sensitivity?"text-red-600":"text-gray-500",children:[t.currentSoul.sensitivity-t.initialSoul.sensitivity>0?"+":"",t.currentSoul.sensitivity-t.initialSoul.sensitivity]})]}),y.jsxs("div",{className:"col-span-2",children:[y.jsx("span",{className:"font-medium",children:"Probabilidad de pago:"})," ",y.jsxs("span",{className:t.currentSoul.probability>t.initialSoul.probability?"text-green-600":t.currentSoul.probability<t.initialSoul.probability?"text-red-600":"text-gray-500",children:[t.currentSoul.probability-t.initialSoul.probability>0?"+":"",t.currentSoul.probability-t.initialSoul.probability]})]})]})]})]})]})]})]})]}):y.jsxs("div",{className:"container mx-auto px-4 py-6",children:[y.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:[y.jsx("strong",{className:"font-bold",children:"Error:"}),y.jsx("span",{className:"block sm:inline",children:" No se pudo encontrar la conversación."})]}),y.jsx("button",{className:"btn-secondary mt-4",onClick:()=>e(-1),children:"Volver"})]})},b3=({turn:n,onSave:e,onCancel:t,onEventChange:i})=>{const[a,l]=V.useState({message:n.message,event:n.event||"neutral",deltas:n.deltas||{relationship:0,history:0,attitude:0,sensitivity:0,probability:0}}),c=g=>{const{name:v,value:w}=g.target;v==="event"&&w!==a.event&&i&&i(w),l(T=>({...T,[v]:w}))},f=(g,v)=>{l(w=>({...w,deltas:{...w.deltas,[g]:parseInt(v,10)||0}}))},m=g=>{g.preventDefault(),e(a)};return y.jsxs("form",{onSubmit:m,className:"space-y-3",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Mensaje"}),y.jsx("textarea",{name:"message",rows:"2",className:"w-full text-sm border border-gray-300 rounded px-2 py-1",value:a.message,onChange:c})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Evento"}),y.jsxs("select",{name:"event",className:"w-full text-sm border border-gray-300 rounded px-2 py-1",value:a.event,onChange:c,children:[y.jsx("option",{value:"neutral",children:"Neutral"}),y.jsx("option",{value:"accepts_payment",children:"Acepta pagar"}),y.jsx("option",{value:"offers_partial",children:"Pago parcial"}),y.jsx("option",{value:"reschedule",children:"Nueva fecha"}),y.jsx("option",{value:"evades",children:"Evade"}),y.jsx("option",{value:"annoyed",children:"Molesto"}),y.jsx("option",{value:"refuses",children:"Se niega"}),y.jsx("option",{value:"thanks",children:"Agradece"}),y.jsx("option",{value:"no_answer",children:"No contesta"}),y.jsx("option",{value:"confirms_payment",children:"Confirma pago"})]})]}),a.event!=="neutral"&&y.jsxs("div",{children:[y.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Deltas"}),y.jsxs("div",{className:"grid grid-cols-5 gap-1",children:[y.jsx("input",{type:"number",min:"-100",max:"100",className:"w-full text-xs border border-gray-300 rounded px-1 py-1",value:a.deltas.relationship,onChange:g=>f("relationship",g.target.value),placeholder:"R"}),y.jsx("input",{type:"number",min:"-100",max:"100",className:"w-full text-xs border border-gray-300 rounded px-1 py-1",value:a.deltas.history,onChange:g=>f("history",g.target.value),placeholder:"H"}),y.jsx("input",{type:"number",min:"-100",max:"100",className:"w-full text-xs border border-gray-300 rounded px-1 py-1",value:a.deltas.attitude,onChange:g=>f("attitude",g.target.value),placeholder:"A"}),y.jsx("input",{type:"number",min:"-100",max:"100",className:"w-full text-xs border border-gray-300 rounded px-1 py-1",value:a.deltas.sensitivity,onChange:g=>f("sensitivity",g.target.value),placeholder:"S"}),y.jsx("input",{type:"number",min:"-100",max:"100",className:"w-full text-xs border border-gray-300 rounded px-1 py-1",value:a.deltas.probability,onChange:g=>f("probability",g.target.value),placeholder:"P"})]})]}),y.jsxs("div",{className:"flex gap-2",children:[y.jsx("button",{type:"submit",className:"text-xs bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600",children:"Guardar"}),y.jsx("button",{type:"button",onClick:t,className:"text-xs bg-gray-500 text-white px-2 py-1 rounded hover:bg-gray-600",children:"Cancelar"})]})]})},E3=()=>{const[n,e]=V.useState(""),[t,i]=V.useState(""),[a,l]=V.useState(!1),[c,f]=V.useState(""),m=mn();V.useEffect(()=>{e(g3());const v=localStorage.getItem("huggingface_api_key")||"";i(v)},[]);const g=async()=>{l(!0),f("");try{p3(n),localStorage.setItem("huggingface_api_key",t),f("Configuración guardada correctamente"),setTimeout(()=>m("/"),1500)}catch(v){console.error("Error al guardar configuración:",v),f("Error al guardar la configuración")}finally{l(!1)}};return y.jsxs("div",{className:"container mx-auto px-4 py-6",children:[y.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Configuración de IA"}),y.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[y.jsxs("div",{className:"form-group mb-4",children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Servicio de IA"}),y.jsxs("select",{className:"input w-full",value:n,onChange:v=>e(v.target.value),children:[y.jsx("option",{value:mi.GEMINI,children:"Gemini (Predeterminado)"}),y.jsx("option",{value:mi.ZEPHYR,children:"Zephyr 7B Alpha (Hugging Face)"})]}),y.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Selecciona el servicio de IA que se utilizará para procesar las conversaciones."})]}),n===mi.ZEPHYR&&y.jsxs("div",{className:"form-group mb-4",children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"API Key de Hugging Face"}),y.jsx("input",{type:"password",className:"input w-full",value:t,onChange:v=>i(v.target.value),placeholder:"Ingresa tu API Key de Hugging Face"}),y.jsxs("p",{className:"mt-1 text-sm text-gray-500",children:["Puedes obtener una API Key desde tu cuenta de ",y.jsx("a",{href:"https://huggingface.co/settings/tokens",target:"_blank",rel:"noopener noreferrer",className:"text-primary-600 hover:text-primary-800",children:"Hugging Face"}),"."]})]}),c&&y.jsx("div",{className:`p-3 rounded mb-4 ${c.includes("Error")?"bg-red-100 text-red-800":"bg-green-100 text-green-800"}`,children:c}),y.jsxs("div",{className:"flex justify-end gap-2",children:[y.jsx("button",{className:"btn-secondary",onClick:()=>m(-1),disabled:a,children:"Cancelar"}),y.jsx("button",{className:"btn-primary",onClick:g,disabled:a,children:a?"Guardando...":"Guardar configuración"})]})]})]})},w3=()=>{const[n,e]=V.useState([]),[t,i]=V.useState([]),[a,l]=V.useState([]),[c,f]=V.useState(!0);V.useEffect(()=>{(async()=>{try{f(!0);const[T,C,A]=await Promise.all([nx(null,100),rx(null,100),tf()]);e(T),i(C),l(A)}catch(T){console.error("Error al cargar datos para reportes:",T)}finally{f(!1)}})()},[]);const m=n.length+t.length,g={active:n.length,closed:t.length,payment:t.filter(w=>{var T;return((T=w.summary)==null?void 0:T.result)==="payment"}).length,partialPayment:t.filter(w=>{var T;return((T=w.summary)==null?void 0:T.result)==="partial_payment"}).length,promise:t.filter(w=>{var T;return((T=w.summary)==null?void 0:T.result)==="promise"}).length,noPayment:t.filter(w=>{var T;return((T=w.summary)==null?void 0:T.result)==="no_payment"}).length},v={total:a.length,withDebt:a.filter(w=>w.debt>0).length,totalDebt:a.reduce((w,T)=>w+(T.debt||0),0),highProbability:a.filter(w=>{var T;return((T=w.soul)==null?void 0:T.probability)>=70}).length,mediumProbability:a.filter(w=>{var T,C;return((T=w.soul)==null?void 0:T.probability)>=40&&((C=w.soul)==null?void 0:C.probability)<70}).length,lowProbability:a.filter(w=>{var T;return((T=w.soul)==null?void 0:T.probability)<40}).length};return c?y.jsxs("div",{className:"container mx-auto px-4 py-6",children:[y.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Reportes"}),y.jsxs("div",{className:"animate-pulse space-y-6",children:[y.jsx("div",{className:"h-40 bg-gray-200 rounded"}),y.jsx("div",{className:"h-40 bg-gray-200 rounded"}),y.jsx("div",{className:"h-60 bg-gray-200 rounded"})]})]}):y.jsxs("div",{className:"container mx-auto px-4 py-6",children:[y.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Reportes"}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[y.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[y.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Estadísticas de Conversaciones"}),y.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[y.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[y.jsx("h3",{className:"text-sm font-medium text-blue-800 mb-1",children:"Activas"}),y.jsx("p",{className:"text-2xl font-bold text-blue-600",children:g.active})]}),y.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[y.jsx("h3",{className:"text-sm font-medium text-green-800 mb-1",children:"Cerradas"}),y.jsx("p",{className:"text-2xl font-bold text-green-600",children:g.closed})]}),y.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[y.jsx("h3",{className:"text-sm font-medium text-green-800 mb-1",children:"Pagos completos"}),y.jsx("p",{className:"text-2xl font-bold text-green-600",children:g.payment}),y.jsxs("p",{className:"text-xs text-green-600",children:[m>0?Math.round(g.payment/m*100):0,"% del total"]})]}),y.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[y.jsx("h3",{className:"text-sm font-medium text-yellow-800 mb-1",children:"Pagos parciales"}),y.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:g.partialPayment}),y.jsxs("p",{className:"text-xs text-yellow-600",children:[m>0?Math.round(g.partialPayment/m*100):0,"% del total"]})]}),y.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[y.jsx("h3",{className:"text-sm font-medium text-yellow-800 mb-1",children:"Promesas de pago"}),y.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:g.promise}),y.jsxs("p",{className:"text-xs text-yellow-600",children:[m>0?Math.round(g.promise/m*100):0,"% del total"]})]}),y.jsxs("div",{className:"bg-red-50 p-4 rounded-lg",children:[y.jsx("h3",{className:"text-sm font-medium text-red-800 mb-1",children:"Sin pago"}),y.jsx("p",{className:"text-2xl font-bold text-red-600",children:g.noPayment}),y.jsxs("p",{className:"text-xs text-red-600",children:[m>0?Math.round(g.noPayment/m*100):0,"% del total"]})]})]})]}),y.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[y.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Estadísticas de Clientes"}),y.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[y.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[y.jsx("h3",{className:"text-sm font-medium text-blue-800 mb-1",children:"Total de clientes"}),y.jsx("p",{className:"text-2xl font-bold text-blue-600",children:v.total})]}),y.jsxs("div",{className:"bg-red-50 p-4 rounded-lg",children:[y.jsx("h3",{className:"text-sm font-medium text-red-800 mb-1",children:"Con deuda"}),y.jsx("p",{className:"text-2xl font-bold text-red-600",children:v.withDebt}),y.jsxs("p",{className:"text-xs text-red-600",children:[v.total>0?Math.round(v.withDebt/v.total*100):0,"% del total"]})]}),y.jsxs("div",{className:"bg-red-50 p-4 rounded-lg col-span-2",children:[y.jsx("h3",{className:"text-sm font-medium text-red-800 mb-1",children:"Deuda total"}),y.jsxs("p",{className:"text-2xl font-bold text-red-600",children:["$",v.totalDebt.toLocaleString("es-CO")]})]}),y.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[y.jsx("h3",{className:"text-sm font-medium text-green-800 mb-1",children:"Alta probabilidad de pago"}),y.jsx("p",{className:"text-2xl font-bold text-green-600",children:v.highProbability}),y.jsxs("p",{className:"text-xs text-green-600",children:[v.total>0?Math.round(v.highProbability/v.total*100):0,"% del total"]})]}),y.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[y.jsx("h3",{className:"text-sm font-medium text-yellow-800 mb-1",children:"Media probabilidad"}),y.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:v.mediumProbability}),y.jsxs("p",{className:"text-xs text-yellow-600",children:[v.total>0?Math.round(v.mediumProbability/v.total*100):0,"% del total"]})]})]})]})]}),y.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-8",children:[y.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Top 10 Clientes con Mayor Deuda"}),y.jsx("div",{className:"overflow-x-auto",children:y.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[y.jsx("thead",{className:"bg-gray-50",children:y.jsxs("tr",{children:[y.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nombre"}),y.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Deuda"}),y.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Probabilidad de Pago"}),y.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Última Conversación"})]})}),y.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a.sort((w,T)=>T.debt-w.debt).slice(0,10).map(w=>{var T,C,A;return y.jsxs("tr",{children:[y.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:y.jsx("div",{className:"font-medium text-gray-900",children:w.name})}),y.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:y.jsxs("div",{className:"text-sm font-medium text-red-600",children:["$",w.debt.toLocaleString("es-CO")]})}),y.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:y.jsxs("div",{className:`text-sm font-medium ${((T=w.soul)==null?void 0:T.probability)>=70?"text-green-600":((C=w.soul)==null?void 0:C.probability)>=40?"text-yellow-600":"text-red-600"}`,children:[((A=w.soul)==null?void 0:A.probability)||0,"%"]})}),y.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:y.jsx("div",{className:"text-sm text-gray-500",children:w.lastContact?new Date(w.lastContact.seconds*1e3).toLocaleDateString():"Sin contacto"})})]},w.id)})})]})})]})]})},T3=()=>{const{currentUser:n,userDetails:e}=tc(),t=mn(),i=async()=>{try{await e6(),t("/login")}catch(a){console.error("Error al cerrar sesión:",a)}};return y.jsx("nav",{className:"bg-white p-4 shadow",children:y.jsxs("div",{className:"container mx-auto flex justify-between items-center",children:[y.jsx("div",{className:"flex items-center",children:y.jsx("span",{className:"text-lg font-semibold text-gray-700",children:"Sistema de Cobranza Adaptativa"})}),y.jsx("div",{className:"flex items-center space-x-4",children:n&&y.jsxs(y.Fragment,{children:[y.jsx("span",{className:"text-sm text-gray-600",children:(e==null?void 0:e.displayName)||n.email}),y.jsx("button",{className:"text-sm text-gray-600 hover:text-gray-900",onClick:i,children:"Cerrar sesión"})]})})]})})},x3=()=>{const{isAdmin:n}=tc();return y.jsxs("div",{className:"bg-gray-800 text-white w-64 flex-shrink-0 hidden md:block",children:[y.jsx("div",{className:"p-4",children:y.jsx("h2",{className:"text-xl font-bold",children:"Acriventas"})}),y.jsxs("nav",{className:"mt-8",children:[y.jsxs(la,{to:"/",className:({isActive:e})=>`flex items-center py-2 px-4 ${e?"bg-gray-700":"hover:bg-gray-700"}`,end:!0,children:[y.jsx(p6,{className:"mr-3"}),"Dashboard"]}),y.jsxs(la,{to:"/clients",className:({isActive:e})=>`flex items-center py-2 px-4 ${e?"bg-gray-700":"hover:bg-gray-700"}`,children:[y.jsx(y6,{className:"mr-3"}),"Clientes"]}),y.jsxs(la,{to:"/conversations",className:({isActive:e})=>`flex items-center py-2 px-4 ${e?"bg-gray-700":"hover:bg-gray-700"}`,children:[y.jsx(m6,{className:"mr-3"}),"Conversaciones"]}),y.jsxs(la,{to:"/reports",className:({isActive:e})=>`flex items-center py-2 px-4 ${e?"bg-gray-700":"hover:bg-gray-700"}`,children:[y.jsx(h6,{className:"mr-3"}),"Reportes"]}),y.jsxs(la,{to:"/settings/ai",className:({isActive:e})=>`flex items-center py-2 px-4 ${e?"bg-gray-700":"hover:bg-gray-700"}`,children:[y.jsx(g6,{className:"mr-3"}),"Configuración IA"]}),n&&y.jsxs(la,{to:"/settings",className:({isActive:e})=>`flex items-center py-2 px-4 ${e?"bg-gray-700":"hover:bg-gray-700"}`,children:[y.jsx(f6,{className:"mr-3"}),"Configuración"]})]})]})},S3=()=>y.jsxs("div",{className:"flex h-screen bg-gray-100",children:[y.jsx(x3,{}),y.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[y.jsx(T3,{}),y.jsx("main",{className:"flex-1 overflow-y-auto p-4",children:y.jsx(nR,{})})]})]}),A3=({children:n})=>{const{currentUser:e,loading:t}=tc();return t?y.jsx("div",{className:"flex h-screen items-center justify-center",children:"Cargando..."}):e?n:y.jsx(o1,{to:"/login"})};function R3(){return y.jsx(CR,{children:y.jsx(n6,{children:y.jsxs(iR,{children:[y.jsx(hn,{path:"/login",element:y.jsx(r6,{})}),y.jsx(hn,{path:"/register",element:y.jsx(i6,{})}),y.jsxs(hn,{path:"/",element:y.jsx(A3,{children:y.jsx(S3,{})}),children:[y.jsx(hn,{index:!0,element:y.jsx(NM,{})}),y.jsx(hn,{path:"clients",element:y.jsx(MM,{})}),y.jsx(hn,{path:"clients/:clientId",element:y.jsx(IM,{})}),y.jsx(hn,{path:"clients/search",element:y.jsx(DM,{})}),y.jsx(hn,{path:"clients/new",element:y.jsx(OM,{})}),y.jsx(hn,{path:"conversation/new",element:y.jsx(PM,{})}),y.jsx(hn,{path:"conversation/new/:clientId",element:y.jsx(v3,{})}),y.jsx(hn,{path:"conversation/:conversationId",element:y.jsx(_3,{})}),y.jsx(hn,{path:"reports",element:y.jsx(w3,{})}),y.jsx(hn,{path:"settings/ai",element:y.jsx(E3,{})})]}),y.jsx(hn,{path:"*",element:y.jsx(o1,{to:"/",replace:!0})})]})})})}cA.createRoot(document.getElementById("root")).render(y.jsx(V.StrictMode,{children:y.jsx(R3,{})}));
