(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&a(u)}).observe(document,{childList:!0,subtree:!0});function t(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function a(s){if(s.ep)return;s.ep=!0;const l=t(s);fetch(s.href,l)}})();function fS(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var pp={exports:{}},fc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var U_;function mS(){if(U_)return fc;U_=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(a,s,l){var u=null;if(l!==void 0&&(u=""+l),s.key!==void 0&&(u=""+s.key),"key"in s){l={};for(var f in s)f!=="key"&&(l[f]=s[f])}else l=s;return s=l.ref,{$$typeof:n,type:a,key:u,ref:s!==void 0?s:null,props:l}}return fc.Fragment=e,fc.jsx=t,fc.jsxs=t,fc}var z_;function pS(){return z_||(z_=1,pp.exports=mS()),pp.exports}var m=pS(),gp={exports:{}},Pe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var B_;function gS(){if(B_)return Pe;B_=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),E=Symbol.iterator;function T(k){return k===null||typeof k!="object"?null:(k=E&&k[E]||k["@@iterator"],typeof k=="function"?k:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,M={};function I(k,ie,he){this.props=k,this.context=ie,this.refs=M,this.updater=he||C}I.prototype.isReactComponent={},I.prototype.setState=function(k,ie){if(typeof k!="object"&&typeof k!="function"&&k!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,k,ie,"setState")},I.prototype.forceUpdate=function(k){this.updater.enqueueForceUpdate(this,k,"forceUpdate")};function G(){}G.prototype=I.prototype;function Q(k,ie,he){this.props=k,this.context=ie,this.refs=M,this.updater=he||C}var q=Q.prototype=new G;q.constructor=Q,A(q,I.prototype),q.isPureReactComponent=!0;var oe=Array.isArray,ce={H:null,A:null,T:null,S:null,V:null},pe=Object.prototype.hasOwnProperty;function P(k,ie,he,le,_e,Oe){return he=Oe.ref,{$$typeof:n,type:k,key:ie,ref:he!==void 0?he:null,props:Oe}}function R(k,ie){return P(k.type,ie,void 0,void 0,void 0,k.props)}function N(k){return typeof k=="object"&&k!==null&&k.$$typeof===n}function j(k){var ie={"=":"=0",":":"=2"};return"$"+k.replace(/[=:]/g,function(he){return ie[he]})}var L=/\/+/g;function z(k,ie){return typeof k=="object"&&k!==null&&k.key!=null?j(""+k.key):ie.toString(36)}function O(){}function dt(k){switch(k.status){case"fulfilled":return k.value;case"rejected":throw k.reason;default:switch(typeof k.status=="string"?k.then(O,O):(k.status="pending",k.then(function(ie){k.status==="pending"&&(k.status="fulfilled",k.value=ie)},function(ie){k.status==="pending"&&(k.status="rejected",k.reason=ie)})),k.status){case"fulfilled":return k.value;case"rejected":throw k.reason}}throw k}function Me(k,ie,he,le,_e){var Oe=typeof k;(Oe==="undefined"||Oe==="boolean")&&(k=null);var ee=!1;if(k===null)ee=!0;else switch(Oe){case"bigint":case"string":case"number":ee=!0;break;case"object":switch(k.$$typeof){case n:case e:ee=!0;break;case v:return ee=k._init,Me(ee(k._payload),ie,he,le,_e)}}if(ee)return _e=_e(k),ee=le===""?"."+z(k,0):le,oe(_e)?(he="",ee!=null&&(he=ee.replace(L,"$&/")+"/"),Me(_e,ie,he,"",function(at){return at})):_e!=null&&(N(_e)&&(_e=R(_e,he+(_e.key==null||k&&k.key===_e.key?"":(""+_e.key).replace(L,"$&/")+"/")+ee)),ie.push(_e)),1;ee=0;var ve=le===""?".":le+":";if(oe(k))for(var se=0;se<k.length;se++)le=k[se],Oe=ve+z(le,se),ee+=Me(le,ie,he,Oe,_e);else if(se=T(k),typeof se=="function")for(k=se.call(k),se=0;!(le=k.next()).done;)le=le.value,Oe=ve+z(le,se++),ee+=Me(le,ie,he,Oe,_e);else if(Oe==="object"){if(typeof k.then=="function")return Me(dt(k),ie,he,le,_e);throw ie=String(k),Error("Objects are not valid as a React child (found: "+(ie==="[object Object]"?"object with keys {"+Object.keys(k).join(", ")+"}":ie)+"). If you meant to render a collection of children, use an array instead.")}return ee}function Z(k,ie,he){if(k==null)return k;var le=[],_e=0;return Me(k,le,"","",function(Oe){return ie.call(he,Oe,_e++)}),le}function ue(k){if(k._status===-1){var ie=k._result;ie=ie(),ie.then(function(he){(k._status===0||k._status===-1)&&(k._status=1,k._result=he)},function(he){(k._status===0||k._status===-1)&&(k._status=2,k._result=he)}),k._status===-1&&(k._status=0,k._result=ie)}if(k._status===1)return k._result.default;throw k._result}var ye=typeof reportError=="function"?reportError:function(k){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ie=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof k=="object"&&k!==null&&typeof k.message=="string"?String(k.message):String(k),error:k});if(!window.dispatchEvent(ie))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",k);return}console.error(k)};function Ge(){}return Pe.Children={map:Z,forEach:function(k,ie,he){Z(k,function(){ie.apply(this,arguments)},he)},count:function(k){var ie=0;return Z(k,function(){ie++}),ie},toArray:function(k){return Z(k,function(ie){return ie})||[]},only:function(k){if(!N(k))throw Error("React.Children.only expected to receive a single React element child.");return k}},Pe.Component=I,Pe.Fragment=t,Pe.Profiler=s,Pe.PureComponent=Q,Pe.StrictMode=a,Pe.Suspense=p,Pe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ce,Pe.__COMPILER_RUNTIME={__proto__:null,c:function(k){return ce.H.useMemoCache(k)}},Pe.cache=function(k){return function(){return k.apply(null,arguments)}},Pe.cloneElement=function(k,ie,he){if(k==null)throw Error("The argument must be a React element, but you passed "+k+".");var le=A({},k.props),_e=k.key,Oe=void 0;if(ie!=null)for(ee in ie.ref!==void 0&&(Oe=void 0),ie.key!==void 0&&(_e=""+ie.key),ie)!pe.call(ie,ee)||ee==="key"||ee==="__self"||ee==="__source"||ee==="ref"&&ie.ref===void 0||(le[ee]=ie[ee]);var ee=arguments.length-2;if(ee===1)le.children=he;else if(1<ee){for(var ve=Array(ee),se=0;se<ee;se++)ve[se]=arguments[se+2];le.children=ve}return P(k.type,_e,void 0,void 0,Oe,le)},Pe.createContext=function(k){return k={$$typeof:u,_currentValue:k,_currentValue2:k,_threadCount:0,Provider:null,Consumer:null},k.Provider=k,k.Consumer={$$typeof:l,_context:k},k},Pe.createElement=function(k,ie,he){var le,_e={},Oe=null;if(ie!=null)for(le in ie.key!==void 0&&(Oe=""+ie.key),ie)pe.call(ie,le)&&le!=="key"&&le!=="__self"&&le!=="__source"&&(_e[le]=ie[le]);var ee=arguments.length-2;if(ee===1)_e.children=he;else if(1<ee){for(var ve=Array(ee),se=0;se<ee;se++)ve[se]=arguments[se+2];_e.children=ve}if(k&&k.defaultProps)for(le in ee=k.defaultProps,ee)_e[le]===void 0&&(_e[le]=ee[le]);return P(k,Oe,void 0,void 0,null,_e)},Pe.createRef=function(){return{current:null}},Pe.forwardRef=function(k){return{$$typeof:f,render:k}},Pe.isValidElement=N,Pe.lazy=function(k){return{$$typeof:v,_payload:{_status:-1,_result:k},_init:ue}},Pe.memo=function(k,ie){return{$$typeof:y,type:k,compare:ie===void 0?null:ie}},Pe.startTransition=function(k){var ie=ce.T,he={};ce.T=he;try{var le=k(),_e=ce.S;_e!==null&&_e(he,le),typeof le=="object"&&le!==null&&typeof le.then=="function"&&le.then(Ge,ye)}catch(Oe){ye(Oe)}finally{ce.T=ie}},Pe.unstable_useCacheRefresh=function(){return ce.H.useCacheRefresh()},Pe.use=function(k){return ce.H.use(k)},Pe.useActionState=function(k,ie,he){return ce.H.useActionState(k,ie,he)},Pe.useCallback=function(k,ie){return ce.H.useCallback(k,ie)},Pe.useContext=function(k){return ce.H.useContext(k)},Pe.useDebugValue=function(){},Pe.useDeferredValue=function(k,ie){return ce.H.useDeferredValue(k,ie)},Pe.useEffect=function(k,ie,he){var le=ce.H;if(typeof he=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return le.useEffect(k,ie)},Pe.useId=function(){return ce.H.useId()},Pe.useImperativeHandle=function(k,ie,he){return ce.H.useImperativeHandle(k,ie,he)},Pe.useInsertionEffect=function(k,ie){return ce.H.useInsertionEffect(k,ie)},Pe.useLayoutEffect=function(k,ie){return ce.H.useLayoutEffect(k,ie)},Pe.useMemo=function(k,ie){return ce.H.useMemo(k,ie)},Pe.useOptimistic=function(k,ie){return ce.H.useOptimistic(k,ie)},Pe.useReducer=function(k,ie,he){return ce.H.useReducer(k,ie,he)},Pe.useRef=function(k){return ce.H.useRef(k)},Pe.useState=function(k){return ce.H.useState(k)},Pe.useSyncExternalStore=function(k,ie,he){return ce.H.useSyncExternalStore(k,ie,he)},Pe.useTransition=function(){return ce.H.useTransition()},Pe.version="19.1.0",Pe}var q_;function _g(){return q_||(q_=1,gp.exports=gS()),gp.exports}var V=_g();const vs=fS(V);var yp={exports:{}},mc={},vp={exports:{}},_p={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F_;function yS(){return F_||(F_=1,function(n){function e(Z,ue){var ye=Z.length;Z.push(ue);e:for(;0<ye;){var Ge=ye-1>>>1,k=Z[Ge];if(0<s(k,ue))Z[Ge]=ue,Z[ye]=k,ye=Ge;else break e}}function t(Z){return Z.length===0?null:Z[0]}function a(Z){if(Z.length===0)return null;var ue=Z[0],ye=Z.pop();if(ye!==ue){Z[0]=ye;e:for(var Ge=0,k=Z.length,ie=k>>>1;Ge<ie;){var he=2*(Ge+1)-1,le=Z[he],_e=he+1,Oe=Z[_e];if(0>s(le,ye))_e<k&&0>s(Oe,le)?(Z[Ge]=Oe,Z[_e]=ye,Ge=_e):(Z[Ge]=le,Z[he]=ye,Ge=he);else if(_e<k&&0>s(Oe,ye))Z[Ge]=Oe,Z[_e]=ye,Ge=_e;else break e}}return ue}function s(Z,ue){var ye=Z.sortIndex-ue.sortIndex;return ye!==0?ye:Z.id-ue.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var u=Date,f=u.now();n.unstable_now=function(){return u.now()-f}}var p=[],y=[],v=1,E=null,T=3,C=!1,A=!1,M=!1,I=!1,G=typeof setTimeout=="function"?setTimeout:null,Q=typeof clearTimeout=="function"?clearTimeout:null,q=typeof setImmediate<"u"?setImmediate:null;function oe(Z){for(var ue=t(y);ue!==null;){if(ue.callback===null)a(y);else if(ue.startTime<=Z)a(y),ue.sortIndex=ue.expirationTime,e(p,ue);else break;ue=t(y)}}function ce(Z){if(M=!1,oe(Z),!A)if(t(p)!==null)A=!0,pe||(pe=!0,z());else{var ue=t(y);ue!==null&&Me(ce,ue.startTime-Z)}}var pe=!1,P=-1,R=5,N=-1;function j(){return I?!0:!(n.unstable_now()-N<R)}function L(){if(I=!1,pe){var Z=n.unstable_now();N=Z;var ue=!0;try{e:{A=!1,M&&(M=!1,Q(P),P=-1),C=!0;var ye=T;try{t:{for(oe(Z),E=t(p);E!==null&&!(E.expirationTime>Z&&j());){var Ge=E.callback;if(typeof Ge=="function"){E.callback=null,T=E.priorityLevel;var k=Ge(E.expirationTime<=Z);if(Z=n.unstable_now(),typeof k=="function"){E.callback=k,oe(Z),ue=!0;break t}E===t(p)&&a(p),oe(Z)}else a(p);E=t(p)}if(E!==null)ue=!0;else{var ie=t(y);ie!==null&&Me(ce,ie.startTime-Z),ue=!1}}break e}finally{E=null,T=ye,C=!1}ue=void 0}}finally{ue?z():pe=!1}}}var z;if(typeof q=="function")z=function(){q(L)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,dt=O.port2;O.port1.onmessage=L,z=function(){dt.postMessage(null)}}else z=function(){G(L,0)};function Me(Z,ue){P=G(function(){Z(n.unstable_now())},ue)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Z){Z.callback=null},n.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<Z?Math.floor(1e3/Z):5},n.unstable_getCurrentPriorityLevel=function(){return T},n.unstable_next=function(Z){switch(T){case 1:case 2:case 3:var ue=3;break;default:ue=T}var ye=T;T=ue;try{return Z()}finally{T=ye}},n.unstable_requestPaint=function(){I=!0},n.unstable_runWithPriority=function(Z,ue){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var ye=T;T=Z;try{return ue()}finally{T=ye}},n.unstable_scheduleCallback=function(Z,ue,ye){var Ge=n.unstable_now();switch(typeof ye=="object"&&ye!==null?(ye=ye.delay,ye=typeof ye=="number"&&0<ye?Ge+ye:Ge):ye=Ge,Z){case 1:var k=-1;break;case 2:k=250;break;case 5:k=1073741823;break;case 4:k=1e4;break;default:k=5e3}return k=ye+k,Z={id:v++,callback:ue,priorityLevel:Z,startTime:ye,expirationTime:k,sortIndex:-1},ye>Ge?(Z.sortIndex=ye,e(y,Z),t(p)===null&&Z===t(y)&&(M?(Q(P),P=-1):M=!0,Me(ce,ye-Ge))):(Z.sortIndex=k,e(p,Z),A||C||(A=!0,pe||(pe=!0,z()))),Z},n.unstable_shouldYield=j,n.unstable_wrapCallback=function(Z){var ue=T;return function(){var ye=T;T=ue;try{return Z.apply(this,arguments)}finally{T=ye}}}}(_p)),_p}var H_;function vS(){return H_||(H_=1,vp.exports=yS()),vp.exports}var bp={exports:{}},dn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var G_;function _S(){if(G_)return dn;G_=1;var n=_g();function e(p){var y="https://react.dev/errors/"+p;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)y+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+p+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var a={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},s=Symbol.for("react.portal");function l(p,y,v){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:E==null?null:""+E,children:p,containerInfo:y,implementation:v}}var u=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(p,y){if(p==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return dn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,dn.createPortal=function(p,y){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return l(p,y,null,v)},dn.flushSync=function(p){var y=u.T,v=a.p;try{if(u.T=null,a.p=2,p)return p()}finally{u.T=y,a.p=v,a.d.f()}},dn.preconnect=function(p,y){typeof p=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,a.d.C(p,y))},dn.prefetchDNS=function(p){typeof p=="string"&&a.d.D(p)},dn.preinit=function(p,y){if(typeof p=="string"&&y&&typeof y.as=="string"){var v=y.as,E=f(v,y.crossOrigin),T=typeof y.integrity=="string"?y.integrity:void 0,C=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;v==="style"?a.d.S(p,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:E,integrity:T,fetchPriority:C}):v==="script"&&a.d.X(p,{crossOrigin:E,integrity:T,fetchPriority:C,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},dn.preinitModule=function(p,y){if(typeof p=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var v=f(y.as,y.crossOrigin);a.d.M(p,{crossOrigin:v,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&a.d.M(p)},dn.preload=function(p,y){if(typeof p=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var v=y.as,E=f(v,y.crossOrigin);a.d.L(p,v,{crossOrigin:E,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},dn.preloadModule=function(p,y){if(typeof p=="string")if(y){var v=f(y.as,y.crossOrigin);a.d.m(p,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:v,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else a.d.m(p)},dn.requestFormReset=function(p){a.d.r(p)},dn.unstable_batchedUpdates=function(p,y){return p(y)},dn.useFormState=function(p,y,v){return u.H.useFormState(p,y,v)},dn.useFormStatus=function(){return u.H.useHostTransitionStatus()},dn.version="19.1.0",dn}var $_;function bS(){if($_)return bp.exports;$_=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),bp.exports=_S(),bp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Y_;function ES(){if(Y_)return mc;Y_=1;var n=vS(),e=_g(),t=bS();function a(r){var i="https://react.dev/errors/"+r;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)i+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+r+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function l(r){var i=r,o=r;if(r.alternate)for(;i.return;)i=i.return;else{r=i;do i=r,(i.flags&4098)!==0&&(o=i.return),r=i.return;while(r)}return i.tag===3?o:null}function u(r){if(r.tag===13){var i=r.memoizedState;if(i===null&&(r=r.alternate,r!==null&&(i=r.memoizedState)),i!==null)return i.dehydrated}return null}function f(r){if(l(r)!==r)throw Error(a(188))}function p(r){var i=r.alternate;if(!i){if(i=l(r),i===null)throw Error(a(188));return i!==r?null:r}for(var o=r,c=i;;){var h=o.return;if(h===null)break;var g=h.alternate;if(g===null){if(c=h.return,c!==null){o=c;continue}break}if(h.child===g.child){for(g=h.child;g;){if(g===o)return f(h),r;if(g===c)return f(h),i;g=g.sibling}throw Error(a(188))}if(o.return!==c.return)o=h,c=g;else{for(var x=!1,w=h.child;w;){if(w===o){x=!0,o=h,c=g;break}if(w===c){x=!0,c=h,o=g;break}w=w.sibling}if(!x){for(w=g.child;w;){if(w===o){x=!0,o=g,c=h;break}if(w===c){x=!0,c=g,o=h;break}w=w.sibling}if(!x)throw Error(a(189))}}if(o.alternate!==c)throw Error(a(190))}if(o.tag!==3)throw Error(a(188));return o.stateNode.current===o?r:i}function y(r){var i=r.tag;if(i===5||i===26||i===27||i===6)return r;for(r=r.child;r!==null;){if(i=y(r),i!==null)return i;r=r.sibling}return null}var v=Object.assign,E=Symbol.for("react.element"),T=Symbol.for("react.transitional.element"),C=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),G=Symbol.for("react.provider"),Q=Symbol.for("react.consumer"),q=Symbol.for("react.context"),oe=Symbol.for("react.forward_ref"),ce=Symbol.for("react.suspense"),pe=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),j=Symbol.for("react.memo_cache_sentinel"),L=Symbol.iterator;function z(r){return r===null||typeof r!="object"?null:(r=L&&r[L]||r["@@iterator"],typeof r=="function"?r:null)}var O=Symbol.for("react.client.reference");function dt(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===O?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case A:return"Fragment";case I:return"Profiler";case M:return"StrictMode";case ce:return"Suspense";case pe:return"SuspenseList";case N:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case C:return"Portal";case q:return(r.displayName||"Context")+".Provider";case Q:return(r._context.displayName||"Context")+".Consumer";case oe:var i=r.render;return r=r.displayName,r||(r=i.displayName||i.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case P:return i=r.displayName||null,i!==null?i:dt(r.type)||"Memo";case R:i=r._payload,r=r._init;try{return dt(r(i))}catch{}}return null}var Me=Array.isArray,Z=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ue=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ye={pending:!1,data:null,method:null,action:null},Ge=[],k=-1;function ie(r){return{current:r}}function he(r){0>k||(r.current=Ge[k],Ge[k]=null,k--)}function le(r,i){k++,Ge[k]=r.current,r.current=i}var _e=ie(null),Oe=ie(null),ee=ie(null),ve=ie(null);function se(r,i){switch(le(ee,i),le(Oe,r),le(_e,null),i.nodeType){case 9:case 11:r=(r=i.documentElement)&&(r=r.namespaceURI)?f_(r):0;break;default:if(r=i.tagName,i=i.namespaceURI)i=f_(i),r=m_(i,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}he(_e),le(_e,r)}function at(){he(_e),he(Oe),he(ee)}function xe(r){r.memoizedState!==null&&le(ve,r);var i=_e.current,o=m_(i,r.type);i!==o&&(le(Oe,r),le(_e,o))}function Le(r){Oe.current===r&&(he(_e),he(Oe)),ve.current===r&&(he(ve),lc._currentValue=ye)}var Ce=Object.prototype.hasOwnProperty,qn=n.unstable_scheduleCallback,Er=n.unstable_cancelCallback,ja=n.unstable_shouldYield,lu=n.unstable_requestPaint,Fn=n.unstable_now,pf=n.unstable_getCurrentPriorityLevel,sl=n.unstable_ImmediatePriority,Os=n.unstable_UserBlockingPriority,ji=n.unstable_NormalPriority,gf=n.unstable_LowPriority,js=n.unstable_IdlePriority,ol=n.log,cu=n.unstable_setDisableYieldValue,xt=null,et=null;function On(r){if(typeof ol=="function"&&cu(r),et&&typeof et.setStrictMode=="function")try{et.setStrictMode(xt,r)}catch{}}var cn=Math.clz32?Math.clz32:Pi,uu=Math.log,yf=Math.LN2;function Pi(r){return r>>>=0,r===0?32:31-(uu(r)/yf|0)|0}var Mi=256,ki=4194304;function or(r){var i=r&42;if(i!==0)return i;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function Ps(r,i,o){var c=r.pendingLanes;if(c===0)return 0;var h=0,g=r.suspendedLanes,x=r.pingedLanes;r=r.warmLanes;var w=c&134217727;return w!==0?(c=w&~g,c!==0?h=or(c):(x&=w,x!==0?h=or(x):o||(o=w&~r,o!==0&&(h=or(o))))):(w=c&~g,w!==0?h=or(w):x!==0?h=or(x):o||(o=c&~r,o!==0&&(h=or(o)))),h===0?0:i!==0&&i!==h&&(i&g)===0&&(g=h&-h,o=i&-i,g>=o||g===32&&(o&4194048)!==0)?i:h}function Vi(r,i){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&i)===0}function ll(r,i){switch(r){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function cl(){var r=Mi;return Mi<<=1,(Mi&4194048)===0&&(Mi=256),r}function ul(){var r=ki;return ki<<=1,(ki&62914560)===0&&(ki=4194304),r}function Yr(r){for(var i=[],o=0;31>o;o++)i.push(r);return i}function Kr(r,i){r.pendingLanes|=i,i!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function dl(r,i,o,c,h,g){var x=r.pendingLanes;r.pendingLanes=o,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=o,r.entangledLanes&=o,r.errorRecoveryDisabledLanes&=o,r.shellSuspendCounter=0;var w=r.entanglements,D=r.expirationTimes,$=r.hiddenUpdates;for(o=x&~o;0<o;){var J=31-cn(o),re=1<<J;w[J]=0,D[J]=-1;var Y=$[J];if(Y!==null)for($[J]=null,J=0;J<Y.length;J++){var K=Y[J];K!==null&&(K.lane&=-536870913)}o&=~re}c!==0&&xr(r,c,0),g!==0&&h===0&&r.tag!==0&&(r.suspendedLanes|=g&~(x&~i))}function xr(r,i,o){r.pendingLanes|=i,r.suspendedLanes&=~i;var c=31-cn(i);r.entangledLanes|=i,r.entanglements[c]=r.entanglements[c]|1073741824|o&4194090}function hl(r,i){var o=r.entangledLanes|=i;for(r=r.entanglements;o;){var c=31-cn(o),h=1<<c;h&i|r[c]&i&&(r[c]|=i),o&=~h}}function Pa(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function Ms(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function Ma(){var r=ue.p;return r!==0?r:(r=window.event,r===void 0?32:j_(r.type))}function du(r,i){var o=ue.p;try{return ue.p=r,i()}finally{ue.p=o}}var pt=Math.random().toString(36).slice(2),Mt="__reactFiber$"+pt,Rt="__reactProps$"+pt,Hn="__reactContainer$"+pt,fl="__reactEvents$"+pt,vf="__reactListeners$"+pt,ka="__reactHandles$"+pt,hu="__reactResources$"+pt,Li="__reactMarker$"+pt;function Va(r){delete r[Mt],delete r[Rt],delete r[fl],delete r[vf],delete r[ka]}function Qr(r){var i=r[Mt];if(i)return i;for(var o=r.parentNode;o;){if(i=o[Hn]||o[Mt]){if(o=i.alternate,i.child!==null||o!==null&&o.child!==null)for(r=v_(r);r!==null;){if(o=r[Mt])return o;r=v_(r)}return i}r=o,o=r.parentNode}return null}function Tr(r){if(r=r[Mt]||r[Hn]){var i=r.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return r}return null}function wr(r){var i=r.tag;if(i===5||i===26||i===27||i===6)return r.stateNode;throw Error(a(33))}function yn(r){var i=r[hu];return i||(i=r[hu]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function At(r){r[Li]=!0}var ml=new Set,ks={};function lr(r,i){Wr(r,i),Wr(r+"Capture",i)}function Wr(r,i){for(ks[r]=i,r=0;r<i.length;r++)ml.add(i[r])}var fu=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),mu={},Ui={};function pu(r){return Ce.call(Ui,r)?!0:Ce.call(mu,r)?!1:fu.test(r)?Ui[r]=!0:(mu[r]=!0,!1)}function La(r,i,o){if(pu(i))if(o===null)r.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":r.removeAttribute(i);return;case"boolean":var c=i.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){r.removeAttribute(i);return}}r.setAttribute(i,""+o)}}function Ar(r,i,o){if(o===null)r.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(i);return}r.setAttribute(i,""+o)}}function Zt(r,i,o,c){if(c===null)r.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(o);return}r.setAttributeNS(i,o,""+c)}}var zi,gu;function Xr(r){if(zi===void 0)try{throw Error()}catch(o){var i=o.stack.trim().match(/\n( *(at )?)/);zi=i&&i[1]||"",gu=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+zi+r+gu}var Vs=!1;function Ls(r,i){if(!r||Vs)return"";Vs=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(i){var re=function(){throw Error()};if(Object.defineProperty(re.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(re,[])}catch(K){var Y=K}Reflect.construct(r,[],re)}else{try{re.call()}catch(K){Y=K}r.call(re.prototype)}}else{try{throw Error()}catch(K){Y=K}(re=r())&&typeof re.catch=="function"&&re.catch(function(){})}}catch(K){if(K&&Y&&typeof K.stack=="string")return[K.stack,Y.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=c.DetermineComponentFrameRoot(),x=g[0],w=g[1];if(x&&w){var D=x.split(`
`),$=w.split(`
`);for(h=c=0;c<D.length&&!D[c].includes("DetermineComponentFrameRoot");)c++;for(;h<$.length&&!$[h].includes("DetermineComponentFrameRoot");)h++;if(c===D.length||h===$.length)for(c=D.length-1,h=$.length-1;1<=c&&0<=h&&D[c]!==$[h];)h--;for(;1<=c&&0<=h;c--,h--)if(D[c]!==$[h]){if(c!==1||h!==1)do if(c--,h--,0>h||D[c]!==$[h]){var J=`
`+D[c].replace(" at new "," at ");return r.displayName&&J.includes("<anonymous>")&&(J=J.replace("<anonymous>",r.displayName)),J}while(1<=c&&0<=h);break}}}finally{Vs=!1,Error.prepareStackTrace=o}return(o=r?r.displayName||r.name:"")?Xr(o):""}function pl(r){switch(r.tag){case 26:case 27:case 5:return Xr(r.type);case 16:return Xr("Lazy");case 13:return Xr("Suspense");case 19:return Xr("SuspenseList");case 0:case 15:return Ls(r.type,!1);case 11:return Ls(r.type.render,!1);case 1:return Ls(r.type,!0);case 31:return Xr("Activity");default:return""}}function Us(r){try{var i="";do i+=pl(r),r=r.return;while(r);return i}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function vn(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function gl(r){var i=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function _f(r){var i=gl(r)?"checked":"value",o=Object.getOwnPropertyDescriptor(r.constructor.prototype,i),c=""+r[i];if(!r.hasOwnProperty(i)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var h=o.get,g=o.set;return Object.defineProperty(r,i,{configurable:!0,get:function(){return h.call(this)},set:function(x){c=""+x,g.call(this,x)}}),Object.defineProperty(r,i,{enumerable:o.enumerable}),{getValue:function(){return c},setValue:function(x){c=""+x},stopTracking:function(){r._valueTracker=null,delete r[i]}}}}function zs(r){r._valueTracker||(r._valueTracker=_f(r))}function yl(r){if(!r)return!1;var i=r._valueTracker;if(!i)return!0;var o=i.getValue(),c="";return r&&(c=gl(r)?r.checked?"true":"false":r.value),r=c,r!==o?(i.setValue(r),!0):!1}function Bi(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var bf=/[\n"\\]/g;function It(r){return r.replace(bf,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function jn(r,i,o,c,h,g,x,w){r.name="",x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?r.type=x:r.removeAttribute("type"),i!=null?x==="number"?(i===0&&r.value===""||r.value!=i)&&(r.value=""+vn(i)):r.value!==""+vn(i)&&(r.value=""+vn(i)):x!=="submit"&&x!=="reset"||r.removeAttribute("value"),i!=null?Ua(r,x,vn(i)):o!=null?Ua(r,x,vn(o)):c!=null&&r.removeAttribute("value"),h==null&&g!=null&&(r.defaultChecked=!!g),h!=null&&(r.checked=h&&typeof h!="function"&&typeof h!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?r.name=""+vn(w):r.removeAttribute("name")}function qi(r,i,o,c,h,g,x,w){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(r.type=g),i!=null||o!=null){if(!(g!=="submit"&&g!=="reset"||i!=null))return;o=o!=null?""+vn(o):"",i=i!=null?""+vn(i):o,w||i===r.value||(r.value=i),r.defaultValue=i}c=c??h,c=typeof c!="function"&&typeof c!="symbol"&&!!c,r.checked=w?r.checked:!!c,r.defaultChecked=!!c,x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(r.name=x)}function Ua(r,i,o){i==="number"&&Bi(r.ownerDocument)===r||r.defaultValue===""+o||(r.defaultValue=""+o)}function Zr(r,i,o,c){if(r=r.options,i){i={};for(var h=0;h<o.length;h++)i["$"+o[h]]=!0;for(o=0;o<r.length;o++)h=i.hasOwnProperty("$"+r[o].value),r[o].selected!==h&&(r[o].selected=h),h&&c&&(r[o].defaultSelected=!0)}else{for(o=""+vn(o),i=null,h=0;h<r.length;h++){if(r[h].value===o){r[h].selected=!0,c&&(r[h].defaultSelected=!0);return}i!==null||r[h].disabled||(i=r[h])}i!==null&&(i.selected=!0)}}function it(r,i,o){if(i!=null&&(i=""+vn(i),i!==r.value&&(r.value=i),o==null)){r.defaultValue!==i&&(r.defaultValue=i);return}r.defaultValue=o!=null?""+vn(o):""}function Fi(r,i,o,c){if(i==null){if(c!=null){if(o!=null)throw Error(a(92));if(Me(c)){if(1<c.length)throw Error(a(93));c=c[0]}o=c}o==null&&(o=""),i=o}o=vn(i),r.defaultValue=o,c=r.textContent,c===o&&c!==""&&c!==null&&(r.value=c)}function Gn(r,i){if(i){var o=r.firstChild;if(o&&o===r.lastChild&&o.nodeType===3){o.nodeValue=i;return}}r.textContent=i}var Hi=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function yu(r,i,o){var c=i.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?c?r.setProperty(i,""):i==="float"?r.cssFloat="":r[i]="":c?r.setProperty(i,o):typeof o!="number"||o===0||Hi.has(i)?i==="float"?r.cssFloat=o:r[i]=(""+o).trim():r[i]=o+"px"}function vl(r,i,o){if(i!=null&&typeof i!="object")throw Error(a(62));if(r=r.style,o!=null){for(var c in o)!o.hasOwnProperty(c)||i!=null&&i.hasOwnProperty(c)||(c.indexOf("--")===0?r.setProperty(c,""):c==="float"?r.cssFloat="":r[c]="");for(var h in i)c=i[h],i.hasOwnProperty(h)&&o[h]!==c&&yu(r,h,c)}else for(var g in i)i.hasOwnProperty(g)&&yu(r,g,i[g])}function _l(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ef=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),xf=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Bs(r){return xf.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}var Jr=null;function $n(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var ea=null,ta=null;function bl(r){var i=Tr(r);if(i&&(r=i.stateNode)){var o=r[Rt]||null;e:switch(r=i.stateNode,i.type){case"input":if(jn(r,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),i=o.name,o.type==="radio"&&i!=null){for(o=r;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+It(""+i)+'"][type="radio"]'),i=0;i<o.length;i++){var c=o[i];if(c!==r&&c.form===r.form){var h=c[Rt]||null;if(!h)throw Error(a(90));jn(c,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(i=0;i<o.length;i++)c=o[i],c.form===r.form&&yl(c)}break e;case"textarea":it(r,o.value,o.defaultValue);break e;case"select":i=o.value,i!=null&&Zr(r,!!o.multiple,i,!1)}}}var Sr=!1;function vu(r,i,o){if(Sr)return r(i,o);Sr=!0;try{var c=r(i);return c}finally{if(Sr=!1,(ea!==null||ta!==null)&&(dd(),ea&&(i=ea,r=ta,ta=ea=null,bl(i),r)))for(i=0;i<r.length;i++)bl(r[i])}}function Gi(r,i){var o=r.stateNode;if(o===null)return null;var c=o[Rt]||null;if(c===null)return null;o=c[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(r=r.type,c=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!c;break e;default:r=!1}if(r)return null;if(o&&typeof o!="function")throw Error(a(231,i,typeof o));return o}var cr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Yn=!1;if(cr)try{var $i={};Object.defineProperty($i,"passive",{get:function(){Yn=!0}}),window.addEventListener("test",$i,$i),window.removeEventListener("test",$i,$i)}catch{Yn=!1}var Nr=null,za=null,na=null;function El(){if(na)return na;var r,i=za,o=i.length,c,h="value"in Nr?Nr.value:Nr.textContent,g=h.length;for(r=0;r<o&&i[r]===h[r];r++);var x=o-r;for(c=1;c<=x&&i[o-c]===h[g-c];c++);return na=h.slice(r,1<c?1-c:void 0)}function Cr(r){var i=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&i===13&&(r=13)):r=i,r===10&&(r=13),32<=r||r===13?r:0}function Rr(){return!0}function xl(){return!1}function Ft(r){function i(o,c,h,g,x){this._reactName=o,this._targetInst=h,this.type=c,this.nativeEvent=g,this.target=x,this.currentTarget=null;for(var w in r)r.hasOwnProperty(w)&&(o=r[w],this[w]=o?o(g):g[w]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Rr:xl,this.isPropagationStopped=xl,this}return v(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Rr)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Rr)},persist:function(){},isPersistent:Rr}),i}var Ze={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},qs=Ft(Ze),Yi=v({},Ze,{view:0,detail:0}),_u=Ft(Yi),Fs,Hs,Ir,Ki=v({},Yi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xi,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Ir&&(Ir&&r.type==="mousemove"?(Fs=r.screenX-Ir.screenX,Hs=r.screenY-Ir.screenY):Hs=Fs=0,Ir=r),Fs)},movementY:function(r){return"movementY"in r?r.movementY:Hs}}),Kn=Ft(Ki),bu=v({},Ki,{dataTransfer:0}),Tf=Ft(bu),Qi=v({},Yi,{relatedTarget:0}),Gs=Ft(Qi),Tl=v({},Ze,{animationName:0,elapsedTime:0,pseudoElement:0}),$s=Ft(Tl),Eu=v({},Ze,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Ys=Ft(Eu),wf=v({},Ze,{data:0}),wl=Ft(wf),Wi={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Tu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Al(r){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(r):(r=Tu[r])?!!i[r]:!1}function Xi(){return Al}var wu=v({},Yi,{key:function(r){if(r.key){var i=Wi[r.key]||r.key;if(i!=="Unidentified")return i}return r.type==="keypress"?(r=Cr(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?xu[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xi,charCode:function(r){return r.type==="keypress"?Cr(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Cr(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Ks=Ft(wu),Au=v({},Ki,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Sl=Ft(Au),ra=v({},Yi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xi}),Su=Ft(ra),Nu=v({},Ze,{propertyName:0,elapsedTime:0,pseudoElement:0}),Cu=Ft(Nu),Ru=v({},Ki,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Qs=Ft(Ru),_n=v({},Ze,{newState:0,oldState:0}),Iu=Ft(_n),Du=[9,13,27,32],Dr=cr&&"CompositionEvent"in window,d=null;cr&&"documentMode"in document&&(d=document.documentMode);var _=cr&&"TextEvent"in window&&!d,b=cr&&(!Dr||d&&8<d&&11>=d),S=" ",F=!1;function W(r,i){switch(r){case"keyup":return Du.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function de(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var $e=!1;function kt(r,i){switch(r){case"compositionend":return de(i);case"keypress":return i.which!==32?null:(F=!0,S);case"textInput":return r=i.data,r===S&&F?null:r;default:return null}}function Ye(r,i){if($e)return r==="compositionend"||!Dr&&W(r,i)?(r=El(),na=za=Nr=null,$e=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return b&&i.locale!=="ko"?null:i.data;default:return null}}var Ht={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vt(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i==="input"?!!Ht[r.type]:i==="textarea"}function aa(r,i,o,c){ea?ta?ta.push(c):ta=[c]:ea=c,i=yd(i,"onChange"),0<i.length&&(o=new qs("onChange","change",null,o,c),r.push({event:o,listeners:i}))}var Jt=null,Or=null;function Nl(r){l_(r,0)}function Ou(r){var i=wr(r);if(yl(i))return r}function Ry(r,i){if(r==="change")return i}var Iy=!1;if(cr){var Af;if(cr){var Sf="oninput"in document;if(!Sf){var Dy=document.createElement("div");Dy.setAttribute("oninput","return;"),Sf=typeof Dy.oninput=="function"}Af=Sf}else Af=!1;Iy=Af&&(!document.documentMode||9<document.documentMode)}function Oy(){Jt&&(Jt.detachEvent("onpropertychange",jy),Or=Jt=null)}function jy(r){if(r.propertyName==="value"&&Ou(Or)){var i=[];aa(i,Or,r,$n(r)),vu(Nl,i)}}function Fw(r,i,o){r==="focusin"?(Oy(),Jt=i,Or=o,Jt.attachEvent("onpropertychange",jy)):r==="focusout"&&Oy()}function Hw(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Ou(Or)}function Gw(r,i){if(r==="click")return Ou(i)}function $w(r,i){if(r==="input"||r==="change")return Ou(i)}function Yw(r,i){return r===i&&(r!==0||1/r===1/i)||r!==r&&i!==i}var Pn=typeof Object.is=="function"?Object.is:Yw;function Cl(r,i){if(Pn(r,i))return!0;if(typeof r!="object"||r===null||typeof i!="object"||i===null)return!1;var o=Object.keys(r),c=Object.keys(i);if(o.length!==c.length)return!1;for(c=0;c<o.length;c++){var h=o[c];if(!Ce.call(i,h)||!Pn(r[h],i[h]))return!1}return!0}function Py(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function My(r,i){var o=Py(r);r=0;for(var c;o;){if(o.nodeType===3){if(c=r+o.textContent.length,r<=i&&c>=i)return{node:o,offset:i-r};r=c}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Py(o)}}function ky(r,i){return r&&i?r===i?!0:r&&r.nodeType===3?!1:i&&i.nodeType===3?ky(r,i.parentNode):"contains"in r?r.contains(i):r.compareDocumentPosition?!!(r.compareDocumentPosition(i)&16):!1:!1}function Vy(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var i=Bi(r.document);i instanceof r.HTMLIFrameElement;){try{var o=typeof i.contentWindow.location.href=="string"}catch{o=!1}if(o)r=i.contentWindow;else break;i=Bi(r.document)}return i}function Nf(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i&&(i==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||i==="textarea"||r.contentEditable==="true")}var Kw=cr&&"documentMode"in document&&11>=document.documentMode,Ws=null,Cf=null,Rl=null,Rf=!1;function Ly(r,i,o){var c=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Rf||Ws==null||Ws!==Bi(c)||(c=Ws,"selectionStart"in c&&Nf(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Rl&&Cl(Rl,c)||(Rl=c,c=yd(Cf,"onSelect"),0<c.length&&(i=new qs("onSelect","select",null,i,o),r.push({event:i,listeners:c}),i.target=Ws)))}function Zi(r,i){var o={};return o[r.toLowerCase()]=i.toLowerCase(),o["Webkit"+r]="webkit"+i,o["Moz"+r]="moz"+i,o}var Xs={animationend:Zi("Animation","AnimationEnd"),animationiteration:Zi("Animation","AnimationIteration"),animationstart:Zi("Animation","AnimationStart"),transitionrun:Zi("Transition","TransitionRun"),transitionstart:Zi("Transition","TransitionStart"),transitioncancel:Zi("Transition","TransitionCancel"),transitionend:Zi("Transition","TransitionEnd")},If={},Uy={};cr&&(Uy=document.createElement("div").style,"AnimationEvent"in window||(delete Xs.animationend.animation,delete Xs.animationiteration.animation,delete Xs.animationstart.animation),"TransitionEvent"in window||delete Xs.transitionend.transition);function Ji(r){if(If[r])return If[r];if(!Xs[r])return r;var i=Xs[r],o;for(o in i)if(i.hasOwnProperty(o)&&o in Uy)return If[r]=i[o];return r}var zy=Ji("animationend"),By=Ji("animationiteration"),qy=Ji("animationstart"),Qw=Ji("transitionrun"),Ww=Ji("transitionstart"),Xw=Ji("transitioncancel"),Fy=Ji("transitionend"),Hy=new Map,Df="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Df.push("scrollEnd");function ur(r,i){Hy.set(r,i),lr(i,[r])}var Gy=new WeakMap;function Qn(r,i){if(typeof r=="object"&&r!==null){var o=Gy.get(r);return o!==void 0?o:(i={value:r,source:i,stack:Us(i)},Gy.set(r,i),i)}return{value:r,source:i,stack:Us(i)}}var Wn=[],Zs=0,Of=0;function ju(){for(var r=Zs,i=Of=Zs=0;i<r;){var o=Wn[i];Wn[i++]=null;var c=Wn[i];Wn[i++]=null;var h=Wn[i];Wn[i++]=null;var g=Wn[i];if(Wn[i++]=null,c!==null&&h!==null){var x=c.pending;x===null?h.next=h:(h.next=x.next,x.next=h),c.pending=h}g!==0&&$y(o,h,g)}}function Pu(r,i,o,c){Wn[Zs++]=r,Wn[Zs++]=i,Wn[Zs++]=o,Wn[Zs++]=c,Of|=c,r.lanes|=c,r=r.alternate,r!==null&&(r.lanes|=c)}function jf(r,i,o,c){return Pu(r,i,o,c),Mu(r)}function Js(r,i){return Pu(r,null,null,i),Mu(r)}function $y(r,i,o){r.lanes|=o;var c=r.alternate;c!==null&&(c.lanes|=o);for(var h=!1,g=r.return;g!==null;)g.childLanes|=o,c=g.alternate,c!==null&&(c.childLanes|=o),g.tag===22&&(r=g.stateNode,r===null||r._visibility&1||(h=!0)),r=g,g=g.return;return r.tag===3?(g=r.stateNode,h&&i!==null&&(h=31-cn(o),r=g.hiddenUpdates,c=r[h],c===null?r[h]=[i]:c.push(i),i.lane=o|536870912),g):null}function Mu(r){if(50<ec)throw ec=0,Um=null,Error(a(185));for(var i=r.return;i!==null;)r=i,i=r.return;return r.tag===3?r.stateNode:null}var eo={};function Zw(r,i,o,c){this.tag=r,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mn(r,i,o,c){return new Zw(r,i,o,c)}function Pf(r){return r=r.prototype,!(!r||!r.isReactComponent)}function ia(r,i){var o=r.alternate;return o===null?(o=Mn(r.tag,i,r.key,r.mode),o.elementType=r.elementType,o.type=r.type,o.stateNode=r.stateNode,o.alternate=r,r.alternate=o):(o.pendingProps=i,o.type=r.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=r.flags&65011712,o.childLanes=r.childLanes,o.lanes=r.lanes,o.child=r.child,o.memoizedProps=r.memoizedProps,o.memoizedState=r.memoizedState,o.updateQueue=r.updateQueue,i=r.dependencies,o.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},o.sibling=r.sibling,o.index=r.index,o.ref=r.ref,o.refCleanup=r.refCleanup,o}function Yy(r,i){r.flags&=65011714;var o=r.alternate;return o===null?(r.childLanes=0,r.lanes=i,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,i=o.dependencies,r.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),r}function ku(r,i,o,c,h,g){var x=0;if(c=r,typeof r=="function")Pf(r)&&(x=1);else if(typeof r=="string")x=eS(r,o,_e.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case N:return r=Mn(31,o,i,h),r.elementType=N,r.lanes=g,r;case A:return es(o.children,h,g,i);case M:x=8,h|=24;break;case I:return r=Mn(12,o,i,h|2),r.elementType=I,r.lanes=g,r;case ce:return r=Mn(13,o,i,h),r.elementType=ce,r.lanes=g,r;case pe:return r=Mn(19,o,i,h),r.elementType=pe,r.lanes=g,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case G:case q:x=10;break e;case Q:x=9;break e;case oe:x=11;break e;case P:x=14;break e;case R:x=16,c=null;break e}x=29,o=Error(a(130,r===null?"null":typeof r,"")),c=null}return i=Mn(x,o,i,h),i.elementType=r,i.type=c,i.lanes=g,i}function es(r,i,o,c){return r=Mn(7,r,c,i),r.lanes=o,r}function Mf(r,i,o){return r=Mn(6,r,null,i),r.lanes=o,r}function kf(r,i,o){return i=Mn(4,r.children!==null?r.children:[],r.key,i),i.lanes=o,i.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},i}var to=[],no=0,Vu=null,Lu=0,Xn=[],Zn=0,ts=null,sa=1,oa="";function ns(r,i){to[no++]=Lu,to[no++]=Vu,Vu=r,Lu=i}function Ky(r,i,o){Xn[Zn++]=sa,Xn[Zn++]=oa,Xn[Zn++]=ts,ts=r;var c=sa;r=oa;var h=32-cn(c)-1;c&=~(1<<h),o+=1;var g=32-cn(i)+h;if(30<g){var x=h-h%5;g=(c&(1<<x)-1).toString(32),c>>=x,h-=x,sa=1<<32-cn(i)+h|o<<h|c,oa=g+r}else sa=1<<g|o<<h|c,oa=r}function Vf(r){r.return!==null&&(ns(r,1),Ky(r,1,0))}function Lf(r){for(;r===Vu;)Vu=to[--no],to[no]=null,Lu=to[--no],to[no]=null;for(;r===ts;)ts=Xn[--Zn],Xn[Zn]=null,oa=Xn[--Zn],Xn[Zn]=null,sa=Xn[--Zn],Xn[Zn]=null}var bn=null,Tt=null,Xe=!1,rs=null,jr=!1,Uf=Error(a(519));function as(r){var i=Error(a(418,""));throw Ol(Qn(i,r)),Uf}function Qy(r){var i=r.stateNode,o=r.type,c=r.memoizedProps;switch(i[Mt]=r,i[Rt]=c,o){case"dialog":Be("cancel",i),Be("close",i);break;case"iframe":case"object":case"embed":Be("load",i);break;case"video":case"audio":for(o=0;o<nc.length;o++)Be(nc[o],i);break;case"source":Be("error",i);break;case"img":case"image":case"link":Be("error",i),Be("load",i);break;case"details":Be("toggle",i);break;case"input":Be("invalid",i),qi(i,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0),zs(i);break;case"select":Be("invalid",i);break;case"textarea":Be("invalid",i),Fi(i,c.value,c.defaultValue,c.children),zs(i)}o=c.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||i.textContent===""+o||c.suppressHydrationWarning===!0||h_(i.textContent,o)?(c.popover!=null&&(Be("beforetoggle",i),Be("toggle",i)),c.onScroll!=null&&Be("scroll",i),c.onScrollEnd!=null&&Be("scrollend",i),c.onClick!=null&&(i.onclick=vd),i=!0):i=!1,i||as(r)}function Wy(r){for(bn=r.return;bn;)switch(bn.tag){case 5:case 13:jr=!1;return;case 27:case 3:jr=!0;return;default:bn=bn.return}}function Il(r){if(r!==bn)return!1;if(!Xe)return Wy(r),Xe=!0,!1;var i=r.tag,o;if((o=i!==3&&i!==27)&&((o=i===5)&&(o=r.type,o=!(o!=="form"&&o!=="button")||tp(r.type,r.memoizedProps)),o=!o),o&&Tt&&as(r),Wy(r),i===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(a(317));e:{for(r=r.nextSibling,i=0;r;){if(r.nodeType===8)if(o=r.data,o==="/$"){if(i===0){Tt=hr(r.nextSibling);break e}i--}else o!=="$"&&o!=="$!"&&o!=="$?"||i++;r=r.nextSibling}Tt=null}}else i===27?(i=Tt,ni(r.type)?(r=ip,ip=null,Tt=r):Tt=i):Tt=bn?hr(r.stateNode.nextSibling):null;return!0}function Dl(){Tt=bn=null,Xe=!1}function Xy(){var r=rs;return r!==null&&(Sn===null?Sn=r:Sn.push.apply(Sn,r),rs=null),r}function Ol(r){rs===null?rs=[r]:rs.push(r)}var zf=ie(null),is=null,la=null;function Ba(r,i,o){le(zf,i._currentValue),i._currentValue=o}function ca(r){r._currentValue=zf.current,he(zf)}function Bf(r,i,o){for(;r!==null;){var c=r.alternate;if((r.childLanes&i)!==i?(r.childLanes|=i,c!==null&&(c.childLanes|=i)):c!==null&&(c.childLanes&i)!==i&&(c.childLanes|=i),r===o)break;r=r.return}}function qf(r,i,o,c){var h=r.child;for(h!==null&&(h.return=r);h!==null;){var g=h.dependencies;if(g!==null){var x=h.child;g=g.firstContext;e:for(;g!==null;){var w=g;g=h;for(var D=0;D<i.length;D++)if(w.context===i[D]){g.lanes|=o,w=g.alternate,w!==null&&(w.lanes|=o),Bf(g.return,o,r),c||(x=null);break e}g=w.next}}else if(h.tag===18){if(x=h.return,x===null)throw Error(a(341));x.lanes|=o,g=x.alternate,g!==null&&(g.lanes|=o),Bf(x,o,r),x=null}else x=h.child;if(x!==null)x.return=h;else for(x=h;x!==null;){if(x===r){x=null;break}if(h=x.sibling,h!==null){h.return=x.return,x=h;break}x=x.return}h=x}}function jl(r,i,o,c){r=null;for(var h=i,g=!1;h!==null;){if(!g){if((h.flags&524288)!==0)g=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var x=h.alternate;if(x===null)throw Error(a(387));if(x=x.memoizedProps,x!==null){var w=h.type;Pn(h.pendingProps.value,x.value)||(r!==null?r.push(w):r=[w])}}else if(h===ve.current){if(x=h.alternate,x===null)throw Error(a(387));x.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(r!==null?r.push(lc):r=[lc])}h=h.return}r!==null&&qf(i,r,o,c),i.flags|=262144}function Uu(r){for(r=r.firstContext;r!==null;){if(!Pn(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function ss(r){is=r,la=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function un(r){return Zy(is,r)}function zu(r,i){return is===null&&ss(r),Zy(r,i)}function Zy(r,i){var o=i._currentValue;if(i={context:i,memoizedValue:o,next:null},la===null){if(r===null)throw Error(a(308));la=i,r.dependencies={lanes:0,firstContext:i},r.flags|=524288}else la=la.next=i;return o}var Jw=typeof AbortController<"u"?AbortController:function(){var r=[],i=this.signal={aborted:!1,addEventListener:function(o,c){r.push(c)}};this.abort=function(){i.aborted=!0,r.forEach(function(o){return o()})}},eA=n.unstable_scheduleCallback,tA=n.unstable_NormalPriority,Lt={$$typeof:q,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ff(){return{controller:new Jw,data:new Map,refCount:0}}function Pl(r){r.refCount--,r.refCount===0&&eA(tA,function(){r.controller.abort()})}var Ml=null,Hf=0,ro=0,ao=null;function nA(r,i){if(Ml===null){var o=Ml=[];Hf=0,ro=$m(),ao={status:"pending",value:void 0,then:function(c){o.push(c)}}}return Hf++,i.then(Jy,Jy),i}function Jy(){if(--Hf===0&&Ml!==null){ao!==null&&(ao.status="fulfilled");var r=Ml;Ml=null,ro=0,ao=null;for(var i=0;i<r.length;i++)(0,r[i])()}}function rA(r,i){var o=[],c={status:"pending",value:null,reason:null,then:function(h){o.push(h)}};return r.then(function(){c.status="fulfilled",c.value=i;for(var h=0;h<o.length;h++)(0,o[h])(i)},function(h){for(c.status="rejected",c.reason=h,h=0;h<o.length;h++)(0,o[h])(void 0)}),c}var e0=Z.S;Z.S=function(r,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&nA(r,i),e0!==null&&e0(r,i)};var os=ie(null);function Gf(){var r=os.current;return r!==null?r:ht.pooledCache}function Bu(r,i){i===null?le(os,os.current):le(os,i.pool)}function t0(){var r=Gf();return r===null?null:{parent:Lt._currentValue,pool:r}}var kl=Error(a(460)),n0=Error(a(474)),qu=Error(a(542)),$f={then:function(){}};function r0(r){return r=r.status,r==="fulfilled"||r==="rejected"}function Fu(){}function a0(r,i,o){switch(o=r[o],o===void 0?r.push(i):o!==i&&(i.then(Fu,Fu),i=o),i.status){case"fulfilled":return i.value;case"rejected":throw r=i.reason,s0(r),r;default:if(typeof i.status=="string")i.then(Fu,Fu);else{if(r=ht,r!==null&&100<r.shellSuspendCounter)throw Error(a(482));r=i,r.status="pending",r.then(function(c){if(i.status==="pending"){var h=i;h.status="fulfilled",h.value=c}},function(c){if(i.status==="pending"){var h=i;h.status="rejected",h.reason=c}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw r=i.reason,s0(r),r}throw Vl=i,kl}}var Vl=null;function i0(){if(Vl===null)throw Error(a(459));var r=Vl;return Vl=null,r}function s0(r){if(r===kl||r===qu)throw Error(a(483))}var qa=!1;function Yf(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Kf(r,i){r=r.updateQueue,i.updateQueue===r&&(i.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Fa(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function Ha(r,i,o){var c=r.updateQueue;if(c===null)return null;if(c=c.shared,(tt&2)!==0){var h=c.pending;return h===null?i.next=i:(i.next=h.next,h.next=i),c.pending=i,i=Mu(r),$y(r,null,o),i}return Pu(r,c,i,o),Mu(r)}function Ll(r,i,o){if(i=i.updateQueue,i!==null&&(i=i.shared,(o&4194048)!==0)){var c=i.lanes;c&=r.pendingLanes,o|=c,i.lanes=o,hl(r,o)}}function Qf(r,i){var o=r.updateQueue,c=r.alternate;if(c!==null&&(c=c.updateQueue,o===c)){var h=null,g=null;if(o=o.firstBaseUpdate,o!==null){do{var x={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};g===null?h=g=x:g=g.next=x,o=o.next}while(o!==null);g===null?h=g=i:g=g.next=i}else h=g=i;o={baseState:c.baseState,firstBaseUpdate:h,lastBaseUpdate:g,shared:c.shared,callbacks:c.callbacks},r.updateQueue=o;return}r=o.lastBaseUpdate,r===null?o.firstBaseUpdate=i:r.next=i,o.lastBaseUpdate=i}var Wf=!1;function Ul(){if(Wf){var r=ao;if(r!==null)throw r}}function zl(r,i,o,c){Wf=!1;var h=r.updateQueue;qa=!1;var g=h.firstBaseUpdate,x=h.lastBaseUpdate,w=h.shared.pending;if(w!==null){h.shared.pending=null;var D=w,$=D.next;D.next=null,x===null?g=$:x.next=$,x=D;var J=r.alternate;J!==null&&(J=J.updateQueue,w=J.lastBaseUpdate,w!==x&&(w===null?J.firstBaseUpdate=$:w.next=$,J.lastBaseUpdate=D))}if(g!==null){var re=h.baseState;x=0,J=$=D=null,w=g;do{var Y=w.lane&-536870913,K=Y!==w.lane;if(K?(Ke&Y)===Y:(c&Y)===Y){Y!==0&&Y===ro&&(Wf=!0),J!==null&&(J=J.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var Ne=r,Te=w;Y=i;var lt=o;switch(Te.tag){case 1:if(Ne=Te.payload,typeof Ne=="function"){re=Ne.call(lt,re,Y);break e}re=Ne;break e;case 3:Ne.flags=Ne.flags&-65537|128;case 0:if(Ne=Te.payload,Y=typeof Ne=="function"?Ne.call(lt,re,Y):Ne,Y==null)break e;re=v({},re,Y);break e;case 2:qa=!0}}Y=w.callback,Y!==null&&(r.flags|=64,K&&(r.flags|=8192),K=h.callbacks,K===null?h.callbacks=[Y]:K.push(Y))}else K={lane:Y,tag:w.tag,payload:w.payload,callback:w.callback,next:null},J===null?($=J=K,D=re):J=J.next=K,x|=Y;if(w=w.next,w===null){if(w=h.shared.pending,w===null)break;K=w,w=K.next,K.next=null,h.lastBaseUpdate=K,h.shared.pending=null}}while(!0);J===null&&(D=re),h.baseState=D,h.firstBaseUpdate=$,h.lastBaseUpdate=J,g===null&&(h.shared.lanes=0),Za|=x,r.lanes=x,r.memoizedState=re}}function o0(r,i){if(typeof r!="function")throw Error(a(191,r));r.call(i)}function l0(r,i){var o=r.callbacks;if(o!==null)for(r.callbacks=null,r=0;r<o.length;r++)o0(o[r],i)}var io=ie(null),Hu=ie(0);function c0(r,i){r=ga,le(Hu,r),le(io,i),ga=r|i.baseLanes}function Xf(){le(Hu,ga),le(io,io.current)}function Zf(){ga=Hu.current,he(io),he(Hu)}var Ga=0,ke=null,st=null,Dt=null,Gu=!1,so=!1,ls=!1,$u=0,Bl=0,oo=null,aA=0;function St(){throw Error(a(321))}function Jf(r,i){if(i===null)return!1;for(var o=0;o<i.length&&o<r.length;o++)if(!Pn(r[o],i[o]))return!1;return!0}function em(r,i,o,c,h,g){return Ga=g,ke=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,Z.H=r===null||r.memoizedState===null?$0:Y0,ls=!1,g=o(c,h),ls=!1,so&&(g=d0(i,o,c,h)),u0(r),g}function u0(r){Z.H=Zu;var i=st!==null&&st.next!==null;if(Ga=0,Dt=st=ke=null,Gu=!1,Bl=0,oo=null,i)throw Error(a(300));r===null||Gt||(r=r.dependencies,r!==null&&Uu(r)&&(Gt=!0))}function d0(r,i,o,c){ke=r;var h=0;do{if(so&&(oo=null),Bl=0,so=!1,25<=h)throw Error(a(301));if(h+=1,Dt=st=null,r.updateQueue!=null){var g=r.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}Z.H=dA,g=i(o,c)}while(so);return g}function iA(){var r=Z.H,i=r.useState()[0];return i=typeof i.then=="function"?ql(i):i,r=r.useState()[0],(st!==null?st.memoizedState:null)!==r&&(ke.flags|=1024),i}function tm(){var r=$u!==0;return $u=0,r}function nm(r,i,o){i.updateQueue=r.updateQueue,i.flags&=-2053,r.lanes&=~o}function rm(r){if(Gu){for(r=r.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Gu=!1}Ga=0,Dt=st=ke=null,so=!1,Bl=$u=0,oo=null}function wn(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Dt===null?ke.memoizedState=Dt=r:Dt=Dt.next=r,Dt}function Ot(){if(st===null){var r=ke.alternate;r=r!==null?r.memoizedState:null}else r=st.next;var i=Dt===null?ke.memoizedState:Dt.next;if(i!==null)Dt=i,st=r;else{if(r===null)throw ke.alternate===null?Error(a(467)):Error(a(310));st=r,r={memoizedState:st.memoizedState,baseState:st.baseState,baseQueue:st.baseQueue,queue:st.queue,next:null},Dt===null?ke.memoizedState=Dt=r:Dt=Dt.next=r}return Dt}function am(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ql(r){var i=Bl;return Bl+=1,oo===null&&(oo=[]),r=a0(oo,r,i),i=ke,(Dt===null?i.memoizedState:Dt.next)===null&&(i=i.alternate,Z.H=i===null||i.memoizedState===null?$0:Y0),r}function Yu(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return ql(r);if(r.$$typeof===q)return un(r)}throw Error(a(438,String(r)))}function im(r){var i=null,o=ke.updateQueue;if(o!==null&&(i=o.memoCache),i==null){var c=ke.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(i={data:c.data.map(function(h){return h.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),o===null&&(o=am(),ke.updateQueue=o),o.memoCache=i,o=i.data[i.index],o===void 0)for(o=i.data[i.index]=Array(r),c=0;c<r;c++)o[c]=j;return i.index++,o}function ua(r,i){return typeof i=="function"?i(r):i}function Ku(r){var i=Ot();return sm(i,st,r)}function sm(r,i,o){var c=r.queue;if(c===null)throw Error(a(311));c.lastRenderedReducer=o;var h=r.baseQueue,g=c.pending;if(g!==null){if(h!==null){var x=h.next;h.next=g.next,g.next=x}i.baseQueue=h=g,c.pending=null}if(g=r.baseState,h===null)r.memoizedState=g;else{i=h.next;var w=x=null,D=null,$=i,J=!1;do{var re=$.lane&-536870913;if(re!==$.lane?(Ke&re)===re:(Ga&re)===re){var Y=$.revertLane;if(Y===0)D!==null&&(D=D.next={lane:0,revertLane:0,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),re===ro&&(J=!0);else if((Ga&Y)===Y){$=$.next,Y===ro&&(J=!0);continue}else re={lane:0,revertLane:$.revertLane,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},D===null?(w=D=re,x=g):D=D.next=re,ke.lanes|=Y,Za|=Y;re=$.action,ls&&o(g,re),g=$.hasEagerState?$.eagerState:o(g,re)}else Y={lane:re,revertLane:$.revertLane,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},D===null?(w=D=Y,x=g):D=D.next=Y,ke.lanes|=re,Za|=re;$=$.next}while($!==null&&$!==i);if(D===null?x=g:D.next=w,!Pn(g,r.memoizedState)&&(Gt=!0,J&&(o=ao,o!==null)))throw o;r.memoizedState=g,r.baseState=x,r.baseQueue=D,c.lastRenderedState=g}return h===null&&(c.lanes=0),[r.memoizedState,c.dispatch]}function om(r){var i=Ot(),o=i.queue;if(o===null)throw Error(a(311));o.lastRenderedReducer=r;var c=o.dispatch,h=o.pending,g=i.memoizedState;if(h!==null){o.pending=null;var x=h=h.next;do g=r(g,x.action),x=x.next;while(x!==h);Pn(g,i.memoizedState)||(Gt=!0),i.memoizedState=g,i.baseQueue===null&&(i.baseState=g),o.lastRenderedState=g}return[g,c]}function h0(r,i,o){var c=ke,h=Ot(),g=Xe;if(g){if(o===void 0)throw Error(a(407));o=o()}else o=i();var x=!Pn((st||h).memoizedState,o);x&&(h.memoizedState=o,Gt=!0),h=h.queue;var w=p0.bind(null,c,h,r);if(Fl(2048,8,w,[r]),h.getSnapshot!==i||x||Dt!==null&&Dt.memoizedState.tag&1){if(c.flags|=2048,lo(9,Qu(),m0.bind(null,c,h,o,i),null),ht===null)throw Error(a(349));g||(Ga&124)!==0||f0(c,i,o)}return o}function f0(r,i,o){r.flags|=16384,r={getSnapshot:i,value:o},i=ke.updateQueue,i===null?(i=am(),ke.updateQueue=i,i.stores=[r]):(o=i.stores,o===null?i.stores=[r]:o.push(r))}function m0(r,i,o,c){i.value=o,i.getSnapshot=c,g0(i)&&y0(r)}function p0(r,i,o){return o(function(){g0(i)&&y0(r)})}function g0(r){var i=r.getSnapshot;r=r.value;try{var o=i();return!Pn(r,o)}catch{return!0}}function y0(r){var i=Js(r,2);i!==null&&zn(i,r,2)}function lm(r){var i=wn();if(typeof r=="function"){var o=r;if(r=o(),ls){On(!0);try{o()}finally{On(!1)}}}return i.memoizedState=i.baseState=r,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ua,lastRenderedState:r},i}function v0(r,i,o,c){return r.baseState=o,sm(r,st,typeof c=="function"?c:ua)}function sA(r,i,o,c,h){if(Xu(r))throw Error(a(485));if(r=i.action,r!==null){var g={payload:h,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(x){g.listeners.push(x)}};Z.T!==null?o(!0):g.isTransition=!1,c(g),o=i.pending,o===null?(g.next=i.pending=g,_0(i,g)):(g.next=o.next,i.pending=o.next=g)}}function _0(r,i){var o=i.action,c=i.payload,h=r.state;if(i.isTransition){var g=Z.T,x={};Z.T=x;try{var w=o(h,c),D=Z.S;D!==null&&D(x,w),b0(r,i,w)}catch($){cm(r,i,$)}finally{Z.T=g}}else try{g=o(h,c),b0(r,i,g)}catch($){cm(r,i,$)}}function b0(r,i,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(c){E0(r,i,c)},function(c){return cm(r,i,c)}):E0(r,i,o)}function E0(r,i,o){i.status="fulfilled",i.value=o,x0(i),r.state=o,i=r.pending,i!==null&&(o=i.next,o===i?r.pending=null:(o=o.next,i.next=o,_0(r,o)))}function cm(r,i,o){var c=r.pending;if(r.pending=null,c!==null){c=c.next;do i.status="rejected",i.reason=o,x0(i),i=i.next;while(i!==c)}r.action=null}function x0(r){r=r.listeners;for(var i=0;i<r.length;i++)(0,r[i])()}function T0(r,i){return i}function w0(r,i){if(Xe){var o=ht.formState;if(o!==null){e:{var c=ke;if(Xe){if(Tt){t:{for(var h=Tt,g=jr;h.nodeType!==8;){if(!g){h=null;break t}if(h=hr(h.nextSibling),h===null){h=null;break t}}g=h.data,h=g==="F!"||g==="F"?h:null}if(h){Tt=hr(h.nextSibling),c=h.data==="F!";break e}}as(c)}c=!1}c&&(i=o[0])}}return o=wn(),o.memoizedState=o.baseState=i,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:T0,lastRenderedState:i},o.queue=c,o=F0.bind(null,ke,c),c.dispatch=o,c=lm(!1),g=mm.bind(null,ke,!1,c.queue),c=wn(),h={state:i,dispatch:null,action:r,pending:null},c.queue=h,o=sA.bind(null,ke,h,g,o),h.dispatch=o,c.memoizedState=r,[i,o,!1]}function A0(r){var i=Ot();return S0(i,st,r)}function S0(r,i,o){if(i=sm(r,i,T0)[0],r=Ku(ua)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var c=ql(i)}catch(x){throw x===kl?qu:x}else c=i;i=Ot();var h=i.queue,g=h.dispatch;return o!==i.memoizedState&&(ke.flags|=2048,lo(9,Qu(),oA.bind(null,h,o),null)),[c,g,r]}function oA(r,i){r.action=i}function N0(r){var i=Ot(),o=st;if(o!==null)return S0(i,o,r);Ot(),i=i.memoizedState,o=Ot();var c=o.queue.dispatch;return o.memoizedState=r,[i,c,!1]}function lo(r,i,o,c){return r={tag:r,create:o,deps:c,inst:i,next:null},i=ke.updateQueue,i===null&&(i=am(),ke.updateQueue=i),o=i.lastEffect,o===null?i.lastEffect=r.next=r:(c=o.next,o.next=r,r.next=c,i.lastEffect=r),r}function Qu(){return{destroy:void 0,resource:void 0}}function C0(){return Ot().memoizedState}function Wu(r,i,o,c){var h=wn();c=c===void 0?null:c,ke.flags|=r,h.memoizedState=lo(1|i,Qu(),o,c)}function Fl(r,i,o,c){var h=Ot();c=c===void 0?null:c;var g=h.memoizedState.inst;st!==null&&c!==null&&Jf(c,st.memoizedState.deps)?h.memoizedState=lo(i,g,o,c):(ke.flags|=r,h.memoizedState=lo(1|i,g,o,c))}function R0(r,i){Wu(8390656,8,r,i)}function I0(r,i){Fl(2048,8,r,i)}function D0(r,i){return Fl(4,2,r,i)}function O0(r,i){return Fl(4,4,r,i)}function j0(r,i){if(typeof i=="function"){r=r();var o=i(r);return function(){typeof o=="function"?o():i(null)}}if(i!=null)return r=r(),i.current=r,function(){i.current=null}}function P0(r,i,o){o=o!=null?o.concat([r]):null,Fl(4,4,j0.bind(null,i,r),o)}function um(){}function M0(r,i){var o=Ot();i=i===void 0?null:i;var c=o.memoizedState;return i!==null&&Jf(i,c[1])?c[0]:(o.memoizedState=[r,i],r)}function k0(r,i){var o=Ot();i=i===void 0?null:i;var c=o.memoizedState;if(i!==null&&Jf(i,c[1]))return c[0];if(c=r(),ls){On(!0);try{r()}finally{On(!1)}}return o.memoizedState=[c,i],c}function dm(r,i,o){return o===void 0||(Ga&1073741824)!==0?r.memoizedState=i:(r.memoizedState=o,r=Uv(),ke.lanes|=r,Za|=r,o)}function V0(r,i,o,c){return Pn(o,i)?o:io.current!==null?(r=dm(r,o,c),Pn(r,i)||(Gt=!0),r):(Ga&42)===0?(Gt=!0,r.memoizedState=o):(r=Uv(),ke.lanes|=r,Za|=r,i)}function L0(r,i,o,c,h){var g=ue.p;ue.p=g!==0&&8>g?g:8;var x=Z.T,w={};Z.T=w,mm(r,!1,i,o);try{var D=h(),$=Z.S;if($!==null&&$(w,D),D!==null&&typeof D=="object"&&typeof D.then=="function"){var J=rA(D,c);Hl(r,i,J,Un(r))}else Hl(r,i,c,Un(r))}catch(re){Hl(r,i,{then:function(){},status:"rejected",reason:re},Un())}finally{ue.p=g,Z.T=x}}function lA(){}function hm(r,i,o,c){if(r.tag!==5)throw Error(a(476));var h=U0(r).queue;L0(r,h,i,ye,o===null?lA:function(){return z0(r),o(c)})}function U0(r){var i=r.memoizedState;if(i!==null)return i;i={memoizedState:ye,baseState:ye,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ua,lastRenderedState:ye},next:null};var o={};return i.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ua,lastRenderedState:o},next:null},r.memoizedState=i,r=r.alternate,r!==null&&(r.memoizedState=i),i}function z0(r){var i=U0(r).next.queue;Hl(r,i,{},Un())}function fm(){return un(lc)}function B0(){return Ot().memoizedState}function q0(){return Ot().memoizedState}function cA(r){for(var i=r.return;i!==null;){switch(i.tag){case 24:case 3:var o=Un();r=Fa(o);var c=Ha(i,r,o);c!==null&&(zn(c,i,o),Ll(c,i,o)),i={cache:Ff()},r.payload=i;return}i=i.return}}function uA(r,i,o){var c=Un();o={lane:c,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},Xu(r)?H0(i,o):(o=jf(r,i,o,c),o!==null&&(zn(o,r,c),G0(o,i,c)))}function F0(r,i,o){var c=Un();Hl(r,i,o,c)}function Hl(r,i,o,c){var h={lane:c,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(Xu(r))H0(i,h);else{var g=r.alternate;if(r.lanes===0&&(g===null||g.lanes===0)&&(g=i.lastRenderedReducer,g!==null))try{var x=i.lastRenderedState,w=g(x,o);if(h.hasEagerState=!0,h.eagerState=w,Pn(w,x))return Pu(r,i,h,0),ht===null&&ju(),!1}catch{}finally{}if(o=jf(r,i,h,c),o!==null)return zn(o,r,c),G0(o,i,c),!0}return!1}function mm(r,i,o,c){if(c={lane:2,revertLane:$m(),action:c,hasEagerState:!1,eagerState:null,next:null},Xu(r)){if(i)throw Error(a(479))}else i=jf(r,o,c,2),i!==null&&zn(i,r,2)}function Xu(r){var i=r.alternate;return r===ke||i!==null&&i===ke}function H0(r,i){so=Gu=!0;var o=r.pending;o===null?i.next=i:(i.next=o.next,o.next=i),r.pending=i}function G0(r,i,o){if((o&4194048)!==0){var c=i.lanes;c&=r.pendingLanes,o|=c,i.lanes=o,hl(r,o)}}var Zu={readContext:un,use:Yu,useCallback:St,useContext:St,useEffect:St,useImperativeHandle:St,useLayoutEffect:St,useInsertionEffect:St,useMemo:St,useReducer:St,useRef:St,useState:St,useDebugValue:St,useDeferredValue:St,useTransition:St,useSyncExternalStore:St,useId:St,useHostTransitionStatus:St,useFormState:St,useActionState:St,useOptimistic:St,useMemoCache:St,useCacheRefresh:St},$0={readContext:un,use:Yu,useCallback:function(r,i){return wn().memoizedState=[r,i===void 0?null:i],r},useContext:un,useEffect:R0,useImperativeHandle:function(r,i,o){o=o!=null?o.concat([r]):null,Wu(4194308,4,j0.bind(null,i,r),o)},useLayoutEffect:function(r,i){return Wu(4194308,4,r,i)},useInsertionEffect:function(r,i){Wu(4,2,r,i)},useMemo:function(r,i){var o=wn();i=i===void 0?null:i;var c=r();if(ls){On(!0);try{r()}finally{On(!1)}}return o.memoizedState=[c,i],c},useReducer:function(r,i,o){var c=wn();if(o!==void 0){var h=o(i);if(ls){On(!0);try{o(i)}finally{On(!1)}}}else h=i;return c.memoizedState=c.baseState=h,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:h},c.queue=r,r=r.dispatch=uA.bind(null,ke,r),[c.memoizedState,r]},useRef:function(r){var i=wn();return r={current:r},i.memoizedState=r},useState:function(r){r=lm(r);var i=r.queue,o=F0.bind(null,ke,i);return i.dispatch=o,[r.memoizedState,o]},useDebugValue:um,useDeferredValue:function(r,i){var o=wn();return dm(o,r,i)},useTransition:function(){var r=lm(!1);return r=L0.bind(null,ke,r.queue,!0,!1),wn().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,i,o){var c=ke,h=wn();if(Xe){if(o===void 0)throw Error(a(407));o=o()}else{if(o=i(),ht===null)throw Error(a(349));(Ke&124)!==0||f0(c,i,o)}h.memoizedState=o;var g={value:o,getSnapshot:i};return h.queue=g,R0(p0.bind(null,c,g,r),[r]),c.flags|=2048,lo(9,Qu(),m0.bind(null,c,g,o,i),null),o},useId:function(){var r=wn(),i=ht.identifierPrefix;if(Xe){var o=oa,c=sa;o=(c&~(1<<32-cn(c)-1)).toString(32)+o,i="«"+i+"R"+o,o=$u++,0<o&&(i+="H"+o.toString(32)),i+="»"}else o=aA++,i="«"+i+"r"+o.toString(32)+"»";return r.memoizedState=i},useHostTransitionStatus:fm,useFormState:w0,useActionState:w0,useOptimistic:function(r){var i=wn();i.memoizedState=i.baseState=r;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=o,i=mm.bind(null,ke,!0,o),o.dispatch=i,[r,i]},useMemoCache:im,useCacheRefresh:function(){return wn().memoizedState=cA.bind(null,ke)}},Y0={readContext:un,use:Yu,useCallback:M0,useContext:un,useEffect:I0,useImperativeHandle:P0,useInsertionEffect:D0,useLayoutEffect:O0,useMemo:k0,useReducer:Ku,useRef:C0,useState:function(){return Ku(ua)},useDebugValue:um,useDeferredValue:function(r,i){var o=Ot();return V0(o,st.memoizedState,r,i)},useTransition:function(){var r=Ku(ua)[0],i=Ot().memoizedState;return[typeof r=="boolean"?r:ql(r),i]},useSyncExternalStore:h0,useId:B0,useHostTransitionStatus:fm,useFormState:A0,useActionState:A0,useOptimistic:function(r,i){var o=Ot();return v0(o,st,r,i)},useMemoCache:im,useCacheRefresh:q0},dA={readContext:un,use:Yu,useCallback:M0,useContext:un,useEffect:I0,useImperativeHandle:P0,useInsertionEffect:D0,useLayoutEffect:O0,useMemo:k0,useReducer:om,useRef:C0,useState:function(){return om(ua)},useDebugValue:um,useDeferredValue:function(r,i){var o=Ot();return st===null?dm(o,r,i):V0(o,st.memoizedState,r,i)},useTransition:function(){var r=om(ua)[0],i=Ot().memoizedState;return[typeof r=="boolean"?r:ql(r),i]},useSyncExternalStore:h0,useId:B0,useHostTransitionStatus:fm,useFormState:N0,useActionState:N0,useOptimistic:function(r,i){var o=Ot();return st!==null?v0(o,st,r,i):(o.baseState=r,[r,o.queue.dispatch])},useMemoCache:im,useCacheRefresh:q0},co=null,Gl=0;function Ju(r){var i=Gl;return Gl+=1,co===null&&(co=[]),a0(co,r,i)}function $l(r,i){i=i.props.ref,r.ref=i!==void 0?i:null}function ed(r,i){throw i.$$typeof===E?Error(a(525)):(r=Object.prototype.toString.call(i),Error(a(31,r==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":r)))}function K0(r){var i=r._init;return i(r._payload)}function Q0(r){function i(B,U){if(r){var H=B.deletions;H===null?(B.deletions=[U],B.flags|=16):H.push(U)}}function o(B,U){if(!r)return null;for(;U!==null;)i(B,U),U=U.sibling;return null}function c(B){for(var U=new Map;B!==null;)B.key!==null?U.set(B.key,B):U.set(B.index,B),B=B.sibling;return U}function h(B,U){return B=ia(B,U),B.index=0,B.sibling=null,B}function g(B,U,H){return B.index=H,r?(H=B.alternate,H!==null?(H=H.index,H<U?(B.flags|=67108866,U):H):(B.flags|=67108866,U)):(B.flags|=1048576,U)}function x(B){return r&&B.alternate===null&&(B.flags|=67108866),B}function w(B,U,H,te){return U===null||U.tag!==6?(U=Mf(H,B.mode,te),U.return=B,U):(U=h(U,H),U.return=B,U)}function D(B,U,H,te){var ge=H.type;return ge===A?J(B,U,H.props.children,te,H.key):U!==null&&(U.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===R&&K0(ge)===U.type)?(U=h(U,H.props),$l(U,H),U.return=B,U):(U=ku(H.type,H.key,H.props,null,B.mode,te),$l(U,H),U.return=B,U)}function $(B,U,H,te){return U===null||U.tag!==4||U.stateNode.containerInfo!==H.containerInfo||U.stateNode.implementation!==H.implementation?(U=kf(H,B.mode,te),U.return=B,U):(U=h(U,H.children||[]),U.return=B,U)}function J(B,U,H,te,ge){return U===null||U.tag!==7?(U=es(H,B.mode,te,ge),U.return=B,U):(U=h(U,H),U.return=B,U)}function re(B,U,H){if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return U=Mf(""+U,B.mode,H),U.return=B,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case T:return H=ku(U.type,U.key,U.props,null,B.mode,H),$l(H,U),H.return=B,H;case C:return U=kf(U,B.mode,H),U.return=B,U;case R:var te=U._init;return U=te(U._payload),re(B,U,H)}if(Me(U)||z(U))return U=es(U,B.mode,H,null),U.return=B,U;if(typeof U.then=="function")return re(B,Ju(U),H);if(U.$$typeof===q)return re(B,zu(B,U),H);ed(B,U)}return null}function Y(B,U,H,te){var ge=U!==null?U.key:null;if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return ge!==null?null:w(B,U,""+H,te);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case T:return H.key===ge?D(B,U,H,te):null;case C:return H.key===ge?$(B,U,H,te):null;case R:return ge=H._init,H=ge(H._payload),Y(B,U,H,te)}if(Me(H)||z(H))return ge!==null?null:J(B,U,H,te,null);if(typeof H.then=="function")return Y(B,U,Ju(H),te);if(H.$$typeof===q)return Y(B,U,zu(B,H),te);ed(B,H)}return null}function K(B,U,H,te,ge){if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return B=B.get(H)||null,w(U,B,""+te,ge);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case T:return B=B.get(te.key===null?H:te.key)||null,D(U,B,te,ge);case C:return B=B.get(te.key===null?H:te.key)||null,$(U,B,te,ge);case R:var Ue=te._init;return te=Ue(te._payload),K(B,U,H,te,ge)}if(Me(te)||z(te))return B=B.get(H)||null,J(U,B,te,ge,null);if(typeof te.then=="function")return K(B,U,H,Ju(te),ge);if(te.$$typeof===q)return K(B,U,H,zu(U,te),ge);ed(U,te)}return null}function Ne(B,U,H,te){for(var ge=null,Ue=null,be=U,we=U=0,Yt=null;be!==null&&we<H.length;we++){be.index>we?(Yt=be,be=null):Yt=be.sibling;var We=Y(B,be,H[we],te);if(We===null){be===null&&(be=Yt);break}r&&be&&We.alternate===null&&i(B,be),U=g(We,U,we),Ue===null?ge=We:Ue.sibling=We,Ue=We,be=Yt}if(we===H.length)return o(B,be),Xe&&ns(B,we),ge;if(be===null){for(;we<H.length;we++)be=re(B,H[we],te),be!==null&&(U=g(be,U,we),Ue===null?ge=be:Ue.sibling=be,Ue=be);return Xe&&ns(B,we),ge}for(be=c(be);we<H.length;we++)Yt=K(be,B,we,H[we],te),Yt!==null&&(r&&Yt.alternate!==null&&be.delete(Yt.key===null?we:Yt.key),U=g(Yt,U,we),Ue===null?ge=Yt:Ue.sibling=Yt,Ue=Yt);return r&&be.forEach(function(oi){return i(B,oi)}),Xe&&ns(B,we),ge}function Te(B,U,H,te){if(H==null)throw Error(a(151));for(var ge=null,Ue=null,be=U,we=U=0,Yt=null,We=H.next();be!==null&&!We.done;we++,We=H.next()){be.index>we?(Yt=be,be=null):Yt=be.sibling;var oi=Y(B,be,We.value,te);if(oi===null){be===null&&(be=Yt);break}r&&be&&oi.alternate===null&&i(B,be),U=g(oi,U,we),Ue===null?ge=oi:Ue.sibling=oi,Ue=oi,be=Yt}if(We.done)return o(B,be),Xe&&ns(B,we),ge;if(be===null){for(;!We.done;we++,We=H.next())We=re(B,We.value,te),We!==null&&(U=g(We,U,we),Ue===null?ge=We:Ue.sibling=We,Ue=We);return Xe&&ns(B,we),ge}for(be=c(be);!We.done;we++,We=H.next())We=K(be,B,we,We.value,te),We!==null&&(r&&We.alternate!==null&&be.delete(We.key===null?we:We.key),U=g(We,U,we),Ue===null?ge=We:Ue.sibling=We,Ue=We);return r&&be.forEach(function(hS){return i(B,hS)}),Xe&&ns(B,we),ge}function lt(B,U,H,te){if(typeof H=="object"&&H!==null&&H.type===A&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case T:e:{for(var ge=H.key;U!==null;){if(U.key===ge){if(ge=H.type,ge===A){if(U.tag===7){o(B,U.sibling),te=h(U,H.props.children),te.return=B,B=te;break e}}else if(U.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===R&&K0(ge)===U.type){o(B,U.sibling),te=h(U,H.props),$l(te,H),te.return=B,B=te;break e}o(B,U);break}else i(B,U);U=U.sibling}H.type===A?(te=es(H.props.children,B.mode,te,H.key),te.return=B,B=te):(te=ku(H.type,H.key,H.props,null,B.mode,te),$l(te,H),te.return=B,B=te)}return x(B);case C:e:{for(ge=H.key;U!==null;){if(U.key===ge)if(U.tag===4&&U.stateNode.containerInfo===H.containerInfo&&U.stateNode.implementation===H.implementation){o(B,U.sibling),te=h(U,H.children||[]),te.return=B,B=te;break e}else{o(B,U);break}else i(B,U);U=U.sibling}te=kf(H,B.mode,te),te.return=B,B=te}return x(B);case R:return ge=H._init,H=ge(H._payload),lt(B,U,H,te)}if(Me(H))return Ne(B,U,H,te);if(z(H)){if(ge=z(H),typeof ge!="function")throw Error(a(150));return H=ge.call(H),Te(B,U,H,te)}if(typeof H.then=="function")return lt(B,U,Ju(H),te);if(H.$$typeof===q)return lt(B,U,zu(B,H),te);ed(B,H)}return typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint"?(H=""+H,U!==null&&U.tag===6?(o(B,U.sibling),te=h(U,H),te.return=B,B=te):(o(B,U),te=Mf(H,B.mode,te),te.return=B,B=te),x(B)):o(B,U)}return function(B,U,H,te){try{Gl=0;var ge=lt(B,U,H,te);return co=null,ge}catch(be){if(be===kl||be===qu)throw be;var Ue=Mn(29,be,null,B.mode);return Ue.lanes=te,Ue.return=B,Ue}finally{}}}var uo=Q0(!0),W0=Q0(!1),Jn=ie(null),Pr=null;function $a(r){var i=r.alternate;le(Ut,Ut.current&1),le(Jn,r),Pr===null&&(i===null||io.current!==null||i.memoizedState!==null)&&(Pr=r)}function X0(r){if(r.tag===22){if(le(Ut,Ut.current),le(Jn,r),Pr===null){var i=r.alternate;i!==null&&i.memoizedState!==null&&(Pr=r)}}else Ya()}function Ya(){le(Ut,Ut.current),le(Jn,Jn.current)}function da(r){he(Jn),Pr===r&&(Pr=null),he(Ut)}var Ut=ie(0);function td(r){for(var i=r;i!==null;){if(i.tag===13){var o=i.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||ap(o)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function pm(r,i,o,c){i=r.memoizedState,o=o(c,i),o=o==null?i:v({},i,o),r.memoizedState=o,r.lanes===0&&(r.updateQueue.baseState=o)}var gm={enqueueSetState:function(r,i,o){r=r._reactInternals;var c=Un(),h=Fa(c);h.payload=i,o!=null&&(h.callback=o),i=Ha(r,h,c),i!==null&&(zn(i,r,c),Ll(i,r,c))},enqueueReplaceState:function(r,i,o){r=r._reactInternals;var c=Un(),h=Fa(c);h.tag=1,h.payload=i,o!=null&&(h.callback=o),i=Ha(r,h,c),i!==null&&(zn(i,r,c),Ll(i,r,c))},enqueueForceUpdate:function(r,i){r=r._reactInternals;var o=Un(),c=Fa(o);c.tag=2,i!=null&&(c.callback=i),i=Ha(r,c,o),i!==null&&(zn(i,r,o),Ll(i,r,o))}};function Z0(r,i,o,c,h,g,x){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(c,g,x):i.prototype&&i.prototype.isPureReactComponent?!Cl(o,c)||!Cl(h,g):!0}function J0(r,i,o,c){r=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(o,c),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(o,c),i.state!==r&&gm.enqueueReplaceState(i,i.state,null)}function cs(r,i){var o=i;if("ref"in i){o={};for(var c in i)c!=="ref"&&(o[c]=i[c])}if(r=r.defaultProps){o===i&&(o=v({},o));for(var h in r)o[h]===void 0&&(o[h]=r[h])}return o}var nd=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)};function ev(r){nd(r)}function tv(r){console.error(r)}function nv(r){nd(r)}function rd(r,i){try{var o=r.onUncaughtError;o(i.value,{componentStack:i.stack})}catch(c){setTimeout(function(){throw c})}}function rv(r,i,o){try{var c=r.onCaughtError;c(o.value,{componentStack:o.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function ym(r,i,o){return o=Fa(o),o.tag=3,o.payload={element:null},o.callback=function(){rd(r,i)},o}function av(r){return r=Fa(r),r.tag=3,r}function iv(r,i,o,c){var h=o.type.getDerivedStateFromError;if(typeof h=="function"){var g=c.value;r.payload=function(){return h(g)},r.callback=function(){rv(i,o,c)}}var x=o.stateNode;x!==null&&typeof x.componentDidCatch=="function"&&(r.callback=function(){rv(i,o,c),typeof h!="function"&&(Ja===null?Ja=new Set([this]):Ja.add(this));var w=c.stack;this.componentDidCatch(c.value,{componentStack:w!==null?w:""})})}function hA(r,i,o,c,h){if(o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(i=o.alternate,i!==null&&jl(i,o,h,!0),o=Jn.current,o!==null){switch(o.tag){case 13:return Pr===null?Bm():o.alternate===null&&wt===0&&(wt=3),o.flags&=-257,o.flags|=65536,o.lanes=h,c===$f?o.flags|=16384:(i=o.updateQueue,i===null?o.updateQueue=new Set([c]):i.add(c),Fm(r,c,h)),!1;case 22:return o.flags|=65536,c===$f?o.flags|=16384:(i=o.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([c])},o.updateQueue=i):(o=i.retryQueue,o===null?i.retryQueue=new Set([c]):o.add(c)),Fm(r,c,h)),!1}throw Error(a(435,o.tag))}return Fm(r,c,h),Bm(),!1}if(Xe)return i=Jn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=h,c!==Uf&&(r=Error(a(422),{cause:c}),Ol(Qn(r,o)))):(c!==Uf&&(i=Error(a(423),{cause:c}),Ol(Qn(i,o))),r=r.current.alternate,r.flags|=65536,h&=-h,r.lanes|=h,c=Qn(c,o),h=ym(r.stateNode,c,h),Qf(r,h),wt!==4&&(wt=2)),!1;var g=Error(a(520),{cause:c});if(g=Qn(g,o),Jl===null?Jl=[g]:Jl.push(g),wt!==4&&(wt=2),i===null)return!0;c=Qn(c,o),o=i;do{switch(o.tag){case 3:return o.flags|=65536,r=h&-h,o.lanes|=r,r=ym(o.stateNode,c,r),Qf(o,r),!1;case 1:if(i=o.type,g=o.stateNode,(o.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Ja===null||!Ja.has(g))))return o.flags|=65536,h&=-h,o.lanes|=h,h=av(h),iv(h,r,o,c),Qf(o,h),!1}o=o.return}while(o!==null);return!1}var sv=Error(a(461)),Gt=!1;function en(r,i,o,c){i.child=r===null?W0(i,null,o,c):uo(i,r.child,o,c)}function ov(r,i,o,c,h){o=o.render;var g=i.ref;if("ref"in c){var x={};for(var w in c)w!=="ref"&&(x[w]=c[w])}else x=c;return ss(i),c=em(r,i,o,x,g,h),w=tm(),r!==null&&!Gt?(nm(r,i,h),ha(r,i,h)):(Xe&&w&&Vf(i),i.flags|=1,en(r,i,c,h),i.child)}function lv(r,i,o,c,h){if(r===null){var g=o.type;return typeof g=="function"&&!Pf(g)&&g.defaultProps===void 0&&o.compare===null?(i.tag=15,i.type=g,cv(r,i,g,c,h)):(r=ku(o.type,null,c,i,i.mode,h),r.ref=i.ref,r.return=i,i.child=r)}if(g=r.child,!Am(r,h)){var x=g.memoizedProps;if(o=o.compare,o=o!==null?o:Cl,o(x,c)&&r.ref===i.ref)return ha(r,i,h)}return i.flags|=1,r=ia(g,c),r.ref=i.ref,r.return=i,i.child=r}function cv(r,i,o,c,h){if(r!==null){var g=r.memoizedProps;if(Cl(g,c)&&r.ref===i.ref)if(Gt=!1,i.pendingProps=c=g,Am(r,h))(r.flags&131072)!==0&&(Gt=!0);else return i.lanes=r.lanes,ha(r,i,h)}return vm(r,i,o,c,h)}function uv(r,i,o){var c=i.pendingProps,h=c.children,g=r!==null?r.memoizedState:null;if(c.mode==="hidden"){if((i.flags&128)!==0){if(c=g!==null?g.baseLanes|o:o,r!==null){for(h=i.child=r.child,g=0;h!==null;)g=g|h.lanes|h.childLanes,h=h.sibling;i.childLanes=g&~c}else i.childLanes=0,i.child=null;return dv(r,i,c,o)}if((o&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},r!==null&&Bu(i,g!==null?g.cachePool:null),g!==null?c0(i,g):Xf(),X0(i);else return i.lanes=i.childLanes=536870912,dv(r,i,g!==null?g.baseLanes|o:o,o)}else g!==null?(Bu(i,g.cachePool),c0(i,g),Ya(),i.memoizedState=null):(r!==null&&Bu(i,null),Xf(),Ya());return en(r,i,h,o),i.child}function dv(r,i,o,c){var h=Gf();return h=h===null?null:{parent:Lt._currentValue,pool:h},i.memoizedState={baseLanes:o,cachePool:h},r!==null&&Bu(i,null),Xf(),X0(i),r!==null&&jl(r,i,c,!0),null}function ad(r,i){var o=i.ref;if(o===null)r!==null&&r.ref!==null&&(i.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(a(284));(r===null||r.ref!==o)&&(i.flags|=4194816)}}function vm(r,i,o,c,h){return ss(i),o=em(r,i,o,c,void 0,h),c=tm(),r!==null&&!Gt?(nm(r,i,h),ha(r,i,h)):(Xe&&c&&Vf(i),i.flags|=1,en(r,i,o,h),i.child)}function hv(r,i,o,c,h,g){return ss(i),i.updateQueue=null,o=d0(i,c,o,h),u0(r),c=tm(),r!==null&&!Gt?(nm(r,i,g),ha(r,i,g)):(Xe&&c&&Vf(i),i.flags|=1,en(r,i,o,g),i.child)}function fv(r,i,o,c,h){if(ss(i),i.stateNode===null){var g=eo,x=o.contextType;typeof x=="object"&&x!==null&&(g=un(x)),g=new o(c,g),i.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=gm,i.stateNode=g,g._reactInternals=i,g=i.stateNode,g.props=c,g.state=i.memoizedState,g.refs={},Yf(i),x=o.contextType,g.context=typeof x=="object"&&x!==null?un(x):eo,g.state=i.memoizedState,x=o.getDerivedStateFromProps,typeof x=="function"&&(pm(i,o,x,c),g.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(x=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),x!==g.state&&gm.enqueueReplaceState(g,g.state,null),zl(i,c,g,h),Ul(),g.state=i.memoizedState),typeof g.componentDidMount=="function"&&(i.flags|=4194308),c=!0}else if(r===null){g=i.stateNode;var w=i.memoizedProps,D=cs(o,w);g.props=D;var $=g.context,J=o.contextType;x=eo,typeof J=="object"&&J!==null&&(x=un(J));var re=o.getDerivedStateFromProps;J=typeof re=="function"||typeof g.getSnapshotBeforeUpdate=="function",w=i.pendingProps!==w,J||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(w||$!==x)&&J0(i,g,c,x),qa=!1;var Y=i.memoizedState;g.state=Y,zl(i,c,g,h),Ul(),$=i.memoizedState,w||Y!==$||qa?(typeof re=="function"&&(pm(i,o,re,c),$=i.memoizedState),(D=qa||Z0(i,o,D,c,Y,$,x))?(J||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(i.flags|=4194308)):(typeof g.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=c,i.memoizedState=$),g.props=c,g.state=$,g.context=x,c=D):(typeof g.componentDidMount=="function"&&(i.flags|=4194308),c=!1)}else{g=i.stateNode,Kf(r,i),x=i.memoizedProps,J=cs(o,x),g.props=J,re=i.pendingProps,Y=g.context,$=o.contextType,D=eo,typeof $=="object"&&$!==null&&(D=un($)),w=o.getDerivedStateFromProps,($=typeof w=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(x!==re||Y!==D)&&J0(i,g,c,D),qa=!1,Y=i.memoizedState,g.state=Y,zl(i,c,g,h),Ul();var K=i.memoizedState;x!==re||Y!==K||qa||r!==null&&r.dependencies!==null&&Uu(r.dependencies)?(typeof w=="function"&&(pm(i,o,w,c),K=i.memoizedState),(J=qa||Z0(i,o,J,c,Y,K,D)||r!==null&&r.dependencies!==null&&Uu(r.dependencies))?($||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(c,K,D),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(c,K,D)),typeof g.componentDidUpdate=="function"&&(i.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof g.componentDidUpdate!="function"||x===r.memoizedProps&&Y===r.memoizedState||(i.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||x===r.memoizedProps&&Y===r.memoizedState||(i.flags|=1024),i.memoizedProps=c,i.memoizedState=K),g.props=c,g.state=K,g.context=D,c=J):(typeof g.componentDidUpdate!="function"||x===r.memoizedProps&&Y===r.memoizedState||(i.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||x===r.memoizedProps&&Y===r.memoizedState||(i.flags|=1024),c=!1)}return g=c,ad(r,i),c=(i.flags&128)!==0,g||c?(g=i.stateNode,o=c&&typeof o.getDerivedStateFromError!="function"?null:g.render(),i.flags|=1,r!==null&&c?(i.child=uo(i,r.child,null,h),i.child=uo(i,null,o,h)):en(r,i,o,h),i.memoizedState=g.state,r=i.child):r=ha(r,i,h),r}function mv(r,i,o,c){return Dl(),i.flags|=256,en(r,i,o,c),i.child}var _m={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function bm(r){return{baseLanes:r,cachePool:t0()}}function Em(r,i,o){return r=r!==null?r.childLanes&~o:0,i&&(r|=er),r}function pv(r,i,o){var c=i.pendingProps,h=!1,g=(i.flags&128)!==0,x;if((x=g)||(x=r!==null&&r.memoizedState===null?!1:(Ut.current&2)!==0),x&&(h=!0,i.flags&=-129),x=(i.flags&32)!==0,i.flags&=-33,r===null){if(Xe){if(h?$a(i):Ya(),Xe){var w=Tt,D;if(D=w){e:{for(D=w,w=jr;D.nodeType!==8;){if(!w){w=null;break e}if(D=hr(D.nextSibling),D===null){w=null;break e}}w=D}w!==null?(i.memoizedState={dehydrated:w,treeContext:ts!==null?{id:sa,overflow:oa}:null,retryLane:536870912,hydrationErrors:null},D=Mn(18,null,null,0),D.stateNode=w,D.return=i,i.child=D,bn=i,Tt=null,D=!0):D=!1}D||as(i)}if(w=i.memoizedState,w!==null&&(w=w.dehydrated,w!==null))return ap(w)?i.lanes=32:i.lanes=536870912,null;da(i)}return w=c.children,c=c.fallback,h?(Ya(),h=i.mode,w=id({mode:"hidden",children:w},h),c=es(c,h,o,null),w.return=i,c.return=i,w.sibling=c,i.child=w,h=i.child,h.memoizedState=bm(o),h.childLanes=Em(r,x,o),i.memoizedState=_m,c):($a(i),xm(i,w))}if(D=r.memoizedState,D!==null&&(w=D.dehydrated,w!==null)){if(g)i.flags&256?($a(i),i.flags&=-257,i=Tm(r,i,o)):i.memoizedState!==null?(Ya(),i.child=r.child,i.flags|=128,i=null):(Ya(),h=c.fallback,w=i.mode,c=id({mode:"visible",children:c.children},w),h=es(h,w,o,null),h.flags|=2,c.return=i,h.return=i,c.sibling=h,i.child=c,uo(i,r.child,null,o),c=i.child,c.memoizedState=bm(o),c.childLanes=Em(r,x,o),i.memoizedState=_m,i=h);else if($a(i),ap(w)){if(x=w.nextSibling&&w.nextSibling.dataset,x)var $=x.dgst;x=$,c=Error(a(419)),c.stack="",c.digest=x,Ol({value:c,source:null,stack:null}),i=Tm(r,i,o)}else if(Gt||jl(r,i,o,!1),x=(o&r.childLanes)!==0,Gt||x){if(x=ht,x!==null&&(c=o&-o,c=(c&42)!==0?1:Pa(c),c=(c&(x.suspendedLanes|o))!==0?0:c,c!==0&&c!==D.retryLane))throw D.retryLane=c,Js(r,c),zn(x,r,c),sv;w.data==="$?"||Bm(),i=Tm(r,i,o)}else w.data==="$?"?(i.flags|=192,i.child=r.child,i=null):(r=D.treeContext,Tt=hr(w.nextSibling),bn=i,Xe=!0,rs=null,jr=!1,r!==null&&(Xn[Zn++]=sa,Xn[Zn++]=oa,Xn[Zn++]=ts,sa=r.id,oa=r.overflow,ts=i),i=xm(i,c.children),i.flags|=4096);return i}return h?(Ya(),h=c.fallback,w=i.mode,D=r.child,$=D.sibling,c=ia(D,{mode:"hidden",children:c.children}),c.subtreeFlags=D.subtreeFlags&65011712,$!==null?h=ia($,h):(h=es(h,w,o,null),h.flags|=2),h.return=i,c.return=i,c.sibling=h,i.child=c,c=h,h=i.child,w=r.child.memoizedState,w===null?w=bm(o):(D=w.cachePool,D!==null?($=Lt._currentValue,D=D.parent!==$?{parent:$,pool:$}:D):D=t0(),w={baseLanes:w.baseLanes|o,cachePool:D}),h.memoizedState=w,h.childLanes=Em(r,x,o),i.memoizedState=_m,c):($a(i),o=r.child,r=o.sibling,o=ia(o,{mode:"visible",children:c.children}),o.return=i,o.sibling=null,r!==null&&(x=i.deletions,x===null?(i.deletions=[r],i.flags|=16):x.push(r)),i.child=o,i.memoizedState=null,o)}function xm(r,i){return i=id({mode:"visible",children:i},r.mode),i.return=r,r.child=i}function id(r,i){return r=Mn(22,r,null,i),r.lanes=0,r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},r}function Tm(r,i,o){return uo(i,r.child,null,o),r=xm(i,i.pendingProps.children),r.flags|=2,i.memoizedState=null,r}function gv(r,i,o){r.lanes|=i;var c=r.alternate;c!==null&&(c.lanes|=i),Bf(r.return,i,o)}function wm(r,i,o,c,h){var g=r.memoizedState;g===null?r.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:c,tail:o,tailMode:h}:(g.isBackwards=i,g.rendering=null,g.renderingStartTime=0,g.last=c,g.tail=o,g.tailMode=h)}function yv(r,i,o){var c=i.pendingProps,h=c.revealOrder,g=c.tail;if(en(r,i,c.children,o),c=Ut.current,(c&2)!==0)c=c&1|2,i.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=i.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&gv(r,o,i);else if(r.tag===19)gv(r,o,i);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}c&=1}switch(le(Ut,c),h){case"forwards":for(o=i.child,h=null;o!==null;)r=o.alternate,r!==null&&td(r)===null&&(h=o),o=o.sibling;o=h,o===null?(h=i.child,i.child=null):(h=o.sibling,o.sibling=null),wm(i,!1,h,o,g);break;case"backwards":for(o=null,h=i.child,i.child=null;h!==null;){if(r=h.alternate,r!==null&&td(r)===null){i.child=h;break}r=h.sibling,h.sibling=o,o=h,h=r}wm(i,!0,o,null,g);break;case"together":wm(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function ha(r,i,o){if(r!==null&&(i.dependencies=r.dependencies),Za|=i.lanes,(o&i.childLanes)===0)if(r!==null){if(jl(r,i,o,!1),(o&i.childLanes)===0)return null}else return null;if(r!==null&&i.child!==r.child)throw Error(a(153));if(i.child!==null){for(r=i.child,o=ia(r,r.pendingProps),i.child=o,o.return=i;r.sibling!==null;)r=r.sibling,o=o.sibling=ia(r,r.pendingProps),o.return=i;o.sibling=null}return i.child}function Am(r,i){return(r.lanes&i)!==0?!0:(r=r.dependencies,!!(r!==null&&Uu(r)))}function fA(r,i,o){switch(i.tag){case 3:se(i,i.stateNode.containerInfo),Ba(i,Lt,r.memoizedState.cache),Dl();break;case 27:case 5:xe(i);break;case 4:se(i,i.stateNode.containerInfo);break;case 10:Ba(i,i.type,i.memoizedProps.value);break;case 13:var c=i.memoizedState;if(c!==null)return c.dehydrated!==null?($a(i),i.flags|=128,null):(o&i.child.childLanes)!==0?pv(r,i,o):($a(i),r=ha(r,i,o),r!==null?r.sibling:null);$a(i);break;case 19:var h=(r.flags&128)!==0;if(c=(o&i.childLanes)!==0,c||(jl(r,i,o,!1),c=(o&i.childLanes)!==0),h){if(c)return yv(r,i,o);i.flags|=128}if(h=i.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),le(Ut,Ut.current),c)break;return null;case 22:case 23:return i.lanes=0,uv(r,i,o);case 24:Ba(i,Lt,r.memoizedState.cache)}return ha(r,i,o)}function vv(r,i,o){if(r!==null)if(r.memoizedProps!==i.pendingProps)Gt=!0;else{if(!Am(r,o)&&(i.flags&128)===0)return Gt=!1,fA(r,i,o);Gt=(r.flags&131072)!==0}else Gt=!1,Xe&&(i.flags&1048576)!==0&&Ky(i,Lu,i.index);switch(i.lanes=0,i.tag){case 16:e:{r=i.pendingProps;var c=i.elementType,h=c._init;if(c=h(c._payload),i.type=c,typeof c=="function")Pf(c)?(r=cs(c,r),i.tag=1,i=fv(null,i,c,r,o)):(i.tag=0,i=vm(null,i,c,r,o));else{if(c!=null){if(h=c.$$typeof,h===oe){i.tag=11,i=ov(null,i,c,r,o);break e}else if(h===P){i.tag=14,i=lv(null,i,c,r,o);break e}}throw i=dt(c)||c,Error(a(306,i,""))}}return i;case 0:return vm(r,i,i.type,i.pendingProps,o);case 1:return c=i.type,h=cs(c,i.pendingProps),fv(r,i,c,h,o);case 3:e:{if(se(i,i.stateNode.containerInfo),r===null)throw Error(a(387));c=i.pendingProps;var g=i.memoizedState;h=g.element,Kf(r,i),zl(i,c,null,o);var x=i.memoizedState;if(c=x.cache,Ba(i,Lt,c),c!==g.cache&&qf(i,[Lt],o,!0),Ul(),c=x.element,g.isDehydrated)if(g={element:c,isDehydrated:!1,cache:x.cache},i.updateQueue.baseState=g,i.memoizedState=g,i.flags&256){i=mv(r,i,c,o);break e}else if(c!==h){h=Qn(Error(a(424)),i),Ol(h),i=mv(r,i,c,o);break e}else{switch(r=i.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(Tt=hr(r.firstChild),bn=i,Xe=!0,rs=null,jr=!0,o=W0(i,null,c,o),i.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(Dl(),c===h){i=ha(r,i,o);break e}en(r,i,c,o)}i=i.child}return i;case 26:return ad(r,i),r===null?(o=x_(i.type,null,i.pendingProps,null))?i.memoizedState=o:Xe||(o=i.type,r=i.pendingProps,c=_d(ee.current).createElement(o),c[Mt]=i,c[Rt]=r,nn(c,o,r),At(c),i.stateNode=c):i.memoizedState=x_(i.type,r.memoizedProps,i.pendingProps,r.memoizedState),null;case 27:return xe(i),r===null&&Xe&&(c=i.stateNode=__(i.type,i.pendingProps,ee.current),bn=i,jr=!0,h=Tt,ni(i.type)?(ip=h,Tt=hr(c.firstChild)):Tt=h),en(r,i,i.pendingProps.children,o),ad(r,i),r===null&&(i.flags|=4194304),i.child;case 5:return r===null&&Xe&&((h=c=Tt)&&(c=BA(c,i.type,i.pendingProps,jr),c!==null?(i.stateNode=c,bn=i,Tt=hr(c.firstChild),jr=!1,h=!0):h=!1),h||as(i)),xe(i),h=i.type,g=i.pendingProps,x=r!==null?r.memoizedProps:null,c=g.children,tp(h,g)?c=null:x!==null&&tp(h,x)&&(i.flags|=32),i.memoizedState!==null&&(h=em(r,i,iA,null,null,o),lc._currentValue=h),ad(r,i),en(r,i,c,o),i.child;case 6:return r===null&&Xe&&((r=o=Tt)&&(o=qA(o,i.pendingProps,jr),o!==null?(i.stateNode=o,bn=i,Tt=null,r=!0):r=!1),r||as(i)),null;case 13:return pv(r,i,o);case 4:return se(i,i.stateNode.containerInfo),c=i.pendingProps,r===null?i.child=uo(i,null,c,o):en(r,i,c,o),i.child;case 11:return ov(r,i,i.type,i.pendingProps,o);case 7:return en(r,i,i.pendingProps,o),i.child;case 8:return en(r,i,i.pendingProps.children,o),i.child;case 12:return en(r,i,i.pendingProps.children,o),i.child;case 10:return c=i.pendingProps,Ba(i,i.type,c.value),en(r,i,c.children,o),i.child;case 9:return h=i.type._context,c=i.pendingProps.children,ss(i),h=un(h),c=c(h),i.flags|=1,en(r,i,c,o),i.child;case 14:return lv(r,i,i.type,i.pendingProps,o);case 15:return cv(r,i,i.type,i.pendingProps,o);case 19:return yv(r,i,o);case 31:return c=i.pendingProps,o=i.mode,c={mode:c.mode,children:c.children},r===null?(o=id(c,o),o.ref=i.ref,i.child=o,o.return=i,i=o):(o=ia(r.child,c),o.ref=i.ref,i.child=o,o.return=i,i=o),i;case 22:return uv(r,i,o);case 24:return ss(i),c=un(Lt),r===null?(h=Gf(),h===null&&(h=ht,g=Ff(),h.pooledCache=g,g.refCount++,g!==null&&(h.pooledCacheLanes|=o),h=g),i.memoizedState={parent:c,cache:h},Yf(i),Ba(i,Lt,h)):((r.lanes&o)!==0&&(Kf(r,i),zl(i,null,null,o),Ul()),h=r.memoizedState,g=i.memoizedState,h.parent!==c?(h={parent:c,cache:c},i.memoizedState=h,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=h),Ba(i,Lt,c)):(c=g.cache,Ba(i,Lt,c),c!==h.cache&&qf(i,[Lt],o,!0))),en(r,i,i.pendingProps.children,o),i.child;case 29:throw i.pendingProps}throw Error(a(156,i.tag))}function fa(r){r.flags|=4}function _v(r,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!N_(i)){if(i=Jn.current,i!==null&&((Ke&4194048)===Ke?Pr!==null:(Ke&62914560)!==Ke&&(Ke&536870912)===0||i!==Pr))throw Vl=$f,n0;r.flags|=8192}}function sd(r,i){i!==null&&(r.flags|=4),r.flags&16384&&(i=r.tag!==22?ul():536870912,r.lanes|=i,po|=i)}function Yl(r,i){if(!Xe)switch(r.tailMode){case"hidden":i=r.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?r.tail=null:o.sibling=null;break;case"collapsed":o=r.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?i||r.tail===null?r.tail=null:r.tail.sibling=null:c.sibling=null}}function bt(r){var i=r.alternate!==null&&r.alternate.child===r.child,o=0,c=0;if(i)for(var h=r.child;h!==null;)o|=h.lanes|h.childLanes,c|=h.subtreeFlags&65011712,c|=h.flags&65011712,h.return=r,h=h.sibling;else for(h=r.child;h!==null;)o|=h.lanes|h.childLanes,c|=h.subtreeFlags,c|=h.flags,h.return=r,h=h.sibling;return r.subtreeFlags|=c,r.childLanes=o,i}function mA(r,i,o){var c=i.pendingProps;switch(Lf(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bt(i),null;case 1:return bt(i),null;case 3:return o=i.stateNode,c=null,r!==null&&(c=r.memoizedState.cache),i.memoizedState.cache!==c&&(i.flags|=2048),ca(Lt),at(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(r===null||r.child===null)&&(Il(i)?fa(i):r===null||r.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Xy())),bt(i),null;case 26:return o=i.memoizedState,r===null?(fa(i),o!==null?(bt(i),_v(i,o)):(bt(i),i.flags&=-16777217)):o?o!==r.memoizedState?(fa(i),bt(i),_v(i,o)):(bt(i),i.flags&=-16777217):(r.memoizedProps!==c&&fa(i),bt(i),i.flags&=-16777217),null;case 27:Le(i),o=ee.current;var h=i.type;if(r!==null&&i.stateNode!=null)r.memoizedProps!==c&&fa(i);else{if(!c){if(i.stateNode===null)throw Error(a(166));return bt(i),null}r=_e.current,Il(i)?Qy(i):(r=__(h,c,o),i.stateNode=r,fa(i))}return bt(i),null;case 5:if(Le(i),o=i.type,r!==null&&i.stateNode!=null)r.memoizedProps!==c&&fa(i);else{if(!c){if(i.stateNode===null)throw Error(a(166));return bt(i),null}if(r=_e.current,Il(i))Qy(i);else{switch(h=_d(ee.current),r){case 1:r=h.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:r=h.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":r=h.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":r=h.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":r=h.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof c.is=="string"?h.createElement("select",{is:c.is}):h.createElement("select"),c.multiple?r.multiple=!0:c.size&&(r.size=c.size);break;default:r=typeof c.is=="string"?h.createElement(o,{is:c.is}):h.createElement(o)}}r[Mt]=i,r[Rt]=c;e:for(h=i.child;h!==null;){if(h.tag===5||h.tag===6)r.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===i)break e;for(;h.sibling===null;){if(h.return===null||h.return===i)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}i.stateNode=r;e:switch(nn(r,o,c),o){case"button":case"input":case"select":case"textarea":r=!!c.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&fa(i)}}return bt(i),i.flags&=-16777217,null;case 6:if(r&&i.stateNode!=null)r.memoizedProps!==c&&fa(i);else{if(typeof c!="string"&&i.stateNode===null)throw Error(a(166));if(r=ee.current,Il(i)){if(r=i.stateNode,o=i.memoizedProps,c=null,h=bn,h!==null)switch(h.tag){case 27:case 5:c=h.memoizedProps}r[Mt]=i,r=!!(r.nodeValue===o||c!==null&&c.suppressHydrationWarning===!0||h_(r.nodeValue,o)),r||as(i)}else r=_d(r).createTextNode(c),r[Mt]=i,i.stateNode=r}return bt(i),null;case 13:if(c=i.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(h=Il(i),c!==null&&c.dehydrated!==null){if(r===null){if(!h)throw Error(a(318));if(h=i.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(a(317));h[Mt]=i}else Dl(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;bt(i),h=!1}else h=Xy(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=h),h=!0;if(!h)return i.flags&256?(da(i),i):(da(i),null)}if(da(i),(i.flags&128)!==0)return i.lanes=o,i;if(o=c!==null,r=r!==null&&r.memoizedState!==null,o){c=i.child,h=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(h=c.alternate.memoizedState.cachePool.pool);var g=null;c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(g=c.memoizedState.cachePool.pool),g!==h&&(c.flags|=2048)}return o!==r&&o&&(i.child.flags|=8192),sd(i,i.updateQueue),bt(i),null;case 4:return at(),r===null&&Wm(i.stateNode.containerInfo),bt(i),null;case 10:return ca(i.type),bt(i),null;case 19:if(he(Ut),h=i.memoizedState,h===null)return bt(i),null;if(c=(i.flags&128)!==0,g=h.rendering,g===null)if(c)Yl(h,!1);else{if(wt!==0||r!==null&&(r.flags&128)!==0)for(r=i.child;r!==null;){if(g=td(r),g!==null){for(i.flags|=128,Yl(h,!1),r=g.updateQueue,i.updateQueue=r,sd(i,r),i.subtreeFlags=0,r=o,o=i.child;o!==null;)Yy(o,r),o=o.sibling;return le(Ut,Ut.current&1|2),i.child}r=r.sibling}h.tail!==null&&Fn()>cd&&(i.flags|=128,c=!0,Yl(h,!1),i.lanes=4194304)}else{if(!c)if(r=td(g),r!==null){if(i.flags|=128,c=!0,r=r.updateQueue,i.updateQueue=r,sd(i,r),Yl(h,!0),h.tail===null&&h.tailMode==="hidden"&&!g.alternate&&!Xe)return bt(i),null}else 2*Fn()-h.renderingStartTime>cd&&o!==536870912&&(i.flags|=128,c=!0,Yl(h,!1),i.lanes=4194304);h.isBackwards?(g.sibling=i.child,i.child=g):(r=h.last,r!==null?r.sibling=g:i.child=g,h.last=g)}return h.tail!==null?(i=h.tail,h.rendering=i,h.tail=i.sibling,h.renderingStartTime=Fn(),i.sibling=null,r=Ut.current,le(Ut,c?r&1|2:r&1),i):(bt(i),null);case 22:case 23:return da(i),Zf(),c=i.memoizedState!==null,r!==null?r.memoizedState!==null!==c&&(i.flags|=8192):c&&(i.flags|=8192),c?(o&536870912)!==0&&(i.flags&128)===0&&(bt(i),i.subtreeFlags&6&&(i.flags|=8192)):bt(i),o=i.updateQueue,o!==null&&sd(i,o.retryQueue),o=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),c=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),c!==o&&(i.flags|=2048),r!==null&&he(os),null;case 24:return o=null,r!==null&&(o=r.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),ca(Lt),bt(i),null;case 25:return null;case 30:return null}throw Error(a(156,i.tag))}function pA(r,i){switch(Lf(i),i.tag){case 1:return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 3:return ca(Lt),at(),r=i.flags,(r&65536)!==0&&(r&128)===0?(i.flags=r&-65537|128,i):null;case 26:case 27:case 5:return Le(i),null;case 13:if(da(i),r=i.memoizedState,r!==null&&r.dehydrated!==null){if(i.alternate===null)throw Error(a(340));Dl()}return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 19:return he(Ut),null;case 4:return at(),null;case 10:return ca(i.type),null;case 22:case 23:return da(i),Zf(),r!==null&&he(os),r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 24:return ca(Lt),null;case 25:return null;default:return null}}function bv(r,i){switch(Lf(i),i.tag){case 3:ca(Lt),at();break;case 26:case 27:case 5:Le(i);break;case 4:at();break;case 13:da(i);break;case 19:he(Ut);break;case 10:ca(i.type);break;case 22:case 23:da(i),Zf(),r!==null&&he(os);break;case 24:ca(Lt)}}function Kl(r,i){try{var o=i.updateQueue,c=o!==null?o.lastEffect:null;if(c!==null){var h=c.next;o=h;do{if((o.tag&r)===r){c=void 0;var g=o.create,x=o.inst;c=g(),x.destroy=c}o=o.next}while(o!==h)}}catch(w){ct(i,i.return,w)}}function Ka(r,i,o){try{var c=i.updateQueue,h=c!==null?c.lastEffect:null;if(h!==null){var g=h.next;c=g;do{if((c.tag&r)===r){var x=c.inst,w=x.destroy;if(w!==void 0){x.destroy=void 0,h=i;var D=o,$=w;try{$()}catch(J){ct(h,D,J)}}}c=c.next}while(c!==g)}}catch(J){ct(i,i.return,J)}}function Ev(r){var i=r.updateQueue;if(i!==null){var o=r.stateNode;try{l0(i,o)}catch(c){ct(r,r.return,c)}}}function xv(r,i,o){o.props=cs(r.type,r.memoizedProps),o.state=r.memoizedState;try{o.componentWillUnmount()}catch(c){ct(r,i,c)}}function Ql(r,i){try{var o=r.ref;if(o!==null){switch(r.tag){case 26:case 27:case 5:var c=r.stateNode;break;case 30:c=r.stateNode;break;default:c=r.stateNode}typeof o=="function"?r.refCleanup=o(c):o.current=c}}catch(h){ct(r,i,h)}}function Mr(r,i){var o=r.ref,c=r.refCleanup;if(o!==null)if(typeof c=="function")try{c()}catch(h){ct(r,i,h)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(h){ct(r,i,h)}else o.current=null}function Tv(r){var i=r.type,o=r.memoizedProps,c=r.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":o.autoFocus&&c.focus();break e;case"img":o.src?c.src=o.src:o.srcSet&&(c.srcset=o.srcSet)}}catch(h){ct(r,r.return,h)}}function Sm(r,i,o){try{var c=r.stateNode;kA(c,r.type,o,i),c[Rt]=i}catch(h){ct(r,r.return,h)}}function wv(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&ni(r.type)||r.tag===4}function Nm(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||wv(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&ni(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Cm(r,i,o){var c=r.tag;if(c===5||c===6)r=r.stateNode,i?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(r,i):(i=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,i.appendChild(r),o=o._reactRootContainer,o!=null||i.onclick!==null||(i.onclick=vd));else if(c!==4&&(c===27&&ni(r.type)&&(o=r.stateNode,i=null),r=r.child,r!==null))for(Cm(r,i,o),r=r.sibling;r!==null;)Cm(r,i,o),r=r.sibling}function od(r,i,o){var c=r.tag;if(c===5||c===6)r=r.stateNode,i?o.insertBefore(r,i):o.appendChild(r);else if(c!==4&&(c===27&&ni(r.type)&&(o=r.stateNode),r=r.child,r!==null))for(od(r,i,o),r=r.sibling;r!==null;)od(r,i,o),r=r.sibling}function Av(r){var i=r.stateNode,o=r.memoizedProps;try{for(var c=r.type,h=i.attributes;h.length;)i.removeAttributeNode(h[0]);nn(i,c,o),i[Mt]=r,i[Rt]=o}catch(g){ct(r,r.return,g)}}var ma=!1,Nt=!1,Rm=!1,Sv=typeof WeakSet=="function"?WeakSet:Set,$t=null;function gA(r,i){if(r=r.containerInfo,Jm=Ad,r=Vy(r),Nf(r)){if("selectionStart"in r)var o={start:r.selectionStart,end:r.selectionEnd};else e:{o=(o=r.ownerDocument)&&o.defaultView||window;var c=o.getSelection&&o.getSelection();if(c&&c.rangeCount!==0){o=c.anchorNode;var h=c.anchorOffset,g=c.focusNode;c=c.focusOffset;try{o.nodeType,g.nodeType}catch{o=null;break e}var x=0,w=-1,D=-1,$=0,J=0,re=r,Y=null;t:for(;;){for(var K;re!==o||h!==0&&re.nodeType!==3||(w=x+h),re!==g||c!==0&&re.nodeType!==3||(D=x+c),re.nodeType===3&&(x+=re.nodeValue.length),(K=re.firstChild)!==null;)Y=re,re=K;for(;;){if(re===r)break t;if(Y===o&&++$===h&&(w=x),Y===g&&++J===c&&(D=x),(K=re.nextSibling)!==null)break;re=Y,Y=re.parentNode}re=K}o=w===-1||D===-1?null:{start:w,end:D}}else o=null}o=o||{start:0,end:0}}else o=null;for(ep={focusedElem:r,selectionRange:o},Ad=!1,$t=i;$t!==null;)if(i=$t,r=i.child,(i.subtreeFlags&1024)!==0&&r!==null)r.return=i,$t=r;else for(;$t!==null;){switch(i=$t,g=i.alternate,r=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((r&1024)!==0&&g!==null){r=void 0,o=i,h=g.memoizedProps,g=g.memoizedState,c=o.stateNode;try{var Ne=cs(o.type,h,o.elementType===o.type);r=c.getSnapshotBeforeUpdate(Ne,g),c.__reactInternalSnapshotBeforeUpdate=r}catch(Te){ct(o,o.return,Te)}}break;case 3:if((r&1024)!==0){if(r=i.stateNode.containerInfo,o=r.nodeType,o===9)rp(r);else if(o===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":rp(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(a(163))}if(r=i.sibling,r!==null){r.return=i.return,$t=r;break}$t=i.return}}function Nv(r,i,o){var c=o.flags;switch(o.tag){case 0:case 11:case 15:Qa(r,o),c&4&&Kl(5,o);break;case 1:if(Qa(r,o),c&4)if(r=o.stateNode,i===null)try{r.componentDidMount()}catch(x){ct(o,o.return,x)}else{var h=cs(o.type,i.memoizedProps);i=i.memoizedState;try{r.componentDidUpdate(h,i,r.__reactInternalSnapshotBeforeUpdate)}catch(x){ct(o,o.return,x)}}c&64&&Ev(o),c&512&&Ql(o,o.return);break;case 3:if(Qa(r,o),c&64&&(r=o.updateQueue,r!==null)){if(i=null,o.child!==null)switch(o.child.tag){case 27:case 5:i=o.child.stateNode;break;case 1:i=o.child.stateNode}try{l0(r,i)}catch(x){ct(o,o.return,x)}}break;case 27:i===null&&c&4&&Av(o);case 26:case 5:Qa(r,o),i===null&&c&4&&Tv(o),c&512&&Ql(o,o.return);break;case 12:Qa(r,o);break;case 13:Qa(r,o),c&4&&Iv(r,o),c&64&&(r=o.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(o=AA.bind(null,o),FA(r,o))));break;case 22:if(c=o.memoizedState!==null||ma,!c){i=i!==null&&i.memoizedState!==null||Nt,h=ma;var g=Nt;ma=c,(Nt=i)&&!g?Wa(r,o,(o.subtreeFlags&8772)!==0):Qa(r,o),ma=h,Nt=g}break;case 30:break;default:Qa(r,o)}}function Cv(r){var i=r.alternate;i!==null&&(r.alternate=null,Cv(i)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(i=r.stateNode,i!==null&&Va(i)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var gt=null,An=!1;function pa(r,i,o){for(o=o.child;o!==null;)Rv(r,i,o),o=o.sibling}function Rv(r,i,o){if(et&&typeof et.onCommitFiberUnmount=="function")try{et.onCommitFiberUnmount(xt,o)}catch{}switch(o.tag){case 26:Nt||Mr(o,i),pa(r,i,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:Nt||Mr(o,i);var c=gt,h=An;ni(o.type)&&(gt=o.stateNode,An=!1),pa(r,i,o),ac(o.stateNode),gt=c,An=h;break;case 5:Nt||Mr(o,i);case 6:if(c=gt,h=An,gt=null,pa(r,i,o),gt=c,An=h,gt!==null)if(An)try{(gt.nodeType===9?gt.body:gt.nodeName==="HTML"?gt.ownerDocument.body:gt).removeChild(o.stateNode)}catch(g){ct(o,i,g)}else try{gt.removeChild(o.stateNode)}catch(g){ct(o,i,g)}break;case 18:gt!==null&&(An?(r=gt,y_(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,o.stateNode),hc(r)):y_(gt,o.stateNode));break;case 4:c=gt,h=An,gt=o.stateNode.containerInfo,An=!0,pa(r,i,o),gt=c,An=h;break;case 0:case 11:case 14:case 15:Nt||Ka(2,o,i),Nt||Ka(4,o,i),pa(r,i,o);break;case 1:Nt||(Mr(o,i),c=o.stateNode,typeof c.componentWillUnmount=="function"&&xv(o,i,c)),pa(r,i,o);break;case 21:pa(r,i,o);break;case 22:Nt=(c=Nt)||o.memoizedState!==null,pa(r,i,o),Nt=c;break;default:pa(r,i,o)}}function Iv(r,i){if(i.memoizedState===null&&(r=i.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{hc(r)}catch(o){ct(i,i.return,o)}}function yA(r){switch(r.tag){case 13:case 19:var i=r.stateNode;return i===null&&(i=r.stateNode=new Sv),i;case 22:return r=r.stateNode,i=r._retryCache,i===null&&(i=r._retryCache=new Sv),i;default:throw Error(a(435,r.tag))}}function Im(r,i){var o=yA(r);i.forEach(function(c){var h=SA.bind(null,r,c);o.has(c)||(o.add(c),c.then(h,h))})}function kn(r,i){var o=i.deletions;if(o!==null)for(var c=0;c<o.length;c++){var h=o[c],g=r,x=i,w=x;e:for(;w!==null;){switch(w.tag){case 27:if(ni(w.type)){gt=w.stateNode,An=!1;break e}break;case 5:gt=w.stateNode,An=!1;break e;case 3:case 4:gt=w.stateNode.containerInfo,An=!0;break e}w=w.return}if(gt===null)throw Error(a(160));Rv(g,x,h),gt=null,An=!1,g=h.alternate,g!==null&&(g.return=null),h.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)Dv(i,r),i=i.sibling}var dr=null;function Dv(r,i){var o=r.alternate,c=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:kn(i,r),Vn(r),c&4&&(Ka(3,r,r.return),Kl(3,r),Ka(5,r,r.return));break;case 1:kn(i,r),Vn(r),c&512&&(Nt||o===null||Mr(o,o.return)),c&64&&ma&&(r=r.updateQueue,r!==null&&(c=r.callbacks,c!==null&&(o=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=o===null?c:o.concat(c))));break;case 26:var h=dr;if(kn(i,r),Vn(r),c&512&&(Nt||o===null||Mr(o,o.return)),c&4){var g=o!==null?o.memoizedState:null;if(c=r.memoizedState,o===null)if(c===null)if(r.stateNode===null){e:{c=r.type,o=r.memoizedProps,h=h.ownerDocument||h;t:switch(c){case"title":g=h.getElementsByTagName("title")[0],(!g||g[Li]||g[Mt]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=h.createElement(c),h.head.insertBefore(g,h.querySelector("head > title"))),nn(g,c,o),g[Mt]=r,At(g),c=g;break e;case"link":var x=A_("link","href",h).get(c+(o.href||""));if(x){for(var w=0;w<x.length;w++)if(g=x[w],g.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&g.getAttribute("rel")===(o.rel==null?null:o.rel)&&g.getAttribute("title")===(o.title==null?null:o.title)&&g.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){x.splice(w,1);break t}}g=h.createElement(c),nn(g,c,o),h.head.appendChild(g);break;case"meta":if(x=A_("meta","content",h).get(c+(o.content||""))){for(w=0;w<x.length;w++)if(g=x[w],g.getAttribute("content")===(o.content==null?null:""+o.content)&&g.getAttribute("name")===(o.name==null?null:o.name)&&g.getAttribute("property")===(o.property==null?null:o.property)&&g.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&g.getAttribute("charset")===(o.charSet==null?null:o.charSet)){x.splice(w,1);break t}}g=h.createElement(c),nn(g,c,o),h.head.appendChild(g);break;default:throw Error(a(468,c))}g[Mt]=r,At(g),c=g}r.stateNode=c}else S_(h,r.type,r.stateNode);else r.stateNode=w_(h,c,r.memoizedProps);else g!==c?(g===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):g.count--,c===null?S_(h,r.type,r.stateNode):w_(h,c,r.memoizedProps)):c===null&&r.stateNode!==null&&Sm(r,r.memoizedProps,o.memoizedProps)}break;case 27:kn(i,r),Vn(r),c&512&&(Nt||o===null||Mr(o,o.return)),o!==null&&c&4&&Sm(r,r.memoizedProps,o.memoizedProps);break;case 5:if(kn(i,r),Vn(r),c&512&&(Nt||o===null||Mr(o,o.return)),r.flags&32){h=r.stateNode;try{Gn(h,"")}catch(K){ct(r,r.return,K)}}c&4&&r.stateNode!=null&&(h=r.memoizedProps,Sm(r,h,o!==null?o.memoizedProps:h)),c&1024&&(Rm=!0);break;case 6:if(kn(i,r),Vn(r),c&4){if(r.stateNode===null)throw Error(a(162));c=r.memoizedProps,o=r.stateNode;try{o.nodeValue=c}catch(K){ct(r,r.return,K)}}break;case 3:if(xd=null,h=dr,dr=bd(i.containerInfo),kn(i,r),dr=h,Vn(r),c&4&&o!==null&&o.memoizedState.isDehydrated)try{hc(i.containerInfo)}catch(K){ct(r,r.return,K)}Rm&&(Rm=!1,Ov(r));break;case 4:c=dr,dr=bd(r.stateNode.containerInfo),kn(i,r),Vn(r),dr=c;break;case 12:kn(i,r),Vn(r);break;case 13:kn(i,r),Vn(r),r.child.flags&8192&&r.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(km=Fn()),c&4&&(c=r.updateQueue,c!==null&&(r.updateQueue=null,Im(r,c)));break;case 22:h=r.memoizedState!==null;var D=o!==null&&o.memoizedState!==null,$=ma,J=Nt;if(ma=$||h,Nt=J||D,kn(i,r),Nt=J,ma=$,Vn(r),c&8192)e:for(i=r.stateNode,i._visibility=h?i._visibility&-2:i._visibility|1,h&&(o===null||D||ma||Nt||us(r)),o=null,i=r;;){if(i.tag===5||i.tag===26){if(o===null){D=o=i;try{if(g=D.stateNode,h)x=g.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none";else{w=D.stateNode;var re=D.memoizedProps.style,Y=re!=null&&re.hasOwnProperty("display")?re.display:null;w.style.display=Y==null||typeof Y=="boolean"?"":(""+Y).trim()}}catch(K){ct(D,D.return,K)}}}else if(i.tag===6){if(o===null){D=i;try{D.stateNode.nodeValue=h?"":D.memoizedProps}catch(K){ct(D,D.return,K)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===r)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break e;for(;i.sibling===null;){if(i.return===null||i.return===r)break e;o===i&&(o=null),i=i.return}o===i&&(o=null),i.sibling.return=i.return,i=i.sibling}c&4&&(c=r.updateQueue,c!==null&&(o=c.retryQueue,o!==null&&(c.retryQueue=null,Im(r,o))));break;case 19:kn(i,r),Vn(r),c&4&&(c=r.updateQueue,c!==null&&(r.updateQueue=null,Im(r,c)));break;case 30:break;case 21:break;default:kn(i,r),Vn(r)}}function Vn(r){var i=r.flags;if(i&2){try{for(var o,c=r.return;c!==null;){if(wv(c)){o=c;break}c=c.return}if(o==null)throw Error(a(160));switch(o.tag){case 27:var h=o.stateNode,g=Nm(r);od(r,g,h);break;case 5:var x=o.stateNode;o.flags&32&&(Gn(x,""),o.flags&=-33);var w=Nm(r);od(r,w,x);break;case 3:case 4:var D=o.stateNode.containerInfo,$=Nm(r);Cm(r,$,D);break;default:throw Error(a(161))}}catch(J){ct(r,r.return,J)}r.flags&=-3}i&4096&&(r.flags&=-4097)}function Ov(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var i=r;Ov(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),r=r.sibling}}function Qa(r,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)Nv(r,i.alternate,i),i=i.sibling}function us(r){for(r=r.child;r!==null;){var i=r;switch(i.tag){case 0:case 11:case 14:case 15:Ka(4,i,i.return),us(i);break;case 1:Mr(i,i.return);var o=i.stateNode;typeof o.componentWillUnmount=="function"&&xv(i,i.return,o),us(i);break;case 27:ac(i.stateNode);case 26:case 5:Mr(i,i.return),us(i);break;case 22:i.memoizedState===null&&us(i);break;case 30:us(i);break;default:us(i)}r=r.sibling}}function Wa(r,i,o){for(o=o&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var c=i.alternate,h=r,g=i,x=g.flags;switch(g.tag){case 0:case 11:case 15:Wa(h,g,o),Kl(4,g);break;case 1:if(Wa(h,g,o),c=g,h=c.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch($){ct(c,c.return,$)}if(c=g,h=c.updateQueue,h!==null){var w=c.stateNode;try{var D=h.shared.hiddenCallbacks;if(D!==null)for(h.shared.hiddenCallbacks=null,h=0;h<D.length;h++)o0(D[h],w)}catch($){ct(c,c.return,$)}}o&&x&64&&Ev(g),Ql(g,g.return);break;case 27:Av(g);case 26:case 5:Wa(h,g,o),o&&c===null&&x&4&&Tv(g),Ql(g,g.return);break;case 12:Wa(h,g,o);break;case 13:Wa(h,g,o),o&&x&4&&Iv(h,g);break;case 22:g.memoizedState===null&&Wa(h,g,o),Ql(g,g.return);break;case 30:break;default:Wa(h,g,o)}i=i.sibling}}function Dm(r,i){var o=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),r=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(r=i.memoizedState.cachePool.pool),r!==o&&(r!=null&&r.refCount++,o!=null&&Pl(o))}function Om(r,i){r=null,i.alternate!==null&&(r=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==r&&(i.refCount++,r!=null&&Pl(r))}function kr(r,i,o,c){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)jv(r,i,o,c),i=i.sibling}function jv(r,i,o,c){var h=i.flags;switch(i.tag){case 0:case 11:case 15:kr(r,i,o,c),h&2048&&Kl(9,i);break;case 1:kr(r,i,o,c);break;case 3:kr(r,i,o,c),h&2048&&(r=null,i.alternate!==null&&(r=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==r&&(i.refCount++,r!=null&&Pl(r)));break;case 12:if(h&2048){kr(r,i,o,c),r=i.stateNode;try{var g=i.memoizedProps,x=g.id,w=g.onPostCommit;typeof w=="function"&&w(x,i.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(D){ct(i,i.return,D)}}else kr(r,i,o,c);break;case 13:kr(r,i,o,c);break;case 23:break;case 22:g=i.stateNode,x=i.alternate,i.memoizedState!==null?g._visibility&2?kr(r,i,o,c):Wl(r,i):g._visibility&2?kr(r,i,o,c):(g._visibility|=2,ho(r,i,o,c,(i.subtreeFlags&10256)!==0)),h&2048&&Dm(x,i);break;case 24:kr(r,i,o,c),h&2048&&Om(i.alternate,i);break;default:kr(r,i,o,c)}}function ho(r,i,o,c,h){for(h=h&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var g=r,x=i,w=o,D=c,$=x.flags;switch(x.tag){case 0:case 11:case 15:ho(g,x,w,D,h),Kl(8,x);break;case 23:break;case 22:var J=x.stateNode;x.memoizedState!==null?J._visibility&2?ho(g,x,w,D,h):Wl(g,x):(J._visibility|=2,ho(g,x,w,D,h)),h&&$&2048&&Dm(x.alternate,x);break;case 24:ho(g,x,w,D,h),h&&$&2048&&Om(x.alternate,x);break;default:ho(g,x,w,D,h)}i=i.sibling}}function Wl(r,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var o=r,c=i,h=c.flags;switch(c.tag){case 22:Wl(o,c),h&2048&&Dm(c.alternate,c);break;case 24:Wl(o,c),h&2048&&Om(c.alternate,c);break;default:Wl(o,c)}i=i.sibling}}var Xl=8192;function fo(r){if(r.subtreeFlags&Xl)for(r=r.child;r!==null;)Pv(r),r=r.sibling}function Pv(r){switch(r.tag){case 26:fo(r),r.flags&Xl&&r.memoizedState!==null&&nS(dr,r.memoizedState,r.memoizedProps);break;case 5:fo(r);break;case 3:case 4:var i=dr;dr=bd(r.stateNode.containerInfo),fo(r),dr=i;break;case 22:r.memoizedState===null&&(i=r.alternate,i!==null&&i.memoizedState!==null?(i=Xl,Xl=16777216,fo(r),Xl=i):fo(r));break;default:fo(r)}}function Mv(r){var i=r.alternate;if(i!==null&&(r=i.child,r!==null)){i.child=null;do i=r.sibling,r.sibling=null,r=i;while(r!==null)}}function Zl(r){var i=r.deletions;if((r.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var c=i[o];$t=c,Vv(c,r)}Mv(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)kv(r),r=r.sibling}function kv(r){switch(r.tag){case 0:case 11:case 15:Zl(r),r.flags&2048&&Ka(9,r,r.return);break;case 3:Zl(r);break;case 12:Zl(r);break;case 22:var i=r.stateNode;r.memoizedState!==null&&i._visibility&2&&(r.return===null||r.return.tag!==13)?(i._visibility&=-3,ld(r)):Zl(r);break;default:Zl(r)}}function ld(r){var i=r.deletions;if((r.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var c=i[o];$t=c,Vv(c,r)}Mv(r)}for(r=r.child;r!==null;){switch(i=r,i.tag){case 0:case 11:case 15:Ka(8,i,i.return),ld(i);break;case 22:o=i.stateNode,o._visibility&2&&(o._visibility&=-3,ld(i));break;default:ld(i)}r=r.sibling}}function Vv(r,i){for(;$t!==null;){var o=$t;switch(o.tag){case 0:case 11:case 15:Ka(8,o,i);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var c=o.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Pl(o.memoizedState.cache)}if(c=o.child,c!==null)c.return=o,$t=c;else e:for(o=r;$t!==null;){c=$t;var h=c.sibling,g=c.return;if(Cv(c),c===o){$t=null;break e}if(h!==null){h.return=g,$t=h;break e}$t=g}}}var vA={getCacheForType:function(r){var i=un(Lt),o=i.data.get(r);return o===void 0&&(o=r(),i.data.set(r,o)),o}},_A=typeof WeakMap=="function"?WeakMap:Map,tt=0,ht=null,ze=null,Ke=0,nt=0,Ln=null,Xa=!1,mo=!1,jm=!1,ga=0,wt=0,Za=0,ds=0,Pm=0,er=0,po=0,Jl=null,Sn=null,Mm=!1,km=0,cd=1/0,ud=null,Ja=null,tn=0,ei=null,go=null,yo=0,Vm=0,Lm=null,Lv=null,ec=0,Um=null;function Un(){if((tt&2)!==0&&Ke!==0)return Ke&-Ke;if(Z.T!==null){var r=ro;return r!==0?r:$m()}return Ma()}function Uv(){er===0&&(er=(Ke&536870912)===0||Xe?cl():536870912);var r=Jn.current;return r!==null&&(r.flags|=32),er}function zn(r,i,o){(r===ht&&(nt===2||nt===9)||r.cancelPendingCommit!==null)&&(vo(r,0),ti(r,Ke,er,!1)),Kr(r,o),((tt&2)===0||r!==ht)&&(r===ht&&((tt&2)===0&&(ds|=o),wt===4&&ti(r,Ke,er,!1)),Vr(r))}function zv(r,i,o){if((tt&6)!==0)throw Error(a(327));var c=!o&&(i&124)===0&&(i&r.expiredLanes)===0||Vi(r,i),h=c?xA(r,i):qm(r,i,!0),g=c;do{if(h===0){mo&&!c&&ti(r,i,0,!1);break}else{if(o=r.current.alternate,g&&!bA(o)){h=qm(r,i,!1),g=!1;continue}if(h===2){if(g=i,r.errorRecoveryDisabledLanes&g)var x=0;else x=r.pendingLanes&-536870913,x=x!==0?x:x&536870912?536870912:0;if(x!==0){i=x;e:{var w=r;h=Jl;var D=w.current.memoizedState.isDehydrated;if(D&&(vo(w,x).flags|=256),x=qm(w,x,!1),x!==2){if(jm&&!D){w.errorRecoveryDisabledLanes|=g,ds|=g,h=4;break e}g=Sn,Sn=h,g!==null&&(Sn===null?Sn=g:Sn.push.apply(Sn,g))}h=x}if(g=!1,h!==2)continue}}if(h===1){vo(r,0),ti(r,i,0,!0);break}e:{switch(c=r,g=h,g){case 0:case 1:throw Error(a(345));case 4:if((i&4194048)!==i)break;case 6:ti(c,i,er,!Xa);break e;case 2:Sn=null;break;case 3:case 5:break;default:throw Error(a(329))}if((i&62914560)===i&&(h=km+300-Fn(),10<h)){if(ti(c,i,er,!Xa),Ps(c,0,!0)!==0)break e;c.timeoutHandle=p_(Bv.bind(null,c,o,Sn,ud,Mm,i,er,ds,po,Xa,g,2,-0,0),h);break e}Bv(c,o,Sn,ud,Mm,i,er,ds,po,Xa,g,0,-0,0)}}break}while(!0);Vr(r)}function Bv(r,i,o,c,h,g,x,w,D,$,J,re,Y,K){if(r.timeoutHandle=-1,re=i.subtreeFlags,(re&8192||(re&16785408)===16785408)&&(oc={stylesheets:null,count:0,unsuspend:tS},Pv(i),re=rS(),re!==null)){r.cancelPendingCommit=re(Kv.bind(null,r,i,g,o,c,h,x,w,D,J,1,Y,K)),ti(r,g,x,!$);return}Kv(r,i,g,o,c,h,x,w,D)}function bA(r){for(var i=r;;){var o=i.tag;if((o===0||o===11||o===15)&&i.flags&16384&&(o=i.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var c=0;c<o.length;c++){var h=o[c],g=h.getSnapshot;h=h.value;try{if(!Pn(g(),h))return!1}catch{return!1}}if(o=i.child,i.subtreeFlags&16384&&o!==null)o.return=i,i=o;else{if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function ti(r,i,o,c){i&=~Pm,i&=~ds,r.suspendedLanes|=i,r.pingedLanes&=~i,c&&(r.warmLanes|=i),c=r.expirationTimes;for(var h=i;0<h;){var g=31-cn(h),x=1<<g;c[g]=-1,h&=~x}o!==0&&xr(r,o,i)}function dd(){return(tt&6)===0?(tc(0),!1):!0}function zm(){if(ze!==null){if(nt===0)var r=ze.return;else r=ze,la=is=null,rm(r),co=null,Gl=0,r=ze;for(;r!==null;)bv(r.alternate,r),r=r.return;ze=null}}function vo(r,i){var o=r.timeoutHandle;o!==-1&&(r.timeoutHandle=-1,LA(o)),o=r.cancelPendingCommit,o!==null&&(r.cancelPendingCommit=null,o()),zm(),ht=r,ze=o=ia(r.current,null),Ke=i,nt=0,Ln=null,Xa=!1,mo=Vi(r,i),jm=!1,po=er=Pm=ds=Za=wt=0,Sn=Jl=null,Mm=!1,(i&8)!==0&&(i|=i&32);var c=r.entangledLanes;if(c!==0)for(r=r.entanglements,c&=i;0<c;){var h=31-cn(c),g=1<<h;i|=r[h],c&=~g}return ga=i,ju(),o}function qv(r,i){ke=null,Z.H=Zu,i===kl||i===qu?(i=i0(),nt=3):i===n0?(i=i0(),nt=4):nt=i===sv?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Ln=i,ze===null&&(wt=1,rd(r,Qn(i,r.current)))}function Fv(){var r=Z.H;return Z.H=Zu,r===null?Zu:r}function Hv(){var r=Z.A;return Z.A=vA,r}function Bm(){wt=4,Xa||(Ke&4194048)!==Ke&&Jn.current!==null||(mo=!0),(Za&134217727)===0&&(ds&134217727)===0||ht===null||ti(ht,Ke,er,!1)}function qm(r,i,o){var c=tt;tt|=2;var h=Fv(),g=Hv();(ht!==r||Ke!==i)&&(ud=null,vo(r,i)),i=!1;var x=wt;e:do try{if(nt!==0&&ze!==null){var w=ze,D=Ln;switch(nt){case 8:zm(),x=6;break e;case 3:case 2:case 9:case 6:Jn.current===null&&(i=!0);var $=nt;if(nt=0,Ln=null,_o(r,w,D,$),o&&mo){x=0;break e}break;default:$=nt,nt=0,Ln=null,_o(r,w,D,$)}}EA(),x=wt;break}catch(J){qv(r,J)}while(!0);return i&&r.shellSuspendCounter++,la=is=null,tt=c,Z.H=h,Z.A=g,ze===null&&(ht=null,Ke=0,ju()),x}function EA(){for(;ze!==null;)Gv(ze)}function xA(r,i){var o=tt;tt|=2;var c=Fv(),h=Hv();ht!==r||Ke!==i?(ud=null,cd=Fn()+500,vo(r,i)):mo=Vi(r,i);e:do try{if(nt!==0&&ze!==null){i=ze;var g=Ln;t:switch(nt){case 1:nt=0,Ln=null,_o(r,i,g,1);break;case 2:case 9:if(r0(g)){nt=0,Ln=null,$v(i);break}i=function(){nt!==2&&nt!==9||ht!==r||(nt=7),Vr(r)},g.then(i,i);break e;case 3:nt=7;break e;case 4:nt=5;break e;case 7:r0(g)?(nt=0,Ln=null,$v(i)):(nt=0,Ln=null,_o(r,i,g,7));break;case 5:var x=null;switch(ze.tag){case 26:x=ze.memoizedState;case 5:case 27:var w=ze;if(!x||N_(x)){nt=0,Ln=null;var D=w.sibling;if(D!==null)ze=D;else{var $=w.return;$!==null?(ze=$,hd($)):ze=null}break t}}nt=0,Ln=null,_o(r,i,g,5);break;case 6:nt=0,Ln=null,_o(r,i,g,6);break;case 8:zm(),wt=6;break e;default:throw Error(a(462))}}TA();break}catch(J){qv(r,J)}while(!0);return la=is=null,Z.H=c,Z.A=h,tt=o,ze!==null?0:(ht=null,Ke=0,ju(),wt)}function TA(){for(;ze!==null&&!ja();)Gv(ze)}function Gv(r){var i=vv(r.alternate,r,ga);r.memoizedProps=r.pendingProps,i===null?hd(r):ze=i}function $v(r){var i=r,o=i.alternate;switch(i.tag){case 15:case 0:i=hv(o,i,i.pendingProps,i.type,void 0,Ke);break;case 11:i=hv(o,i,i.pendingProps,i.type.render,i.ref,Ke);break;case 5:rm(i);default:bv(o,i),i=ze=Yy(i,ga),i=vv(o,i,ga)}r.memoizedProps=r.pendingProps,i===null?hd(r):ze=i}function _o(r,i,o,c){la=is=null,rm(i),co=null,Gl=0;var h=i.return;try{if(hA(r,h,i,o,Ke)){wt=1,rd(r,Qn(o,r.current)),ze=null;return}}catch(g){if(h!==null)throw ze=h,g;wt=1,rd(r,Qn(o,r.current)),ze=null;return}i.flags&32768?(Xe||c===1?r=!0:mo||(Ke&536870912)!==0?r=!1:(Xa=r=!0,(c===2||c===9||c===3||c===6)&&(c=Jn.current,c!==null&&c.tag===13&&(c.flags|=16384))),Yv(i,r)):hd(i)}function hd(r){var i=r;do{if((i.flags&32768)!==0){Yv(i,Xa);return}r=i.return;var o=mA(i.alternate,i,ga);if(o!==null){ze=o;return}if(i=i.sibling,i!==null){ze=i;return}ze=i=r}while(i!==null);wt===0&&(wt=5)}function Yv(r,i){do{var o=pA(r.alternate,r);if(o!==null){o.flags&=32767,ze=o;return}if(o=r.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!i&&(r=r.sibling,r!==null)){ze=r;return}ze=r=o}while(r!==null);wt=6,ze=null}function Kv(r,i,o,c,h,g,x,w,D){r.cancelPendingCommit=null;do fd();while(tn!==0);if((tt&6)!==0)throw Error(a(327));if(i!==null){if(i===r.current)throw Error(a(177));if(g=i.lanes|i.childLanes,g|=Of,dl(r,o,g,x,w,D),r===ht&&(ze=ht=null,Ke=0),go=i,ei=r,yo=o,Vm=g,Lm=h,Lv=c,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,NA(ji,function(){return Jv(),null})):(r.callbackNode=null,r.callbackPriority=0),c=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||c){c=Z.T,Z.T=null,h=ue.p,ue.p=2,x=tt,tt|=4;try{gA(r,i,o)}finally{tt=x,ue.p=h,Z.T=c}}tn=1,Qv(),Wv(),Xv()}}function Qv(){if(tn===1){tn=0;var r=ei,i=go,o=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||o){o=Z.T,Z.T=null;var c=ue.p;ue.p=2;var h=tt;tt|=4;try{Dv(i,r);var g=ep,x=Vy(r.containerInfo),w=g.focusedElem,D=g.selectionRange;if(x!==w&&w&&w.ownerDocument&&ky(w.ownerDocument.documentElement,w)){if(D!==null&&Nf(w)){var $=D.start,J=D.end;if(J===void 0&&(J=$),"selectionStart"in w)w.selectionStart=$,w.selectionEnd=Math.min(J,w.value.length);else{var re=w.ownerDocument||document,Y=re&&re.defaultView||window;if(Y.getSelection){var K=Y.getSelection(),Ne=w.textContent.length,Te=Math.min(D.start,Ne),lt=D.end===void 0?Te:Math.min(D.end,Ne);!K.extend&&Te>lt&&(x=lt,lt=Te,Te=x);var B=My(w,Te),U=My(w,lt);if(B&&U&&(K.rangeCount!==1||K.anchorNode!==B.node||K.anchorOffset!==B.offset||K.focusNode!==U.node||K.focusOffset!==U.offset)){var H=re.createRange();H.setStart(B.node,B.offset),K.removeAllRanges(),Te>lt?(K.addRange(H),K.extend(U.node,U.offset)):(H.setEnd(U.node,U.offset),K.addRange(H))}}}}for(re=[],K=w;K=K.parentNode;)K.nodeType===1&&re.push({element:K,left:K.scrollLeft,top:K.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<re.length;w++){var te=re[w];te.element.scrollLeft=te.left,te.element.scrollTop=te.top}}Ad=!!Jm,ep=Jm=null}finally{tt=h,ue.p=c,Z.T=o}}r.current=i,tn=2}}function Wv(){if(tn===2){tn=0;var r=ei,i=go,o=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||o){o=Z.T,Z.T=null;var c=ue.p;ue.p=2;var h=tt;tt|=4;try{Nv(r,i.alternate,i)}finally{tt=h,ue.p=c,Z.T=o}}tn=3}}function Xv(){if(tn===4||tn===3){tn=0,lu();var r=ei,i=go,o=yo,c=Lv;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?tn=5:(tn=0,go=ei=null,Zv(r,r.pendingLanes));var h=r.pendingLanes;if(h===0&&(Ja=null),Ms(o),i=i.stateNode,et&&typeof et.onCommitFiberRoot=="function")try{et.onCommitFiberRoot(xt,i,void 0,(i.current.flags&128)===128)}catch{}if(c!==null){i=Z.T,h=ue.p,ue.p=2,Z.T=null;try{for(var g=r.onRecoverableError,x=0;x<c.length;x++){var w=c[x];g(w.value,{componentStack:w.stack})}}finally{Z.T=i,ue.p=h}}(yo&3)!==0&&fd(),Vr(r),h=r.pendingLanes,(o&4194090)!==0&&(h&42)!==0?r===Um?ec++:(ec=0,Um=r):ec=0,tc(0)}}function Zv(r,i){(r.pooledCacheLanes&=i)===0&&(i=r.pooledCache,i!=null&&(r.pooledCache=null,Pl(i)))}function fd(r){return Qv(),Wv(),Xv(),Jv()}function Jv(){if(tn!==5)return!1;var r=ei,i=Vm;Vm=0;var o=Ms(yo),c=Z.T,h=ue.p;try{ue.p=32>o?32:o,Z.T=null,o=Lm,Lm=null;var g=ei,x=yo;if(tn=0,go=ei=null,yo=0,(tt&6)!==0)throw Error(a(331));var w=tt;if(tt|=4,kv(g.current),jv(g,g.current,x,o),tt=w,tc(0,!1),et&&typeof et.onPostCommitFiberRoot=="function")try{et.onPostCommitFiberRoot(xt,g)}catch{}return!0}finally{ue.p=h,Z.T=c,Zv(r,i)}}function e_(r,i,o){i=Qn(o,i),i=ym(r.stateNode,i,2),r=Ha(r,i,2),r!==null&&(Kr(r,2),Vr(r))}function ct(r,i,o){if(r.tag===3)e_(r,r,o);else for(;i!==null;){if(i.tag===3){e_(i,r,o);break}else if(i.tag===1){var c=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Ja===null||!Ja.has(c))){r=Qn(o,r),o=av(2),c=Ha(i,o,2),c!==null&&(iv(o,c,i,r),Kr(c,2),Vr(c));break}}i=i.return}}function Fm(r,i,o){var c=r.pingCache;if(c===null){c=r.pingCache=new _A;var h=new Set;c.set(i,h)}else h=c.get(i),h===void 0&&(h=new Set,c.set(i,h));h.has(o)||(jm=!0,h.add(o),r=wA.bind(null,r,i,o),i.then(r,r))}function wA(r,i,o){var c=r.pingCache;c!==null&&c.delete(i),r.pingedLanes|=r.suspendedLanes&o,r.warmLanes&=~o,ht===r&&(Ke&o)===o&&(wt===4||wt===3&&(Ke&62914560)===Ke&&300>Fn()-km?(tt&2)===0&&vo(r,0):Pm|=o,po===Ke&&(po=0)),Vr(r)}function t_(r,i){i===0&&(i=ul()),r=Js(r,i),r!==null&&(Kr(r,i),Vr(r))}function AA(r){var i=r.memoizedState,o=0;i!==null&&(o=i.retryLane),t_(r,o)}function SA(r,i){var o=0;switch(r.tag){case 13:var c=r.stateNode,h=r.memoizedState;h!==null&&(o=h.retryLane);break;case 19:c=r.stateNode;break;case 22:c=r.stateNode._retryCache;break;default:throw Error(a(314))}c!==null&&c.delete(i),t_(r,o)}function NA(r,i){return qn(r,i)}var md=null,bo=null,Hm=!1,pd=!1,Gm=!1,hs=0;function Vr(r){r!==bo&&r.next===null&&(bo===null?md=bo=r:bo=bo.next=r),pd=!0,Hm||(Hm=!0,RA())}function tc(r,i){if(!Gm&&pd){Gm=!0;do for(var o=!1,c=md;c!==null;){if(r!==0){var h=c.pendingLanes;if(h===0)var g=0;else{var x=c.suspendedLanes,w=c.pingedLanes;g=(1<<31-cn(42|r)+1)-1,g&=h&~(x&~w),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(o=!0,i_(c,g))}else g=Ke,g=Ps(c,c===ht?g:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(g&3)===0||Vi(c,g)||(o=!0,i_(c,g));c=c.next}while(o);Gm=!1}}function CA(){n_()}function n_(){pd=Hm=!1;var r=0;hs!==0&&(VA()&&(r=hs),hs=0);for(var i=Fn(),o=null,c=md;c!==null;){var h=c.next,g=r_(c,i);g===0?(c.next=null,o===null?md=h:o.next=h,h===null&&(bo=o)):(o=c,(r!==0||(g&3)!==0)&&(pd=!0)),c=h}tc(r)}function r_(r,i){for(var o=r.suspendedLanes,c=r.pingedLanes,h=r.expirationTimes,g=r.pendingLanes&-62914561;0<g;){var x=31-cn(g),w=1<<x,D=h[x];D===-1?((w&o)===0||(w&c)!==0)&&(h[x]=ll(w,i)):D<=i&&(r.expiredLanes|=w),g&=~w}if(i=ht,o=Ke,o=Ps(r,r===i?o:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),c=r.callbackNode,o===0||r===i&&(nt===2||nt===9)||r.cancelPendingCommit!==null)return c!==null&&c!==null&&Er(c),r.callbackNode=null,r.callbackPriority=0;if((o&3)===0||Vi(r,o)){if(i=o&-o,i===r.callbackPriority)return i;switch(c!==null&&Er(c),Ms(o)){case 2:case 8:o=Os;break;case 32:o=ji;break;case 268435456:o=js;break;default:o=ji}return c=a_.bind(null,r),o=qn(o,c),r.callbackPriority=i,r.callbackNode=o,i}return c!==null&&c!==null&&Er(c),r.callbackPriority=2,r.callbackNode=null,2}function a_(r,i){if(tn!==0&&tn!==5)return r.callbackNode=null,r.callbackPriority=0,null;var o=r.callbackNode;if(fd()&&r.callbackNode!==o)return null;var c=Ke;return c=Ps(r,r===ht?c:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),c===0?null:(zv(r,c,i),r_(r,Fn()),r.callbackNode!=null&&r.callbackNode===o?a_.bind(null,r):null)}function i_(r,i){if(fd())return null;zv(r,i,!0)}function RA(){UA(function(){(tt&6)!==0?qn(sl,CA):n_()})}function $m(){return hs===0&&(hs=cl()),hs}function s_(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:Bs(""+r)}function o_(r,i){var o=i.ownerDocument.createElement("input");return o.name=i.name,o.value=i.value,r.id&&o.setAttribute("form",r.id),i.parentNode.insertBefore(o,i),r=new FormData(r),o.parentNode.removeChild(o),r}function IA(r,i,o,c,h){if(i==="submit"&&o&&o.stateNode===h){var g=s_((h[Rt]||null).action),x=c.submitter;x&&(i=(i=x[Rt]||null)?s_(i.formAction):x.getAttribute("formAction"),i!==null&&(g=i,x=null));var w=new qs("action","action",null,c,h);r.push({event:w,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(hs!==0){var D=x?o_(h,x):new FormData(h);hm(o,{pending:!0,data:D,method:h.method,action:g},null,D)}}else typeof g=="function"&&(w.preventDefault(),D=x?o_(h,x):new FormData(h),hm(o,{pending:!0,data:D,method:h.method,action:g},g,D))},currentTarget:h}]})}}for(var Ym=0;Ym<Df.length;Ym++){var Km=Df[Ym],DA=Km.toLowerCase(),OA=Km[0].toUpperCase()+Km.slice(1);ur(DA,"on"+OA)}ur(zy,"onAnimationEnd"),ur(By,"onAnimationIteration"),ur(qy,"onAnimationStart"),ur("dblclick","onDoubleClick"),ur("focusin","onFocus"),ur("focusout","onBlur"),ur(Qw,"onTransitionRun"),ur(Ww,"onTransitionStart"),ur(Xw,"onTransitionCancel"),ur(Fy,"onTransitionEnd"),Wr("onMouseEnter",["mouseout","mouseover"]),Wr("onMouseLeave",["mouseout","mouseover"]),Wr("onPointerEnter",["pointerout","pointerover"]),Wr("onPointerLeave",["pointerout","pointerover"]),lr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),lr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),lr("onBeforeInput",["compositionend","keypress","textInput","paste"]),lr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),lr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),lr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var nc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(nc));function l_(r,i){i=(i&4)!==0;for(var o=0;o<r.length;o++){var c=r[o],h=c.event;c=c.listeners;e:{var g=void 0;if(i)for(var x=c.length-1;0<=x;x--){var w=c[x],D=w.instance,$=w.currentTarget;if(w=w.listener,D!==g&&h.isPropagationStopped())break e;g=w,h.currentTarget=$;try{g(h)}catch(J){nd(J)}h.currentTarget=null,g=D}else for(x=0;x<c.length;x++){if(w=c[x],D=w.instance,$=w.currentTarget,w=w.listener,D!==g&&h.isPropagationStopped())break e;g=w,h.currentTarget=$;try{g(h)}catch(J){nd(J)}h.currentTarget=null,g=D}}}}function Be(r,i){var o=i[fl];o===void 0&&(o=i[fl]=new Set);var c=r+"__bubble";o.has(c)||(c_(i,r,2,!1),o.add(c))}function Qm(r,i,o){var c=0;i&&(c|=4),c_(o,r,c,i)}var gd="_reactListening"+Math.random().toString(36).slice(2);function Wm(r){if(!r[gd]){r[gd]=!0,ml.forEach(function(o){o!=="selectionchange"&&(jA.has(o)||Qm(o,!1,r),Qm(o,!0,r))});var i=r.nodeType===9?r:r.ownerDocument;i===null||i[gd]||(i[gd]=!0,Qm("selectionchange",!1,i))}}function c_(r,i,o,c){switch(j_(i)){case 2:var h=sS;break;case 8:h=oS;break;default:h=up}o=h.bind(null,i,o,r),h=void 0,!Yn||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(h=!0),c?h!==void 0?r.addEventListener(i,o,{capture:!0,passive:h}):r.addEventListener(i,o,!0):h!==void 0?r.addEventListener(i,o,{passive:h}):r.addEventListener(i,o,!1)}function Xm(r,i,o,c,h){var g=c;if((i&1)===0&&(i&2)===0&&c!==null)e:for(;;){if(c===null)return;var x=c.tag;if(x===3||x===4){var w=c.stateNode.containerInfo;if(w===h)break;if(x===4)for(x=c.return;x!==null;){var D=x.tag;if((D===3||D===4)&&x.stateNode.containerInfo===h)return;x=x.return}for(;w!==null;){if(x=Qr(w),x===null)return;if(D=x.tag,D===5||D===6||D===26||D===27){c=g=x;continue e}w=w.parentNode}}c=c.return}vu(function(){var $=g,J=$n(o),re=[];e:{var Y=Hy.get(r);if(Y!==void 0){var K=qs,Ne=r;switch(r){case"keypress":if(Cr(o)===0)break e;case"keydown":case"keyup":K=Ks;break;case"focusin":Ne="focus",K=Gs;break;case"focusout":Ne="blur",K=Gs;break;case"beforeblur":case"afterblur":K=Gs;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":K=Kn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":K=Tf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":K=Su;break;case zy:case By:case qy:K=$s;break;case Fy:K=Cu;break;case"scroll":case"scrollend":K=_u;break;case"wheel":K=Qs;break;case"copy":case"cut":case"paste":K=Ys;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":K=Sl;break;case"toggle":case"beforetoggle":K=Iu}var Te=(i&4)!==0,lt=!Te&&(r==="scroll"||r==="scrollend"),B=Te?Y!==null?Y+"Capture":null:Y;Te=[];for(var U=$,H;U!==null;){var te=U;if(H=te.stateNode,te=te.tag,te!==5&&te!==26&&te!==27||H===null||B===null||(te=Gi(U,B),te!=null&&Te.push(rc(U,te,H))),lt)break;U=U.return}0<Te.length&&(Y=new K(Y,Ne,null,o,J),re.push({event:Y,listeners:Te}))}}if((i&7)===0){e:{if(Y=r==="mouseover"||r==="pointerover",K=r==="mouseout"||r==="pointerout",Y&&o!==Jr&&(Ne=o.relatedTarget||o.fromElement)&&(Qr(Ne)||Ne[Hn]))break e;if((K||Y)&&(Y=J.window===J?J:(Y=J.ownerDocument)?Y.defaultView||Y.parentWindow:window,K?(Ne=o.relatedTarget||o.toElement,K=$,Ne=Ne?Qr(Ne):null,Ne!==null&&(lt=l(Ne),Te=Ne.tag,Ne!==lt||Te!==5&&Te!==27&&Te!==6)&&(Ne=null)):(K=null,Ne=$),K!==Ne)){if(Te=Kn,te="onMouseLeave",B="onMouseEnter",U="mouse",(r==="pointerout"||r==="pointerover")&&(Te=Sl,te="onPointerLeave",B="onPointerEnter",U="pointer"),lt=K==null?Y:wr(K),H=Ne==null?Y:wr(Ne),Y=new Te(te,U+"leave",K,o,J),Y.target=lt,Y.relatedTarget=H,te=null,Qr(J)===$&&(Te=new Te(B,U+"enter",Ne,o,J),Te.target=H,Te.relatedTarget=lt,te=Te),lt=te,K&&Ne)t:{for(Te=K,B=Ne,U=0,H=Te;H;H=Eo(H))U++;for(H=0,te=B;te;te=Eo(te))H++;for(;0<U-H;)Te=Eo(Te),U--;for(;0<H-U;)B=Eo(B),H--;for(;U--;){if(Te===B||B!==null&&Te===B.alternate)break t;Te=Eo(Te),B=Eo(B)}Te=null}else Te=null;K!==null&&u_(re,Y,K,Te,!1),Ne!==null&&lt!==null&&u_(re,lt,Ne,Te,!0)}}e:{if(Y=$?wr($):window,K=Y.nodeName&&Y.nodeName.toLowerCase(),K==="select"||K==="input"&&Y.type==="file")var ge=Ry;else if(Vt(Y))if(Iy)ge=$w;else{ge=Hw;var Ue=Fw}else K=Y.nodeName,!K||K.toLowerCase()!=="input"||Y.type!=="checkbox"&&Y.type!=="radio"?$&&_l($.elementType)&&(ge=Ry):ge=Gw;if(ge&&(ge=ge(r,$))){aa(re,ge,o,J);break e}Ue&&Ue(r,Y,$),r==="focusout"&&$&&Y.type==="number"&&$.memoizedProps.value!=null&&Ua(Y,"number",Y.value)}switch(Ue=$?wr($):window,r){case"focusin":(Vt(Ue)||Ue.contentEditable==="true")&&(Ws=Ue,Cf=$,Rl=null);break;case"focusout":Rl=Cf=Ws=null;break;case"mousedown":Rf=!0;break;case"contextmenu":case"mouseup":case"dragend":Rf=!1,Ly(re,o,J);break;case"selectionchange":if(Kw)break;case"keydown":case"keyup":Ly(re,o,J)}var be;if(Dr)e:{switch(r){case"compositionstart":var we="onCompositionStart";break e;case"compositionend":we="onCompositionEnd";break e;case"compositionupdate":we="onCompositionUpdate";break e}we=void 0}else $e?W(r,o)&&(we="onCompositionEnd"):r==="keydown"&&o.keyCode===229&&(we="onCompositionStart");we&&(b&&o.locale!=="ko"&&($e||we!=="onCompositionStart"?we==="onCompositionEnd"&&$e&&(be=El()):(Nr=J,za="value"in Nr?Nr.value:Nr.textContent,$e=!0)),Ue=yd($,we),0<Ue.length&&(we=new wl(we,r,null,o,J),re.push({event:we,listeners:Ue}),be?we.data=be:(be=de(o),be!==null&&(we.data=be)))),(be=_?kt(r,o):Ye(r,o))&&(we=yd($,"onBeforeInput"),0<we.length&&(Ue=new wl("onBeforeInput","beforeinput",null,o,J),re.push({event:Ue,listeners:we}),Ue.data=be)),IA(re,r,$,o,J)}l_(re,i)})}function rc(r,i,o){return{instance:r,listener:i,currentTarget:o}}function yd(r,i){for(var o=i+"Capture",c=[];r!==null;){var h=r,g=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||g===null||(h=Gi(r,o),h!=null&&c.unshift(rc(r,h,g)),h=Gi(r,i),h!=null&&c.push(rc(r,h,g))),r.tag===3)return c;r=r.return}return[]}function Eo(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function u_(r,i,o,c,h){for(var g=i._reactName,x=[];o!==null&&o!==c;){var w=o,D=w.alternate,$=w.stateNode;if(w=w.tag,D!==null&&D===c)break;w!==5&&w!==26&&w!==27||$===null||(D=$,h?($=Gi(o,g),$!=null&&x.unshift(rc(o,$,D))):h||($=Gi(o,g),$!=null&&x.push(rc(o,$,D)))),o=o.return}x.length!==0&&r.push({event:i,listeners:x})}var PA=/\r\n?/g,MA=/\u0000|\uFFFD/g;function d_(r){return(typeof r=="string"?r:""+r).replace(PA,`
`).replace(MA,"")}function h_(r,i){return i=d_(i),d_(r)===i}function vd(){}function ot(r,i,o,c,h,g){switch(o){case"children":typeof c=="string"?i==="body"||i==="textarea"&&c===""||Gn(r,c):(typeof c=="number"||typeof c=="bigint")&&i!=="body"&&Gn(r,""+c);break;case"className":Ar(r,"class",c);break;case"tabIndex":Ar(r,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Ar(r,o,c);break;case"style":vl(r,c,g);break;case"data":if(i!=="object"){Ar(r,"data",c);break}case"src":case"href":if(c===""&&(i!=="a"||o!=="href")){r.removeAttribute(o);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){r.removeAttribute(o);break}c=Bs(""+c),r.setAttribute(o,c);break;case"action":case"formAction":if(typeof c=="function"){r.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(o==="formAction"?(i!=="input"&&ot(r,i,"name",h.name,h,null),ot(r,i,"formEncType",h.formEncType,h,null),ot(r,i,"formMethod",h.formMethod,h,null),ot(r,i,"formTarget",h.formTarget,h,null)):(ot(r,i,"encType",h.encType,h,null),ot(r,i,"method",h.method,h,null),ot(r,i,"target",h.target,h,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){r.removeAttribute(o);break}c=Bs(""+c),r.setAttribute(o,c);break;case"onClick":c!=null&&(r.onclick=vd);break;case"onScroll":c!=null&&Be("scroll",r);break;case"onScrollEnd":c!=null&&Be("scrollend",r);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(a(61));if(o=c.__html,o!=null){if(h.children!=null)throw Error(a(60));r.innerHTML=o}}break;case"multiple":r.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":r.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){r.removeAttribute("xlink:href");break}o=Bs(""+c),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?r.setAttribute(o,""+c):r.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?r.setAttribute(o,""):r.removeAttribute(o);break;case"capture":case"download":c===!0?r.setAttribute(o,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?r.setAttribute(o,c):r.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?r.setAttribute(o,c):r.removeAttribute(o);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?r.removeAttribute(o):r.setAttribute(o,c);break;case"popover":Be("beforetoggle",r),Be("toggle",r),La(r,"popover",c);break;case"xlinkActuate":Zt(r,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Zt(r,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Zt(r,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Zt(r,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Zt(r,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Zt(r,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Zt(r,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Zt(r,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Zt(r,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":La(r,"is",c);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=Ef.get(o)||o,La(r,o,c))}}function Zm(r,i,o,c,h,g){switch(o){case"style":vl(r,c,g);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(a(61));if(o=c.__html,o!=null){if(h.children!=null)throw Error(a(60));r.innerHTML=o}}break;case"children":typeof c=="string"?Gn(r,c):(typeof c=="number"||typeof c=="bigint")&&Gn(r,""+c);break;case"onScroll":c!=null&&Be("scroll",r);break;case"onScrollEnd":c!=null&&Be("scrollend",r);break;case"onClick":c!=null&&(r.onclick=vd);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ks.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(h=o.endsWith("Capture"),i=o.slice(2,h?o.length-7:void 0),g=r[Rt]||null,g=g!=null?g[o]:null,typeof g=="function"&&r.removeEventListener(i,g,h),typeof c=="function")){typeof g!="function"&&g!==null&&(o in r?r[o]=null:r.hasAttribute(o)&&r.removeAttribute(o)),r.addEventListener(i,c,h);break e}o in r?r[o]=c:c===!0?r.setAttribute(o,""):La(r,o,c)}}}function nn(r,i,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Be("error",r),Be("load",r);var c=!1,h=!1,g;for(g in o)if(o.hasOwnProperty(g)){var x=o[g];if(x!=null)switch(g){case"src":c=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,i));default:ot(r,i,g,x,o,null)}}h&&ot(r,i,"srcSet",o.srcSet,o,null),c&&ot(r,i,"src",o.src,o,null);return;case"input":Be("invalid",r);var w=g=x=h=null,D=null,$=null;for(c in o)if(o.hasOwnProperty(c)){var J=o[c];if(J!=null)switch(c){case"name":h=J;break;case"type":x=J;break;case"checked":D=J;break;case"defaultChecked":$=J;break;case"value":g=J;break;case"defaultValue":w=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(a(137,i));break;default:ot(r,i,c,J,o,null)}}qi(r,g,w,D,$,x,h,!1),zs(r);return;case"select":Be("invalid",r),c=x=g=null;for(h in o)if(o.hasOwnProperty(h)&&(w=o[h],w!=null))switch(h){case"value":g=w;break;case"defaultValue":x=w;break;case"multiple":c=w;default:ot(r,i,h,w,o,null)}i=g,o=x,r.multiple=!!c,i!=null?Zr(r,!!c,i,!1):o!=null&&Zr(r,!!c,o,!0);return;case"textarea":Be("invalid",r),g=h=c=null;for(x in o)if(o.hasOwnProperty(x)&&(w=o[x],w!=null))switch(x){case"value":c=w;break;case"defaultValue":h=w;break;case"children":g=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(a(91));break;default:ot(r,i,x,w,o,null)}Fi(r,c,h,g),zs(r);return;case"option":for(D in o)if(o.hasOwnProperty(D)&&(c=o[D],c!=null))switch(D){case"selected":r.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:ot(r,i,D,c,o,null)}return;case"dialog":Be("beforetoggle",r),Be("toggle",r),Be("cancel",r),Be("close",r);break;case"iframe":case"object":Be("load",r);break;case"video":case"audio":for(c=0;c<nc.length;c++)Be(nc[c],r);break;case"image":Be("error",r),Be("load",r);break;case"details":Be("toggle",r);break;case"embed":case"source":case"link":Be("error",r),Be("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for($ in o)if(o.hasOwnProperty($)&&(c=o[$],c!=null))switch($){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,i));default:ot(r,i,$,c,o,null)}return;default:if(_l(i)){for(J in o)o.hasOwnProperty(J)&&(c=o[J],c!==void 0&&Zm(r,i,J,c,o,void 0));return}}for(w in o)o.hasOwnProperty(w)&&(c=o[w],c!=null&&ot(r,i,w,c,o,null))}function kA(r,i,o,c){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,g=null,x=null,w=null,D=null,$=null,J=null;for(K in o){var re=o[K];if(o.hasOwnProperty(K)&&re!=null)switch(K){case"checked":break;case"value":break;case"defaultValue":D=re;default:c.hasOwnProperty(K)||ot(r,i,K,null,c,re)}}for(var Y in c){var K=c[Y];if(re=o[Y],c.hasOwnProperty(Y)&&(K!=null||re!=null))switch(Y){case"type":g=K;break;case"name":h=K;break;case"checked":$=K;break;case"defaultChecked":J=K;break;case"value":x=K;break;case"defaultValue":w=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(a(137,i));break;default:K!==re&&ot(r,i,Y,K,c,re)}}jn(r,x,w,D,$,J,g,h);return;case"select":K=x=w=Y=null;for(g in o)if(D=o[g],o.hasOwnProperty(g)&&D!=null)switch(g){case"value":break;case"multiple":K=D;default:c.hasOwnProperty(g)||ot(r,i,g,null,c,D)}for(h in c)if(g=c[h],D=o[h],c.hasOwnProperty(h)&&(g!=null||D!=null))switch(h){case"value":Y=g;break;case"defaultValue":w=g;break;case"multiple":x=g;default:g!==D&&ot(r,i,h,g,c,D)}i=w,o=x,c=K,Y!=null?Zr(r,!!o,Y,!1):!!c!=!!o&&(i!=null?Zr(r,!!o,i,!0):Zr(r,!!o,o?[]:"",!1));return;case"textarea":K=Y=null;for(w in o)if(h=o[w],o.hasOwnProperty(w)&&h!=null&&!c.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:ot(r,i,w,null,c,h)}for(x in c)if(h=c[x],g=o[x],c.hasOwnProperty(x)&&(h!=null||g!=null))switch(x){case"value":Y=h;break;case"defaultValue":K=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(a(91));break;default:h!==g&&ot(r,i,x,h,c,g)}it(r,Y,K);return;case"option":for(var Ne in o)if(Y=o[Ne],o.hasOwnProperty(Ne)&&Y!=null&&!c.hasOwnProperty(Ne))switch(Ne){case"selected":r.selected=!1;break;default:ot(r,i,Ne,null,c,Y)}for(D in c)if(Y=c[D],K=o[D],c.hasOwnProperty(D)&&Y!==K&&(Y!=null||K!=null))switch(D){case"selected":r.selected=Y&&typeof Y!="function"&&typeof Y!="symbol";break;default:ot(r,i,D,Y,c,K)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Te in o)Y=o[Te],o.hasOwnProperty(Te)&&Y!=null&&!c.hasOwnProperty(Te)&&ot(r,i,Te,null,c,Y);for($ in c)if(Y=c[$],K=o[$],c.hasOwnProperty($)&&Y!==K&&(Y!=null||K!=null))switch($){case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(a(137,i));break;default:ot(r,i,$,Y,c,K)}return;default:if(_l(i)){for(var lt in o)Y=o[lt],o.hasOwnProperty(lt)&&Y!==void 0&&!c.hasOwnProperty(lt)&&Zm(r,i,lt,void 0,c,Y);for(J in c)Y=c[J],K=o[J],!c.hasOwnProperty(J)||Y===K||Y===void 0&&K===void 0||Zm(r,i,J,Y,c,K);return}}for(var B in o)Y=o[B],o.hasOwnProperty(B)&&Y!=null&&!c.hasOwnProperty(B)&&ot(r,i,B,null,c,Y);for(re in c)Y=c[re],K=o[re],!c.hasOwnProperty(re)||Y===K||Y==null&&K==null||ot(r,i,re,Y,c,K)}var Jm=null,ep=null;function _d(r){return r.nodeType===9?r:r.ownerDocument}function f_(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function m_(r,i){if(r===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&i==="foreignObject"?0:r}function tp(r,i){return r==="textarea"||r==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var np=null;function VA(){var r=window.event;return r&&r.type==="popstate"?r===np?!1:(np=r,!0):(np=null,!1)}var p_=typeof setTimeout=="function"?setTimeout:void 0,LA=typeof clearTimeout=="function"?clearTimeout:void 0,g_=typeof Promise=="function"?Promise:void 0,UA=typeof queueMicrotask=="function"?queueMicrotask:typeof g_<"u"?function(r){return g_.resolve(null).then(r).catch(zA)}:p_;function zA(r){setTimeout(function(){throw r})}function ni(r){return r==="head"}function y_(r,i){var o=i,c=0,h=0;do{var g=o.nextSibling;if(r.removeChild(o),g&&g.nodeType===8)if(o=g.data,o==="/$"){if(0<c&&8>c){o=c;var x=r.ownerDocument;if(o&1&&ac(x.documentElement),o&2&&ac(x.body),o&4)for(o=x.head,ac(o),x=o.firstChild;x;){var w=x.nextSibling,D=x.nodeName;x[Li]||D==="SCRIPT"||D==="STYLE"||D==="LINK"&&x.rel.toLowerCase()==="stylesheet"||o.removeChild(x),x=w}}if(h===0){r.removeChild(g),hc(i);return}h--}else o==="$"||o==="$?"||o==="$!"?h++:c=o.charCodeAt(0)-48;else c=0;o=g}while(o);hc(i)}function rp(r){var i=r.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var o=i;switch(i=i.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":rp(o),Va(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}r.removeChild(o)}}function BA(r,i,o,c){for(;r.nodeType===1;){var h=o;if(r.nodeName.toLowerCase()!==i.toLowerCase()){if(!c&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(c){if(!r[Li])switch(i){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(g=r.getAttribute("rel"),g==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(g!==h.rel||r.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||r.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||r.getAttribute("title")!==(h.title==null?null:h.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(g=r.getAttribute("src"),(g!==(h.src==null?null:h.src)||r.getAttribute("type")!==(h.type==null?null:h.type)||r.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&g&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(i==="input"&&r.type==="hidden"){var g=h.name==null?null:""+h.name;if(h.type==="hidden"&&r.getAttribute("name")===g)return r}else return r;if(r=hr(r.nextSibling),r===null)break}return null}function qA(r,i,o){if(i==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!o||(r=hr(r.nextSibling),r===null))return null;return r}function ap(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState==="complete"}function FA(r,i){var o=r.ownerDocument;if(r.data!=="$?"||o.readyState==="complete")i();else{var c=function(){i(),o.removeEventListener("DOMContentLoaded",c)};o.addEventListener("DOMContentLoaded",c),r._reactRetry=c}}function hr(r){for(;r!=null;r=r.nextSibling){var i=r.nodeType;if(i===1||i===3)break;if(i===8){if(i=r.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return r}var ip=null;function v_(r){r=r.previousSibling;for(var i=0;r;){if(r.nodeType===8){var o=r.data;if(o==="$"||o==="$!"||o==="$?"){if(i===0)return r;i--}else o==="/$"&&i++}r=r.previousSibling}return null}function __(r,i,o){switch(i=_d(o),r){case"html":if(r=i.documentElement,!r)throw Error(a(452));return r;case"head":if(r=i.head,!r)throw Error(a(453));return r;case"body":if(r=i.body,!r)throw Error(a(454));return r;default:throw Error(a(451))}}function ac(r){for(var i=r.attributes;i.length;)r.removeAttributeNode(i[0]);Va(r)}var tr=new Map,b_=new Set;function bd(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var ya=ue.d;ue.d={f:HA,r:GA,D:$A,C:YA,L:KA,m:QA,X:XA,S:WA,M:ZA};function HA(){var r=ya.f(),i=dd();return r||i}function GA(r){var i=Tr(r);i!==null&&i.tag===5&&i.type==="form"?z0(i):ya.r(r)}var xo=typeof document>"u"?null:document;function E_(r,i,o){var c=xo;if(c&&typeof i=="string"&&i){var h=It(i);h='link[rel="'+r+'"][href="'+h+'"]',typeof o=="string"&&(h+='[crossorigin="'+o+'"]'),b_.has(h)||(b_.add(h),r={rel:r,crossOrigin:o,href:i},c.querySelector(h)===null&&(i=c.createElement("link"),nn(i,"link",r),At(i),c.head.appendChild(i)))}}function $A(r){ya.D(r),E_("dns-prefetch",r,null)}function YA(r,i){ya.C(r,i),E_("preconnect",r,i)}function KA(r,i,o){ya.L(r,i,o);var c=xo;if(c&&r&&i){var h='link[rel="preload"][as="'+It(i)+'"]';i==="image"&&o&&o.imageSrcSet?(h+='[imagesrcset="'+It(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(h+='[imagesizes="'+It(o.imageSizes)+'"]')):h+='[href="'+It(r)+'"]';var g=h;switch(i){case"style":g=To(r);break;case"script":g=wo(r)}tr.has(g)||(r=v({rel:"preload",href:i==="image"&&o&&o.imageSrcSet?void 0:r,as:i},o),tr.set(g,r),c.querySelector(h)!==null||i==="style"&&c.querySelector(ic(g))||i==="script"&&c.querySelector(sc(g))||(i=c.createElement("link"),nn(i,"link",r),At(i),c.head.appendChild(i)))}}function QA(r,i){ya.m(r,i);var o=xo;if(o&&r){var c=i&&typeof i.as=="string"?i.as:"script",h='link[rel="modulepreload"][as="'+It(c)+'"][href="'+It(r)+'"]',g=h;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=wo(r)}if(!tr.has(g)&&(r=v({rel:"modulepreload",href:r},i),tr.set(g,r),o.querySelector(h)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(sc(g)))return}c=o.createElement("link"),nn(c,"link",r),At(c),o.head.appendChild(c)}}}function WA(r,i,o){ya.S(r,i,o);var c=xo;if(c&&r){var h=yn(c).hoistableStyles,g=To(r);i=i||"default";var x=h.get(g);if(!x){var w={loading:0,preload:null};if(x=c.querySelector(ic(g)))w.loading=5;else{r=v({rel:"stylesheet",href:r,"data-precedence":i},o),(o=tr.get(g))&&sp(r,o);var D=x=c.createElement("link");At(D),nn(D,"link",r),D._p=new Promise(function($,J){D.onload=$,D.onerror=J}),D.addEventListener("load",function(){w.loading|=1}),D.addEventListener("error",function(){w.loading|=2}),w.loading|=4,Ed(x,i,c)}x={type:"stylesheet",instance:x,count:1,state:w},h.set(g,x)}}}function XA(r,i){ya.X(r,i);var o=xo;if(o&&r){var c=yn(o).hoistableScripts,h=wo(r),g=c.get(h);g||(g=o.querySelector(sc(h)),g||(r=v({src:r,async:!0},i),(i=tr.get(h))&&op(r,i),g=o.createElement("script"),At(g),nn(g,"link",r),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},c.set(h,g))}}function ZA(r,i){ya.M(r,i);var o=xo;if(o&&r){var c=yn(o).hoistableScripts,h=wo(r),g=c.get(h);g||(g=o.querySelector(sc(h)),g||(r=v({src:r,async:!0,type:"module"},i),(i=tr.get(h))&&op(r,i),g=o.createElement("script"),At(g),nn(g,"link",r),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},c.set(h,g))}}function x_(r,i,o,c){var h=(h=ee.current)?bd(h):null;if(!h)throw Error(a(446));switch(r){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(i=To(o.href),o=yn(h).hoistableStyles,c=o.get(i),c||(c={type:"style",instance:null,count:0,state:null},o.set(i,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){r=To(o.href);var g=yn(h).hoistableStyles,x=g.get(r);if(x||(h=h.ownerDocument||h,x={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(r,x),(g=h.querySelector(ic(r)))&&!g._p&&(x.instance=g,x.state.loading=5),tr.has(r)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},tr.set(r,o),g||JA(h,r,o,x.state))),i&&c===null)throw Error(a(528,""));return x}if(i&&c!==null)throw Error(a(529,""));return null;case"script":return i=o.async,o=o.src,typeof o=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=wo(o),o=yn(h).hoistableScripts,c=o.get(i),c||(c={type:"script",instance:null,count:0,state:null},o.set(i,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,r))}}function To(r){return'href="'+It(r)+'"'}function ic(r){return'link[rel="stylesheet"]['+r+"]"}function T_(r){return v({},r,{"data-precedence":r.precedence,precedence:null})}function JA(r,i,o,c){r.querySelector('link[rel="preload"][as="style"]['+i+"]")?c.loading=1:(i=r.createElement("link"),c.preload=i,i.addEventListener("load",function(){return c.loading|=1}),i.addEventListener("error",function(){return c.loading|=2}),nn(i,"link",o),At(i),r.head.appendChild(i))}function wo(r){return'[src="'+It(r)+'"]'}function sc(r){return"script[async]"+r}function w_(r,i,o){if(i.count++,i.instance===null)switch(i.type){case"style":var c=r.querySelector('style[data-href~="'+It(o.href)+'"]');if(c)return i.instance=c,At(c),c;var h=v({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return c=(r.ownerDocument||r).createElement("style"),At(c),nn(c,"style",h),Ed(c,o.precedence,r),i.instance=c;case"stylesheet":h=To(o.href);var g=r.querySelector(ic(h));if(g)return i.state.loading|=4,i.instance=g,At(g),g;c=T_(o),(h=tr.get(h))&&sp(c,h),g=(r.ownerDocument||r).createElement("link"),At(g);var x=g;return x._p=new Promise(function(w,D){x.onload=w,x.onerror=D}),nn(g,"link",c),i.state.loading|=4,Ed(g,o.precedence,r),i.instance=g;case"script":return g=wo(o.src),(h=r.querySelector(sc(g)))?(i.instance=h,At(h),h):(c=o,(h=tr.get(g))&&(c=v({},o),op(c,h)),r=r.ownerDocument||r,h=r.createElement("script"),At(h),nn(h,"link",c),r.head.appendChild(h),i.instance=h);case"void":return null;default:throw Error(a(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(c=i.instance,i.state.loading|=4,Ed(c,o.precedence,r));return i.instance}function Ed(r,i,o){for(var c=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=c.length?c[c.length-1]:null,g=h,x=0;x<c.length;x++){var w=c[x];if(w.dataset.precedence===i)g=w;else if(g!==h)break}g?g.parentNode.insertBefore(r,g.nextSibling):(i=o.nodeType===9?o.head:o,i.insertBefore(r,i.firstChild))}function sp(r,i){r.crossOrigin==null&&(r.crossOrigin=i.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=i.referrerPolicy),r.title==null&&(r.title=i.title)}function op(r,i){r.crossOrigin==null&&(r.crossOrigin=i.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=i.referrerPolicy),r.integrity==null&&(r.integrity=i.integrity)}var xd=null;function A_(r,i,o){if(xd===null){var c=new Map,h=xd=new Map;h.set(o,c)}else h=xd,c=h.get(o),c||(c=new Map,h.set(o,c));if(c.has(r))return c;for(c.set(r,null),o=o.getElementsByTagName(r),h=0;h<o.length;h++){var g=o[h];if(!(g[Li]||g[Mt]||r==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var x=g.getAttribute(i)||"";x=r+x;var w=c.get(x);w?w.push(g):c.set(x,[g])}}return c}function S_(r,i,o){r=r.ownerDocument||r,r.head.insertBefore(o,i==="title"?r.querySelector("head > title"):null)}function eS(r,i,o){if(o===1||i.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return r=i.disabled,typeof i.precedence=="string"&&r==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function N_(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}var oc=null;function tS(){}function nS(r,i,o){if(oc===null)throw Error(a(475));var c=oc;if(i.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var h=To(o.href),g=r.querySelector(ic(h));if(g){r=g._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(c.count++,c=Td.bind(c),r.then(c,c)),i.state.loading|=4,i.instance=g,At(g);return}g=r.ownerDocument||r,o=T_(o),(h=tr.get(h))&&sp(o,h),g=g.createElement("link"),At(g);var x=g;x._p=new Promise(function(w,D){x.onload=w,x.onerror=D}),nn(g,"link",o),i.instance=g}c.stylesheets===null&&(c.stylesheets=new Map),c.stylesheets.set(i,r),(r=i.state.preload)&&(i.state.loading&3)===0&&(c.count++,i=Td.bind(c),r.addEventListener("load",i),r.addEventListener("error",i))}}function rS(){if(oc===null)throw Error(a(475));var r=oc;return r.stylesheets&&r.count===0&&lp(r,r.stylesheets),0<r.count?function(i){var o=setTimeout(function(){if(r.stylesheets&&lp(r,r.stylesheets),r.unsuspend){var c=r.unsuspend;r.unsuspend=null,c()}},6e4);return r.unsuspend=i,function(){r.unsuspend=null,clearTimeout(o)}}:null}function Td(){if(this.count--,this.count===0){if(this.stylesheets)lp(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var wd=null;function lp(r,i){r.stylesheets=null,r.unsuspend!==null&&(r.count++,wd=new Map,i.forEach(aS,r),wd=null,Td.call(r))}function aS(r,i){if(!(i.state.loading&4)){var o=wd.get(r);if(o)var c=o.get(null);else{o=new Map,wd.set(r,o);for(var h=r.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<h.length;g++){var x=h[g];(x.nodeName==="LINK"||x.getAttribute("media")!=="not all")&&(o.set(x.dataset.precedence,x),c=x)}c&&o.set(null,c)}h=i.instance,x=h.getAttribute("data-precedence"),g=o.get(x)||c,g===c&&o.set(null,h),o.set(x,h),this.count++,c=Td.bind(this),h.addEventListener("load",c),h.addEventListener("error",c),g?g.parentNode.insertBefore(h,g.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(h,r.firstChild)),i.state.loading|=4}}var lc={$$typeof:q,Provider:null,Consumer:null,_currentValue:ye,_currentValue2:ye,_threadCount:0};function iS(r,i,o,c,h,g,x,w){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Yr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Yr(0),this.hiddenUpdates=Yr(null),this.identifierPrefix=c,this.onUncaughtError=h,this.onCaughtError=g,this.onRecoverableError=x,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=w,this.incompleteTransitions=new Map}function C_(r,i,o,c,h,g,x,w,D,$,J,re){return r=new iS(r,i,o,x,w,D,$,re),i=1,g===!0&&(i|=24),g=Mn(3,null,null,i),r.current=g,g.stateNode=r,i=Ff(),i.refCount++,r.pooledCache=i,i.refCount++,g.memoizedState={element:c,isDehydrated:o,cache:i},Yf(g),r}function R_(r){return r?(r=eo,r):eo}function I_(r,i,o,c,h,g){h=R_(h),c.context===null?c.context=h:c.pendingContext=h,c=Fa(i),c.payload={element:o},g=g===void 0?null:g,g!==null&&(c.callback=g),o=Ha(r,c,i),o!==null&&(zn(o,r,i),Ll(o,r,i))}function D_(r,i){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var o=r.retryLane;r.retryLane=o!==0&&o<i?o:i}}function cp(r,i){D_(r,i),(r=r.alternate)&&D_(r,i)}function O_(r){if(r.tag===13){var i=Js(r,67108864);i!==null&&zn(i,r,67108864),cp(r,67108864)}}var Ad=!0;function sS(r,i,o,c){var h=Z.T;Z.T=null;var g=ue.p;try{ue.p=2,up(r,i,o,c)}finally{ue.p=g,Z.T=h}}function oS(r,i,o,c){var h=Z.T;Z.T=null;var g=ue.p;try{ue.p=8,up(r,i,o,c)}finally{ue.p=g,Z.T=h}}function up(r,i,o,c){if(Ad){var h=dp(c);if(h===null)Xm(r,i,c,Sd,o),P_(r,c);else if(cS(h,r,i,o,c))c.stopPropagation();else if(P_(r,c),i&4&&-1<lS.indexOf(r)){for(;h!==null;){var g=Tr(h);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var x=or(g.pendingLanes);if(x!==0){var w=g;for(w.pendingLanes|=2,w.entangledLanes|=2;x;){var D=1<<31-cn(x);w.entanglements[1]|=D,x&=~D}Vr(g),(tt&6)===0&&(cd=Fn()+500,tc(0))}}break;case 13:w=Js(g,2),w!==null&&zn(w,g,2),dd(),cp(g,2)}if(g=dp(c),g===null&&Xm(r,i,c,Sd,o),g===h)break;h=g}h!==null&&c.stopPropagation()}else Xm(r,i,c,null,o)}}function dp(r){return r=$n(r),hp(r)}var Sd=null;function hp(r){if(Sd=null,r=Qr(r),r!==null){var i=l(r);if(i===null)r=null;else{var o=i.tag;if(o===13){if(r=u(i),r!==null)return r;r=null}else if(o===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;r=null}else i!==r&&(r=null)}}return Sd=r,null}function j_(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(pf()){case sl:return 2;case Os:return 8;case ji:case gf:return 32;case js:return 268435456;default:return 32}default:return 32}}var fp=!1,ri=null,ai=null,ii=null,cc=new Map,uc=new Map,si=[],lS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function P_(r,i){switch(r){case"focusin":case"focusout":ri=null;break;case"dragenter":case"dragleave":ai=null;break;case"mouseover":case"mouseout":ii=null;break;case"pointerover":case"pointerout":cc.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":uc.delete(i.pointerId)}}function dc(r,i,o,c,h,g){return r===null||r.nativeEvent!==g?(r={blockedOn:i,domEventName:o,eventSystemFlags:c,nativeEvent:g,targetContainers:[h]},i!==null&&(i=Tr(i),i!==null&&O_(i)),r):(r.eventSystemFlags|=c,i=r.targetContainers,h!==null&&i.indexOf(h)===-1&&i.push(h),r)}function cS(r,i,o,c,h){switch(i){case"focusin":return ri=dc(ri,r,i,o,c,h),!0;case"dragenter":return ai=dc(ai,r,i,o,c,h),!0;case"mouseover":return ii=dc(ii,r,i,o,c,h),!0;case"pointerover":var g=h.pointerId;return cc.set(g,dc(cc.get(g)||null,r,i,o,c,h)),!0;case"gotpointercapture":return g=h.pointerId,uc.set(g,dc(uc.get(g)||null,r,i,o,c,h)),!0}return!1}function M_(r){var i=Qr(r.target);if(i!==null){var o=l(i);if(o!==null){if(i=o.tag,i===13){if(i=u(o),i!==null){r.blockedOn=i,du(r.priority,function(){if(o.tag===13){var c=Un();c=Pa(c);var h=Js(o,c);h!==null&&zn(h,o,c),cp(o,c)}});return}}else if(i===3&&o.stateNode.current.memoizedState.isDehydrated){r.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Nd(r){if(r.blockedOn!==null)return!1;for(var i=r.targetContainers;0<i.length;){var o=dp(r.nativeEvent);if(o===null){o=r.nativeEvent;var c=new o.constructor(o.type,o);Jr=c,o.target.dispatchEvent(c),Jr=null}else return i=Tr(o),i!==null&&O_(i),r.blockedOn=o,!1;i.shift()}return!0}function k_(r,i,o){Nd(r)&&o.delete(i)}function uS(){fp=!1,ri!==null&&Nd(ri)&&(ri=null),ai!==null&&Nd(ai)&&(ai=null),ii!==null&&Nd(ii)&&(ii=null),cc.forEach(k_),uc.forEach(k_)}function Cd(r,i){r.blockedOn===i&&(r.blockedOn=null,fp||(fp=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,uS)))}var Rd=null;function V_(r){Rd!==r&&(Rd=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Rd===r&&(Rd=null);for(var i=0;i<r.length;i+=3){var o=r[i],c=r[i+1],h=r[i+2];if(typeof c!="function"){if(hp(c||o)===null)continue;break}var g=Tr(o);g!==null&&(r.splice(i,3),i-=3,hm(g,{pending:!0,data:h,method:o.method,action:c},c,h))}}))}function hc(r){function i(D){return Cd(D,r)}ri!==null&&Cd(ri,r),ai!==null&&Cd(ai,r),ii!==null&&Cd(ii,r),cc.forEach(i),uc.forEach(i);for(var o=0;o<si.length;o++){var c=si[o];c.blockedOn===r&&(c.blockedOn=null)}for(;0<si.length&&(o=si[0],o.blockedOn===null);)M_(o),o.blockedOn===null&&si.shift();if(o=(r.ownerDocument||r).$$reactFormReplay,o!=null)for(c=0;c<o.length;c+=3){var h=o[c],g=o[c+1],x=h[Rt]||null;if(typeof g=="function")x||V_(o);else if(x){var w=null;if(g&&g.hasAttribute("formAction")){if(h=g,x=g[Rt]||null)w=x.formAction;else if(hp(h)!==null)continue}else w=x.action;typeof w=="function"?o[c+1]=w:(o.splice(c,3),c-=3),V_(o)}}}function mp(r){this._internalRoot=r}Id.prototype.render=mp.prototype.render=function(r){var i=this._internalRoot;if(i===null)throw Error(a(409));var o=i.current,c=Un();I_(o,c,r,i,null,null)},Id.prototype.unmount=mp.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var i=r.containerInfo;I_(r.current,2,null,r,null,null),dd(),i[Hn]=null}};function Id(r){this._internalRoot=r}Id.prototype.unstable_scheduleHydration=function(r){if(r){var i=Ma();r={blockedOn:null,target:r,priority:i};for(var o=0;o<si.length&&i!==0&&i<si[o].priority;o++);si.splice(o,0,r),o===0&&M_(r)}};var L_=e.version;if(L_!=="19.1.0")throw Error(a(527,L_,"19.1.0"));ue.findDOMNode=function(r){var i=r._reactInternals;if(i===void 0)throw typeof r.render=="function"?Error(a(188)):(r=Object.keys(r).join(","),Error(a(268,r)));return r=p(i),r=r!==null?y(r):null,r=r===null?null:r.stateNode,r};var dS={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:Z,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Dd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Dd.isDisabled&&Dd.supportsFiber)try{xt=Dd.inject(dS),et=Dd}catch{}}return mc.createRoot=function(r,i){if(!s(r))throw Error(a(299));var o=!1,c="",h=ev,g=tv,x=nv,w=null;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(c=i.identifierPrefix),i.onUncaughtError!==void 0&&(h=i.onUncaughtError),i.onCaughtError!==void 0&&(g=i.onCaughtError),i.onRecoverableError!==void 0&&(x=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(w=i.unstable_transitionCallbacks)),i=C_(r,1,!1,null,null,o,c,h,g,x,w,null),r[Hn]=i.current,Wm(r),new mp(i)},mc.hydrateRoot=function(r,i,o){if(!s(r))throw Error(a(299));var c=!1,h="",g=ev,x=tv,w=nv,D=null,$=null;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(h=o.identifierPrefix),o.onUncaughtError!==void 0&&(g=o.onUncaughtError),o.onCaughtError!==void 0&&(x=o.onCaughtError),o.onRecoverableError!==void 0&&(w=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(D=o.unstable_transitionCallbacks),o.formState!==void 0&&($=o.formState)),i=C_(r,1,!0,i,o??null,c,h,g,x,w,D,$),i.context=R_(null),o=i.current,c=Un(),c=Pa(c),h=Fa(c),h.callback=null,Ha(o,h,c),o=c,i.current.lanes=o,Kr(i,o),Vr(i),r[Hn]=i.current,Wm(r),new Id(i)},mc.version="19.1.0",mc}var K_;function xS(){if(K_)return yp.exports;K_=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),yp.exports=ES(),yp.exports}var TS=xS(),pc={},Q_;function wS(){if(Q_)return pc;Q_=1,Object.defineProperty(pc,"__esModule",{value:!0}),pc.parse=u,pc.serialize=y;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,a=/^[\u0020-\u003A\u003D-\u007E]*$/,s=Object.prototype.toString,l=(()=>{const T=function(){};return T.prototype=Object.create(null),T})();function u(T,C){const A=new l,M=T.length;if(M<2)return A;const I=(C==null?void 0:C.decode)||v;let G=0;do{const Q=T.indexOf("=",G);if(Q===-1)break;const q=T.indexOf(";",G),oe=q===-1?M:q;if(Q>oe){G=T.lastIndexOf(";",Q-1)+1;continue}const ce=f(T,G,Q),pe=p(T,Q,ce),P=T.slice(ce,pe);if(A[P]===void 0){let R=f(T,Q+1,oe),N=p(T,oe,R);const j=I(T.slice(R,N));A[P]=j}G=oe+1}while(G<M);return A}function f(T,C,A){do{const M=T.charCodeAt(C);if(M!==32&&M!==9)return C}while(++C<A);return A}function p(T,C,A){for(;C>A;){const M=T.charCodeAt(--C);if(M!==32&&M!==9)return C+1}return A}function y(T,C,A){const M=(A==null?void 0:A.encode)||encodeURIComponent;if(!n.test(T))throw new TypeError(`argument name is invalid: ${T}`);const I=M(C);if(!e.test(I))throw new TypeError(`argument val is invalid: ${C}`);let G=T+"="+I;if(!A)return G;if(A.maxAge!==void 0){if(!Number.isInteger(A.maxAge))throw new TypeError(`option maxAge is invalid: ${A.maxAge}`);G+="; Max-Age="+A.maxAge}if(A.domain){if(!t.test(A.domain))throw new TypeError(`option domain is invalid: ${A.domain}`);G+="; Domain="+A.domain}if(A.path){if(!a.test(A.path))throw new TypeError(`option path is invalid: ${A.path}`);G+="; Path="+A.path}if(A.expires){if(!E(A.expires)||!Number.isFinite(A.expires.valueOf()))throw new TypeError(`option expires is invalid: ${A.expires}`);G+="; Expires="+A.expires.toUTCString()}if(A.httpOnly&&(G+="; HttpOnly"),A.secure&&(G+="; Secure"),A.partitioned&&(G+="; Partitioned"),A.priority)switch(typeof A.priority=="string"?A.priority.toLowerCase():void 0){case"low":G+="; Priority=Low";break;case"medium":G+="; Priority=Medium";break;case"high":G+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${A.priority}`)}if(A.sameSite)switch(typeof A.sameSite=="string"?A.sameSite.toLowerCase():A.sameSite){case!0:case"strict":G+="; SameSite=Strict";break;case"lax":G+="; SameSite=Lax";break;case"none":G+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${A.sameSite}`)}return G}function v(T){if(T.indexOf("%")===-1)return T;try{return decodeURIComponent(T)}catch{return T}}function E(T){return s.call(T)==="[object Date]"}return pc}wS();var W_="popstate";function AS(n={}){function e(s,l){let{pathname:u="/",search:f="",hash:p=""}=Ns(s.location.hash.substring(1));return!u.startsWith("/")&&!u.startsWith(".")&&(u="/"+u),Up("",{pathname:u,search:f,hash:p},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function t(s,l){let u=s.document.querySelector("base"),f="";if(u&&u.getAttribute("href")){let p=s.location.href,y=p.indexOf("#");f=y===-1?p:p.slice(0,y)}return f+"#"+(typeof l=="string"?l:Ic(l))}function a(s,l){ar(s.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(l)})`)}return NS(e,t,a,n)}function vt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function ar(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function SS(){return Math.random().toString(36).substring(2,10)}function X_(n,e){return{usr:n.state,key:n.key,idx:e}}function Up(n,e,t=null,a){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Ns(e):e,state:t,key:e&&e.key||a||SS()}}function Ic({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Ns(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let a=n.indexOf("?");a>=0&&(e.search=n.substring(a),n=n.substring(0,a)),n&&(e.pathname=n)}return e}function NS(n,e,t,a={}){let{window:s=document.defaultView,v5Compat:l=!1}=a,u=s.history,f="POP",p=null,y=v();y==null&&(y=0,u.replaceState({...u.state,idx:y},""));function v(){return(u.state||{idx:null}).idx}function E(){f="POP";let I=v(),G=I==null?null:I-y;y=I,p&&p({action:f,location:M.location,delta:G})}function T(I,G){f="PUSH";let Q=Up(M.location,I,G);t&&t(Q,I),y=v()+1;let q=X_(Q,y),oe=M.createHref(Q);try{u.pushState(q,"",oe)}catch(ce){if(ce instanceof DOMException&&ce.name==="DataCloneError")throw ce;s.location.assign(oe)}l&&p&&p({action:f,location:M.location,delta:1})}function C(I,G){f="REPLACE";let Q=Up(M.location,I,G);t&&t(Q,I),y=v();let q=X_(Q,y),oe=M.createHref(Q);u.replaceState(q,"",oe),l&&p&&p({action:f,location:M.location,delta:0})}function A(I){return CS(I)}let M={get action(){return f},get location(){return n(s,u)},listen(I){if(p)throw new Error("A history only accepts one active listener");return s.addEventListener(W_,E),p=I,()=>{s.removeEventListener(W_,E),p=null}},createHref(I){return e(s,I)},createURL:A,encodeLocation(I){let G=A(I);return{pathname:G.pathname,search:G.search,hash:G.hash}},push:T,replace:C,go(I){return u.go(I)}};return M}function CS(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),vt(t,"No window.location.(origin|href) available to create URL");let a=typeof n=="string"?n:Ic(n);return a=a.replace(/ $/,"%20"),!e&&a.startsWith("//")&&(a=t+a),new URL(a,t)}function o1(n,e,t="/"){return RS(n,e,t,!1)}function RS(n,e,t,a){let s=typeof e=="string"?Ns(e):e,l=Ta(s.pathname||"/",t);if(l==null)return null;let u=l1(n);IS(u);let f=null;for(let p=0;f==null&&p<u.length;++p){let y=BS(l);f=US(u[p],y,a)}return f}function l1(n,e=[],t=[],a=""){let s=(l,u,f)=>{let p={relativePath:f===void 0?l.path||"":f,caseSensitive:l.caseSensitive===!0,childrenIndex:u,route:l};p.relativePath.startsWith("/")&&(vt(p.relativePath.startsWith(a),`Absolute route path "${p.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(a.length));let y=ba([a,p.relativePath]),v=t.concat(p);l.children&&l.children.length>0&&(vt(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${y}".`),l1(l.children,e,v,y)),!(l.path==null&&!l.index)&&e.push({path:y,score:VS(y,l.index),routesMeta:v})};return n.forEach((l,u)=>{var f;if(l.path===""||!((f=l.path)!=null&&f.includes("?")))s(l,u);else for(let p of c1(l.path))s(l,u,p)}),e}function c1(n){let e=n.split("/");if(e.length===0)return[];let[t,...a]=e,s=t.endsWith("?"),l=t.replace(/\?$/,"");if(a.length===0)return s?[l,""]:[l];let u=c1(a.join("/")),f=[];return f.push(...u.map(p=>p===""?l:[l,p].join("/"))),s&&f.push(...u),f.map(p=>n.startsWith("/")&&p===""?"/":p)}function IS(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:LS(e.routesMeta.map(a=>a.childrenIndex),t.routesMeta.map(a=>a.childrenIndex)))}var DS=/^:[\w-]+$/,OS=3,jS=2,PS=1,MS=10,kS=-2,Z_=n=>n==="*";function VS(n,e){let t=n.split("/"),a=t.length;return t.some(Z_)&&(a+=kS),e&&(a+=jS),t.filter(s=>!Z_(s)).reduce((s,l)=>s+(DS.test(l)?OS:l===""?PS:MS),a)}function LS(n,e){return n.length===e.length&&n.slice(0,-1).every((a,s)=>a===e[s])?n[n.length-1]-e[e.length-1]:0}function US(n,e,t=!1){let{routesMeta:a}=n,s={},l="/",u=[];for(let f=0;f<a.length;++f){let p=a[f],y=f===a.length-1,v=l==="/"?e:e.slice(l.length)||"/",E=rh({path:p.relativePath,caseSensitive:p.caseSensitive,end:y},v),T=p.route;if(!E&&y&&t&&!a[a.length-1].route.index&&(E=rh({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},v)),!E)return null;Object.assign(s,E.params),u.push({params:s,pathname:ba([l,E.pathname]),pathnameBase:GS(ba([l,E.pathnameBase])),route:T}),E.pathnameBase!=="/"&&(l=ba([l,E.pathnameBase]))}return u}function rh(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,a]=zS(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let l=s[0],u=l.replace(/(.)\/+$/,"$1"),f=s.slice(1);return{params:a.reduce((y,{paramName:v,isOptional:E},T)=>{if(v==="*"){let A=f[T]||"";u=l.slice(0,l.length-A.length).replace(/(.)\/+$/,"$1")}const C=f[T];return E&&!C?y[v]=void 0:y[v]=(C||"").replace(/%2F/g,"/"),y},{}),pathname:l,pathnameBase:u,pattern:n}}function zS(n,e=!1,t=!0){ar(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let a=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,f,p)=>(a.push({paramName:f,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(a.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),a]}function BS(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ar(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Ta(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,a=n.charAt(t);return a&&a!=="/"?null:n.slice(t)||"/"}function qS(n,e="/"){let{pathname:t,search:a="",hash:s=""}=typeof n=="string"?Ns(n):n;return{pathname:t?t.startsWith("/")?t:FS(t,e):e,search:$S(a),hash:YS(s)}}function FS(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function Ep(n,e,t,a){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function HS(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function bg(n){let e=HS(n);return e.map((t,a)=>a===e.length-1?t.pathname:t.pathnameBase)}function Eg(n,e,t,a=!1){let s;typeof n=="string"?s=Ns(n):(s={...n},vt(!s.pathname||!s.pathname.includes("?"),Ep("?","pathname","search",s)),vt(!s.pathname||!s.pathname.includes("#"),Ep("#","pathname","hash",s)),vt(!s.search||!s.search.includes("#"),Ep("#","search","hash",s)));let l=n===""||s.pathname==="",u=l?"/":s.pathname,f;if(u==null)f=t;else{let E=e.length-1;if(!a&&u.startsWith("..")){let T=u.split("/");for(;T[0]==="..";)T.shift(),E-=1;s.pathname=T.join("/")}f=E>=0?e[E]:"/"}let p=qS(s,f),y=u&&u!=="/"&&u.endsWith("/"),v=(l||u===".")&&t.endsWith("/");return!p.pathname.endsWith("/")&&(y||v)&&(p.pathname+="/"),p}var ba=n=>n.join("/").replace(/\/\/+/g,"/"),GS=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),$S=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,YS=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function KS(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var u1=["POST","PUT","PATCH","DELETE"];new Set(u1);var QS=["GET",...u1];new Set(QS);var Qo=V.createContext(null);Qo.displayName="DataRouter";var Ih=V.createContext(null);Ih.displayName="DataRouterState";var d1=V.createContext({isTransitioning:!1});d1.displayName="ViewTransition";var WS=V.createContext(new Map);WS.displayName="Fetchers";var XS=V.createContext(null);XS.displayName="Await";var _r=V.createContext(null);_r.displayName="Navigation";var Fc=V.createContext(null);Fc.displayName="Location";var sr=V.createContext({outlet:null,matches:[],isDataRoute:!1});sr.displayName="Route";var xg=V.createContext(null);xg.displayName="RouteError";function ZS(n,{relative:e}={}){vt(Wo(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:a}=V.useContext(_r),{hash:s,pathname:l,search:u}=Hc(n,{relative:e}),f=l;return t!=="/"&&(f=l==="/"?t:ba([t,l])),a.createHref({pathname:f,search:u,hash:s})}function Wo(){return V.useContext(Fc)!=null}function Ci(){return vt(Wo(),"useLocation() may be used only in the context of a <Router> component."),V.useContext(Fc).location}var h1="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function f1(n){V.useContext(_r).static||V.useLayoutEffect(n)}function Tn(){let{isDataRoute:n}=V.useContext(sr);return n?fN():JS()}function JS(){vt(Wo(),"useNavigate() may be used only in the context of a <Router> component.");let n=V.useContext(Qo),{basename:e,navigator:t}=V.useContext(_r),{matches:a}=V.useContext(sr),{pathname:s}=Ci(),l=JSON.stringify(bg(a)),u=V.useRef(!1);return f1(()=>{u.current=!0}),V.useCallback((p,y={})=>{if(ar(u.current,h1),!u.current)return;if(typeof p=="number"){t.go(p);return}let v=Eg(p,JSON.parse(l),s,y.relative==="path");n==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:ba([e,v.pathname])),(y.replace?t.replace:t.push)(v,y.state,y)},[e,t,l,s,n])}var eN=V.createContext(null);function tN(n){let e=V.useContext(sr).outlet;return e&&V.createElement(eN.Provider,{value:n},e)}function Tg(){let{matches:n}=V.useContext(sr),e=n[n.length-1];return e?e.params:{}}function Hc(n,{relative:e}={}){let{matches:t}=V.useContext(sr),{pathname:a}=Ci(),s=JSON.stringify(bg(t));return V.useMemo(()=>Eg(n,JSON.parse(s),a,e==="path"),[n,s,a,e])}function nN(n,e){return m1(n,e)}function m1(n,e,t,a){var Q;vt(Wo(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s,static:l}=V.useContext(_r),{matches:u}=V.useContext(sr),f=u[u.length-1],p=f?f.params:{},y=f?f.pathname:"/",v=f?f.pathnameBase:"/",E=f&&f.route;{let q=E&&E.path||"";p1(y,!E||q.endsWith("*")||q.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${y}" (under <Route path="${q}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${q}"> to <Route path="${q==="/"?"*":`${q}/*`}">.`)}let T=Ci(),C;if(e){let q=typeof e=="string"?Ns(e):e;vt(v==="/"||((Q=q.pathname)==null?void 0:Q.startsWith(v)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${v}" but pathname "${q.pathname}" was given in the \`location\` prop.`),C=q}else C=T;let A=C.pathname||"/",M=A;if(v!=="/"){let q=v.replace(/^\//,"").split("/");M="/"+A.replace(/^\//,"").split("/").slice(q.length).join("/")}let I=!l&&t&&t.matches&&t.matches.length>0?t.matches:o1(n,{pathname:M});ar(E||I!=null,`No routes matched location "${C.pathname}${C.search}${C.hash}" `),ar(I==null||I[I.length-1].route.element!==void 0||I[I.length-1].route.Component!==void 0||I[I.length-1].route.lazy!==void 0,`Matched leaf route at location "${C.pathname}${C.search}${C.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let G=oN(I&&I.map(q=>Object.assign({},q,{params:Object.assign({},p,q.params),pathname:ba([v,s.encodeLocation?s.encodeLocation(q.pathname).pathname:q.pathname]),pathnameBase:q.pathnameBase==="/"?v:ba([v,s.encodeLocation?s.encodeLocation(q.pathnameBase).pathname:q.pathnameBase])})),u,t,a);return e&&G?V.createElement(Fc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...C},navigationType:"POP"}},G):G}function rN(){let n=hN(),e=KS(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,a="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:a},l={padding:"2px 4px",backgroundColor:a},u=null;return console.error("Error handled by React Router default ErrorBoundary:",n),u=V.createElement(V.Fragment,null,V.createElement("p",null,"💿 Hey developer 👋"),V.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",V.createElement("code",{style:l},"ErrorBoundary")," or"," ",V.createElement("code",{style:l},"errorElement")," prop on your route.")),V.createElement(V.Fragment,null,V.createElement("h2",null,"Unexpected Application Error!"),V.createElement("h3",{style:{fontStyle:"italic"}},e),t?V.createElement("pre",{style:s},t):null,u)}var aN=V.createElement(rN,null),iN=class extends V.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?V.createElement(sr.Provider,{value:this.props.routeContext},V.createElement(xg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function sN({routeContext:n,match:e,children:t}){let a=V.useContext(Qo);return a&&a.static&&a.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=e.route.id),V.createElement(sr.Provider,{value:n},t)}function oN(n,e=[],t=null,a=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let s=n,l=t==null?void 0:t.errors;if(l!=null){let p=s.findIndex(y=>y.route.id&&(l==null?void 0:l[y.route.id])!==void 0);vt(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),s=s.slice(0,Math.min(s.length,p+1))}let u=!1,f=-1;if(t)for(let p=0;p<s.length;p++){let y=s[p];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(f=p),y.route.id){let{loaderData:v,errors:E}=t,T=y.route.loader&&!v.hasOwnProperty(y.route.id)&&(!E||E[y.route.id]===void 0);if(y.route.lazy||T){u=!0,f>=0?s=s.slice(0,f+1):s=[s[0]];break}}}return s.reduceRight((p,y,v)=>{let E,T=!1,C=null,A=null;t&&(E=l&&y.route.id?l[y.route.id]:void 0,C=y.route.errorElement||aN,u&&(f<0&&v===0?(p1("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),T=!0,A=null):f===v&&(T=!0,A=y.route.hydrateFallbackElement||null)));let M=e.concat(s.slice(0,v+1)),I=()=>{let G;return E?G=C:T?G=A:y.route.Component?G=V.createElement(y.route.Component,null):y.route.element?G=y.route.element:G=p,V.createElement(sN,{match:y,routeContext:{outlet:p,matches:M,isDataRoute:t!=null},children:G})};return t&&(y.route.ErrorBoundary||y.route.errorElement||v===0)?V.createElement(iN,{location:t.location,revalidation:t.revalidation,component:C,error:E,children:I(),routeContext:{outlet:null,matches:M,isDataRoute:!0}}):I()},null)}function wg(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function lN(n){let e=V.useContext(Qo);return vt(e,wg(n)),e}function cN(n){let e=V.useContext(Ih);return vt(e,wg(n)),e}function uN(n){let e=V.useContext(sr);return vt(e,wg(n)),e}function Ag(n){let e=uN(n),t=e.matches[e.matches.length-1];return vt(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function dN(){return Ag("useRouteId")}function hN(){var a;let n=V.useContext(xg),e=cN("useRouteError"),t=Ag("useRouteError");return n!==void 0?n:(a=e.errors)==null?void 0:a[t]}function fN(){let{router:n}=lN("useNavigate"),e=Ag("useNavigate"),t=V.useRef(!1);return f1(()=>{t.current=!0}),V.useCallback(async(s,l={})=>{ar(t.current,h1),t.current&&(typeof s=="number"?n.navigate(s):await n.navigate(s,{fromRouteId:e,...l}))},[n,e])}var J_={};function p1(n,e,t){!e&&!J_[n]&&(J_[n]=!0,ar(!1,t))}V.memo(mN);function mN({routes:n,future:e,state:t}){return m1(n,void 0,t,e)}function g1({to:n,replace:e,state:t,relative:a}){vt(Wo(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=V.useContext(_r);ar(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=V.useContext(sr),{pathname:u}=Ci(),f=Tn(),p=Eg(n,bg(l),u,a==="path"),y=JSON.stringify(p);return V.useEffect(()=>{f(JSON.parse(y),{replace:e,state:t,relative:a})},[f,y,a,e,t]),null}function pN(n){return tN(n.context)}function En(n){vt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function gN({basename:n="/",children:e=null,location:t,navigationType:a="POP",navigator:s,static:l=!1}){vt(!Wo(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=n.replace(/^\/*/,"/"),f=V.useMemo(()=>({basename:u,navigator:s,static:l,future:{}}),[u,s,l]);typeof t=="string"&&(t=Ns(t));let{pathname:p="/",search:y="",hash:v="",state:E=null,key:T="default"}=t,C=V.useMemo(()=>{let A=Ta(p,u);return A==null?null:{location:{pathname:A,search:y,hash:v,state:E,key:T},navigationType:a}},[u,p,y,v,E,T,a]);return ar(C!=null,`<Router basename="${u}"> is not able to match the URL "${p}${y}${v}" because it does not start with the basename, so the <Router> won't render anything.`),C==null?null:V.createElement(_r.Provider,{value:f},V.createElement(Fc.Provider,{children:e,value:C}))}function yN({children:n,location:e}){return nN(zp(n),e)}function zp(n,e=[]){let t=[];return V.Children.forEach(n,(a,s)=>{if(!V.isValidElement(a))return;let l=[...e,s];if(a.type===V.Fragment){t.push.apply(t,zp(a.props.children,l));return}vt(a.type===En,`[${typeof a.type=="string"?a.type:a.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),vt(!a.props.index||!a.props.children,"An index route cannot have child routes.");let u={id:a.props.id||l.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,hydrateFallbackElement:a.props.hydrateFallbackElement,HydrateFallback:a.props.HydrateFallback,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.hasErrorBoundary===!0||a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(u.children=zp(a.props.children,l)),t.push(u)}),t}var zd="get",Bd="application/x-www-form-urlencoded";function Dh(n){return n!=null&&typeof n.tagName=="string"}function vN(n){return Dh(n)&&n.tagName.toLowerCase()==="button"}function _N(n){return Dh(n)&&n.tagName.toLowerCase()==="form"}function bN(n){return Dh(n)&&n.tagName.toLowerCase()==="input"}function EN(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function xN(n,e){return n.button===0&&(!e||e==="_self")&&!EN(n)}var Od=null;function TN(){if(Od===null)try{new FormData(document.createElement("form"),0),Od=!1}catch{Od=!0}return Od}var wN=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function xp(n){return n!=null&&!wN.has(n)?(ar(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Bd}"`),null):n}function AN(n,e){let t,a,s,l,u;if(_N(n)){let f=n.getAttribute("action");a=f?Ta(f,e):null,t=n.getAttribute("method")||zd,s=xp(n.getAttribute("enctype"))||Bd,l=new FormData(n)}else if(vN(n)||bN(n)&&(n.type==="submit"||n.type==="image")){let f=n.form;if(f==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=n.getAttribute("formaction")||f.getAttribute("action");if(a=p?Ta(p,e):null,t=n.getAttribute("formmethod")||f.getAttribute("method")||zd,s=xp(n.getAttribute("formenctype"))||xp(f.getAttribute("enctype"))||Bd,l=new FormData(f,n),!TN()){let{name:y,type:v,value:E}=n;if(v==="image"){let T=y?`${y}.`:"";l.append(`${T}x`,"0"),l.append(`${T}y`,"0")}else y&&l.append(y,E)}}else{if(Dh(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=zd,a=null,s=Bd,u=n}return l&&s==="text/plain"&&(u=l,l=void 0),{action:a,method:t.toLowerCase(),encType:s,formData:l,body:u}}function Sg(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function SN(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function NN(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function CN(n,e,t){let a=await Promise.all(n.map(async s=>{let l=e.routes[s.route.id];if(l){let u=await SN(l,t);return u.links?u.links():[]}return[]}));return ON(a.flat(1).filter(NN).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function eb(n,e,t,a,s,l){let u=(p,y)=>t[y]?p.route.id!==t[y].route.id:!0,f=(p,y)=>{var v;return t[y].pathname!==p.pathname||((v=t[y].route.path)==null?void 0:v.endsWith("*"))&&t[y].params["*"]!==p.params["*"]};return l==="assets"?e.filter((p,y)=>u(p,y)||f(p,y)):l==="data"?e.filter((p,y)=>{var E;let v=a.routes[p.route.id];if(!v||!v.hasLoader)return!1;if(u(p,y)||f(p,y))return!0;if(p.route.shouldRevalidate){let T=p.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((E=t[0])==null?void 0:E.params)||{},nextUrl:new URL(n,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof T=="boolean")return T}return!0}):[]}function RN(n,e,{includeHydrateFallback:t}={}){return IN(n.map(a=>{let s=e.routes[a.route.id];if(!s)return[];let l=[s.module];return s.clientActionModule&&(l=l.concat(s.clientActionModule)),s.clientLoaderModule&&(l=l.concat(s.clientLoaderModule)),t&&s.hydrateFallbackModule&&(l=l.concat(s.hydrateFallbackModule)),s.imports&&(l=l.concat(s.imports)),l}).flat(1))}function IN(n){return[...new Set(n)]}function DN(n){let e={},t=Object.keys(n).sort();for(let a of t)e[a]=n[a];return e}function ON(n,e){let t=new Set;return new Set(e),n.reduce((a,s)=>{let l=JSON.stringify(DN(s));return t.has(l)||(t.add(l),a.push({key:l,link:s})),a},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var jN=new Set([100,101,204,205]);function PN(n,e){let t=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t.pathname==="/"?t.pathname="_root.data":e&&Ta(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function y1(){let n=V.useContext(Qo);return Sg(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function MN(){let n=V.useContext(Ih);return Sg(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Ng=V.createContext(void 0);Ng.displayName="FrameworkContext";function v1(){let n=V.useContext(Ng);return Sg(n,"You must render this element inside a <HydratedRouter> element"),n}function kN(n,e){let t=V.useContext(Ng),[a,s]=V.useState(!1),[l,u]=V.useState(!1),{onFocus:f,onBlur:p,onMouseEnter:y,onMouseLeave:v,onTouchStart:E}=e,T=V.useRef(null);V.useEffect(()=>{if(n==="render"&&u(!0),n==="viewport"){let M=G=>{G.forEach(Q=>{u(Q.isIntersecting)})},I=new IntersectionObserver(M,{threshold:.5});return T.current&&I.observe(T.current),()=>{I.disconnect()}}},[n]),V.useEffect(()=>{if(a){let M=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(M)}}},[a]);let C=()=>{s(!0)},A=()=>{s(!1),u(!1)};return t?n!=="intent"?[l,T,{}]:[l,T,{onFocus:gc(f,C),onBlur:gc(p,A),onMouseEnter:gc(y,C),onMouseLeave:gc(v,A),onTouchStart:gc(E,C)}]:[!1,T,{}]}function gc(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function VN({page:n,...e}){let{router:t}=y1(),a=V.useMemo(()=>o1(t.routes,n,t.basename),[t.routes,n,t.basename]);return a?V.createElement(UN,{page:n,matches:a,...e}):null}function LN(n){let{manifest:e,routeModules:t}=v1(),[a,s]=V.useState([]);return V.useEffect(()=>{let l=!1;return CN(n,e,t).then(u=>{l||s(u)}),()=>{l=!0}},[n,e,t]),a}function UN({page:n,matches:e,...t}){let a=Ci(),{manifest:s,routeModules:l}=v1(),{basename:u}=y1(),{loaderData:f,matches:p}=MN(),y=V.useMemo(()=>eb(n,e,p,s,a,"data"),[n,e,p,s,a]),v=V.useMemo(()=>eb(n,e,p,s,a,"assets"),[n,e,p,s,a]),E=V.useMemo(()=>{if(n===a.pathname+a.search+a.hash)return[];let A=new Set,M=!1;if(e.forEach(G=>{var q;let Q=s.routes[G.route.id];!Q||!Q.hasLoader||(!y.some(oe=>oe.route.id===G.route.id)&&G.route.id in f&&((q=l[G.route.id])!=null&&q.shouldRevalidate)||Q.hasClientLoader?M=!0:A.add(G.route.id))}),A.size===0)return[];let I=PN(n,u);return M&&A.size>0&&I.searchParams.set("_routes",e.filter(G=>A.has(G.route.id)).map(G=>G.route.id).join(",")),[I.pathname+I.search]},[u,f,a,s,y,e,n,l]),T=V.useMemo(()=>RN(v,s),[v,s]),C=LN(v);return V.createElement(V.Fragment,null,E.map(A=>V.createElement("link",{key:A,rel:"prefetch",as:"fetch",href:A,...t})),T.map(A=>V.createElement("link",{key:A,rel:"modulepreload",href:A,...t})),C.map(({key:A,link:M})=>V.createElement("link",{key:A,...M})))}function zN(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var _1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{_1&&(window.__reactRouterVersion="7.6.0")}catch{}function BN({basename:n,children:e,window:t}){let a=V.useRef();a.current==null&&(a.current=AS({window:t,v5Compat:!0}));let s=a.current,[l,u]=V.useState({action:s.action,location:s.location}),f=V.useCallback(p=>{V.startTransition(()=>u(p))},[u]);return V.useLayoutEffect(()=>s.listen(f),[s,f]),V.createElement(gN,{basename:n,children:e,location:l.location,navigationType:l.action,navigator:s})}var b1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Oh=V.forwardRef(function({onClick:e,discover:t="render",prefetch:a="none",relative:s,reloadDocument:l,replace:u,state:f,target:p,to:y,preventScrollReset:v,viewTransition:E,...T},C){let{basename:A}=V.useContext(_r),M=typeof y=="string"&&b1.test(y),I,G=!1;if(typeof y=="string"&&M&&(I=y,_1))try{let N=new URL(window.location.href),j=y.startsWith("//")?new URL(N.protocol+y):new URL(y),L=Ta(j.pathname,A);j.origin===N.origin&&L!=null?y=L+j.search+j.hash:G=!0}catch{ar(!1,`<Link to="${y}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let Q=ZS(y,{relative:s}),[q,oe,ce]=kN(a,T),pe=HN(y,{replace:u,state:f,target:p,preventScrollReset:v,relative:s,viewTransition:E});function P(N){e&&e(N),N.defaultPrevented||pe(N)}let R=V.createElement("a",{...T,...ce,href:I||Q,onClick:G||l?e:P,ref:zN(C,oe),target:p,"data-discover":!M&&t==="render"?"true":void 0});return q&&!M?V.createElement(V.Fragment,null,R,V.createElement(VN,{page:Q})):R});Oh.displayName="Link";var fs=V.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:a="",end:s=!1,style:l,to:u,viewTransition:f,children:p,...y},v){let E=Hc(u,{relative:y.relative}),T=Ci(),C=V.useContext(Ih),{navigator:A,basename:M}=V.useContext(_r),I=C!=null&&QN(E)&&f===!0,G=A.encodeLocation?A.encodeLocation(E).pathname:E.pathname,Q=T.pathname,q=C&&C.navigation&&C.navigation.location?C.navigation.location.pathname:null;t||(Q=Q.toLowerCase(),q=q?q.toLowerCase():null,G=G.toLowerCase()),q&&M&&(q=Ta(q,M)||q);const oe=G!=="/"&&G.endsWith("/")?G.length-1:G.length;let ce=Q===G||!s&&Q.startsWith(G)&&Q.charAt(oe)==="/",pe=q!=null&&(q===G||!s&&q.startsWith(G)&&q.charAt(G.length)==="/"),P={isActive:ce,isPending:pe,isTransitioning:I},R=ce?e:void 0,N;typeof a=="function"?N=a(P):N=[a,ce?"active":null,pe?"pending":null,I?"transitioning":null].filter(Boolean).join(" ");let j=typeof l=="function"?l(P):l;return V.createElement(Oh,{...y,"aria-current":R,className:N,ref:v,style:j,to:u,viewTransition:f},typeof p=="function"?p(P):p)});fs.displayName="NavLink";var qN=V.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:a,replace:s,state:l,method:u=zd,action:f,onSubmit:p,relative:y,preventScrollReset:v,viewTransition:E,...T},C)=>{let A=YN(),M=KN(f,{relative:y}),I=u.toLowerCase()==="get"?"get":"post",G=typeof f=="string"&&b1.test(f),Q=q=>{if(p&&p(q),q.defaultPrevented)return;q.preventDefault();let oe=q.nativeEvent.submitter,ce=(oe==null?void 0:oe.getAttribute("formmethod"))||u;A(oe||q.currentTarget,{fetcherKey:e,method:ce,navigate:t,replace:s,state:l,relative:y,preventScrollReset:v,viewTransition:E})};return V.createElement("form",{ref:C,method:I,action:M,onSubmit:a?p:Q,...T,"data-discover":!G&&n==="render"?"true":void 0})});qN.displayName="Form";function FN(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function E1(n){let e=V.useContext(Qo);return vt(e,FN(n)),e}function HN(n,{target:e,replace:t,state:a,preventScrollReset:s,relative:l,viewTransition:u}={}){let f=Tn(),p=Ci(),y=Hc(n,{relative:l});return V.useCallback(v=>{if(xN(v,e)){v.preventDefault();let E=t!==void 0?t:Ic(p)===Ic(y);f(n,{replace:E,state:a,preventScrollReset:s,relative:l,viewTransition:u})}},[p,f,y,t,a,e,n,s,l,u])}var GN=0,$N=()=>`__${String(++GN)}__`;function YN(){let{router:n}=E1("useSubmit"),{basename:e}=V.useContext(_r),t=dN();return V.useCallback(async(a,s={})=>{let{action:l,method:u,encType:f,formData:p,body:y}=AN(a,e);if(s.navigate===!1){let v=s.fetcherKey||$N();await n.fetch(v,t,s.action||l,{preventScrollReset:s.preventScrollReset,formData:p,body:y,formMethod:s.method||u,formEncType:s.encType||f,flushSync:s.flushSync})}else await n.navigate(s.action||l,{preventScrollReset:s.preventScrollReset,formData:p,body:y,formMethod:s.method||u,formEncType:s.encType||f,replace:s.replace,state:s.state,fromRouteId:t,flushSync:s.flushSync,viewTransition:s.viewTransition})},[n,e,t])}function KN(n,{relative:e}={}){let{basename:t}=V.useContext(_r),a=V.useContext(sr);vt(a,"useFormAction must be used inside a RouteContext");let[s]=a.matches.slice(-1),l={...Hc(n||".",{relative:e})},u=Ci();if(n==null){l.search=u.search;let f=new URLSearchParams(l.search),p=f.getAll("index");if(p.some(v=>v==="")){f.delete("index"),p.filter(E=>E).forEach(E=>f.append("index",E));let v=f.toString();l.search=v?`?${v}`:""}}return(!n||n===".")&&s.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:ba([t,l.pathname])),Ic(l)}function QN(n,e={}){let t=V.useContext(d1);vt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=E1("useViewTransitionState"),s=Hc(n,{relative:e.relative});if(!t.isTransitioning)return!1;let l=Ta(t.currentLocation.pathname,a)||t.currentLocation.pathname,u=Ta(t.nextLocation.pathname,a)||t.nextLocation.pathname;return rh(s.pathname,u)!=null||rh(s.pathname,l)!=null}[...jN];const WN=()=>{};var tb={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x1=function(n){const e=[];let t=0;for(let a=0;a<n.length;a++){let s=n.charCodeAt(a);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&a+1<n.length&&(n.charCodeAt(a+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++a)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},XN=function(n){const e=[];let t=0,a=0;for(;t<n.length;){const s=n[t++];if(s<128)e[a++]=String.fromCharCode(s);else if(s>191&&s<224){const l=n[t++];e[a++]=String.fromCharCode((s&31)<<6|l&63)}else if(s>239&&s<365){const l=n[t++],u=n[t++],f=n[t++],p=((s&7)<<18|(l&63)<<12|(u&63)<<6|f&63)-65536;e[a++]=String.fromCharCode(55296+(p>>10)),e[a++]=String.fromCharCode(56320+(p&1023))}else{const l=n[t++],u=n[t++];e[a++]=String.fromCharCode((s&15)<<12|(l&63)<<6|u&63)}}return e.join("")},T1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,a=[];for(let s=0;s<n.length;s+=3){const l=n[s],u=s+1<n.length,f=u?n[s+1]:0,p=s+2<n.length,y=p?n[s+2]:0,v=l>>2,E=(l&3)<<4|f>>4;let T=(f&15)<<2|y>>6,C=y&63;p||(C=64,u||(T=64)),a.push(t[v],t[E],t[T],t[C])}return a.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(x1(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):XN(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,a=[];for(let s=0;s<n.length;){const l=t[n.charAt(s++)],f=s<n.length?t[n.charAt(s)]:0;++s;const y=s<n.length?t[n.charAt(s)]:64;++s;const E=s<n.length?t[n.charAt(s)]:64;if(++s,l==null||f==null||y==null||E==null)throw new ZN;const T=l<<2|f>>4;if(a.push(T),y!==64){const C=f<<4&240|y>>2;if(a.push(C),E!==64){const A=y<<6&192|E;a.push(A)}}}return a},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class ZN extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const JN=function(n){const e=x1(n);return T1.encodeByteArray(e,!0)},ah=function(n){return JN(n).replace(/\./g,"")},w1=function(n){try{return T1.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tC=()=>eC().__FIREBASE_DEFAULTS__,nC=()=>{if(typeof process>"u"||typeof tb>"u")return;const n=tb.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},rC=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&w1(n[1]);return e&&JSON.parse(e)},jh=()=>{try{return WN()||tC()||nC()||rC()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},A1=n=>{var e,t;return(t=(e=jh())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},aC=n=>{const e=A1(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const a=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),a]:[e.substring(0,t),a]},S1=()=>{var n;return(n=jh())===null||n===void 0?void 0:n.config},N1=n=>{var e;return(e=jh())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,a)=>{t?this.reject(t):this.resolve(a),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,a))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gc(n){return n.endsWith(".cloudworkstations.dev")}async function C1(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sC(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},a=e||"demo-project",s=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${a}`,aud:a,iat:s,exp:s+3600,auth_time:s,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},n);return[ah(JSON.stringify(t)),ah(JSON.stringify(u)),""].join(".")}const wc={};function oC(){const n={prod:[],emulator:[]};for(const e of Object.keys(wc))wc[e]?n.emulator.push(e):n.prod.push(e);return n}function lC(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let nb=!1;function Ph(n,e){if(typeof window>"u"||typeof document>"u"||!Gc(window.location.host)||wc[n]===e||wc[n]||nb)return;wc[n]=e;function t(T){return`__firebase__banner__${T}`}const a="__firebase__banner",l=oC().prod.length>0;function u(){const T=document.getElementById(a);T&&T.remove()}function f(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function p(T,C){T.setAttribute("width","24"),T.setAttribute("id",C),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function y(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{nb=!0,u()},T}function v(T,C){T.setAttribute("id",C),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function E(){const T=lC(a),C=t("text"),A=document.getElementById(C)||document.createElement("span"),M=t("learnmore"),I=document.getElementById(M)||document.createElement("a"),G=t("preprendIcon"),Q=document.getElementById(G)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const q=T.element;f(q),v(I,M);const oe=y();p(Q,G),q.append(Q,A,I,oe),document.body.appendChild(q)}l?(A.innerText="Preview backend disconnected.",Q.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Q.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,A.innerText="Preview backend running in this workspace."),A.setAttribute("id",C)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function cC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(gn())}function uC(){var n;const e=(n=jh())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function dC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function hC(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function fC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function mC(){const n=gn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function pC(){return!uC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function gC(){try{return typeof indexedDB=="object"}catch{return!1}}function yC(){return new Promise((n,e)=>{try{let t=!0;const a="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(a);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(a),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var l;e(((l=s.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vC="FirebaseError";class Ra extends Error{constructor(e,t,a){super(t),this.code=e,this.customData=a,this.name=vC,Object.setPrototypeOf(this,Ra.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,$c.prototype.create)}}class $c{constructor(e,t,a){this.service=e,this.serviceName=t,this.errors=a}create(e,...t){const a=t[0]||{},s=`${this.service}/${e}`,l=this.errors[e],u=l?_C(l,a):"Error",f=`${this.serviceName}: ${u} (${s}).`;return new Ra(s,f,a)}}function _C(n,e){return n.replace(bC,(t,a)=>{const s=e[a];return s!=null?String(s):`<${a}?>`})}const bC=/\{\$([^}]+)}/g;function EC(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function bs(n,e){if(n===e)return!0;const t=Object.keys(n),a=Object.keys(e);for(const s of t){if(!a.includes(s))return!1;const l=n[s],u=e[s];if(rb(l)&&rb(u)){if(!bs(l,u))return!1}else if(l!==u)return!1}for(const s of a)if(!t.includes(s))return!1;return!0}function rb(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yc(n){const e=[];for(const[t,a]of Object.entries(n))Array.isArray(a)?a.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(a));return e.length?"&"+e.join("&"):""}function vc(n){const e={};return n.replace(/^\?/,"").split("&").forEach(a=>{if(a){const[s,l]=a.split("=");e[decodeURIComponent(s)]=decodeURIComponent(l)}}),e}function _c(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function xC(n,e){const t=new TC(n,e);return t.subscribe.bind(t)}class TC{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(a=>{this.error(a)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,a){let s;if(e===void 0&&t===void 0&&a===void 0)throw new Error("Missing Observer.");wC(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:a},s.next===void 0&&(s.next=Tp),s.error===void 0&&(s.error=Tp),s.complete===void 0&&(s.complete=Tp);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(a){typeof console<"u"&&console.error&&console.error(a)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function wC(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Tp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qt(n){return n&&n._delegate?n._delegate:n}class Es{constructor(e,t,a){this.name=e,this.instanceFactory=t,this.type=a,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ms="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const a=new iC;if(this.instancesDeferred.set(t,a),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&a.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const a=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(a)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:a})}catch(l){if(s)return null;throw l}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(NC(e))try{this.getOrInitializeService({instanceIdentifier:ms})}catch{}for(const[t,a]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:s});a.resolve(l)}catch{}}}}clearInstance(e=ms){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ms){return this.instances.has(e)}getOptions(e=ms){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,a=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(a))throw Error(`${this.name}(${a}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:a,options:t});for(const[l,u]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);a===f&&u.resolve(s)}return s}onInit(e,t){var a;const s=this.normalizeInstanceIdentifier(t),l=(a=this.onInitCallbacks.get(s))!==null&&a!==void 0?a:new Set;l.add(e),this.onInitCallbacks.set(s,l);const u=this.instances.get(s);return u&&e(u,s),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const a=this.onInitCallbacks.get(t);if(a)for(const s of a)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let a=this.instances.get(e);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:SC(e),options:t}),this.instances.set(e,a),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(a,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,a)}catch{}return a||null}normalizeInstanceIdentifier(e=ms){return this.component?this.component.multipleInstances?e:ms:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function SC(n){return n===ms?void 0:n}function NC(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new AC(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fe;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Fe||(Fe={}));const RC={debug:Fe.DEBUG,verbose:Fe.VERBOSE,info:Fe.INFO,warn:Fe.WARN,error:Fe.ERROR,silent:Fe.SILENT},IC=Fe.INFO,DC={[Fe.DEBUG]:"log",[Fe.VERBOSE]:"log",[Fe.INFO]:"info",[Fe.WARN]:"warn",[Fe.ERROR]:"error"},OC=(n,e,...t)=>{if(e<n.logLevel)return;const a=new Date().toISOString(),s=DC[e];if(s)console[s](`[${a}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Cg{constructor(e){this.name=e,this._logLevel=IC,this._logHandler=OC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Fe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?RC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Fe.DEBUG,...e),this._logHandler(this,Fe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Fe.VERBOSE,...e),this._logHandler(this,Fe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Fe.INFO,...e),this._logHandler(this,Fe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Fe.WARN,...e),this._logHandler(this,Fe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Fe.ERROR,...e),this._logHandler(this,Fe.ERROR,...e)}}const jC=(n,e)=>e.some(t=>n instanceof t);let ab,ib;function PC(){return ab||(ab=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function MC(){return ib||(ib=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const R1=new WeakMap,Bp=new WeakMap,I1=new WeakMap,wp=new WeakMap,Rg=new WeakMap;function kC(n){const e=new Promise((t,a)=>{const s=()=>{n.removeEventListener("success",l),n.removeEventListener("error",u)},l=()=>{t(pi(n.result)),s()},u=()=>{a(n.error),s()};n.addEventListener("success",l),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&R1.set(t,n)}).catch(()=>{}),Rg.set(e,n),e}function VC(n){if(Bp.has(n))return;const e=new Promise((t,a)=>{const s=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",u),n.removeEventListener("abort",u)},l=()=>{t(),s()},u=()=>{a(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",l),n.addEventListener("error",u),n.addEventListener("abort",u)});Bp.set(n,e)}let qp={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Bp.get(n);if(e==="objectStoreNames")return n.objectStoreNames||I1.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return pi(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function LC(n){qp=n(qp)}function UC(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const a=n.call(Ap(this),e,...t);return I1.set(a,e.sort?e.sort():[e]),pi(a)}:MC().includes(n)?function(...e){return n.apply(Ap(this),e),pi(R1.get(this))}:function(...e){return pi(n.apply(Ap(this),e))}}function zC(n){return typeof n=="function"?UC(n):(n instanceof IDBTransaction&&VC(n),jC(n,PC())?new Proxy(n,qp):n)}function pi(n){if(n instanceof IDBRequest)return kC(n);if(wp.has(n))return wp.get(n);const e=zC(n);return e!==n&&(wp.set(n,e),Rg.set(e,n)),e}const Ap=n=>Rg.get(n);function BC(n,e,{blocked:t,upgrade:a,blocking:s,terminated:l}={}){const u=indexedDB.open(n,e),f=pi(u);return a&&u.addEventListener("upgradeneeded",p=>{a(pi(u.result),p.oldVersion,p.newVersion,pi(u.transaction),p)}),t&&u.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),f.then(p=>{l&&p.addEventListener("close",()=>l()),s&&p.addEventListener("versionchange",y=>s(y.oldVersion,y.newVersion,y))}).catch(()=>{}),f}const qC=["get","getKey","getAll","getAllKeys","count"],FC=["put","add","delete","clear"],Sp=new Map;function sb(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Sp.get(e))return Sp.get(e);const t=e.replace(/FromIndex$/,""),a=e!==t,s=FC.includes(t);if(!(t in(a?IDBIndex:IDBObjectStore).prototype)||!(s||qC.includes(t)))return;const l=async function(u,...f){const p=this.transaction(u,s?"readwrite":"readonly");let y=p.store;return a&&(y=y.index(f.shift())),(await Promise.all([y[t](...f),s&&p.done]))[0]};return Sp.set(e,l),l}LC(n=>({...n,get:(e,t,a)=>sb(e,t)||n.get(e,t,a),has:(e,t)=>!!sb(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(GC(t)){const a=t.getImmediate();return`${a.library}/${a.version}`}else return null}).filter(t=>t).join(" ")}}function GC(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Fp="@firebase/app",ob="0.12.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wa=new Cg("@firebase/app"),$C="@firebase/app-compat",YC="@firebase/analytics-compat",KC="@firebase/analytics",QC="@firebase/app-check-compat",WC="@firebase/app-check",XC="@firebase/auth",ZC="@firebase/auth-compat",JC="@firebase/database",eR="@firebase/data-connect",tR="@firebase/database-compat",nR="@firebase/functions",rR="@firebase/functions-compat",aR="@firebase/installations",iR="@firebase/installations-compat",sR="@firebase/messaging",oR="@firebase/messaging-compat",lR="@firebase/performance",cR="@firebase/performance-compat",uR="@firebase/remote-config",dR="@firebase/remote-config-compat",hR="@firebase/storage",fR="@firebase/storage-compat",mR="@firebase/firestore",pR="@firebase/vertexai",gR="@firebase/firestore-compat",yR="firebase",vR="11.7.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hp="[DEFAULT]",_R={[Fp]:"fire-core",[$C]:"fire-core-compat",[KC]:"fire-analytics",[YC]:"fire-analytics-compat",[WC]:"fire-app-check",[QC]:"fire-app-check-compat",[XC]:"fire-auth",[ZC]:"fire-auth-compat",[JC]:"fire-rtdb",[eR]:"fire-data-connect",[tR]:"fire-rtdb-compat",[nR]:"fire-fn",[rR]:"fire-fn-compat",[aR]:"fire-iid",[iR]:"fire-iid-compat",[sR]:"fire-fcm",[oR]:"fire-fcm-compat",[lR]:"fire-perf",[cR]:"fire-perf-compat",[uR]:"fire-rc",[dR]:"fire-rc-compat",[hR]:"fire-gcs",[fR]:"fire-gcs-compat",[mR]:"fire-fst",[gR]:"fire-fst-compat",[pR]:"fire-vertex","fire-js":"fire-js",[yR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ih=new Map,bR=new Map,Gp=new Map;function lb(n,e){try{n.container.addComponent(e)}catch(t){wa.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Lo(n){const e=n.name;if(Gp.has(e))return wa.debug(`There were multiple attempts to register component ${e}.`),!1;Gp.set(e,n);for(const t of ih.values())lb(t,n);for(const t of bR.values())lb(t,n);return!0}function Ig(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function nr(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ER={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},gi=new $c("app","Firebase",ER);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xR{constructor(e,t,a){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=a,this.container.addComponent(new Es("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw gi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xo=vR;function D1(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const a=Object.assign({name:Hp,automaticDataCollectionEnabled:!1},e),s=a.name;if(typeof s!="string"||!s)throw gi.create("bad-app-name",{appName:String(s)});if(t||(t=S1()),!t)throw gi.create("no-options");const l=ih.get(s);if(l){if(bs(t,l.options)&&bs(a,l.config))return l;throw gi.create("duplicate-app",{appName:s})}const u=new CC(s);for(const p of Gp.values())u.addComponent(p);const f=new xR(t,a,u);return ih.set(s,f),f}function O1(n=Hp){const e=ih.get(n);if(!e&&n===Hp&&S1())return D1();if(!e)throw gi.create("no-app",{appName:n});return e}function yi(n,e,t){var a;let s=(a=_R[n])!==null&&a!==void 0?a:n;t&&(s+=`-${t}`);const l=s.match(/\s|\//),u=e.match(/\s|\//);if(l||u){const f=[`Unable to register library "${s}" with version "${e}":`];l&&f.push(`library name "${s}" contains illegal characters (whitespace or "/")`),l&&u&&f.push("and"),u&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),wa.warn(f.join(" "));return}Lo(new Es(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TR="firebase-heartbeat-database",wR=1,Dc="firebase-heartbeat-store";let Np=null;function j1(){return Np||(Np=BC(TR,wR,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Dc)}catch(t){console.warn(t)}}}}).catch(n=>{throw gi.create("idb-open",{originalErrorMessage:n.message})})),Np}async function AR(n){try{const t=(await j1()).transaction(Dc),a=await t.objectStore(Dc).get(P1(n));return await t.done,a}catch(e){if(e instanceof Ra)wa.warn(e.message);else{const t=gi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});wa.warn(t.message)}}}async function cb(n,e){try{const a=(await j1()).transaction(Dc,"readwrite");await a.objectStore(Dc).put(e,P1(n)),await a.done}catch(t){if(t instanceof Ra)wa.warn(t.message);else{const a=gi.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});wa.warn(a.message)}}}function P1(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SR=1024,NR=30;class CR{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new IR(t),this._heartbeatsCachePromise=this._storage.read().then(a=>(this._heartbeatsCache=a,a))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=ub();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(u=>u.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:s}),this._heartbeatsCache.heartbeats.length>NR){const u=DR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(a){wa.warn(a)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=ub(),{heartbeatsToSend:a,unsentEntries:s}=RR(this._heartbeatsCache.heartbeats),l=ah(JSON.stringify({version:2,heartbeats:a}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return wa.warn(t),""}}}function ub(){return new Date().toISOString().substring(0,10)}function RR(n,e=SR){const t=[];let a=n.slice();for(const s of n){const l=t.find(u=>u.agent===s.agent);if(l){if(l.dates.push(s.date),db(t)>e){l.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),db(t)>e){t.pop();break}a=a.slice(1)}return{heartbeatsToSend:t,unsentEntries:a}}class IR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return gC()?yC().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await AR(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return cb(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return cb(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function db(n){return ah(JSON.stringify({version:2,heartbeats:n})).length}function DR(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let a=1;a<n.length;a++)n[a].date<t&&(t=n[a].date,e=a);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OR(n){Lo(new Es("platform-logger",e=>new HC(e),"PRIVATE")),Lo(new Es("heartbeat",e=>new CR(e),"PRIVATE")),yi(Fp,ob,n),yi(Fp,ob,"esm2017"),yi("fire-js","")}OR("");function Dg(n,e){var t={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&e.indexOf(a)<0&&(t[a]=n[a]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,a=Object.getOwnPropertySymbols(n);s<a.length;s++)e.indexOf(a[s])<0&&Object.prototype.propertyIsEnumerable.call(n,a[s])&&(t[a[s]]=n[a[s]]);return t}function M1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const jR=M1,k1=new $c("auth","Firebase",M1());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sh=new Cg("@firebase/auth");function PR(n,...e){sh.logLevel<=Fe.WARN&&sh.warn(`Auth (${Xo}): ${n}`,...e)}function qd(n,...e){sh.logLevel<=Fe.ERROR&&sh.error(`Auth (${Xo}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mr(n,...e){throw Og(n,...e)}function qr(n,...e){return Og(n,...e)}function V1(n,e,t){const a=Object.assign(Object.assign({},jR()),{[e]:t});return new $c("auth","Firebase",a).create(e,{appName:n.name})}function Ea(n){return V1(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Og(n,...e){if(typeof n!="string"){const t=e[0],a=[...e.slice(1)];return a[0]&&(a[0].appName=n.name),n._errorFactory.create(t,...a)}return k1.create(n,...e)}function Ae(n,e,...t){if(!n)throw Og(e,...t)}function va(n){const e="INTERNAL ASSERTION FAILED: "+n;throw qd(e),new Error(e)}function Aa(n,e){n||va(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $p(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function MR(){return hb()==="http:"||hb()==="https:"}function hb(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(MR()||hC()||"connection"in navigator)?navigator.onLine:!0}function VR(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc{constructor(e,t){this.shortDelay=e,this.longDelay=t,Aa(t>e,"Short delay should be less than long delay!"),this.isMobile=cC()||fC()}get(){return kR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jg(n,e){Aa(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L1{static initialize(e,t,a){this.fetchImpl=e,t&&(this.headersImpl=t),a&&(this.responseImpl=a)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;va("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;va("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;va("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UR=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],zR=new Kc(3e4,6e4);function Ri(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Ia(n,e,t,a,s={}){return U1(n,s,async()=>{let l={},u={};a&&(e==="GET"?u=a:l={body:JSON.stringify(a)});const f=Yc(Object.assign({key:n.config.apiKey},u)).slice(1),p=await n._getAdditionalHeaders();p["Content-Type"]="application/json",n.languageCode&&(p["X-Firebase-Locale"]=n.languageCode);const y=Object.assign({method:e,headers:p},l);return dC()||(y.referrerPolicy="no-referrer"),n.emulatorConfig&&Gc(n.emulatorConfig.host)&&(y.credentials="include"),L1.fetch()(await z1(n,n.config.apiHost,t,f),y)})}async function U1(n,e,t){n._canInitEmulator=!1;const a=Object.assign(Object.assign({},LR),e);try{const s=new qR(n),l=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const u=await l.json();if("needConfirmation"in u)throw jd(n,"account-exists-with-different-credential",u);if(l.ok&&!("errorMessage"in u))return u;{const f=l.ok?u.errorMessage:u.error.message,[p,y]=f.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw jd(n,"credential-already-in-use",u);if(p==="EMAIL_EXISTS")throw jd(n,"email-already-in-use",u);if(p==="USER_DISABLED")throw jd(n,"user-disabled",u);const v=a[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw V1(n,v,y);mr(n,v)}}catch(s){if(s instanceof Ra)throw s;mr(n,"network-request-failed",{message:String(s)})}}async function Qc(n,e,t,a,s={}){const l=await Ia(n,e,t,a,s);return"mfaPendingCredential"in l&&mr(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function z1(n,e,t,a){const s=`${e}${t}?${a}`,l=n,u=l.config.emulator?jg(n.config,s):`${n.config.apiScheme}://${s}`;return UR.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(u).toString():u}function BR(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class qR{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,a)=>{this.timer=setTimeout(()=>a(qr(this.auth,"network-request-failed")),zR.get())})}}function jd(n,e,t){const a={appName:n.name};t.email&&(a.email=t.email),t.phoneNumber&&(a.phoneNumber=t.phoneNumber);const s=qr(n,e,a);return s.customData._tokenResponse=t,s}function fb(n){return n!==void 0&&n.enterprise!==void 0}class FR{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return BR(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function HR(n,e){return Ia(n,"GET","/v2/recaptchaConfig",Ri(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GR(n,e){return Ia(n,"POST","/v1/accounts:delete",e)}async function oh(n,e){return Ia(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ac(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function $R(n,e=!1){const t=qt(n),a=await t.getIdToken(e),s=Pg(a);Ae(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const l=typeof s.firebase=="object"?s.firebase:void 0,u=l==null?void 0:l.sign_in_provider;return{claims:s,token:a,authTime:Ac(Cp(s.auth_time)),issuedAtTime:Ac(Cp(s.iat)),expirationTime:Ac(Cp(s.exp)),signInProvider:u||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Cp(n){return Number(n)*1e3}function Pg(n){const[e,t,a]=n.split(".");if(e===void 0||t===void 0||a===void 0)return qd("JWT malformed, contained fewer than 3 sections"),null;try{const s=w1(t);return s?JSON.parse(s):(qd("Failed to decode base64 JWT payload"),null)}catch(s){return qd("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function mb(n){const e=Pg(n);return Ae(e,"internal-error"),Ae(typeof e.exp<"u","internal-error"),Ae(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uo(n,e,t=!1){if(t)return e;try{return await e}catch(a){throw a instanceof Ra&&YR(a)&&n.auth.currentUser===n&&await n.auth.signOut(),a}}function YR({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const a=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),a}else{this.errorBackoff=3e4;const s=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ac(this.lastLoginAt),this.creationTime=Ac(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lh(n){var e;const t=n.auth,a=await n.getIdToken(),s=await Uo(n,oh(t,{idToken:a}));Ae(s==null?void 0:s.users.length,t,"internal-error");const l=s.users[0];n._notifyReloadListener(l);const u=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?B1(l.providerUserInfo):[],f=WR(n.providerData,u),p=n.isAnonymous,y=!(n.email&&l.passwordHash)&&!(f!=null&&f.length),v=p?y:!1,E={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:f,metadata:new Yp(l.createdAt,l.lastLoginAt),isAnonymous:v};Object.assign(n,E)}async function QR(n){const e=qt(n);await lh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function WR(n,e){return[...n.filter(a=>!e.some(s=>s.providerId===a.providerId)),...e]}function B1(n){return n.map(e=>{var{providerId:t}=e,a=Dg(e,["providerId"]);return{providerId:t,uid:a.rawId||"",displayName:a.displayName||null,email:a.email||null,phoneNumber:a.phoneNumber||null,photoURL:a.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XR(n,e){const t=await U1(n,{},async()=>{const a=Yc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:l}=n.config,u=await z1(n,s,"/v1/token",`key=${l}`),f=await n._getAdditionalHeaders();return f["Content-Type"]="application/x-www-form-urlencoded",L1.fetch()(u,{method:"POST",headers:f,body:a})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function ZR(n,e){return Ia(n,"POST","/v2/accounts:revokeToken",Ri(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ae(e.idToken,"internal-error"),Ae(typeof e.idToken<"u","internal-error"),Ae(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):mb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ae(e.length!==0,"internal-error");const t=mb(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ae(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:a,refreshToken:s,expiresIn:l}=await XR(e,t);this.updateTokensAndExpiration(a,s,Number(l))}updateTokensAndExpiration(e,t,a){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+a*1e3}static fromJSON(e,t){const{refreshToken:a,accessToken:s,expirationTime:l}=t,u=new Oo;return a&&(Ae(typeof a=="string","internal-error",{appName:e}),u.refreshToken=a),s&&(Ae(typeof s=="string","internal-error",{appName:e}),u.accessToken=s),l&&(Ae(typeof l=="number","internal-error",{appName:e}),u.expirationTime=l),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Oo,this.toJSON())}_performRefresh(){return va("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function li(n,e){Ae(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class fr{constructor(e){var{uid:t,auth:a,stsTokenManager:s}=e,l=Dg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new KR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=a,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Yp(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await Uo(this,this.stsTokenManager.getToken(this.auth,e));return Ae(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return $R(this,e)}reload(){return QR(this)}_assign(e){this!==e&&(Ae(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new fr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ae(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let a=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),a=!0),t&&await lh(this),await this.auth._persistUserIfCurrent(this),a&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(nr(this.auth.app))return Promise.reject(Ea(this.auth));const e=await this.getIdToken();return await Uo(this,GR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var a,s,l,u,f,p,y,v;const E=(a=t.displayName)!==null&&a!==void 0?a:void 0,T=(s=t.email)!==null&&s!==void 0?s:void 0,C=(l=t.phoneNumber)!==null&&l!==void 0?l:void 0,A=(u=t.photoURL)!==null&&u!==void 0?u:void 0,M=(f=t.tenantId)!==null&&f!==void 0?f:void 0,I=(p=t._redirectEventId)!==null&&p!==void 0?p:void 0,G=(y=t.createdAt)!==null&&y!==void 0?y:void 0,Q=(v=t.lastLoginAt)!==null&&v!==void 0?v:void 0,{uid:q,emailVerified:oe,isAnonymous:ce,providerData:pe,stsTokenManager:P}=t;Ae(q&&P,e,"internal-error");const R=Oo.fromJSON(this.name,P);Ae(typeof q=="string",e,"internal-error"),li(E,e.name),li(T,e.name),Ae(typeof oe=="boolean",e,"internal-error"),Ae(typeof ce=="boolean",e,"internal-error"),li(C,e.name),li(A,e.name),li(M,e.name),li(I,e.name),li(G,e.name),li(Q,e.name);const N=new fr({uid:q,auth:e,email:T,emailVerified:oe,displayName:E,isAnonymous:ce,photoURL:A,phoneNumber:C,tenantId:M,stsTokenManager:R,createdAt:G,lastLoginAt:Q});return pe&&Array.isArray(pe)&&(N.providerData=pe.map(j=>Object.assign({},j))),I&&(N._redirectEventId=I),N}static async _fromIdTokenResponse(e,t,a=!1){const s=new Oo;s.updateFromServerResponse(t);const l=new fr({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:a});return await lh(l),l}static async _fromGetAccountInfoResponse(e,t,a){const s=t.users[0];Ae(s.localId!==void 0,"internal-error");const l=s.providerUserInfo!==void 0?B1(s.providerUserInfo):[],u=!(s.email&&s.passwordHash)&&!(l!=null&&l.length),f=new Oo;f.updateFromIdToken(a);const p=new fr({uid:s.localId,auth:e,stsTokenManager:f,isAnonymous:u}),y={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new Yp(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(l!=null&&l.length)};return Object.assign(p,y),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pb=new Map;function _a(n){Aa(n instanceof Function,"Expected a class definition");let e=pb.get(n);return e?(Aa(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,pb.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}q1.type="NONE";const gb=q1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fd(n,e,t){return`firebase:${n}:${e}:${t}`}class jo{constructor(e,t,a){this.persistence=e,this.auth=t,this.userKey=a;const{config:s,name:l}=this.auth;this.fullUserKey=Fd(this.userKey,s.apiKey,l),this.fullPersistenceKey=Fd("persistence",s.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await oh(this.auth,{idToken:e}).catch(()=>{});return t?fr._fromGetAccountInfoResponse(this.auth,t,e):null}return fr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,a="authUser"){if(!t.length)return new jo(_a(gb),e,a);const s=(await Promise.all(t.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let l=s[0]||_a(gb);const u=Fd(a,e.config.apiKey,e.name);let f=null;for(const y of t)try{const v=await y._get(u);if(v){let E;if(typeof v=="string"){const T=await oh(e,{idToken:v}).catch(()=>{});if(!T)break;E=await fr._fromGetAccountInfoResponse(e,T,v)}else E=fr._fromJSON(e,v);y!==l&&(f=E),l=y;break}}catch{}const p=s.filter(y=>y._shouldAllowMigration);return!l._shouldAllowMigration||!p.length?new jo(l,e,a):(l=p[0],f&&await l._set(u,f.toJSON()),await Promise.all(t.map(async y=>{if(y!==l)try{await y._remove(u)}catch{}})),new jo(l,e,a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yb(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if($1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(F1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(K1(e))return"Blackberry";if(Q1(e))return"Webos";if(H1(e))return"Safari";if((e.includes("chrome/")||G1(e))&&!e.includes("edge/"))return"Chrome";if(Y1(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,a=n.match(t);if((a==null?void 0:a.length)===2)return a[1]}return"Other"}function F1(n=gn()){return/firefox\//i.test(n)}function H1(n=gn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function G1(n=gn()){return/crios\//i.test(n)}function $1(n=gn()){return/iemobile/i.test(n)}function Y1(n=gn()){return/android/i.test(n)}function K1(n=gn()){return/blackberry/i.test(n)}function Q1(n=gn()){return/webos/i.test(n)}function Mg(n=gn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function JR(n=gn()){var e;return Mg(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function e2(){return mC()&&document.documentMode===10}function W1(n=gn()){return Mg(n)||Y1(n)||Q1(n)||K1(n)||/windows phone/i.test(n)||$1(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X1(n,e=[]){let t;switch(n){case"Browser":t=yb(gn());break;case"Worker":t=`${yb(gn())}-${n}`;break;default:t=n}const a=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Xo}/${a}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t2{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const a=l=>new Promise((u,f)=>{try{const p=e(l);u(p)}catch(p){f(p)}});a.onAbort=t,this.queue.push(a);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const a of this.queue)await a(e),a.onAbort&&t.push(a.onAbort)}catch(a){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:a==null?void 0:a.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n2(n,e={}){return Ia(n,"GET","/v2/passwordPolicy",Ri(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r2=6;class a2{constructor(e){var t,a,s,l;const u=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=u.minPasswordLength)!==null&&t!==void 0?t:r2,u.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=u.maxPasswordLength),u.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=u.containsLowercaseCharacter),u.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=u.containsUppercaseCharacter),u.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=u.containsNumericCharacter),u.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=u.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(a=e.allowedNonAlphanumericCharacters)===null||a===void 0?void 0:a.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,a,s,l,u,f;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=(t=p.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),p.isValid&&(p.isValid=(a=p.meetsMaxPasswordLength)!==null&&a!==void 0?a:!0),p.isValid&&(p.isValid=(s=p.containsLowercaseLetter)!==null&&s!==void 0?s:!0),p.isValid&&(p.isValid=(l=p.containsUppercaseLetter)!==null&&l!==void 0?l:!0),p.isValid&&(p.isValid=(u=p.containsNumericCharacter)!==null&&u!==void 0?u:!0),p.isValid&&(p.isValid=(f=p.containsNonAlphanumericCharacter)!==null&&f!==void 0?f:!0),p}validatePasswordLengthOptions(e,t){const a=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;a&&(t.meetsMinPasswordLength=e.length>=a),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let a;for(let s=0;s<e.length;s++)a=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,a>="a"&&a<="z",a>="A"&&a<="Z",a>="0"&&a<="9",this.allowedNonAlphanumericCharacters.includes(a))}updatePasswordCharacterOptionsStatuses(e,t,a,s,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=a)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i2{constructor(e,t,a,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=a,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new vb(this),this.idTokenSubscription=new vb(this),this.beforeStateQueue=new t2(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=k1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=_a(t)),this._initializationPromise=this.queue(async()=>{var a,s,l;if(!this._deleted&&(this.persistenceManager=await jo.create(this,e),(a=this._resolvePersistenceManagerAvailable)===null||a===void 0||a.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)===null||l===void 0?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await oh(this,{idToken:e}),a=await fr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(a)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(nr(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(f,f))}):this.directlySetCurrentUser(null)}const a=await this.assertedPersistence.getCurrentUser();let s=a,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,f=s==null?void 0:s._redirectEventId,p=await this.tryRedirectSignIn(e);(!u||u===f)&&(p!=null&&p.user)&&(s=p.user,l=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(s)}catch(u){s=a,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Ae(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await lh(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=VR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(nr(this.app))return Promise.reject(Ea(this));const t=e?qt(e):null;return t&&Ae(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ae(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return nr(this.app)?Promise.reject(Ea(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return nr(this.app)?Promise.reject(Ea(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(_a(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await n2(this),t=new a2(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new $c("auth","Firebase",e())}onAuthStateChanged(e,t,a){return this.registerStateListener(this.authStateSubscription,e,t,a)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,a){return this.registerStateListener(this.idTokenSubscription,e,t,a)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const a=this.onAuthStateChanged(()=>{a(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),a={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(a.tenantId=this.tenantId),await ZR(this,a)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const a=await this.getOrInitRedirectPersistenceManager(t);return e===null?a.removeCurrentUser():a.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&_a(e)||this._popupRedirectResolver;Ae(t,this,"argument-error"),this.redirectPersistenceManager=await jo.create(this,[_a(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,a;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((a=this.redirectUser)===null||a===void 0?void 0:a._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const a=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==a&&(this.lastNotifiedUid=a,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,a,s){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let u=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ae(f,this,"internal-error"),f.then(()=>{u||l(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,a,s);return()=>{u=!0,p()}}else{const p=e.addObserver(t);return()=>{u=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ae(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=X1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const a=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());a&&(t["X-Firebase-Client"]=a);const s=await this._getAppCheckToken();return s&&(t["X-Firebase-AppCheck"]=s),t}async _getAppCheckToken(){var e;if(nr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&PR(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Cs(n){return qt(n)}class vb{constructor(e){this.auth=e,this.observer=null,this.addObserver=xC(t=>this.observer=t)}get next(){return Ae(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function s2(n){Mh=n}function Z1(n){return Mh.loadJS(n)}function o2(){return Mh.recaptchaEnterpriseScript}function l2(){return Mh.gapiScript}function c2(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class u2{constructor(){this.enterprise=new d2}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class d2{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const h2="recaptcha-enterprise",J1="NO_RECAPTCHA";class f2{constructor(e){this.type=h2,this.auth=Cs(e)}async verify(e="verify",t=!1){async function a(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(u,f)=>{HR(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)f(new Error("recaptcha Enterprise site key undefined"));else{const y=new FR(p);return l.tenantId==null?l._agentRecaptchaConfig=y:l._tenantRecaptchaConfigs[l.tenantId]=y,u(y.siteKey)}}).catch(p=>{f(p)})})}function s(l,u,f){const p=window.grecaptcha;fb(p)?p.enterprise.ready(()=>{p.enterprise.execute(l,{action:e}).then(y=>{u(y)}).catch(()=>{u(J1)})}):f(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new u2().execute("siteKey",{action:"verify"}):new Promise((l,u)=>{a(this.auth).then(f=>{if(!t&&fb(window.grecaptcha))s(f,l,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let p=o2();p.length!==0&&(p+=f),Z1(p).then(()=>{s(f,l,u)}).catch(y=>{u(y)})}}).catch(f=>{u(f)})})}}async function _b(n,e,t,a=!1,s=!1){const l=new f2(n);let u;if(s)u=J1;else try{u=await l.verify(t)}catch{u=await l.verify(t,!0)}const f=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in f){const p=f.phoneEnrollmentInfo.phoneNumber,y=f.phoneEnrollmentInfo.recaptchaToken;Object.assign(f,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:y,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in f){const p=f.phoneSignInInfo.recaptchaToken;Object.assign(f,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return f}return a?Object.assign(f,{captchaResp:u}):Object.assign(f,{captchaResponse:u}),Object.assign(f,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(f,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),f}async function Kp(n,e,t,a,s){var l;if(!((l=n._getRecaptchaConfig())===null||l===void 0)&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await _b(n,e,t,t==="getOobCode");return a(n,u)}else return a(n,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await _b(n,e,t,t==="getOobCode");return a(n,f)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m2(n,e){const t=Ig(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),l=t.getOptions();if(bs(l,e??{}))return s;mr(s,"already-initialized")}return t.initialize({options:e})}function p2(n,e){const t=(e==null?void 0:e.persistence)||[],a=(Array.isArray(t)?t:[t]).map(_a);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(a,e==null?void 0:e.popupRedirectResolver)}function g2(n,e,t){const a=Cs(n);Ae(/^https?:\/\//.test(e),a,"invalid-emulator-scheme");const s=!1,l=ex(e),{host:u,port:f}=y2(e),p=f===null?"":`:${f}`,y={url:`${l}//${u}${p}/`},v=Object.freeze({host:u,port:f,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!a._canInitEmulator){Ae(a.config.emulator&&a.emulatorConfig,a,"emulator-config-failed"),Ae(bs(y,a.config.emulator)&&bs(v,a.emulatorConfig),a,"emulator-config-failed");return}a.config.emulator=y,a.emulatorConfig=v,a.settings.appVerificationDisabledForTesting=!0,Gc(u)?(Ph("Auth",!0),C1(`${l}//${u}${p}`)):v2()}function ex(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function y2(n){const e=ex(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const a=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(a);if(s){const l=s[1];return{host:l,port:bb(a.substr(l.length+1))}}else{const[l,u]=a.split(":");return{host:l,port:bb(u)}}}function bb(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function v2(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kg{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return va("not implemented")}_getIdTokenResponse(e){return va("not implemented")}_linkToIdToken(e,t){return va("not implemented")}_getReauthenticationResolver(e){return va("not implemented")}}async function _2(n,e){return Ia(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function b2(n,e){return Qc(n,"POST","/v1/accounts:signInWithPassword",Ri(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function E2(n,e){return Qc(n,"POST","/v1/accounts:signInWithEmailLink",Ri(n,e))}async function x2(n,e){return Qc(n,"POST","/v1/accounts:signInWithEmailLink",Ri(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc extends kg{constructor(e,t,a,s=null){super("password",a),this._email=e,this._password=t,this._tenantId=s}static _fromEmailAndPassword(e,t){return new Oc(e,t,"password")}static _fromEmailAndCode(e,t,a=null){return new Oc(e,t,"emailLink",a)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Kp(e,t,"signInWithPassword",b2);case"emailLink":return E2(e,{email:this._email,oobCode:this._password});default:mr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const a={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Kp(e,a,"signUpPassword",_2);case"emailLink":return x2(e,{idToken:t,email:this._email,oobCode:this._password});default:mr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Po(n,e){return Qc(n,"POST","/v1/accounts:signInWithIdp",Ri(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T2="http://localhost";class xs extends kg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new xs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):mr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:a,signInMethod:s}=t,l=Dg(t,["providerId","signInMethod"]);if(!a||!s)return null;const u=new xs(a,s);return u.idToken=l.idToken||void 0,u.accessToken=l.accessToken||void 0,u.secret=l.secret,u.nonce=l.nonce,u.pendingToken=l.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return Po(e,t)}_linkToIdToken(e,t){const a=this.buildRequest();return a.idToken=t,Po(e,a)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Po(e,t)}buildRequest(){const e={requestUri:T2,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Yc(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w2(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function A2(n){const e=vc(_c(n)).link,t=e?vc(_c(e)).deep_link_id:null,a=vc(_c(n)).deep_link_id;return(a?vc(_c(a)).link:null)||a||t||e||n}class Vg{constructor(e){var t,a,s,l,u,f;const p=vc(_c(e)),y=(t=p.apiKey)!==null&&t!==void 0?t:null,v=(a=p.oobCode)!==null&&a!==void 0?a:null,E=w2((s=p.mode)!==null&&s!==void 0?s:null);Ae(y&&v&&E,"argument-error"),this.apiKey=y,this.operation=E,this.code=v,this.continueUrl=(l=p.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(u=p.lang)!==null&&u!==void 0?u:null,this.tenantId=(f=p.tenantId)!==null&&f!==void 0?f:null}static parseLink(e){const t=A2(e);try{return new Vg(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zo{constructor(){this.providerId=Zo.PROVIDER_ID}static credential(e,t){return Oc._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const a=Vg.parseLink(t);return Ae(a,"argument-error"),Oc._fromEmailAndCode(e,a.code,a.tenantId)}}Zo.PROVIDER_ID="password";Zo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Zo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tx{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc extends tx{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui extends Wc{constructor(){super("facebook.com")}static credential(e){return xs._fromParams({providerId:ui.PROVIDER_ID,signInMethod:ui.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ui.credentialFromTaggedObject(e)}static credentialFromError(e){return ui.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ui.credential(e.oauthAccessToken)}catch{return null}}}ui.FACEBOOK_SIGN_IN_METHOD="facebook.com";ui.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di extends Wc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return xs._fromParams({providerId:di.PROVIDER_ID,signInMethod:di.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return di.credentialFromTaggedObject(e)}static credentialFromError(e){return di.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:a}=e;if(!t&&!a)return null;try{return di.credential(t,a)}catch{return null}}}di.GOOGLE_SIGN_IN_METHOD="google.com";di.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi extends Wc{constructor(){super("github.com")}static credential(e){return xs._fromParams({providerId:hi.PROVIDER_ID,signInMethod:hi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return hi.credentialFromTaggedObject(e)}static credentialFromError(e){return hi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return hi.credential(e.oauthAccessToken)}catch{return null}}}hi.GITHUB_SIGN_IN_METHOD="github.com";hi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi extends Wc{constructor(){super("twitter.com")}static credential(e,t){return xs._fromParams({providerId:fi.PROVIDER_ID,signInMethod:fi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return fi.credentialFromTaggedObject(e)}static credentialFromError(e){return fi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:a}=e;if(!t||!a)return null;try{return fi.credential(t,a)}catch{return null}}}fi.TWITTER_SIGN_IN_METHOD="twitter.com";fi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S2(n,e){return Qc(n,"POST","/v1/accounts:signUp",Ri(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,a,s=!1){const l=await fr._fromIdTokenResponse(e,a,s),u=Eb(a);return new Ts({user:l,providerId:u,_tokenResponse:a,operationType:t})}static async _forOperation(e,t,a){await e._updateTokensIfNecessary(a,!0);const s=Eb(a);return new Ts({user:e,providerId:s,_tokenResponse:a,operationType:t})}}function Eb(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ch extends Ra{constructor(e,t,a,s){var l;super(t.code,t.message),this.operationType=a,this.user=s,Object.setPrototypeOf(this,ch.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:t.customData._serverResponse,operationType:a}}static _fromErrorAndOperation(e,t,a,s){return new ch(e,t,a,s)}}function nx(n,e,t,a){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?ch._fromErrorAndOperation(n,l,e,a):l})}async function N2(n,e,t=!1){const a=await Uo(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Ts._forOperation(n,"link",a)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C2(n,e,t=!1){const{auth:a}=n;if(nr(a.app))return Promise.reject(Ea(a));const s="reauthenticate";try{const l=await Uo(n,nx(a,s,e,n),t);Ae(l.idToken,a,"internal-error");const u=Pg(l.idToken);Ae(u,a,"internal-error");const{sub:f}=u;return Ae(n.uid===f,a,"user-mismatch"),Ts._forOperation(n,s,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&mr(a,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rx(n,e,t=!1){if(nr(n.app))return Promise.reject(Ea(n));const a="signIn",s=await nx(n,a,e),l=await Ts._fromIdTokenResponse(n,a,s);return t||await n._updateCurrentUser(l.user),l}async function R2(n,e){return rx(Cs(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ax(n){const e=Cs(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function I2(n,e,t){if(nr(n.app))return Promise.reject(Ea(n));const a=Cs(n),u=await Kp(a,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",S2).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&ax(n),p}),f=await Ts._fromIdTokenResponse(a,"signIn",u);return await a._updateCurrentUser(f.user),f}function D2(n,e,t){return nr(n.app)?Promise.reject(Ea(n)):R2(qt(n),Zo.credential(e,t)).catch(async a=>{throw a.code==="auth/password-does-not-meet-requirements"&&ax(n),a})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function O2(n,e){return Ia(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j2(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const a=qt(n),l={idToken:await a.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},u=await Uo(a,O2(a.auth,l));a.displayName=u.displayName||null,a.photoURL=u.photoUrl||null;const f=a.providerData.find(({providerId:p})=>p==="password");f&&(f.displayName=a.displayName,f.photoURL=a.photoURL),await a._updateTokensIfNecessary(u)}function P2(n,e,t,a){return qt(n).onIdTokenChanged(e,t,a)}function M2(n,e,t){return qt(n).beforeAuthStateChanged(e,t)}function k2(n,e,t,a){return qt(n).onAuthStateChanged(e,t,a)}function V2(n){return qt(n).signOut()}const uh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ix{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(uh,"1"),this.storage.removeItem(uh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L2=1e3,U2=10;class sx extends ix{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=W1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const a=this.storage.getItem(t),s=this.localCache[t];a!==s&&e(t,s,a)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,f,p)=>{this.notifyListeners(u,p)});return}const a=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const u=this.storage.getItem(a);!t&&this.localCache[a]===u||this.notifyListeners(a,u)},l=this.storage.getItem(a);e2()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,U2):s()}notifyListeners(e,t){this.localCache[e]=t;const a=this.listeners[e];if(a)for(const s of Array.from(a))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,a)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:a}),!0)})},L2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}sx.type="LOCAL";const z2=sx;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ox extends ix{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}ox.type="SESSION";const lx=ox;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B2(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const a=new kh(e);return this.receivers.push(a),a}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:a,eventType:s,data:l}=t.data,u=this.handlersMap[s];if(!(u!=null&&u.size))return;t.ports[0].postMessage({status:"ack",eventId:a,eventType:s});const f=Array.from(u).map(async y=>y(t.origin,l)),p=await B2(f);t.ports[0].postMessage({status:"done",eventId:a,eventType:s,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}kh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lg(n="",e=10){let t="";for(let a=0;a<e;a++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q2{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,a=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let l,u;return new Promise((f,p)=>{const y=Lg("",20);s.port1.start();const v=setTimeout(()=>{p(new Error("unsupported_event"))},a);u={messageChannel:s,onMessage(E){const T=E;if(T.data.eventId===y)switch(T.data.status){case"ack":clearTimeout(v),l=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),f(T.data.response);break;default:clearTimeout(v),clearTimeout(l),p(new Error("invalid_response"));break}}},this.handlers.add(u),s.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:y,data:t},[s.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fr(){return window}function F2(n){Fr().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cx(){return typeof Fr().WorkerGlobalScope<"u"&&typeof Fr().importScripts=="function"}async function H2(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function G2(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function $2(){return cx()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ux="firebaseLocalStorageDb",Y2=1,dh="firebaseLocalStorage",dx="fbase_key";class Xc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Vh(n,e){return n.transaction([dh],e?"readwrite":"readonly").objectStore(dh)}function K2(){const n=indexedDB.deleteDatabase(ux);return new Xc(n).toPromise()}function Qp(){const n=indexedDB.open(ux,Y2);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const a=n.result;try{a.createObjectStore(dh,{keyPath:dx})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const a=n.result;a.objectStoreNames.contains(dh)?e(a):(a.close(),await K2(),e(await Qp()))})})}async function xb(n,e,t){const a=Vh(n,!0).put({[dx]:e,value:t});return new Xc(a).toPromise()}async function Q2(n,e){const t=Vh(n,!1).get(e),a=await new Xc(t).toPromise();return a===void 0?null:a.value}function Tb(n,e){const t=Vh(n,!0).delete(e);return new Xc(t).toPromise()}const W2=800,X2=3;class hx{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Qp(),this.db)}async _withRetries(e){let t=0;for(;;)try{const a=await this._openDb();return await e(a)}catch(a){if(t++>X2)throw a;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return cx()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=kh._getInstance($2()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await H2(),!this.activeServiceWorker)return;this.sender=new q2(this.activeServiceWorker);const a=await this.sender._send("ping",{},800);a&&!((e=a[0])===null||e===void 0)&&e.fulfilled&&!((t=a[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||G2()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Qp();return await xb(e,uh,"1"),await Tb(e,uh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(a=>xb(a,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(a=>Q2(a,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Tb(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const l=Vh(s,!1).getAll();return new Xc(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],a=new Set;if(e.length!==0)for(const{fbase_key:s,value:l}of e)a.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(l)&&(this.notifyListeners(s,l),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!a.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const a=this.listeners[e];if(a)for(const s of Array.from(a))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),W2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}hx.type="LOCAL";const Z2=hx;new Kc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J2(n,e){return e?_a(e):(Ae(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ug extends kg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Po(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Po(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Po(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function eI(n){return rx(n.auth,new Ug(n),n.bypassAuthState)}function tI(n){const{auth:e,user:t}=n;return Ae(t,e,"internal-error"),C2(t,new Ug(n),n.bypassAuthState)}async function nI(n){const{auth:e,user:t}=n;return Ae(t,e,"internal-error"),N2(t,new Ug(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fx{constructor(e,t,a,s,l=!1){this.auth=e,this.resolver=a,this.user=s,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(a){this.reject(a)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:a,postBody:s,tenantId:l,error:u,type:f}=e;if(u){this.reject(u);return}const p={auth:this.auth,requestUri:t,sessionId:a,tenantId:l||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(p))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return eI;case"linkViaPopup":case"linkViaRedirect":return nI;case"reauthViaPopup":case"reauthViaRedirect":return tI;default:mr(this.auth,"internal-error")}}resolve(e){Aa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Aa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rI=new Kc(2e3,1e4);class Do extends fx{constructor(e,t,a,s,l){super(e,t,s,l),this.provider=a,this.authWindow=null,this.pollId=null,Do.currentPopupAction&&Do.currentPopupAction.cancel(),Do.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ae(e,this.auth,"internal-error"),e}async onExecution(){Aa(this.filter.length===1,"Popup operations only handle one event");const e=Lg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(qr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(qr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Do.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,a;if(!((a=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||a===void 0)&&a.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(qr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,rI.get())};e()}}Do.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aI="pendingRedirect",Hd=new Map;class iI extends fx{constructor(e,t,a=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,a),this.eventId=null}async execute(){let e=Hd.get(this.auth._key());if(!e){try{const a=await sI(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(a)}catch(t){e=()=>Promise.reject(t)}Hd.set(this.auth._key(),e)}return this.bypassAuthState||Hd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function sI(n,e){const t=cI(e),a=lI(n);if(!await a._isAvailable())return!1;const s=await a._get(t)==="true";return await a._remove(t),s}function oI(n,e){Hd.set(n._key(),e)}function lI(n){return _a(n._redirectPersistence)}function cI(n){return Fd(aI,n.config.apiKey,n.name)}async function uI(n,e,t=!1){if(nr(n.app))return Promise.reject(Ea(n));const a=Cs(n),s=J2(a,e),u=await new iI(a,s,t).execute();return u&&!t&&(delete u.user._redirectEventId,await a._persistUserIfCurrent(u.user),await a._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dI=10*60*1e3;class hI{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(a=>{this.isEventForConsumer(e,a)&&(t=!0,this.sendToConsumer(e,a),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!fI(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var a;if(e.error&&!mx(e)){const s=((a=e.error.code)===null||a===void 0?void 0:a.split("auth/")[1])||"internal-error";t.onError(qr(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const a=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&a}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=dI&&this.cachedEventUids.clear(),this.cachedEventUids.has(wb(e))}saveEventToCache(e){this.cachedEventUids.add(wb(e)),this.lastProcessedEventTime=Date.now()}}function wb(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function mx({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function fI(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return mx(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mI(n,e={}){return Ia(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pI=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,gI=/^https?/;async function yI(n){if(n.config.emulator)return;const{authorizedDomains:e}=await mI(n);for(const t of e)try{if(vI(t))return}catch{}mr(n,"unauthorized-domain")}function vI(n){const e=$p(),{protocol:t,hostname:a}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&a===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===a}if(!gI.test(t))return!1;if(pI.test(n))return a===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(a)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _I=new Kc(3e4,6e4);function Ab(){const n=Fr().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function bI(n){return new Promise((e,t)=>{var a,s,l;function u(){Ab(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Ab(),t(qr(n,"network-request-failed"))},timeout:_I.get()})}if(!((s=(a=Fr().gapi)===null||a===void 0?void 0:a.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((l=Fr().gapi)===null||l===void 0)&&l.load)u();else{const f=c2("iframefcb");return Fr()[f]=()=>{gapi.load?u():t(qr(n,"network-request-failed"))},Z1(`${l2()}?onload=${f}`).catch(p=>t(p))}}).catch(e=>{throw Gd=null,e})}let Gd=null;function EI(n){return Gd=Gd||bI(n),Gd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xI=new Kc(5e3,15e3),TI="__/auth/iframe",wI="emulator/auth/iframe",AI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},SI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function NI(n){const e=n.config;Ae(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?jg(e,wI):`https://${n.config.authDomain}/${TI}`,a={apiKey:e.apiKey,appName:n.name,v:Xo},s=SI.get(n.config.apiHost);s&&(a.eid=s);const l=n._getFrameworks();return l.length&&(a.fw=l.join(",")),`${t}?${Yc(a).slice(1)}`}async function CI(n){const e=await EI(n),t=Fr().gapi;return Ae(t,n,"internal-error"),e.open({where:document.body,url:NI(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:AI,dontclear:!0},a=>new Promise(async(s,l)=>{await a.restyle({setHideOnLeave:!1});const u=qr(n,"network-request-failed"),f=Fr().setTimeout(()=>{l(u)},xI.get());function p(){Fr().clearTimeout(f),s(a)}a.ping(p).then(p,()=>{l(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},II=500,DI=600,OI="_blank",jI="http://localhost";class Sb{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function PI(n,e,t,a=II,s=DI){const l=Math.max((window.screen.availHeight-s)/2,0).toString(),u=Math.max((window.screen.availWidth-a)/2,0).toString();let f="";const p=Object.assign(Object.assign({},RI),{width:a.toString(),height:s.toString(),top:l,left:u}),y=gn().toLowerCase();t&&(f=G1(y)?OI:t),F1(y)&&(e=e||jI,p.scrollbars="yes");const v=Object.entries(p).reduce((T,[C,A])=>`${T}${C}=${A},`,"");if(JR(y)&&f!=="_self")return MI(e||"",f),new Sb(null);const E=window.open(e||"",f,v);Ae(E,n,"popup-blocked");try{E.focus()}catch{}return new Sb(E)}function MI(n,e){const t=document.createElement("a");t.href=n,t.target=e;const a=document.createEvent("MouseEvent");a.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(a)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kI="__/auth/handler",VI="emulator/auth/handler",LI=encodeURIComponent("fac");async function Nb(n,e,t,a,s,l){Ae(n.config.authDomain,n,"auth-domain-config-required"),Ae(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:a,v:Xo,eventId:s};if(e instanceof tx){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",EC(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,E]of Object.entries({}))u[v]=E}if(e instanceof Wc){const v=e.getScopes().filter(E=>E!=="");v.length>0&&(u.scopes=v.join(","))}n.tenantId&&(u.tid=n.tenantId);const f=u;for(const v of Object.keys(f))f[v]===void 0&&delete f[v];const p=await n._getAppCheckToken(),y=p?`#${LI}=${encodeURIComponent(p)}`:"";return`${UI(n)}?${Yc(f).slice(1)}${y}`}function UI({config:n}){return n.emulator?jg(n,VI):`https://${n.authDomain}/${kI}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rp="webStorageSupport";class zI{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=lx,this._completeRedirectFn=uI,this._overrideRedirectResult=oI}async _openPopup(e,t,a,s){var l;Aa((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const u=await Nb(e,t,a,$p(),s);return PI(e,u,Lg())}async _openRedirect(e,t,a,s){await this._originValidation(e);const l=await Nb(e,t,a,$p(),s);return F2(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:l}=this.eventManagers[t];return s?Promise.resolve(s):(Aa(l,"If manager is not set, promise should be"),l)}const a=this.initAndGetManager(e);return this.eventManagers[t]={promise:a},a.catch(()=>{delete this.eventManagers[t]}),a}async initAndGetManager(e){const t=await CI(e),a=new hI(e);return t.register("authEvent",s=>(Ae(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:a.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:a},this.iframes[e._key()]=t,a}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Rp,{type:Rp},s=>{var l;const u=(l=s==null?void 0:s[0])===null||l===void 0?void 0:l[Rp];u!==void 0&&t(!!u),mr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=yI(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return W1()||H1()||Mg()}}const BI=zI;var Cb="@firebase/auth",Rb="1.10.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qI{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(a=>{e((a==null?void 0:a.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ae(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FI(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function HI(n){Lo(new Es("auth",(e,{options:t})=>{const a=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:u,authDomain:f}=a.options;Ae(u&&!u.includes(":"),"invalid-api-key",{appName:a.name});const p={apiKey:u,authDomain:f,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:X1(n)},y=new i2(a,s,l,p);return p2(y,t),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,a)=>{e.getProvider("auth-internal").initialize()})),Lo(new Es("auth-internal",e=>{const t=Cs(e.getProvider("auth").getImmediate());return(a=>new qI(a))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),yi(Cb,Rb,FI(n)),yi(Cb,Rb,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GI=5*60,$I=N1("authIdTokenMaxAge")||GI;let Ib=null;const YI=n=>async e=>{const t=e&&await e.getIdTokenResult(),a=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(a&&a>$I)return;const s=t==null?void 0:t.token;Ib!==s&&(Ib=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function KI(n=O1()){const e=Ig(n,"auth");if(e.isInitialized())return e.getImmediate();const t=m2(n,{popupRedirectResolver:BI,persistence:[Z2,z2,lx]}),a=N1("authTokenSyncURL");if(a&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(a,location.origin);if(location.origin===l.origin){const u=YI(l.toString());M2(t,u,()=>u(t.currentUser)),P2(t,f=>u(f))}}const s=A1("auth");return s?g2(t,`http://${s}`):Ph("Auth",!1),t}function QI(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}s2({loadJS(n){return new Promise((e,t)=>{const a=document.createElement("script");a.setAttribute("src",n),a.onload=e,a.onerror=s=>{const l=qr("internal-error");l.customData=s,t(l)},a.type="text/javascript",a.charset="UTF-8",QI().appendChild(a)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});HI("Browser");var WI="firebase",XI="11.7.3";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */yi(WI,XI,"app");var Db=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var vi,px;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(P,R){function N(){}N.prototype=R.prototype,P.D=R.prototype,P.prototype=new N,P.prototype.constructor=P,P.C=function(j,L,z){for(var O=Array(arguments.length-2),dt=2;dt<arguments.length;dt++)O[dt-2]=arguments[dt];return R.prototype[L].apply(j,O)}}function t(){this.blockSize=-1}function a(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(a,t),a.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(P,R,N){N||(N=0);var j=Array(16);if(typeof R=="string")for(var L=0;16>L;++L)j[L]=R.charCodeAt(N++)|R.charCodeAt(N++)<<8|R.charCodeAt(N++)<<16|R.charCodeAt(N++)<<24;else for(L=0;16>L;++L)j[L]=R[N++]|R[N++]<<8|R[N++]<<16|R[N++]<<24;R=P.g[0],N=P.g[1],L=P.g[2];var z=P.g[3],O=R+(z^N&(L^z))+j[0]+3614090360&4294967295;R=N+(O<<7&4294967295|O>>>25),O=z+(L^R&(N^L))+j[1]+3905402710&4294967295,z=R+(O<<12&4294967295|O>>>20),O=L+(N^z&(R^N))+j[2]+606105819&4294967295,L=z+(O<<17&4294967295|O>>>15),O=N+(R^L&(z^R))+j[3]+3250441966&4294967295,N=L+(O<<22&4294967295|O>>>10),O=R+(z^N&(L^z))+j[4]+4118548399&4294967295,R=N+(O<<7&4294967295|O>>>25),O=z+(L^R&(N^L))+j[5]+1200080426&4294967295,z=R+(O<<12&4294967295|O>>>20),O=L+(N^z&(R^N))+j[6]+2821735955&4294967295,L=z+(O<<17&4294967295|O>>>15),O=N+(R^L&(z^R))+j[7]+4249261313&4294967295,N=L+(O<<22&4294967295|O>>>10),O=R+(z^N&(L^z))+j[8]+1770035416&4294967295,R=N+(O<<7&4294967295|O>>>25),O=z+(L^R&(N^L))+j[9]+2336552879&4294967295,z=R+(O<<12&4294967295|O>>>20),O=L+(N^z&(R^N))+j[10]+4294925233&4294967295,L=z+(O<<17&4294967295|O>>>15),O=N+(R^L&(z^R))+j[11]+2304563134&4294967295,N=L+(O<<22&4294967295|O>>>10),O=R+(z^N&(L^z))+j[12]+1804603682&4294967295,R=N+(O<<7&4294967295|O>>>25),O=z+(L^R&(N^L))+j[13]+4254626195&4294967295,z=R+(O<<12&4294967295|O>>>20),O=L+(N^z&(R^N))+j[14]+2792965006&4294967295,L=z+(O<<17&4294967295|O>>>15),O=N+(R^L&(z^R))+j[15]+1236535329&4294967295,N=L+(O<<22&4294967295|O>>>10),O=R+(L^z&(N^L))+j[1]+4129170786&4294967295,R=N+(O<<5&4294967295|O>>>27),O=z+(N^L&(R^N))+j[6]+3225465664&4294967295,z=R+(O<<9&4294967295|O>>>23),O=L+(R^N&(z^R))+j[11]+643717713&4294967295,L=z+(O<<14&4294967295|O>>>18),O=N+(z^R&(L^z))+j[0]+3921069994&4294967295,N=L+(O<<20&4294967295|O>>>12),O=R+(L^z&(N^L))+j[5]+3593408605&4294967295,R=N+(O<<5&4294967295|O>>>27),O=z+(N^L&(R^N))+j[10]+38016083&4294967295,z=R+(O<<9&4294967295|O>>>23),O=L+(R^N&(z^R))+j[15]+3634488961&4294967295,L=z+(O<<14&4294967295|O>>>18),O=N+(z^R&(L^z))+j[4]+3889429448&4294967295,N=L+(O<<20&4294967295|O>>>12),O=R+(L^z&(N^L))+j[9]+568446438&4294967295,R=N+(O<<5&4294967295|O>>>27),O=z+(N^L&(R^N))+j[14]+3275163606&4294967295,z=R+(O<<9&4294967295|O>>>23),O=L+(R^N&(z^R))+j[3]+4107603335&4294967295,L=z+(O<<14&4294967295|O>>>18),O=N+(z^R&(L^z))+j[8]+1163531501&4294967295,N=L+(O<<20&4294967295|O>>>12),O=R+(L^z&(N^L))+j[13]+2850285829&4294967295,R=N+(O<<5&4294967295|O>>>27),O=z+(N^L&(R^N))+j[2]+4243563512&4294967295,z=R+(O<<9&4294967295|O>>>23),O=L+(R^N&(z^R))+j[7]+1735328473&4294967295,L=z+(O<<14&4294967295|O>>>18),O=N+(z^R&(L^z))+j[12]+2368359562&4294967295,N=L+(O<<20&4294967295|O>>>12),O=R+(N^L^z)+j[5]+4294588738&4294967295,R=N+(O<<4&4294967295|O>>>28),O=z+(R^N^L)+j[8]+2272392833&4294967295,z=R+(O<<11&4294967295|O>>>21),O=L+(z^R^N)+j[11]+1839030562&4294967295,L=z+(O<<16&4294967295|O>>>16),O=N+(L^z^R)+j[14]+4259657740&4294967295,N=L+(O<<23&4294967295|O>>>9),O=R+(N^L^z)+j[1]+2763975236&4294967295,R=N+(O<<4&4294967295|O>>>28),O=z+(R^N^L)+j[4]+1272893353&4294967295,z=R+(O<<11&4294967295|O>>>21),O=L+(z^R^N)+j[7]+4139469664&4294967295,L=z+(O<<16&4294967295|O>>>16),O=N+(L^z^R)+j[10]+3200236656&4294967295,N=L+(O<<23&4294967295|O>>>9),O=R+(N^L^z)+j[13]+681279174&4294967295,R=N+(O<<4&4294967295|O>>>28),O=z+(R^N^L)+j[0]+3936430074&4294967295,z=R+(O<<11&4294967295|O>>>21),O=L+(z^R^N)+j[3]+3572445317&4294967295,L=z+(O<<16&4294967295|O>>>16),O=N+(L^z^R)+j[6]+76029189&4294967295,N=L+(O<<23&4294967295|O>>>9),O=R+(N^L^z)+j[9]+3654602809&4294967295,R=N+(O<<4&4294967295|O>>>28),O=z+(R^N^L)+j[12]+3873151461&4294967295,z=R+(O<<11&4294967295|O>>>21),O=L+(z^R^N)+j[15]+530742520&4294967295,L=z+(O<<16&4294967295|O>>>16),O=N+(L^z^R)+j[2]+3299628645&4294967295,N=L+(O<<23&4294967295|O>>>9),O=R+(L^(N|~z))+j[0]+4096336452&4294967295,R=N+(O<<6&4294967295|O>>>26),O=z+(N^(R|~L))+j[7]+1126891415&4294967295,z=R+(O<<10&4294967295|O>>>22),O=L+(R^(z|~N))+j[14]+2878612391&4294967295,L=z+(O<<15&4294967295|O>>>17),O=N+(z^(L|~R))+j[5]+4237533241&4294967295,N=L+(O<<21&4294967295|O>>>11),O=R+(L^(N|~z))+j[12]+1700485571&4294967295,R=N+(O<<6&4294967295|O>>>26),O=z+(N^(R|~L))+j[3]+2399980690&4294967295,z=R+(O<<10&4294967295|O>>>22),O=L+(R^(z|~N))+j[10]+4293915773&4294967295,L=z+(O<<15&4294967295|O>>>17),O=N+(z^(L|~R))+j[1]+2240044497&4294967295,N=L+(O<<21&4294967295|O>>>11),O=R+(L^(N|~z))+j[8]+1873313359&4294967295,R=N+(O<<6&4294967295|O>>>26),O=z+(N^(R|~L))+j[15]+4264355552&4294967295,z=R+(O<<10&4294967295|O>>>22),O=L+(R^(z|~N))+j[6]+2734768916&4294967295,L=z+(O<<15&4294967295|O>>>17),O=N+(z^(L|~R))+j[13]+1309151649&4294967295,N=L+(O<<21&4294967295|O>>>11),O=R+(L^(N|~z))+j[4]+4149444226&4294967295,R=N+(O<<6&4294967295|O>>>26),O=z+(N^(R|~L))+j[11]+3174756917&4294967295,z=R+(O<<10&4294967295|O>>>22),O=L+(R^(z|~N))+j[2]+718787259&4294967295,L=z+(O<<15&4294967295|O>>>17),O=N+(z^(L|~R))+j[9]+3951481745&4294967295,P.g[0]=P.g[0]+R&4294967295,P.g[1]=P.g[1]+(L+(O<<21&4294967295|O>>>11))&4294967295,P.g[2]=P.g[2]+L&4294967295,P.g[3]=P.g[3]+z&4294967295}a.prototype.u=function(P,R){R===void 0&&(R=P.length);for(var N=R-this.blockSize,j=this.B,L=this.h,z=0;z<R;){if(L==0)for(;z<=N;)s(this,P,z),z+=this.blockSize;if(typeof P=="string"){for(;z<R;)if(j[L++]=P.charCodeAt(z++),L==this.blockSize){s(this,j),L=0;break}}else for(;z<R;)if(j[L++]=P[z++],L==this.blockSize){s(this,j),L=0;break}}this.h=L,this.o+=R},a.prototype.v=function(){var P=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);P[0]=128;for(var R=1;R<P.length-8;++R)P[R]=0;var N=8*this.o;for(R=P.length-8;R<P.length;++R)P[R]=N&255,N/=256;for(this.u(P),P=Array(16),R=N=0;4>R;++R)for(var j=0;32>j;j+=8)P[N++]=this.g[R]>>>j&255;return P};function l(P,R){var N=f;return Object.prototype.hasOwnProperty.call(N,P)?N[P]:N[P]=R(P)}function u(P,R){this.h=R;for(var N=[],j=!0,L=P.length-1;0<=L;L--){var z=P[L]|0;j&&z==R||(N[L]=z,j=!1)}this.g=N}var f={};function p(P){return-128<=P&&128>P?l(P,function(R){return new u([R|0],0>R?-1:0)}):new u([P|0],0>P?-1:0)}function y(P){if(isNaN(P)||!isFinite(P))return E;if(0>P)return I(y(-P));for(var R=[],N=1,j=0;P>=N;j++)R[j]=P/N|0,N*=4294967296;return new u(R,0)}function v(P,R){if(P.length==0)throw Error("number format error: empty string");if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(P.charAt(0)=="-")return I(v(P.substring(1),R));if(0<=P.indexOf("-"))throw Error('number format error: interior "-" character');for(var N=y(Math.pow(R,8)),j=E,L=0;L<P.length;L+=8){var z=Math.min(8,P.length-L),O=parseInt(P.substring(L,L+z),R);8>z?(z=y(Math.pow(R,z)),j=j.j(z).add(y(O))):(j=j.j(N),j=j.add(y(O)))}return j}var E=p(0),T=p(1),C=p(16777216);n=u.prototype,n.m=function(){if(M(this))return-I(this).m();for(var P=0,R=1,N=0;N<this.g.length;N++){var j=this.i(N);P+=(0<=j?j:4294967296+j)*R,R*=4294967296}return P},n.toString=function(P){if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(A(this))return"0";if(M(this))return"-"+I(this).toString(P);for(var R=y(Math.pow(P,6)),N=this,j="";;){var L=oe(N,R).g;N=G(N,L.j(R));var z=((0<N.g.length?N.g[0]:N.h)>>>0).toString(P);if(N=L,A(N))return z+j;for(;6>z.length;)z="0"+z;j=z+j}},n.i=function(P){return 0>P?0:P<this.g.length?this.g[P]:this.h};function A(P){if(P.h!=0)return!1;for(var R=0;R<P.g.length;R++)if(P.g[R]!=0)return!1;return!0}function M(P){return P.h==-1}n.l=function(P){return P=G(this,P),M(P)?-1:A(P)?0:1};function I(P){for(var R=P.g.length,N=[],j=0;j<R;j++)N[j]=~P.g[j];return new u(N,~P.h).add(T)}n.abs=function(){return M(this)?I(this):this},n.add=function(P){for(var R=Math.max(this.g.length,P.g.length),N=[],j=0,L=0;L<=R;L++){var z=j+(this.i(L)&65535)+(P.i(L)&65535),O=(z>>>16)+(this.i(L)>>>16)+(P.i(L)>>>16);j=O>>>16,z&=65535,O&=65535,N[L]=O<<16|z}return new u(N,N[N.length-1]&-2147483648?-1:0)};function G(P,R){return P.add(I(R))}n.j=function(P){if(A(this)||A(P))return E;if(M(this))return M(P)?I(this).j(I(P)):I(I(this).j(P));if(M(P))return I(this.j(I(P)));if(0>this.l(C)&&0>P.l(C))return y(this.m()*P.m());for(var R=this.g.length+P.g.length,N=[],j=0;j<2*R;j++)N[j]=0;for(j=0;j<this.g.length;j++)for(var L=0;L<P.g.length;L++){var z=this.i(j)>>>16,O=this.i(j)&65535,dt=P.i(L)>>>16,Me=P.i(L)&65535;N[2*j+2*L]+=O*Me,Q(N,2*j+2*L),N[2*j+2*L+1]+=z*Me,Q(N,2*j+2*L+1),N[2*j+2*L+1]+=O*dt,Q(N,2*j+2*L+1),N[2*j+2*L+2]+=z*dt,Q(N,2*j+2*L+2)}for(j=0;j<R;j++)N[j]=N[2*j+1]<<16|N[2*j];for(j=R;j<2*R;j++)N[j]=0;return new u(N,0)};function Q(P,R){for(;(P[R]&65535)!=P[R];)P[R+1]+=P[R]>>>16,P[R]&=65535,R++}function q(P,R){this.g=P,this.h=R}function oe(P,R){if(A(R))throw Error("division by zero");if(A(P))return new q(E,E);if(M(P))return R=oe(I(P),R),new q(I(R.g),I(R.h));if(M(R))return R=oe(P,I(R)),new q(I(R.g),R.h);if(30<P.g.length){if(M(P)||M(R))throw Error("slowDivide_ only works with positive integers.");for(var N=T,j=R;0>=j.l(P);)N=ce(N),j=ce(j);var L=pe(N,1),z=pe(j,1);for(j=pe(j,2),N=pe(N,2);!A(j);){var O=z.add(j);0>=O.l(P)&&(L=L.add(N),z=O),j=pe(j,1),N=pe(N,1)}return R=G(P,L.j(R)),new q(L,R)}for(L=E;0<=P.l(R);){for(N=Math.max(1,Math.floor(P.m()/R.m())),j=Math.ceil(Math.log(N)/Math.LN2),j=48>=j?1:Math.pow(2,j-48),z=y(N),O=z.j(R);M(O)||0<O.l(P);)N-=j,z=y(N),O=z.j(R);A(z)&&(z=T),L=L.add(z),P=G(P,O)}return new q(L,P)}n.A=function(P){return oe(this,P).h},n.and=function(P){for(var R=Math.max(this.g.length,P.g.length),N=[],j=0;j<R;j++)N[j]=this.i(j)&P.i(j);return new u(N,this.h&P.h)},n.or=function(P){for(var R=Math.max(this.g.length,P.g.length),N=[],j=0;j<R;j++)N[j]=this.i(j)|P.i(j);return new u(N,this.h|P.h)},n.xor=function(P){for(var R=Math.max(this.g.length,P.g.length),N=[],j=0;j<R;j++)N[j]=this.i(j)^P.i(j);return new u(N,this.h^P.h)};function ce(P){for(var R=P.g.length+1,N=[],j=0;j<R;j++)N[j]=P.i(j)<<1|P.i(j-1)>>>31;return new u(N,P.h)}function pe(P,R){var N=R>>5;R%=32;for(var j=P.g.length-N,L=[],z=0;z<j;z++)L[z]=0<R?P.i(z+N)>>>R|P.i(z+N+1)<<32-R:P.i(z+N);return new u(L,P.h)}a.prototype.digest=a.prototype.v,a.prototype.reset=a.prototype.s,a.prototype.update=a.prototype.u,px=a,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=y,u.fromString=v,vi=u}).apply(typeof Db<"u"?Db:typeof self<"u"?self:typeof window<"u"?window:{});var Pd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var gx,bc,yx,$d,Wp,vx,_x,bx;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,_,b){return d==Array.prototype||d==Object.prototype||(d[_]=b.value),d};function t(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof Pd=="object"&&Pd];for(var _=0;_<d.length;++_){var b=d[_];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var a=t(this);function s(d,_){if(_)e:{var b=a;d=d.split(".");for(var S=0;S<d.length-1;S++){var F=d[S];if(!(F in b))break e;b=b[F]}d=d[d.length-1],S=b[d],_=_(S),_!=S&&_!=null&&e(b,d,{configurable:!0,writable:!0,value:_})}}function l(d,_){d instanceof String&&(d+="");var b=0,S=!1,F={next:function(){if(!S&&b<d.length){var W=b++;return{value:_(W,d[W]),done:!1}}return S=!0,{done:!0,value:void 0}}};return F[Symbol.iterator]=function(){return F},F}s("Array.prototype.values",function(d){return d||function(){return l(this,function(_,b){return b})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},f=this||self;function p(d){var _=typeof d;return _=_!="object"?_:d?Array.isArray(d)?"array":_:"null",_=="array"||_=="object"&&typeof d.length=="number"}function y(d){var _=typeof d;return _=="object"&&d!=null||_=="function"}function v(d,_,b){return d.call.apply(d.bind,arguments)}function E(d,_,b){if(!d)throw Error();if(2<arguments.length){var S=Array.prototype.slice.call(arguments,2);return function(){var F=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(F,S),d.apply(_,F)}}return function(){return d.apply(_,arguments)}}function T(d,_,b){return T=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?v:E,T.apply(null,arguments)}function C(d,_){var b=Array.prototype.slice.call(arguments,1);return function(){var S=b.slice();return S.push.apply(S,arguments),d.apply(this,S)}}function A(d,_){function b(){}b.prototype=_.prototype,d.aa=_.prototype,d.prototype=new b,d.prototype.constructor=d,d.Qb=function(S,F,W){for(var de=Array(arguments.length-2),$e=2;$e<arguments.length;$e++)de[$e-2]=arguments[$e];return _.prototype[F].apply(S,de)}}function M(d){const _=d.length;if(0<_){const b=Array(_);for(let S=0;S<_;S++)b[S]=d[S];return b}return[]}function I(d,_){for(let b=1;b<arguments.length;b++){const S=arguments[b];if(p(S)){const F=d.length||0,W=S.length||0;d.length=F+W;for(let de=0;de<W;de++)d[F+de]=S[de]}else d.push(S)}}class G{constructor(_,b){this.i=_,this.j=b,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function Q(d){return/^[\s\xa0]*$/.test(d)}function q(){var d=f.navigator;return d&&(d=d.userAgent)?d:""}function oe(d){return oe[" "](d),d}oe[" "]=function(){};var ce=q().indexOf("Gecko")!=-1&&!(q().toLowerCase().indexOf("webkit")!=-1&&q().indexOf("Edge")==-1)&&!(q().indexOf("Trident")!=-1||q().indexOf("MSIE")!=-1)&&q().indexOf("Edge")==-1;function pe(d,_,b){for(const S in d)_.call(b,d[S],S,d)}function P(d,_){for(const b in d)_.call(void 0,d[b],b,d)}function R(d){const _={};for(const b in d)_[b]=d[b];return _}const N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function j(d,_){let b,S;for(let F=1;F<arguments.length;F++){S=arguments[F];for(b in S)d[b]=S[b];for(let W=0;W<N.length;W++)b=N[W],Object.prototype.hasOwnProperty.call(S,b)&&(d[b]=S[b])}}function L(d){var _=1;d=d.split(":");const b=[];for(;0<_&&d.length;)b.push(d.shift()),_--;return d.length&&b.push(d.join(":")),b}function z(d){f.setTimeout(()=>{throw d},0)}function O(){var d=Ge;let _=null;return d.g&&(_=d.g,d.g=d.g.next,d.g||(d.h=null),_.next=null),_}class dt{constructor(){this.h=this.g=null}add(_,b){const S=Me.get();S.set(_,b),this.h?this.h.next=S:this.g=S,this.h=S}}var Me=new G(()=>new Z,d=>d.reset());class Z{constructor(){this.next=this.g=this.h=null}set(_,b){this.h=_,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let ue,ye=!1,Ge=new dt,k=()=>{const d=f.Promise.resolve(void 0);ue=()=>{d.then(ie)}};var ie=()=>{for(var d;d=O();){try{d.h.call(d.g)}catch(b){z(b)}var _=Me;_.j(d),100>_.h&&(_.h++,d.next=_.g,_.g=d)}ye=!1};function he(){this.s=this.s,this.C=this.C}he.prototype.s=!1,he.prototype.ma=function(){this.s||(this.s=!0,this.N())},he.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function le(d,_){this.type=d,this.g=this.target=_,this.defaultPrevented=!1}le.prototype.h=function(){this.defaultPrevented=!0};var _e=function(){if(!f.addEventListener||!Object.defineProperty)return!1;var d=!1,_=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const b=()=>{};f.addEventListener("test",b,_),f.removeEventListener("test",b,_)}catch{}return d}();function Oe(d,_){if(le.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var b=this.type=d.type,S=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=_,_=d.relatedTarget){if(ce){e:{try{oe(_.nodeName);var F=!0;break e}catch{}F=!1}F||(_=null)}}else b=="mouseover"?_=d.fromElement:b=="mouseout"&&(_=d.toElement);this.relatedTarget=_,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:ee[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&Oe.aa.h.call(this)}}A(Oe,le);var ee={2:"touch",3:"pen",4:"mouse"};Oe.prototype.h=function(){Oe.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var ve="closure_listenable_"+(1e6*Math.random()|0),se=0;function at(d,_,b,S,F){this.listener=d,this.proxy=null,this.src=_,this.type=b,this.capture=!!S,this.ha=F,this.key=++se,this.da=this.fa=!1}function xe(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function Le(d){this.src=d,this.g={},this.h=0}Le.prototype.add=function(d,_,b,S,F){var W=d.toString();d=this.g[W],d||(d=this.g[W]=[],this.h++);var de=qn(d,_,S,F);return-1<de?(_=d[de],b||(_.fa=!1)):(_=new at(_,this.src,W,!!S,F),_.fa=b,d.push(_)),_};function Ce(d,_){var b=_.type;if(b in d.g){var S=d.g[b],F=Array.prototype.indexOf.call(S,_,void 0),W;(W=0<=F)&&Array.prototype.splice.call(S,F,1),W&&(xe(_),d.g[b].length==0&&(delete d.g[b],d.h--))}}function qn(d,_,b,S){for(var F=0;F<d.length;++F){var W=d[F];if(!W.da&&W.listener==_&&W.capture==!!b&&W.ha==S)return F}return-1}var Er="closure_lm_"+(1e6*Math.random()|0),ja={};function lu(d,_,b,S,F){if(Array.isArray(_)){for(var W=0;W<_.length;W++)lu(d,_[W],b,S,F);return null}return b=cu(b),d&&d[ve]?d.K(_,b,y(S)?!!S.capture:!1,F):Fn(d,_,b,!1,S,F)}function Fn(d,_,b,S,F,W){if(!_)throw Error("Invalid event type");var de=y(F)?!!F.capture:!!F,$e=js(d);if($e||(d[Er]=$e=new Le(d)),b=$e.add(_,b,S,de,W),b.proxy)return b;if(S=pf(),b.proxy=S,S.src=d,S.listener=b,d.addEventListener)_e||(F=de),F===void 0&&(F=!1),d.addEventListener(_.toString(),S,F);else if(d.attachEvent)d.attachEvent(ji(_.toString()),S);else if(d.addListener&&d.removeListener)d.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return b}function pf(){function d(b){return _.call(d.src,d.listener,b)}const _=gf;return d}function sl(d,_,b,S,F){if(Array.isArray(_))for(var W=0;W<_.length;W++)sl(d,_[W],b,S,F);else S=y(S)?!!S.capture:!!S,b=cu(b),d&&d[ve]?(d=d.i,_=String(_).toString(),_ in d.g&&(W=d.g[_],b=qn(W,b,S,F),-1<b&&(xe(W[b]),Array.prototype.splice.call(W,b,1),W.length==0&&(delete d.g[_],d.h--)))):d&&(d=js(d))&&(_=d.g[_.toString()],d=-1,_&&(d=qn(_,b,S,F)),(b=-1<d?_[d]:null)&&Os(b))}function Os(d){if(typeof d!="number"&&d&&!d.da){var _=d.src;if(_&&_[ve])Ce(_.i,d);else{var b=d.type,S=d.proxy;_.removeEventListener?_.removeEventListener(b,S,d.capture):_.detachEvent?_.detachEvent(ji(b),S):_.addListener&&_.removeListener&&_.removeListener(S),(b=js(_))?(Ce(b,d),b.h==0&&(b.src=null,_[Er]=null)):xe(d)}}}function ji(d){return d in ja?ja[d]:ja[d]="on"+d}function gf(d,_){if(d.da)d=!0;else{_=new Oe(_,this);var b=d.listener,S=d.ha||d.src;d.fa&&Os(d),d=b.call(S,_)}return d}function js(d){return d=d[Er],d instanceof Le?d:null}var ol="__closure_events_fn_"+(1e9*Math.random()>>>0);function cu(d){return typeof d=="function"?d:(d[ol]||(d[ol]=function(_){return d.handleEvent(_)}),d[ol])}function xt(){he.call(this),this.i=new Le(this),this.M=this,this.F=null}A(xt,he),xt.prototype[ve]=!0,xt.prototype.removeEventListener=function(d,_,b,S){sl(this,d,_,b,S)};function et(d,_){var b,S=d.F;if(S)for(b=[];S;S=S.F)b.push(S);if(d=d.M,S=_.type||_,typeof _=="string")_=new le(_,d);else if(_ instanceof le)_.target=_.target||d;else{var F=_;_=new le(S,d),j(_,F)}if(F=!0,b)for(var W=b.length-1;0<=W;W--){var de=_.g=b[W];F=On(de,S,!0,_)&&F}if(de=_.g=d,F=On(de,S,!0,_)&&F,F=On(de,S,!1,_)&&F,b)for(W=0;W<b.length;W++)de=_.g=b[W],F=On(de,S,!1,_)&&F}xt.prototype.N=function(){if(xt.aa.N.call(this),this.i){var d=this.i,_;for(_ in d.g){for(var b=d.g[_],S=0;S<b.length;S++)xe(b[S]);delete d.g[_],d.h--}}this.F=null},xt.prototype.K=function(d,_,b,S){return this.i.add(String(d),_,!1,b,S)},xt.prototype.L=function(d,_,b,S){return this.i.add(String(d),_,!0,b,S)};function On(d,_,b,S){if(_=d.i.g[String(_)],!_)return!0;_=_.concat();for(var F=!0,W=0;W<_.length;++W){var de=_[W];if(de&&!de.da&&de.capture==b){var $e=de.listener,kt=de.ha||de.src;de.fa&&Ce(d.i,de),F=$e.call(kt,S)!==!1&&F}}return F&&!S.defaultPrevented}function cn(d,_,b){if(typeof d=="function")b&&(d=T(d,b));else if(d&&typeof d.handleEvent=="function")d=T(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(_)?-1:f.setTimeout(d,_||0)}function uu(d){d.g=cn(()=>{d.g=null,d.i&&(d.i=!1,uu(d))},d.l);const _=d.h;d.h=null,d.m.apply(null,_)}class yf extends he{constructor(_,b){super(),this.m=_,this.l=b,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:uu(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Pi(d){he.call(this),this.h=d,this.g={}}A(Pi,he);var Mi=[];function ki(d){pe(d.g,function(_,b){this.g.hasOwnProperty(b)&&Os(_)},d),d.g={}}Pi.prototype.N=function(){Pi.aa.N.call(this),ki(this)},Pi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var or=f.JSON.stringify,Ps=f.JSON.parse,Vi=class{stringify(d){return f.JSON.stringify(d,void 0)}parse(d){return f.JSON.parse(d,void 0)}};function ll(){}ll.prototype.h=null;function cl(d){return d.h||(d.h=d.i())}function ul(){}var Yr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Kr(){le.call(this,"d")}A(Kr,le);function dl(){le.call(this,"c")}A(dl,le);var xr={},hl=null;function Pa(){return hl=hl||new xt}xr.La="serverreachability";function Ms(d){le.call(this,xr.La,d)}A(Ms,le);function Ma(d){const _=Pa();et(_,new Ms(_))}xr.STAT_EVENT="statevent";function du(d,_){le.call(this,xr.STAT_EVENT,d),this.stat=_}A(du,le);function pt(d){const _=Pa();et(_,new du(_,d))}xr.Ma="timingevent";function Mt(d,_){le.call(this,xr.Ma,d),this.size=_}A(Mt,le);function Rt(d,_){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){d()},_)}function Hn(){this.g=!0}Hn.prototype.xa=function(){this.g=!1};function fl(d,_,b,S,F,W){d.info(function(){if(d.g)if(W)for(var de="",$e=W.split("&"),kt=0;kt<$e.length;kt++){var Ye=$e[kt].split("=");if(1<Ye.length){var Ht=Ye[0];Ye=Ye[1];var Vt=Ht.split("_");de=2<=Vt.length&&Vt[1]=="type"?de+(Ht+"="+Ye+"&"):de+(Ht+"=redacted&")}}else de=null;else de=W;return"XMLHTTP REQ ("+S+") [attempt "+F+"]: "+_+`
`+b+`
`+de})}function vf(d,_,b,S,F,W,de){d.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+F+"]: "+_+`
`+b+`
`+W+" "+de})}function ka(d,_,b,S){d.info(function(){return"XMLHTTP TEXT ("+_+"): "+Li(d,b)+(S?" "+S:"")})}function hu(d,_){d.info(function(){return"TIMEOUT: "+_})}Hn.prototype.info=function(){};function Li(d,_){if(!d.g)return _;if(!_)return null;try{var b=JSON.parse(_);if(b){for(d=0;d<b.length;d++)if(Array.isArray(b[d])){var S=b[d];if(!(2>S.length)){var F=S[1];if(Array.isArray(F)&&!(1>F.length)){var W=F[0];if(W!="noop"&&W!="stop"&&W!="close")for(var de=1;de<F.length;de++)F[de]=""}}}}return or(b)}catch{return _}}var Va={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Qr={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Tr;function wr(){}A(wr,ll),wr.prototype.g=function(){return new XMLHttpRequest},wr.prototype.i=function(){return{}},Tr=new wr;function yn(d,_,b,S){this.j=d,this.i=_,this.l=b,this.R=S||1,this.U=new Pi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new At}function At(){this.i=null,this.g="",this.h=!1}var ml={},ks={};function lr(d,_,b){d.L=1,d.v=Fi(jn(_)),d.m=b,d.P=!0,Wr(d,null)}function Wr(d,_){d.F=Date.now(),Ui(d),d.A=jn(d.v);var b=d.A,S=d.R;Array.isArray(S)||(S=[String(S)]),bl(b.i,"t",S),d.C=0,b=d.j.J,d.h=new At,d.g=Cu(d.j,b?_:null,!d.m),0<d.O&&(d.M=new yf(T(d.Y,d,d.g),d.O)),_=d.U,b=d.g,S=d.ca;var F="readystatechange";Array.isArray(F)||(F&&(Mi[0]=F.toString()),F=Mi);for(var W=0;W<F.length;W++){var de=lu(b,F[W],S||_.handleEvent,!1,_.h||_);if(!de)break;_.g[de.key]=de}_=d.H?R(d.H):{},d.m?(d.u||(d.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,_)):(d.u="GET",d.g.ea(d.A,d.u,null,_)),Ma(),fl(d.i,d.u,d.A,d.l,d.R,d.m)}yn.prototype.ca=function(d){d=d.target;const _=this.M;_&&Kn(d)==3?_.j():this.Y(d)},yn.prototype.Y=function(d){try{if(d==this.g)e:{const Vt=Kn(this.g);var _=this.g.Ba();const aa=this.g.Z();if(!(3>Vt)&&(Vt!=3||this.g&&(this.h.h||this.g.oa()||bu(this.g)))){this.J||Vt!=4||_==7||(_==8||0>=aa?Ma(3):Ma(2)),La(this);var b=this.g.Z();this.X=b;t:if(fu(this)){var S=bu(this.g);d="";var F=S.length,W=Kn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Zt(this),Ar(this);var de="";break t}this.h.i=new f.TextDecoder}for(_=0;_<F;_++)this.h.h=!0,d+=this.h.i.decode(S[_],{stream:!(W&&_==F-1)});S.length=0,this.h.g+=d,this.C=0,de=this.h.g}else de=this.g.oa();if(this.o=b==200,vf(this.i,this.u,this.A,this.l,this.R,Vt,b),this.o){if(this.T&&!this.K){t:{if(this.g){var $e,kt=this.g;if(($e=kt.g?kt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Q($e)){var Ye=$e;break t}}Ye=null}if(b=Ye)ka(this.i,this.l,b,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,zi(this,b);else{this.o=!1,this.s=3,pt(12),Zt(this),Ar(this);break e}}if(this.P){b=!0;let Jt;for(;!this.J&&this.C<de.length;)if(Jt=mu(this,de),Jt==ks){Vt==4&&(this.s=4,pt(14),b=!1),ka(this.i,this.l,null,"[Incomplete Response]");break}else if(Jt==ml){this.s=4,pt(15),ka(this.i,this.l,de,"[Invalid Chunk]"),b=!1;break}else ka(this.i,this.l,Jt,null),zi(this,Jt);if(fu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Vt!=4||de.length!=0||this.h.h||(this.s=1,pt(16),b=!1),this.o=this.o&&b,!b)ka(this.i,this.l,de,"[Invalid Chunked Response]"),Zt(this),Ar(this);else if(0<de.length&&!this.W){this.W=!0;var Ht=this.j;Ht.g==this&&Ht.ba&&!Ht.M&&(Ht.j.info("Great, no buffering proxy detected. Bytes received: "+de.length),Xi(Ht),Ht.M=!0,pt(11))}}else ka(this.i,this.l,de,null),zi(this,de);Vt==4&&Zt(this),this.o&&!this.J&&(Vt==4?Au(this.j,this):(this.o=!1,Ui(this)))}else Tf(this.g),b==400&&0<de.indexOf("Unknown SID")?(this.s=3,pt(12)):(this.s=0,pt(13)),Zt(this),Ar(this)}}}catch{}finally{}};function fu(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function mu(d,_){var b=d.C,S=_.indexOf(`
`,b);return S==-1?ks:(b=Number(_.substring(b,S)),isNaN(b)?ml:(S+=1,S+b>_.length?ks:(_=_.slice(S,S+b),d.C=S+b,_)))}yn.prototype.cancel=function(){this.J=!0,Zt(this)};function Ui(d){d.S=Date.now()+d.I,pu(d,d.I)}function pu(d,_){if(d.B!=null)throw Error("WatchDog timer not null");d.B=Rt(T(d.ba,d),_)}function La(d){d.B&&(f.clearTimeout(d.B),d.B=null)}yn.prototype.ba=function(){this.B=null;const d=Date.now();0<=d-this.S?(hu(this.i,this.A),this.L!=2&&(Ma(),pt(17)),Zt(this),this.s=2,Ar(this)):pu(this,this.S-d)};function Ar(d){d.j.G==0||d.J||Au(d.j,d)}function Zt(d){La(d);var _=d.M;_&&typeof _.ma=="function"&&_.ma(),d.M=null,ki(d.U),d.g&&(_=d.g,d.g=null,_.abort(),_.ma())}function zi(d,_){try{var b=d.j;if(b.G!=0&&(b.g==d||pl(b.h,d))){if(!d.K&&pl(b.h,d)&&b.G==3){try{var S=b.Da.g.parse(_)}catch{S=null}if(Array.isArray(S)&&S.length==3){var F=S;if(F[0]==0){e:if(!b.u){if(b.g)if(b.g.F+3e3<d.F)Ks(b),$s(b);else break e;Al(b),pt(18)}}else b.za=F[1],0<b.za-b.T&&37500>F[2]&&b.F&&b.v==0&&!b.C&&(b.C=Rt(T(b.Za,b),6e3));if(1>=Ls(b.h)&&b.ca){try{b.ca()}catch{}b.ca=void 0}}else ra(b,11)}else if((d.K||b.g==d)&&Ks(b),!Q(_))for(F=b.Da.g.parse(_),_=0;_<F.length;_++){let Ye=F[_];if(b.T=Ye[0],Ye=Ye[1],b.G==2)if(Ye[0]=="c"){b.K=Ye[1],b.ia=Ye[2];const Ht=Ye[3];Ht!=null&&(b.la=Ht,b.j.info("VER="+b.la));const Vt=Ye[4];Vt!=null&&(b.Aa=Vt,b.j.info("SVER="+b.Aa));const aa=Ye[5];aa!=null&&typeof aa=="number"&&0<aa&&(S=1.5*aa,b.L=S,b.j.info("backChannelRequestTimeoutMs_="+S)),S=b;const Jt=d.g;if(Jt){const Or=Jt.g?Jt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Or){var W=S.h;W.g||Or.indexOf("spdy")==-1&&Or.indexOf("quic")==-1&&Or.indexOf("h2")==-1||(W.j=W.l,W.g=new Set,W.h&&(Us(W,W.h),W.h=null))}if(S.D){const Nl=Jt.g?Jt.g.getResponseHeader("X-HTTP-Session-Id"):null;Nl&&(S.ya=Nl,it(S.I,S.D,Nl))}}b.G=3,b.l&&b.l.ua(),b.ba&&(b.R=Date.now()-d.F,b.j.info("Handshake RTT: "+b.R+"ms")),S=b;var de=d;if(S.qa=Nu(S,S.J?S.ia:null,S.W),de.K){vn(S.h,de);var $e=de,kt=S.L;kt&&($e.I=kt),$e.B&&(La($e),Ui($e)),S.g=de}else Tu(S);0<b.i.length&&Ys(b)}else Ye[0]!="stop"&&Ye[0]!="close"||ra(b,7);else b.G==3&&(Ye[0]=="stop"||Ye[0]=="close"?Ye[0]=="stop"?ra(b,7):Tl(b):Ye[0]!="noop"&&b.l&&b.l.ta(Ye),b.v=0)}}Ma(4)}catch{}}var gu=class{constructor(d,_){this.g=d,this.map=_}};function Xr(d){this.l=d||10,f.PerformanceNavigationTiming?(d=f.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Vs(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function Ls(d){return d.h?1:d.g?d.g.size:0}function pl(d,_){return d.h?d.h==_:d.g?d.g.has(_):!1}function Us(d,_){d.g?d.g.add(_):d.h=_}function vn(d,_){d.h&&d.h==_?d.h=null:d.g&&d.g.has(_)&&d.g.delete(_)}Xr.prototype.cancel=function(){if(this.i=gl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function gl(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let _=d.i;for(const b of d.g.values())_=_.concat(b.D);return _}return M(d.i)}function _f(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(p(d)){for(var _=[],b=d.length,S=0;S<b;S++)_.push(d[S]);return _}_=[],b=0;for(S in d)_[b++]=d[S];return _}function zs(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(p(d)||typeof d=="string"){var _=[];d=d.length;for(var b=0;b<d;b++)_.push(b);return _}_=[],b=0;for(const S in d)_[b++]=S;return _}}}function yl(d,_){if(d.forEach&&typeof d.forEach=="function")d.forEach(_,void 0);else if(p(d)||typeof d=="string")Array.prototype.forEach.call(d,_,void 0);else for(var b=zs(d),S=_f(d),F=S.length,W=0;W<F;W++)_.call(void 0,S[W],b&&b[W],d)}var Bi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function bf(d,_){if(d){d=d.split("&");for(var b=0;b<d.length;b++){var S=d[b].indexOf("="),F=null;if(0<=S){var W=d[b].substring(0,S);F=d[b].substring(S+1)}else W=d[b];_(W,F?decodeURIComponent(F.replace(/\+/g," ")):"")}}}function It(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof It){this.h=d.h,qi(this,d.j),this.o=d.o,this.g=d.g,Ua(this,d.s),this.l=d.l;var _=d.i,b=new Jr;b.i=_.i,_.g&&(b.g=new Map(_.g),b.h=_.h),Zr(this,b),this.m=d.m}else d&&(_=String(d).match(Bi))?(this.h=!1,qi(this,_[1]||"",!0),this.o=Gn(_[2]||""),this.g=Gn(_[3]||"",!0),Ua(this,_[4]),this.l=Gn(_[5]||"",!0),Zr(this,_[6]||"",!0),this.m=Gn(_[7]||"")):(this.h=!1,this.i=new Jr(null,this.h))}It.prototype.toString=function(){var d=[],_=this.j;_&&d.push(Hi(_,vl,!0),":");var b=this.g;return(b||_=="file")&&(d.push("//"),(_=this.o)&&d.push(Hi(_,vl,!0),"@"),d.push(encodeURIComponent(String(b)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.s,b!=null&&d.push(":",String(b))),(b=this.l)&&(this.g&&b.charAt(0)!="/"&&d.push("/"),d.push(Hi(b,b.charAt(0)=="/"?Ef:_l,!0))),(b=this.i.toString())&&d.push("?",b),(b=this.m)&&d.push("#",Hi(b,Bs)),d.join("")};function jn(d){return new It(d)}function qi(d,_,b){d.j=b?Gn(_,!0):_,d.j&&(d.j=d.j.replace(/:$/,""))}function Ua(d,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);d.s=_}else d.s=null}function Zr(d,_,b){_ instanceof Jr?(d.i=_,vu(d.i,d.h)):(b||(_=Hi(_,xf)),d.i=new Jr(_,d.h))}function it(d,_,b){d.i.set(_,b)}function Fi(d){return it(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function Gn(d,_){return d?_?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Hi(d,_,b){return typeof d=="string"?(d=encodeURI(d).replace(_,yu),b&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function yu(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var vl=/[#\/\?@]/g,_l=/[#\?:]/g,Ef=/[#\?]/g,xf=/[#\?@]/g,Bs=/#/g;function Jr(d,_){this.h=this.g=null,this.i=d||null,this.j=!!_}function $n(d){d.g||(d.g=new Map,d.h=0,d.i&&bf(d.i,function(_,b){d.add(decodeURIComponent(_.replace(/\+/g," ")),b)}))}n=Jr.prototype,n.add=function(d,_){$n(this),this.i=null,d=Sr(this,d);var b=this.g.get(d);return b||this.g.set(d,b=[]),b.push(_),this.h+=1,this};function ea(d,_){$n(d),_=Sr(d,_),d.g.has(_)&&(d.i=null,d.h-=d.g.get(_).length,d.g.delete(_))}function ta(d,_){return $n(d),_=Sr(d,_),d.g.has(_)}n.forEach=function(d,_){$n(this),this.g.forEach(function(b,S){b.forEach(function(F){d.call(_,F,S,this)},this)},this)},n.na=function(){$n(this);const d=Array.from(this.g.values()),_=Array.from(this.g.keys()),b=[];for(let S=0;S<_.length;S++){const F=d[S];for(let W=0;W<F.length;W++)b.push(_[S])}return b},n.V=function(d){$n(this);let _=[];if(typeof d=="string")ta(this,d)&&(_=_.concat(this.g.get(Sr(this,d))));else{d=Array.from(this.g.values());for(let b=0;b<d.length;b++)_=_.concat(d[b])}return _},n.set=function(d,_){return $n(this),this.i=null,d=Sr(this,d),ta(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[_]),this.h+=1,this},n.get=function(d,_){return d?(d=this.V(d),0<d.length?String(d[0]):_):_};function bl(d,_,b){ea(d,_),0<b.length&&(d.i=null,d.g.set(Sr(d,_),M(b)),d.h+=b.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],_=Array.from(this.g.keys());for(var b=0;b<_.length;b++){var S=_[b];const W=encodeURIComponent(String(S)),de=this.V(S);for(S=0;S<de.length;S++){var F=W;de[S]!==""&&(F+="="+encodeURIComponent(String(de[S]))),d.push(F)}}return this.i=d.join("&")};function Sr(d,_){return _=String(_),d.j&&(_=_.toLowerCase()),_}function vu(d,_){_&&!d.j&&($n(d),d.i=null,d.g.forEach(function(b,S){var F=S.toLowerCase();S!=F&&(ea(this,S),bl(this,F,b))},d)),d.j=_}function Gi(d,_){const b=new Hn;if(f.Image){const S=new Image;S.onload=C(Yn,b,"TestLoadImage: loaded",!0,_,S),S.onerror=C(Yn,b,"TestLoadImage: error",!1,_,S),S.onabort=C(Yn,b,"TestLoadImage: abort",!1,_,S),S.ontimeout=C(Yn,b,"TestLoadImage: timeout",!1,_,S),f.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=d}else _(!1)}function cr(d,_){const b=new Hn,S=new AbortController,F=setTimeout(()=>{S.abort(),Yn(b,"TestPingServer: timeout",!1,_)},1e4);fetch(d,{signal:S.signal}).then(W=>{clearTimeout(F),W.ok?Yn(b,"TestPingServer: ok",!0,_):Yn(b,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(F),Yn(b,"TestPingServer: error",!1,_)})}function Yn(d,_,b,S,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),S(b)}catch{}}function $i(){this.g=new Vi}function Nr(d,_,b){const S=b||"";try{yl(d,function(F,W){let de=F;y(F)&&(de=or(F)),_.push(S+W+"="+encodeURIComponent(de))})}catch(F){throw _.push(S+"type="+encodeURIComponent("_badmap")),F}}function za(d){this.l=d.Ub||null,this.j=d.eb||!1}A(za,ll),za.prototype.g=function(){return new na(this.l,this.j)},za.prototype.i=function(d){return function(){return d}}({});function na(d,_){xt.call(this),this.D=d,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}A(na,xt),n=na.prototype,n.open=function(d,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=_,this.readyState=1,Rr(this)},n.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(_.body=d),(this.D||f).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Cr(this)),this.readyState=0},n.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,Rr(this)),this.g&&(this.readyState=3,Rr(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;El(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function El(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}n.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var _=d.value?d.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!d.done}))&&(this.response=this.responseText+=_)}d.done?Cr(this):Rr(this),this.readyState==3&&El(this)}},n.Ra=function(d){this.g&&(this.response=this.responseText=d,Cr(this))},n.Qa=function(d){this.g&&(this.response=d,Cr(this))},n.ga=function(){this.g&&Cr(this)};function Cr(d){d.readyState=4,d.l=null,d.j=null,d.v=null,Rr(d)}n.setRequestHeader=function(d,_){this.u.append(d,_)},n.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],_=this.h.entries();for(var b=_.next();!b.done;)b=b.value,d.push(b[0]+": "+b[1]),b=_.next();return d.join(`\r
`)};function Rr(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(na.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function xl(d){let _="";return pe(d,function(b,S){_+=S,_+=":",_+=b,_+=`\r
`}),_}function Ft(d,_,b){e:{for(S in b){var S=!1;break e}S=!0}S||(b=xl(b),typeof d=="string"?b!=null&&encodeURIComponent(String(b)):it(d,_,b))}function Ze(d){xt.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}A(Ze,xt);var qs=/^https?$/i,Yi=["POST","PUT"];n=Ze.prototype,n.Ha=function(d){this.J=d},n.ea=function(d,_,b,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);_=_?_.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Tr.g(),this.v=this.o?cl(this.o):cl(Tr),this.g.onreadystatechange=T(this.Ea,this);try{this.B=!0,this.g.open(_,String(d),!0),this.B=!1}catch(W){_u(this,W);return}if(d=b||"",b=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var F in S)b.set(F,S[F]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const W of S.keys())b.set(W,S.get(W));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(b.keys()).find(W=>W.toLowerCase()=="content-type"),F=f.FormData&&d instanceof f.FormData,!(0<=Array.prototype.indexOf.call(Yi,_,void 0))||S||F||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[W,de]of b)this.g.setRequestHeader(W,de);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ki(this),this.u=!0,this.g.send(d),this.u=!1}catch(W){_u(this,W)}};function _u(d,_){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=_,d.m=5,Fs(d),Ir(d)}function Fs(d){d.A||(d.A=!0,et(d,"complete"),et(d,"error"))}n.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,et(this,"complete"),et(this,"abort"),Ir(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ir(this,!0)),Ze.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Hs(this):this.bb())},n.bb=function(){Hs(this)};function Hs(d){if(d.h&&typeof u<"u"&&(!d.v[1]||Kn(d)!=4||d.Z()!=2)){if(d.u&&Kn(d)==4)cn(d.Ea,0,d);else if(et(d,"readystatechange"),Kn(d)==4){d.h=!1;try{const de=d.Z();e:switch(de){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var b;if(!(b=_)){var S;if(S=de===0){var F=String(d.D).match(Bi)[1]||null;!F&&f.self&&f.self.location&&(F=f.self.location.protocol.slice(0,-1)),S=!qs.test(F?F.toLowerCase():"")}b=S}if(b)et(d,"complete"),et(d,"success");else{d.m=6;try{var W=2<Kn(d)?d.g.statusText:""}catch{W=""}d.l=W+" ["+d.Z()+"]",Fs(d)}}finally{Ir(d)}}}}function Ir(d,_){if(d.g){Ki(d);const b=d.g,S=d.v[0]?()=>{}:null;d.g=null,d.v=null,_||et(d,"ready");try{b.onreadystatechange=S}catch{}}}function Ki(d){d.I&&(f.clearTimeout(d.I),d.I=null)}n.isActive=function(){return!!this.g};function Kn(d){return d.g?d.g.readyState:0}n.Z=function(){try{return 2<Kn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(d){if(this.g){var _=this.g.responseText;return d&&_.indexOf(d)==0&&(_=_.substring(d.length)),Ps(_)}};function bu(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function Tf(d){const _={};d=(d.g&&2<=Kn(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<d.length;S++){if(Q(d[S]))continue;var b=L(d[S]);const F=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const W=_[F]||[];_[F]=W,W.push(b)}P(_,function(S){return S.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Qi(d,_,b){return b&&b.internalChannelParams&&b.internalChannelParams[d]||_}function Gs(d){this.Aa=0,this.i=[],this.j=new Hn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Qi("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Qi("baseRetryDelayMs",5e3,d),this.cb=Qi("retryDelaySeedMs",1e4,d),this.Wa=Qi("forwardChannelMaxRetries",2,d),this.wa=Qi("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new Xr(d&&d.concurrentRequestLimit),this.Da=new $i,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Gs.prototype,n.la=8,n.G=1,n.connect=function(d,_,b,S){pt(0),this.W=d,this.H=_||{},b&&S!==void 0&&(this.H.OSID=b,this.H.OAID=S),this.F=this.X,this.I=Nu(this,null,this.W),Ys(this)};function Tl(d){if(Eu(d),d.G==3){var _=d.U++,b=jn(d.I);if(it(b,"SID",d.K),it(b,"RID",_),it(b,"TYPE","terminate"),Wi(d,b),_=new yn(d,d.j,_),_.L=2,_.v=Fi(jn(b)),b=!1,f.navigator&&f.navigator.sendBeacon)try{b=f.navigator.sendBeacon(_.v.toString(),"")}catch{}!b&&f.Image&&(new Image().src=_.v,b=!0),b||(_.g=Cu(_.j,null),_.g.ea(_.v)),_.F=Date.now(),Ui(_)}Su(d)}function $s(d){d.g&&(Xi(d),d.g.cancel(),d.g=null)}function Eu(d){$s(d),d.u&&(f.clearTimeout(d.u),d.u=null),Ks(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&f.clearTimeout(d.s),d.s=null)}function Ys(d){if(!Vs(d.h)&&!d.s){d.s=!0;var _=d.Ga;ue||k(),ye||(ue(),ye=!0),Ge.add(_,d),d.B=0}}function wf(d,_){return Ls(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=_.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=Rt(T(d.Ga,d,_),Sl(d,d.B)),d.B++,!0)}n.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;const F=new yn(this,this.j,d);let W=this.o;if(this.S&&(W?(W=R(W),j(W,this.S)):W=this.S),this.m!==null||this.O||(F.H=W,W=null),this.P)e:{for(var _=0,b=0;b<this.i.length;b++){t:{var S=this.i[b];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(_+=S,4096<_){_=b;break e}if(_===4096||b===this.i.length-1){_=b+1;break e}}_=1e3}else _=1e3;_=xu(this,F,_),b=jn(this.I),it(b,"RID",d),it(b,"CVER",22),this.D&&it(b,"X-HTTP-Session-Id",this.D),Wi(this,b),W&&(this.O?_="headers="+encodeURIComponent(String(xl(W)))+"&"+_:this.m&&Ft(b,this.m,W)),Us(this.h,F),this.Ua&&it(b,"TYPE","init"),this.P?(it(b,"$req",_),it(b,"SID","null"),F.T=!0,lr(F,b,null)):lr(F,b,_),this.G=2}}else this.G==3&&(d?wl(this,d):this.i.length==0||Vs(this.h)||wl(this))};function wl(d,_){var b;_?b=_.l:b=d.U++;const S=jn(d.I);it(S,"SID",d.K),it(S,"RID",b),it(S,"AID",d.T),Wi(d,S),d.m&&d.o&&Ft(S,d.m,d.o),b=new yn(d,d.j,b,d.B+1),d.m===null&&(b.H=d.o),_&&(d.i=_.D.concat(d.i)),_=xu(d,b,1e3),b.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),Us(d.h,b),lr(b,S,_)}function Wi(d,_){d.H&&pe(d.H,function(b,S){it(_,S,b)}),d.l&&yl({},function(b,S){it(_,S,b)})}function xu(d,_,b){b=Math.min(d.i.length,b);var S=d.l?T(d.l.Na,d.l,d):null;e:{var F=d.i;let W=-1;for(;;){const de=["count="+b];W==-1?0<b?(W=F[0].g,de.push("ofs="+W)):W=0:de.push("ofs="+W);let $e=!0;for(let kt=0;kt<b;kt++){let Ye=F[kt].g;const Ht=F[kt].map;if(Ye-=W,0>Ye)W=Math.max(0,F[kt].g-100),$e=!1;else try{Nr(Ht,de,"req"+Ye+"_")}catch{S&&S(Ht)}}if($e){S=de.join("&");break e}}}return d=d.i.splice(0,b),_.D=d,S}function Tu(d){if(!d.g&&!d.u){d.Y=1;var _=d.Fa;ue||k(),ye||(ue(),ye=!0),Ge.add(_,d),d.v=0}}function Al(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=Rt(T(d.Fa,d),Sl(d,d.v)),d.v++,!0)}n.Fa=function(){if(this.u=null,wu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=Rt(T(this.ab,this),d)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,pt(10),$s(this),wu(this))};function Xi(d){d.A!=null&&(f.clearTimeout(d.A),d.A=null)}function wu(d){d.g=new yn(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var _=jn(d.qa);it(_,"RID","rpc"),it(_,"SID",d.K),it(_,"AID",d.T),it(_,"CI",d.F?"0":"1"),!d.F&&d.ja&&it(_,"TO",d.ja),it(_,"TYPE","xmlhttp"),Wi(d,_),d.m&&d.o&&Ft(_,d.m,d.o),d.L&&(d.g.I=d.L);var b=d.g;d=d.ia,b.L=1,b.v=Fi(jn(_)),b.m=null,b.P=!0,Wr(b,d)}n.Za=function(){this.C!=null&&(this.C=null,$s(this),Al(this),pt(19))};function Ks(d){d.C!=null&&(f.clearTimeout(d.C),d.C=null)}function Au(d,_){var b=null;if(d.g==_){Ks(d),Xi(d),d.g=null;var S=2}else if(pl(d.h,_))b=_.D,vn(d.h,_),S=1;else return;if(d.G!=0){if(_.o)if(S==1){b=_.m?_.m.length:0,_=Date.now()-_.F;var F=d.B;S=Pa(),et(S,new Mt(S,b)),Ys(d)}else Tu(d);else if(F=_.s,F==3||F==0&&0<_.X||!(S==1&&wf(d,_)||S==2&&Al(d)))switch(b&&0<b.length&&(_=d.h,_.i=_.i.concat(b)),F){case 1:ra(d,5);break;case 4:ra(d,10);break;case 3:ra(d,6);break;default:ra(d,2)}}}function Sl(d,_){let b=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(b*=2),b*_}function ra(d,_){if(d.j.info("Error code "+_),_==2){var b=T(d.fb,d),S=d.Xa;const F=!S;S=new It(S||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||qi(S,"https"),Fi(S),F?Gi(S.toString(),b):cr(S.toString(),b)}else pt(2);d.G=0,d.l&&d.l.sa(_),Su(d),Eu(d)}n.fb=function(d){d?(this.j.info("Successfully pinged google.com"),pt(2)):(this.j.info("Failed to ping google.com"),pt(1))};function Su(d){if(d.G=0,d.ka=[],d.l){const _=gl(d.h);(_.length!=0||d.i.length!=0)&&(I(d.ka,_),I(d.ka,d.i),d.h.i.length=0,M(d.i),d.i.length=0),d.l.ra()}}function Nu(d,_,b){var S=b instanceof It?jn(b):new It(b);if(S.g!="")_&&(S.g=_+"."+S.g),Ua(S,S.s);else{var F=f.location;S=F.protocol,_=_?_+"."+F.hostname:F.hostname,F=+F.port;var W=new It(null);S&&qi(W,S),_&&(W.g=_),F&&Ua(W,F),b&&(W.l=b),S=W}return b=d.D,_=d.ya,b&&_&&it(S,b,_),it(S,"VER",d.la),Wi(d,S),S}function Cu(d,_,b){if(_&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return _=d.Ca&&!d.pa?new Ze(new za({eb:b})):new Ze(d.pa),_.Ha(d.J),_}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ru(){}n=Ru.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Qs(){}Qs.prototype.g=function(d,_){return new _n(d,_)};function _n(d,_){xt.call(this),this.g=new Gs(_),this.l=d,this.h=_&&_.messageUrlParams||null,d=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(d?d["X-WebChannel-Content-Type"]=_.messageContentType:d={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(d?d["X-WebChannel-Client-Profile"]=_.va:d={"X-WebChannel-Client-Profile":_.va}),this.g.S=d,(d=_&&_.Sb)&&!Q(d)&&(this.g.m=d),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!Q(_)&&(this.g.D=_,d=this.h,d!==null&&_ in d&&(d=this.h,_ in d&&delete d[_])),this.j=new Dr(this)}A(_n,xt),_n.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},_n.prototype.close=function(){Tl(this.g)},_n.prototype.o=function(d){var _=this.g;if(typeof d=="string"){var b={};b.__data__=d,d=b}else this.u&&(b={},b.__data__=or(d),d=b);_.i.push(new gu(_.Ya++,d)),_.G==3&&Ys(_)},_n.prototype.N=function(){this.g.l=null,delete this.j,Tl(this.g),delete this.g,_n.aa.N.call(this)};function Iu(d){Kr.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var _=d.__sm__;if(_){e:{for(const b in _){d=b;break e}d=void 0}(this.i=d)&&(d=this.i,_=_!==null&&d in _?_[d]:void 0),this.data=_}else this.data=d}A(Iu,Kr);function Du(){dl.call(this),this.status=1}A(Du,dl);function Dr(d){this.g=d}A(Dr,Ru),Dr.prototype.ua=function(){et(this.g,"a")},Dr.prototype.ta=function(d){et(this.g,new Iu(d))},Dr.prototype.sa=function(d){et(this.g,new Du)},Dr.prototype.ra=function(){et(this.g,"b")},Qs.prototype.createWebChannel=Qs.prototype.g,_n.prototype.send=_n.prototype.o,_n.prototype.open=_n.prototype.m,_n.prototype.close=_n.prototype.close,bx=function(){return new Qs},_x=function(){return Pa()},vx=xr,Wp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Va.NO_ERROR=0,Va.TIMEOUT=8,Va.HTTP_ERROR=6,$d=Va,Qr.COMPLETE="complete",yx=Qr,ul.EventType=Yr,Yr.OPEN="a",Yr.CLOSE="b",Yr.ERROR="c",Yr.MESSAGE="d",xt.prototype.listen=xt.prototype.K,bc=ul,Ze.prototype.listenOnce=Ze.prototype.L,Ze.prototype.getLastError=Ze.prototype.Ka,Ze.prototype.getLastErrorCode=Ze.prototype.Ba,Ze.prototype.getStatus=Ze.prototype.Z,Ze.prototype.getResponseJson=Ze.prototype.Oa,Ze.prototype.getResponseText=Ze.prototype.oa,Ze.prototype.send=Ze.prototype.ea,Ze.prototype.setWithCredentials=Ze.prototype.Ha,gx=Ze}).apply(typeof Pd<"u"?Pd:typeof self<"u"?self:typeof window<"u"?window:{});const Ob="@firebase/firestore",jb="4.7.14";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}fn.UNAUTHENTICATED=new fn(null),fn.GOOGLE_CREDENTIALS=new fn("google-credentials-uid"),fn.FIRST_PARTY=new fn("first-party-uid"),fn.MOCK_USER=new fn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jo="11.7.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ws=new Cg("@firebase/firestore");function No(){return ws.logLevel}function me(n,...e){if(ws.logLevel<=Fe.DEBUG){const t=e.map(zg);ws.debug(`Firestore (${Jo}): ${n}`,...t)}}function Sa(n,...e){if(ws.logLevel<=Fe.ERROR){const t=e.map(zg);ws.error(`Firestore (${Jo}): ${n}`,...t)}}function zo(n,...e){if(ws.logLevel<=Fe.WARN){const t=e.map(zg);ws.warn(`Firestore (${Jo}): ${n}`,...t)}}function zg(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Se(n,e,t){let a="Unexpected state";typeof e=="string"?a=e:t=e,Ex(n,a,t)}function Ex(n,e,t){let a=`FIRESTORE (${Jo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{a+=" CONTEXT: "+JSON.stringify(t)}catch{a+=" CONTEXT: "+t}throw Sa(a),new Error(a)}function Je(n,e,t,a){let s="Unexpected state";typeof t=="string"?s=t:a=t,n||Ex(e,s,a)}function De(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ne={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class fe extends Ra{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xx{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ZI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(fn.UNAUTHENTICATED))}shutdown(){}}class JI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class e4{constructor(e){this.t=e,this.currentUser=fn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Je(this.o===void 0,42304);let a=this.i;const s=p=>this.i!==a?(a=this.i,t(p)):Promise.resolve();let l=new xa;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new xa,e.enqueueRetryable(()=>s(this.currentUser))};const u=()=>{const p=l;e.enqueueRetryable(async()=>{await p.promise,await s(this.currentUser)})},f=p=>{me("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit(p=>f(p)),setTimeout(()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?f(p):(me("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new xa)}},0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(a=>this.i!==e?(me("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(Je(typeof a.accessToken=="string",31837,{l:a}),new xx(a.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Je(e===null||typeof e=="string",2055,{h:e}),new fn(e)}}class t4{constructor(e,t,a){this.P=e,this.T=t,this.I=a,this.type="FirstParty",this.user=fn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class n4{constructor(e,t,a){this.P=e,this.T=t,this.I=a}getToken(){return Promise.resolve(new t4(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(fn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Pb{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class r4{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,nr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Je(this.o===void 0,3512);const a=l=>{l.error!=null&&me("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const u=l.token!==this.m;return this.m=l.token,me("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>a(l))};const s=l=>{me("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(l=>s(l)),setTimeout(()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?s(l):me("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Pb(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Je(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Pb(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a4(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let a=0;a<n;a++)t[a]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tx(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let a="";for(;a.length<20;){const s=a4(40);for(let l=0;l<s.length;++l)a.length<20&&s[l]<t&&(a+=e.charAt(s[l]%62))}return a}}function Ve(n,e){return n<e?-1:n>e?1:0}function Xp(n,e){let t=0;for(;t<n.length&&t<e.length;){const a=n.codePointAt(t),s=e.codePointAt(t);if(a!==s){if(a<128&&s<128)return Ve(a,s);{const l=Tx(),u=i4(l.encode(Mb(n,t)),l.encode(Mb(e,t)));return u!==0?u:Ve(a,s)}}t+=a>65535?2:1}return Ve(n.length,e.length)}function Mb(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function i4(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return Ve(n[t],e[t]);return Ve(n.length,e.length)}function Bo(n,e,t){return n.length===e.length&&n.every((a,s)=>t(a,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kb=-62135596800,Vb=1e6;class zt{static now(){return zt.fromMillis(Date.now())}static fromDate(e){return zt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),a=Math.floor((e-1e3*t)*Vb);return new zt(t,a)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new fe(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new fe(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<kb)throw new fe(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new fe(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Vb}_compareTo(e){return this.seconds===e.seconds?Ve(this.nanoseconds,e.nanoseconds):Ve(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-kb;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{static fromTimestamp(e){return new Re(e)}static min(){return new Re(new zt(0,0))}static max(){return new Re(new zt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lb="__name__";class Ur{constructor(e,t,a){t===void 0?t=0:t>e.length&&Se(637,{offset:t,range:e.length}),a===void 0?a=e.length-t:a>e.length-t&&Se(1746,{length:a,range:e.length-t}),this.segments=e,this.offset=t,this.len=a}get length(){return this.len}isEqual(e){return Ur.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ur?e.forEach(a=>{t.push(a)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,a=this.limit();t<a;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const a=Math.min(e.length,t.length);for(let s=0;s<a;s++){const l=Ur.compareSegments(e.get(s),t.get(s));if(l!==0)return l}return Ve(e.length,t.length)}static compareSegments(e,t){const a=Ur.isNumericId(e),s=Ur.isNumericId(t);return a&&!s?-1:!a&&s?1:a&&s?Ur.extractNumericId(e).compare(Ur.extractNumericId(t)):Xp(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return vi.fromString(e.substring(4,e.length-2))}}class mt extends Ur{construct(e,t,a){return new mt(e,t,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const a of e){if(a.indexOf("//")>=0)throw new fe(ne.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);t.push(...a.split("/").filter(s=>s.length>0))}return new mt(t)}static emptyPath(){return new mt([])}}const s4=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class sn extends Ur{construct(e,t,a){return new sn(e,t,a)}static isValidIdentifier(e){return s4.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),sn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Lb}static keyField(){return new sn([Lb])}static fromServerFormat(e){const t=[];let a="",s=0;const l=()=>{if(a.length===0)throw new fe(ne.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(a),a=""};let u=!1;for(;s<e.length;){const f=e[s];if(f==="\\"){if(s+1===e.length)throw new fe(ne.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[s+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new fe(ne.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);a+=p,s+=2}else f==="`"?(u=!u,s++):f!=="."||u?(a+=f,s++):(l(),s++)}if(l(),u)throw new fe(ne.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new sn(t)}static emptyPath(){return new sn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(e){this.path=e}static fromPath(e){return new Ee(mt.fromString(e))}static fromName(e){return new Ee(mt.fromString(e).popFirst(5))}static empty(){return new Ee(mt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&mt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return mt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ee(new mt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jc=-1;function o4(n,e){const t=n.toTimestamp().seconds,a=n.toTimestamp().nanoseconds+1,s=Re.fromTimestamp(a===1e9?new zt(t+1,0):new zt(t,a));return new Ei(s,Ee.empty(),e)}function l4(n){return new Ei(n.readTime,n.key,jc)}class Ei{constructor(e,t,a){this.readTime=e,this.documentKey=t,this.largestBatchId=a}static min(){return new Ei(Re.min(),Ee.empty(),jc)}static max(){return new Ei(Re.max(),Ee.empty(),jc)}}function c4(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ee.comparator(n.documentKey,e.documentKey),t!==0?t:Ve(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u4="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class d4{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function el(n){if(n.code!==ne.FAILED_PRECONDITION||n.message!==u4)throw n;me("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Se(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ae((a,s)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(a,s)},this.catchCallback=l=>{this.wrapFailure(t,l).next(a,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ae?t:ae.resolve(t)}catch(t){return ae.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ae.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ae.reject(t)}static resolve(e){return new ae((t,a)=>{t(e)})}static reject(e){return new ae((t,a)=>{a(e)})}static waitFor(e){return new ae((t,a)=>{let s=0,l=0,u=!1;e.forEach(f=>{++s,f.next(()=>{++l,u&&l===s&&t()},p=>a(p))}),u=!0,l===s&&t()})}static or(e){let t=ae.resolve(!1);for(const a of e)t=t.next(s=>s?ae.resolve(s):a());return t}static forEach(e,t){const a=[];return e.forEach((s,l)=>{a.push(t.call(this,s,l))}),this.waitFor(a)}static mapArray(e,t){return new ae((a,s)=>{const l=e.length,u=new Array(l);let f=0;for(let p=0;p<l;p++){const y=p;t(e[y]).next(v=>{u[y]=v,++f,f===l&&a(u)},v=>s(v))}})}static doWhile(e,t){return new ae((a,s)=>{const l=()=>{e()===!0?t().next(()=>{l()},s):a()};l()})}}function h4(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function tl(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=a=>this.ue(a),this.ce=a=>t.writeSequenceNumber(a))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}Lh.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bg=-1;function Uh(n){return n==null}function hh(n){return n===0&&1/n==-1/0}function f4(n){return typeof n=="number"&&Number.isInteger(n)&&!hh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ax="";function m4(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Ub(e)),e=p4(n.get(t),e);return Ub(e)}function p4(n,e){let t=e;const a=n.length;for(let s=0;s<a;s++){const l=n.charAt(s);switch(l){case"\0":t+="";break;case Ax:t+="";break;default:t+=l}}return t}function Ub(n){return n+Ax+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zb(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ii(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Sx(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e,t){this.comparator=e,this.root=t||an.EMPTY}insert(e,t){return new Et(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,an.BLACK,null,null))}remove(e){return new Et(this.comparator,this.root.remove(e,this.comparator).copy(null,null,an.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const a=this.comparator(e,t.key);if(a===0)return t.value;a<0?t=t.left:a>0&&(t=t.right)}return null}indexOf(e){let t=0,a=this.root;for(;!a.isEmpty();){const s=this.comparator(e,a.key);if(s===0)return t+a.left.size;s<0?a=a.left:(t+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,a)=>(e(t,a),!1))}toString(){const e=[];return this.inorderTraversal((t,a)=>(e.push(`${t}:${a}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Md(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Md(this.root,e,this.comparator,!1)}getReverseIterator(){return new Md(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Md(this.root,e,this.comparator,!0)}}class Md{constructor(e,t,a,s){this.isReverse=s,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?a(e.key,t):1,t&&s&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class an{constructor(e,t,a,s,l){this.key=e,this.value=t,this.color=a??an.RED,this.left=s??an.EMPTY,this.right=l??an.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,a,s,l){return new an(e??this.key,t??this.value,a??this.color,s??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,a){let s=this;const l=a(e,s.key);return s=l<0?s.copy(null,null,null,s.left.insert(e,t,a),null):l===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,a)),s.fixUp()}removeMin(){if(this.left.isEmpty())return an.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let a,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return an.EMPTY;a=s.right.min(),s=s.copy(a.key,a.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,an.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,an.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Se(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Se(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Se(27949);return e+(this.isRed()?0:1)}}an.EMPTY=null,an.RED=!0,an.BLACK=!1;an.EMPTY=new class{constructor(){this.size=0}get key(){throw Se(57766)}get value(){throw Se(16141)}get color(){throw Se(16727)}get left(){throw Se(29726)}get right(){throw Se(36894)}copy(e,t,a,s,l){return this}insert(e,t,a){return new an(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e){this.comparator=e,this.data=new Et(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,a)=>(e(t),!1))}forEachInRange(e,t){const a=this.data.getIteratorFrom(e[0]);for(;a.hasNext();){const s=a.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let a;for(a=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();a.hasNext();)if(!e(a.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Bb(this.data.getIterator())}getIteratorFrom(e){return new Bb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(a=>{t=t.add(a)}),t}isEqual(e){if(!(e instanceof Bt)||this.size!==e.size)return!1;const t=this.data.getIterator(),a=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,l=a.getNext().key;if(this.comparator(s,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Bt(this.comparator);return t.data=e,t}}class Bb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(e){this.fields=e,e.sort(sn.comparator)}static empty(){return new Bn([])}unionWith(e){let t=new Bt(sn.comparator);for(const a of this.fields)t=t.add(a);for(const a of e)t=t.add(a);return new Bn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Bo(this.fields,e.fields,(t,a)=>t.isEqual(a))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nx extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(s){try{return atob(s)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new Nx("Invalid base64 string: "+l):l}}(e);return new on(t)}static fromUint8Array(e){const t=function(s){let l="";for(let u=0;u<s.length;++u)l+=String.fromCharCode(s[u]);return l}(e);return new on(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const a=new Uint8Array(t.length);for(let s=0;s<t.length;s++)a[s]=t.charCodeAt(s);return a}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ve(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}on.EMPTY_BYTE_STRING=new on("");const g4=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function xi(n){if(Je(!!n,39018),typeof n=="string"){let e=0;const t=g4.exec(n);if(Je(!!t,46558,{timestamp:n}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const a=new Date(n);return{seconds:Math.floor(a.getTime()/1e3),nanos:e}}return{seconds:Ct(n.seconds),nanos:Ct(n.nanos)}}function Ct(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Ti(n){return typeof n=="string"?on.fromBase64String(n):on.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cx="server_timestamp",Rx="__type__",Ix="__previous_value__",Dx="__local_write_time__";function qg(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[Rx])===null||t===void 0?void 0:t.stringValue)===Cx}function zh(n){const e=n.mapValue.fields[Ix];return qg(e)?zh(e):e}function Pc(n){const e=xi(n.mapValue.fields[Dx].timestampValue);return new zt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y4{constructor(e,t,a,s,l,u,f,p,y,v){this.databaseId=e,this.appId=t,this.persistenceKey=a,this.host=s,this.ssl=l,this.forceLongPolling=u,this.autoDetectLongPolling=f,this.longPollingOptions=p,this.useFetchStreams=y,this.isUsingEmulator=v}}const fh="(default)";class Mc{constructor(e,t){this.projectId=e,this.database=t||fh}static empty(){return new Mc("","")}get isDefaultDatabase(){return this.database===fh}isEqual(e){return e instanceof Mc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ox="__type__",v4="__max__",kd={mapValue:{}},jx="__vector__",mh="value";function wi(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?qg(n)?4:b4(n)?9007199254740991:_4(n)?10:11:Se(28295,{value:n})}function $r(n,e){if(n===e)return!0;const t=wi(n);if(t!==wi(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Pc(n).isEqual(Pc(e));case 3:return function(s,l){if(typeof s.timestampValue=="string"&&typeof l.timestampValue=="string"&&s.timestampValue.length===l.timestampValue.length)return s.timestampValue===l.timestampValue;const u=xi(s.timestampValue),f=xi(l.timestampValue);return u.seconds===f.seconds&&u.nanos===f.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(s,l){return Ti(s.bytesValue).isEqual(Ti(l.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(s,l){return Ct(s.geoPointValue.latitude)===Ct(l.geoPointValue.latitude)&&Ct(s.geoPointValue.longitude)===Ct(l.geoPointValue.longitude)}(n,e);case 2:return function(s,l){if("integerValue"in s&&"integerValue"in l)return Ct(s.integerValue)===Ct(l.integerValue);if("doubleValue"in s&&"doubleValue"in l){const u=Ct(s.doubleValue),f=Ct(l.doubleValue);return u===f?hh(u)===hh(f):isNaN(u)&&isNaN(f)}return!1}(n,e);case 9:return Bo(n.arrayValue.values||[],e.arrayValue.values||[],$r);case 10:case 11:return function(s,l){const u=s.mapValue.fields||{},f=l.mapValue.fields||{};if(zb(u)!==zb(f))return!1;for(const p in u)if(u.hasOwnProperty(p)&&(f[p]===void 0||!$r(u[p],f[p])))return!1;return!0}(n,e);default:return Se(52216,{left:n})}}function kc(n,e){return(n.values||[]).find(t=>$r(t,e))!==void 0}function qo(n,e){if(n===e)return 0;const t=wi(n),a=wi(e);if(t!==a)return Ve(t,a);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ve(n.booleanValue,e.booleanValue);case 2:return function(l,u){const f=Ct(l.integerValue||l.doubleValue),p=Ct(u.integerValue||u.doubleValue);return f<p?-1:f>p?1:f===p?0:isNaN(f)?isNaN(p)?0:-1:1}(n,e);case 3:return qb(n.timestampValue,e.timestampValue);case 4:return qb(Pc(n),Pc(e));case 5:return Xp(n.stringValue,e.stringValue);case 6:return function(l,u){const f=Ti(l),p=Ti(u);return f.compareTo(p)}(n.bytesValue,e.bytesValue);case 7:return function(l,u){const f=l.split("/"),p=u.split("/");for(let y=0;y<f.length&&y<p.length;y++){const v=Ve(f[y],p[y]);if(v!==0)return v}return Ve(f.length,p.length)}(n.referenceValue,e.referenceValue);case 8:return function(l,u){const f=Ve(Ct(l.latitude),Ct(u.latitude));return f!==0?f:Ve(Ct(l.longitude),Ct(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return Fb(n.arrayValue,e.arrayValue);case 10:return function(l,u){var f,p,y,v;const E=l.fields||{},T=u.fields||{},C=(f=E[mh])===null||f===void 0?void 0:f.arrayValue,A=(p=T[mh])===null||p===void 0?void 0:p.arrayValue,M=Ve(((y=C==null?void 0:C.values)===null||y===void 0?void 0:y.length)||0,((v=A==null?void 0:A.values)===null||v===void 0?void 0:v.length)||0);return M!==0?M:Fb(C,A)}(n.mapValue,e.mapValue);case 11:return function(l,u){if(l===kd.mapValue&&u===kd.mapValue)return 0;if(l===kd.mapValue)return 1;if(u===kd.mapValue)return-1;const f=l.fields||{},p=Object.keys(f),y=u.fields||{},v=Object.keys(y);p.sort(),v.sort();for(let E=0;E<p.length&&E<v.length;++E){const T=Xp(p[E],v[E]);if(T!==0)return T;const C=qo(f[p[E]],y[v[E]]);if(C!==0)return C}return Ve(p.length,v.length)}(n.mapValue,e.mapValue);default:throw Se(23264,{Pe:t})}}function qb(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ve(n,e);const t=xi(n),a=xi(e),s=Ve(t.seconds,a.seconds);return s!==0?s:Ve(t.nanos,a.nanos)}function Fb(n,e){const t=n.values||[],a=e.values||[];for(let s=0;s<t.length&&s<a.length;++s){const l=qo(t[s],a[s]);if(l)return l}return Ve(t.length,a.length)}function Fo(n){return Zp(n)}function Zp(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const a=xi(t);return`time(${a.seconds},${a.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Ti(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Ee.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let a="[",s=!0;for(const l of t.values||[])s?s=!1:a+=",",a+=Zp(l);return a+"]"}(n.arrayValue):"mapValue"in n?function(t){const a=Object.keys(t.fields||{}).sort();let s="{",l=!0;for(const u of a)l?l=!1:s+=",",s+=`${u}:${Zp(t.fields[u])}`;return s+"}"}(n.mapValue):Se(61005,{value:n})}function Yd(n){switch(wi(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=zh(n);return e?16+Yd(e):16;case 5:return 2*n.stringValue.length;case 6:return Ti(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(a){return(a.values||[]).reduce((s,l)=>s+Yd(l),0)}(n.arrayValue);case 10:case 11:return function(a){let s=0;return Ii(a.fields,(l,u)=>{s+=l.length+Yd(u)}),s}(n.mapValue);default:throw Se(13486,{value:n})}}function Hb(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Jp(n){return!!n&&"integerValue"in n}function Fg(n){return!!n&&"arrayValue"in n}function Gb(n){return!!n&&"nullValue"in n}function $b(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Kd(n){return!!n&&"mapValue"in n}function _4(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[Ox])===null||t===void 0?void 0:t.stringValue)===jx}function Sc(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Ii(n.mapValue.fields,(t,a)=>e.mapValue.fields[t]=Sc(a)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Sc(n.arrayValue.values[t]);return e}return Object.assign({},n)}function b4(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===v4}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e){this.value=e}static empty(){return new Cn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let a=0;a<e.length-1;++a)if(t=(t.mapValue.fields||{})[e.get(a)],!Kd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Sc(t)}setAll(e){let t=sn.emptyPath(),a={},s=[];e.forEach((u,f)=>{if(!t.isImmediateParentOf(f)){const p=this.getFieldsMap(t);this.applyChanges(p,a,s),a={},s=[],t=f.popLast()}u?a[f.lastSegment()]=Sc(u):s.push(f.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,a,s)}delete(e){const t=this.field(e.popLast());Kd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return $r(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let a=0;a<e.length;++a){let s=t.mapValue.fields[e.get(a)];Kd(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(a)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,a){Ii(t,(s,l)=>e[s]=l);for(const s of a)delete e[s]}clone(){return new Cn(Sc(this.value))}}function Px(n){const e=[];return Ii(n.fields,(t,a)=>{const s=new sn([t]);if(Kd(a)){const l=Px(a.mapValue).fields;if(l.length===0)e.push(s);else for(const u of l)e.push(s.child(u))}else e.push(s)}),new Bn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e,t,a,s,l,u,f){this.key=e,this.documentType=t,this.version=a,this.readTime=s,this.createTime=l,this.data=u,this.documentState=f}static newInvalidDocument(e){return new mn(e,0,Re.min(),Re.min(),Re.min(),Cn.empty(),0)}static newFoundDocument(e,t,a,s){return new mn(e,1,t,Re.min(),a,s,0)}static newNoDocument(e,t){return new mn(e,2,t,Re.min(),Re.min(),Cn.empty(),0)}static newUnknownDocument(e,t){return new mn(e,3,t,Re.min(),Re.min(),Cn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Cn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Cn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof mn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new mn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ph{constructor(e,t){this.position=e,this.inclusive=t}}function Yb(n,e,t){let a=0;for(let s=0;s<n.position.length;s++){const l=e[s],u=n.position[s];if(l.field.isKeyField()?a=Ee.comparator(Ee.fromName(u.referenceValue),t.key):a=qo(u,t.data.field(l.field)),l.dir==="desc"&&(a*=-1),a!==0)break}return a}function Kb(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!$r(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(e,t="asc"){this.field=e,this.dir=t}}function E4(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mx{}class Pt extends Mx{constructor(e,t,a){super(),this.field=e,this.op=t,this.value=a}static create(e,t,a){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,a):new T4(e,t,a):t==="array-contains"?new S4(e,a):t==="in"?new N4(e,a):t==="not-in"?new C4(e,a):t==="array-contains-any"?new R4(e,a):new Pt(e,t,a)}static createKeyFieldInFilter(e,t,a){return t==="in"?new w4(e,a):new A4(e,a)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(qo(t,this.value)):t!==null&&wi(this.value)===wi(t)&&this.matchesComparison(qo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Se(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class pr extends Mx{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new pr(e,t)}matches(e){return kx(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function kx(n){return n.op==="and"}function Vx(n){return x4(n)&&kx(n)}function x4(n){for(const e of n.filters)if(e instanceof pr)return!1;return!0}function eg(n){if(n instanceof Pt)return n.field.canonicalString()+n.op.toString()+Fo(n.value);if(Vx(n))return n.filters.map(e=>eg(e)).join(",");{const e=n.filters.map(t=>eg(t)).join(",");return`${n.op}(${e})`}}function Lx(n,e){return n instanceof Pt?function(a,s){return s instanceof Pt&&a.op===s.op&&a.field.isEqual(s.field)&&$r(a.value,s.value)}(n,e):n instanceof pr?function(a,s){return s instanceof pr&&a.op===s.op&&a.filters.length===s.filters.length?a.filters.reduce((l,u,f)=>l&&Lx(u,s.filters[f]),!0):!1}(n,e):void Se(19439)}function Ux(n){return n instanceof Pt?function(t){return`${t.field.canonicalString()} ${t.op} ${Fo(t.value)}`}(n):n instanceof pr?function(t){return t.op.toString()+" {"+t.getFilters().map(Ux).join(" ,")+"}"}(n):"Filter"}class T4 extends Pt{constructor(e,t,a){super(e,t,a),this.key=Ee.fromName(a.referenceValue)}matches(e){const t=Ee.comparator(e.key,this.key);return this.matchesComparison(t)}}class w4 extends Pt{constructor(e,t){super(e,"in",t),this.keys=zx("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class A4 extends Pt{constructor(e,t){super(e,"not-in",t),this.keys=zx("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function zx(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(a=>Ee.fromName(a.referenceValue))}class S4 extends Pt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Fg(t)&&kc(t.arrayValue,this.value)}}class N4 extends Pt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&kc(this.value.arrayValue,t)}}class C4 extends Pt{constructor(e,t){super(e,"not-in",t)}matches(e){if(kc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!kc(this.value.arrayValue,t)}}class R4 extends Pt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Fg(t)||!t.arrayValue.values)&&t.arrayValue.values.some(a=>kc(this.value.arrayValue,a))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I4{constructor(e,t=null,a=[],s=[],l=null,u=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=a,this.filters=s,this.limit=l,this.startAt=u,this.endAt=f,this.Ie=null}}function Qb(n,e=null,t=[],a=[],s=null,l=null,u=null){return new I4(n,e,t,a,s,l,u)}function Hg(n){const e=De(n);if(e.Ie===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(a=>eg(a)).join(","),t+="|ob:",t+=e.orderBy.map(a=>function(l){return l.field.canonicalString()+l.dir}(a)).join(","),Uh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(a=>Fo(a)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(a=>Fo(a)).join(",")),e.Ie=t}return e.Ie}function Gg(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!E4(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Lx(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Kb(n.startAt,e.startAt)&&Kb(n.endAt,e.endAt)}function tg(n){return Ee.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{constructor(e,t=null,a=[],s=[],l=null,u="F",f=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=a,this.filters=s,this.limit=l,this.limitType=u,this.startAt=f,this.endAt=p,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function D4(n,e,t,a,s,l,u,f){return new nl(n,e,t,a,s,l,u,f)}function $g(n){return new nl(n)}function Wb(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Bx(n){return n.collectionGroup!==null}function Nc(n){const e=De(n);if(e.Ee===null){e.Ee=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ee.push(l),t.add(l.field.canonicalString());const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let f=new Bt(sn.comparator);return u.filters.forEach(p=>{p.getFlattenedFilters().forEach(y=>{y.isInequality()&&(f=f.add(y.field))})}),f})(e).forEach(l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ee.push(new Vc(l,a))}),t.has(sn.keyField().canonicalString())||e.Ee.push(new Vc(sn.keyField(),a))}return e.Ee}function Hr(n){const e=De(n);return e.de||(e.de=O4(e,Nc(n))),e.de}function O4(n,e){if(n.limitType==="F")return Qb(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(s=>{const l=s.dir==="desc"?"asc":"desc";return new Vc(s.field,l)});const t=n.endAt?new ph(n.endAt.position,n.endAt.inclusive):null,a=n.startAt?new ph(n.startAt.position,n.startAt.inclusive):null;return Qb(n.path,n.collectionGroup,e,n.filters,n.limit,t,a)}}function ng(n,e){const t=n.filters.concat([e]);return new nl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function gh(n,e,t){return new nl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Bh(n,e){return Gg(Hr(n),Hr(e))&&n.limitType===e.limitType}function qx(n){return`${Hg(Hr(n))}|lt:${n.limitType}`}function Co(n){return`Query(target=${function(t){let a=t.path.canonicalString();return t.collectionGroup!==null&&(a+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(a+=`, filters: [${t.filters.map(s=>Ux(s)).join(", ")}]`),Uh(t.limit)||(a+=", limit: "+t.limit),t.orderBy.length>0&&(a+=`, orderBy: [${t.orderBy.map(s=>function(u){return`${u.field.canonicalString()} (${u.dir})`}(s)).join(", ")}]`),t.startAt&&(a+=", startAt: ",a+=t.startAt.inclusive?"b:":"a:",a+=t.startAt.position.map(s=>Fo(s)).join(",")),t.endAt&&(a+=", endAt: ",a+=t.endAt.inclusive?"a:":"b:",a+=t.endAt.position.map(s=>Fo(s)).join(",")),`Target(${a})`}(Hr(n))}; limitType=${n.limitType})`}function qh(n,e){return e.isFoundDocument()&&function(a,s){const l=s.key.path;return a.collectionGroup!==null?s.key.hasCollectionId(a.collectionGroup)&&a.path.isPrefixOf(l):Ee.isDocumentKey(a.path)?a.path.isEqual(l):a.path.isImmediateParentOf(l)}(n,e)&&function(a,s){for(const l of Nc(a))if(!l.field.isKeyField()&&s.data.field(l.field)===null)return!1;return!0}(n,e)&&function(a,s){for(const l of a.filters)if(!l.matches(s))return!1;return!0}(n,e)&&function(a,s){return!(a.startAt&&!function(u,f,p){const y=Yb(u,f,p);return u.inclusive?y<=0:y<0}(a.startAt,Nc(a),s)||a.endAt&&!function(u,f,p){const y=Yb(u,f,p);return u.inclusive?y>=0:y>0}(a.endAt,Nc(a),s))}(n,e)}function j4(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Fx(n){return(e,t)=>{let a=!1;for(const s of Nc(n)){const l=P4(s,e,t);if(l!==0)return l;a=a||s.field.isKeyField()}return 0}}function P4(n,e,t){const a=n.field.isKeyField()?Ee.comparator(e.key,t.key):function(l,u,f){const p=u.data.field(l),y=f.data.field(l);return p!==null&&y!==null?qo(p,y):Se(42886)}(n.field,e,t);switch(n.dir){case"asc":return a;case"desc":return-1*a;default:return Se(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),a=this.inner[t];if(a!==void 0){for(const[s,l]of a)if(this.equalsFn(s,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const a=this.mapKeyFn(e),s=this.inner[a];if(s===void 0)return this.inner[a]=[[e,t]],void this.innerSize++;for(let l=0;l<s.length;l++)if(this.equalsFn(s[l][0],e))return void(s[l]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),a=this.inner[t];if(a===void 0)return!1;for(let s=0;s<a.length;s++)if(this.equalsFn(a[s][0],e))return a.length===1?delete this.inner[t]:a.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ii(this.inner,(t,a)=>{for(const[s,l]of a)e(s,l)})}isEmpty(){return Sx(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M4=new Et(Ee.comparator);function Na(){return M4}const Hx=new Et(Ee.comparator);function Ec(...n){let e=Hx;for(const t of n)e=e.insert(t.key,t);return e}function Gx(n){let e=Hx;return n.forEach((t,a)=>e=e.insert(t,a.overlayedDocument)),e}function gs(){return Cc()}function $x(){return Cc()}function Cc(){return new Rs(n=>n.toString(),(n,e)=>n.isEqual(e))}const k4=new Et(Ee.comparator),V4=new Bt(Ee.comparator);function He(...n){let e=V4;for(const t of n)e=e.add(t);return e}const L4=new Bt(Ve);function U4(){return L4}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yg(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:hh(e)?"-0":e}}function Yx(n){return{integerValue:""+n}}function z4(n,e){return f4(e)?Yx(e):Yg(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fh{constructor(){this._=void 0}}function B4(n,e,t){return n instanceof Lc?function(s,l){const u={fields:{[Rx]:{stringValue:Cx},[Dx]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return l&&qg(l)&&(l=zh(l)),l&&(u.fields[Ix]=l),{mapValue:u}}(t,e):n instanceof Uc?Qx(n,e):n instanceof zc?Wx(n,e):function(s,l){const u=Kx(s,l),f=Xb(u)+Xb(s.Re);return Jp(u)&&Jp(s.Re)?Yx(f):Yg(s.serializer,f)}(n,e)}function q4(n,e,t){return n instanceof Uc?Qx(n,e):n instanceof zc?Wx(n,e):t}function Kx(n,e){return n instanceof yh?function(a){return Jp(a)||function(l){return!!l&&"doubleValue"in l}(a)}(e)?e:{integerValue:0}:null}class Lc extends Fh{}class Uc extends Fh{constructor(e){super(),this.elements=e}}function Qx(n,e){const t=Xx(e);for(const a of n.elements)t.some(s=>$r(s,a))||t.push(a);return{arrayValue:{values:t}}}class zc extends Fh{constructor(e){super(),this.elements=e}}function Wx(n,e){let t=Xx(e);for(const a of n.elements)t=t.filter(s=>!$r(s,a));return{arrayValue:{values:t}}}class yh extends Fh{constructor(e,t){super(),this.serializer=e,this.Re=t}}function Xb(n){return Ct(n.integerValue||n.doubleValue)}function Xx(n){return Fg(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F4{constructor(e,t){this.field=e,this.transform=t}}function H4(n,e){return n.field.isEqual(e.field)&&function(a,s){return a instanceof Uc&&s instanceof Uc||a instanceof zc&&s instanceof zc?Bo(a.elements,s.elements,$r):a instanceof yh&&s instanceof yh?$r(a.Re,s.Re):a instanceof Lc&&s instanceof Lc}(n.transform,e.transform)}class G4{constructor(e,t){this.version=e,this.transformResults=t}}class rr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new rr}static exists(e){return new rr(void 0,e)}static updateTime(e){return new rr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Qd(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Hh{}function Zx(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Kg(n.key,rr.none()):new Zc(n.key,n.data,rr.none());{const t=n.data,a=Cn.empty();let s=new Bt(sn.comparator);for(let l of e.fields)if(!s.has(l)){let u=t.field(l);u===null&&l.length>1&&(l=l.popLast(),u=t.field(l)),u===null?a.delete(l):a.set(l,u),s=s.add(l)}return new Di(n.key,a,new Bn(s.toArray()),rr.none())}}function $4(n,e,t){n instanceof Zc?function(s,l,u){const f=s.value.clone(),p=Jb(s.fieldTransforms,l,u.transformResults);f.setAll(p),l.convertToFoundDocument(u.version,f).setHasCommittedMutations()}(n,e,t):n instanceof Di?function(s,l,u){if(!Qd(s.precondition,l))return void l.convertToUnknownDocument(u.version);const f=Jb(s.fieldTransforms,l,u.transformResults),p=l.data;p.setAll(Jx(s)),p.setAll(f),l.convertToFoundDocument(u.version,p).setHasCommittedMutations()}(n,e,t):function(s,l,u){l.convertToNoDocument(u.version).setHasCommittedMutations()}(0,e,t)}function Rc(n,e,t,a){return n instanceof Zc?function(l,u,f,p){if(!Qd(l.precondition,u))return f;const y=l.value.clone(),v=eE(l.fieldTransforms,p,u);return y.setAll(v),u.convertToFoundDocument(u.version,y).setHasLocalMutations(),null}(n,e,t,a):n instanceof Di?function(l,u,f,p){if(!Qd(l.precondition,u))return f;const y=eE(l.fieldTransforms,p,u),v=u.data;return v.setAll(Jx(l)),v.setAll(y),u.convertToFoundDocument(u.version,v).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(E=>E.field))}(n,e,t,a):function(l,u,f){return Qd(l.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):f}(n,e,t)}function Y4(n,e){let t=null;for(const a of n.fieldTransforms){const s=e.data.field(a.field),l=Kx(a.transform,s||null);l!=null&&(t===null&&(t=Cn.empty()),t.set(a.field,l))}return t||null}function Zb(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(a,s){return a===void 0&&s===void 0||!(!a||!s)&&Bo(a,s,(l,u)=>H4(l,u))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Zc extends Hh{constructor(e,t,a,s=[]){super(),this.key=e,this.value=t,this.precondition=a,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Di extends Hh{constructor(e,t,a,s,l=[]){super(),this.key=e,this.data=t,this.fieldMask=a,this.precondition=s,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function Jx(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const a=n.data.field(t);e.set(t,a)}}),e}function Jb(n,e,t){const a=new Map;Je(n.length===t.length,32656,{Ve:t.length,me:n.length});for(let s=0;s<t.length;s++){const l=n[s],u=l.transform,f=e.data.field(l.field);a.set(l.field,q4(u,f,t[s]))}return a}function eE(n,e,t){const a=new Map;for(const s of n){const l=s.transform,u=t.data.field(s.field);a.set(s.field,B4(l,u,e))}return a}class Kg extends Hh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class K4 extends Hh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q4{constructor(e,t,a,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=a,this.mutations=s}applyToRemoteDocument(e,t){const a=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const l=this.mutations[s];l.key.isEqual(e.key)&&$4(l,e,a[s])}}applyToLocalView(e,t){for(const a of this.baseMutations)a.key.isEqual(e.key)&&(t=Rc(a,e,t,this.localWriteTime));for(const a of this.mutations)a.key.isEqual(e.key)&&(t=Rc(a,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const a=$x();return this.mutations.forEach(s=>{const l=e.get(s.key),u=l.overlayedDocument;let f=this.applyToLocalView(u,l.mutatedFields);f=t.has(s.key)?null:f;const p=Zx(u,f);p!==null&&a.set(s.key,p),u.isValidDocument()||u.convertToNoDocument(Re.min())}),a}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),He())}isEqual(e){return this.batchId===e.batchId&&Bo(this.mutations,e.mutations,(t,a)=>Zb(t,a))&&Bo(this.baseMutations,e.baseMutations,(t,a)=>Zb(t,a))}}class Qg{constructor(e,t,a,s){this.batch=e,this.commitVersion=t,this.mutationResults=a,this.docVersions=s}static from(e,t,a){Je(e.mutations.length===a.length,58842,{fe:e.mutations.length,ge:a.length});let s=function(){return k4}();const l=e.mutations;for(let u=0;u<l.length;u++)s=s.insert(l[u].key,a[u].version);return new Qg(e,t,a,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W4{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X4{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jt,Qe;function Z4(n){switch(n){case ne.OK:return Se(64938);case ne.CANCELLED:case ne.UNKNOWN:case ne.DEADLINE_EXCEEDED:case ne.RESOURCE_EXHAUSTED:case ne.INTERNAL:case ne.UNAVAILABLE:case ne.UNAUTHENTICATED:return!1;case ne.INVALID_ARGUMENT:case ne.NOT_FOUND:case ne.ALREADY_EXISTS:case ne.PERMISSION_DENIED:case ne.FAILED_PRECONDITION:case ne.ABORTED:case ne.OUT_OF_RANGE:case ne.UNIMPLEMENTED:case ne.DATA_LOSS:return!0;default:return Se(15467,{code:n})}}function eT(n){if(n===void 0)return Sa("GRPC error has no .code"),ne.UNKNOWN;switch(n){case jt.OK:return ne.OK;case jt.CANCELLED:return ne.CANCELLED;case jt.UNKNOWN:return ne.UNKNOWN;case jt.DEADLINE_EXCEEDED:return ne.DEADLINE_EXCEEDED;case jt.RESOURCE_EXHAUSTED:return ne.RESOURCE_EXHAUSTED;case jt.INTERNAL:return ne.INTERNAL;case jt.UNAVAILABLE:return ne.UNAVAILABLE;case jt.UNAUTHENTICATED:return ne.UNAUTHENTICATED;case jt.INVALID_ARGUMENT:return ne.INVALID_ARGUMENT;case jt.NOT_FOUND:return ne.NOT_FOUND;case jt.ALREADY_EXISTS:return ne.ALREADY_EXISTS;case jt.PERMISSION_DENIED:return ne.PERMISSION_DENIED;case jt.FAILED_PRECONDITION:return ne.FAILED_PRECONDITION;case jt.ABORTED:return ne.ABORTED;case jt.OUT_OF_RANGE:return ne.OUT_OF_RANGE;case jt.UNIMPLEMENTED:return ne.UNIMPLEMENTED;case jt.DATA_LOSS:return ne.DATA_LOSS;default:return Se(39323,{code:n})}}(Qe=jt||(jt={}))[Qe.OK=0]="OK",Qe[Qe.CANCELLED=1]="CANCELLED",Qe[Qe.UNKNOWN=2]="UNKNOWN",Qe[Qe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Qe[Qe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Qe[Qe.NOT_FOUND=5]="NOT_FOUND",Qe[Qe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Qe[Qe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Qe[Qe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Qe[Qe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Qe[Qe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Qe[Qe.ABORTED=10]="ABORTED",Qe[Qe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Qe[Qe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Qe[Qe.INTERNAL=13]="INTERNAL",Qe[Qe.UNAVAILABLE=14]="UNAVAILABLE",Qe[Qe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J4=new vi([4294967295,4294967295],0);function tE(n){const e=Tx().encode(n),t=new px;return t.update(e),new Uint8Array(t.digest())}function nE(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),a=e.getUint32(4,!0),s=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new vi([t,a],0),new vi([s,l],0)]}class Wg{constructor(e,t,a){if(this.bitmap=e,this.padding=t,this.hashCount=a,t<0||t>=8)throw new xc(`Invalid padding: ${t}`);if(a<0)throw new xc(`Invalid hash count: ${a}`);if(e.length>0&&this.hashCount===0)throw new xc(`Invalid hash count: ${a}`);if(e.length===0&&t!==0)throw new xc(`Invalid padding when bitmap length is 0: ${t}`);this.pe=8*e.length-t,this.ye=vi.fromNumber(this.pe)}we(e,t,a){let s=e.add(t.multiply(vi.fromNumber(a)));return s.compare(J4)===1&&(s=new vi([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const t=tE(e),[a,s]=nE(t);for(let l=0;l<this.hashCount;l++){const u=this.we(a,s,l);if(!this.be(u))return!1}return!0}static create(e,t,a){const s=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),u=new Wg(l,s,t);return a.forEach(f=>u.insert(f)),u}insert(e){if(this.pe===0)return;const t=tE(e),[a,s]=nE(t);for(let l=0;l<this.hashCount;l++){const u=this.we(a,s,l);this.Se(u)}}Se(e){const t=Math.floor(e/8),a=e%8;this.bitmap[t]|=1<<a}}class xc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh{constructor(e,t,a,s,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=a,this.documentUpdates=s,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,a){const s=new Map;return s.set(e,Jc.createSynthesizedTargetChangeForCurrentChange(e,t,a)),new Gh(Re.min(),s,new Et(Ve),Na(),He())}}class Jc{constructor(e,t,a,s,l){this.resumeToken=e,this.current=t,this.addedDocuments=a,this.modifiedDocuments=s,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,a){return new Jc(a,t,He(),He(),He())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wd{constructor(e,t,a,s){this.De=e,this.removedTargetIds=t,this.key=a,this.ve=s}}class tT{constructor(e,t){this.targetId=e,this.Ce=t}}class nT{constructor(e,t,a=on.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=a,this.cause=s}}class rE{constructor(){this.Fe=0,this.Me=aE(),this.xe=on.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=He(),t=He(),a=He();return this.Me.forEach((s,l)=>{switch(l){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:a=a.add(s);break;default:Se(38017,{changeType:l})}}),new Jc(this.xe,this.Oe,e,t,a)}Qe(){this.Ne=!1,this.Me=aE()}$e(e,t){this.Ne=!0,this.Me=this.Me.insert(e,t)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,Je(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class eD{constructor(e){this.ze=e,this.je=new Map,this.He=Na(),this.Je=Vd(),this.Ye=Vd(),this.Ze=new Et(Ve)}Xe(e){for(const t of e.De)e.ve&&e.ve.isFoundDocument()?this.et(t,e.ve):this.tt(t,e.key,e.ve);for(const t of e.removedTargetIds)this.tt(t,e.key,e.ve)}nt(e){this.forEachTarget(e,t=>{const a=this.rt(t);switch(e.state){case 0:this.it(t)&&a.ke(e.resumeToken);break;case 1:a.We(),a.Be||a.Qe(),a.ke(e.resumeToken);break;case 2:a.We(),a.Be||this.removeTarget(t);break;case 3:this.it(t)&&(a.Ge(),a.ke(e.resumeToken));break;case 4:this.it(t)&&(this.st(t),a.ke(e.resumeToken));break;default:Se(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.je.forEach((a,s)=>{this.it(s)&&t(s)})}ot(e){const t=e.targetId,a=e.Ce.count,s=this._t(t);if(s){const l=s.target;if(tg(l))if(a===0){const u=new Ee(l.path);this.tt(t,u,mn.newNoDocument(u,Re.min()))}else Je(a===1,20013,{expectedCount:a});else{const u=this.ut(t);if(u!==a){const f=this.ct(e),p=f?this.lt(f,e,u):1;if(p!==0){this.st(t);const y=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,y)}}}}}ct(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:a="",padding:s=0},hashCount:l=0}=t;let u,f;try{u=Ti(a).toUint8Array()}catch(p){if(p instanceof Nx)return zo("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{f=new Wg(u,s,l)}catch(p){return zo(p instanceof xc?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return f.pe===0?null:f}lt(e,t,a){return t.Ce.count===a-this.Tt(e,t.targetId)?0:2}Tt(e,t){const a=this.ze.getRemoteKeysForTarget(t);let s=0;return a.forEach(l=>{const u=this.ze.Pt(),f=`projects/${u.projectId}/databases/${u.database}/documents/${l.path.canonicalString()}`;e.mightContain(f)||(this.tt(t,l,null),s++)}),s}It(e){const t=new Map;this.je.forEach((l,u)=>{const f=this._t(u);if(f){if(l.current&&tg(f.target)){const p=new Ee(f.target.path);this.Et(p).has(u)||this.dt(u,p)||this.tt(u,p,mn.newNoDocument(p,e))}l.Le&&(t.set(u,l.qe()),l.Qe())}});let a=He();this.Ye.forEach((l,u)=>{let f=!0;u.forEachWhile(p=>{const y=this._t(p);return!y||y.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)}),f&&(a=a.add(l))}),this.He.forEach((l,u)=>u.setReadTime(e));const s=new Gh(e,t,this.Ze,this.He,a);return this.He=Na(),this.Je=Vd(),this.Ye=Vd(),this.Ze=new Et(Ve),s}et(e,t){if(!this.it(e))return;const a=this.dt(e,t.key)?2:0;this.rt(e).$e(t.key,a),this.He=this.He.insert(t.key,t),this.Je=this.Je.insert(t.key,this.Et(t.key).add(e)),this.Ye=this.Ye.insert(t.key,this.At(t.key).add(e))}tt(e,t,a){if(!this.it(e))return;const s=this.rt(e);this.dt(e,t)?s.$e(t,1):s.Ue(t),this.Ye=this.Ye.insert(t,this.At(t).delete(e)),this.Ye=this.Ye.insert(t,this.At(t).add(e)),a&&(this.He=this.He.insert(t,a))}removeTarget(e){this.je.delete(e)}ut(e){const t=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let t=this.je.get(e);return t||(t=new rE,this.je.set(e,t)),t}At(e){let t=this.Ye.get(e);return t||(t=new Bt(Ve),this.Ye=this.Ye.insert(e,t)),t}Et(e){let t=this.Je.get(e);return t||(t=new Bt(Ve),this.Je=this.Je.insert(e,t)),t}it(e){const t=this._t(e)!==null;return t||me("WatchChangeAggregator","Detected inactive target",e),t}_t(e){const t=this.je.get(e);return t&&t.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new rE),this.ze.getRemoteKeysForTarget(e).forEach(t=>{this.tt(e,t,null)})}dt(e,t){return this.ze.getRemoteKeysForTarget(e).has(t)}}function Vd(){return new Et(Ee.comparator)}function aE(){return new Et(Ee.comparator)}const tD={asc:"ASCENDING",desc:"DESCENDING"},nD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},rD={and:"AND",or:"OR"};class aD{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function rg(n,e){return n.useProto3Json||Uh(e)?e:{value:e}}function vh(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function rT(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function iD(n,e){return vh(n,e.toTimestamp())}function Gr(n){return Je(!!n,49232),Re.fromTimestamp(function(t){const a=xi(t);return new zt(a.seconds,a.nanos)}(n))}function Xg(n,e){return ag(n,e).canonicalString()}function ag(n,e){const t=function(s){return new mt(["projects",s.projectId,"databases",s.database])}(n).child("documents");return e===void 0?t:t.child(e)}function aT(n){const e=mt.fromString(n);return Je(cT(e),10190,{key:e.toString()}),e}function ig(n,e){return Xg(n.databaseId,e.path)}function Ip(n,e){const t=aT(e);if(t.get(1)!==n.databaseId.projectId)throw new fe(ne.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new fe(ne.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ee(sT(t))}function iT(n,e){return Xg(n.databaseId,e)}function sD(n){const e=aT(n);return e.length===4?mt.emptyPath():sT(e)}function sg(n){return new mt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function sT(n){return Je(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function iE(n,e,t){return{name:ig(n,e),fields:t.value.mapValue.fields}}function oD(n,e){let t;if("targetChange"in e){e.targetChange;const a=function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Se(39313,{state:y})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],l=function(y,v){return y.useProto3Json?(Je(v===void 0||typeof v=="string",58123),on.fromBase64String(v||"")):(Je(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),on.fromUint8Array(v||new Uint8Array))}(n,e.targetChange.resumeToken),u=e.targetChange.cause,f=u&&function(y){const v=y.code===void 0?ne.UNKNOWN:eT(y.code);return new fe(v,y.message||"")}(u);t=new nT(a,s,l,f||null)}else if("documentChange"in e){e.documentChange;const a=e.documentChange;a.document,a.document.name,a.document.updateTime;const s=Ip(n,a.document.name),l=Gr(a.document.updateTime),u=a.document.createTime?Gr(a.document.createTime):Re.min(),f=new Cn({mapValue:{fields:a.document.fields}}),p=mn.newFoundDocument(s,l,u,f),y=a.targetIds||[],v=a.removedTargetIds||[];t=new Wd(y,v,p.key,p)}else if("documentDelete"in e){e.documentDelete;const a=e.documentDelete;a.document;const s=Ip(n,a.document),l=a.readTime?Gr(a.readTime):Re.min(),u=mn.newNoDocument(s,l),f=a.removedTargetIds||[];t=new Wd([],f,u.key,u)}else if("documentRemove"in e){e.documentRemove;const a=e.documentRemove;a.document;const s=Ip(n,a.document),l=a.removedTargetIds||[];t=new Wd([],l,s,null)}else{if(!("filter"in e))return Se(11601,{Vt:e});{e.filter;const a=e.filter;a.targetId;const{count:s=0,unchangedNames:l}=a,u=new X4(s,l),f=a.targetId;t=new tT(f,u)}}return t}function lD(n,e){let t;if(e instanceof Zc)t={update:iE(n,e.key,e.value)};else if(e instanceof Kg)t={delete:ig(n,e.key)};else if(e instanceof Di)t={update:iE(n,e.key,e.data),updateMask:yD(e.fieldMask)};else{if(!(e instanceof K4))return Se(16599,{ft:e.type});t={verify:ig(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(a=>function(l,u){const f=u.transform;if(f instanceof Lc)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof Uc)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof zc)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof yh)return{fieldPath:u.field.canonicalString(),increment:f.Re};throw Se(20930,{transform:u.transform})}(0,a))),e.precondition.isNone||(t.currentDocument=function(s,l){return l.updateTime!==void 0?{updateTime:iD(s,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Se(27497)}(n,e.precondition)),t}function cD(n,e){return n&&n.length>0?(Je(e!==void 0,14353),n.map(t=>function(s,l){let u=s.updateTime?Gr(s.updateTime):Gr(l);return u.isEqual(Re.min())&&(u=Gr(l)),new G4(u,s.transformResults||[])}(t,e))):[]}function uD(n,e){return{documents:[iT(n,e.path)]}}function dD(n,e){const t={structuredQuery:{}},a=e.path;let s;e.collectionGroup!==null?(s=a,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=a.popLast(),t.structuredQuery.from=[{collectionId:a.lastSegment()}]),t.parent=iT(n,s);const l=function(y){if(y.length!==0)return lT(pr.create(y,"and"))}(e.filters);l&&(t.structuredQuery.where=l);const u=function(y){if(y.length!==0)return y.map(v=>function(T){return{field:Ro(T.field),direction:mD(T.dir)}}(v))}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const f=rg(n,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=function(y){return{before:y.inclusive,values:y.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(y){return{before:!y.inclusive,values:y.position}}(e.endAt)),{gt:t,parent:s}}function hD(n){let e=sD(n.parent);const t=n.structuredQuery,a=t.from?t.from.length:0;let s=null;if(a>0){Je(a===1,65062);const v=t.from[0];v.allDescendants?s=v.collectionId:e=e.child(v.collectionId)}let l=[];t.where&&(l=function(E){const T=oT(E);return T instanceof pr&&Vx(T)?T.getFilters():[T]}(t.where));let u=[];t.orderBy&&(u=function(E){return E.map(T=>function(A){return new Vc(Io(A.field),function(I){switch(I){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(A.direction))}(T))}(t.orderBy));let f=null;t.limit&&(f=function(E){let T;return T=typeof E=="object"?E.value:E,Uh(T)?null:T}(t.limit));let p=null;t.startAt&&(p=function(E){const T=!!E.before,C=E.values||[];return new ph(C,T)}(t.startAt));let y=null;return t.endAt&&(y=function(E){const T=!E.before,C=E.values||[];return new ph(C,T)}(t.endAt)),D4(e,s,u,l,f,"F",p,y)}function fD(n,e){const t=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Se(28987,{purpose:s})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function oT(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const a=Io(t.unaryFilter.field);return Pt.create(a,"==",{doubleValue:NaN});case"IS_NULL":const s=Io(t.unaryFilter.field);return Pt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Io(t.unaryFilter.field);return Pt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Io(t.unaryFilter.field);return Pt.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Se(61313);default:return Se(60726)}}(n):n.fieldFilter!==void 0?function(t){return Pt.create(Io(t.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Se(58110);default:return Se(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return pr.create(t.compositeFilter.filters.map(a=>oT(a)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Se(1026)}}(t.compositeFilter.op))}(n):Se(30097,{filter:n})}function mD(n){return tD[n]}function pD(n){return nD[n]}function gD(n){return rD[n]}function Ro(n){return{fieldPath:n.canonicalString()}}function Io(n){return sn.fromServerFormat(n.fieldPath)}function lT(n){return n instanceof Pt?function(t){if(t.op==="=="){if($b(t.value))return{unaryFilter:{field:Ro(t.field),op:"IS_NAN"}};if(Gb(t.value))return{unaryFilter:{field:Ro(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if($b(t.value))return{unaryFilter:{field:Ro(t.field),op:"IS_NOT_NAN"}};if(Gb(t.value))return{unaryFilter:{field:Ro(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ro(t.field),op:pD(t.op),value:t.value}}}(n):n instanceof pr?function(t){const a=t.getFilters().map(s=>lT(s));return a.length===1?a[0]:{compositeFilter:{op:gD(t.op),filters:a}}}(n):Se(54877,{filter:n})}function yD(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function cT(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{constructor(e,t,a,s,l=Re.min(),u=Re.min(),f=on.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=a,this.sequenceNumber=s,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=f,this.expectedCount=p}withSequenceNumber(e){return new mi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new mi(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new mi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new mi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vD{constructor(e){this.wt=e}}function _D(n){const e=hD({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?gh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bD{constructor(){this.yn=new ED}addToCollectionParentIndex(e,t){return this.yn.add(t),ae.resolve()}getCollectionParents(e,t){return ae.resolve(this.yn.getEntries(t))}addFieldIndex(e,t){return ae.resolve()}deleteFieldIndex(e,t){return ae.resolve()}deleteAllFieldIndexes(e){return ae.resolve()}createTargetIndexes(e,t){return ae.resolve()}getDocumentsMatchingTarget(e,t){return ae.resolve(null)}getIndexType(e,t){return ae.resolve(0)}getFieldIndexes(e,t){return ae.resolve([])}getNextCollectionGroupToUpdate(e){return ae.resolve(null)}getMinOffset(e,t){return ae.resolve(Ei.min())}getMinOffsetFromCollectionGroup(e,t){return ae.resolve(Ei.min())}updateCollectionGroup(e,t,a){return ae.resolve()}updateIndexEntries(e,t){return ae.resolve()}}class ED{constructor(){this.index={}}add(e){const t=e.lastSegment(),a=e.popLast(),s=this.index[t]||new Bt(mt.comparator),l=!s.has(a);return this.index[t]=s.add(a),l}has(e){const t=e.lastSegment(),a=e.popLast(),s=this.index[t];return s&&s.has(a)}getEntries(e){return(this.index[e]||new Bt(mt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},uT=41943040;class Nn{static withCacheSize(e){return new Nn(e,Nn.DEFAULT_COLLECTION_PERCENTILE,Nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,a){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Nn.DEFAULT_COLLECTION_PERCENTILE=10,Nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Nn.DEFAULT=new Nn(uT,Nn.DEFAULT_COLLECTION_PERCENTILE,Nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Nn.DISABLED=new Nn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(e){this.nr=e}next(){return this.nr+=2,this.nr}static rr(){return new Ho(0)}static ir(){return new Ho(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oE="LruGarbageCollector",xD=1048576;function lE([n,e],[t,a]){const s=Ve(n,t);return s===0?Ve(e,a):s}class TD{constructor(e){this.cr=e,this.buffer=new Bt(lE),this.lr=0}hr(){return++this.lr}Pr(e){const t=[e,this.hr()];if(this.buffer.size<this.cr)this.buffer=this.buffer.add(t);else{const a=this.buffer.last();lE(t,a)<0&&(this.buffer=this.buffer.delete(a).add(t))}}get maxValue(){return this.buffer.last()[0]}}class wD{constructor(e,t,a){this.garbageCollector=e,this.asyncQueue=t,this.localStore=a,this.Tr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ir(6e4)}stop(){this.Tr&&(this.Tr.cancel(),this.Tr=null)}get started(){return this.Tr!==null}Ir(e){me(oE,`Garbage collection scheduled in ${e}ms`),this.Tr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Tr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){tl(t)?me(oE,"Ignoring IndexedDB error during garbage collection: ",t):await el(t)}await this.Ir(3e5)})}}class AD{constructor(e,t){this.Er=e,this.params=t}calculateTargetCount(e,t){return this.Er.dr(e).next(a=>Math.floor(t/100*a))}nthSequenceNumber(e,t){if(t===0)return ae.resolve(Lh.le);const a=new TD(t);return this.Er.forEachTarget(e,s=>a.Pr(s.sequenceNumber)).next(()=>this.Er.Ar(e,s=>a.Pr(s))).next(()=>a.maxValue)}removeTargets(e,t,a){return this.Er.removeTargets(e,t,a)}removeOrphanedDocuments(e,t){return this.Er.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(me("LruGarbageCollector","Garbage collection skipped; disabled"),ae.resolve(sE)):this.getCacheSize(e).next(a=>a<this.params.cacheSizeCollectionThreshold?(me("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),sE):this.Rr(e,t))}getCacheSize(e){return this.Er.getCacheSize(e)}Rr(e,t){let a,s,l,u,f,p,y;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(E=>(E>this.params.maximumSequenceNumbersToCollect?(me("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),s=this.params.maximumSequenceNumbersToCollect):s=E,u=Date.now(),this.nthSequenceNumber(e,s))).next(E=>(a=E,f=Date.now(),this.removeTargets(e,a,t))).next(E=>(l=E,p=Date.now(),this.removeOrphanedDocuments(e,a))).next(E=>(y=Date.now(),No()<=Fe.DEBUG&&me("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-v}ms
	Determined least recently used ${s} in `+(f-u)+`ms
	Removed ${l} targets in `+(p-f)+`ms
	Removed ${E} documents in `+(y-p)+`ms
Total Duration: ${y-v}ms`),ae.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:l,documentsRemoved:E})))}}function SD(n,e){return new AD(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ND{constructor(){this.changes=new Rs(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,mn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const a=this.changes.get(t);return a!==void 0?ae.resolve(a):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CD{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RD{constructor(e,t,a,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=a,this.indexManager=s}getDocument(e,t){let a=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(a=s,this.remoteDocumentCache.getEntry(e,t))).next(s=>(a!==null&&Rc(a.mutation,s,Bn.empty(),zt.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(a=>this.getLocalViewOfDocuments(e,a,He()).next(()=>a))}getLocalViewOfDocuments(e,t,a=He()){const s=gs();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,a).next(l=>{let u=Ec();return l.forEach((f,p)=>{u=u.insert(f,p.overlayedDocument)}),u}))}getOverlayedDocuments(e,t){const a=gs();return this.populateOverlays(e,a,t).next(()=>this.computeViews(e,t,a,He()))}populateOverlays(e,t,a){const s=[];return a.forEach(l=>{t.has(l)||s.push(l)}),this.documentOverlayCache.getOverlays(e,s).next(l=>{l.forEach((u,f)=>{t.set(u,f)})})}computeViews(e,t,a,s){let l=Na();const u=Cc(),f=function(){return Cc()}();return t.forEach((p,y)=>{const v=a.get(y.key);s.has(y.key)&&(v===void 0||v.mutation instanceof Di)?l=l.insert(y.key,y):v!==void 0?(u.set(y.key,v.mutation.getFieldMask()),Rc(v.mutation,y,v.mutation.getFieldMask(),zt.now())):u.set(y.key,Bn.empty())}),this.recalculateAndSaveOverlays(e,l).next(p=>(p.forEach((y,v)=>u.set(y,v)),t.forEach((y,v)=>{var E;return f.set(y,new CD(v,(E=u.get(y))!==null&&E!==void 0?E:null))}),f))}recalculateAndSaveOverlays(e,t){const a=Cc();let s=new Et((u,f)=>u-f),l=He();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(u=>{for(const f of u)f.keys().forEach(p=>{const y=t.get(p);if(y===null)return;let v=a.get(p)||Bn.empty();v=f.applyToLocalView(y,v),a.set(p,v);const E=(s.get(f.batchId)||He()).add(p);s=s.insert(f.batchId,E)})}).next(()=>{const u=[],f=s.getReverseIterator();for(;f.hasNext();){const p=f.getNext(),y=p.key,v=p.value,E=$x();v.forEach(T=>{if(!l.has(T)){const C=Zx(t.get(T),a.get(T));C!==null&&E.set(T,C),l=l.add(T)}}),u.push(this.documentOverlayCache.saveOverlays(e,y,E))}return ae.waitFor(u)}).next(()=>a)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(a=>this.recalculateAndSaveOverlays(e,a))}getDocumentsMatchingQuery(e,t,a,s){return function(u){return Ee.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Bx(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,a,s):this.getDocumentsMatchingCollectionQuery(e,t,a,s)}getNextDocuments(e,t,a,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,a,s).next(l=>{const u=s-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,a.largestBatchId,s-l.size):ae.resolve(gs());let f=jc,p=l;return u.next(y=>ae.forEach(y,(v,E)=>(f<E.largestBatchId&&(f=E.largestBatchId),l.get(v)?ae.resolve():this.remoteDocumentCache.getEntry(e,v).next(T=>{p=p.insert(v,T)}))).next(()=>this.populateOverlays(e,y,l)).next(()=>this.computeViews(e,p,y,He())).next(v=>({batchId:f,changes:Gx(v)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ee(t)).next(a=>{let s=Ec();return a.isFoundDocument()&&(s=s.insert(a.key,a)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,a,s){const l=t.collectionGroup;let u=Ec();return this.indexManager.getCollectionParents(e,l).next(f=>ae.forEach(f,p=>{const y=function(E,T){return new nl(T,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)}(t,p.child(l));return this.getDocumentsMatchingCollectionQuery(e,y,a,s).next(v=>{v.forEach((E,T)=>{u=u.insert(E,T)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,a,s){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,a.largestBatchId).next(u=>(l=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,a,l,s))).next(u=>{l.forEach((p,y)=>{const v=y.getKey();u.get(v)===null&&(u=u.insert(v,mn.newInvalidDocument(v)))});let f=Ec();return u.forEach((p,y)=>{const v=l.get(p);v!==void 0&&Rc(v.mutation,y,Bn.empty(),zt.now()),qh(t,y)&&(f=f.insert(p,y))}),f})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ID{constructor(e){this.serializer=e,this.Fr=new Map,this.Mr=new Map}getBundleMetadata(e,t){return ae.resolve(this.Fr.get(t))}saveBundleMetadata(e,t){return this.Fr.set(t.id,function(s){return{id:s.id,version:s.version,createTime:Gr(s.createTime)}}(t)),ae.resolve()}getNamedQuery(e,t){return ae.resolve(this.Mr.get(t))}saveNamedQuery(e,t){return this.Mr.set(t.name,function(s){return{name:s.name,query:_D(s.bundledQuery),readTime:Gr(s.readTime)}}(t)),ae.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DD{constructor(){this.overlays=new Et(Ee.comparator),this.Or=new Map}getOverlay(e,t){return ae.resolve(this.overlays.get(t))}getOverlays(e,t){const a=gs();return ae.forEach(t,s=>this.getOverlay(e,s).next(l=>{l!==null&&a.set(s,l)})).next(()=>a)}saveOverlays(e,t,a){return a.forEach((s,l)=>{this.St(e,t,l)}),ae.resolve()}removeOverlaysForBatchId(e,t,a){const s=this.Or.get(a);return s!==void 0&&(s.forEach(l=>this.overlays=this.overlays.remove(l)),this.Or.delete(a)),ae.resolve()}getOverlaysForCollection(e,t,a){const s=gs(),l=t.length+1,u=new Ee(t.child("")),f=this.overlays.getIteratorFrom(u);for(;f.hasNext();){const p=f.getNext().value,y=p.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===l&&p.largestBatchId>a&&s.set(p.getKey(),p)}return ae.resolve(s)}getOverlaysForCollectionGroup(e,t,a,s){let l=new Et((y,v)=>y-v);const u=this.overlays.getIterator();for(;u.hasNext();){const y=u.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>a){let v=l.get(y.largestBatchId);v===null&&(v=gs(),l=l.insert(y.largestBatchId,v)),v.set(y.getKey(),y)}}const f=gs(),p=l.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((y,v)=>f.set(y,v)),!(f.size()>=s)););return ae.resolve(f)}St(e,t,a){const s=this.overlays.get(a.key);if(s!==null){const u=this.Or.get(s.largestBatchId).delete(a.key);this.Or.set(s.largestBatchId,u)}this.overlays=this.overlays.insert(a.key,new W4(t,a));let l=this.Or.get(t);l===void 0&&(l=He(),this.Or.set(t,l)),this.Or.set(t,l.add(a.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OD{constructor(){this.sessionToken=on.EMPTY_BYTE_STRING}getSessionToken(e){return ae.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ae.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zg{constructor(){this.Nr=new Bt(Kt.Br),this.Lr=new Bt(Kt.kr)}isEmpty(){return this.Nr.isEmpty()}addReference(e,t){const a=new Kt(e,t);this.Nr=this.Nr.add(a),this.Lr=this.Lr.add(a)}qr(e,t){e.forEach(a=>this.addReference(a,t))}removeReference(e,t){this.Qr(new Kt(e,t))}$r(e,t){e.forEach(a=>this.removeReference(a,t))}Ur(e){const t=new Ee(new mt([])),a=new Kt(t,e),s=new Kt(t,e+1),l=[];return this.Lr.forEachInRange([a,s],u=>{this.Qr(u),l.push(u.key)}),l}Kr(){this.Nr.forEach(e=>this.Qr(e))}Qr(e){this.Nr=this.Nr.delete(e),this.Lr=this.Lr.delete(e)}Wr(e){const t=new Ee(new mt([])),a=new Kt(t,e),s=new Kt(t,e+1);let l=He();return this.Lr.forEachInRange([a,s],u=>{l=l.add(u.key)}),l}containsKey(e){const t=new Kt(e,0),a=this.Nr.firstAfterOrEqual(t);return a!==null&&e.isEqual(a.key)}}class Kt{constructor(e,t){this.key=e,this.Gr=t}static Br(e,t){return Ee.comparator(e.key,t.key)||Ve(e.Gr,t.Gr)}static kr(e,t){return Ve(e.Gr,t.Gr)||Ee.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jD{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Jn=1,this.zr=new Bt(Kt.Br)}checkEmpty(e){return ae.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,a,s){const l=this.Jn;this.Jn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new Q4(l,t,a,s);this.mutationQueue.push(u);for(const f of s)this.zr=this.zr.add(new Kt(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return ae.resolve(u)}lookupMutationBatch(e,t){return ae.resolve(this.jr(t))}getNextMutationBatchAfterBatchId(e,t){const a=t+1,s=this.Hr(a),l=s<0?0:s;return ae.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return ae.resolve(this.mutationQueue.length===0?Bg:this.Jn-1)}getAllMutationBatches(e){return ae.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const a=new Kt(t,0),s=new Kt(t,Number.POSITIVE_INFINITY),l=[];return this.zr.forEachInRange([a,s],u=>{const f=this.jr(u.Gr);l.push(f)}),ae.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let a=new Bt(Ve);return t.forEach(s=>{const l=new Kt(s,0),u=new Kt(s,Number.POSITIVE_INFINITY);this.zr.forEachInRange([l,u],f=>{a=a.add(f.Gr)})}),ae.resolve(this.Jr(a))}getAllMutationBatchesAffectingQuery(e,t){const a=t.path,s=a.length+1;let l=a;Ee.isDocumentKey(l)||(l=l.child(""));const u=new Kt(new Ee(l),0);let f=new Bt(Ve);return this.zr.forEachWhile(p=>{const y=p.key.path;return!!a.isPrefixOf(y)&&(y.length===s&&(f=f.add(p.Gr)),!0)},u),ae.resolve(this.Jr(f))}Jr(e){const t=[];return e.forEach(a=>{const s=this.jr(a);s!==null&&t.push(s)}),t}removeMutationBatch(e,t){Je(this.Yr(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let a=this.zr;return ae.forEach(t.mutations,s=>{const l=new Kt(s.key,t.batchId);return a=a.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.zr=a})}Xn(e){}containsKey(e,t){const a=new Kt(t,0),s=this.zr.firstAfterOrEqual(a);return ae.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,ae.resolve()}Yr(e,t){return this.Hr(e)}Hr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}jr(e){const t=this.Hr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PD{constructor(e){this.Zr=e,this.docs=function(){return new Et(Ee.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const a=t.key,s=this.docs.get(a),l=s?s.size:0,u=this.Zr(t);return this.docs=this.docs.insert(a,{document:t.mutableCopy(),size:u}),this.size+=u-l,this.indexManager.addToCollectionParentIndex(e,a.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const a=this.docs.get(t);return ae.resolve(a?a.document.mutableCopy():mn.newInvalidDocument(t))}getEntries(e,t){let a=Na();return t.forEach(s=>{const l=this.docs.get(s);a=a.insert(s,l?l.document.mutableCopy():mn.newInvalidDocument(s))}),ae.resolve(a)}getDocumentsMatchingQuery(e,t,a,s){let l=Na();const u=t.path,f=new Ee(u.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(f);for(;p.hasNext();){const{key:y,value:{document:v}}=p.getNext();if(!u.isPrefixOf(y.path))break;y.path.length>u.length+1||c4(l4(v),a)<=0||(s.has(v.key)||qh(t,v))&&(l=l.insert(v.key,v.mutableCopy()))}return ae.resolve(l)}getAllFromCollectionGroup(e,t,a,s){Se(9500)}Xr(e,t){return ae.forEach(this.docs,a=>t(a))}newChangeBuffer(e){return new MD(this)}getSize(e){return ae.resolve(this.size)}}class MD extends ND{constructor(e){super(),this.vr=e}applyChanges(e){const t=[];return this.changes.forEach((a,s)=>{s.isValidDocument()?t.push(this.vr.addEntry(e,s)):this.vr.removeEntry(a)}),ae.waitFor(t)}getFromCache(e,t){return this.vr.getEntry(e,t)}getAllFromCache(e,t){return this.vr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kD{constructor(e){this.persistence=e,this.ei=new Rs(t=>Hg(t),Gg),this.lastRemoteSnapshotVersion=Re.min(),this.highestTargetId=0,this.ti=0,this.ni=new Zg,this.targetCount=0,this.ri=Ho.rr()}forEachTarget(e,t){return this.ei.forEach((a,s)=>t(s)),ae.resolve()}getLastRemoteSnapshotVersion(e){return ae.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ae.resolve(this.ti)}allocateTargetId(e){return this.highestTargetId=this.ri.next(),ae.resolve(this.highestTargetId)}setTargetsMetadata(e,t,a){return a&&(this.lastRemoteSnapshotVersion=a),t>this.ti&&(this.ti=t),ae.resolve()}ar(e){this.ei.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ri=new Ho(t),this.highestTargetId=t),e.sequenceNumber>this.ti&&(this.ti=e.sequenceNumber)}addTargetData(e,t){return this.ar(t),this.targetCount+=1,ae.resolve()}updateTargetData(e,t){return this.ar(t),ae.resolve()}removeTargetData(e,t){return this.ei.delete(t.target),this.ni.Ur(t.targetId),this.targetCount-=1,ae.resolve()}removeTargets(e,t,a){let s=0;const l=[];return this.ei.forEach((u,f)=>{f.sequenceNumber<=t&&a.get(f.targetId)===null&&(this.ei.delete(u),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),s++)}),ae.waitFor(l).next(()=>s)}getTargetCount(e){return ae.resolve(this.targetCount)}getTargetData(e,t){const a=this.ei.get(t)||null;return ae.resolve(a)}addMatchingKeys(e,t,a){return this.ni.qr(t,a),ae.resolve()}removeMatchingKeys(e,t,a){this.ni.$r(t,a);const s=this.persistence.referenceDelegate,l=[];return s&&t.forEach(u=>{l.push(s.markPotentiallyOrphaned(e,u))}),ae.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.ni.Ur(t),ae.resolve()}getMatchingKeysForTargetId(e,t){const a=this.ni.Wr(t);return ae.resolve(a)}containsKey(e,t){return ae.resolve(this.ni.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dT{constructor(e,t){this.ii={},this.overlays={},this.si=new Lh(0),this.oi=!1,this.oi=!0,this._i=new OD,this.referenceDelegate=e(this),this.ai=new kD(this),this.indexManager=new bD,this.remoteDocumentCache=function(s){return new PD(s)}(a=>this.referenceDelegate.ui(a)),this.serializer=new vD(t),this.ci=new ID(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.oi=!1,Promise.resolve()}get started(){return this.oi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new DD,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let a=this.ii[e.toKey()];return a||(a=new jD(t,this.referenceDelegate),this.ii[e.toKey()]=a),a}getGlobalsCache(){return this._i}getTargetCache(){return this.ai}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.ci}runTransaction(e,t,a){me("MemoryPersistence","Starting transaction:",e);const s=new VD(this.si.next());return this.referenceDelegate.li(),a(s).next(l=>this.referenceDelegate.hi(s).next(()=>l)).toPromise().then(l=>(s.raiseOnCommittedEvent(),l))}Pi(e,t){return ae.or(Object.values(this.ii).map(a=>()=>a.containsKey(e,t)))}}class VD extends d4{constructor(e){super(),this.currentSequenceNumber=e}}class Jg{constructor(e){this.persistence=e,this.Ti=new Zg,this.Ii=null}static Ei(e){return new Jg(e)}get di(){if(this.Ii)return this.Ii;throw Se(60996)}addReference(e,t,a){return this.Ti.addReference(a,t),this.di.delete(a.toString()),ae.resolve()}removeReference(e,t,a){return this.Ti.removeReference(a,t),this.di.add(a.toString()),ae.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),ae.resolve()}removeTarget(e,t){this.Ti.Ur(t.targetId).forEach(s=>this.di.add(s.toString()));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(l=>this.di.add(l.toString()))}).next(()=>a.removeTargetData(e,t))}li(){this.Ii=new Set}hi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ae.forEach(this.di,a=>{const s=Ee.fromPath(a);return this.Ai(e,s).next(l=>{l||t.removeEntry(s,Re.min())})}).next(()=>(this.Ii=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ai(e,t).next(a=>{a?this.di.delete(t.toString()):this.di.add(t.toString())})}ui(e){return 0}Ai(e,t){return ae.or([()=>ae.resolve(this.Ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Pi(e,t)])}}class _h{constructor(e,t){this.persistence=e,this.Ri=new Rs(a=>m4(a.path),(a,s)=>a.isEqual(s)),this.garbageCollector=SD(this,t)}static Ei(e,t){return new _h(e,t)}li(){}hi(e){return ae.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.Vr(e);return this.persistence.getTargetCache().getTargetCount(e).next(a=>t.next(s=>a+s))}Vr(e){let t=0;return this.Ar(e,a=>{t++}).next(()=>t)}Ar(e,t){return ae.forEach(this.Ri,(a,s)=>this.gr(e,a,s).next(l=>l?ae.resolve():t(s)))}removeTargets(e,t,a){return this.persistence.getTargetCache().removeTargets(e,t,a)}removeOrphanedDocuments(e,t){let a=0;const s=this.persistence.getRemoteDocumentCache(),l=s.newChangeBuffer();return s.Xr(e,u=>this.gr(e,u,t).next(f=>{f||(a++,l.removeEntry(u,Re.min()))})).next(()=>l.apply(e)).next(()=>a)}markPotentiallyOrphaned(e,t){return this.Ri.set(t,e.currentSequenceNumber),ae.resolve()}removeTarget(e,t){const a=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,a)}addReference(e,t,a){return this.Ri.set(a,e.currentSequenceNumber),ae.resolve()}removeReference(e,t,a){return this.Ri.set(a,e.currentSequenceNumber),ae.resolve()}updateLimboDocument(e,t){return this.Ri.set(t,e.currentSequenceNumber),ae.resolve()}ui(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Yd(e.data.value)),t}gr(e,t,a){return ae.or([()=>this.persistence.Pi(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.Ri.get(t);return ae.resolve(s!==void 0&&s>a)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ey{constructor(e,t,a,s){this.targetId=e,this.fromCache=t,this.ls=a,this.hs=s}static Ps(e,t){let a=He(),s=He();for(const l of t.docChanges)switch(l.type){case 0:a=a.add(l.doc.key);break;case 1:s=s.add(l.doc.key)}return new ey(e,t.fromCache,a,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LD{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UD{constructor(){this.Ts=!1,this.Is=!1,this.Es=100,this.ds=function(){return pC()?8:h4(gn())>0?6:4}()}initialize(e,t){this.As=e,this.indexManager=t,this.Ts=!0}getDocumentsMatchingQuery(e,t,a,s){const l={result:null};return this.Rs(e,t).next(u=>{l.result=u}).next(()=>{if(!l.result)return this.Vs(e,t,s,a).next(u=>{l.result=u})}).next(()=>{if(l.result)return;const u=new LD;return this.fs(e,t,u).next(f=>{if(l.result=f,this.Is)return this.gs(e,t,u,f.size)})}).next(()=>l.result)}gs(e,t,a,s){return a.documentReadCount<this.Es?(No()<=Fe.DEBUG&&me("QueryEngine","SDK will not create cache indexes for query:",Co(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Es,"documents"),ae.resolve()):(No()<=Fe.DEBUG&&me("QueryEngine","Query:",Co(t),"scans",a.documentReadCount,"local documents and returns",s,"documents as results."),a.documentReadCount>this.ds*s?(No()<=Fe.DEBUG&&me("QueryEngine","The SDK decides to create cache indexes for query:",Co(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Hr(t))):ae.resolve())}Rs(e,t){if(Wb(t))return ae.resolve(null);let a=Hr(t);return this.indexManager.getIndexType(e,a).next(s=>s===0?null:(t.limit!==null&&s===1&&(t=gh(t,null,"F"),a=Hr(t)),this.indexManager.getDocumentsMatchingTarget(e,a).next(l=>{const u=He(...l);return this.As.getDocuments(e,u).next(f=>this.indexManager.getMinOffset(e,a).next(p=>{const y=this.ps(t,f);return this.ys(t,y,u,p.readTime)?this.Rs(e,gh(t,null,"F")):this.ws(e,y,t,p)}))})))}Vs(e,t,a,s){return Wb(t)||s.isEqual(Re.min())?ae.resolve(null):this.As.getDocuments(e,a).next(l=>{const u=this.ps(t,l);return this.ys(t,u,a,s)?ae.resolve(null):(No()<=Fe.DEBUG&&me("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Co(t)),this.ws(e,u,t,o4(s,jc)).next(f=>f))})}ps(e,t){let a=new Bt(Fx(e));return t.forEach((s,l)=>{qh(e,l)&&(a=a.add(l))}),a}ys(e,t,a,s){if(e.limit===null)return!1;if(a.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(s)>0)}fs(e,t,a){return No()<=Fe.DEBUG&&me("QueryEngine","Using full collection scan to execute query:",Co(t)),this.As.getDocumentsMatchingQuery(e,t,Ei.min(),a)}ws(e,t,a,s){return this.As.getDocumentsMatchingQuery(e,a,s).next(l=>(t.forEach(u=>{l=l.insert(u.key,u)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ty="LocalStore",zD=3e8;class BD{constructor(e,t,a,s){this.persistence=e,this.bs=t,this.serializer=s,this.Ss=new Et(Ve),this.Ds=new Rs(l=>Hg(l),Gg),this.vs=new Map,this.Cs=e.getRemoteDocumentCache(),this.ai=e.getTargetCache(),this.ci=e.getBundleCache(),this.Fs(a)}Fs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new RD(this.Cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Cs.setIndexManager(this.indexManager),this.bs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ss))}}function qD(n,e,t,a){return new BD(n,e,t,a)}async function hT(n,e){const t=De(n);return await t.persistence.runTransaction("Handle user change","readonly",a=>{let s;return t.mutationQueue.getAllMutationBatches(a).next(l=>(s=l,t.Fs(e),t.mutationQueue.getAllMutationBatches(a))).next(l=>{const u=[],f=[];let p=He();for(const y of s){u.push(y.batchId);for(const v of y.mutations)p=p.add(v.key)}for(const y of l){f.push(y.batchId);for(const v of y.mutations)p=p.add(v.key)}return t.localDocuments.getDocuments(a,p).next(y=>({Ms:y,removedBatchIds:u,addedBatchIds:f}))})})}function FD(n,e){const t=De(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",a=>{const s=e.batch.keys(),l=t.Cs.newChangeBuffer({trackRemovals:!0});return function(f,p,y,v){const E=y.batch,T=E.keys();let C=ae.resolve();return T.forEach(A=>{C=C.next(()=>v.getEntry(p,A)).next(M=>{const I=y.docVersions.get(A);Je(I!==null,48541),M.version.compareTo(I)<0&&(E.applyToRemoteDocument(M,y),M.isValidDocument()&&(M.setReadTime(y.commitVersion),v.addEntry(M)))})}),C.next(()=>f.mutationQueue.removeMutationBatch(p,E))}(t,a,e,l).next(()=>l.apply(a)).next(()=>t.mutationQueue.performConsistencyCheck(a)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(a,s,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,function(f){let p=He();for(let y=0;y<f.mutationResults.length;++y)f.mutationResults[y].transformResults.length>0&&(p=p.add(f.batch.mutations[y].key));return p}(e))).next(()=>t.localDocuments.getDocuments(a,s))})}function fT(n){const e=De(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.ai.getLastRemoteSnapshotVersion(t))}function HD(n,e){const t=De(n),a=e.snapshotVersion;let s=t.Ss;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const u=t.Cs.newChangeBuffer({trackRemovals:!0});s=t.Ss;const f=[];e.targetChanges.forEach((v,E)=>{const T=s.get(E);if(!T)return;f.push(t.ai.removeMatchingKeys(l,v.removedDocuments,E).next(()=>t.ai.addMatchingKeys(l,v.addedDocuments,E)));let C=T.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(E)!==null?C=C.withResumeToken(on.EMPTY_BYTE_STRING,Re.min()).withLastLimboFreeSnapshotVersion(Re.min()):v.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(v.resumeToken,a)),s=s.insert(E,C),function(M,I,G){return M.resumeToken.approximateByteSize()===0||I.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=zD?!0:G.addedDocuments.size+G.modifiedDocuments.size+G.removedDocuments.size>0}(T,C,v)&&f.push(t.ai.updateTargetData(l,C))});let p=Na(),y=He();if(e.documentUpdates.forEach(v=>{e.resolvedLimboDocuments.has(v)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(l,v))}),f.push(GD(l,u,e.documentUpdates).next(v=>{p=v.xs,y=v.Os})),!a.isEqual(Re.min())){const v=t.ai.getLastRemoteSnapshotVersion(l).next(E=>t.ai.setTargetsMetadata(l,l.currentSequenceNumber,a));f.push(v)}return ae.waitFor(f).next(()=>u.apply(l)).next(()=>t.localDocuments.getLocalViewOfDocuments(l,p,y)).next(()=>p)}).then(l=>(t.Ss=s,l))}function GD(n,e,t){let a=He(),s=He();return t.forEach(l=>a=a.add(l)),e.getEntries(n,a).next(l=>{let u=Na();return t.forEach((f,p)=>{const y=l.get(f);p.isFoundDocument()!==y.isFoundDocument()&&(s=s.add(f)),p.isNoDocument()&&p.version.isEqual(Re.min())?(e.removeEntry(f,p.readTime),u=u.insert(f,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||p.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(p),u=u.insert(f,p)):me(ty,"Ignoring outdated watch update for ",f,". Current version:",y.version," Watch version:",p.version)}),{xs:u,Os:s}})}function $D(n,e){const t=De(n);return t.persistence.runTransaction("Get next mutation batch","readonly",a=>(e===void 0&&(e=Bg),t.mutationQueue.getNextMutationBatchAfterBatchId(a,e)))}function YD(n,e){const t=De(n);return t.persistence.runTransaction("Allocate target","readwrite",a=>{let s;return t.ai.getTargetData(a,e).next(l=>l?(s=l,ae.resolve(s)):t.ai.allocateTargetId(a).next(u=>(s=new mi(e,u,"TargetPurposeListen",a.currentSequenceNumber),t.ai.addTargetData(a,s).next(()=>s))))}).then(a=>{const s=t.Ss.get(a.targetId);return(s===null||a.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Ss=t.Ss.insert(a.targetId,a),t.Ds.set(e,a.targetId)),a})}async function og(n,e,t){const a=De(n),s=a.Ss.get(e),l=t?"readwrite":"readwrite-primary";try{t||await a.persistence.runTransaction("Release target",l,u=>a.persistence.referenceDelegate.removeTarget(u,s))}catch(u){if(!tl(u))throw u;me(ty,`Failed to update sequence numbers for target ${e}: ${u}`)}a.Ss=a.Ss.remove(e),a.Ds.delete(s.target)}function cE(n,e,t){const a=De(n);let s=Re.min(),l=He();return a.persistence.runTransaction("Execute query","readwrite",u=>function(p,y,v){const E=De(p),T=E.Ds.get(v);return T!==void 0?ae.resolve(E.Ss.get(T)):E.ai.getTargetData(y,v)}(a,u,Hr(e)).next(f=>{if(f)return s=f.lastLimboFreeSnapshotVersion,a.ai.getMatchingKeysForTargetId(u,f.targetId).next(p=>{l=p})}).next(()=>a.bs.getDocumentsMatchingQuery(u,e,t?s:Re.min(),t?l:He())).next(f=>(KD(a,j4(e),f),{documents:f,Ns:l})))}function KD(n,e,t){let a=n.vs.get(e)||Re.min();t.forEach((s,l)=>{l.readTime.compareTo(a)>0&&(a=l.readTime)}),n.vs.set(e,a)}class uE{constructor(){this.activeTargetIds=U4()}$s(e){this.activeTargetIds=this.activeTargetIds.add(e)}Us(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Qs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class QD{constructor(){this.So=new uE,this.Do={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,a){}addLocalQueryTarget(e,t=!0){return t&&this.So.$s(e),this.Do[e]||"not-current"}updateQueryState(e,t,a){this.Do[e]=t}removeLocalQueryTarget(e){this.So.Us(e)}isLocalQueryTarget(e){return this.So.activeTargetIds.has(e)}clearQueryState(e){delete this.Do[e]}getAllActiveQueryTargets(){return this.So.activeTargetIds}isActiveQueryTarget(e){return this.So.activeTargetIds.has(e)}start(){return this.So=new uE,Promise.resolve()}handleUserChange(e,t,a){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WD{vo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dE="ConnectivityMonitor";class hE{constructor(){this.Co=()=>this.Fo(),this.Mo=()=>this.xo(),this.Oo=[],this.No()}vo(e){this.Oo.push(e)}shutdown(){window.removeEventListener("online",this.Co),window.removeEventListener("offline",this.Mo)}No(){window.addEventListener("online",this.Co),window.addEventListener("offline",this.Mo)}Fo(){me(dE,"Network connectivity changed: AVAILABLE");for(const e of this.Oo)e(0)}xo(){me(dE,"Network connectivity changed: UNAVAILABLE");for(const e of this.Oo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ld=null;function lg(){return Ld===null?Ld=function(){return 268435456+Math.round(2147483648*Math.random())}():Ld++,"0x"+Ld.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dp="RestConnection",XD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class ZD{get Bo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Lo=t+"://"+e.host,this.ko=`projects/${a}/databases/${s}`,this.qo=this.databaseId.database===fh?`project_id=${a}`:`project_id=${a}&database_id=${s}`}Qo(e,t,a,s,l){const u=lg(),f=this.$o(e,t.toUriEncodedString());me(Dp,`Sending RPC '${e}' ${u}:`,f,a);const p={"google-cloud-resource-prefix":this.ko,"x-goog-request-params":this.qo};this.Uo(p,s,l);const{host:y}=new URL(f),v=Gc(y);return this.Ko(e,f,p,a,v).then(E=>(me(Dp,`Received RPC '${e}' ${u}: `,E),E),E=>{throw zo(Dp,`RPC '${e}' ${u} failed with error: `,E,"url: ",f,"request:",a),E})}Wo(e,t,a,s,l,u){return this.Qo(e,t,a,s,l)}Uo(e,t,a){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Jo}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((s,l)=>e[l]=s),a&&a.headers.forEach((s,l)=>e[l]=s)}$o(e,t){const a=XD[e];return`${this.Lo}/v1/${t}:${a}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JD{constructor(e){this.Go=e.Go,this.zo=e.zo}jo(e){this.Ho=e}Jo(e){this.Yo=e}Zo(e){this.Xo=e}onMessage(e){this.e_=e}close(){this.zo()}send(e){this.Go(e)}t_(){this.Ho()}n_(){this.Yo()}r_(e){this.Xo(e)}i_(e){this.e_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hn="WebChannelConnection";class eO extends ZD{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ko(e,t,a,s,l){const u=lg();return new Promise((f,p)=>{const y=new gx;y.setWithCredentials(!0),y.listenOnce(yx.COMPLETE,()=>{try{switch(y.getLastErrorCode()){case $d.NO_ERROR:const E=y.getResponseJson();me(hn,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(E)),f(E);break;case $d.TIMEOUT:me(hn,`RPC '${e}' ${u} timed out`),p(new fe(ne.DEADLINE_EXCEEDED,"Request time out"));break;case $d.HTTP_ERROR:const T=y.getStatus();if(me(hn,`RPC '${e}' ${u} failed with status:`,T,"response text:",y.getResponseText()),T>0){let C=y.getResponseJson();Array.isArray(C)&&(C=C[0]);const A=C==null?void 0:C.error;if(A&&A.status&&A.message){const M=function(G){const Q=G.toLowerCase().replace(/_/g,"-");return Object.values(ne).indexOf(Q)>=0?Q:ne.UNKNOWN}(A.status);p(new fe(M,A.message))}else p(new fe(ne.UNKNOWN,"Server responded with status "+y.getStatus()))}else p(new fe(ne.UNAVAILABLE,"Connection failed."));break;default:Se(9055,{s_:e,streamId:u,o_:y.getLastErrorCode(),__:y.getLastError()})}}finally{me(hn,`RPC '${e}' ${u} completed.`)}});const v=JSON.stringify(s);me(hn,`RPC '${e}' ${u} sending request:`,s),y.send(t,"POST",v,a,15)})}a_(e,t,a){const s=lg(),l=[this.Lo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=bx(),f=_x(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(p.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Uo(p.initMessageHeaders,t,a),p.encodeInitMessageHeaders=!0;const v=l.join("");me(hn,`Creating RPC '${e}' stream ${s}: ${v}`,p);const E=u.createWebChannel(v,p);let T=!1,C=!1;const A=new JD({Go:I=>{C?me(hn,`Not sending because RPC '${e}' stream ${s} is closed:`,I):(T||(me(hn,`Opening RPC '${e}' stream ${s} transport.`),E.open(),T=!0),me(hn,`RPC '${e}' stream ${s} sending:`,I),E.send(I))},zo:()=>E.close()}),M=(I,G,Q)=>{I.listen(G,q=>{try{Q(q)}catch(oe){setTimeout(()=>{throw oe},0)}})};return M(E,bc.EventType.OPEN,()=>{C||(me(hn,`RPC '${e}' stream ${s} transport opened.`),A.t_())}),M(E,bc.EventType.CLOSE,()=>{C||(C=!0,me(hn,`RPC '${e}' stream ${s} transport closed`),A.r_())}),M(E,bc.EventType.ERROR,I=>{C||(C=!0,zo(hn,`RPC '${e}' stream ${s} transport errored. Name:`,I.name,"Message:",I.message),A.r_(new fe(ne.UNAVAILABLE,"The operation could not be completed")))}),M(E,bc.EventType.MESSAGE,I=>{var G;if(!C){const Q=I.data[0];Je(!!Q,16349);const q=Q,oe=(q==null?void 0:q.error)||((G=q[0])===null||G===void 0?void 0:G.error);if(oe){me(hn,`RPC '${e}' stream ${s} received error:`,oe);const ce=oe.status;let pe=function(N){const j=jt[N];if(j!==void 0)return eT(j)}(ce),P=oe.message;pe===void 0&&(pe=ne.INTERNAL,P="Unknown error status: "+ce+" with message "+oe.message),C=!0,A.r_(new fe(pe,P)),E.close()}else me(hn,`RPC '${e}' stream ${s} received:`,Q),A.i_(Q)}}),M(f,vx.STAT_EVENT,I=>{I.stat===Wp.PROXY?me(hn,`RPC '${e}' stream ${s} detected buffering proxy`):I.stat===Wp.NOPROXY&&me(hn,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{A.n_()},0),A}}function Op(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $h(n){return new aD(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mT{constructor(e,t,a=1e3,s=1.5,l=6e4){this.bi=e,this.timerId=t,this.u_=a,this.c_=s,this.l_=l,this.h_=0,this.P_=null,this.T_=Date.now(),this.reset()}reset(){this.h_=0}I_(){this.h_=this.l_}E_(e){this.cancel();const t=Math.floor(this.h_+this.d_()),a=Math.max(0,Date.now()-this.T_),s=Math.max(0,t-a);s>0&&me("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.h_} ms, delay with jitter: ${t} ms, last attempt: ${a} ms ago)`),this.P_=this.bi.enqueueAfterDelay(this.timerId,s,()=>(this.T_=Date.now(),e())),this.h_*=this.c_,this.h_<this.u_&&(this.h_=this.u_),this.h_>this.l_&&(this.h_=this.l_)}A_(){this.P_!==null&&(this.P_.skipDelay(),this.P_=null)}cancel(){this.P_!==null&&(this.P_.cancel(),this.P_=null)}d_(){return(Math.random()-.5)*this.h_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fE="PersistentStream";class pT{constructor(e,t,a,s,l,u,f,p){this.bi=e,this.R_=a,this.V_=s,this.connection=l,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=f,this.listener=p,this.state=0,this.m_=0,this.f_=null,this.g_=null,this.stream=null,this.p_=0,this.y_=new mT(e,t)}w_(){return this.state===1||this.state===5||this.b_()}b_(){return this.state===2||this.state===3}start(){this.p_=0,this.state!==4?this.auth():this.S_()}async stop(){this.w_()&&await this.close(0)}D_(){this.state=0,this.y_.reset()}v_(){this.b_()&&this.f_===null&&(this.f_=this.bi.enqueueAfterDelay(this.R_,6e4,()=>this.C_()))}F_(e){this.M_(),this.stream.send(e)}async C_(){if(this.b_())return this.close(0)}M_(){this.f_&&(this.f_.cancel(),this.f_=null)}x_(){this.g_&&(this.g_.cancel(),this.g_=null)}async close(e,t){this.M_(),this.x_(),this.y_.cancel(),this.m_++,e!==4?this.y_.reset():t&&t.code===ne.RESOURCE_EXHAUSTED?(Sa(t.toString()),Sa("Using maximum backoff delay to prevent overloading the backend."),this.y_.I_()):t&&t.code===ne.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.O_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Zo(t)}O_(){}auth(){this.state=1;const e=this.N_(this.m_),t=this.m_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([a,s])=>{this.m_===t&&this.B_(a,s)},a=>{e(()=>{const s=new fe(ne.UNKNOWN,"Fetching auth token failed: "+a.message);return this.L_(s)})})}B_(e,t){const a=this.N_(this.m_);this.stream=this.k_(e,t),this.stream.jo(()=>{a(()=>this.listener.jo())}),this.stream.Jo(()=>{a(()=>(this.state=2,this.g_=this.bi.enqueueAfterDelay(this.V_,1e4,()=>(this.b_()&&(this.state=3),Promise.resolve())),this.listener.Jo()))}),this.stream.Zo(s=>{a(()=>this.L_(s))}),this.stream.onMessage(s=>{a(()=>++this.p_==1?this.q_(s):this.onNext(s))})}S_(){this.state=5,this.y_.E_(async()=>{this.state=0,this.start()})}L_(e){return me(fE,`close with error: ${e}`),this.stream=null,this.close(4,e)}N_(e){return t=>{this.bi.enqueueAndForget(()=>this.m_===e?t():(me(fE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class tO extends pT{constructor(e,t,a,s,l,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,a,s,u),this.serializer=l}k_(e,t){return this.connection.a_("Listen",e,t)}q_(e){return this.onNext(e)}onNext(e){this.y_.reset();const t=oD(this.serializer,e),a=function(l){if(!("targetChange"in l))return Re.min();const u=l.targetChange;return u.targetIds&&u.targetIds.length?Re.min():u.readTime?Gr(u.readTime):Re.min()}(e);return this.listener.Q_(t,a)}U_(e){const t={};t.database=sg(this.serializer),t.addTarget=function(l,u){let f;const p=u.target;if(f=tg(p)?{documents:uD(l,p)}:{query:dD(l,p).gt},f.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){f.resumeToken=rT(l,u.resumeToken);const y=rg(l,u.expectedCount);y!==null&&(f.expectedCount=y)}else if(u.snapshotVersion.compareTo(Re.min())>0){f.readTime=vh(l,u.snapshotVersion.toTimestamp());const y=rg(l,u.expectedCount);y!==null&&(f.expectedCount=y)}return f}(this.serializer,e);const a=fD(this.serializer,e);a&&(t.labels=a),this.F_(t)}K_(e){const t={};t.database=sg(this.serializer),t.removeTarget=e,this.F_(t)}}class nO extends pT{constructor(e,t,a,s,l,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,a,s,u),this.serializer=l}get W_(){return this.p_>0}start(){this.lastStreamToken=void 0,super.start()}O_(){this.W_&&this.G_([])}k_(e,t){return this.connection.a_("Write",e,t)}q_(e){return Je(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Je(!e.writeResults||e.writeResults.length===0,55816),this.listener.z_()}onNext(e){Je(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.y_.reset();const t=cD(e.writeResults,e.commitTime),a=Gr(e.commitTime);return this.listener.j_(a,t)}H_(){const e={};e.database=sg(this.serializer),this.F_(e)}G_(e){const t={streamToken:this.lastStreamToken,writes:e.map(a=>lD(this.serializer,a))};this.F_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rO{}class aO extends rO{constructor(e,t,a,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=a,this.serializer=s,this.J_=!1}Y_(){if(this.J_)throw new fe(ne.FAILED_PRECONDITION,"The client has already been terminated.")}Qo(e,t,a,s){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,u])=>this.connection.Qo(e,ag(t,a),s,l,u)).catch(l=>{throw l.name==="FirebaseError"?(l.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new fe(ne.UNKNOWN,l.toString())})}Wo(e,t,a,s,l){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,f])=>this.connection.Wo(e,ag(t,a),s,u,f,l)).catch(u=>{throw u.name==="FirebaseError"?(u.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new fe(ne.UNKNOWN,u.toString())})}terminate(){this.J_=!0,this.connection.terminate()}}class iO{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.Z_=0,this.X_=null,this.ea=!0}ta(){this.Z_===0&&(this.na("Unknown"),this.X_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.X_=null,this.ra("Backend didn't respond within 10 seconds."),this.na("Offline"),Promise.resolve())))}ia(e){this.state==="Online"?this.na("Unknown"):(this.Z_++,this.Z_>=1&&(this.sa(),this.ra(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.na("Offline")))}set(e){this.sa(),this.Z_=0,e==="Online"&&(this.ea=!1),this.na(e)}na(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ra(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ea?(Sa(t),this.ea=!1):me("OnlineStateTracker",t)}sa(){this.X_!==null&&(this.X_.cancel(),this.X_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const As="RemoteStore";class sO{constructor(e,t,a,s,l){this.localStore=e,this.datastore=t,this.asyncQueue=a,this.remoteSyncer={},this.oa=[],this._a=new Map,this.aa=new Set,this.ua=[],this.ca=l,this.ca.vo(u=>{a.enqueueAndForget(async()=>{Is(this)&&(me(As,"Restarting streams for network reachability change."),await async function(p){const y=De(p);y.aa.add(4),await eu(y),y.la.set("Unknown"),y.aa.delete(4),await Yh(y)}(this))})}),this.la=new iO(a,s)}}async function Yh(n){if(Is(n))for(const e of n.ua)await e(!0)}async function eu(n){for(const e of n.ua)await e(!1)}function gT(n,e){const t=De(n);t._a.has(e.targetId)||(t._a.set(e.targetId,e),iy(t)?ay(t):rl(t).b_()&&ry(t,e))}function ny(n,e){const t=De(n),a=rl(t);t._a.delete(e),a.b_()&&yT(t,e),t._a.size===0&&(a.b_()?a.v_():Is(t)&&t.la.set("Unknown"))}function ry(n,e){if(n.ha.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Re.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}rl(n).U_(e)}function yT(n,e){n.ha.Ke(e),rl(n).K_(e)}function ay(n){n.ha=new eD({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>n._a.get(e)||null,Pt:()=>n.datastore.serializer.databaseId}),rl(n).start(),n.la.ta()}function iy(n){return Is(n)&&!rl(n).w_()&&n._a.size>0}function Is(n){return De(n).aa.size===0}function vT(n){n.ha=void 0}async function oO(n){n.la.set("Online")}async function lO(n){n._a.forEach((e,t)=>{ry(n,e)})}async function cO(n,e){vT(n),iy(n)?(n.la.ia(e),ay(n)):n.la.set("Unknown")}async function uO(n,e,t){if(n.la.set("Online"),e instanceof nT&&e.state===2&&e.cause)try{await async function(s,l){const u=l.cause;for(const f of l.targetIds)s._a.has(f)&&(await s.remoteSyncer.rejectListen(f,u),s._a.delete(f),s.ha.removeTarget(f))}(n,e)}catch(a){me(As,"Failed to remove targets %s: %s ",e.targetIds.join(","),a),await bh(n,a)}else if(e instanceof Wd?n.ha.Xe(e):e instanceof tT?n.ha.ot(e):n.ha.nt(e),!t.isEqual(Re.min()))try{const a=await fT(n.localStore);t.compareTo(a)>=0&&await function(l,u){const f=l.ha.It(u);return f.targetChanges.forEach((p,y)=>{if(p.resumeToken.approximateByteSize()>0){const v=l._a.get(y);v&&l._a.set(y,v.withResumeToken(p.resumeToken,u))}}),f.targetMismatches.forEach((p,y)=>{const v=l._a.get(p);if(!v)return;l._a.set(p,v.withResumeToken(on.EMPTY_BYTE_STRING,v.snapshotVersion)),yT(l,p);const E=new mi(v.target,p,y,v.sequenceNumber);ry(l,E)}),l.remoteSyncer.applyRemoteEvent(f)}(n,t)}catch(a){me(As,"Failed to raise snapshot:",a),await bh(n,a)}}async function bh(n,e,t){if(!tl(e))throw e;n.aa.add(1),await eu(n),n.la.set("Offline"),t||(t=()=>fT(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{me(As,"Retrying IndexedDB access"),await t(),n.aa.delete(1),await Yh(n)})}function _T(n,e){return e().catch(t=>bh(n,t,e))}async function Kh(n){const e=De(n),t=Ai(e);let a=e.oa.length>0?e.oa[e.oa.length-1].batchId:Bg;for(;dO(e);)try{const s=await $D(e.localStore,a);if(s===null){e.oa.length===0&&t.v_();break}a=s.batchId,hO(e,s)}catch(s){await bh(e,s)}bT(e)&&ET(e)}function dO(n){return Is(n)&&n.oa.length<10}function hO(n,e){n.oa.push(e);const t=Ai(n);t.b_()&&t.W_&&t.G_(e.mutations)}function bT(n){return Is(n)&&!Ai(n).w_()&&n.oa.length>0}function ET(n){Ai(n).start()}async function fO(n){Ai(n).H_()}async function mO(n){const e=Ai(n);for(const t of n.oa)e.G_(t.mutations)}async function pO(n,e,t){const a=n.oa.shift(),s=Qg.from(a,e,t);await _T(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),await Kh(n)}async function gO(n,e){e&&Ai(n).W_&&await async function(a,s){if(function(u){return Z4(u)&&u!==ne.ABORTED}(s.code)){const l=a.oa.shift();Ai(a).D_(),await _T(a,()=>a.remoteSyncer.rejectFailedWrite(l.batchId,s)),await Kh(a)}}(n,e),bT(n)&&ET(n)}async function mE(n,e){const t=De(n);t.asyncQueue.verifyOperationInProgress(),me(As,"RemoteStore received new credentials");const a=Is(t);t.aa.add(3),await eu(t),a&&t.la.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.aa.delete(3),await Yh(t)}async function yO(n,e){const t=De(n);e?(t.aa.delete(2),await Yh(t)):e||(t.aa.add(2),await eu(t),t.la.set("Unknown"))}function rl(n){return n.Pa||(n.Pa=function(t,a,s){const l=De(t);return l.Y_(),new tO(a,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,s)}(n.datastore,n.asyncQueue,{jo:oO.bind(null,n),Jo:lO.bind(null,n),Zo:cO.bind(null,n),Q_:uO.bind(null,n)}),n.ua.push(async e=>{e?(n.Pa.D_(),iy(n)?ay(n):n.la.set("Unknown")):(await n.Pa.stop(),vT(n))})),n.Pa}function Ai(n){return n.Ta||(n.Ta=function(t,a,s){const l=De(t);return l.Y_(),new nO(a,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,s)}(n.datastore,n.asyncQueue,{jo:()=>Promise.resolve(),Jo:fO.bind(null,n),Zo:gO.bind(null,n),z_:mO.bind(null,n),j_:pO.bind(null,n)}),n.ua.push(async e=>{e?(n.Ta.D_(),await Kh(n)):(await n.Ta.stop(),n.oa.length>0&&(me(As,`Stopping write stream with ${n.oa.length} pending writes`),n.oa=[]))})),n.Ta}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sy{constructor(e,t,a,s,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=a,this.op=s,this.removalCallback=l,this.deferred=new xa,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,a,s,l){const u=Date.now()+a,f=new sy(e,t,u,s,l);return f.start(a),f}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new fe(ne.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function oy(n,e){if(Sa("AsyncQueue",`${e}: ${n}`),tl(n))return new fe(ne.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{static emptySet(e){return new Mo(e.comparator)}constructor(e){this.comparator=e?(t,a)=>e(t,a)||Ee.comparator(t.key,a.key):(t,a)=>Ee.comparator(t.key,a.key),this.keyedMap=Ec(),this.sortedSet=new Et(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,a)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Mo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),a=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,l=a.getNext().key;if(!s.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const a=new Mo;return a.comparator=this.comparator,a.keyedMap=e,a.sortedSet=t,a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pE{constructor(){this.Ia=new Et(Ee.comparator)}track(e){const t=e.doc.key,a=this.Ia.get(t);a?e.type!==0&&a.type===3?this.Ia=this.Ia.insert(t,e):e.type===3&&a.type!==1?this.Ia=this.Ia.insert(t,{type:a.type,doc:e.doc}):e.type===2&&a.type===2?this.Ia=this.Ia.insert(t,{type:2,doc:e.doc}):e.type===2&&a.type===0?this.Ia=this.Ia.insert(t,{type:0,doc:e.doc}):e.type===1&&a.type===0?this.Ia=this.Ia.remove(t):e.type===1&&a.type===2?this.Ia=this.Ia.insert(t,{type:1,doc:a.doc}):e.type===0&&a.type===1?this.Ia=this.Ia.insert(t,{type:2,doc:e.doc}):Se(63341,{Vt:e,Ea:a}):this.Ia=this.Ia.insert(t,e)}da(){const e=[];return this.Ia.inorderTraversal((t,a)=>{e.push(a)}),e}}class Go{constructor(e,t,a,s,l,u,f,p,y){this.query=e,this.docs=t,this.oldDocs=a,this.docChanges=s,this.mutatedKeys=l,this.fromCache=u,this.syncStateChanged=f,this.excludesMetadataChanges=p,this.hasCachedResults=y}static fromInitialDocuments(e,t,a,s,l){const u=[];return t.forEach(f=>{u.push({type:0,doc:f})}),new Go(e,t,Mo.emptySet(t),u,a,s,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Bh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,a=e.docChanges;if(t.length!==a.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==a[s].type||!t[s].doc.isEqual(a[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vO{constructor(){this.Aa=void 0,this.Ra=[]}Va(){return this.Ra.some(e=>e.ma())}}class _O{constructor(){this.queries=gE(),this.onlineState="Unknown",this.fa=new Set}terminate(){(function(t,a){const s=De(t),l=s.queries;s.queries=gE(),l.forEach((u,f)=>{for(const p of f.Ra)p.onError(a)})})(this,new fe(ne.ABORTED,"Firestore shutting down"))}}function gE(){return new Rs(n=>qx(n),Bh)}async function xT(n,e){const t=De(n);let a=3;const s=e.query;let l=t.queries.get(s);l?!l.Va()&&e.ma()&&(a=2):(l=new vO,a=e.ma()?0:1);try{switch(a){case 0:l.Aa=await t.onListen(s,!0);break;case 1:l.Aa=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(u){const f=oy(u,`Initialization of query '${Co(e.query)}' failed`);return void e.onError(f)}t.queries.set(s,l),l.Ra.push(e),e.ga(t.onlineState),l.Aa&&e.pa(l.Aa)&&ly(t)}async function TT(n,e){const t=De(n),a=e.query;let s=3;const l=t.queries.get(a);if(l){const u=l.Ra.indexOf(e);u>=0&&(l.Ra.splice(u,1),l.Ra.length===0?s=e.ma()?0:1:!l.Va()&&e.ma()&&(s=2))}switch(s){case 0:return t.queries.delete(a),t.onUnlisten(a,!0);case 1:return t.queries.delete(a),t.onUnlisten(a,!1);case 2:return t.onLastRemoteStoreUnlisten(a);default:return}}function bO(n,e){const t=De(n);let a=!1;for(const s of e){const l=s.query,u=t.queries.get(l);if(u){for(const f of u.Ra)f.pa(s)&&(a=!0);u.Aa=s}}a&&ly(t)}function EO(n,e,t){const a=De(n),s=a.queries.get(e);if(s)for(const l of s.Ra)l.onError(t);a.queries.delete(e)}function ly(n){n.fa.forEach(e=>{e.next()})}var cg,yE;(yE=cg||(cg={})).ya="default",yE.Cache="cache";class wT{constructor(e,t,a){this.query=e,this.wa=t,this.ba=!1,this.Sa=null,this.onlineState="Unknown",this.options=a||{}}pa(e){if(!this.options.includeMetadataChanges){const a=[];for(const s of e.docChanges)s.type!==3&&a.push(s);e=new Go(e.query,e.docs,e.oldDocs,a,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ba?this.Da(e)&&(this.wa.next(e),t=!0):this.va(e,this.onlineState)&&(this.Ca(e),t=!0),this.Sa=e,t}onError(e){this.wa.error(e)}ga(e){this.onlineState=e;let t=!1;return this.Sa&&!this.ba&&this.va(this.Sa,e)&&(this.Ca(this.Sa),t=!0),t}va(e,t){if(!e.fromCache||!this.ma())return!0;const a=t!=="Offline";return(!this.options.Fa||!a)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Da(e){if(e.docChanges.length>0)return!0;const t=this.Sa&&this.Sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Ca(e){e=Go.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ba=!0,this.wa.next(e)}ma(){return this.options.source!==cg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AT{constructor(e){this.key=e}}class ST{constructor(e){this.key=e}}class xO{constructor(e,t){this.query=e,this.qa=t,this.Qa=null,this.hasCachedResults=!1,this.current=!1,this.$a=He(),this.mutatedKeys=He(),this.Ua=Fx(e),this.Ka=new Mo(this.Ua)}get Wa(){return this.qa}Ga(e,t){const a=t?t.za:new pE,s=t?t.Ka:this.Ka;let l=t?t.mutatedKeys:this.mutatedKeys,u=s,f=!1;const p=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,y=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((v,E)=>{const T=s.get(v),C=qh(this.query,E)?E:null,A=!!T&&this.mutatedKeys.has(T.key),M=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations);let I=!1;T&&C?T.data.isEqual(C.data)?A!==M&&(a.track({type:3,doc:C}),I=!0):this.ja(T,C)||(a.track({type:2,doc:C}),I=!0,(p&&this.Ua(C,p)>0||y&&this.Ua(C,y)<0)&&(f=!0)):!T&&C?(a.track({type:0,doc:C}),I=!0):T&&!C&&(a.track({type:1,doc:T}),I=!0,(p||y)&&(f=!0)),I&&(C?(u=u.add(C),l=M?l.add(v):l.delete(v)):(u=u.delete(v),l=l.delete(v)))}),this.query.limit!==null)for(;u.size>this.query.limit;){const v=this.query.limitType==="F"?u.last():u.first();u=u.delete(v.key),l=l.delete(v.key),a.track({type:1,doc:v})}return{Ka:u,za:a,ys:f,mutatedKeys:l}}ja(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,a,s){const l=this.Ka;this.Ka=e.Ka,this.mutatedKeys=e.mutatedKeys;const u=e.za.da();u.sort((v,E)=>function(C,A){const M=I=>{switch(I){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Se(20277,{Vt:I})}};return M(C)-M(A)}(v.type,E.type)||this.Ua(v.doc,E.doc)),this.Ha(a),s=s!=null&&s;const f=t&&!s?this.Ja():[],p=this.$a.size===0&&this.current&&!s?1:0,y=p!==this.Qa;return this.Qa=p,u.length!==0||y?{snapshot:new Go(this.query,e.Ka,l,u,e.mutatedKeys,p===0,y,!1,!!a&&a.resumeToken.approximateByteSize()>0),Ya:f}:{Ya:f}}ga(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ka:this.Ka,za:new pE,mutatedKeys:this.mutatedKeys,ys:!1},!1)):{Ya:[]}}Za(e){return!this.qa.has(e)&&!!this.Ka.has(e)&&!this.Ka.get(e).hasLocalMutations}Ha(e){e&&(e.addedDocuments.forEach(t=>this.qa=this.qa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.qa=this.qa.delete(t)),this.current=e.current)}Ja(){if(!this.current)return[];const e=this.$a;this.$a=He(),this.Ka.forEach(a=>{this.Za(a.key)&&(this.$a=this.$a.add(a.key))});const t=[];return e.forEach(a=>{this.$a.has(a)||t.push(new ST(a))}),this.$a.forEach(a=>{e.has(a)||t.push(new AT(a))}),t}Xa(e){this.qa=e.Ns,this.$a=He();const t=this.Ga(e.documents);return this.applyChanges(t,!0)}eu(){return Go.fromInitialDocuments(this.query,this.Ka,this.mutatedKeys,this.Qa===0,this.hasCachedResults)}}const cy="SyncEngine";class TO{constructor(e,t,a){this.query=e,this.targetId=t,this.view=a}}class wO{constructor(e){this.key=e,this.tu=!1}}class AO{constructor(e,t,a,s,l,u){this.localStore=e,this.remoteStore=t,this.eventManager=a,this.sharedClientState=s,this.currentUser=l,this.maxConcurrentLimboResolutions=u,this.nu={},this.ru=new Rs(f=>qx(f),Bh),this.iu=new Map,this.su=new Set,this.ou=new Et(Ee.comparator),this._u=new Map,this.au=new Zg,this.uu={},this.cu=new Map,this.lu=Ho.ir(),this.onlineState="Unknown",this.hu=void 0}get isPrimaryClient(){return this.hu===!0}}async function SO(n,e,t=!0){const a=OT(n);let s;const l=a.ru.get(e);return l?(a.sharedClientState.addLocalQueryTarget(l.targetId),s=l.view.eu()):s=await NT(a,e,t,!0),s}async function NO(n,e){const t=OT(n);await NT(t,e,!0,!1)}async function NT(n,e,t,a){const s=await YD(n.localStore,Hr(e)),l=s.targetId,u=n.sharedClientState.addLocalQueryTarget(l,t);let f;return a&&(f=await CO(n,e,l,u==="current",s.resumeToken)),n.isPrimaryClient&&t&&gT(n.remoteStore,s),f}async function CO(n,e,t,a,s){n.Pu=(E,T,C)=>async function(M,I,G,Q){let q=I.view.Ga(G);q.ys&&(q=await cE(M.localStore,I.query,!1).then(({documents:P})=>I.view.Ga(P,q)));const oe=Q&&Q.targetChanges.get(I.targetId),ce=Q&&Q.targetMismatches.get(I.targetId)!=null,pe=I.view.applyChanges(q,M.isPrimaryClient,oe,ce);return _E(M,I.targetId,pe.Ya),pe.snapshot}(n,E,T,C);const l=await cE(n.localStore,e,!0),u=new xO(e,l.Ns),f=u.Ga(l.documents),p=Jc.createSynthesizedTargetChangeForCurrentChange(t,a&&n.onlineState!=="Offline",s),y=u.applyChanges(f,n.isPrimaryClient,p);_E(n,t,y.Ya);const v=new TO(e,t,u);return n.ru.set(e,v),n.iu.has(t)?n.iu.get(t).push(e):n.iu.set(t,[e]),y.snapshot}async function RO(n,e,t){const a=De(n),s=a.ru.get(e),l=a.iu.get(s.targetId);if(l.length>1)return a.iu.set(s.targetId,l.filter(u=>!Bh(u,e))),void a.ru.delete(e);a.isPrimaryClient?(a.sharedClientState.removeLocalQueryTarget(s.targetId),a.sharedClientState.isActiveQueryTarget(s.targetId)||await og(a.localStore,s.targetId,!1).then(()=>{a.sharedClientState.clearQueryState(s.targetId),t&&ny(a.remoteStore,s.targetId),ug(a,s.targetId)}).catch(el)):(ug(a,s.targetId),await og(a.localStore,s.targetId,!0))}async function IO(n,e){const t=De(n),a=t.ru.get(e),s=t.iu.get(a.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(a.targetId),ny(t.remoteStore,a.targetId))}async function DO(n,e,t){const a=LO(n);try{const s=await function(u,f){const p=De(u),y=zt.now(),v=f.reduce((C,A)=>C.add(A.key),He());let E,T;return p.persistence.runTransaction("Locally write mutations","readwrite",C=>{let A=Na(),M=He();return p.Cs.getEntries(C,v).next(I=>{A=I,A.forEach((G,Q)=>{Q.isValidDocument()||(M=M.add(G))})}).next(()=>p.localDocuments.getOverlayedDocuments(C,A)).next(I=>{E=I;const G=[];for(const Q of f){const q=Y4(Q,E.get(Q.key).overlayedDocument);q!=null&&G.push(new Di(Q.key,q,Px(q.value.mapValue),rr.exists(!0)))}return p.mutationQueue.addMutationBatch(C,y,G,f)}).next(I=>{T=I;const G=I.applyToLocalDocumentSet(E,M);return p.documentOverlayCache.saveOverlays(C,I.batchId,G)})}).then(()=>({batchId:T.batchId,changes:Gx(E)}))}(a.localStore,e);a.sharedClientState.addPendingMutation(s.batchId),function(u,f,p){let y=u.uu[u.currentUser.toKey()];y||(y=new Et(Ve)),y=y.insert(f,p),u.uu[u.currentUser.toKey()]=y}(a,s.batchId,t),await tu(a,s.changes),await Kh(a.remoteStore)}catch(s){const l=oy(s,"Failed to persist write");t.reject(l)}}async function CT(n,e){const t=De(n);try{const a=await HD(t.localStore,e);e.targetChanges.forEach((s,l)=>{const u=t._u.get(l);u&&(Je(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?u.tu=!0:s.modifiedDocuments.size>0?Je(u.tu,14607):s.removedDocuments.size>0&&(Je(u.tu,42227),u.tu=!1))}),await tu(t,a,e)}catch(a){await el(a)}}function vE(n,e,t){const a=De(n);if(a.isPrimaryClient&&t===0||!a.isPrimaryClient&&t===1){const s=[];a.ru.forEach((l,u)=>{const f=u.view.ga(e);f.snapshot&&s.push(f.snapshot)}),function(u,f){const p=De(u);p.onlineState=f;let y=!1;p.queries.forEach((v,E)=>{for(const T of E.Ra)T.ga(f)&&(y=!0)}),y&&ly(p)}(a.eventManager,e),s.length&&a.nu.Q_(s),a.onlineState=e,a.isPrimaryClient&&a.sharedClientState.setOnlineState(e)}}async function OO(n,e,t){const a=De(n);a.sharedClientState.updateQueryState(e,"rejected",t);const s=a._u.get(e),l=s&&s.key;if(l){let u=new Et(Ee.comparator);u=u.insert(l,mn.newNoDocument(l,Re.min()));const f=He().add(l),p=new Gh(Re.min(),new Map,new Et(Ve),u,f);await CT(a,p),a.ou=a.ou.remove(l),a._u.delete(e),uy(a)}else await og(a.localStore,e,!1).then(()=>ug(a,e,t)).catch(el)}async function jO(n,e){const t=De(n),a=e.batch.batchId;try{const s=await FD(t.localStore,e);IT(t,a,null),RT(t,a),t.sharedClientState.updateMutationState(a,"acknowledged"),await tu(t,s)}catch(s){await el(s)}}async function PO(n,e,t){const a=De(n);try{const s=await function(u,f){const p=De(u);return p.persistence.runTransaction("Reject batch","readwrite-primary",y=>{let v;return p.mutationQueue.lookupMutationBatch(y,f).next(E=>(Je(E!==null,37113),v=E.keys(),p.mutationQueue.removeMutationBatch(y,E))).next(()=>p.mutationQueue.performConsistencyCheck(y)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(y,v,f)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,v)).next(()=>p.localDocuments.getDocuments(y,v))})}(a.localStore,e);IT(a,e,t),RT(a,e),a.sharedClientState.updateMutationState(e,"rejected",t),await tu(a,s)}catch(s){await el(s)}}function RT(n,e){(n.cu.get(e)||[]).forEach(t=>{t.resolve()}),n.cu.delete(e)}function IT(n,e,t){const a=De(n);let s=a.uu[a.currentUser.toKey()];if(s){const l=s.get(e);l&&(t?l.reject(t):l.resolve(),s=s.remove(e)),a.uu[a.currentUser.toKey()]=s}}function ug(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const a of n.iu.get(e))n.ru.delete(a),t&&n.nu.Tu(a,t);n.iu.delete(e),n.isPrimaryClient&&n.au.Ur(e).forEach(a=>{n.au.containsKey(a)||DT(n,a)})}function DT(n,e){n.su.delete(e.path.canonicalString());const t=n.ou.get(e);t!==null&&(ny(n.remoteStore,t),n.ou=n.ou.remove(e),n._u.delete(t),uy(n))}function _E(n,e,t){for(const a of t)a instanceof AT?(n.au.addReference(a.key,e),MO(n,a)):a instanceof ST?(me(cy,"Document no longer in limbo: "+a.key),n.au.removeReference(a.key,e),n.au.containsKey(a.key)||DT(n,a.key)):Se(19791,{Iu:a})}function MO(n,e){const t=e.key,a=t.path.canonicalString();n.ou.get(t)||n.su.has(a)||(me(cy,"New document in limbo: "+t),n.su.add(a),uy(n))}function uy(n){for(;n.su.size>0&&n.ou.size<n.maxConcurrentLimboResolutions;){const e=n.su.values().next().value;n.su.delete(e);const t=new Ee(mt.fromString(e)),a=n.lu.next();n._u.set(a,new wO(t)),n.ou=n.ou.insert(t,a),gT(n.remoteStore,new mi(Hr($g(t.path)),a,"TargetPurposeLimboResolution",Lh.le))}}async function tu(n,e,t){const a=De(n),s=[],l=[],u=[];a.ru.isEmpty()||(a.ru.forEach((f,p)=>{u.push(a.Pu(p,e,t).then(y=>{var v;if((y||t)&&a.isPrimaryClient){const E=y?!y.fromCache:(v=t==null?void 0:t.targetChanges.get(p.targetId))===null||v===void 0?void 0:v.current;a.sharedClientState.updateQueryState(p.targetId,E?"current":"not-current")}if(y){s.push(y);const E=ey.Ps(p.targetId,y);l.push(E)}}))}),await Promise.all(u),a.nu.Q_(s),await async function(p,y){const v=De(p);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",E=>ae.forEach(y,T=>ae.forEach(T.ls,C=>v.persistence.referenceDelegate.addReference(E,T.targetId,C)).next(()=>ae.forEach(T.hs,C=>v.persistence.referenceDelegate.removeReference(E,T.targetId,C)))))}catch(E){if(!tl(E))throw E;me(ty,"Failed to update sequence numbers: "+E)}for(const E of y){const T=E.targetId;if(!E.fromCache){const C=v.Ss.get(T),A=C.snapshotVersion,M=C.withLastLimboFreeSnapshotVersion(A);v.Ss=v.Ss.insert(T,M)}}}(a.localStore,l))}async function kO(n,e){const t=De(n);if(!t.currentUser.isEqual(e)){me(cy,"User change. New user:",e.toKey());const a=await hT(t.localStore,e);t.currentUser=e,function(l,u){l.cu.forEach(f=>{f.forEach(p=>{p.reject(new fe(ne.CANCELLED,u))})}),l.cu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,a.removedBatchIds,a.addedBatchIds),await tu(t,a.Ms)}}function VO(n,e){const t=De(n),a=t._u.get(e);if(a&&a.tu)return He().add(a.key);{let s=He();const l=t.iu.get(e);if(!l)return s;for(const u of l){const f=t.ru.get(u);s=s.unionWith(f.view.Wa)}return s}}function OT(n){const e=De(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=CT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=VO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=OO.bind(null,e),e.nu.Q_=bO.bind(null,e.eventManager),e.nu.Tu=EO.bind(null,e.eventManager),e}function LO(n){const e=De(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=jO.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=PO.bind(null,e),e}class Eh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=$h(e.databaseInfo.databaseId),this.sharedClientState=this.Au(e),this.persistence=this.Ru(e),await this.persistence.start(),this.localStore=this.Vu(e),this.gcScheduler=this.mu(e,this.localStore),this.indexBackfillerScheduler=this.fu(e,this.localStore)}mu(e,t){return null}fu(e,t){return null}Vu(e){return qD(this.persistence,new UD,e.initialUser,this.serializer)}Ru(e){return new dT(Jg.Ei,this.serializer)}Au(e){return new QD}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Eh.provider={build:()=>new Eh};class UO extends Eh{constructor(e){super(),this.cacheSizeBytes=e}mu(e,t){Je(this.persistence.referenceDelegate instanceof _h,46915);const a=this.persistence.referenceDelegate.garbageCollector;return new wD(a,e.asyncQueue,t)}Ru(e){const t=this.cacheSizeBytes!==void 0?Nn.withCacheSize(this.cacheSizeBytes):Nn.DEFAULT;return new dT(a=>_h.Ei(a,t),this.serializer)}}class dg{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=a=>vE(this.syncEngine,a,1),this.remoteStore.remoteSyncer.handleCredentialChange=kO.bind(null,this.syncEngine),await yO(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new _O}()}createDatastore(e){const t=$h(e.databaseInfo.databaseId),a=function(l){return new eO(l)}(e.databaseInfo);return function(l,u,f,p){return new aO(l,u,f,p)}(e.authCredentials,e.appCheckCredentials,a,t)}createRemoteStore(e){return function(a,s,l,u,f){return new sO(a,s,l,u,f)}(this.localStore,this.datastore,e.asyncQueue,t=>vE(this.syncEngine,t,0),function(){return hE.C()?new hE:new WD}())}createSyncEngine(e,t){return function(s,l,u,f,p,y,v){const E=new AO(s,l,u,f,p,y);return v&&(E.hu=!0),E}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(s){const l=De(s);me(As,"RemoteStore shutting down."),l.aa.add(5),await eu(l),l.ca.shutdown(),l.la.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}dg.provider={build:()=>new dg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jT{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.pu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.pu(this.observer.error,e):Sa("Uncaught Error in snapshot listener:",e.toString()))}yu(){this.muted=!0}pu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Si="FirestoreClient";class zO{constructor(e,t,a,s,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=a,this.databaseInfo=s,this.user=fn.UNAUTHENTICATED,this.clientId=wx.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(a,async u=>{me(Si,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u}),this.appCheckCredentials.start(a,u=>(me(Si,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new xa;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const a=oy(t,"Failed to shutdown persistence");e.reject(a)}}),e.promise}}async function jp(n,e){n.asyncQueue.verifyOperationInProgress(),me(Si,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let a=t.initialUser;n.setCredentialChangeListener(async s=>{a.isEqual(s)||(await hT(e.localStore,s),a=s)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function bE(n,e){n.asyncQueue.verifyOperationInProgress();const t=await BO(n);me(Si,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(a=>mE(e.remoteStore,a)),n.setAppCheckTokenChangeListener((a,s)=>mE(e.remoteStore,s)),n._onlineComponents=e}async function BO(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){me(Si,"Using user provided OfflineComponentProvider");try{await jp(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(s){return s.name==="FirebaseError"?s.code===ne.FAILED_PRECONDITION||s.code===ne.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(t))throw t;zo("Error using user provided cache. Falling back to memory cache: "+t),await jp(n,new Eh)}}else me(Si,"Using default OfflineComponentProvider"),await jp(n,new UO(void 0));return n._offlineComponents}async function PT(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(me(Si,"Using user provided OnlineComponentProvider"),await bE(n,n._uninitializedComponentsProvider._online)):(me(Si,"Using default OnlineComponentProvider"),await bE(n,new dg))),n._onlineComponents}function qO(n){return PT(n).then(e=>e.syncEngine)}async function MT(n){const e=await PT(n),t=e.eventManager;return t.onListen=SO.bind(null,e.syncEngine),t.onUnlisten=RO.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=NO.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=IO.bind(null,e.syncEngine),t}function FO(n,e,t={}){const a=new xa;return n.asyncQueue.enqueueAndForget(async()=>function(l,u,f,p,y){const v=new jT({next:T=>{v.yu(),u.enqueueAndForget(()=>TT(l,E));const C=T.docs.has(f);!C&&T.fromCache?y.reject(new fe(ne.UNAVAILABLE,"Failed to get document because the client is offline.")):C&&T.fromCache&&p&&p.source==="server"?y.reject(new fe(ne.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(T)},error:T=>y.reject(T)}),E=new wT($g(f.path),v,{includeMetadataChanges:!0,Fa:!0});return xT(l,E)}(await MT(n),n.asyncQueue,e,t,a)),a.promise}function HO(n,e,t={}){const a=new xa;return n.asyncQueue.enqueueAndForget(async()=>function(l,u,f,p,y){const v=new jT({next:T=>{v.yu(),u.enqueueAndForget(()=>TT(l,E)),T.fromCache&&p.source==="server"?y.reject(new fe(ne.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(T)},error:T=>y.reject(T)}),E=new wT(f,v,{includeMetadataChanges:!0,Fa:!0});return xT(l,E)}(await MT(n),n.asyncQueue,e,t,a)),a.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kT(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EE=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VT(n,e,t){if(!t)throw new fe(ne.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function GO(n,e,t,a){if(e===!0&&a===!0)throw new fe(ne.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function xE(n){if(!Ee.isDocumentKey(n))throw new fe(ne.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function TE(n){if(Ee.isDocumentKey(n))throw new fe(ne.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Qh(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(a){return a.constructor?a.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Se(12329,{type:typeof n})}function gr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new fe(ne.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Qh(n);throw new fe(ne.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function $O(n,e){if(e<=0)throw new fe(ne.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LT="firestore.googleapis.com",wE=!0;class AE{constructor(e){var t,a;if(e.host===void 0){if(e.ssl!==void 0)throw new fe(ne.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=LT,this.ssl=wE}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:wE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=uT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<xD)throw new fe(ne.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}GO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=kT((a=e.experimentalLongPollingOptions)!==null&&a!==void 0?a:{}),function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new fe(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new fe(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new fe(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(a,s){return a.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Wh{constructor(e,t,a,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=a,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new AE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new fe(ne.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new fe(ne.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new AE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(a){if(!a)return new ZI;switch(a.type){case"firstParty":return new n4(a.sessionIndex||"0",a.iamToken||null,a.authTokenFactory||null);case"provider":return a.client;default:throw new fe(ne.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,Ph("Firestore",this._settings.isUsingEmulator),this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const a=EE.get(t);a&&(me("ComponentProvider","Removing Datastore"),EE.delete(t),a.terminate())}(this),Promise.resolve()}}function YO(n,e,t,a={}){var s;n=gr(n,Wh);const l=Gc(e),u=n._getSettings(),f=Object.assign(Object.assign({},u),{emulatorOptions:n._getEmulatorOptions()}),p=`${e}:${t}`;u.host!==LT&&u.host!==p&&zo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const y=Object.assign(Object.assign({},u),{host:p,ssl:l,emulatorOptions:a});if(!bs(y,f)&&(n._setSettings(y),l&&(C1(`https://${p}`),Ph("Firestore",!0)),a.mockUserToken)){let v,E;if(typeof a.mockUserToken=="string")v=a.mockUserToken,E=fn.MOCK_USER;else{v=sC(a.mockUserToken,(s=n._app)===null||s===void 0?void 0:s.options.projectId);const T=a.mockUserToken.sub||a.mockUserToken.user_id;if(!T)throw new fe(ne.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new fn(T)}n._authCredentials=new JI(new xx(v,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi{constructor(e,t,a){this.converter=t,this._query=a,this.type="query",this.firestore=e}withConverter(e){return new Oi(this.firestore,e,this._query)}}class xn{constructor(e,t,a){this.converter=t,this._key=a,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new _i(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new xn(this.firestore,e,this._key)}}class _i extends Oi{constructor(e,t,a){super(e,t,$g(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new xn(this.firestore,null,new Ee(e))}withConverter(e){return new _i(this.firestore,e,this._path)}}function ir(n,e,...t){if(n=qt(n),VT("collection","path",e),n instanceof Wh){const a=mt.fromString(e,...t);return TE(a),new _i(n,null,a)}{if(!(n instanceof xn||n instanceof _i))throw new fe(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=n._path.child(mt.fromString(e,...t));return TE(a),new _i(n.firestore,null,a)}}function ft(n,e,...t){if(n=qt(n),arguments.length===1&&(e=wx.newId()),VT("doc","path",e),n instanceof Wh){const a=mt.fromString(e,...t);return xE(a),new xn(n,null,new Ee(a))}{if(!(n instanceof xn||n instanceof _i))throw new fe(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=n._path.child(mt.fromString(e,...t));return xE(a),new xn(n.firestore,n instanceof _i?n.converter:null,new Ee(a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SE="AsyncQueue";class NE{constructor(e=Promise.resolve()){this.Qu=[],this.$u=!1,this.Uu=[],this.Ku=null,this.Wu=!1,this.Gu=!1,this.zu=[],this.y_=new mT(this,"async_queue_retry"),this.ju=()=>{const a=Op();a&&me(SE,"Visibility state changed to "+a.visibilityState),this.y_.A_()},this.Hu=e;const t=Op();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.ju)}get isShuttingDown(){return this.$u}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ju(),this.Yu(e)}enterRestrictedMode(e){if(!this.$u){this.$u=!0,this.Gu=e||!1;const t=Op();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.ju)}}enqueue(e){if(this.Ju(),this.$u)return new Promise(()=>{});const t=new xa;return this.Yu(()=>this.$u&&this.Gu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qu.push(e),this.Zu()))}async Zu(){if(this.Qu.length!==0){try{await this.Qu[0](),this.Qu.shift(),this.y_.reset()}catch(e){if(!tl(e))throw e;me(SE,"Operation failed with retryable error: "+e)}this.Qu.length>0&&this.y_.E_(()=>this.Zu())}}Yu(e){const t=this.Hu.then(()=>(this.Wu=!0,e().catch(a=>{throw this.Ku=a,this.Wu=!1,Sa("INTERNAL UNHANDLED ERROR: ",CE(a)),a}).then(a=>(this.Wu=!1,a))));return this.Hu=t,t}enqueueAfterDelay(e,t,a){this.Ju(),this.zu.indexOf(e)>-1&&(t=0);const s=sy.createAndSchedule(this,e,t,a,l=>this.Xu(l));return this.Uu.push(s),s}Ju(){this.Ku&&Se(47125,{ec:CE(this.Ku)})}verifyOperationInProgress(){}async tc(){let e;do e=this.Hu,await e;while(e!==this.Hu)}nc(e){for(const t of this.Uu)if(t.timerId===e)return!0;return!1}rc(e){return this.tc().then(()=>{this.Uu.sort((t,a)=>t.targetTimeMs-a.targetTimeMs);for(const t of this.Uu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.tc()})}sc(e){this.zu.push(e)}Xu(e){const t=this.Uu.indexOf(e);this.Uu.splice(t,1)}}function CE(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Ds extends Wh{constructor(e,t,a,s){super(e,t,a,s),this.type="firestore",this._queue=new NE,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new NE(e),this._firestoreClient=void 0,await e}}}function KO(n,e){const t=typeof n=="object"?n:O1(),a=typeof n=="string"?n:fh,s=Ig(t,"firestore").getImmediate({identifier:a});if(!s._initialized){const l=aC("firestore");l&&YO(s,...l)}return s}function dy(n){if(n._terminated)throw new fe(ne.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||QO(n),n._firestoreClient}function QO(n){var e,t,a;const s=n._freezeSettings(),l=function(f,p,y,v){return new y4(f,p,y,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,kT(v.experimentalLongPollingOptions),v.useFetchStreams,v.isUsingEmulator)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,s);n._componentsProvider||!((t=s.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((a=s.localCache)===null||a===void 0)&&a._onlineComponentProvider)&&(n._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),n._firestoreClient=new zO(n._authCredentials,n._appCheckCredentials,n._queue,l,n._componentsProvider&&function(f){const p=f==null?void 0:f._online.build();return{_offline:f==null?void 0:f._offline.build(p),_online:p}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o{constructor(e){this._byteString=e}static fromBase64String(e){try{return new $o(on.fromBase64String(e))}catch(t){throw new fe(ne.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new $o(on.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new fe(ne.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new sn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zh{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hy{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new fe(ne.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new fe(ne.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ve(this._lat,e._lat)||Ve(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fy{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(a,s){if(a.length!==s.length)return!1;for(let l=0;l<a.length;++l)if(a[l]!==s[l])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WO=/^__.*__$/;class XO{constructor(e,t,a){this.data=e,this.fieldMask=t,this.fieldTransforms=a}toMutation(e,t){return this.fieldMask!==null?new Di(e,this.data,this.fieldMask,t,this.fieldTransforms):new Zc(e,this.data,t,this.fieldTransforms)}}class UT{constructor(e,t,a){this.data=e,this.fieldMask=t,this.fieldTransforms=a}toMutation(e,t){return new Di(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function zT(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Se(40011,{oc:n})}}class my{constructor(e,t,a,s,l,u){this.settings=e,this.databaseId=t,this.serializer=a,this.ignoreUndefinedProperties=s,l===void 0&&this._c(),this.fieldTransforms=l||[],this.fieldMask=u||[]}get path(){return this.settings.path}get oc(){return this.settings.oc}ac(e){return new my(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}uc(e){var t;const a=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.ac({path:a,cc:!1});return s.lc(e),s}hc(e){var t;const a=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.ac({path:a,cc:!1});return s._c(),s}Pc(e){return this.ac({path:void 0,cc:!0})}Tc(e){return xh(e,this.settings.methodName,this.settings.Ic||!1,this.path,this.settings.Ec)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}_c(){if(this.path)for(let e=0;e<this.path.length;e++)this.lc(this.path.get(e))}lc(e){if(e.length===0)throw this.Tc("Document fields must not be empty");if(zT(this.oc)&&WO.test(e))throw this.Tc('Document fields cannot begin and end with "__"')}}class ZO{constructor(e,t,a){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=a||$h(e)}dc(e,t,a,s=!1){return new my({oc:e,methodName:t,Ec:a,path:sn.emptyPath(),cc:!1,Ic:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Jh(n){const e=n._freezeSettings(),t=$h(n._databaseId);return new ZO(n._databaseId,!!e.ignoreUndefinedProperties,t)}function BT(n,e,t,a,s,l={}){const u=n.dc(l.merge||l.mergeFields?2:0,e,t,s);gy("Data must be an object, but it was:",u,a);const f=qT(a,u);let p,y;if(l.merge)p=new Bn(u.fieldMask),y=u.fieldTransforms;else if(l.mergeFields){const v=[];for(const E of l.mergeFields){const T=hg(e,E,t);if(!u.contains(T))throw new fe(ne.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);HT(v,T)||v.push(T)}p=new Bn(v),y=u.fieldTransforms.filter(E=>p.covers(E.field))}else p=null,y=u.fieldTransforms;return new XO(new Cn(f),p,y)}class ef extends Zh{_toFieldTransform(e){if(e.oc!==2)throw e.oc===1?e.Tc(`${this._methodName}() can only appear at the top level of your update data`):e.Tc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ef}}class py extends Zh{_toFieldTransform(e){return new F4(e.path,new Lc)}isEqual(e){return e instanceof py}}function JO(n,e,t,a){const s=n.dc(1,e,t);gy("Data must be an object, but it was:",s,a);const l=[],u=Cn.empty();Ii(a,(p,y)=>{const v=yy(e,p,t);y=qt(y);const E=s.hc(v);if(y instanceof ef)l.push(v);else{const T=nu(y,E);T!=null&&(l.push(v),u.set(v,T))}});const f=new Bn(l);return new UT(u,f,s.fieldTransforms)}function ej(n,e,t,a,s,l){const u=n.dc(1,e,t),f=[hg(e,a,t)],p=[s];if(l.length%2!=0)throw new fe(ne.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<l.length;T+=2)f.push(hg(e,l[T])),p.push(l[T+1]);const y=[],v=Cn.empty();for(let T=f.length-1;T>=0;--T)if(!HT(y,f[T])){const C=f[T];let A=p[T];A=qt(A);const M=u.hc(C);if(A instanceof ef)y.push(C);else{const I=nu(A,M);I!=null&&(y.push(C),v.set(C,I))}}const E=new Bn(y);return new UT(v,E,u.fieldTransforms)}function tj(n,e,t,a=!1){return nu(t,n.dc(a?4:3,e))}function nu(n,e){if(FT(n=qt(n)))return gy("Unsupported field value:",e,n),qT(n,e);if(n instanceof Zh)return function(a,s){if(!zT(s.oc))throw s.Tc(`${a._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Tc(`${a._methodName}() is not currently supported inside arrays`);const l=a._toFieldTransform(s);l&&s.fieldTransforms.push(l)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.cc&&e.oc!==4)throw e.Tc("Nested arrays are not supported");return function(a,s){const l=[];let u=0;for(const f of a){let p=nu(f,s.Pc(u));p==null&&(p={nullValue:"NULL_VALUE"}),l.push(p),u++}return{arrayValue:{values:l}}}(n,e)}return function(a,s){if((a=qt(a))===null)return{nullValue:"NULL_VALUE"};if(typeof a=="number")return z4(s.serializer,a);if(typeof a=="boolean")return{booleanValue:a};if(typeof a=="string")return{stringValue:a};if(a instanceof Date){const l=zt.fromDate(a);return{timestampValue:vh(s.serializer,l)}}if(a instanceof zt){const l=new zt(a.seconds,1e3*Math.floor(a.nanoseconds/1e3));return{timestampValue:vh(s.serializer,l)}}if(a instanceof hy)return{geoPointValue:{latitude:a.latitude,longitude:a.longitude}};if(a instanceof $o)return{bytesValue:rT(s.serializer,a._byteString)};if(a instanceof xn){const l=s.databaseId,u=a.firestore._databaseId;if(!u.isEqual(l))throw s.Tc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Xg(a.firestore._databaseId||s.databaseId,a._key.path)}}if(a instanceof fy)return function(u,f){return{mapValue:{fields:{[Ox]:{stringValue:jx},[mh]:{arrayValue:{values:u.toArray().map(y=>{if(typeof y!="number")throw f.Tc("VectorValues must only contain numeric values.");return Yg(f.serializer,y)})}}}}}}(a,s);throw s.Tc(`Unsupported field value: ${Qh(a)}`)}(n,e)}function qT(n,e){const t={};return Sx(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ii(n,(a,s)=>{const l=nu(s,e.uc(a));l!=null&&(t[a]=l)}),{mapValue:{fields:t}}}function FT(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof zt||n instanceof hy||n instanceof $o||n instanceof xn||n instanceof Zh||n instanceof fy)}function gy(n,e,t){if(!FT(t)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(t)){const a=Qh(t);throw a==="an object"?e.Tc(n+" a custom object"):e.Tc(n+" "+a)}}function hg(n,e,t){if((e=qt(e))instanceof Xh)return e._internalPath;if(typeof e=="string")return yy(n,e);throw xh("Field path arguments must be of type string or ",n,!1,void 0,t)}const nj=new RegExp("[~\\*/\\[\\]]");function yy(n,e,t){if(e.search(nj)>=0)throw xh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Xh(...e.split("."))._internalPath}catch{throw xh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function xh(n,e,t,a,s){const l=a&&!a.isEmpty(),u=s!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let p="";return(l||u)&&(p+=" (found",l&&(p+=` in field ${a}`),u&&(p+=` in document ${s}`),p+=")"),new fe(ne.INVALID_ARGUMENT,f+n+p)}function HT(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GT{constructor(e,t,a,s,l){this._firestore=e,this._userDataWriter=t,this._key=a,this._document=s,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new xn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new rj(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(tf("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class rj extends GT{data(){return super.data()}}function tf(n,e){return typeof e=="string"?yy(n,e):e instanceof Xh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aj(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new fe(ne.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class vy{}class _y extends vy{}function yr(n,e,...t){let a=[];e instanceof vy&&a.push(e),a=a.concat(t),function(l){const u=l.filter(p=>p instanceof by).length,f=l.filter(p=>p instanceof nf).length;if(u>1||u>0&&f>0)throw new fe(ne.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(a);for(const s of a)n=s._apply(n);return n}class nf extends _y{constructor(e,t,a){super(),this._field=e,this._op=t,this._value=a,this.type="where"}static _create(e,t,a){return new nf(e,t,a)}_apply(e){const t=this._parse(e);return $T(e._query,t),new Oi(e.firestore,e.converter,ng(e._query,t))}_parse(e){const t=Jh(e.firestore);return function(l,u,f,p,y,v,E){let T;if(y.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new fe(ne.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){IE(E,v);const A=[];for(const M of E)A.push(RE(p,l,M));T={arrayValue:{values:A}}}else T=RE(p,l,E)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||IE(E,v),T=tj(f,u,E,v==="in"||v==="not-in");return Pt.create(y,v,T)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Qt(n,e,t){const a=e,s=tf("where",n);return nf._create(s,a,t)}class by extends vy{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new by(e,t)}_parse(e){const t=this._queryConstraints.map(a=>a._parse(e)).filter(a=>a.getFilters().length>0);return t.length===1?t[0]:pr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(s,l){let u=s;const f=l.getFlattenedFilters();for(const p of f)$T(u,p),u=ng(u,p)}(e._query,t),new Oi(e.firestore,e.converter,ng(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Ey extends _y{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Ey(e,t)}_apply(e){const t=function(s,l,u){if(s.startAt!==null)throw new fe(ne.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new fe(ne.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Vc(l,u)}(e._query,this._field,this._direction);return new Oi(e.firestore,e.converter,function(s,l){const u=s.explicitOrderBy.concat([l]);return new nl(s.path,s.collectionGroup,u,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,t))}}function vr(n,e="asc"){const t=e,a=tf("orderBy",n);return Ey._create(a,t)}class xy extends _y{constructor(e,t,a){super(),this.type=e,this._limit=t,this._limitType=a}static _create(e,t,a){return new xy(e,t,a)}_apply(e){return new Oi(e.firestore,e.converter,gh(e._query,this._limit,this._limitType))}}function Ni(n){return $O("limit",n),xy._create("limit",n,"F")}function RE(n,e,t){if(typeof(t=qt(t))=="string"){if(t==="")throw new fe(ne.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Bx(e)&&t.indexOf("/")!==-1)throw new fe(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const a=e.path.child(mt.fromString(t));if(!Ee.isDocumentKey(a))throw new fe(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${a}' is not because it has an odd number of segments (${a.length}).`);return Hb(n,new Ee(a))}if(t instanceof xn)return Hb(n,t._key);throw new fe(ne.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Qh(t)}.`)}function IE(n,e){if(!Array.isArray(n)||n.length===0)throw new fe(ne.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function $T(n,e){const t=function(s,l){for(const u of s)for(const f of u.getFlattenedFilters())if(l.indexOf(f.op)>=0)return f.op;return null}(n.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new fe(ne.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new fe(ne.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class ij{convertValue(e,t="none"){switch(wi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ct(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ti(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Se(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const a={};return Ii(e,(s,l)=>{a[s]=this.convertValue(l,t)}),a}convertVectorValue(e){var t,a,s;const l=(s=(a=(t=e.fields)===null||t===void 0?void 0:t[mh].arrayValue)===null||a===void 0?void 0:a.values)===null||s===void 0?void 0:s.map(u=>Ct(u.doubleValue));return new fy(l)}convertGeoPoint(e){return new hy(Ct(e.latitude),Ct(e.longitude))}convertArray(e,t){return(e.values||[]).map(a=>this.convertValue(a,t))}convertServerTimestamp(e,t){switch(t){case"previous":const a=zh(e);return a==null?null:this.convertValue(a,t);case"estimate":return this.convertTimestamp(Pc(e));default:return null}}convertTimestamp(e){const t=xi(e);return new zt(t.seconds,t.nanos)}convertDocumentKey(e,t){const a=mt.fromString(e);Je(cT(a),9688,{name:e});const s=new Mc(a.get(1),a.get(3)),l=new Ee(a.popFirst(5));return s.isEqual(t)||Sa(`Document ${l} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YT(n,e,t){let a;return a=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class KT extends GT{constructor(e,t,a,s,l,u){super(e,t,a,s,u),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Xd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const a=this._document.data.field(tf("DocumentSnapshot.get",e));if(a!==null)return this._userDataWriter.convertValue(a,t.serverTimestamps)}}}class Xd extends KT{data(e={}){return super.data(e)}}class sj{constructor(e,t,a,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Tc(s.hasPendingWrites,s.fromCache),this.query=a}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(a=>{e.call(t,new Xd(this._firestore,this._userDataWriter,a.key,a,new Tc(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new fe(ne.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,l){if(s._snapshot.oldDocs.isEmpty()){let u=0;return s._snapshot.docChanges.map(f=>{const p=new Xd(s._firestore,s._userDataWriter,f.doc.key,f.doc,new Tc(s._snapshot.mutatedKeys.has(f.doc.key),s._snapshot.fromCache),s.query.converter);return f.doc,{type:"added",doc:p,oldIndex:-1,newIndex:u++}})}{let u=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(f=>l||f.type!==3).map(f=>{const p=new Xd(s._firestore,s._userDataWriter,f.doc.key,f.doc,new Tc(s._snapshot.mutatedKeys.has(f.doc.key),s._snapshot.fromCache),s.query.converter);let y=-1,v=-1;return f.type!==0&&(y=u.indexOf(f.doc.key),u=u.delete(f.doc.key)),f.type!==1&&(u=u.add(f.doc),v=u.indexOf(f.doc.key)),{type:oj(f.type),doc:p,oldIndex:y,newIndex:v}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function oj(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Se(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ln(n){n=gr(n,xn);const e=gr(n.firestore,Ds);return FO(dy(e),n._key).then(t=>uj(e,n,t))}class QT extends ij{constructor(e){super(),this.firestore=e}convertBytes(e){return new $o(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new xn(this.firestore,null,t)}}function Da(n){n=gr(n,Oi);const e=gr(n.firestore,Ds),t=dy(e),a=new QT(e);return aj(n._query),HO(t,n._query).then(s=>new sj(e,a,n,s))}function Ty(n,e,t){n=gr(n,xn);const a=gr(n.firestore,Ds),s=YT(n.converter,e,t);return rf(a,[BT(Jh(a),"setDoc",n._key,s,n.converter!==null,t).toMutation(n._key,rr.none())])}function Dn(n,e,t,...a){n=gr(n,xn);const s=gr(n.firestore,Ds),l=Jh(s);let u;return u=typeof(e=qt(e))=="string"||e instanceof Xh?ej(l,"updateDoc",n._key,e,t,a):JO(l,"updateDoc",n._key,e),rf(s,[u.toMutation(n._key,rr.exists(!0))])}function lj(n){return rf(gr(n.firestore,Ds),[new Kg(n._key,rr.none())])}function cj(n,e){const t=gr(n.firestore,Ds),a=ft(n),s=YT(n.converter,e);return rf(t,[BT(Jh(n.firestore),"addDoc",a._key,s,n.converter!==null,{}).toMutation(a._key,rr.exists(!1))]).then(()=>a)}function rf(n,e){return function(a,s){const l=new xa;return a.asyncQueue.enqueueAndForget(async()=>DO(await qO(a),s,l)),l.promise}(dy(n),e)}function uj(n,e,t){const a=t.docs.get(e._key),s=new QT(n);return new KT(n,s,e._key,a,new Tc(t.hasPendingWrites,t.fromCache),e.converter)}function ut(){return new py("serverTimestamp")}(function(e,t=!0){(function(s){Jo=s})(Xo),Lo(new Es("firestore",(a,{instanceIdentifier:s,options:l})=>{const u=a.getProvider("app").getImmediate(),f=new Ds(new e4(a.getProvider("auth-internal")),new r4(u,a.getProvider("app-check-internal")),function(y,v){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new fe(ne.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Mc(y.options.projectId,v)}(u,s),u);return l=Object.assign({useFetchStreams:t},l),f._setSettings(l),f},"PUBLIC").setMultipleInstances(!0)),yi(Ob,jb,e),yi(Ob,jb,"esm2017")})();const dj={apiKey:"AIzaSyApEi7CgbADU0urEtkdRBheJubnyEA-qnw",authDomain:"acriventas-poc.firebaseapp.com",databaseURL:"https://acriventas-poc-default-rtdb.firebaseio.com",projectId:"acriventas-poc",storageBucket:"acriventas-poc.firebasestorage.app",messagingSenderId:"718850780341",appId:"1:718850780341:web:aec07ccdad37235dece2fc",measurementId:"G-0DGH1RQX2G"},WT=D1(dj),af=KI(WT),qe=KO(WT),hj=async(n,e,t,a="agent",s="")=>{try{if(!s.trim())throw new Error("La dirección de residencia es obligatoria");const u=(await I2(af,n,e)).user;return await j2(u,{displayName:t}),await Ty(ft(qe,"users",u.uid),{uid:u.uid,email:n,displayName:t,role:a,address:s.trim(),createdAt:ut(),lastLogin:ut(),updatedAt:ut()}),console.log("Usuario registrado exitosamente con dirección:",s.trim()),u}catch(l){throw console.error("Error al registrar usuario:",l),l}},fj=async(n,e)=>{try{const t=await D2(af,n,e);return await Ty(ft(qe,"users",t.user.uid),{lastLogin:ut(),updatedAt:ut()},{merge:!0}),t.user}catch(t){throw console.error("Error al iniciar sesión:",t),t}},mj=async()=>V2(af),pj=async n=>{try{const e=await ln(ft(qe,"users",n));return e.exists()?e.data():null}catch(e){throw console.error("Error al obtener datos del usuario:",e),e}},XT=V.createContext(),ru=()=>V.useContext(XT),gj=({children:n})=>{const[e,t]=V.useState(null),[a,s]=V.useState(null),[l,u]=V.useState(!0);V.useEffect(()=>k2(af,async y=>{if(t(y),y)try{const v=await pj(y.uid);s(v)}catch(v){console.error("Error al cargar detalles del usuario:",v)}else s(null);u(!1)}),[]);const f={currentUser:e,userDetails:a,isAdmin:(a==null?void 0:a.role)==="admin",isAgent:(a==null?void 0:a.role)==="agent",loading:l};return m.jsx(XT.Provider,{value:f,children:!l&&n})},yj=()=>{const[n,e]=V.useState(""),[t,a]=V.useState(""),[s,l]=V.useState(""),[u,f]=V.useState(!1),p=Tn(),y=async v=>{v.preventDefault();try{l(""),f(!0),await fj(n,t),p("/")}catch(E){l("Credenciales incorrectas. Intente nuevamente."),console.error(E)}finally{f(!1)}};return m.jsx("div",{className:"min-h-screen bg-gradient-to-b from-gray-800 to-gray-900 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:m.jsxs("div",{className:"max-w-md w-full space-y-8 bg-white p-10 rounded-xl shadow-2xl",children:[m.jsxs("div",{children:[m.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Sistema de Cobranza Adaptativa"}),m.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Inicie sesión para continuar"})]}),s&&m.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-md",role:"alert",children:m.jsx("span",{className:"block sm:inline",children:s})}),m.jsxs("form",{className:"mt-8 space-y-6",onSubmit:y,children:[m.jsxs("div",{className:"rounded-md space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{htmlFor:"email-address",className:"block text-sm font-medium text-gray-700",children:"Email"}),m.jsx("input",{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,className:"appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Correo electrónico",value:n,onChange:v=>e(v.target.value)})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Contraseña"}),m.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,className:"appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Contraseña",value:t,onChange:v=>a(v.target.value)})]})]}),m.jsx("div",{children:m.jsx("button",{type:"submit",disabled:u,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:u?"Iniciando sesión...":"Iniciar sesión"})}),m.jsx("div",{className:"text-center text-sm",children:m.jsx(Oh,{to:"/register",className:"font-medium text-primary-600 hover:text-primary-500",children:"¿No tiene cuenta? Regístrese aquí"})})]})]})})},vj=()=>{const[n,e]=V.useState({displayName:"",email:"",password:"",passwordConfirm:"",address:""}),[t,a]=V.useState(""),[s,l]=V.useState(!1),u=Tn(),f=y=>{const{name:v,value:E}=y.target;e(T=>({...T,[v]:E}))},p=async y=>{if(y.preventDefault(),n.password!==n.passwordConfirm)return a("Las contraseñas no coinciden");if(n.password.length<6)return a("La contraseña debe tener al menos 6 caracteres");if(!n.displayName.trim())return a("El nombre completo es obligatorio");if(!n.address.trim())return a("La dirección de residencia es obligatoria");try{a(""),l(!0),await hj(n.email,n.password,n.displayName,"agent",n.address),u("/")}catch(v){console.error("Error al registrar:",v),a(v.code==="auth/email-already-in-use"?"Este correo ya está registrado":v.message||"Error al crear la cuenta. Intente nuevamente.")}finally{l(!1)}};return m.jsx("div",{className:"min-h-screen bg-gradient-to-b from-gray-800 to-gray-900 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:m.jsxs("div",{className:"max-w-md w-full space-y-8 bg-white p-10 rounded-xl shadow-2xl",children:[m.jsxs("div",{children:[m.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Crear nueva cuenta"}),m.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Complete el formulario para registrarse"})]}),t&&m.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:m.jsx("span",{className:"block sm:inline",children:t})}),m.jsxs("form",{className:"mt-8 space-y-6",onSubmit:p,children:[m.jsxs("div",{className:"rounded-md shadow-sm space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{htmlFor:"displayName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre completo *"}),m.jsx("input",{id:"displayName",name:"displayName",type:"text",required:!0,className:"appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-primary-500 focus:border-primary-500 focus:z-10 sm:text-sm",placeholder:"Nombre completo",value:n.displayName,onChange:f})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"email-address",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email *"}),m.jsx("input",{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,className:"appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-primary-500 focus:border-primary-500 focus:z-10 sm:text-sm",placeholder:"Correo electrónico",value:n.email,onChange:f})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"address",className:"block text-sm font-medium text-gray-700 mb-1",children:"Dirección de residencia *"}),m.jsx("textarea",{id:"address",name:"address",rows:"3",required:!0,className:"appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-primary-500 focus:border-primary-500 focus:z-10 sm:text-sm resize-none",placeholder:"Ingrese su dirección completa de residencia",value:n.address,onChange:f}),m.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Incluya dirección completa: calle, número, barrio, ciudad"})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Contraseña *"}),m.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"new-password",required:!0,className:"appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-primary-500 focus:border-primary-500 focus:z-10 sm:text-sm",placeholder:"Contraseña (mínimo 6 caracteres)",value:n.password,onChange:f})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"passwordConfirm",className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirmar contraseña *"}),m.jsx("input",{id:"passwordConfirm",name:"passwordConfirm",type:"password",autoComplete:"new-password",required:!0,className:"appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-primary-500 focus:border-primary-500 focus:z-10 sm:text-sm",placeholder:"Confirmar contraseña",value:n.passwordConfirm,onChange:f})]})]}),m.jsx("div",{children:m.jsx("button",{type:"submit",disabled:s,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed",children:s?m.jsxs("span",{className:"flex items-center",children:[m.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[m.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),m.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Creando cuenta..."]}):"Registrarse"})}),m.jsx("div",{className:"text-center",children:m.jsx(Oh,{to:"/login",className:"text-sm text-primary-600 hover:text-primary-500",children:"¿Ya tiene una cuenta? Inicie sesión"})})]}),m.jsxs("div",{className:"mt-4 text-xs text-gray-500 text-center",children:[m.jsx("p",{className:"mb-2",children:"Al registrarse, usted acepta nuestros términos y condiciones."}),m.jsx("p",{children:"Los campos marcados con * son obligatorios."})]})]})})};var ZT={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},DE=vs.createContext&&vs.createContext(ZT),_j=["attr","size","title"];function bj(n,e){if(n==null)return{};var t=Ej(n,e),a,s;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(n);for(s=0;s<l.length;s++)a=l[s],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(n,a)&&(t[a]=n[a])}return t}function Ej(n,e){if(n==null)return{};var t={};for(var a in n)if(Object.prototype.hasOwnProperty.call(n,a)){if(e.indexOf(a)>=0)continue;t[a]=n[a]}return t}function Th(){return Th=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(n[a]=t[a])}return n},Th.apply(this,arguments)}function OE(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);e&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,a)}return t}function wh(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?OE(Object(t),!0).forEach(function(a){xj(n,a,t[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):OE(Object(t)).forEach(function(a){Object.defineProperty(n,a,Object.getOwnPropertyDescriptor(t,a))})}return n}function xj(n,e,t){return e=Tj(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Tj(n){var e=wj(n,"string");return typeof e=="symbol"?e:e+""}function wj(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var a=t.call(n,e);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function JT(n){return n&&n.map((e,t)=>vs.createElement(e.tag,wh({key:t},e.attr),JT(e.child)))}function Oa(n){return e=>vs.createElement(Aj,Th({attr:wh({},n.attr)},e),JT(n.child))}function Aj(n){var e=t=>{var{attr:a,size:s,title:l}=n,u=bj(n,_j),f=s||t.size||"1em",p;return t.className&&(p=t.className),n.className&&(p=(p?p+" ":"")+n.className),vs.createElement("svg",Th({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,a,u,{className:p,style:wh(wh({color:n.color||t.color},t.style),n.style),height:f,width:f,xmlns:"http://www.w3.org/2000/svg"}),l&&vs.createElement("title",null,l),n.children)};return DE!==void 0?vs.createElement(DE.Consumer,null,t=>e(t)):e(ZT)}function Sj(n){return Oa({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M496 384H64V80c0-8.84-7.16-16-16-16H16C7.16 64 0 71.16 0 80v336c0 17.67 14.33 32 32 32h464c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16zM464 96H345.94c-21.38 0-32.09 25.85-16.97 40.97l32.4 32.4L288 242.75l-73.37-73.37c-12.5-12.5-32.76-12.5-45.25 0l-68.69 68.69c-6.25 6.25-6.25 16.38 0 22.63l22.62 22.62c6.25 6.25 16.38 6.25 22.63 0L192 237.25l73.37 73.37c12.5 12.5 32.76 12.5 45.25 0l96-96 32.4 32.4c15.12 15.12 40.97 4.41 40.97-16.97V112c.01-8.84-7.15-16-15.99-16z"},child:[]}]})(n)}function Nj(n){return Oa({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14-11.1-35.6-30-67.8-54.7-94.6-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7-36.7-8.2-74.3-7.8-109.2 0-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3-24.7 26.7-43.6 58.9-54.7 94.6-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14 11.1 35.6 30 67.8 54.7 94.6 3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7 36.7 8.2 74.3 7.8 109.2 0 5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3 24.7-26.7 43.6-58.9 54.7-94.6 1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z"},child:[]}]})(n)}function Cj(n){return Oa({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M416 192c0-88.4-93.1-160-208-160S0 103.6 0 192c0 34.3 14.1 65.9 38 92-13.4 30.2-35.5 54.2-35.8 54.5-2.2 2.3-2.8 5.7-1.5 8.7S4.8 352 8 352c36.6 0 66.9-12.3 88.7-25 32.2 15.7 70.3 25 111.3 25 114.9 0 208-71.6 208-160zm122 220c23.9-26 38-57.7 38-92 0-66.9-53.5-124.2-129.3-148.1.9 6.6 1.3 13.3 1.3 20.1 0 105.9-107.7 192-240 192-10.8 0-21.3-.8-31.7-1.9C207.8 439.6 281.8 480 368 480c41 0 79.1-9.2 111.3-25 21.8 12.7 52.1 25 88.7 25 3.2 0 6.1-1.9 7.3-4.8 1.3-2.9.7-6.3-1.5-8.7-.3-.3-22.4-24.2-35.8-54.5z"},child:[]}]})(n)}function Rj(n){return Oa({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"},child:[]}]})(n)}function ew(n){return Oa({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(n)}function Ij(n){return Oa({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M32,224H64V416H32A31.96166,31.96166,0,0,1,0,384V256A31.96166,31.96166,0,0,1,32,224Zm512-48V448a64.06328,64.06328,0,0,1-64,64H160a64.06328,64.06328,0,0,1-64-64V176a79.974,79.974,0,0,1,80-80H288V32a32,32,0,0,1,64,0V96H464A79.974,79.974,0,0,1,544,176ZM264,256a40,40,0,1,0-40,40A39.997,39.997,0,0,0,264,256Zm-8,128H192v32h64Zm96,0H288v32h64ZM456,256a40,40,0,1,0-40,40A39.997,39.997,0,0,0,456,256Zm-8,128H384v32h64ZM640,256V384a31.96166,31.96166,0,0,1-32,32H576V224h32A31.96166,31.96166,0,0,1,640,256Z"},child:[]}]})(n)}function tw(n){return Oa({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"},child:[]}]})(n)}function Dj(n){return Oa({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M192 256c61.9 0 112-50.1 112-112S253.9 32 192 32 80 82.1 80 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C51.6 288 0 339.6 0 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zM480 256c53 0 96-43 96-96s-43-96-96-96-96 43-96 96 43 96 96 96zm48 32h-3.8c-13.9 4.8-28.6 8-44.2 8s-30.3-3.2-44.2-8H432c-20.4 0-39.2 5.9-55.7 15.4 24.4 26.3 39.7 61.2 39.7 99.8v38.4c0 2.2-.5 4.3-.6 6.4H592c26.5 0 48-21.5 48-48 0-61.9-50.1-112-112-112z"},child:[]}]})(n)}function Oj(n){return Oa({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M624 208h-64v-64c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v64h-64c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h64v64c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-64h64c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zm-400 48c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(n)}const jj=()=>{const n=Tn();return m.jsxs("div",{className:"flex flex-wrap gap-4 mb-8",children:[m.jsxs("button",{onClick:()=>n("/conversation/new"),className:"btn-primary flex items-center gap-2",children:[m.jsx(ew,{})," Iniciar Conversación"]}),m.jsxs("button",{onClick:()=>n("/clients/search"),className:"btn-secondary flex items-center gap-2",children:[m.jsx(tw,{})," Buscar Cliente"]}),m.jsxs("button",{onClick:()=>n("/clients/new"),className:"btn-secondary flex items-center gap-2",children:[m.jsx(Oj,{})," Agregar Cliente"]})]})},nw=6048e5,Pj=864e5,Ud=43200,jE=1440,PE=Symbol.for("constructDateFrom");function Ca(n,e){return typeof n=="function"?n(e):n&&typeof n=="object"&&PE in n?n[PE](e):n instanceof Date?new n.constructor(e):new Date(e)}function Xt(n,e){return Ca(e||n,n)}let Mj={};function au(){return Mj}function Bc(n,e){var f,p,y,v;const t=au(),a=(e==null?void 0:e.weekStartsOn)??((p=(f=e==null?void 0:e.locale)==null?void 0:f.options)==null?void 0:p.weekStartsOn)??t.weekStartsOn??((v=(y=t.locale)==null?void 0:y.options)==null?void 0:v.weekStartsOn)??0,s=Xt(n,e==null?void 0:e.in),l=s.getDay(),u=(l<a?7:0)+l-a;return s.setDate(s.getDate()-u),s.setHours(0,0,0,0),s}function Ah(n,e){return Bc(n,{...e,weekStartsOn:1})}function rw(n,e){const t=Xt(n,e==null?void 0:e.in),a=t.getFullYear(),s=Ca(t,0);s.setFullYear(a+1,0,4),s.setHours(0,0,0,0);const l=Ah(s),u=Ca(t,0);u.setFullYear(a,0,4),u.setHours(0,0,0,0);const f=Ah(u);return t.getTime()>=l.getTime()?a+1:t.getTime()>=f.getTime()?a:a-1}function Sh(n){const e=Xt(n),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+n-+t}function sf(n,...e){const t=Ca.bind(null,n||e.find(a=>typeof a=="object"));return e.map(t)}function ME(n,e){const t=Xt(n,e==null?void 0:e.in);return t.setHours(0,0,0,0),t}function kj(n,e,t){const[a,s]=sf(t==null?void 0:t.in,n,e),l=ME(a),u=ME(s),f=+l-Sh(l),p=+u-Sh(u);return Math.round((f-p)/Pj)}function Vj(n,e){const t=rw(n,e),a=Ca(n,0);return a.setFullYear(t,0,4),a.setHours(0,0,0,0),Ah(a)}function Zd(n,e){const t=+Xt(n)-+Xt(e);return t<0?-1:t>0?1:t}function Lj(n){return Ca(n,Date.now())}function Uj(n){return n instanceof Date||typeof n=="object"&&Object.prototype.toString.call(n)==="[object Date]"}function zj(n){return!(!Uj(n)&&typeof n!="number"||isNaN(+Xt(n)))}function Bj(n,e,t){const[a,s]=sf(t==null?void 0:t.in,n,e),l=a.getFullYear()-s.getFullYear(),u=a.getMonth()-s.getMonth();return l*12+u}function qj(n){return e=>{const a=(n?Math[n]:Math.trunc)(e);return a===0?0:a}}function Fj(n,e){return+Xt(n)-+Xt(e)}function Hj(n,e){const t=Xt(n,e==null?void 0:e.in);return t.setHours(23,59,59,999),t}function Gj(n,e){const t=Xt(n,e==null?void 0:e.in),a=t.getMonth();return t.setFullYear(t.getFullYear(),a+1,0),t.setHours(23,59,59,999),t}function $j(n,e){const t=Xt(n,e==null?void 0:e.in);return+Hj(t,e)==+Gj(t,e)}function Yj(n,e,t){const[a,s,l]=sf(t==null?void 0:t.in,n,n,e),u=Zd(s,l),f=Math.abs(Bj(s,l));if(f<1)return 0;s.getMonth()===1&&s.getDate()>27&&s.setDate(30),s.setMonth(s.getMonth()-u*f);let p=Zd(s,l)===-u;$j(a)&&f===1&&Zd(a,l)===1&&(p=!1);const y=u*(f-+p);return y===0?0:y}function Kj(n,e,t){const a=Fj(n,e)/1e3;return qj(t==null?void 0:t.roundingMethod)(a)}function Qj(n,e){const t=Xt(n,e==null?void 0:e.in);return t.setFullYear(t.getFullYear(),0,1),t.setHours(0,0,0,0),t}const Wj={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Xj=(n,e,t)=>{let a;const s=Wj[n];return typeof s=="string"?a=s:e===1?a=s.one:a=s.other.replace("{{count}}",e.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+a:a+" ago":a};function ko(n){return(e={})=>{const t=e.width?String(e.width):n.defaultWidth;return n.formats[t]||n.formats[n.defaultWidth]}}const Zj={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Jj={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},eP={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},tP={date:ko({formats:Zj,defaultWidth:"full"}),time:ko({formats:Jj,defaultWidth:"full"}),dateTime:ko({formats:eP,defaultWidth:"full"})},nP={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},rP=(n,e,t,a)=>nP[n];function zr(n){return(e,t)=>{const a=t!=null&&t.context?String(t.context):"standalone";let s;if(a==="formatting"&&n.formattingValues){const u=n.defaultFormattingWidth||n.defaultWidth,f=t!=null&&t.width?String(t.width):u;s=n.formattingValues[f]||n.formattingValues[u]}else{const u=n.defaultWidth,f=t!=null&&t.width?String(t.width):n.defaultWidth;s=n.values[f]||n.values[u]}const l=n.argumentCallback?n.argumentCallback(e):e;return s[l]}}const aP={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},iP={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},sP={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},oP={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},lP={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},cP={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},uP=(n,e)=>{const t=Number(n),a=t%100;if(a>20||a<10)switch(a%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},dP={ordinalNumber:uP,era:zr({values:aP,defaultWidth:"wide"}),quarter:zr({values:iP,defaultWidth:"wide",argumentCallback:n=>n-1}),month:zr({values:sP,defaultWidth:"wide"}),day:zr({values:oP,defaultWidth:"wide"}),dayPeriod:zr({values:lP,defaultWidth:"wide",formattingValues:cP,defaultFormattingWidth:"wide"})};function Br(n){return(e,t={})=>{const a=t.width,s=a&&n.matchPatterns[a]||n.matchPatterns[n.defaultMatchWidth],l=e.match(s);if(!l)return null;const u=l[0],f=a&&n.parsePatterns[a]||n.parsePatterns[n.defaultParseWidth],p=Array.isArray(f)?fP(f,E=>E.test(u)):hP(f,E=>E.test(u));let y;y=n.valueCallback?n.valueCallback(p):p,y=t.valueCallback?t.valueCallback(y):y;const v=e.slice(u.length);return{value:y,rest:v}}}function hP(n,e){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&e(n[t]))return t}function fP(n,e){for(let t=0;t<n.length;t++)if(e(n[t]))return t}function aw(n){return(e,t={})=>{const a=e.match(n.matchPattern);if(!a)return null;const s=a[0],l=e.match(n.parsePattern);if(!l)return null;let u=n.valueCallback?n.valueCallback(l[0]):l[0];u=t.valueCallback?t.valueCallback(u):u;const f=e.slice(s.length);return{value:u,rest:f}}}const mP=/^(\d+)(th|st|nd|rd)?/i,pP=/\d+/i,gP={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},yP={any:[/^b/i,/^(a|c)/i]},vP={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},_P={any:[/1/i,/2/i,/3/i,/4/i]},bP={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},EP={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},xP={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},TP={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},wP={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},AP={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},SP={ordinalNumber:aw({matchPattern:mP,parsePattern:pP,valueCallback:n=>parseInt(n,10)}),era:Br({matchPatterns:gP,defaultMatchWidth:"wide",parsePatterns:yP,defaultParseWidth:"any"}),quarter:Br({matchPatterns:vP,defaultMatchWidth:"wide",parsePatterns:_P,defaultParseWidth:"any",valueCallback:n=>n+1}),month:Br({matchPatterns:bP,defaultMatchWidth:"wide",parsePatterns:EP,defaultParseWidth:"any"}),day:Br({matchPatterns:xP,defaultMatchWidth:"wide",parsePatterns:TP,defaultParseWidth:"any"}),dayPeriod:Br({matchPatterns:wP,defaultMatchWidth:"any",parsePatterns:AP,defaultParseWidth:"any"})},iw={code:"en-US",formatDistance:Xj,formatLong:tP,formatRelative:rP,localize:dP,match:SP,options:{weekStartsOn:0,firstWeekContainsDate:1}};function NP(n,e){const t=Xt(n,e==null?void 0:e.in);return kj(t,Qj(t))+1}function CP(n,e){const t=Xt(n,e==null?void 0:e.in),a=+Ah(t)-+Vj(t);return Math.round(a/nw)+1}function sw(n,e){var v,E,T,C;const t=Xt(n,e==null?void 0:e.in),a=t.getFullYear(),s=au(),l=(e==null?void 0:e.firstWeekContainsDate)??((E=(v=e==null?void 0:e.locale)==null?void 0:v.options)==null?void 0:E.firstWeekContainsDate)??s.firstWeekContainsDate??((C=(T=s.locale)==null?void 0:T.options)==null?void 0:C.firstWeekContainsDate)??1,u=Ca((e==null?void 0:e.in)||n,0);u.setFullYear(a+1,0,l),u.setHours(0,0,0,0);const f=Bc(u,e),p=Ca((e==null?void 0:e.in)||n,0);p.setFullYear(a,0,l),p.setHours(0,0,0,0);const y=Bc(p,e);return+t>=+f?a+1:+t>=+y?a:a-1}function RP(n,e){var f,p,y,v;const t=au(),a=(e==null?void 0:e.firstWeekContainsDate)??((p=(f=e==null?void 0:e.locale)==null?void 0:f.options)==null?void 0:p.firstWeekContainsDate)??t.firstWeekContainsDate??((v=(y=t.locale)==null?void 0:y.options)==null?void 0:v.firstWeekContainsDate)??1,s=sw(n,e),l=Ca((e==null?void 0:e.in)||n,0);return l.setFullYear(s,0,a),l.setHours(0,0,0,0),Bc(l,e)}function IP(n,e){const t=Xt(n,e==null?void 0:e.in),a=+Bc(t,e)-+RP(t,e);return Math.round(a/nw)+1}function rt(n,e){const t=n<0?"-":"",a=Math.abs(n).toString().padStart(e,"0");return t+a}const ci={y(n,e){const t=n.getFullYear(),a=t>0?t:1-t;return rt(e==="yy"?a%100:a,e.length)},M(n,e){const t=n.getMonth();return e==="M"?String(t+1):rt(t+1,2)},d(n,e){return rt(n.getDate(),e.length)},a(n,e){const t=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(n,e){return rt(n.getHours()%12||12,e.length)},H(n,e){return rt(n.getHours(),e.length)},m(n,e){return rt(n.getMinutes(),e.length)},s(n,e){return rt(n.getSeconds(),e.length)},S(n,e){const t=e.length,a=n.getMilliseconds(),s=Math.trunc(a*Math.pow(10,t-3));return rt(s,e.length)}},Ao={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},kE={G:function(n,e,t){const a=n.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(a,{width:"abbreviated"});case"GGGGG":return t.era(a,{width:"narrow"});case"GGGG":default:return t.era(a,{width:"wide"})}},y:function(n,e,t){if(e==="yo"){const a=n.getFullYear(),s=a>0?a:1-a;return t.ordinalNumber(s,{unit:"year"})}return ci.y(n,e)},Y:function(n,e,t,a){const s=sw(n,a),l=s>0?s:1-s;if(e==="YY"){const u=l%100;return rt(u,2)}return e==="Yo"?t.ordinalNumber(l,{unit:"year"}):rt(l,e.length)},R:function(n,e){const t=rw(n);return rt(t,e.length)},u:function(n,e){const t=n.getFullYear();return rt(t,e.length)},Q:function(n,e,t){const a=Math.ceil((n.getMonth()+1)/3);switch(e){case"Q":return String(a);case"QQ":return rt(a,2);case"Qo":return t.ordinalNumber(a,{unit:"quarter"});case"QQQ":return t.quarter(a,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(a,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(a,{width:"wide",context:"formatting"})}},q:function(n,e,t){const a=Math.ceil((n.getMonth()+1)/3);switch(e){case"q":return String(a);case"qq":return rt(a,2);case"qo":return t.ordinalNumber(a,{unit:"quarter"});case"qqq":return t.quarter(a,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(a,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(a,{width:"wide",context:"standalone"})}},M:function(n,e,t){const a=n.getMonth();switch(e){case"M":case"MM":return ci.M(n,e);case"Mo":return t.ordinalNumber(a+1,{unit:"month"});case"MMM":return t.month(a,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(a,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(a,{width:"wide",context:"formatting"})}},L:function(n,e,t){const a=n.getMonth();switch(e){case"L":return String(a+1);case"LL":return rt(a+1,2);case"Lo":return t.ordinalNumber(a+1,{unit:"month"});case"LLL":return t.month(a,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(a,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(a,{width:"wide",context:"standalone"})}},w:function(n,e,t,a){const s=IP(n,a);return e==="wo"?t.ordinalNumber(s,{unit:"week"}):rt(s,e.length)},I:function(n,e,t){const a=CP(n);return e==="Io"?t.ordinalNumber(a,{unit:"week"}):rt(a,e.length)},d:function(n,e,t){return e==="do"?t.ordinalNumber(n.getDate(),{unit:"date"}):ci.d(n,e)},D:function(n,e,t){const a=NP(n);return e==="Do"?t.ordinalNumber(a,{unit:"dayOfYear"}):rt(a,e.length)},E:function(n,e,t){const a=n.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(a,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(a,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(a,{width:"short",context:"formatting"});case"EEEE":default:return t.day(a,{width:"wide",context:"formatting"})}},e:function(n,e,t,a){const s=n.getDay(),l=(s-a.weekStartsOn+8)%7||7;switch(e){case"e":return String(l);case"ee":return rt(l,2);case"eo":return t.ordinalNumber(l,{unit:"day"});case"eee":return t.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(s,{width:"short",context:"formatting"});case"eeee":default:return t.day(s,{width:"wide",context:"formatting"})}},c:function(n,e,t,a){const s=n.getDay(),l=(s-a.weekStartsOn+8)%7||7;switch(e){case"c":return String(l);case"cc":return rt(l,e.length);case"co":return t.ordinalNumber(l,{unit:"day"});case"ccc":return t.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(s,{width:"narrow",context:"standalone"});case"cccccc":return t.day(s,{width:"short",context:"standalone"});case"cccc":default:return t.day(s,{width:"wide",context:"standalone"})}},i:function(n,e,t){const a=n.getDay(),s=a===0?7:a;switch(e){case"i":return String(s);case"ii":return rt(s,e.length);case"io":return t.ordinalNumber(s,{unit:"day"});case"iii":return t.day(a,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(a,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(a,{width:"short",context:"formatting"});case"iiii":default:return t.day(a,{width:"wide",context:"formatting"})}},a:function(n,e,t){const s=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(n,e,t){const a=n.getHours();let s;switch(a===12?s=Ao.noon:a===0?s=Ao.midnight:s=a/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(n,e,t){const a=n.getHours();let s;switch(a>=17?s=Ao.evening:a>=12?s=Ao.afternoon:a>=4?s=Ao.morning:s=Ao.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(n,e,t){if(e==="ho"){let a=n.getHours()%12;return a===0&&(a=12),t.ordinalNumber(a,{unit:"hour"})}return ci.h(n,e)},H:function(n,e,t){return e==="Ho"?t.ordinalNumber(n.getHours(),{unit:"hour"}):ci.H(n,e)},K:function(n,e,t){const a=n.getHours()%12;return e==="Ko"?t.ordinalNumber(a,{unit:"hour"}):rt(a,e.length)},k:function(n,e,t){let a=n.getHours();return a===0&&(a=24),e==="ko"?t.ordinalNumber(a,{unit:"hour"}):rt(a,e.length)},m:function(n,e,t){return e==="mo"?t.ordinalNumber(n.getMinutes(),{unit:"minute"}):ci.m(n,e)},s:function(n,e,t){return e==="so"?t.ordinalNumber(n.getSeconds(),{unit:"second"}):ci.s(n,e)},S:function(n,e){return ci.S(n,e)},X:function(n,e,t){const a=n.getTimezoneOffset();if(a===0)return"Z";switch(e){case"X":return LE(a);case"XXXX":case"XX":return ps(a);case"XXXXX":case"XXX":default:return ps(a,":")}},x:function(n,e,t){const a=n.getTimezoneOffset();switch(e){case"x":return LE(a);case"xxxx":case"xx":return ps(a);case"xxxxx":case"xxx":default:return ps(a,":")}},O:function(n,e,t){const a=n.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+VE(a,":");case"OOOO":default:return"GMT"+ps(a,":")}},z:function(n,e,t){const a=n.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+VE(a,":");case"zzzz":default:return"GMT"+ps(a,":")}},t:function(n,e,t){const a=Math.trunc(+n/1e3);return rt(a,e.length)},T:function(n,e,t){return rt(+n,e.length)}};function VE(n,e=""){const t=n>0?"-":"+",a=Math.abs(n),s=Math.trunc(a/60),l=a%60;return l===0?t+String(s):t+String(s)+e+rt(l,2)}function LE(n,e){return n%60===0?(n>0?"-":"+")+rt(Math.abs(n)/60,2):ps(n,e)}function ps(n,e=""){const t=n>0?"-":"+",a=Math.abs(n),s=rt(Math.trunc(a/60),2),l=rt(a%60,2);return t+s+e+l}const UE=(n,e)=>{switch(n){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},ow=(n,e)=>{switch(n){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},DP=(n,e)=>{const t=n.match(/(P+)(p+)?/)||[],a=t[1],s=t[2];if(!s)return UE(n,e);let l;switch(a){case"P":l=e.dateTime({width:"short"});break;case"PP":l=e.dateTime({width:"medium"});break;case"PPP":l=e.dateTime({width:"long"});break;case"PPPP":default:l=e.dateTime({width:"full"});break}return l.replace("{{date}}",UE(a,e)).replace("{{time}}",ow(s,e))},OP={p:ow,P:DP},jP=/^D+$/,PP=/^Y+$/,MP=["D","DD","YY","YYYY"];function kP(n){return jP.test(n)}function VP(n){return PP.test(n)}function LP(n,e,t){const a=UP(n,e,t);if(console.warn(a),MP.includes(n))throw new RangeError(a)}function UP(n,e,t){const a=n[0]==="Y"?"years":"days of the month";return`Use \`${n.toLowerCase()}\` instead of \`${n}\` (in \`${e}\`) for formatting ${a} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const zP=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,BP=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,qP=/^'([^]*?)'?$/,FP=/''/g,HP=/[a-zA-Z]/;function Vo(n,e,t){var v,E,T,C,A,M,I,G;const a=au(),s=(t==null?void 0:t.locale)??a.locale??iw,l=(t==null?void 0:t.firstWeekContainsDate)??((E=(v=t==null?void 0:t.locale)==null?void 0:v.options)==null?void 0:E.firstWeekContainsDate)??a.firstWeekContainsDate??((C=(T=a.locale)==null?void 0:T.options)==null?void 0:C.firstWeekContainsDate)??1,u=(t==null?void 0:t.weekStartsOn)??((M=(A=t==null?void 0:t.locale)==null?void 0:A.options)==null?void 0:M.weekStartsOn)??a.weekStartsOn??((G=(I=a.locale)==null?void 0:I.options)==null?void 0:G.weekStartsOn)??0,f=Xt(n,t==null?void 0:t.in);if(!zj(f))throw new RangeError("Invalid time value");let p=e.match(BP).map(Q=>{const q=Q[0];if(q==="p"||q==="P"){const oe=OP[q];return oe(Q,s.formatLong)}return Q}).join("").match(zP).map(Q=>{if(Q==="''")return{isToken:!1,value:"'"};const q=Q[0];if(q==="'")return{isToken:!1,value:GP(Q)};if(kE[q])return{isToken:!0,value:Q};if(q.match(HP))throw new RangeError("Format string contains an unescaped latin alphabet character `"+q+"`");return{isToken:!1,value:Q}});s.localize.preprocessor&&(p=s.localize.preprocessor(f,p));const y={firstWeekContainsDate:l,weekStartsOn:u,locale:s};return p.map(Q=>{if(!Q.isToken)return Q.value;const q=Q.value;(!(t!=null&&t.useAdditionalWeekYearTokens)&&VP(q)||!(t!=null&&t.useAdditionalDayOfYearTokens)&&kP(q))&&LP(q,e,String(n));const oe=kE[q[0]];return oe(f,q,s.localize,y)}).join("")}function GP(n){const e=n.match(qP);return e?e[1].replace(FP,"'"):n}function $P(n,e,t){const a=au(),s=(t==null?void 0:t.locale)??a.locale??iw,l=2520,u=Zd(n,e);if(isNaN(u))throw new RangeError("Invalid time value");const f=Object.assign({},t,{addSuffix:t==null?void 0:t.addSuffix,comparison:u}),[p,y]=sf(t==null?void 0:t.in,...u>0?[e,n]:[n,e]),v=Kj(y,p),E=(Sh(y)-Sh(p))/1e3,T=Math.round((v-E)/60);let C;if(T<2)return t!=null&&t.includeSeconds?v<5?s.formatDistance("lessThanXSeconds",5,f):v<10?s.formatDistance("lessThanXSeconds",10,f):v<20?s.formatDistance("lessThanXSeconds",20,f):v<40?s.formatDistance("halfAMinute",0,f):v<60?s.formatDistance("lessThanXMinutes",1,f):s.formatDistance("xMinutes",1,f):T===0?s.formatDistance("lessThanXMinutes",1,f):s.formatDistance("xMinutes",T,f);if(T<45)return s.formatDistance("xMinutes",T,f);if(T<90)return s.formatDistance("aboutXHours",1,f);if(T<jE){const A=Math.round(T/60);return s.formatDistance("aboutXHours",A,f)}else{if(T<l)return s.formatDistance("xDays",1,f);if(T<Ud){const A=Math.round(T/jE);return s.formatDistance("xDays",A,f)}else if(T<Ud*2)return C=Math.round(T/Ud),s.formatDistance("aboutXMonths",C,f)}if(C=Yj(y,p),C<12){const A=Math.round(T/Ud);return s.formatDistance("xMonths",A,f)}else{const A=C%12,M=Math.trunc(C/12);return A<3?s.formatDistance("aboutXYears",M,f):A<9?s.formatDistance("overXYears",M,f):s.formatDistance("almostXYears",M+1,f)}}function zE(n,e){return $P(n,Lj(n),e)}const YP={lessThanXSeconds:{one:"menos de un segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"medio minuto",lessThanXMinutes:{one:"menos de un minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"alrededor de 1 hora",other:"alrededor de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 día",other:"{{count}} días"},aboutXWeeks:{one:"alrededor de 1 semana",other:"alrededor de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"alrededor de 1 mes",other:"alrededor de {{count}} meses"},xMonths:{one:"1 mes",other:"{{count}} meses"},aboutXYears:{one:"alrededor de 1 año",other:"alrededor de {{count}} años"},xYears:{one:"1 año",other:"{{count}} años"},overXYears:{one:"más de 1 año",other:"más de {{count}} años"},almostXYears:{one:"casi 1 año",other:"casi {{count}} años"}},KP=(n,e,t)=>{let a;const s=YP[n];return typeof s=="string"?a=s:e===1?a=s.one:a=s.other.replace("{{count}}",e.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"en "+a:"hace "+a:a},QP={full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/y"},WP={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},XP={full:"{{date}} 'a las' {{time}}",long:"{{date}} 'a las' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},ZP={date:ko({formats:QP,defaultWidth:"full"}),time:ko({formats:WP,defaultWidth:"full"}),dateTime:ko({formats:XP,defaultWidth:"full"})},JP={lastWeek:"'el' eeee 'pasado a la' p",yesterday:"'ayer a la' p",today:"'hoy a la' p",tomorrow:"'mañana a la' p",nextWeek:"eeee 'a la' p",other:"P"},e6={lastWeek:"'el' eeee 'pasado a las' p",yesterday:"'ayer a las' p",today:"'hoy a las' p",tomorrow:"'mañana a las' p",nextWeek:"eeee 'a las' p",other:"P"},t6=(n,e,t,a)=>e.getHours()!==1?e6[n]:JP[n],n6={narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","después de cristo"]},r6={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1º trimestre","2º trimestre","3º trimestre","4º trimestre"]},a6={narrow:["e","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],wide:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]},i6={narrow:["d","l","m","m","j","v","s"],short:["do","lu","ma","mi","ju","vi","sá"],abbreviated:["dom","lun","mar","mié","jue","vie","sáb"],wide:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"]},s6={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"}},o6={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"}},l6=(n,e)=>Number(n)+"º",c6={ordinalNumber:l6,era:zr({values:n6,defaultWidth:"wide"}),quarter:zr({values:r6,defaultWidth:"wide",argumentCallback:n=>Number(n)-1}),month:zr({values:a6,defaultWidth:"wide"}),day:zr({values:i6,defaultWidth:"wide"}),dayPeriod:zr({values:s6,defaultWidth:"wide",formattingValues:o6,defaultFormattingWidth:"wide"})},u6=/^(\d+)(º)?/i,d6=/\d+/i,h6={narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|a\.?\s?e\.?\s?c\.?|d\.?\s?c\.?|e\.?\s?c\.?)/i,wide:/^(antes de cristo|antes de la era com[uú]n|despu[eé]s de cristo|era com[uú]n)/i},f6={any:[/^ac/i,/^dc/i],wide:[/^(antes de cristo|antes de la era com[uú]n)/i,/^(despu[eé]s de cristo|era com[uú]n)/i]},m6={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234](º)? trimestre/i},p6={any:[/1/i,/2/i,/3/i,/4/i]},g6={narrow:/^[efmajsond]/i,abbreviated:/^(ene|feb|mar|abr|may|jun|jul|ago|sep|oct|nov|dic)/i,wide:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i},y6={narrow:[/^e/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^en/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i]},v6={narrow:/^[dlmjvs]/i,short:/^(do|lu|ma|mi|ju|vi|s[áa])/i,abbreviated:/^(dom|lun|mar|mi[ée]|jue|vie|s[áa]b)/i,wide:/^(domingo|lunes|martes|mi[ée]rcoles|jueves|viernes|s[áa]bado)/i},_6={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^do/i,/^lu/i,/^ma/i,/^mi/i,/^ju/i,/^vi/i,/^sa/i]},b6={narrow:/^(a|p|mn|md|(de la|a las) (mañana|tarde|noche))/i,any:/^([ap]\.?\s?m\.?|medianoche|mediodia|(de la|a las) (mañana|tarde|noche))/i},E6={any:{am:/^a/i,pm:/^p/i,midnight:/^mn/i,noon:/^md/i,morning:/mañana/i,afternoon:/tarde/i,evening:/tarde/i,night:/noche/i}},x6={ordinalNumber:aw({matchPattern:u6,parsePattern:d6,valueCallback:function(n){return parseInt(n,10)}}),era:Br({matchPatterns:h6,defaultMatchWidth:"wide",parsePatterns:f6,defaultParseWidth:"any"}),quarter:Br({matchPatterns:m6,defaultMatchWidth:"wide",parsePatterns:p6,defaultParseWidth:"any",valueCallback:n=>n+1}),month:Br({matchPatterns:g6,defaultMatchWidth:"wide",parsePatterns:y6,defaultParseWidth:"any"}),day:Br({matchPatterns:v6,defaultMatchWidth:"wide",parsePatterns:_6,defaultParseWidth:"any"}),dayPeriod:Br({matchPatterns:b6,defaultMatchWidth:"any",parsePatterns:E6,defaultParseWidth:"any"})},bi={code:"es",formatDistance:KP,formatLong:ZP,formatRelative:t6,localize:c6,match:x6,options:{weekStartsOn:1,firstWeekContainsDate:1}},rn=[];for(let n=0;n<256;++n)rn.push((n+256).toString(16).slice(1));function T6(n,e=0){return(rn[n[e+0]]+rn[n[e+1]]+rn[n[e+2]]+rn[n[e+3]]+"-"+rn[n[e+4]]+rn[n[e+5]]+"-"+rn[n[e+6]]+rn[n[e+7]]+"-"+rn[n[e+8]]+rn[n[e+9]]+"-"+rn[n[e+10]]+rn[n[e+11]]+rn[n[e+12]]+rn[n[e+13]]+rn[n[e+14]]+rn[n[e+15]]).toLowerCase()}let Pp;const w6=new Uint8Array(16);function A6(){if(!Pp){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Pp=crypto.getRandomValues.bind(crypto)}return Pp(w6)}const S6=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),BE={randomUUID:S6};function wy(n,e,t){var s;if(BE.randomUUID&&!n)return BE.randomUUID();n=n||{};const a=n.random??((s=n.rng)==null?void 0:s.call(n))??A6();if(a.length<16)throw new Error("Random bytes length must be >= 16");return a[6]=a[6]&15|64,a[8]=a[8]&63|128,T6(a)}const lw=ir(qe,"clients"),N6=async n=>{const e=wy(),t=ft(qe,"clients",e),a={relationship:n.relationship||50,history:n.history||50,attitude:n.attitude||50,sensitivity:n.sensitivity||50,probability:n.probability||50};return await Ty(t,{id:e,name:n.name,email:n.email||"",phone:n.phone||"",debt:Number(n.debt)||0,createdAt:ut(),updatedAt:ut(),soul:a,status:"active",tags:n.tags||[],notes:n.notes||"",lastContact:null,paymentHistory:[],provider_id:n.provider_id||""}),e},of=async n=>{const e=await ln(ft(qe,"clients",n));return e.exists()?{id:e.id,...e.data()}:null},iu=async()=>(await Da(yr(lw,vr("name","asc")))).docs.map(e=>({id:e.id,...e.data()})),C6=async n=>{if(!n||n.trim()==="")return iu();const e=n.toLowerCase().trim();return(await Da(lw)).docs.map(s=>({id:s.id,...s.data()})).filter(s=>s.name.toLowerCase().includes(e)||s.email&&s.email.toLowerCase().includes(e)||s.phone&&s.phone.includes(e))},R6=async(n,e)=>{const t=ft(qe,"clients",n);if(!(await ln(t)).exists())throw new Error("Cliente no encontrado");return delete e.id,delete e.createdAt,await Dn(t,{...e,updatedAt:ut()}),n},I6=async(n,e,t=null)=>{const a=ft(qe,"clients",n),s=await ln(a);if(!s.exists())throw new Error("Cliente no encontrado");const l=s.data(),u={debt:Number(e),updatedAt:ut()};return t&&(u.paymentHistory=[...l.paymentHistory||[],{date:ut(),amount:t.amount,type:t.type||"payment",notes:t.notes||""}]),await Dn(a,u),n},D6=async n=>{const e=ft(qe,"clients",n);await Dn(e,{lastContact:ut(),updatedAt:ut()})},Ie={GREETING:"greeting",DEBT_NOTIFICATION:"debt_notification",NEGOTIATION:"negotiation",PAYMENT_CONFIRMATION:"payment_confirmation",FAREWELL:"farewell"},Wt={NEW:"new",ACTIVE:"active",INACTIVE:"inactive",CLOSED:"closed"},O6={neutral:{relationship:0,history:0,attitude:0,sensitivity:0,probability:0},accepts_payment:{relationship:5,history:10,attitude:10,sensitivity:-5,probability:20},offers_partial:{relationship:5,history:5,attitude:10,sensitivity:-5,probability:15},reschedule:{relationship:2,history:-5,attitude:5,sensitivity:0,probability:-5},evades:{relationship:-5,history:-5,attitude:-10,sensitivity:5,probability:-10},annoyed:{relationship:-10,history:-5,attitude:-15,sensitivity:10,probability:-15},refuses:{relationship:-20,history:-20,attitude:-20,sensitivity:20,probability:-30},thanks:{relationship:5,history:0,attitude:10,sensitivity:-5,probability:10},no_answer:{relationship:-5,history:-10,attitude:-5,sensitivity:0,probability:-10},confirms_payment:{relationship:10,history:20,attitude:20,sensitivity:-10,probability:30}},j6=async(n,e,t)=>{const a=ft(qe,"clients",n),s=await ln(a);if(!s.exists())throw new Error("Cliente no encontrado");const l=s.data();await D6(n);const u={clientId:n,clientName:l.name,agentId:e,startedAt:ut(),updatedAt:ut(),status:Wt.NEW,isActive:!0,initialSoul:t||l.soul,currentSoul:t||l.soul,turns:[],nextActionDate:null,summary:null};return(await cj(ir(qe,"conversations"),u)).id},qE=async(n,e)=>{const t=ft(qe,"conversations",n),a=await ln(t);if(!a.exists())throw new Error("Conversación no encontrada");const s=a.data();let l={...s.currentSoul},u={relationship:0,history:0,attitude:0,sensitivity:0,probability:0};if(e.event&&e.event!=="neutral"){u=O6[e.event]||u;const E=T=>Math.min(Math.max(T,0),100);l={relationship:E(l.relationship+(u.relationship||0)),history:E(l.history+(u.history||0)),attitude:E(l.attitude+(u.attitude||0)),sensitivity:E(l.sensitivity+(u.sensitivity||0)),probability:E(l.probability+(u.probability||0))}}const f=new Date,p={id:wy(),timestamp:f,timestampMillis:f.getTime(),...e,phase:e.phase||Ie.NEGOTIATION,deltas:u,currentSoul:l},y=[...s.turns,p],v=s.status===Wt.NEW?Wt.ACTIVE:s.status;if(await Dn(t,{turns:y,currentSoul:l,status:v,isActive:!0,updatedAt:ut()}),e.sender==="client"&&e.event!=="neutral"){const E=ft(qe,"clients",s.clientId);await Dn(E,{soul:l,updatedAt:ut()})}return{turns:y,currentSoul:l}},So=async n=>{const e=await ln(ft(qe,"conversations",n));if(!e.exists())return null;const t={id:e.id,...e.data()};if(t.clientId)try{const a=await ln(ft(qe,"clients",t.clientId));a.exists()&&(t.client={id:a.id,...a.data()})}catch(a){console.error("Error al cargar datos del cliente:",a)}return t},Ay=async(n,e=5)=>{const t=yr(ir(qe,"conversations"),Qt("clientId","==",n),vr("startedAt","desc"),Ni(e));return(await Da(t)).docs.map(s=>({id:s.id,...s.data()}))},P6=async(n,e)=>{const t=ft(qe,"conversations",n),a=await ln(t);if(!a.exists())throw new Error("Conversación no encontrada");const s=a.data();if(await Dn(t,{status:Wt.CLOSED,isActive:!1,closedAt:ut(),updatedAt:ut(),summary:{...e,createdAt:ut()}}),s.clientId){const l=ft(qe,"clients",s.clientId);await Dn(l,{soul:s.currentSoul,updatedAt:ut()})}return n},M6=async(n=null,e=10)=>{let t;return n?t=yr(ir(qe,"conversations"),Qt("status","==",Wt.NEW),Qt("agentId","==",n),vr("startedAt","desc"),Ni(e)):t=yr(ir(qe,"conversations"),Qt("status","==",Wt.NEW),vr("startedAt","desc"),Ni(e)),(await Da(t)).docs.map(s=>({id:s.id,...s.data()}))},cw=async(n=null,e=10)=>{let t;return n?t=yr(ir(qe,"conversations"),Qt("status","==",Wt.ACTIVE),Qt("isActive","==",!0),Qt("agentId","==",n),vr("startedAt","desc"),Ni(e)):t=yr(ir(qe,"conversations"),Qt("status","==",Wt.ACTIVE),Qt("isActive","==",!0),vr("startedAt","desc"),Ni(e)),(await Da(t)).docs.map(s=>({id:s.id,...s.data()}))},k6=async n=>{const e=yr(ir(qe,"conversations"),Qt("clientId","==",n),Qt("isActive","==",!0),Qt("status","in",[Wt.NEW,Wt.ACTIVE]),vr("updatedAt","desc"));return(await Da(e)).docs.map(a=>({id:a.id,...a.data()}))},uw=async(n=null,e=100)=>{let t;return n?t=yr(ir(qe,"conversations"),Qt("status","==",Wt.CLOSED),Qt("agentId","==",n),vr("closedAt","desc"),Ni(e)):t=yr(ir(qe,"conversations"),Qt("status","==",Wt.CLOSED),vr("closedAt","desc"),Ni(e)),(await Da(t)).docs.map(s=>({id:s.id,...s.data()}))},V6=async(n=10)=>{const e=new Date,t=yr(ir(qe,"conversations"),Qt("status","==",Wt.ACTIVE),Qt("isActive","==",!0),Qt("nextActionDate",">=",e),vr("nextActionDate","asc"),Ni(n));return(await Da(t)).docs.map(s=>({id:s.id,...s.data()}))},L6=async(n,e)=>{try{const t=ft(qe,"conversations",n),a=await ln(t);if(!a.exists())throw new Error("Conversación no encontrada");const s=a.data();if(await Dn(t,{currentSoul:e,updatedAt:ut()}),s.clientId){const l=ft(qe,"clients",s.clientId);await Dn(l,{soul:e,updatedAt:ut()})}return e}catch(t){throw console.error("Error al actualizar valores del alma:",t),t}},dw=async n=>{const e=ft(qe,"conversations",n);if(!(await ln(e)).exists())throw new Error("Conversación no encontrada");return await lj(e),n},FE=async(n,e,t=!0)=>{const a=ft(qe,"conversations",n);if(!(await ln(a)).exists())throw new Error("Conversación no encontrada");if(!Object.values(Wt).includes(e))throw new Error("Estado de conversación no válido");return await Dn(a,{status:e,isActive:t,updatedAt:ut()}),n},U6=async(n,e,t)=>{const a=ft(qe,"conversations",n),s=await ln(a);if(!s.exists())throw new Error("Conversación no encontrada");const u=s.data().turns.map(f=>f.id===e?{...f,...t,phase:t.phase||f.phase,isEdited:!0,editedAt:new Date}:f);return await Dn(a,{turns:u,updatedAt:ut()}),u},z6=async(n,e)=>{const t=ft(qe,"conversations",n),a=await ln(t);if(!a.exists())throw new Error("Conversación no encontrada");const l=a.data().turns.filter(u=>u.id!==e);return await Dn(t,{turns:l,updatedAt:ut()}),l},B6=async(n,e)=>{const t=ft(qe,"conversations",n),a=await ln(t);if(!a.exists())throw new Error("Conversación no encontrada");const s=a.data(),l=e.deltas||{relationship:0,history:0,attitude:0,sensitivity:0,probability:0};let u={...s.currentSoul};if(e.event&&e.event!=="neutral"&&e.deltas){const v=E=>Math.min(Math.max(E,0),100);u={relationship:v(u.relationship+(l.relationship||0)),history:v(u.history+(l.history||0)),attitude:v(u.attitude+(l.attitude||0)),sensitivity:v(u.sensitivity+(l.sensitivity||0)),probability:v(u.probability+(l.probability||0))}}const f=new Date,p={id:wy(),timestamp:f,timestampMillis:f.getTime(),...e,phase:e.phase||Ie.NEGOTIATION,deltas:l,currentSoul:u,isManual:!0},y=[...s.turns,p];if(await Dn(t,{turns:y,currentSoul:u,updatedAt:ut()}),e.updateClientSoul&&e.sender==="client"&&e.event!=="neutral"){const v=ft(qe,"clients",s.clientId);await Dn(v,{soul:u,updatedAt:ut()})}return{turns:y,currentSoul:u}},Mp=({title:n,conversations:e,isLoading:t,emptyMessage:a="No hay conversaciones disponibles",showClientInfo:s=!0,onConversationDeleted:l=null})=>{const u=Tn(),[f,p]=V.useState(e),y=async(E,T)=>{if(T.stopPropagation(),window.confirm("¿Está seguro que desea eliminar esta conversación? Esta acción es permanente y no se puede deshacer."))try{await dw(E),l?l(E):p(C=>C.filter(A=>A.id!==E))}catch(C){console.error("Error al eliminar conversación:",C),alert("Error al eliminar la conversación: "+C.message)}};if(t)return m.jsxs("div",{className:"bg-white p-4 rounded-lg shadow mb-6",children:[m.jsx("h2",{className:"text-lg font-semibold mb-4",children:n}),m.jsx("div",{className:"animate-pulse flex space-x-4",children:m.jsxs("div",{className:"flex-1 space-y-4 py-1",children:[m.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("div",{className:"h-4 bg-gray-200 rounded"}),m.jsx("div",{className:"h-4 bg-gray-200 rounded w-5/6"})]})]})})]});const v=l?e:f;return m.jsxs("div",{className:"bg-white p-4 rounded-lg shadow mb-6",children:[m.jsx("h2",{className:"text-lg font-semibold mb-4",children:n}),v.length===0?m.jsx("p",{className:"text-gray-500 text-center py-4",children:a}):m.jsx("ul",{className:"divide-y divide-gray-200",children:v.map(E=>{const C=(E.turns&&E.turns.length>0?E.turns[E.turns.length-1].sender:null)==="client"?"border-l-4 border-green-500":"border-l-4 border-gray-300",A=E.startedAt?zE(new Date(E.startedAt.seconds*1e3),{addSuffix:!0,locale:bi}):"Fecha desconocida";return m.jsxs("li",{className:`p-3 hover:bg-gray-50 cursor-pointer ${C}`,onClick:()=>u(`/conversation/${E.id}`),children:[m.jsxs("div",{className:"flex justify-between",children:[m.jsxs("span",{className:"font-medium",children:[s?E.clientName||"Cliente":"",E.isActive&&m.jsx("span",{className:"ml-2 px-1.5 py-0.5 bg-green-100 text-green-800 text-xs rounded-full",children:"Activa"})]}),m.jsxs("div",{className:"flex items-center space-x-2",children:[m.jsx("span",{className:"text-sm text-gray-500",children:A}),m.jsx("button",{className:"text-red-500 hover:text-red-700",onClick:M=>y(E.id,M),title:"Eliminar conversación",children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),E.turns&&E.turns.length>0&&m.jsx("p",{className:"text-sm text-gray-600 mt-1 truncate",children:E.turns[E.turns.length-1].message}),E.nextActionDate&&m.jsxs("div",{className:"mt-2 text-xs text-blue-600",children:["Próxima acción: ",zE(new Date(E.nextActionDate.seconds*1e3),{addSuffix:!0,locale:bi})]})]},E.id)})})]})},q6=({onFilterChange:n})=>{const[e,t]=V.useState("newest"),a=s=>{t(s),n(s)};return m.jsxs("div",{className:"flex space-x-2 mb-4",children:[m.jsx("button",{className:`px-3 py-1 text-sm rounded-full ${e==="newest"?"bg-primary-100 text-primary-800":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,onClick:()=>a("newest"),children:"Más recientes"}),m.jsx("button",{className:`px-3 py-1 text-sm rounded-full ${e==="upcoming"?"bg-primary-100 text-primary-800":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,onClick:()=>a("upcoming"),children:"Próxima fecha"})]})},F6=()=>{const{currentUser:n}=ru(),[e,t]=V.useState([]),[a,s]=V.useState([]),[l,u]=V.useState([]),[f,p]=V.useState(!0),[y,v]=V.useState("newest");V.useEffect(()=>{(async()=>{p(!0);try{let A;y==="newest"?A=await M6(n.uid):A=await V6();const M=await cw(n.uid),I=await uw(n.uid);t(A),s(M),u(I)}catch(A){console.error("Error al cargar conversaciones:",A)}finally{p(!1)}})()},[n,y]);const E=C=>{v(C)},T=C=>{t(A=>A.filter(M=>M.id!==C)),s(A=>A.filter(M=>M.id!==C)),u(A=>A.filter(M=>M.id!==C))};return m.jsxs("div",{className:"container mx-auto px-4 py-6",children:[m.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Dashboard"}),m.jsx(jj,{}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[m.jsxs("div",{children:[m.jsxs("div",{className:"mb-2",children:[m.jsx("h2",{className:"text-lg font-semibold",children:"Nuevas Conversaciones"}),m.jsx(q6,{onFilterChange:E})]}),m.jsx(Mp,{title:"",conversations:e,isLoading:f,emptyMessage:"No hay nuevas conversaciones",onConversationDeleted:T}),m.jsx(Mp,{title:"Conversaciones Activas",conversations:a,isLoading:f,emptyMessage:"No hay conversaciones activas",onConversationDeleted:T})]}),m.jsx("div",{children:m.jsx(Mp,{title:"Historial de Conversaciones",conversations:l,isLoading:f,emptyMessage:"No hay conversaciones en el historial",onConversationDeleted:T})})]})]})},H6=ir(qe,"providers"),hw=async n=>{if(!n)return await Nh("39gNkqv2h1P9O1FLBjLf");const e=ft(qe,"providers",n),t=await ln(e);return t.exists()?{id:t.id,...t.data()}:await Nh("39gNkqv2h1P9O1FLBjLf")},Nh=async n=>{if(!n)return null;const e=ft(qe,"providers",n),t=await ln(e);return t.exists()?{id:t.id,...t.data()}:null},fw=async()=>(await Da(yr(H6,vr("name","asc")))).docs.map(e=>({id:e.id,...e.data()})),Yo=({initialValues:n,onChange:e,readOnly:t=!1})=>{const[a,s]=V.useState({relationship:50,history:50,attitude:50,sensitivity:50,probability:50,...n});V.useEffect(()=>{n&&s({relationship:50,history:50,attitude:50,sensitivity:50,probability:50,...n})},[n]);const l=(p,y)=>{const v={...a,[p]:parseInt(y,10)};s(v),e&&e(v)},u=p=>p<30?"bg-red-500":p<50?"bg-orange-500":p<70?"bg-yellow-500":"bg-green-500",f=(p,y,v)=>m.jsxs("div",{className:"mb-6",children:[m.jsxs("div",{className:"flex justify-between items-center mb-2",children:[m.jsx("label",{className:"text-sm font-medium text-gray-700",children:p}),m.jsx("span",{className:`px-2 py-1 rounded-full text-white text-xs font-medium ${u(a[y])}`,children:a[y]})]}),m.jsx("input",{type:"range",min:"0",max:"100",step:"1",value:a[y],onChange:E=>l(y,E.target.value),disabled:t,className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"}),m.jsx("p",{className:"mt-1 text-sm text-gray-500",children:v})]});return m.jsxs("div",{className:"space-y-2",children:[f("Relación/Cercanía","relationship","Indica cuán cercana es la relación con el cliente."),f("Historial de Pago","history","Nivel de cumplimiento de pagos en el pasado."),f("Actitud en la Llamada","attitude","Disposición emocional del cliente en la conversación."),f("Sensibilidad a Presión","sensitivity","Nivel de reacción negativa a la insistencia o tono de urgencia."),f("Probabilidad de Pago","probability","Estimación de si pagará pronto.")]})},G6=()=>{const{clientId:n}=Tg(),e=Tn(),[t,a]=V.useState(null),[s,l]=V.useState(""),[u,f]=V.useState([]),[p,y]=V.useState([]),[v,E]=V.useState([]),[T,C]=V.useState(!0),[A,M]=V.useState(!1),[I,G]=V.useState(null);V.useEffect(()=>{(async()=>{try{C(!0);const j=await of(n);a(j),G(j);const L=await k6(n),z=await Ay(n,10);y(L);const O=z.filter(dt=>!dt.isActive);E(O)}catch(j){console.error("Error al cargar datos del cliente:",j)}finally{C(!1)}})()},[n]);const Q=async N=>{const j=await Nh(N),L=j?j.name:"Sin proveedor";l(L)};V.useEffect(()=>{t!=null&&t.provider_id&&Q(t.provider_id)},[t]);const q=async()=>{try{const N=await fw();f(N)}catch(N){console.error("Error al cargar proveedores:",N)}};V.useEffect(()=>{q()},[A]);const oe=N=>{const{name:j,value:L}=N.target;G(z=>({...z,[j]:j==="debt"?parseFloat(L)||0:L}))},ce=N=>{G(j=>({...j,soul:N}))},pe=async N=>{N.preventDefault();try{C(!0),await R6(n,{name:I.name,email:I.email,phone:I.phone,notes:I.notes,soul:I.soul,provider_id:I.provider_id?I.provider_id:""}),t.debt!==I.debt&&await I6(n,I.debt),a(I),M(!1)}catch(j){console.error("Error al actualizar cliente:",j)}finally{C(!1)}},P=()=>{e(`/conversation/new/${n}`)},R=N=>{if(!N)return"N/A";const j=new Date(N.seconds*1e3);return Vo(j,"PPP",{locale:bi})};return T&&!t?m.jsx("div",{className:"container mx-auto px-4 py-6",children:m.jsxs("div",{className:"animate-pulse",children:[m.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-6"}),m.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-4"}),m.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-4"}),m.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/3 mb-4"})]})}):t?m.jsxs("div",{className:"container mx-auto px-4 py-6",children:[m.jsxs("div",{className:"flex justify-between items-center mb-6",children:[m.jsx("h1",{className:"text-2xl font-bold",children:t.name}),m.jsx("div",{className:"flex gap-2",children:A?m.jsx("button",{className:"btn-secondary",onClick:()=>{G(t),M(!1)},children:"Cancelar Edición"}):m.jsxs(m.Fragment,{children:[m.jsx("button",{className:"btn-secondary",onClick:()=>M(!0),children:"Editar"}),m.jsx("button",{className:"btn-primary",onClick:P,children:"Nueva Conversación"})]})})]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[m.jsxs("div",{className:"md:col-span-2",children:[A?m.jsxs("form",{onSubmit:pe,className:"bg-white rounded-lg shadow p-6",children:[m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"name",className:"label",children:"Nombre completo"}),m.jsx("input",{type:"text",id:"name",name:"name",className:"input",value:I.name,onChange:oe,required:!0})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"email",className:"label",children:"Email"}),m.jsx("input",{type:"email",id:"email",name:"email",className:"input",value:I.email,onChange:oe})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"phone",className:"label",children:"Teléfono"}),m.jsx("input",{type:"text",id:"phone",name:"phone",className:"input",value:I.phone,onChange:oe,required:!0})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"debt",className:"label",children:"Monto de deuda"}),m.jsx("input",{type:"number",id:"debt",name:"debt",className:"input",value:I.debt,onChange:oe,required:!0})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"provider",className:"label",children:"Proveedor"}),m.jsxs("select",{id:"provider",name:"provider_id",className:"input",value:I.provider_id||"",onChange:oe,children:[m.jsx("option",{value:"",children:"Seleccionar proveedor"}),u.map(N=>m.jsx("option",{value:N.id,children:N.name},N.id))]})]}),m.jsxs("div",{className:"form-group md:col-span-2",children:[m.jsx("label",{htmlFor:"notes",className:"label",children:"Notas"}),m.jsx("textarea",{id:"notes",name:"notes",rows:"3",className:"input",value:I.notes,onChange:oe})]})]}),m.jsxs("div",{className:"mt-6",children:[m.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Variables del Alma"}),m.jsx(Yo,{initialValues:I.soul,onChange:ce,readOnly:!1}),m.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Ajuste las variables de relación con el cliente según su conocimiento actual."})]}),m.jsx("div",{className:"flex justify-end mt-6",children:m.jsx("button",{type:"submit",className:"btn-primary",disabled:T,children:T?"Guardando...":"Guardar Cambios"})})]}):m.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-y-4",children:[m.jsxs("div",{children:[m.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Email"}),m.jsx("p",{children:t.email||"No disponible"})]}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Teléfono"}),m.jsx("p",{children:t.phone||"No disponible"})]}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Monto de deuda"}),m.jsxs("p",{className:"text-xl font-semibold text-red-600",children:["$",t.debt.toLocaleString("es-CO")]})]}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Último contacto"}),m.jsx("p",{children:t.lastContact?R(t.lastContact):"Sin contacto reciente"})]}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Proveedor"}),m.jsx("p",{children:t.provider_id?s:"Sin proveedor"})]}),t.notes&&m.jsxs("div",{className:"md:col-span-2 mt-4",children:[m.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"Notas"}),m.jsx("p",{className:"text-gray-700 whitespace-pre-line",children:t.notes})]})]})}),m.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mt-6",children:[m.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Conversaciones Activas"}),p.length===0?m.jsx("p",{className:"text-gray-500 text-center py-4",children:"No hay conversaciones activas con este cliente."}):m.jsx("ul",{className:"divide-y divide-gray-200",children:p.map(N=>{const j=N.startedAt?Vo(new Date(N.startedAt.seconds*1e3),"PPp",{locale:bi}):"Fecha desconocida",L=N.turns&&N.turns.length>0?N.turns[N.turns.length-1]:null;return m.jsxs("li",{className:"py-3 cursor-pointer hover:bg-gray-50",onClick:()=>e(`/conversation/${N.id}`),children:[m.jsxs("div",{className:"flex justify-between",children:[m.jsxs("span",{className:"font-medium",children:["Conversación del ",j]}),m.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Activa"})]}),L&&m.jsxs("p",{className:"text-sm text-gray-600 mt-1 truncate",children:[m.jsx("span",{className:"font-medium",children:L.sender==="agent"?"Agente: ":"Cliente: "}),L.message]})]},N.id)})}),m.jsx("div",{className:"mt-4",children:m.jsx("button",{className:"btn-primary",onClick:P,children:"Iniciar Nueva Conversación"})})]}),m.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mt-6",children:[m.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Historial de Conversaciones"}),v.length===0?m.jsx("p",{className:"text-gray-500 text-center py-4",children:"No hay conversaciones en el historial."}):m.jsx("ul",{className:"divide-y divide-gray-200",children:v.map(N=>{const j=N.startedAt?Vo(new Date(N.startedAt.seconds*1e3),"PPp",{locale:bi}):"Fecha desconocida",L=N.turns&&N.turns.length>0?N.turns[N.turns.length-1]:null;return m.jsxs("li",{className:"py-3 cursor-pointer hover:bg-gray-50",onClick:()=>e(`/conversation/${N.id}`),children:[m.jsxs("div",{className:"flex justify-between",children:[m.jsxs("span",{className:"font-medium",children:["Conversación del ",j]}),m.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${N.status==="closed"?"bg-gray-100 text-gray-800":"bg-blue-100 text-blue-800"}`,children:N.status==="closed"?"Finalizada":"Inactiva"})]}),L&&m.jsxs("p",{className:"text-sm text-gray-600 mt-1 truncate",children:[m.jsx("span",{className:"font-medium",children:L.sender==="agent"?"Agente: ":"Cliente: "}),L.message]}),N.summary&&m.jsxs("div",{className:"mt-1 text-xs",children:[m.jsx("span",{className:"text-gray-500",children:"Resultado: "}),m.jsx("span",{className:"font-medium",children:N.summary.result})]})]},N.id)})})]})]}),m.jsx("div",{children:m.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[m.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Variables del Alma"}),m.jsx(Yo,{initialValues:A?I.soul:t.soul,onChange:A?ce:null,readOnly:!A}),m.jsxs("div",{className:"mt-4 text-sm text-gray-500",children:[m.jsx("p",{children:"Estas variables representan la disposición y relación del cliente, y se ajustan automáticamente durante las conversaciones."}),m.jsx("p",{className:"mt-2",children:'Para modificar estos valores, utilice el botón "Editar" en la parte superior.'})]})]})})]})]}):m.jsxs("div",{className:"container mx-auto px-4 py-6",children:[m.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:[m.jsx("strong",{className:"font-bold",children:"Error:"}),m.jsxs("span",{className:"block sm:inline",children:[" ","No se pudo encontrar el cliente."]})]}),m.jsx("button",{className:"btn-secondary mt-4",onClick:()=>e(-1),children:"Volver"})]})},$6=()=>{const n=Tn(),[e,t]=V.useState(""),[a,s]=V.useState([]),[l,u]=V.useState(!1),[f,p]=V.useState(!1),y=async v=>{if(v.preventDefault(),!!e.trim()){u(!0),p(!0);try{const E=await C6(e);s(E)}catch(E){console.error("Error al buscar clientes:",E)}finally{u(!1)}}};return m.jsxs("div",{className:"container mx-auto px-4 py-6",children:[m.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Buscar Cliente"}),m.jsx("form",{onSubmit:y,className:"mb-6",children:m.jsxs("div",{className:"flex gap-2",children:[m.jsx("input",{type:"text",className:"input flex-grow",placeholder:"Nombre, teléfono o email del cliente",value:e,onChange:v=>t(v.target.value)}),m.jsx("button",{type:"submit",className:"btn-primary",disabled:l,children:l?"Buscando...":"Buscar"})]})}),m.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[m.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Resultados"}),l?m.jsxs("div",{className:"animate-pulse space-y-4 py-4",children:[m.jsx("div",{className:"h-5 bg-gray-200 rounded w-3/4"}),m.jsx("div",{className:"h-5 bg-gray-200 rounded w-1/2"}),m.jsx("div",{className:"h-5 bg-gray-200 rounded w-5/6"})]}):a.length===0?m.jsx("p",{className:"text-gray-500 text-center py-4",children:f?"No se encontraron resultados. Intente con otros términos de búsqueda.":"Ingrese un término de búsqueda para encontrar clientes."}):m.jsx("ul",{className:"divide-y divide-gray-200",children:a.map(v=>m.jsxs("li",{className:"py-3 hover:bg-gray-50 cursor-pointer",onClick:()=>n(`/clients/${v.id}`),children:[m.jsxs("div",{className:"flex justify-between",children:[m.jsx("span",{className:"font-medium",children:v.name}),m.jsxs("span",{className:"text-red-600 font-medium",children:["$",v.debt.toLocaleString("es-CO")]})]}),m.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:[v.phone," ",v.email&&`| ${v.email}`]}),m.jsxs("div",{className:"flex mt-2 space-x-2",children:[m.jsx("button",{className:"text-sm text-primary-600 hover:text-primary-800",onClick:E=>{E.stopPropagation(),n(`/clients/${v.id}`)},children:"Ver detalles"}),m.jsx("button",{className:"text-sm text-primary-600 hover:text-primary-800",onClick:E=>{E.stopPropagation(),n(`/conversation/new/${v.id}`)},children:"Iniciar conversación"})]})]},v.id))})]}),m.jsx("div",{className:"mt-6",children:m.jsx("button",{className:"btn-secondary",onClick:()=>n(-1),children:"Volver"})})]})},Y6=()=>{const n=Tn(),[e,t]=V.useState({name:"",email:"",phone:"",debt:"",notes:"",provider_id:""}),[a,s]=V.useState({relationship:50,history:50,attitude:50,sensitivity:50,probability:50}),[l,u]=V.useState(!1),[f,p]=V.useState(""),[y,v]=V.useState([]),E=async()=>{try{const A=await fw();v(A)}catch(A){console.error("Error al cargar proveedores:",A)}};V.useEffect(()=>{E()},[]);const T=A=>{const{name:M,value:I}=A.target;t(G=>({...G,[M]:M==="debt"?parseFloat(I)||"":I}))},C=async A=>{if(A.preventDefault(),p(""),!e.name.trim()){p("El nombre del cliente es obligatorio");return}if(!e.phone.trim()){p("El teléfono es obligatorio");return}if(isNaN(e.debt)||e.debt===""){p("Debe ingresar un monto de deuda válido");return}try{u(!0);const M={...e,...a},I=await N6(M);console.log("Cliente creado con ID:",I),n(`/clients/${I}`)}catch(M){console.error("Error al crear el cliente:",M),p("Ocurrió un error al crear el cliente. Por favor, intente nuevamente.")}finally{u(!1)}};return m.jsxs("div",{className:"container mx-auto px-4 py-6",children:[m.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Agregar Nuevo Cliente"}),f&&m.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-6",role:"alert",children:m.jsx("span",{className:"block sm:inline",children:f})}),m.jsxs("form",{onSubmit:C,className:"bg-white rounded-lg shadow p-6",children:[m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"name",className:"label",children:"Nombre completo *"}),m.jsx("input",{type:"text",id:"name",name:"name",className:"input",value:e.name,onChange:T,required:!0})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"email",className:"label",children:"Email"}),m.jsx("input",{type:"email",id:"email",name:"email",className:"input",value:e.email,onChange:T})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"phone",className:"label",children:"Teléfono *"}),m.jsx("input",{type:"text",id:"phone",name:"phone",className:"input",value:e.phone,onChange:T,required:!0})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"debt",className:"label",children:"Monto de deuda *"}),m.jsx("input",{type:"number",id:"debt",name:"debt",className:"input",value:e.debt,onChange:T,required:!0})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"provider",className:"label",children:"Proveedor"}),m.jsxs("select",{id:"provider",name:"provider_id",className:"input",value:e.provider_id,onChange:T,children:[m.jsx("option",{value:"",children:"Seleccionar proveedor"}),y.map(A=>m.jsx("option",{value:A.id,children:A.name},A.id))]})]}),m.jsxs("div",{className:"form-group md:col-span-2",children:[m.jsx("label",{htmlFor:"notes",className:"label",children:"Notas"}),m.jsx("textarea",{id:"notes",name:"notes",rows:"3",className:"input",value:e.notes,onChange:T})]})]}),m.jsx("h3",{className:"text-lg font-semibold mt-8 mb-4",children:"Variables del Alma del Cliente"}),m.jsx(Yo,{initialValues:a,onChange:s}),m.jsxs("div",{className:"flex justify-end gap-4 mt-8",children:[m.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>n(-1),disabled:l,children:"Cancelar"}),m.jsx("button",{type:"submit",className:"btn-primary",disabled:l,children:l?"Guardando...":"Guardar Cliente"})]})]})]})},K6=()=>{const n=Tn(),[e,t]=V.useState([]),[a,s]=V.useState(!0),[l,u]=V.useState("");V.useEffect(()=>{(async()=>{try{const y=await iu();t(y)}catch(y){console.error("Error al cargar clientes:",y)}finally{s(!1)}})()},[]);const f=e.filter(p=>p.name.toLowerCase().includes(l.toLowerCase())||p.email.toLowerCase().includes(l.toLowerCase())||p.phone.includes(l));return m.jsxs("div",{className:"container mx-auto px-4 py-6",children:[m.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Seleccionar Cliente para Conversación"}),m.jsx("div",{className:"mb-6",children:m.jsx("input",{type:"text",className:"input",placeholder:"Buscar cliente...",value:l,onChange:p=>u(p.target.value)})}),m.jsx("div",{className:"bg-white rounded-lg shadow",children:a?m.jsx("div",{className:"p-4",children:"Cargando clientes..."}):f.length===0?m.jsxs("div",{className:"p-4 text-center",children:[m.jsx("p",{className:"text-gray-500",children:"No se encontraron clientes."}),m.jsx("button",{className:"btn-primary mt-4",onClick:()=>n("/clients/new"),children:"Agregar Nuevo Cliente"})]}):m.jsx("ul",{className:"divide-y divide-gray-200",children:f.map(p=>m.jsxs("li",{className:"p-4 hover:bg-gray-50 cursor-pointer",onClick:()=>n(`/conversation/new/${p.id}`),children:[m.jsxs("div",{className:"flex justify-between",children:[m.jsx("span",{className:"font-medium",children:p.name}),m.jsxs("span",{className:"text-primary-600 font-semibold",children:["$",p.debt.toLocaleString()]})]}),m.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:[p.phone," | ",p.email]})]},p.id))})}),m.jsx("div",{className:"mt-6",children:m.jsx("button",{className:"btn-secondary",onClick:()=>n(-1),children:"Volver"})})]})},Q6=()=>{const n=Tn(),[e,t]=V.useState([]),[a,s]=V.useState(!0),[l,u]=V.useState("");V.useEffect(()=>{(async()=>{try{s(!0);const y=await iu();t(y)}catch(y){console.error("Error al cargar clientes:",y)}finally{s(!1)}})()},[]);const f=e.filter(p=>p.name.toLowerCase().includes(l.toLowerCase())||p.email&&p.email.toLowerCase().includes(l.toLowerCase())||p.phone&&p.phone.includes(l));return m.jsxs("div",{className:"container mx-auto px-4 py-6",children:[m.jsxs("div",{className:"flex justify-between items-center mb-6",children:[m.jsx("h1",{className:"text-2xl font-bold",children:"Clientes"}),m.jsxs("div",{className:"flex space-x-2",children:[m.jsxs("button",{className:"btn-primary flex items-center gap-2",onClick:()=>n("/clients/new"),children:[m.jsx(ew,{})," Agregar Cliente"]}),m.jsxs("button",{className:"btn-secondary flex items-center gap-2",onClick:()=>n("/clients/search"),children:[m.jsx(tw,{})," Búsqueda Avanzada"]})]})]}),m.jsx("div",{className:"mb-6",children:m.jsx("input",{type:"text",className:"input",placeholder:"Buscar cliente por nombre, email o teléfono...",value:l,onChange:p=>u(p.target.value)})}),m.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:a?m.jsx("div",{className:"p-4",children:m.jsxs("div",{className:"animate-pulse space-y-4",children:[m.jsx("div",{className:"h-5 bg-gray-200 rounded"}),m.jsx("div",{className:"h-5 bg-gray-200 rounded"}),m.jsx("div",{className:"h-5 bg-gray-200 rounded"})]})}):f.length===0?m.jsxs("div",{className:"p-8 text-center",children:[m.jsx("p",{className:"text-gray-500 mb-4",children:"No se encontraron clientes."}),m.jsx("button",{className:"btn-primary",onClick:()=>n("/clients/new"),children:"Agregar Nuevo Cliente"})]}):m.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[m.jsx("thead",{className:"bg-gray-50",children:m.jsxs("tr",{children:[m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nombre"}),m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contacto"}),m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Deuda"}),m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado del Alma"}),m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),m.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:f.map(p=>m.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>n(`/clients/${p.id}`),children:[m.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:m.jsx("div",{className:"font-medium text-gray-900",children:p.name})}),m.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[m.jsx("div",{className:"text-sm text-gray-500",children:p.phone}),m.jsx("div",{className:"text-sm text-gray-500",children:p.email})]}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:m.jsxs("div",{className:"text-sm font-medium text-red-600",children:["$",p.debt.toLocaleString("es-CO")]})}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:m.jsx("div",{className:"flex space-x-1",children:p.soul&&m.jsxs(m.Fragment,{children:[m.jsxs("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${p.soul.relationship>70?"bg-green-100 text-green-800":p.soul.relationship>40?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:["R:",p.soul.relationship]}),m.jsxs("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${p.soul.probability>70?"bg-green-100 text-green-800":p.soul.probability>40?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:["P:",p.soul.probability]})]})})}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:m.jsx("button",{className:"text-primary-600 hover:text-primary-900 mr-3",onClick:y=>{y.stopPropagation(),n(`/conversation/new/${p.id}`)},children:"Iniciar Conversación"})})]},p.id))})]})})]})},W6=async(n,e,t)=>{const a=n.toLowerCase();let s="neutral";a.includes("pagar")||a.includes("transferir")||a.includes("depositar")?a.includes("completo")||a.includes("todo")?s="accepts_payment":a.includes("parte")||a.includes("parcial")||a.includes("algo")?s="offers_partial":(a.includes("próxima")||a.includes("después")||a.includes("luego"))&&(s="reschedule"):a.includes("gracias")||a.includes("agradezco")?s="thanks":a.includes("ya pagué")||a.includes("realicé el pago")||a.includes("transferí")?s="confirms_payment":a.includes("no puedo")||a.includes("imposible")?s="evades":a.includes("molesto")||a.includes("harto")||a.includes("fastidio")?s="annoyed":(a.includes("no voy a pagar")||a.includes("no pagaré")||a.includes("olvídate"))&&(s="refuses");const l={neutral:{relationship:0,history:0,attitude:0,sensitivity:0,probability:0},accepts_payment:{relationship:5,history:10,attitude:10,sensitivity:-5,probability:20},offers_partial:{relationship:5,history:5,attitude:10,sensitivity:-5,probability:15},reschedule:{relationship:2,history:-5,attitude:5,sensitivity:0,probability:-5},evades:{relationship:-5,history:-5,attitude:-10,sensitivity:5,probability:-10},annoyed:{relationship:-10,history:-5,attitude:-15,sensitivity:10,probability:-15},refuses:{relationship:-20,history:-20,attitude:-20,sensitivity:20,probability:-30},thanks:{relationship:5,history:0,attitude:10,sensitivity:-5,probability:10},no_answer:{relationship:-5,history:-10,attitude:-5,sensitivity:0,probability:-10},confirms_payment:{relationship:10,history:20,attitude:20,sensitivity:-10,probability:30}},u=l[s]||l.neutral;return{eventType:s,deltas:u,explanation:`Evento detectado "${s}" basado en palabras clave como "${a.split(" ").slice(0,3).join(" ")}..."`,confidence:.7}},X6=async(n,e,t,a)=>{let s="neutral";e.relationship>70?e.sensitivity>70?s="friendly_no_pressure":s="friendly":e.relationship<40&&(e.sensitivity<40?s="formal_direct":s="formal_soft");const l={accepts_payment:{friendly_no_pressure:"¡Excelente noticia! Gracias por tu disposición. Cuando puedas hacer el pago, solo avísame.",friendly:"¡Perfecto! Muchas gracias por tu colaboración. ¿Te envío los datos para el pago?",formal_direct:"Muy bien. Le agradecemos su decisión. Necesitamos que realice el pago antes del fin de semana.",formal_soft:"Gracias por su confirmación. ¿Prefiere que le enviemos los datos bancarios por este medio?",neutral:"Entendido. ¿Desea que le enviemos la información para realizar el pago?"},offers_partial:{friendly_no_pressure:"Agradezco mucho tu esfuerzo por pagar una parte. Cualquier aporte es bienvenido.",friendly:"Gracias por tu disposición. Un pago parcial nos ayuda mucho. ¿Cuándo podrías realizar este abono?",formal_direct:"Tomamos nota de su oferta de pago parcial. ¿Cuándo podríamos esperar el resto del monto?",formal_soft:"Entendemos su situación. El pago parcial es un buen primer paso. ¿Cuándo sería posible?",neutral:"De acuerdo con el pago parcial. ¿Qué monto podría transferir y cuándo?"},default:{friendly_no_pressure:"Entiendo perfectamente. No te preocupes, cuando puedas realizar el pago me avisas.",friendly:"Agradezco que estemos en contacto. ¿Hay algo en lo que pueda ayudarte para facilitar el proceso?",formal_direct:"Necesitamos regularizar su situación. ¿Podría por favor indicarnos una fecha concreta de pago?",formal_soft:"Entendemos que pueden surgir contratiempos. ¿Podría comentarnos cuándo le sería posible realizar el pago?",neutral:"¿Podría por favor indicarnos cuándo podríamos esperar el pago?"}},u=l[a]||l.default;return{responseText:u[s]||u.neutral,explanation:`Respuesta generada usando tono "${s}" basado en Relación: ${e.relationship}, Sensibilidad: ${e.sensitivity}`,confidence:.8}};function mw(n,e){return function(){return n.apply(e,arguments)}}const{toString:Z6}=Object.prototype,{getPrototypeOf:Sy}=Object,{iterator:lf,toStringTag:pw}=Symbol,cf=(n=>e=>{const t=Z6.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),br=n=>(n=n.toLowerCase(),e=>cf(e)===n),uf=n=>e=>typeof e===n,{isArray:al}=Array,qc=uf("undefined");function J6(n){return n!==null&&!qc(n)&&n.constructor!==null&&!qc(n.constructor)&&Rn(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const gw=br("ArrayBuffer");function e3(n){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&gw(n.buffer),e}const t3=uf("string"),Rn=uf("function"),yw=uf("number"),df=n=>n!==null&&typeof n=="object",n3=n=>n===!0||n===!1,Jd=n=>{if(cf(n)!=="object")return!1;const e=Sy(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(pw in n)&&!(lf in n)},r3=br("Date"),a3=br("File"),i3=br("Blob"),s3=br("FileList"),o3=n=>df(n)&&Rn(n.pipe),l3=n=>{let e;return n&&(typeof FormData=="function"&&n instanceof FormData||Rn(n.append)&&((e=cf(n))==="formdata"||e==="object"&&Rn(n.toString)&&n.toString()==="[object FormData]"))},c3=br("URLSearchParams"),[u3,d3,h3,f3]=["ReadableStream","Request","Response","Headers"].map(br),m3=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function su(n,e,{allOwnKeys:t=!1}={}){if(n===null||typeof n>"u")return;let a,s;if(typeof n!="object"&&(n=[n]),al(n))for(a=0,s=n.length;a<s;a++)e.call(null,n[a],a,n);else{const l=t?Object.getOwnPropertyNames(n):Object.keys(n),u=l.length;let f;for(a=0;a<u;a++)f=l[a],e.call(null,n[f],f,n)}}function vw(n,e){e=e.toLowerCase();const t=Object.keys(n);let a=t.length,s;for(;a-- >0;)if(s=t[a],e===s.toLowerCase())return s;return null}const ys=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,_w=n=>!qc(n)&&n!==ys;function fg(){const{caseless:n}=_w(this)&&this||{},e={},t=(a,s)=>{const l=n&&vw(e,s)||s;Jd(e[l])&&Jd(a)?e[l]=fg(e[l],a):Jd(a)?e[l]=fg({},a):al(a)?e[l]=a.slice():e[l]=a};for(let a=0,s=arguments.length;a<s;a++)arguments[a]&&su(arguments[a],t);return e}const p3=(n,e,t,{allOwnKeys:a}={})=>(su(e,(s,l)=>{t&&Rn(s)?n[l]=mw(s,t):n[l]=s},{allOwnKeys:a}),n),g3=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),y3=(n,e,t,a)=>{n.prototype=Object.create(e.prototype,a),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:e.prototype}),t&&Object.assign(n.prototype,t)},v3=(n,e,t,a)=>{let s,l,u;const f={};if(e=e||{},n==null)return e;do{for(s=Object.getOwnPropertyNames(n),l=s.length;l-- >0;)u=s[l],(!a||a(u,n,e))&&!f[u]&&(e[u]=n[u],f[u]=!0);n=t!==!1&&Sy(n)}while(n&&(!t||t(n,e))&&n!==Object.prototype);return e},_3=(n,e,t)=>{n=String(n),(t===void 0||t>n.length)&&(t=n.length),t-=e.length;const a=n.indexOf(e,t);return a!==-1&&a===t},b3=n=>{if(!n)return null;if(al(n))return n;let e=n.length;if(!yw(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=n[e];return t},E3=(n=>e=>n&&e instanceof n)(typeof Uint8Array<"u"&&Sy(Uint8Array)),x3=(n,e)=>{const a=(n&&n[lf]).call(n);let s;for(;(s=a.next())&&!s.done;){const l=s.value;e.call(n,l[0],l[1])}},T3=(n,e)=>{let t;const a=[];for(;(t=n.exec(e))!==null;)a.push(t);return a},w3=br("HTMLFormElement"),A3=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,a,s){return a.toUpperCase()+s}),HE=(({hasOwnProperty:n})=>(e,t)=>n.call(e,t))(Object.prototype),S3=br("RegExp"),bw=(n,e)=>{const t=Object.getOwnPropertyDescriptors(n),a={};su(t,(s,l)=>{let u;(u=e(s,l,n))!==!1&&(a[l]=u||s)}),Object.defineProperties(n,a)},N3=n=>{bw(n,(e,t)=>{if(Rn(n)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const a=n[t];if(Rn(a)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},C3=(n,e)=>{const t={},a=s=>{s.forEach(l=>{t[l]=!0})};return al(n)?a(n):a(String(n).split(e)),t},R3=()=>{},I3=(n,e)=>n!=null&&Number.isFinite(n=+n)?n:e;function D3(n){return!!(n&&Rn(n.append)&&n[pw]==="FormData"&&n[lf])}const O3=n=>{const e=new Array(10),t=(a,s)=>{if(df(a)){if(e.indexOf(a)>=0)return;if(!("toJSON"in a)){e[s]=a;const l=al(a)?[]:{};return su(a,(u,f)=>{const p=t(u,s+1);!qc(p)&&(l[f]=p)}),e[s]=void 0,l}}return a};return t(n,0)},j3=br("AsyncFunction"),P3=n=>n&&(df(n)||Rn(n))&&Rn(n.then)&&Rn(n.catch),Ew=((n,e)=>n?setImmediate:e?((t,a)=>(ys.addEventListener("message",({source:s,data:l})=>{s===ys&&l===t&&a.length&&a.shift()()},!1),s=>{a.push(s),ys.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",Rn(ys.postMessage)),M3=typeof queueMicrotask<"u"?queueMicrotask.bind(ys):typeof process<"u"&&process.nextTick||Ew,k3=n=>n!=null&&Rn(n[lf]),X={isArray:al,isArrayBuffer:gw,isBuffer:J6,isFormData:l3,isArrayBufferView:e3,isString:t3,isNumber:yw,isBoolean:n3,isObject:df,isPlainObject:Jd,isReadableStream:u3,isRequest:d3,isResponse:h3,isHeaders:f3,isUndefined:qc,isDate:r3,isFile:a3,isBlob:i3,isRegExp:S3,isFunction:Rn,isStream:o3,isURLSearchParams:c3,isTypedArray:E3,isFileList:s3,forEach:su,merge:fg,extend:p3,trim:m3,stripBOM:g3,inherits:y3,toFlatObject:v3,kindOf:cf,kindOfTest:br,endsWith:_3,toArray:b3,forEachEntry:x3,matchAll:T3,isHTMLForm:w3,hasOwnProperty:HE,hasOwnProp:HE,reduceDescriptors:bw,freezeMethods:N3,toObjectSet:C3,toCamelCase:A3,noop:R3,toFiniteNumber:I3,findKey:vw,global:ys,isContextDefined:_w,isSpecCompliantForm:D3,toJSONObject:O3,isAsyncFn:j3,isThenable:P3,setImmediate:Ew,asap:M3,isIterable:k3};function je(n,e,t,a,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),a&&(this.request=a),s&&(this.response=s,this.status=s.status?s.status:null)}X.inherits(je,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:X.toJSONObject(this.config),code:this.code,status:this.status}}});const xw=je.prototype,Tw={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{Tw[n]={value:n}});Object.defineProperties(je,Tw);Object.defineProperty(xw,"isAxiosError",{value:!0});je.from=(n,e,t,a,s,l)=>{const u=Object.create(xw);return X.toFlatObject(n,u,function(p){return p!==Error.prototype},f=>f!=="isAxiosError"),je.call(u,n.message,e,t,a,s),u.cause=n,u.name=n.name,l&&Object.assign(u,l),u};const V3=null;function mg(n){return X.isPlainObject(n)||X.isArray(n)}function ww(n){return X.endsWith(n,"[]")?n.slice(0,-2):n}function GE(n,e,t){return n?n.concat(e).map(function(s,l){return s=ww(s),!t&&l?"["+s+"]":s}).join(t?".":""):e}function L3(n){return X.isArray(n)&&!n.some(mg)}const U3=X.toFlatObject(X,{},null,function(e){return/^is[A-Z]/.test(e)});function hf(n,e,t){if(!X.isObject(n))throw new TypeError("target must be an object");e=e||new FormData,t=X.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(M,I){return!X.isUndefined(I[M])});const a=t.metaTokens,s=t.visitor||v,l=t.dots,u=t.indexes,p=(t.Blob||typeof Blob<"u"&&Blob)&&X.isSpecCompliantForm(e);if(!X.isFunction(s))throw new TypeError("visitor must be a function");function y(A){if(A===null)return"";if(X.isDate(A))return A.toISOString();if(!p&&X.isBlob(A))throw new je("Blob is not supported. Use a Buffer instead.");return X.isArrayBuffer(A)||X.isTypedArray(A)?p&&typeof Blob=="function"?new Blob([A]):Buffer.from(A):A}function v(A,M,I){let G=A;if(A&&!I&&typeof A=="object"){if(X.endsWith(M,"{}"))M=a?M:M.slice(0,-2),A=JSON.stringify(A);else if(X.isArray(A)&&L3(A)||(X.isFileList(A)||X.endsWith(M,"[]"))&&(G=X.toArray(A)))return M=ww(M),G.forEach(function(q,oe){!(X.isUndefined(q)||q===null)&&e.append(u===!0?GE([M],oe,l):u===null?M:M+"[]",y(q))}),!1}return mg(A)?!0:(e.append(GE(I,M,l),y(A)),!1)}const E=[],T=Object.assign(U3,{defaultVisitor:v,convertValue:y,isVisitable:mg});function C(A,M){if(!X.isUndefined(A)){if(E.indexOf(A)!==-1)throw Error("Circular reference detected in "+M.join("."));E.push(A),X.forEach(A,function(G,Q){(!(X.isUndefined(G)||G===null)&&s.call(e,G,X.isString(Q)?Q.trim():Q,M,T))===!0&&C(G,M?M.concat(Q):[Q])}),E.pop()}}if(!X.isObject(n))throw new TypeError("data must be an object");return C(n),e}function $E(n){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(a){return e[a]})}function Ny(n,e){this._pairs=[],n&&hf(n,this,e)}const Aw=Ny.prototype;Aw.append=function(e,t){this._pairs.push([e,t])};Aw.toString=function(e){const t=e?function(a){return e.call(this,a,$E)}:$E;return this._pairs.map(function(s){return t(s[0])+"="+t(s[1])},"").join("&")};function z3(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Sw(n,e,t){if(!e)return n;const a=t&&t.encode||z3;X.isFunction(t)&&(t={serialize:t});const s=t&&t.serialize;let l;if(s?l=s(e,t):l=X.isURLSearchParams(e)?e.toString():new Ny(e,t).toString(a),l){const u=n.indexOf("#");u!==-1&&(n=n.slice(0,u)),n+=(n.indexOf("?")===-1?"?":"&")+l}return n}class YE{constructor(){this.handlers=[]}use(e,t,a){return this.handlers.push({fulfilled:e,rejected:t,synchronous:a?a.synchronous:!1,runWhen:a?a.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){X.forEach(this.handlers,function(a){a!==null&&e(a)})}}const Nw={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},B3=typeof URLSearchParams<"u"?URLSearchParams:Ny,q3=typeof FormData<"u"?FormData:null,F3=typeof Blob<"u"?Blob:null,H3={isBrowser:!0,classes:{URLSearchParams:B3,FormData:q3,Blob:F3},protocols:["http","https","file","blob","url","data"]},Cy=typeof window<"u"&&typeof document<"u",pg=typeof navigator=="object"&&navigator||void 0,G3=Cy&&(!pg||["ReactNative","NativeScript","NS"].indexOf(pg.product)<0),$3=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Y3=Cy&&window.location.href||"http://localhost",K3=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Cy,hasStandardBrowserEnv:G3,hasStandardBrowserWebWorkerEnv:$3,navigator:pg,origin:Y3},Symbol.toStringTag,{value:"Module"})),pn={...K3,...H3};function Q3(n,e){return hf(n,new pn.classes.URLSearchParams,Object.assign({visitor:function(t,a,s,l){return pn.isNode&&X.isBuffer(t)?(this.append(a,t.toString("base64")),!1):l.defaultVisitor.apply(this,arguments)}},e))}function W3(n){return X.matchAll(/\w+|\[(\w*)]/g,n).map(e=>e[0]==="[]"?"":e[1]||e[0])}function X3(n){const e={},t=Object.keys(n);let a;const s=t.length;let l;for(a=0;a<s;a++)l=t[a],e[l]=n[l];return e}function Cw(n){function e(t,a,s,l){let u=t[l++];if(u==="__proto__")return!0;const f=Number.isFinite(+u),p=l>=t.length;return u=!u&&X.isArray(s)?s.length:u,p?(X.hasOwnProp(s,u)?s[u]=[s[u],a]:s[u]=a,!f):((!s[u]||!X.isObject(s[u]))&&(s[u]=[]),e(t,a,s[u],l)&&X.isArray(s[u])&&(s[u]=X3(s[u])),!f)}if(X.isFormData(n)&&X.isFunction(n.entries)){const t={};return X.forEachEntry(n,(a,s)=>{e(W3(a),s,t,0)}),t}return null}function Z3(n,e,t){if(X.isString(n))try{return(e||JSON.parse)(n),X.trim(n)}catch(a){if(a.name!=="SyntaxError")throw a}return(t||JSON.stringify)(n)}const ou={transitional:Nw,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const a=t.getContentType()||"",s=a.indexOf("application/json")>-1,l=X.isObject(e);if(l&&X.isHTMLForm(e)&&(e=new FormData(e)),X.isFormData(e))return s?JSON.stringify(Cw(e)):e;if(X.isArrayBuffer(e)||X.isBuffer(e)||X.isStream(e)||X.isFile(e)||X.isBlob(e)||X.isReadableStream(e))return e;if(X.isArrayBufferView(e))return e.buffer;if(X.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let f;if(l){if(a.indexOf("application/x-www-form-urlencoded")>-1)return Q3(e,this.formSerializer).toString();if((f=X.isFileList(e))||a.indexOf("multipart/form-data")>-1){const p=this.env&&this.env.FormData;return hf(f?{"files[]":e}:e,p&&new p,this.formSerializer)}}return l||s?(t.setContentType("application/json",!1),Z3(e)):e}],transformResponse:[function(e){const t=this.transitional||ou.transitional,a=t&&t.forcedJSONParsing,s=this.responseType==="json";if(X.isResponse(e)||X.isReadableStream(e))return e;if(e&&X.isString(e)&&(a&&!this.responseType||s)){const u=!(t&&t.silentJSONParsing)&&s;try{return JSON.parse(e)}catch(f){if(u)throw f.name==="SyntaxError"?je.from(f,je.ERR_BAD_RESPONSE,this,null,this.response):f}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:pn.classes.FormData,Blob:pn.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};X.forEach(["delete","get","head","post","put","patch"],n=>{ou.headers[n]={}});const J3=X.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),eM=n=>{const e={};let t,a,s;return n&&n.split(`
`).forEach(function(u){s=u.indexOf(":"),t=u.substring(0,s).trim().toLowerCase(),a=u.substring(s+1).trim(),!(!t||e[t]&&J3[t])&&(t==="set-cookie"?e[t]?e[t].push(a):e[t]=[a]:e[t]=e[t]?e[t]+", "+a:a)}),e},KE=Symbol("internals");function yc(n){return n&&String(n).trim().toLowerCase()}function eh(n){return n===!1||n==null?n:X.isArray(n)?n.map(eh):String(n)}function tM(n){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let a;for(;a=t.exec(n);)e[a[1]]=a[2];return e}const nM=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function kp(n,e,t,a,s){if(X.isFunction(a))return a.call(this,e,t);if(s&&(e=t),!!X.isString(e)){if(X.isString(a))return e.indexOf(a)!==-1;if(X.isRegExp(a))return a.test(e)}}function rM(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,a)=>t.toUpperCase()+a)}function aM(n,e){const t=X.toCamelCase(" "+e);["get","set","has"].forEach(a=>{Object.defineProperty(n,a+t,{value:function(s,l,u){return this[a].call(this,e,s,l,u)},configurable:!0})})}let In=class{constructor(e){e&&this.set(e)}set(e,t,a){const s=this;function l(f,p,y){const v=yc(p);if(!v)throw new Error("header name must be a non-empty string");const E=X.findKey(s,v);(!E||s[E]===void 0||y===!0||y===void 0&&s[E]!==!1)&&(s[E||p]=eh(f))}const u=(f,p)=>X.forEach(f,(y,v)=>l(y,v,p));if(X.isPlainObject(e)||e instanceof this.constructor)u(e,t);else if(X.isString(e)&&(e=e.trim())&&!nM(e))u(eM(e),t);else if(X.isObject(e)&&X.isIterable(e)){let f={},p,y;for(const v of e){if(!X.isArray(v))throw TypeError("Object iterator must return a key-value pair");f[y=v[0]]=(p=f[y])?X.isArray(p)?[...p,v[1]]:[p,v[1]]:v[1]}u(f,t)}else e!=null&&l(t,e,a);return this}get(e,t){if(e=yc(e),e){const a=X.findKey(this,e);if(a){const s=this[a];if(!t)return s;if(t===!0)return tM(s);if(X.isFunction(t))return t.call(this,s,a);if(X.isRegExp(t))return t.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=yc(e),e){const a=X.findKey(this,e);return!!(a&&this[a]!==void 0&&(!t||kp(this,this[a],a,t)))}return!1}delete(e,t){const a=this;let s=!1;function l(u){if(u=yc(u),u){const f=X.findKey(a,u);f&&(!t||kp(a,a[f],f,t))&&(delete a[f],s=!0)}}return X.isArray(e)?e.forEach(l):l(e),s}clear(e){const t=Object.keys(this);let a=t.length,s=!1;for(;a--;){const l=t[a];(!e||kp(this,this[l],l,e,!0))&&(delete this[l],s=!0)}return s}normalize(e){const t=this,a={};return X.forEach(this,(s,l)=>{const u=X.findKey(a,l);if(u){t[u]=eh(s),delete t[l];return}const f=e?rM(l):String(l).trim();f!==l&&delete t[l],t[f]=eh(s),a[f]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return X.forEach(this,(a,s)=>{a!=null&&a!==!1&&(t[s]=e&&X.isArray(a)?a.join(", "):a)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const a=new this(e);return t.forEach(s=>a.set(s)),a}static accessor(e){const a=(this[KE]=this[KE]={accessors:{}}).accessors,s=this.prototype;function l(u){const f=yc(u);a[f]||(aM(s,u),a[f]=!0)}return X.isArray(e)?e.forEach(l):l(e),this}};In.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);X.reduceDescriptors(In.prototype,({value:n},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(a){this[t]=a}}});X.freezeMethods(In);function Vp(n,e){const t=this||ou,a=e||t,s=In.from(a.headers);let l=a.data;return X.forEach(n,function(f){l=f.call(t,l,s.normalize(),e?e.status:void 0)}),s.normalize(),l}function Rw(n){return!!(n&&n.__CANCEL__)}function il(n,e,t){je.call(this,n??"canceled",je.ERR_CANCELED,e,t),this.name="CanceledError"}X.inherits(il,je,{__CANCEL__:!0});function Iw(n,e,t){const a=t.config.validateStatus;!t.status||!a||a(t.status)?n(t):e(new je("Request failed with status code "+t.status,[je.ERR_BAD_REQUEST,je.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function iM(n){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return e&&e[1]||""}function sM(n,e){n=n||10;const t=new Array(n),a=new Array(n);let s=0,l=0,u;return e=e!==void 0?e:1e3,function(p){const y=Date.now(),v=a[l];u||(u=y),t[s]=p,a[s]=y;let E=l,T=0;for(;E!==s;)T+=t[E++],E=E%n;if(s=(s+1)%n,s===l&&(l=(l+1)%n),y-u<e)return;const C=v&&y-v;return C?Math.round(T*1e3/C):void 0}}function oM(n,e){let t=0,a=1e3/e,s,l;const u=(y,v=Date.now())=>{t=v,s=null,l&&(clearTimeout(l),l=null),n.apply(null,y)};return[(...y)=>{const v=Date.now(),E=v-t;E>=a?u(y,v):(s=y,l||(l=setTimeout(()=>{l=null,u(s)},a-E)))},()=>s&&u(s)]}const Ch=(n,e,t=3)=>{let a=0;const s=sM(50,250);return oM(l=>{const u=l.loaded,f=l.lengthComputable?l.total:void 0,p=u-a,y=s(p),v=u<=f;a=u;const E={loaded:u,total:f,progress:f?u/f:void 0,bytes:p,rate:y||void 0,estimated:y&&f&&v?(f-u)/y:void 0,event:l,lengthComputable:f!=null,[e?"download":"upload"]:!0};n(E)},t)},QE=(n,e)=>{const t=n!=null;return[a=>e[0]({lengthComputable:t,total:n,loaded:a}),e[1]]},WE=n=>(...e)=>X.asap(()=>n(...e)),lM=pn.hasStandardBrowserEnv?((n,e)=>t=>(t=new URL(t,pn.origin),n.protocol===t.protocol&&n.host===t.host&&(e||n.port===t.port)))(new URL(pn.origin),pn.navigator&&/(msie|trident)/i.test(pn.navigator.userAgent)):()=>!0,cM=pn.hasStandardBrowserEnv?{write(n,e,t,a,s,l){const u=[n+"="+encodeURIComponent(e)];X.isNumber(t)&&u.push("expires="+new Date(t).toGMTString()),X.isString(a)&&u.push("path="+a),X.isString(s)&&u.push("domain="+s),l===!0&&u.push("secure"),document.cookie=u.join("; ")},read(n){const e=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(n){this.write(n,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function uM(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function dM(n,e){return e?n.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):n}function Dw(n,e,t){let a=!uM(e);return n&&(a||t==!1)?dM(n,e):e}const XE=n=>n instanceof In?{...n}:n;function Ss(n,e){e=e||{};const t={};function a(y,v,E,T){return X.isPlainObject(y)&&X.isPlainObject(v)?X.merge.call({caseless:T},y,v):X.isPlainObject(v)?X.merge({},v):X.isArray(v)?v.slice():v}function s(y,v,E,T){if(X.isUndefined(v)){if(!X.isUndefined(y))return a(void 0,y,E,T)}else return a(y,v,E,T)}function l(y,v){if(!X.isUndefined(v))return a(void 0,v)}function u(y,v){if(X.isUndefined(v)){if(!X.isUndefined(y))return a(void 0,y)}else return a(void 0,v)}function f(y,v,E){if(E in e)return a(y,v);if(E in n)return a(void 0,y)}const p={url:l,method:l,data:l,baseURL:u,transformRequest:u,transformResponse:u,paramsSerializer:u,timeout:u,timeoutMessage:u,withCredentials:u,withXSRFToken:u,adapter:u,responseType:u,xsrfCookieName:u,xsrfHeaderName:u,onUploadProgress:u,onDownloadProgress:u,decompress:u,maxContentLength:u,maxBodyLength:u,beforeRedirect:u,transport:u,httpAgent:u,httpsAgent:u,cancelToken:u,socketPath:u,responseEncoding:u,validateStatus:f,headers:(y,v,E)=>s(XE(y),XE(v),E,!0)};return X.forEach(Object.keys(Object.assign({},n,e)),function(v){const E=p[v]||s,T=E(n[v],e[v],v);X.isUndefined(T)&&E!==f||(t[v]=T)}),t}const Ow=n=>{const e=Ss({},n);let{data:t,withXSRFToken:a,xsrfHeaderName:s,xsrfCookieName:l,headers:u,auth:f}=e;e.headers=u=In.from(u),e.url=Sw(Dw(e.baseURL,e.url,e.allowAbsoluteUrls),n.params,n.paramsSerializer),f&&u.set("Authorization","Basic "+btoa((f.username||"")+":"+(f.password?unescape(encodeURIComponent(f.password)):"")));let p;if(X.isFormData(t)){if(pn.hasStandardBrowserEnv||pn.hasStandardBrowserWebWorkerEnv)u.setContentType(void 0);else if((p=u.getContentType())!==!1){const[y,...v]=p?p.split(";").map(E=>E.trim()).filter(Boolean):[];u.setContentType([y||"multipart/form-data",...v].join("; "))}}if(pn.hasStandardBrowserEnv&&(a&&X.isFunction(a)&&(a=a(e)),a||a!==!1&&lM(e.url))){const y=s&&l&&cM.read(l);y&&u.set(s,y)}return e},hM=typeof XMLHttpRequest<"u",fM=hM&&function(n){return new Promise(function(t,a){const s=Ow(n);let l=s.data;const u=In.from(s.headers).normalize();let{responseType:f,onUploadProgress:p,onDownloadProgress:y}=s,v,E,T,C,A;function M(){C&&C(),A&&A(),s.cancelToken&&s.cancelToken.unsubscribe(v),s.signal&&s.signal.removeEventListener("abort",v)}let I=new XMLHttpRequest;I.open(s.method.toUpperCase(),s.url,!0),I.timeout=s.timeout;function G(){if(!I)return;const q=In.from("getAllResponseHeaders"in I&&I.getAllResponseHeaders()),ce={data:!f||f==="text"||f==="json"?I.responseText:I.response,status:I.status,statusText:I.statusText,headers:q,config:n,request:I};Iw(function(P){t(P),M()},function(P){a(P),M()},ce),I=null}"onloadend"in I?I.onloadend=G:I.onreadystatechange=function(){!I||I.readyState!==4||I.status===0&&!(I.responseURL&&I.responseURL.indexOf("file:")===0)||setTimeout(G)},I.onabort=function(){I&&(a(new je("Request aborted",je.ECONNABORTED,n,I)),I=null)},I.onerror=function(){a(new je("Network Error",je.ERR_NETWORK,n,I)),I=null},I.ontimeout=function(){let oe=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const ce=s.transitional||Nw;s.timeoutErrorMessage&&(oe=s.timeoutErrorMessage),a(new je(oe,ce.clarifyTimeoutError?je.ETIMEDOUT:je.ECONNABORTED,n,I)),I=null},l===void 0&&u.setContentType(null),"setRequestHeader"in I&&X.forEach(u.toJSON(),function(oe,ce){I.setRequestHeader(ce,oe)}),X.isUndefined(s.withCredentials)||(I.withCredentials=!!s.withCredentials),f&&f!=="json"&&(I.responseType=s.responseType),y&&([T,A]=Ch(y,!0),I.addEventListener("progress",T)),p&&I.upload&&([E,C]=Ch(p),I.upload.addEventListener("progress",E),I.upload.addEventListener("loadend",C)),(s.cancelToken||s.signal)&&(v=q=>{I&&(a(!q||q.type?new il(null,n,I):q),I.abort(),I=null)},s.cancelToken&&s.cancelToken.subscribe(v),s.signal&&(s.signal.aborted?v():s.signal.addEventListener("abort",v)));const Q=iM(s.url);if(Q&&pn.protocols.indexOf(Q)===-1){a(new je("Unsupported protocol "+Q+":",je.ERR_BAD_REQUEST,n));return}I.send(l||null)})},mM=(n,e)=>{const{length:t}=n=n?n.filter(Boolean):[];if(e||t){let a=new AbortController,s;const l=function(y){if(!s){s=!0,f();const v=y instanceof Error?y:this.reason;a.abort(v instanceof je?v:new il(v instanceof Error?v.message:v))}};let u=e&&setTimeout(()=>{u=null,l(new je(`timeout ${e} of ms exceeded`,je.ETIMEDOUT))},e);const f=()=>{n&&(u&&clearTimeout(u),u=null,n.forEach(y=>{y.unsubscribe?y.unsubscribe(l):y.removeEventListener("abort",l)}),n=null)};n.forEach(y=>y.addEventListener("abort",l));const{signal:p}=a;return p.unsubscribe=()=>X.asap(f),p}},pM=function*(n,e){let t=n.byteLength;if(t<e){yield n;return}let a=0,s;for(;a<t;)s=a+e,yield n.slice(a,s),a=s},gM=async function*(n,e){for await(const t of yM(n))yield*pM(t,e)},yM=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const e=n.getReader();try{for(;;){const{done:t,value:a}=await e.read();if(t)break;yield a}}finally{await e.cancel()}},ZE=(n,e,t,a)=>{const s=gM(n,e);let l=0,u,f=p=>{u||(u=!0,a&&a(p))};return new ReadableStream({async pull(p){try{const{done:y,value:v}=await s.next();if(y){f(),p.close();return}let E=v.byteLength;if(t){let T=l+=E;t(T)}p.enqueue(new Uint8Array(v))}catch(y){throw f(y),y}},cancel(p){return f(p),s.return()}},{highWaterMark:2})},ff=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",jw=ff&&typeof ReadableStream=="function",vM=ff&&(typeof TextEncoder=="function"?(n=>e=>n.encode(e))(new TextEncoder):async n=>new Uint8Array(await new Response(n).arrayBuffer())),Pw=(n,...e)=>{try{return!!n(...e)}catch{return!1}},_M=jw&&Pw(()=>{let n=!1;const e=new Request(pn.origin,{body:new ReadableStream,method:"POST",get duplex(){return n=!0,"half"}}).headers.has("Content-Type");return n&&!e}),JE=64*1024,gg=jw&&Pw(()=>X.isReadableStream(new Response("").body)),Rh={stream:gg&&(n=>n.body)};ff&&(n=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Rh[e]&&(Rh[e]=X.isFunction(n[e])?t=>t[e]():(t,a)=>{throw new je(`Response type '${e}' is not supported`,je.ERR_NOT_SUPPORT,a)})})})(new Response);const bM=async n=>{if(n==null)return 0;if(X.isBlob(n))return n.size;if(X.isSpecCompliantForm(n))return(await new Request(pn.origin,{method:"POST",body:n}).arrayBuffer()).byteLength;if(X.isArrayBufferView(n)||X.isArrayBuffer(n))return n.byteLength;if(X.isURLSearchParams(n)&&(n=n+""),X.isString(n))return(await vM(n)).byteLength},EM=async(n,e)=>{const t=X.toFiniteNumber(n.getContentLength());return t??bM(e)},xM=ff&&(async n=>{let{url:e,method:t,data:a,signal:s,cancelToken:l,timeout:u,onDownloadProgress:f,onUploadProgress:p,responseType:y,headers:v,withCredentials:E="same-origin",fetchOptions:T}=Ow(n);y=y?(y+"").toLowerCase():"text";let C=mM([s,l&&l.toAbortSignal()],u),A;const M=C&&C.unsubscribe&&(()=>{C.unsubscribe()});let I;try{if(p&&_M&&t!=="get"&&t!=="head"&&(I=await EM(v,a))!==0){let ce=new Request(e,{method:"POST",body:a,duplex:"half"}),pe;if(X.isFormData(a)&&(pe=ce.headers.get("content-type"))&&v.setContentType(pe),ce.body){const[P,R]=QE(I,Ch(WE(p)));a=ZE(ce.body,JE,P,R)}}X.isString(E)||(E=E?"include":"omit");const G="credentials"in Request.prototype;A=new Request(e,{...T,signal:C,method:t.toUpperCase(),headers:v.normalize().toJSON(),body:a,duplex:"half",credentials:G?E:void 0});let Q=await fetch(A);const q=gg&&(y==="stream"||y==="response");if(gg&&(f||q&&M)){const ce={};["status","statusText","headers"].forEach(N=>{ce[N]=Q[N]});const pe=X.toFiniteNumber(Q.headers.get("content-length")),[P,R]=f&&QE(pe,Ch(WE(f),!0))||[];Q=new Response(ZE(Q.body,JE,P,()=>{R&&R(),M&&M()}),ce)}y=y||"text";let oe=await Rh[X.findKey(Rh,y)||"text"](Q,n);return!q&&M&&M(),await new Promise((ce,pe)=>{Iw(ce,pe,{data:oe,headers:In.from(Q.headers),status:Q.status,statusText:Q.statusText,config:n,request:A})})}catch(G){throw M&&M(),G&&G.name==="TypeError"&&/Load failed|fetch/i.test(G.message)?Object.assign(new je("Network Error",je.ERR_NETWORK,n,A),{cause:G.cause||G}):je.from(G,G&&G.code,n,A)}}),yg={http:V3,xhr:fM,fetch:xM};X.forEach(yg,(n,e)=>{if(n){try{Object.defineProperty(n,"name",{value:e})}catch{}Object.defineProperty(n,"adapterName",{value:e})}});const e1=n=>`- ${n}`,TM=n=>X.isFunction(n)||n===null||n===!1,Mw={getAdapter:n=>{n=X.isArray(n)?n:[n];const{length:e}=n;let t,a;const s={};for(let l=0;l<e;l++){t=n[l];let u;if(a=t,!TM(t)&&(a=yg[(u=String(t)).toLowerCase()],a===void 0))throw new je(`Unknown adapter '${u}'`);if(a)break;s[u||"#"+l]=a}if(!a){const l=Object.entries(s).map(([f,p])=>`adapter ${f} `+(p===!1?"is not supported by the environment":"is not available in the build"));let u=e?l.length>1?`since :
`+l.map(e1).join(`
`):" "+e1(l[0]):"as no adapter specified";throw new je("There is no suitable adapter to dispatch the request "+u,"ERR_NOT_SUPPORT")}return a},adapters:yg};function Lp(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new il(null,n)}function t1(n){return Lp(n),n.headers=In.from(n.headers),n.data=Vp.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),Mw.getAdapter(n.adapter||ou.adapter)(n).then(function(a){return Lp(n),a.data=Vp.call(n,n.transformResponse,a),a.headers=In.from(a.headers),a},function(a){return Rw(a)||(Lp(n),a&&a.response&&(a.response.data=Vp.call(n,n.transformResponse,a.response),a.response.headers=In.from(a.response.headers))),Promise.reject(a)})}const kw="1.9.0",mf={};["object","boolean","number","function","string","symbol"].forEach((n,e)=>{mf[n]=function(a){return typeof a===n||"a"+(e<1?"n ":" ")+n}});const n1={};mf.transitional=function(e,t,a){function s(l,u){return"[Axios v"+kw+"] Transitional option '"+l+"'"+u+(a?". "+a:"")}return(l,u,f)=>{if(e===!1)throw new je(s(u," has been removed"+(t?" in "+t:"")),je.ERR_DEPRECATED);return t&&!n1[u]&&(n1[u]=!0,console.warn(s(u," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(l,u,f):!0}};mf.spelling=function(e){return(t,a)=>(console.warn(`${a} is likely a misspelling of ${e}`),!0)};function wM(n,e,t){if(typeof n!="object")throw new je("options must be an object",je.ERR_BAD_OPTION_VALUE);const a=Object.keys(n);let s=a.length;for(;s-- >0;){const l=a[s],u=e[l];if(u){const f=n[l],p=f===void 0||u(f,l,n);if(p!==!0)throw new je("option "+l+" must be "+p,je.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new je("Unknown option "+l,je.ERR_BAD_OPTION)}}const th={assertOptions:wM,validators:mf},Lr=th.validators;let _s=class{constructor(e){this.defaults=e||{},this.interceptors={request:new YE,response:new YE}}async request(e,t){try{return await this._request(e,t)}catch(a){if(a instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const l=s.stack?s.stack.replace(/^.+\n/,""):"";try{a.stack?l&&!String(a.stack).endsWith(l.replace(/^.+\n.+\n/,""))&&(a.stack+=`
`+l):a.stack=l}catch{}}throw a}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=Ss(this.defaults,t);const{transitional:a,paramsSerializer:s,headers:l}=t;a!==void 0&&th.assertOptions(a,{silentJSONParsing:Lr.transitional(Lr.boolean),forcedJSONParsing:Lr.transitional(Lr.boolean),clarifyTimeoutError:Lr.transitional(Lr.boolean)},!1),s!=null&&(X.isFunction(s)?t.paramsSerializer={serialize:s}:th.assertOptions(s,{encode:Lr.function,serialize:Lr.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),th.assertOptions(t,{baseUrl:Lr.spelling("baseURL"),withXsrfToken:Lr.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let u=l&&X.merge(l.common,l[t.method]);l&&X.forEach(["delete","get","head","post","put","patch","common"],A=>{delete l[A]}),t.headers=In.concat(u,l);const f=[];let p=!0;this.interceptors.request.forEach(function(M){typeof M.runWhen=="function"&&M.runWhen(t)===!1||(p=p&&M.synchronous,f.unshift(M.fulfilled,M.rejected))});const y=[];this.interceptors.response.forEach(function(M){y.push(M.fulfilled,M.rejected)});let v,E=0,T;if(!p){const A=[t1.bind(this),void 0];for(A.unshift.apply(A,f),A.push.apply(A,y),T=A.length,v=Promise.resolve(t);E<T;)v=v.then(A[E++],A[E++]);return v}T=f.length;let C=t;for(E=0;E<T;){const A=f[E++],M=f[E++];try{C=A(C)}catch(I){M.call(this,I);break}}try{v=t1.call(this,C)}catch(A){return Promise.reject(A)}for(E=0,T=y.length;E<T;)v=v.then(y[E++],y[E++]);return v}getUri(e){e=Ss(this.defaults,e);const t=Dw(e.baseURL,e.url,e.allowAbsoluteUrls);return Sw(t,e.params,e.paramsSerializer)}};X.forEach(["delete","get","head","options"],function(e){_s.prototype[e]=function(t,a){return this.request(Ss(a||{},{method:e,url:t,data:(a||{}).data}))}});X.forEach(["post","put","patch"],function(e){function t(a){return function(l,u,f){return this.request(Ss(f||{},{method:e,headers:a?{"Content-Type":"multipart/form-data"}:{},url:l,data:u}))}}_s.prototype[e]=t(),_s.prototype[e+"Form"]=t(!0)});let AM=class Vw{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(l){t=l});const a=this;this.promise.then(s=>{if(!a._listeners)return;let l=a._listeners.length;for(;l-- >0;)a._listeners[l](s);a._listeners=null}),this.promise.then=s=>{let l;const u=new Promise(f=>{a.subscribe(f),l=f}).then(s);return u.cancel=function(){a.unsubscribe(l)},u},e(function(l,u,f){a.reason||(a.reason=new il(l,u,f),t(a.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=a=>{e.abort(a)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new Vw(function(s){e=s}),cancel:e}}};function SM(n){return function(t){return n.apply(null,t)}}function NM(n){return X.isObject(n)&&n.isAxiosError===!0}const vg={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(vg).forEach(([n,e])=>{vg[e]=n});function Lw(n){const e=new _s(n),t=mw(_s.prototype.request,e);return X.extend(t,_s.prototype,e,{allOwnKeys:!0}),X.extend(t,e,null,{allOwnKeys:!0}),t.create=function(s){return Lw(Ss(n,s))},t}const _t=Lw(ou);_t.Axios=_s;_t.CanceledError=il;_t.CancelToken=AM;_t.isCancel=Rw;_t.VERSION=kw;_t.toFormData=hf;_t.AxiosError=je;_t.Cancel=_t.CanceledError;_t.all=function(e){return Promise.all(e)};_t.spread=SM;_t.isAxiosError=NM;_t.mergeConfig=Ss;_t.AxiosHeaders=In;_t.formToJSON=n=>Cw(X.isHTMLForm(n)?new FormData(n):n);_t.getAdapter=Mw.getAdapter;_t.HttpStatusCode=vg;_t.default=_t;const{Axios:XM,AxiosError:ZM,CanceledError:JM,isCancel:ek,CancelToken:tk,VERSION:nk,all:rk,Cancel:ak,isAxiosError:ik,spread:sk,toFormData:ok,AxiosHeaders:lk,HttpStatusCode:ck,formToJSON:uk,getAdapter:dk,mergeConfig:hk}=_t,Uw=()=>localStorage.getItem("huggingface_api_key")||".",CM=async(n,e,t)=>{var a;try{const s=Uw();if(!s||s.trim()==="")return console.log("No hay API key configurada para Hugging Face, usando fallback local"),r1(n,e,t);const u=_t.create({baseURL:"https://api-inference.huggingface.co/models/HuggingFaceH4/zephyr-7b-beta",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}});let f="";const p=e.slice(-5);for(const I of p)I.sender==="agent"?f+=`Agente: ${I.message}
`:f+=`Cliente: ${I.message}
`;const y=`<|system|>
Eres un asistente especializado en analizar mensajes en un contexto de cobranza. Tu tarea es categorizar la respuesta del cliente.

IMPORTANTE: NUNCA debes mencionar montos específicos de deuda. Habla siempre en términos de "deuda pendiente" o porcentajes, nunca valores monetarios exactos.

El cliente tiene las siguientes características:
- Relación/Cercanía: ${t.relationship}/100
- Historial de Pago: ${t.history}/100
- Actitud: ${t.attitude}/100
- Sensibilidad a Presión: ${t.sensitivity}/100
- Probabilidad de Pago: ${t.probability}/100

Historial reciente de la conversación: 
${f}
<|user|>
Clasifica este mensaje del cliente: "${n}"

Elige UNA de estas categorías EXACTAS sin explicación:
- neutral
- accepts_payment
- offers_partial
- reschedule
- evades
- annoyed
- refuses
- thanks
- no_answer
- confirms_payment
<|assistant|>`;console.log("Enviando solicitud a Hugging Face API para análisis...");const v=await u.post("",{inputs:y,parameters:{max_new_tokens:20,temperature:.1,top_p:.95,do_sample:!0,return_full_text:!1}});console.log("Respuesta de Hugging Face:",v.data);let E="";Array.isArray(v.data)?E=((a=v.data[0])==null?void 0:a.generated_text)||"":E=v.data.generated_text||"";let T="neutral";const C=["neutral","accepts_payment","offers_partial","reschedule","evades","annoyed","refuses","thanks","no_answer","confirms_payment"];for(const I of C)if(E.toLowerCase().includes(I)){T=I;break}const A={neutral:{relationship:0,history:0,attitude:0,sensitivity:0,probability:0},accepts_payment:{relationship:5,history:10,attitude:10,sensitivity:-5,probability:20},offers_partial:{relationship:5,history:5,attitude:10,sensitivity:-5,probability:15},reschedule:{relationship:2,history:-5,attitude:5,sensitivity:0,probability:-5},evades:{relationship:-5,history:-5,attitude:-10,sensitivity:5,probability:-10},annoyed:{relationship:-10,history:-5,attitude:-15,sensitivity:10,probability:-15},refuses:{relationship:-20,history:-20,attitude:-20,sensitivity:20,probability:-30},thanks:{relationship:5,history:0,attitude:10,sensitivity:-5,probability:10},no_answer:{relationship:-5,history:-10,attitude:-5,sensitivity:0,probability:-10},confirms_payment:{relationship:10,history:20,attitude:20,sensitivity:-10,probability:30}},M=A[T]||A.neutral;return console.log(`Evento detectado por Zephyr: "${T}" con deltas:`,M),{eventType:T,deltas:M,explanation:`Evento detectado por Zephyr: "${T}"`,confidence:.8}}catch(s){return console.error("Error al analizar mensaje con Zephyr:",s),console.log("Usando fallback local debido al error"),r1(n)}},RM=async(n,e,t,a)=>{var s;try{const l=Uw();if(!l||l.trim()==="")return console.log("No hay API key configurada para Hugging Face, usando fallback local"),a1(n,e,t,a);const f=_t.create({baseURL:"https://api-inference.huggingface.co/models/HuggingFaceH4/zephyr-7b-beta",headers:{Authorization:`Bearer ${l}`,"Content-Type":"application/json"}});let p="";const y=n.slice(-6);for(const A of y)A.sender==="agent"?p+=`Agente: ${A.message}
`:p+=`Cliente: ${A.message}
`;let v="neutral";e.relationship>70?v=e.sensitivity>70?"amistoso sin presión":"amistoso directo":e.relationship<40&&(v=e.sensitivity<40?"formal directo":"formal suave");const E=`<|system|>
Eres un agente de cobranza de la empresa Acriventas. Tu objetivo es obtener el pago de una deuda pendiente mientras mantienes una buena relación con el cliente.

INSTRUCCIONES IMPORTANTES: 
1. NUNCA menciones montos específicos de dinero o deuda en tus respuestas.
2. Siempre habla en términos de "deuda pendiente" o usando porcentajes, no valores exactos.
3. No repitas los montos que el cliente mencione en sus mensajes.
4. Sé siempre respetuoso y profesional.

Debes usar un tono "${v}" basado en el perfil del cliente:
- Relación/Cercanía: ${e.relationship}/100
- Historial de Pago: ${e.history}/100
- Actitud: ${e.attitude}/100
- Sensibilidad a Presión: ${e.sensitivity}/100
- Probabilidad de Pago: ${e.probability}/100

Historial reciente de la conversación:
${p}

El último mensaje del cliente fue: "${t}"
El tipo de evento detectado es: "${a}"
<|user|>
Genera una respuesta empática y efectiva como agente de cobranza. La respuesta debe ser concisa (máximo 2 frases), adaptada al perfil del cliente, enfocada en lograr el pago de la deuda, y NUNCA debe mencionar montos específicos de dinero.
<|assistant|>`;console.log("Enviando solicitud para generar respuesta a Hugging Face API...");const T=await f.post("",{inputs:E,parameters:{max_new_tokens:100,temperature:.7,top_p:.95,do_sample:!0,return_full_text:!1}});console.log("Respuesta de Hugging Face para generación:",T.data);let C="";return Array.isArray(T.data)?C=((s=T.data[0])==null?void 0:s.generated_text)||"":C=T.data.generated_text||"",C=C.trim(),C||(C="Entiendo. ¿Podría por favor indicarnos cuándo podríamos esperar el pago de su deuda pendiente?"),console.log(`Respuesta generada por Zephyr usando tono "${v}": ${C}`),{responseText:C,explanation:`Respuesta generada por Zephyr usando tono "${v}"`,confidence:.8}}catch(l){return console.error("Error al generar respuesta con Zephyr:",l),console.log("Usando fallback local para respuesta debido al error"),a1(n,e,t,a)}},r1=(n,e,t)=>{const a=n.toLowerCase();let s="neutral";a.includes("pagar")||a.includes("transferir")||a.includes("depositar")?a.includes("completo")||a.includes("todo")?s="accepts_payment":a.includes("parte")||a.includes("parcial")||a.includes("algo")?s="offers_partial":(a.includes("próxima")||a.includes("después")||a.includes("luego"))&&(s="reschedule"):a.includes("gracias")||a.includes("agradezco")?s="thanks":a.includes("ya pagué")||a.includes("realicé el pago")||a.includes("transferí")?s="confirms_payment":a.includes("no puedo")||a.includes("imposible")?s="evades":a.includes("molesto")||a.includes("harto")||a.includes("fastidio")?s="annoyed":(a.includes("no voy a pagar")||a.includes("no pagaré")||a.includes("olvídate"))&&(s="refuses");const l={neutral:{relationship:0,history:0,attitude:0,sensitivity:0,probability:0},accepts_payment:{relationship:5,history:10,attitude:10,sensitivity:-5,probability:20},offers_partial:{relationship:5,history:5,attitude:10,sensitivity:-5,probability:15},reschedule:{relationship:2,history:-5,attitude:5,sensitivity:0,probability:-5},evades:{relationship:-5,history:-5,attitude:-10,sensitivity:5,probability:-10},annoyed:{relationship:-10,history:-5,attitude:-15,sensitivity:10,probability:-15},refuses:{relationship:-20,history:-20,attitude:-20,sensitivity:20,probability:-30},thanks:{relationship:5,history:0,attitude:10,sensitivity:-5,probability:10},no_answer:{relationship:-5,history:-10,attitude:-5,sensitivity:0,probability:-10},confirms_payment:{relationship:10,history:20,attitude:20,sensitivity:-10,probability:30}},u=l[s]||l.neutral;return console.log(`Evento detectado por fallback: "${s}" con deltas:`,u),{eventType:s,deltas:u,explanation:`Evento detectado por fallback: "${s}" basado en palabras clave.`,confidence:.6}},a1=(n,e,t,a)=>{let s="neutral";e.relationship>70?e.sensitivity>70?s="friendly_no_pressure":s="friendly":e.relationship<40&&(e.sensitivity<40?s="formal_direct":s="formal_soft");const l={accepts_payment:{friendly_no_pressure:"¡Excelente noticia! Gracias por tu disposición. Cuando puedas hacer el pago, solo avísame.",friendly:"¡Perfecto! Muchas gracias por tu colaboración. ¿Te envío los datos para el pago?",formal_direct:"Muy bien. Le agradecemos su decisión. Necesitamos que realice el pago antes del fin de semana.",formal_soft:"Gracias por su confirmación. ¿Prefiere que le enviemos los datos bancarios por este medio?",neutral:"Entendido. ¿Desea que le enviemos la información para realizar el pago?"},offers_partial:{friendly_no_pressure:"Agradezco mucho tu esfuerzo por pagar una parte. Cualquier aporte es bienvenido.",friendly:"Gracias por tu disposición. Un pago parcial nos ayuda mucho. ¿Cuándo podrías realizar este abono?",formal_direct:"Tomamos nota de su oferta de pago parcial. ¿Cuándo podríamos esperar el resto del monto pendiente?",formal_soft:"Entendemos su situación. El pago parcial es un buen primer paso. ¿Cuándo sería posible?",neutral:"De acuerdo con el pago parcial. ¿Qué porcentaje de la deuda podría transferir y cuándo?"},reschedule:{friendly_no_pressure:"No hay problema, entiendo que necesitas reprogramar. ¿Qué fecha te resultaría más conveniente?",friendly:"Claro que podemos ajustar la fecha. ¿Cuál sería el mejor momento para ti?",formal_direct:"Podemos considerar una nueva fecha. ¿Cuál es su propuesta concreta para el pago?",formal_soft:"Entendemos la necesidad de reprogramar. ¿Qué fecha le resultaría adecuada para realizar el pago?",neutral:"De acuerdo. ¿Cuál sería la nueva fecha propuesta para el pago?"},evades:{friendly_no_pressure:"Entiendo que quizás no es el mejor momento para hablar de esto. ¿Te parece si retomamos la conversación en otro momento?",friendly:"Noto que es un tema delicado. ¿Hay algo específico que podamos resolver para facilitar el pago?",formal_direct:"Necesitamos una respuesta concreta respecto al pago pendiente. ¿Podría indicarnos su plan de acción?",formal_soft:"Entendemos que pueda ser un tema complicado. ¿Podríamos concretar cuándo sería posible abordar el pago?",neutral:"¿Podría por favor indicarnos cuál es su situación respecto al pago pendiente?"},annoyed:{friendly_no_pressure:"Lamento si te he incomodado. No es mi intención molestar, solo buscamos encontrar una solución que funcione para ambos.",friendly:"Disculpa si te he molestado. ¿Qué podríamos hacer para resolver esta situación de la mejor manera?",formal_direct:"Entendemos su molestia. Sin embargo, necesitamos resolver el tema del pago pendiente. ¿Qué solución propone?",formal_soft:"Lamentamos si esta comunicación le resulta incómoda. ¿Habría un mejor momento o forma para abordar el tema?",neutral:"Entiendo. ¿Cómo preferiría que manejemos esta situación para llegar a una solución?"},refuses:{friendly_no_pressure:"Entiendo tu posición. Quizás podríamos explorar algunas alternativas que se ajusten mejor a tu situación actual.",friendly:"Comprendo que sea difícil en este momento. ¿Podríamos considerar opciones de pago más flexibles?",formal_direct:"Tomamos nota de su negativa. Sin embargo, la deuda permanece vigente. ¿Podríamos discutir alternativas de pago?",formal_soft:"Entendemos que pueda tener dificultades. ¿Le interesaría conocer otras opciones disponibles para resolver esta situación?",neutral:"¿Podríamos explorar alternativas que faciliten el pago de la deuda pendiente?"},thanks:{friendly_no_pressure:"¡No hay de qué! Estamos aquí para ayudarte. Si necesitas cualquier cosa, no dudes en hacérmelo saber.",friendly:"Es un placer poder ser de ayuda. ¿Hay algo más en lo que pueda asistirte?",formal_direct:"De nada. ¿Podríamos entonces confirmar cuándo realizará el pago?",formal_soft:"Nos alegra poder serle de utilidad. ¿Necesita alguna otra información para proceder?",neutral:"De nada. ¿Tiene alguna otra consulta respecto al pago?"},confirms_payment:{friendly_no_pressure:"¡Excelente noticia! Muchas gracias por tu pago. Verificaremos y te confirmaremos en cuanto se refleje en nuestro sistema.",friendly:"¡Genial! Gracias por confirmar tu pago. Lo verificaremos a la brevedad y te daremos el comprobante.",formal_direct:"Gracias por su confirmación. Procederemos a verificar el pago y le notificaremos cuando esté procesado.",formal_soft:"Agradecemos su pago. Realizaremos la verificación correspondiente y le informaremos una vez completado el proceso.",neutral:"Gracias por informarnos. Verificaremos el pago y actualizaremos el estado de su cuenta."},default:{friendly_no_pressure:"Entiendo perfectamente. No te preocupes, cuando puedas realizar el pago me avisas.",friendly:"Agradezco que estemos en contacto. ¿Hay algo en lo que pueda ayudarte para facilitar el proceso?",formal_direct:"Necesitamos regularizar su situación. ¿Podría por favor indicarnos una fecha concreta de pago?",formal_soft:"Entendemos que pueden surgir contratiempos. ¿Podría comentarnos cuándo le sería posible realizar el pago?",neutral:"¿Podría por favor indicarnos cuándo podríamos esperar el pago de la deuda pendiente?"}},u=l[a]||l.default,f=u[s]||u.neutral;return console.log(`Respuesta generada por fallback usando tono "${s}": ${f}`),{responseText:f,explanation:`Respuesta generada por fallback usando tono "${s}"`,confidence:.7}},zw=()=>localStorage.getItem("openai_api_key")||"",IM=n=>{if(!n)return"estimado cliente";const e=["maria","ana","carmen","rosa","lucia","elena","patricia","laura","sandra","monica","claudia","alejandra","diana","beatriz","martha","gloria","adriana","paola","carolina","andrea","liliana","marcela","angela","catalina","esperanza"],t=n.toLowerCase().split(" ")[0];return e.includes(t)?`Doña ${n.split(" ")[0]}`:`Don ${n.split(" ")[0]}`},DM=async n=>{try{if(!n)return console.log("ClientId no válido para obtener contexto previo"),null;const e=await Ay(n,3);if(e.length===0)return null;let t=`=== HISTORIAL PREVIO CON ESTE CLIENTE ===
`;return e.forEach((a,s)=>{a.turns&&a.turns.length>0&&(t+=`
--- Conversación ${s+1} ---
`,a.turns.slice(-6).forEach(u=>{const f=u.sender==="agent"?"Agente":"Cliente";t+=`${f}: ${u.message}
`}),a.summary&&a.summary.result&&(t+=`Resultado: ${a.summary.result}
`,a.summary.notes&&(t+=`Notas: ${a.summary.notes}
`)))}),t}catch(e){return console.error("Error obteniendo contexto previo:",e),null}},OM=async(n,e=0)=>{try{if(!n||typeof e!="number")return console.log("Datos insuficientes para obtener contexto de clientes similares"),null;const t=await iu(),a=e||1e6,s=a*.3,l=t.filter(p=>p.id!==n.id&&p.debt>=a-s&&p.debt<=a+s);if(l.length===0)return null;const u=l.map(p=>{if(!p.soul)return null;const y=Math.abs(p.soul.relationship-n.relationship)+Math.abs(p.soul.attitude-n.attitude)+Math.abs(p.soul.sensitivity-n.sensitivity)+Math.abs(p.soul.probability-n.probability);return{client:p,similarity:y}}).filter(p=>p!==null).sort((p,y)=>p.similarity-y.similarity).slice(0,2);if(u.length===0)return null;let f=`=== CONTEXTO DE CLIENTES SIMILARES ===
`;f+=`(Clientes con perfil similar: deuda parecida, características del alma similares)

`;for(const{client:p}of u){const y=await Ay(p.id,2);y.length>0&&(f+=`--- Estilo conversacional de cliente similar ---
`,f+=`Perfil del alma: R:${p.soul.relationship} A:${p.soul.attitude} S:${p.soul.sensitivity} P:${p.soul.probability}
`,y.forEach(v=>{v.turns&&v.turns.length>0&&(v.turns.slice(-4).forEach(T=>{const C=T.sender==="agent"?"Agente":"Cliente";f+=`${C}: ${T.message}
`}),v.summary&&(f+=`Resultado: ${v.summary.result}
`),f+=`
`)}))}return f}catch(t){return console.error("Error obteniendo contexto de clientes similares:",t),null}},Bw=async(n,e,t,a=!1)=>{if(!n)return{contextSection:`=== SIN CONTEXTO PREVIO ===
Esta es la primera interacción registrada.
`,currentConversation:"",currentPhase:"greeting",phaseDescription:"FASE 1 - SALUDO: Establecer contacto inicial, identificarse y crear rapport usando tratamiento formal",clientInfo:null};let s=null;try{s=await of(n)}catch(T){console.error("Error obteniendo información del cliente:",T)}const l=await hw(s==null?void 0:s.provider_id),u=await DM(n),f=u?null:await OM(e,(s==null?void 0:s.debt)||0);let p="";u?p=u:f?p=f:p=`=== SIN CONTEXTO PREVIO ===
Esta es la primera interacción registrada con este tipo de perfil.
`;let y="";t&&t.length>0&&(y=`
=== CONVERSACIÓN ACTUAL ===
`,t.slice(-8).forEach(T=>{const C=T.sender==="agent"?"Agente":"Cliente";y+=`${C}: ${T.message}
`,T.event&&T.event!=="neutral"&&(y+=`[Evento detectado: ${T.event}]
`)}));const v=t&&t.length>0?t[t.length-1].phase||"negotiation":"greeting",E={greeting:"FASE 1 - SALUDO: Establecer contacto inicial, identificarse y crear rapport usando tratamiento formal",debt_notification:"FASE 2 - COMUNICACIÓN DE DEUDA: Informar sobre la deuda pendiente de manera clara, usando montos específicos si el cliente pregunta",negotiation:"FASE 3 - NEGOCIACIÓN: Buscar acuerdo de pago, manejar objeciones con respeto",payment_confirmation:"FASE 4 - CONCRETAR PAGO: Facilitar los datos de pago y confirmar compromisos",farewell:"FASE 5 - DESPEDIDA: Cerrar la conversación de manera cordial y profesional"};return{contextSection:p,currentConversation:y,currentPhase:v,phaseDescription:E[v]||E.negotiation,clientInfo:s,providerInfo:l}},jM=async(n,e,t,a=null)=>{var s,l,u;try{const f=zw();if(!f||f.trim()==="")return i1(n,e,t);const y=_t.create({baseURL:"https://api.openai.com/v1/chat/completions".replace("/chat/completions",""),headers:{Authorization:`Bearer ${f}`,"Content-Type":"application/json"}}),v=await Bw(a,t,e,!0),E=`Eres un especialista en análisis de comunicaciones para cobranza. Tu tarea es categorizar respuestas de clientes.

IMPORTANTE: 
- Siempre usar tratamiento formal (usted, nunca tutear)
- Usar Don/Doña según corresponda
- En fase de comunicación de deuda, mencionar montos específicos si el cliente pregunta

${v.contextSection}

PERFIL ACTUAL DEL CLIENTE:
- Relación/Cercanía: ${t.relationship}/100
- Historial de Pago: ${t.history}/100  
- Actitud: ${t.attitude}/100
- Sensibilidad a Presión: ${t.sensitivity}/100
- Probabilidad de Pago: ${t.probability}/100

FASE ACTUAL: ${v.phaseDescription}

${v.currentConversation}

INSTRUCCIONES:
Analiza el siguiente mensaje del cliente y clasifícalo en UNA de estas categorías EXACTAS:
- neutral
- accepts_payment
- offers_partial  
- reschedule
- evades
- annoyed
- refuses
- thanks
- no_answer
- confirms_payment
- asks_bank_info

Responde SOLO con la categoría, sin explicaciones adicionales.`,T=`Mensaje del cliente a analizar: "${n}"`;let A=((u=(l=(s=(await y.post("/chat/completions",{model:"gpt-3.5-turbo",messages:[{role:"system",content:E},{role:"user",content:T}],max_tokens:20,temperature:.1})).data.choices[0])==null?void 0:s.message)==null?void 0:l.content)==null?void 0:u.trim())||"",M="neutral";const I=["neutral","accepts_payment","offers_partial","reschedule","evades","annoyed","refuses","thanks","no_answer","confirms_payment","asks_bank_info"];for(const q of I)if(A.toLowerCase().includes(q)){M=q;break}const G={neutral:{relationship:0,history:0,attitude:0,sensitivity:0,probability:0},accepts_payment:{relationship:5,history:10,attitude:10,sensitivity:-5,probability:20},offers_partial:{relationship:5,history:5,attitude:10,sensitivity:-5,probability:15},reschedule:{relationship:2,history:-5,attitude:5,sensitivity:0,probability:-5},evades:{relationship:-5,history:-5,attitude:-10,sensitivity:5,probability:-10},annoyed:{relationship:-10,history:-5,attitude:-15,sensitivity:10,probability:-15},refuses:{relationship:-20,history:-20,attitude:-20,sensitivity:20,probability:-30},thanks:{relationship:5,history:0,attitude:10,sensitivity:-5,probability:10},no_answer:{relationship:-5,history:-10,attitude:-5,sensitivity:0,probability:-10},confirms_payment:{relationship:10,history:20,attitude:20,sensitivity:-10,probability:30},asks_bank_info:{relationship:8,history:5,attitude:15,sensitivity:-5,probability:25}},Q=G[M]||G.neutral;return{eventType:M,deltas:Q,explanation:`Evento detectado por OpenAI: "${M}" con contexto de conversaciones previas`,confidence:.9}}catch(f){return console.error("Error al analizar mensaje con OpenAI:",f),i1(n)}},PM=async(n,e,t,a,s=null)=>{var l,u,f;try{const p=zw();if(!p||p.trim()===""){const q=await of(s),oe=await hw(q==null?void 0:q.provider_id);return s1(n,e,t,a,oe,q)}const v=_t.create({baseURL:"https://api.openai.com/v1/chat/completions".replace("/chat/completions",""),headers:{Authorization:`Bearer ${p}`,"Content-Type":"application/json"}}),E=await Bw(s,e,n,!1),T=E.clientInfo?IM(E.clientInfo.name):"estimado cliente";let C="";e.relationship>70?C=e.sensitivity>70?"cordial y comprensivo, evitando presión excesiva":"cordial pero directo, manteniendo profesionalismo":e.relationship<40?C=e.sensitivity<40?"formal y directo, profesional pero firme":"formal y considerado, profesional y respetuoso":C="profesional equilibrado, manteniendo cortesía";const A=E.clientInfo&&E.currentPhase==="debt_notification"?`
INFORMACIÓN DE DEUDA: $${E.clientInfo.debt.toLocaleString("es-CO")} COP`:"",M=`Eres un agente de cobranza profesional de ${E.providerInfo.name}. Tu objetivo es recuperar pagos pendientes manteniendo buenas relaciones con los clientes.

REGLAS FUNDAMENTALES DE COMUNICACIÓN:
1. SIEMPRE usar tratamiento formal (usted, nunca tutear)
2. SIEMPRE dirigirse al cliente como "${T}"
3. En FASE DE COMUNICACIÓN DE DEUDA: Si el cliente pregunta por el monto, proporcionar la cifra específica
4. Mantener tono profesional, empático y orientado a soluciones
5. Adaptar el tono al perfil del cliente
6. Si el cliente pregunta por los datos bancarios, proporcionar la información bancaria

${a==="asks_bank_info"?`
  INFORMACIÓN BANCARIA:
  ${E.providerInfo.bank_information}
  `:""}

${E.contextSection}

INFORMACIÓN DEL CLIENTE:${A}

PERFIL ACTUAL DEL CLIENTE:
- Relación/Cercanía: ${e.relationship}/100
- Historial de Pago: ${e.history}/100
- Actitud: ${e.attitude}/100  
- Sensibilidad a Presión: ${e.sensitivity}/100
- Probabilidad de Pago: ${e.probability}/100

TONO RECOMENDADO: ${C}

FASE ACTUAL: ${E.phaseDescription}

${E.currentConversation}

ÚLTIMO MENSAJE DEL CLIENTE: "${t}"
EVENTO DETECTADO: "${a}"

INSTRUCCIONES ESPECÍFICAS POR FASE:
- SALUDO: Preséntese cordialmente usando "Don/Doña", identifique al cliente, establezca el motivo de la llamada
- COMUNICACIÓN DE DEUDA: Informe sobre la deuda. Si pregunta por el monto, mencione la cifra específica
- NEGOCIACIÓN: Busque acuerdos, maneje objeciones con respeto, ofrezca alternativas
- CONCRETAR PAGO: Facilite el proceso, confirme fechas y métodos
- DESPEDIDA: Cierre cordialmente, confirme acuerdos, agradezca

Genere UNA respuesta concisa (máximo 2 oraciones) usando tratamiento formal y dirigiéndose como "${T}".`,I=`Basándose en el contexto y el evento "${a}", genere una respuesta apropiada como agente de cobranza usando tratamiento formal.`;let Q=((f=(u=(l=(await v.post("/chat/completions",{model:"gpt-3.5-turbo",messages:[{role:"system",content:M},{role:"user",content:I}],max_tokens:150,temperature:.7})).data.choices[0])==null?void 0:l.message)==null?void 0:u.content)==null?void 0:f.trim())||"";return Q||(Q=`${T}, entiendo su situación. ¿Podríamos coordinar una fecha para el pago de su deuda pendiente?`),{responseText:Q,explanation:`Respuesta generada por OpenAI con tratamiento formal "${T}" y tono "${C}"`,confidence:.9}}catch(p){return console.error("Error al generar respuesta con OpenAI:",p),s1(n,e,t,a,context.providerInfo,context.clientInfo)}},i1=(n,e,t)=>{const a=n.toLowerCase();let s="neutral";a.includes("datos bancarios")||a.includes("información bancaria")||a.includes("número de cuenta")||a.includes("cuenta bancaria")||a.includes("banco")&&(a.includes("cuál")||a.includes("cual")||a.includes("dónde")||a.includes("donde"))||a.includes("cuenta")&&(a.includes("cuál")||a.includes("cual")||a.includes("número"))||a.includes("transferir")&&(a.includes("dónde")||a.includes("donde")||a.includes("cuál")||a.includes("cual"))||a.includes("pagar")&&(a.includes("dónde")||a.includes("donde")||a.includes("cuál")||a.includes("cual"))||a.includes("datos para pagar")||a.includes("información para pagar")?s="asks_bank_info":a.includes("pagar")||a.includes("transferir")||a.includes("depositar")?a.includes("completo")||a.includes("todo")||a.includes("total")?s="accepts_payment":a.includes("parte")||a.includes("parcial")||a.includes("algo")||a.includes("abono")?s="offers_partial":a.includes("próxima")||a.includes("después")||a.includes("luego")||a.includes("semana")?s="reschedule":s="accepts_payment":a.includes("gracias")||a.includes("agradezco")||a.includes("agradecida")?s="thanks":a.includes("ya pagué")||a.includes("realicé el pago")||a.includes("transferí")||a.includes("consigné")?s="confirms_payment":a.includes("no puedo")||a.includes("imposible")||a.includes("difícil")?s="evades":a.includes("molesto")||a.includes("harto")||a.includes("fastidio")||a.includes("joder")?s="annoyed":(a.includes("no voy a pagar")||a.includes("no pagaré")||a.includes("olvídate")||a.includes("no pienso"))&&(s="refuses");const l={neutral:{relationship:0,history:0,attitude:0,sensitivity:0,probability:0},accepts_payment:{relationship:5,history:10,attitude:10,sensitivity:-5,probability:20},offers_partial:{relationship:5,history:5,attitude:10,sensitivity:-5,probability:15},reschedule:{relationship:2,history:-5,attitude:5,sensitivity:0,probability:-5},evades:{relationship:-5,history:-5,attitude:-10,sensitivity:5,probability:-10},annoyed:{relationship:-10,history:-5,attitude:-15,sensitivity:10,probability:-15},refuses:{relationship:-20,history:-20,attitude:-20,sensitivity:20,probability:-30},thanks:{relationship:5,history:0,attitude:10,sensitivity:-5,probability:10},no_answer:{relationship:-5,history:-10,attitude:-5,sensitivity:0,probability:-10},confirms_payment:{relationship:10,history:20,attitude:20,sensitivity:-10,probability:30},asks_bank_info:{relationship:8,history:5,attitude:15,sensitivity:-5,probability:25}},u=l[s]||l.neutral;return{eventType:s,deltas:u,explanation:`Evento detectado por análisis local mejorado: "${s}" basado en patrones de lenguaje.`,confidence:.7}},s1=(n,e,t,a,s=null,l=null)=>{let u="neutral";e.relationship>70?e.sensitivity>70?u="friendly_no_pressure":u="friendly":e.relationship<40&&(e.sensitivity<40?u="formal_direct":u="formal_soft");const f={accepts_payment:{friendly_no_pressure:"Excelente, me alegra mucho escuchar eso. Cuando usted pueda realizar el pago, solo avíseme y le envío toda la información necesaria.",friendly:"Perfecto, muchas gracias por su disposición. ¿Le parece bien que le envíe los datos bancarios ahora mismo?",formal_direct:"Muy bien, agradecemos su decisión. Le voy a proporcionar los datos para que pueda realizar el pago antes del viernes.",formal_soft:"Gracias por su confirmación. ¿Prefiere que le envíe la información de pago por WhatsApp o por correo?",neutral:"Entendido. ¿Desea que le proporcione los datos bancarios para realizar el pago?"},offers_partial:{friendly_no_pressure:"Agradezco mucho su esfuerzo por hacer este abono. Cualquier pago nos ayuda bastante y valoramos su compromiso.",friendly:"Gracias por ofrecerse a hacer un abono. Eso nos ayuda mucho. ¿Cuándo podría usted realizar esta transferencia?",formal_direct:"Tomamos nota de su propuesta de pago parcial. ¿Podría indicarnos cuándo haría este abono y cuándo el saldo restante?",formal_soft:"Entendemos su situación y agradecemos su disposición. ¿Qué porcentaje de la deuda podría usted cubrir inicialmente?",neutral:"De acuerdo con el pago parcial. ¿Podríamos coordinar cuándo haría usted este primer abono?"},reschedule:{friendly_no_pressure:"No hay ningún problema, entiendo que usted necesita más tiempo. ¿Qué fecha le resultaría más cómoda?",friendly:"Claro que podemos ajustar la fecha. ¿Cuál sería el mejor momento para usted realizar el pago?",formal_direct:"Podemos considerar una nueva fecha. ¿Cuál es su propuesta concreta y definitiva para el pago?",formal_soft:"Entendemos la necesidad de reprogramar. ¿Qué fecha le resultaría más conveniente para realizar el pago?",neutral:"De acuerdo. ¿Cuál sería la nueva fecha propuesta para efectuar el pago?"},evades:{friendly_no_pressure:"Entiendo que puede ser un tema delicado. No se preocupe, podemos buscar juntos la mejor solución para su situación.",friendly:"Comprendo que es una situación compleja. ¿Hay algo específico que podamos resolver para facilitar el pago?",formal_direct:"Necesitamos una respuesta concreta sobre el pago pendiente. ¿Podría indicarnos cuál es su situación actual?",formal_soft:"Entendemos que pueda ser un tema complicado. ¿Podríamos programar una fecha para hablar con más tranquilidad?",neutral:"¿Podría por favor ayudarnos a entender cuál es su situación respecto al pago pendiente?"},annoyed:{friendly_no_pressure:"Lamento mucho si le he causado alguna molestia. No es mi intención incomodarle, solo buscamos encontrar una solución que funcione para ambas partes.",friendly:"Disculpe si le he generado alguna molestia. ¿Qué podríamos hacer diferente para resolver esta situación de la mejor manera?",formal_direct:"Entendemos su molestia, sin embargo necesitamos resolver el tema del pago pendiente. ¿Qué alternativa propone usted?",formal_soft:"Lamentamos si esta comunicación le resulta incómoda. ¿Habría un mejor momento o forma para abordar este tema?",neutral:"Comprendo su posición. ¿Cómo preferiría usted que manejáramos esta situación para llegar a una solución?"},refuses:{friendly_no_pressure:"Entiendo su posición actual. Quizás podríamos explorar algunas alternativas de pago que se ajusten mejor a su situación.",friendly:"Comprendo que sea difícil en este momento. ¿Podríamos considerar un plan de pagos más flexible?",formal_direct:"Tomamos nota de su respuesta. Sin embargo, la deuda permanece vigente. ¿Podríamos discutir alternativas viables?",formal_soft:"Entendemos que pueda tener dificultades. ¿Le interesaría conocer otras opciones de pago disponibles?",neutral:"¿Podríamos explorar alternativas que faciliten el pago de la deuda pendiente?"},thanks:{friendly_no_pressure:"No hay de qué. Es un placer poder ayudarle. Si necesita cualquier cosa adicional, no dude en contactarme.",friendly:"Es un gusto poder ser de ayuda. ¿Hay algo más en lo que pueda asistirle para facilitar el proceso?",formal_direct:"De nada. ¿Podríamos entonces confirmar cuándo realizará el pago de la deuda pendiente?",formal_soft:"Nos alegra poder serle de utilidad. ¿Necesita alguna información adicional para proceder con el pago?",neutral:"De nada. ¿Tiene alguna otra consulta respecto al proceso de pago?"},confirms_payment:{friendly_no_pressure:"Excelente noticia. Muchas gracias por realizar el pago. Vamos a verificarlo y le confirmaremos en cuanto se refleje en el sistema.",friendly:"Genial. Gracias por confirmar su pago. Lo verificaremos inmediatamente y le daremos el comprobante correspondiente.",formal_direct:"Gracias por su confirmación. Procederemos a verificar el pago y le notificaremos una vez esté procesado en el sistema.",formal_soft:"Agradecemos mucho su pago. Realizaremos la verificación correspondiente y le informaremos cuando esté todo listo.",neutral:"Gracias por informarnos. Verificaremos el pago y actualizaremos el estado de su cuenta."},asks_bank_info:{friendly_no_pressure:`Señor@ ${(l==null?void 0:l.name)||""}, esta es la información de las cuentas bancarias para ${(s==null?void 0:s.name)||"nuestra empresa"}: ${(s==null?void 0:s.bank_information)||"Le enviaré la información bancaria por separado."}`,friendly:`Don/Doña ${(l==null?void 0:l.name)||""}, le adjunto las cuentas de ${(s==null?void 0:s.name)||"nuestra empresa"}: ${(s==null?void 0:s.bank_information)||"Le enviaré la información bancaria completa."}`,formal_direct:`Señor@ ${(l==null?void 0:l.name)||""}, esta es la información de las cuentas bancarias para ${(s==null?void 0:s.name)||"nuestra empresa"}: ${(s==null?void 0:s.bank_information)||"Recibirá la información bancaria detallada."}`,formal_soft:`Don/Doña ${(l==null?void 0:l.name)||""}, le adjunto las cuentas de ${(s==null?void 0:s.name)||"nuestra empresa"}: ${(s==null?void 0:s.bank_information)||"Le haré llegar todos los datos bancarios necesarios."}`,neutral:`Señor@ ${(l==null?void 0:l.name)||""}, esta es la información de las cuentas bancarias para ${(s==null?void 0:s.name)||"nuestra empresa"}: ${(s==null?void 0:s.bank_information)||"Le proporcionaré la información bancaria completa."}`},default:{friendly_no_pressure:"Entiendo perfectamente su situación. No se preocupe, cuando pueda realizar el pago solo avíseme.",friendly:"Agradezco que mantengamos esta comunicación. ¿Hay algo en lo que pueda ayudarle para facilitar el proceso de pago?",formal_direct:"Necesitamos regularizar su situación de deuda pendiente. ¿Podría indicarnos una fecha específica de pago?",formal_soft:"Entendemos que pueden surgir inconvenientes. ¿Podría comentarnos cuándo le sería posible realizar el pago?",neutral:"¿Podría por favor indicarnos cuándo podríamos esperar el pago de la deuda pendiente?"}},p=f[a]||f.default;return{responseText:p[u]||p.neutral,explanation:`Respuesta generada con tratamiento formal y tono "${u}" adaptado al perfil del cliente`,confidence:.8}},yt={GEMINI:"gemini",ZEPHYR:"zephyr",OPENAI:"openai"};let Ko=yt.OPENAI;const MM=n=>Object.values(yt).includes(n)?(Ko=n,!0):!1,kM=()=>Ko,VM=async(n,e,t,a=null)=>{switch(Ko){case yt.GEMINI:return W6(n);case yt.ZEPHYR:return CM(n,e,t);case yt.OPENAI:return jM(n,e,t,a);default:throw new Error(`Servicio de IA no reconocido: ${Ko}`)}},nh=async(n,e,t,a,s=null)=>{switch(Ko){case yt.GEMINI:return X6(n,e,t,a);case yt.ZEPHYR:return RM(n,e,t,a);case yt.OPENAI:return PM(n,e,t,a,s);default:throw new Error(`Servicio de IA no reconocido: ${Ko}`)}},qw=({phase:n,onChange:e})=>{const t=a=>{e(a.target.value)};return m.jsxs("div",{className:"form-group",children:[m.jsx("label",{className:"label",children:"Fase de la conversación"}),m.jsxs("select",{className:"input w-full",value:n,onChange:t,children:[m.jsx("option",{value:Ie.GREETING,children:"Fase 1: Saludo"}),m.jsx("option",{value:Ie.DEBT_NOTIFICATION,children:"Fase 2: Comunicación de deuda"}),m.jsx("option",{value:Ie.NEGOTIATION,children:"Fase 3: Negociación"}),m.jsx("option",{value:Ie.PAYMENT_CONFIRMATION,children:"Fase 4: Concretar pago"}),m.jsx("option",{value:Ie.FAREWELL,children:"Fase 5: Despedida"})]})]})},LM=()=>{const{clientId:n}=Tg(),{currentUser:e}=ru(),t=Tn(),a=xe=>{if(!xe)return"estimado cliente";const Le=["maria","ana","carmen","rosa","lucia","elena","patricia","laura","sandra","monica","claudia","alejandra","diana","beatriz","martha","gloria","adriana","paola","carolina","andrea","liliana","marcela","angela","catalina","esperanza"],Ce=xe.toLowerCase().split(" ")[0];return Le.includes(Ce)?`Doña ${xe.split(" ")[0]}`:`Don ${xe.split(" ")[0]}`},l=(()=>{if(n)return n;const Le=window.location.hash.match(/\/conversation\/new\/([^\/\?#]+)/);return Le&&Le[1]?Le[1]:null})(),[u,f]=V.useState(null),[p,y]=V.useState(null),[v,E]=V.useState(null),[T,C]=V.useState([]),[A,M]=V.useState(""),[I,G]=V.useState(!0),[Q,q]=V.useState(!1),[oe,ce]=V.useState(""),[pe,P]=V.useState(""),[R,N]=V.useState("neutral"),[j,L]=V.useState(""),[z,O]=V.useState(Ie.GREETING),[dt,Me]=V.useState(""),[Z,ue]=V.useState({relationship:0,history:0,attitude:0,sensitivity:0,probability:0}),ye=V.useRef(null);V.useEffect(()=>{l&&e&&(async()=>{var Le;if(!l){Me("Error: No se pudo identificar el cliente desde la URL. Por favor, vuelva a la lista de clientes e intente nuevamente."),G(!1);return}if(!e){Me("Error: Usuario no autenticado. Por favor, inicie sesión nuevamente."),G(!1);return}try{G(!0),Me("");const Ce=await of(l);if(!Ce){Me(`Error: No se encontró el cliente con ID "${l}". Es posible que haya sido eliminado o que el enlace sea incorrecto.`),G(!1);return}if(!Ce.name||!Ce.soul){Me("Error: Los datos del cliente están incompletos. Por favor, verifique la información del cliente."),G(!1);return}f(Ce),E(Ce.soul);const qn=await j6(l,e.uid,Ce.soul);if(!qn){Me("Error: No se pudo crear la conversación. Por favor, intente nuevamente."),G(!1);return}y(qn);const Er=await Nh(Ce.provider_id),ja=`Buenos días señor@ ${Ce.name}, le saluda Juan Pablo de Danta Labs, la empresa que esta apoyando a ${Er.name?Er.name:"Acriventas"} en la gestión de su cartera. ¿Cómo ha estado? `;L(ja),ce(ja)}catch(Ce){console.error("Error al iniciar conversación:",Ce),Ce.code==="permission-denied"?Me("Error: No tiene permisos para acceder a este cliente o crear conversaciones."):Ce.code==="not-found"?Me("Error: El cliente especificado no existe o ha sido eliminado."):(Le=Ce.message)!=null&&Le.includes("Firebase")?Me("Error de conexión con la base de datos. Por favor, verifique su conexión a internet e intente nuevamente."):Me(`Error inesperado al iniciar la conversación: ${Ce.message||"Error desconocido"}`),f(null),E(null),y(null)}finally{G(!1)}})()},[l,e]),V.useEffect(()=>{var xe;(xe=ye.current)==null||xe.scrollIntoView({behavior:"smooth"})},[T]);const Ge=async()=>{if(!(!A.trim()||Q))try{q(!0);const xe={id:`agent-${Date.now()}`,sender:"agent",message:A,phase:z,timestamp:new Date};C(Le=>[...Le,xe]),await qE(p,{sender:"agent",message:A,phase:z,event:"neutral"}),M(""),z===Ie.GREETING&&O(Ie.DEBT_NOTIFICATION)}catch(xe){console.error("Error al enviar mensaje:",xe)}finally{q(!1)}},k=async xe=>{const Le=xe.target.value;if(P(Le),!(!l||!v)&&Le.trim().split(/\s+/).length>3)try{const Ce=await VM(Le,T,v,l);N(Ce.eventType),ue(Ce.deltas)}catch(Ce){console.error("Error al analizar mensaje:",Ce),N("neutral"),ue({relationship:0,history:0,attitude:0,sensitivity:0,probability:0})}},ie=async()=>{if(!(!pe.trim()||Q)){if(!p||!l||!v){Me("Error: Datos de conversación incompletos. Por favor, recargue la página.");return}try{q(!0);const xe={id:`client-${Date.now()}`,sender:"client",message:pe,phase:z,timestamp:new Date,event:R};C(qn=>[...qn,xe]);const Le=await qE(p,{sender:"client",message:pe,phase:z,event:R});E(Le.currentSoul);const Ce=await nh(T,Le.currentSoul,pe,R,l);ce(Ce.responseText),P(""),N("neutral"),ue({relationship:0,history:0,attitude:0,sensitivity:0,probability:0}),R==="accepts_payment"&&z===Ie.NEGOTIATION&&O(Ie.PAYMENT_CONFIRMATION),R==="confirms_payment"&&z===Ie.PAYMENT_CONFIRMATION&&O(Ie.FAREWELL)}catch(xe){console.error("Error al agregar mensaje del cliente:",xe),Me(`Error al procesar el mensaje: ${xe.message||"Error desconocido"}`)}finally{q(!1)}}},he=xe=>{const Le=xe.target.value;N(Le);const Ce={neutral:{relationship:0,history:0,attitude:0,sensitivity:0,probability:0},accepts_payment:{relationship:5,history:10,attitude:10,sensitivity:-5,probability:20},offers_partial:{relationship:5,history:5,attitude:10,sensitivity:-5,probability:15},reschedule:{relationship:2,history:-5,attitude:5,sensitivity:0,probability:-5},evades:{relationship:-5,history:-5,attitude:-10,sensitivity:5,probability:-10},annoyed:{relationship:-10,history:-5,attitude:-15,sensitivity:10,probability:-15},refuses:{relationship:-20,history:-20,attitude:-20,sensitivity:20,probability:-30},thanks:{relationship:5,history:0,attitude:10,sensitivity:-5,probability:10},no_answer:{relationship:-5,history:-10,attitude:-5,sensitivity:0,probability:-10},confirms_payment:{relationship:10,history:20,attitude:20,sensitivity:-10,probability:30},asks_bank_info:{relationship:8,history:5,attitude:15,sensitivity:-5,probability:25}};ue(Ce[Le]||Ce.neutral)},le=xe=>{O(xe)},_e=()=>{oe&&(M(oe),ce(""))},Oe=async xe=>{E(xe);try{await L6(p,xe)}catch(Le){console.error("Error al actualizar valores del alma:",Le)}},ee=()=>{t(`/conversation/${p}`)};if(I)return m.jsx("div",{className:"container mx-auto px-4 py-6",children:m.jsxs("div",{className:"text-center",children:[m.jsxs("div",{className:"animate-pulse space-y-4",children:[m.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3 mx-auto"}),m.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mx-auto"}),m.jsx("div",{className:"h-64 bg-gray-200 rounded"})]}),m.jsx("p",{className:"mt-4 text-gray-600",children:l?u?p?"Preparando interfaz...":"Creando conversación...":"Validando cliente...":"Obteniendo información del cliente..."})]})});if(dt)return m.jsx("div",{className:"container mx-auto px-4 py-6",children:m.jsxs("div",{className:"max-w-md mx-auto",children:[m.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-6 py-4 rounded-lg shadow",role:"alert",children:m.jsxs("div",{className:"flex",children:[m.jsx("div",{className:"flex-shrink-0",children:m.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),m.jsxs("div",{className:"ml-3",children:[m.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error al iniciar conversación"}),m.jsx("div",{className:"mt-2 text-sm text-red-700",children:m.jsx("p",{children:dt})})]})]})}),m.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row gap-3",children:[m.jsx("button",{className:"btn-primary flex-1",onClick:()=>{Me(""),G(!0),window.location.reload()},children:"Reintentar"}),m.jsx("button",{className:"btn-secondary flex-1",onClick:()=>t("/clients"),children:"Volver a Clientes"})]}),!1]})});if(!u||!p||!v)return m.jsx("div",{className:"container mx-auto px-4 py-6",children:m.jsxs("div",{className:"bg-yellow-100 border border-yellow-400 text-yellow-700 px-4 py-3 rounded relative",role:"alert",children:[m.jsx("strong",{className:"font-bold",children:"Advertencia:"}),m.jsx("span",{className:"block sm:inline",children:" Los datos de la conversación no están completamente cargados."}),m.jsxs("div",{className:"mt-2",children:[m.jsx("button",{className:"btn-secondary mr-2",onClick:()=>window.location.reload(),children:"Recargar"}),m.jsx("button",{className:"btn-secondary",onClick:()=>t("/clients"),children:"Volver a Clientes"})]})]})});const ve=T.reduce((xe,Le)=>{const Ce=Le.phase||Ie.NEGOTIATION;return xe[Ce]||(xe[Ce]=[]),xe[Ce].push(Le),xe},{}),se=[Ie.GREETING,Ie.DEBT_NOTIFICATION,Ie.NEGOTIATION,Ie.PAYMENT_CONFIRMATION,Ie.FAREWELL],at=xe=>{switch(xe){case Ie.GREETING:return"Fase 1: Saludo";case Ie.DEBT_NOTIFICATION:return"Fase 2: Comunicación de deuda";case Ie.NEGOTIATION:return"Fase 3: Negociación";case Ie.PAYMENT_CONFIRMATION:return"Fase 4: Concretar pago";case Ie.FAREWELL:return"Fase 5: Despedida";default:return"Fase desconocida"}};return m.jsxs("div",{className:"container mx-auto px-4 py-6",children:[m.jsxs("div",{className:"mb-6 flex justify-between items-center",children:[m.jsxs("h1",{className:"text-2xl font-bold",children:["Conversación con ",a(u.name)]}),m.jsx("div",{children:m.jsx("button",{className:"btn-primary",onClick:ee,children:"Finalizar Conversación"})})]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[m.jsxs("div",{className:"md:col-span-2",children:[dt&&m.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",role:"alert",children:m.jsxs("div",{className:"flex",children:[m.jsx("div",{className:"flex-shrink-0",children:m.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),m.jsx("div",{className:"ml-3",children:m.jsx("p",{className:"text-sm",children:dt})}),m.jsx("div",{className:"ml-auto pl-3",children:m.jsxs("button",{onClick:()=>Me(""),className:"text-red-400 hover:text-red-600",children:[m.jsx("span",{className:"sr-only",children:"Cerrar"}),m.jsx("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})]})})]})}),m.jsxs("div",{className:"bg-white rounded-lg shadow p-4 mb-4",children:[m.jsxs("div",{className:"h-96 overflow-y-auto mb-4",children:[se.map(xe=>{const Le=ve[xe]||[];return Le.length===0?null:m.jsxs("div",{className:"mb-6",children:[m.jsx("h3",{className:"text-md font-semibold mb-2 bg-gray-100 p-2 rounded",children:at(xe)}),m.jsx("div",{className:"space-y-4",children:Le.map(Ce=>m.jsxs("div",{className:`mb-4 ${Ce.sender==="agent"?"text-right":"text-left"}`,children:[m.jsxs("div",{className:`inline-block rounded-lg px-4 py-2 max-w-[80%] ${Ce.sender==="agent"?"bg-primary-100 text-primary-800":"bg-gray-100 text-gray-800"}`,children:[m.jsx("p",{className:"whitespace-pre-line",children:Ce.message}),m.jsx("p",{className:"text-xs text-gray-500 mt-1",children:Ce.timestamp.toLocaleTimeString()})]}),Ce.event&&Ce.event!=="neutral"&&m.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Evento: ",Ce.event]})]},Ce.id))})]},xe)}),T.length===0&&m.jsxs("div",{className:"text-center p-4",children:[m.jsx("p",{className:"text-gray-500",children:"No hay mensajes aún. Comience la conversación."}),j&&m.jsxs("div",{className:"mt-4 p-3 bg-blue-50 rounded-md",children:[m.jsx("p",{className:"text-sm text-blue-600 mb-1",children:"Saludo inicial sugerido:"}),m.jsx("p",{className:"text-sm",children:j}),m.jsx("button",{className:"text-xs text-blue-600 mt-1 underline",onClick:()=>M(j),children:"Usar este saludo"})]})]}),m.jsx("div",{ref:ye})]}),m.jsxs("div",{className:"mb-4",children:[m.jsx(qw,{phase:z,onChange:le}),m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1 mt-4",children:"Mensaje del Agente"}),m.jsxs("div",{className:"flex",children:[m.jsx("input",{type:"text",className:"input flex-grow",placeholder:"Escriba su mensaje...",value:A,onChange:xe=>M(xe.target.value)}),m.jsx("button",{className:"btn-primary ml-2",onClick:Ge,disabled:Q||!A.trim(),children:"Enviar"})]}),oe&&m.jsxs("div",{className:"mt-2 p-2 bg-blue-50 rounded-md",children:[m.jsx("p",{className:"text-sm text-blue-600 mb-1",children:"Respuesta sugerida:"}),m.jsx("p",{className:"text-sm",children:oe}),m.jsx("button",{className:"text-xs text-blue-600 mt-1 underline",onClick:_e,children:"Usar esta respuesta"})]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mensaje del Cliente"}),m.jsx("textarea",{className:"input w-full mb-2",rows:"3",placeholder:"Escriba lo que dijo el cliente...",value:pe,onChange:k}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-2",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de Evento"}),m.jsxs("select",{className:"input w-full",value:R,onChange:he,children:[m.jsx("option",{value:"neutral",children:"Evento Neutro"}),m.jsx("option",{value:"accepts_payment",children:"Acepta pagar en fecha acordada"}),m.jsx("option",{value:"offers_partial",children:"Ofrece pago parcial"}),m.jsx("option",{value:"reschedule",children:"Propone nueva fecha"}),m.jsx("option",{value:"evades",children:"Evade o no da respuesta clara"}),m.jsx("option",{value:"annoyed",children:"Se muestra molesto"}),m.jsx("option",{value:"refuses",children:"Se niega a pagar"}),m.jsx("option",{value:"thanks",children:"Agradece recordatorio"}),m.jsx("option",{value:"no_answer",children:"No contesta la llamada"}),m.jsx("option",{value:"confirms_payment",children:"Confirma pago realizado"}),m.jsx("option",{value:"asks_bank_info",children:"Solicita información bancaria"})]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Modificaciones Sugeridas"}),m.jsxs("div",{className:"text-sm",children:[m.jsxs("p",{children:["Relación: ",Z.relationship>0?"+":"",Z.relationship]}),m.jsxs("p",{children:["Historial: ",Z.history>0?"+":"",Z.history]}),m.jsxs("p",{children:["Actitud: ",Z.attitude>0?"+":"",Z.attitude]}),m.jsxs("p",{children:["Sensibilidad: ",Z.sensitivity>0?"+":"",Z.sensitivity]}),m.jsxs("p",{children:["Probabilidad: ",Z.probability>0?"+":"",Z.probability]})]})]})]}),m.jsx("button",{className:"btn-secondary w-full",onClick:ie,disabled:Q||!pe.trim(),children:"Agregar Mensaje del Cliente"})]})]})]}),m.jsxs("div",{children:[m.jsxs("div",{className:"bg-white rounded-lg shadow p-4 mb-4",children:[m.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Información del Cliente"}),m.jsxs("div",{className:"space-y-2",children:[m.jsxs("p",{children:[m.jsx("span",{className:"font-medium",children:"Nombre:"})," ",u.name]}),m.jsxs("p",{children:[m.jsx("span",{className:"font-medium",children:"Tratamiento:"})," ",a(u.name)]}),m.jsxs("p",{children:[m.jsx("span",{className:"font-medium",children:"Teléfono:"})," ",u.phone]}),m.jsxs("p",{children:[m.jsx("span",{className:"font-medium",children:"Email:"})," ",u.email||"No disponible"]}),m.jsxs("p",{children:[m.jsx("span",{className:"font-medium",children:"Deuda:"})," $",u.debt.toLocaleString("es-CO")," COP"]}),!1]})]}),m.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[m.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Variables del Alma"}),m.jsx(Yo,{initialValues:v,readOnly:!1,onChange:Oe}),m.jsx("p",{className:"mt-3 text-xs text-gray-500",children:"Puede ajustar manualmente las variables según su percepción de la conversación."})]})]})]})]})},UM=()=>{const{conversationId:n}=Tg(),e=Tn(),[t,a]=V.useState(null),[s,l]=V.useState(!0),[u,f]=V.useState(!1),[p,y]=V.useState(!1),[v,E]=V.useState(null),[T,C]=V.useState(""),[A,M]=V.useState(!1),[I,G]=V.useState(Ie.NEGOTIATION),[Q,q]=V.useState(""),[oe,ce]=V.useState({sender:"agent",message:"",event:"neutral",phase:Ie.NEGOTIATION,deltas:{relationship:0,history:0,attitude:0,sensitivity:0,probability:0},updateClientSoul:!1}),[pe,P]=V.useState({result:"pending",notes:"",nextActionDate:""});V.useEffect(()=>{(async()=>{var ve;if(!n){q("Error: ID de conversación no válido."),l(!1);return}try{l(!0),q("");const se=await So(n);if(!se){q("Error: No se encontró la conversación especificada. Es posible que haya sido eliminada."),l(!1);return}if(!se.clientId||!se.clientName){q("Error: Los datos de la conversación están incompletos."),l(!1);return}if(a(se),se.summary&&P(se.summary),se.turns&&se.turns.length>0){const at=se.turns[se.turns.length-1];at.phase&&(G(at.phase),ce(xe=>({...xe,phase:at.phase})))}}catch(se){console.error("Error al cargar conversación:",se),se.code==="permission-denied"?q("Error: No tiene permisos para acceder a esta conversación."):se.code==="not-found"?q("Error: La conversación especificada no existe o ha sido eliminada."):(ve=se.message)!=null&&ve.includes("Firebase")?q("Error de conexión con la base de datos. Por favor, verifique su conexión a internet."):q(`Error al cargar la conversación: ${se.message||"Error desconocido"}`)}finally{l(!1)}})()},[n]);const R=ee=>{const{name:ve,value:se}=ee.target;P(at=>({...at,[ve]:se}))},N=async()=>{if(t)try{f(!0),await P6(n,pe);const ee=await So(n);a(ee),f(!1)}catch(ee){console.error("Error al cerrar conversación:",ee),q(`Error al cerrar la conversación: ${ee.message||"Error desconocido"}`),f(!1)}},j=ee=>{const{name:ve,value:se}=ee.target;ce(at=>({...at,[ve]:se}))},L=ee=>{G(ee),ce(ve=>({...ve,phase:ee}))},z=(ee,ve)=>{ce(se=>({...se,deltas:{...se.deltas,[ee]:parseInt(ve,10)||0}}))},O=async()=>{if(!(!oe.message.trim()||!t))try{const ee={sender:oe.sender,message:oe.message,event:oe.event,phase:oe.phase||I,deltas:oe.deltas,updateClientSoul:oe.updateClientSoul};await B6(n,ee);const ve=await So(n);if(a(ve),ce({sender:"agent",message:"",event:"neutral",phase:I,deltas:{relationship:0,history:0,attitude:0,sensitivity:0,probability:0},updateClientSoul:!1}),ee.sender==="client"&&ve.isActive&&t.clientId)try{const se=await nh(ve.turns,ve.currentSoul,ee.message,ee.event,t.clientId);C(se.responseText),M(!0)}catch(se){console.error("Error al generar sugerencia de respuesta:",se)}}catch(ee){console.error("Error al agregar mensaje:",ee),q(`Error al agregar el mensaje: ${ee.message||"Error desconocido"}`)}},dt=async ee=>{var ve;if(t&&t.isActive&&t.clientId)try{const se=v?v.message:((ve=t.turns.find(xe=>xe.sender==="client"))==null?void 0:ve.message)||"Mensaje del cliente",at=await nh(t.turns,t.currentSoul,se,ee,t.clientId);C(at.responseText),M(!0)}catch(se){console.error("Error al generar sugerencia:",se)}},Me=async(ee,ve)=>{if(t)try{await U6(n,ee,ve);const se=await So(n);if(a(se),v.sender==="client"&&t.isActive&&t.clientId)try{const at=await nh(se.turns,se.currentSoul,ve.message,ve.event,t.clientId);C(at.responseText),M(!0)}catch(at){console.error("Error al generar sugerencia de respuesta:",at)}E(null)}catch(se){console.error("Error al editar mensaje:",se),q(`Error al editar el mensaje: ${se.message||"Error desconocido"}`)}},Z=async ee=>{if(window.confirm("¿Está seguro de que desea eliminar este mensaje?"))try{await z6(n,ee);const ve=await So(n);a(ve)}catch(ve){console.error("Error al eliminar mensaje:",ve),q(`Error al eliminar el mensaje: ${ve.message||"Error desconocido"}`)}},ue=async()=>{if(window.confirm("¿Está seguro que desea eliminar permanentemente esta conversación? Esta acción no se puede deshacer."))try{await dw(n),e("/")}catch(ee){console.error("Error al eliminar conversación:",ee),q(`Error al eliminar la conversación: ${ee.message||"Error desconocido"}`)}},ye=async()=>{if(t)try{t.isActive?await FE(n,Wt.INACTIVE,!1):await FE(n,Wt.ACTIVE,!0);const ee=await So(n);a(ee)}catch(ee){console.error("Error al cambiar estado de actividad:",ee),q(`Error al cambiar el estado: ${ee.message||"Error desconocido"}`)}},Ge=()=>{T&&(ce(ee=>({...ee,message:T,sender:"agent"})),C(""),M(!1))},k=()=>{var ee;t&&!t.isActive&&ye(),(ee=document.getElementById("message-input"))==null||ee.focus()},ie=ee=>{if(!ee)return"N/A";if(ee.seconds){const ve=new Date(ee.seconds*1e3);return Vo(ve,"PPp",{locale:bi})}else{if(ee instanceof Date)return Vo(ee,"PPp",{locale:bi});{const ve=new Date(ee);return Vo(ve,"PPp",{locale:bi})}}};if(s)return m.jsx("div",{className:"container mx-auto px-4 py-6",children:m.jsxs("div",{className:"text-center",children:[m.jsxs("div",{className:"animate-pulse space-y-4",children:[m.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3 mx-auto"}),m.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mx-auto"}),m.jsx("div",{className:"h-64 bg-gray-200 rounded"})]}),m.jsx("p",{className:"mt-4 text-gray-600",children:"Cargando conversación..."})]})});if(Q&&!t)return m.jsx("div",{className:"container mx-auto px-4 py-6",children:m.jsxs("div",{className:"max-w-md mx-auto",children:[m.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-6 py-4 rounded-lg shadow",role:"alert",children:m.jsxs("div",{className:"flex",children:[m.jsx("div",{className:"flex-shrink-0",children:m.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),m.jsxs("div",{className:"ml-3",children:[m.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error al cargar conversación"}),m.jsx("div",{className:"mt-2 text-sm text-red-700",children:m.jsx("p",{children:Q})})]})]})}),m.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row gap-3",children:[m.jsx("button",{className:"btn-primary flex-1",onClick:()=>window.location.reload(),children:"Reintentar"}),m.jsx("button",{className:"btn-secondary flex-1",onClick:()=>e("/"),children:"Volver al Dashboard"})]})]})});const he=()=>!t||!t.turns?{}:t.turns.reduce((ee,ve)=>{const se=ve.phase||Ie.NEGOTIATION;return ee[se]||(ee[se]=[]),ee[se].push(ve),ee},{}),le=[Ie.GREETING,Ie.DEBT_NOTIFICATION,Ie.NEGOTIATION,Ie.PAYMENT_CONFIRMATION,Ie.FAREWELL],_e=ee=>{switch(ee){case Ie.GREETING:return"Fase 1: Saludo";case Ie.DEBT_NOTIFICATION:return"Fase 2: Comunicación de deuda";case Ie.NEGOTIATION:return"Fase 3: Negociación";case Ie.PAYMENT_CONFIRMATION:return"Fase 4: Concretar pago";case Ie.FAREWELL:return"Fase 5: Despedida";default:return"Fase desconocida"}},Oe=he();return m.jsxs("div",{className:"container mx-auto px-4 py-6",children:[m.jsxs("div",{className:"flex justify-between items-center mb-6",children:[m.jsxs("div",{children:[m.jsxs("h1",{className:"text-2xl font-bold",children:["Conversación con ",t.clientName]}),m.jsxs("p",{className:"text-gray-500",children:["Iniciada el ",ie(t.startedAt),m.jsx("span",{className:`ml-2 px-2 py-1 rounded-full text-xs ${t.isActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:t.isActive?"Activa":"Inactiva"})]})]}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx("button",{className:`btn-secondary ${p?"bg-blue-100 border-blue-300":""}`,onClick:()=>y(!p),children:p?"Salir de Edición":"Editar Conversación"}),m.jsx("button",{className:`btn-secondary ${t.isActive?"bg-amber-100 text-amber-800":"bg-green-100 text-green-800"}`,onClick:ye,children:t.isActive?"Desactivar":"Activar"}),!t.isActive&&m.jsx("button",{className:"btn-secondary",onClick:k,children:"Continuar Conversación"}),t.status!==Wt.CLOSED&&m.jsx("button",{className:"btn-primary",onClick:()=>f(!0),children:"Finalizar Conversación"}),m.jsx("button",{className:"btn-secondary bg-red-600 text-white hover:bg-red-700",onClick:ue,children:"Eliminar"}),m.jsx("button",{className:"btn-secondary",onClick:()=>e(-1),children:"Volver"})]})]}),Q&&m.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-6",role:"alert",children:m.jsxs("div",{className:"flex",children:[m.jsx("div",{className:"flex-shrink-0",children:m.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),m.jsx("div",{className:"ml-3",children:m.jsx("p",{className:"text-sm",children:Q})}),m.jsx("div",{className:"ml-auto pl-3",children:m.jsxs("button",{onClick:()=>q(""),className:"text-red-400 hover:text-red-600",children:[m.jsx("span",{className:"sr-only",children:"Cerrar"}),m.jsx("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})]})})]})}),p&&m.jsxs("div",{className:"bg-amber-50 border border-amber-200 text-amber-800 p-4 rounded mb-6",children:[m.jsx("h3",{className:"font-semibold mb-2",children:"Modo de edición activo"}),m.jsx("p",{children:"Puede modificar mensajes y eventos existentes. Si la conversación está activa, se generarán sugerencias de respuesta automáticamente basadas en los cambios realizados."})]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[m.jsxs("div",{className:"md:col-span-2",children:[m.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[m.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Mensajes por Fases"}),le.map(ee=>{const ve=Oe[ee]||[];return ve.length===0?null:m.jsxs("div",{className:"mb-6",children:[m.jsx("h3",{className:"text-md font-semibold mb-2 bg-gray-100 p-2 rounded",children:_e(ee)}),m.jsx("div",{className:"space-y-4",children:ve.map(se=>m.jsx("div",{className:`flex ${se.sender==="agent"?"justify-end":"justify-start"}`,children:m.jsxs("div",{className:`rounded-lg px-4 py-2 max-w-[80%] relative ${se.sender==="agent"?"bg-primary-100 text-primary-800":"bg-gray-100 text-gray-800"}`,children:[p&&m.jsxs("div",{className:"absolute top-1 right-1 flex gap-1",children:[m.jsx("button",{className:"text-xs text-blue-600 hover:text-blue-800",onClick:()=>E(se),children:"✏️"}),m.jsx("button",{className:"text-xs text-red-600 hover:text-red-800",onClick:()=>Z(se.id),children:"🗑️"})]}),v&&v.id===se.id?m.jsx(zM,{turn:se,onSave:at=>Me(se.id,at),onCancel:()=>E(null),onEventChange:dt}):m.jsxs(m.Fragment,{children:[m.jsx("p",{className:"whitespace-pre-line",children:se.message}),m.jsxs("div",{className:"text-xs text-gray-500 mt-1 flex justify-between",children:[m.jsx("span",{children:ie(se.timestamp)}),se.isManual&&m.jsx("span",{className:"text-blue-500",children:"Manual"}),se.isEdited&&m.jsx("span",{className:"text-orange-500",children:"Editado"})]}),se.event&&se.event!=="neutral"&&m.jsxs("div",{className:"mt-2 text-xs",children:[m.jsx("span",{className:"font-medium",children:"Evento: "}),m.jsx("span",{children:se.event}),se.deltas&&m.jsxs("div",{className:"mt-1 grid grid-cols-5 gap-1",children:[m.jsxs("span",{className:`${se.deltas.relationship>0?"text-green-600":se.deltas.relationship<0?"text-red-600":"text-gray-500"}`,children:["R: ",se.deltas.relationship>0?"+":"",se.deltas.relationship]}),m.jsxs("span",{className:`${se.deltas.history>0?"text-green-600":se.deltas.history<0?"text-red-600":"text-gray-500"}`,children:["H: ",se.deltas.history>0?"+":"",se.deltas.history]}),m.jsxs("span",{className:`${se.deltas.attitude>0?"text-green-600":se.deltas.attitude<0?"text-red-600":"text-gray-500"}`,children:["A: ",se.deltas.attitude>0?"+":"",se.deltas.attitude]}),m.jsxs("span",{className:`${se.deltas.sensitivity>0?"text-green-600":se.deltas.sensitivity<0?"text-red-600":"text-gray-500"}`,children:["S: ",se.deltas.sensitivity>0?"+":"",se.deltas.sensitivity]}),m.jsxs("span",{className:`${se.deltas.probability>0?"text-green-600":se.deltas.probability<0?"text-red-600":"text-gray-500"}`,children:["P: ",se.deltas.probability>0?"+":"",se.deltas.probability]})]})]})]})]})},se.id))})]},ee)}),(!t.turns||t.turns.length===0)&&m.jsx("p",{className:"text-gray-500 text-center py-4",children:"No hay mensajes en esta conversación."}),T&&m.jsxs("div",{className:`mt-4 p-3 bg-blue-50 border border-blue-100 rounded-md transition-all duration-300 ${A?"opacity-100":"opacity-0"}`,children:[m.jsxs("div",{className:"flex justify-between items-start",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-sm font-medium text-blue-700 mb-1",children:"Sugerencia de respuesta:"}),m.jsx("p",{className:"text-sm text-blue-800",children:T})]}),m.jsx("button",{className:"text-xs bg-blue-600 text-white px-2 py-1 rounded hover:bg-blue-700",onClick:Ge,children:"Usar esta respuesta"})]}),m.jsx("p",{className:"text-xs text-blue-600 mt-2",children:"Esta sugerencia se generó automáticamente basada en el contexto y los cambios realizados."})]}),t.isActive&&m.jsxs("div",{className:"mt-6 p-4 border-t border-gray-200",children:[m.jsx("h3",{className:"text-md font-semibold mb-3",children:"Agregar Nuevo Mensaje"}),m.jsxs("div",{className:"space-y-4",children:[m.jsx(qw,{phase:I,onChange:L}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Emisor"}),m.jsxs("select",{name:"sender",className:"input w-full",value:oe.sender,onChange:j,children:[m.jsx("option",{value:"agent",children:"Agente"}),m.jsx("option",{value:"client",children:"Cliente"})]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de Evento"}),m.jsxs("select",{name:"event",className:"input w-full",value:oe.event,onChange:j,children:[m.jsx("option",{value:"neutral",children:"Evento Neutro"}),m.jsx("option",{value:"accepts_payment",children:"Acepta pagar"}),m.jsx("option",{value:"offers_partial",children:"Ofrece pago parcial"}),m.jsx("option",{value:"reschedule",children:"Propone nueva fecha"}),m.jsx("option",{value:"evades",children:"Evade"}),m.jsx("option",{value:"annoyed",children:"Se muestra molesto"}),m.jsx("option",{value:"refuses",children:"Se niega a pagar"}),m.jsx("option",{value:"thanks",children:"Agradece"}),m.jsx("option",{value:"no_answer",children:"No contesta"}),m.jsx("option",{value:"confirms_payment",children:"Confirma pago"}),m.jsx("option",{value:"asks_bank_info",children:"Solicita información bancaria"})]})]})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"message-input",className:"block text-sm font-medium text-gray-700 mb-1",children:"Mensaje"}),m.jsx("textarea",{id:"message-input",name:"message",rows:"3",className:"input w-full",value:oe.message,onChange:j,placeholder:"Escriba el mensaje..."})]}),oe.event!=="neutral"&&m.jsxs(m.Fragment,{children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Deltas para Variables del Alma"}),m.jsxs("div",{className:"grid grid-cols-5 gap-2",children:[m.jsxs("div",{children:[m.jsx("label",{className:"text-xs text-gray-500",children:"Relación"}),m.jsx("input",{type:"number",min:"-100",max:"100",className:"input w-full text-sm",value:oe.deltas.relationship,onChange:ee=>z("relationship",ee.target.value)})]}),m.jsxs("div",{children:[m.jsx("label",{className:"text-xs text-gray-500",children:"Historial"}),m.jsx("input",{type:"number",min:"-100",max:"100",className:"input w-full text-sm",value:oe.deltas.history,onChange:ee=>z("history",ee.target.value)})]}),m.jsxs("div",{children:[m.jsx("label",{className:"text-xs text-gray-500",children:"Actitud"}),m.jsx("input",{type:"number",min:"-100",max:"100",className:"input w-full text-sm",value:oe.deltas.attitude,onChange:ee=>z("attitude",ee.target.value)})]}),m.jsxs("div",{children:[m.jsx("label",{className:"text-xs text-gray-500",children:"Sensibilidad"}),m.jsx("input",{type:"number",min:"-100",max:"100",className:"input w-full text-sm",value:oe.deltas.sensitivity,onChange:ee=>z("sensitivity",ee.target.value)})]}),m.jsxs("div",{children:[m.jsx("label",{className:"text-xs text-gray-500",children:"Probabilidad"}),m.jsx("input",{type:"number",min:"-100",max:"100",className:"input w-full text-sm",value:oe.deltas.probability,onChange:ee=>z("probability",ee.target.value)})]})]})]}),m.jsxs("div",{className:"flex items-center",children:[m.jsx("input",{type:"checkbox",id:"updateClientSoul",checked:oe.updateClientSoul,onChange:ee=>ce(ve=>({...ve,updateClientSoul:ee.target.checked})),className:"mr-2"}),m.jsx("label",{htmlFor:"updateClientSoul",className:"text-sm text-gray-700",children:"Actualizar alma del cliente en la base de datos"})]})]}),m.jsx("button",{className:"btn-primary",onClick:O,disabled:!oe.message.trim(),children:"Agregar Mensaje"})]})]}),!t.isActive&&m.jsx("div",{className:"mt-6 p-4 border-t border-gray-200",children:m.jsx("div",{className:"bg-gray-50 p-4 rounded-md text-center",children:m.jsx("p",{className:"text-gray-600",children:'Esta conversación no está activa. Pulse "Activar" si desea añadir más mensajes.'})})})]}),t.status===Wt.CLOSED&&t.summary&&m.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[m.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Resumen de la Conversación"}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[m.jsxs("div",{children:[m.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Resultado"}),m.jsxs("p",{className:"font-medium",children:[t.summary.result==="payment"&&"Pago realizado",t.summary.result==="partial_payment"&&"Pago parcial",t.summary.result==="promise"&&"Promesa de pago",t.summary.result==="no_payment"&&"Sin pago",t.summary.result==="pending"&&"Pendiente"]})]}),t.summary.nextActionDate&&m.jsxs("div",{children:[m.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Próxima acción"}),m.jsx("p",{children:ie(t.summary.nextActionDate)})]}),t.summary.notes&&m.jsxs("div",{className:"md:col-span-2",children:[m.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Notas"}),m.jsx("p",{className:"whitespace-pre-line",children:t.summary.notes})]})]})]}),u&&m.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:m.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-lg w-full mx-4",children:[m.jsx("h2",{className:"text-xl font-bold mb-4",children:"Cerrar Conversación"}),m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Resultado"}),m.jsxs("select",{name:"result",className:"input w-full",value:pe.result,onChange:R,children:[m.jsx("option",{value:"payment",children:"Pago realizado"}),m.jsx("option",{value:"partial_payment",children:"Pago parcial"}),m.jsx("option",{value:"promise",children:"Promesa de pago"}),m.jsx("option",{value:"no_payment",children:"Sin pago"}),m.jsx("option",{value:"pending",children:"Pendiente"})]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha de próxima acción"}),m.jsx("input",{type:"date",name:"nextActionDate",className:"input w-full",value:pe.nextActionDate,onChange:R})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notas"}),m.jsx("textarea",{name:"notes",rows:"4",className:"input w-full",value:pe.notes,onChange:R,placeholder:"Resumen de la conversación, acuerdos, observaciones..."})]})]}),m.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[m.jsx("button",{className:"btn-secondary",onClick:()=>f(!1),children:"Cancelar"}),m.jsx("button",{className:"btn-primary",onClick:N,children:"Cerrar Conversación"})]})]})})]}),m.jsxs("div",{children:[m.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[m.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Información del Cliente"}),m.jsxs("p",{className:"mb-2",children:[m.jsx("span",{className:"font-medium",children:"Nombre:"})," ",t.clientName]}),t.client&&m.jsxs(m.Fragment,{children:[m.jsxs("p",{className:"mb-2",children:[m.jsx("span",{className:"font-medium",children:"Teléfono:"})," ",t.client.phone]}),m.jsxs("p",{className:"mb-2",children:[m.jsx("span",{className:"font-medium",children:"Email:"})," ",t.client.email||"No disponible"]}),m.jsxs("p",{className:"mb-2",children:[m.jsx("span",{className:"font-medium",children:"Estado:"})," Deuda pendiente"]}),m.jsx("p",{className:"text-sm text-gray-500 italic",children:"Nota: Por privacidad, no se muestran montos específicos."}),m.jsx("div",{className:"mt-4",children:m.jsx("button",{className:"text-primary-600 text-sm font-medium hover:text-primary-800",onClick:()=>e(`/clients/${t.clientId}`),children:"Ver perfil completo"})})]})]}),m.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[m.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Variables del Alma"}),t.initialSoul&&t.currentSoul&&m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-2",children:"Inicial"}),m.jsx(Yo,{initialValues:t.initialSoul,readOnly:!0})]}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-2",children:"Actual"}),m.jsx(Yo,{initialValues:t.currentSoul,readOnly:!0})]}),m.jsxs("div",{className:"mt-4 p-3 bg-gray-50 rounded-md",children:[m.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Cambios"}),m.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[m.jsxs("div",{children:[m.jsx("span",{className:"font-medium",children:"Relación:"})," ",m.jsxs("span",{className:t.currentSoul.relationship>t.initialSoul.relationship?"text-green-600":t.currentSoul.relationship<t.initialSoul.relationship?"text-red-600":"text-gray-500",children:[t.currentSoul.relationship-t.initialSoul.relationship>0?"+":"",t.currentSoul.relationship-t.initialSoul.relationship]})]}),m.jsxs("div",{children:[m.jsx("span",{className:"font-medium",children:"Historial:"})," ",m.jsxs("span",{className:t.currentSoul.history>t.initialSoul.history?"text-green-600":t.currentSoul.history<t.initialSoul.history?"text-red-600":"text-gray-500",children:[t.currentSoul.history-t.initialSoul.history>0?"+":"",t.currentSoul.history-t.initialSoul.history]})]}),m.jsxs("div",{children:[m.jsx("span",{className:"font-medium",children:"Actitud:"})," ",m.jsxs("span",{className:t.currentSoul.attitude>t.initialSoul.attitude?"text-green-600":t.currentSoul.attitude<t.initialSoul.attitude?"text-red-600":"text-gray-500",children:[t.currentSoul.attitude-t.initialSoul.attitude>0?"+":"",t.currentSoul.attitude-t.initialSoul.attitude]})]}),m.jsxs("div",{children:[m.jsx("span",{className:"font-medium",children:"Sensibilidad:"})," ",m.jsxs("span",{className:t.currentSoul.sensitivity<t.initialSoul.sensitivity?"text-green-600":t.currentSoul.sensitivity>t.initialSoul.sensitivity?"text-red-600":"text-gray-500",children:[t.currentSoul.sensitivity-t.initialSoul.sensitivity>0?"+":"",t.currentSoul.sensitivity-t.initialSoul.sensitivity]})]}),m.jsxs("div",{className:"col-span-2",children:[m.jsx("span",{className:"font-medium",children:"Probabilidad de pago:"})," ",m.jsxs("span",{className:t.currentSoul.probability>t.initialSoul.probability?"text-green-600":t.currentSoul.probability<t.initialSoul.probability?"text-red-600":"text-gray-500",children:[t.currentSoul.probability-t.initialSoul.probability>0?"+":"",t.currentSoul.probability-t.initialSoul.probability]})]})]})]})]})]})]})]})]})},zM=({turn:n,onSave:e,onCancel:t,onEventChange:a})=>{const[s,l]=V.useState({message:n.message,event:n.event||"neutral",phase:n.phase||Ie.NEGOTIATION,deltas:n.deltas||{relationship:0,history:0,attitude:0,sensitivity:0,probability:0}}),u=v=>{const{name:E,value:T}=v.target;E==="event"&&T!==s.event&&a&&a(T),l(C=>({...C,[E]:T}))},f=v=>{l(E=>({...E,phase:v}))},p=(v,E)=>{l(T=>({...T,deltas:{...T.deltas,[v]:parseInt(E,10)||0}}))},y=v=>{v.preventDefault(),e(s)};return m.jsxs("form",{onSubmit:y,className:"space-y-3",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Mensaje"}),m.jsx("textarea",{name:"message",rows:"2",className:"w-full text-sm border border-gray-300 rounded px-2 py-1",value:s.message,onChange:u})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Fase"}),m.jsxs("select",{name:"phase",className:"w-full text-sm border border-gray-300 rounded px-2 py-1",value:s.phase,onChange:v=>f(v.target.value),children:[m.jsx("option",{value:Ie.GREETING,children:"Fase 1: Saludo"}),m.jsx("option",{value:Ie.DEBT_NOTIFICATION,children:"Fase 2: Comunicación de deuda"}),m.jsx("option",{value:Ie.NEGOTIATION,children:"Fase 3: Negociación"}),m.jsx("option",{value:Ie.PAYMENT_CONFIRMATION,children:"Fase 4: Concretar pago"}),m.jsx("option",{value:Ie.FAREWELL,children:"Fase 5: Despedida"})]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Evento"}),m.jsxs("select",{name:"event",className:"w-full text-sm border border-gray-300 rounded px-2 py-1",value:s.event,onChange:u,children:[m.jsx("option",{value:"neutral",children:"Neutral"}),m.jsx("option",{value:"accepts_payment",children:"Acepta pagar"}),m.jsx("option",{value:"offers_partial",children:"Pago parcial"}),m.jsx("option",{value:"reschedule",children:"Nueva fecha"}),m.jsx("option",{value:"evades",children:"Evade"}),m.jsx("option",{value:"annoyed",children:"Molesto"}),m.jsx("option",{value:"refuses",children:"Se niega"}),m.jsx("option",{value:"thanks",children:"Agradece"}),m.jsx("option",{value:"no_answer",children:"No contesta"}),m.jsx("option",{value:"confirms_payment",children:"Confirma pago"})]})]}),s.event!=="neutral"&&m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Deltas"}),m.jsxs("div",{className:"grid grid-cols-5 gap-1",children:[m.jsx("input",{type:"number",min:"-100",max:"100",className:"w-full text-xs border border-gray-300 rounded px-1 py-1",value:s.deltas.relationship,onChange:v=>p("relationship",v.target.value),placeholder:"R"}),m.jsx("input",{type:"number",min:"-100",max:"100",className:"w-full text-xs border border-gray-300 rounded px-1 py-1",value:s.deltas.history,onChange:v=>p("history",v.target.value),placeholder:"H"}),m.jsx("input",{type:"number",min:"-100",max:"100",className:"w-full text-xs border border-gray-300 rounded px-1 py-1",value:s.deltas.attitude,onChange:v=>p("attitude",v.target.value),placeholder:"A"}),m.jsx("input",{type:"number",min:"-100",max:"100",className:"w-full text-xs border border-gray-300 rounded px-1 py-1",value:s.deltas.sensitivity,onChange:v=>p("sensitivity",v.target.value),placeholder:"S"}),m.jsx("input",{type:"number",min:"-100",max:"100",className:"w-full text-xs border border-gray-300 rounded px-1 py-1",value:s.deltas.probability,onChange:v=>p("probability",v.target.value),placeholder:"P"})]})]}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx("button",{type:"submit",className:"text-xs bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600",children:"Guardar"}),m.jsx("button",{type:"button",onClick:t,className:"text-xs bg-gray-500 text-white px-2 py-1 rounded hover:bg-gray-600",children:"Cancelar"})]})]})},BM=()=>{const[n,e]=V.useState(""),[t,a]=V.useState(""),[s,l]=V.useState(""),[u,f]=V.useState(!1),[p,y]=V.useState(""),v=Tn();V.useEffect(()=>{e(kM());const A=localStorage.getItem("huggingface_api_key")||"",M=localStorage.getItem("openai_api_key")||"";a(A),l(M)},[]);const E=async()=>{f(!0),y("");try{if(n===yt.ZEPHYR&&!t.trim()){y("Error: Debe proporcionar una API Key válida para Hugging Face.");return}if(n===yt.OPENAI&&!s.trim()){y("Error: Debe proporcionar una API Key válida para OpenAI.");return}MM(n),localStorage.setItem("huggingface_api_key",t),localStorage.setItem("openai_api_key",s),y("Configuración guardada correctamente"),setTimeout(()=>v("/"),1500)}catch(A){console.error("Error al guardar configuración:",A),y("Error al guardar la configuración")}finally{f(!1)}},T=A=>{switch(A){case yt.GEMINI:return"Servicio básico con respuestas predefinidas (no requiere configuración externa)";case yt.ZEPHYR:return"Modelo Zephyr 7B Beta de Hugging Face - Buena calidad, requiere API key gratuita";case yt.OPENAI:return"GPT-3.5 Turbo de OpenAI - Máxima calidad con contexto avanzado, requiere API key de pago";default:return""}},C=A=>!A||A.length<8?A:A.substring(0,4)+"..."+A.substring(A.length-4);return m.jsxs("div",{className:"container mx-auto px-4 py-6",children:[m.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Configuración de IA"}),m.jsxs("div",{className:"bg-blue-50 border border-blue-200 text-blue-800 p-4 rounded mb-6",children:[m.jsx("h3",{className:"font-semibold mb-2",children:"💡 Acerca de los servicios de IA"}),m.jsx("p",{className:"text-sm mb-2",children:"El sistema utiliza diferentes servicios de IA para analizar las conversaciones y generar respuestas inteligentes adaptadas al perfil de cada cliente."}),m.jsxs("p",{className:"text-sm",children:[m.jsx("strong",{children:"Novedad:"})," El servicio OpenAI incluye contexto avanzado que utiliza conversaciones previas con el mismo cliente, o aprende del estilo conversacional de clientes similares si no existe historial previo."]})]}),m.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[m.jsxs("div",{className:"form-group mb-6",children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Servicio de IA"}),m.jsxs("div",{className:"space-y-3",children:[m.jsxs("label",{className:"flex items-start space-x-3 p-3 border rounded-lg cursor-pointer hover:bg-gray-50",children:[m.jsx("input",{type:"radio",name:"aiService",value:yt.GEMINI,checked:n===yt.GEMINI,onChange:A=>e(A.target.value),className:"mt-1"}),m.jsxs("div",{className:"flex-1",children:[m.jsx("div",{className:"font-medium text-gray-900",children:"Gemini (Básico)"}),m.jsx("div",{className:"text-sm text-gray-500",children:T(yt.GEMINI)})]}),m.jsx("span",{className:"px-2 py-1 text-xs bg-green-100 text-green-800 rounded",children:"GRATIS"})]}),m.jsxs("label",{className:"flex items-start space-x-3 p-3 border rounded-lg cursor-pointer hover:bg-gray-50",children:[m.jsx("input",{type:"radio",name:"aiService",value:yt.ZEPHYR,checked:n===yt.ZEPHYR,onChange:A=>e(A.target.value),className:"mt-1"}),m.jsxs("div",{className:"flex-1",children:[m.jsx("div",{className:"font-medium text-gray-900",children:"Zephyr 7B Beta (Hugging Face)"}),m.jsx("div",{className:"text-sm text-gray-500",children:T(yt.ZEPHYR)})]}),m.jsx("span",{className:"px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded",children:"API GRATUITA"})]}),m.jsxs("label",{className:"flex items-start space-x-3 p-3 border rounded-lg cursor-pointer hover:bg-gray-50",children:[m.jsx("input",{type:"radio",name:"aiService",value:yt.OPENAI,checked:n===yt.OPENAI,onChange:A=>e(A.target.value),className:"mt-1"}),m.jsxs("div",{className:"flex-1",children:[m.jsx("div",{className:"font-medium text-gray-900",children:"OpenAI GPT-3.5 Turbo"}),m.jsx("div",{className:"text-sm text-gray-500",children:T(yt.OPENAI)}),m.jsx("div",{className:"text-xs text-green-600 mt-1"})]}),m.jsx("span",{className:"px-2 py-1 text-xs bg-purple-100 text-purple-800 rounded",children:"PREMIUM"})]})]})]}),m.jsxs("div",{className:"space-y-6",children:[n===yt.ZEPHYR&&m.jsxs("div",{className:"form-group border-t pt-6",children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"API Key de Hugging Face"}),m.jsx("input",{type:"password",className:"input w-full mb-2",value:t,onChange:A=>a(A.target.value),placeholder:"Ingresa tu API Key de Hugging Face"}),t&&m.jsxs("p",{className:"text-xs text-gray-500 mb-2",children:["API Key configurada: ",C(t)]}),m.jsxs("p",{className:"text-sm text-gray-500",children:["Obtén una API Key gratuita desde tu cuenta de"," ",m.jsx("a",{href:"https://huggingface.co/settings/tokens",target:"_blank",rel:"noopener noreferrer",className:"text-primary-600 hover:text-primary-800 underline",children:"Hugging Face"}),"."]})]}),n===yt.OPENAI&&m.jsxs("div",{className:"form-group border-t pt-6",children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"API Key de OpenAI"}),m.jsx("input",{type:"password",className:"input w-full mb-2",value:s,onChange:A=>l(A.target.value),placeholder:"Ingresa tu API Key de OpenAI (sk-...)"}),s&&m.jsxs("p",{className:"text-xs text-gray-500 mb-2",children:["API Key configurada: ",C(s)]}),m.jsxs("div",{className:"bg-amber-50 border border-amber-200 p-3 rounded text-sm text-amber-800 mb-2",children:[m.jsx("strong",{children:"💰 Costo estimado:"})," ~$0.002 USD por conversación (muy económico)"]}),m.jsxs("p",{className:"text-sm text-gray-500",children:["Obtén tu API Key desde"," ",m.jsx("a",{href:"https://platform.openai.com/api-keys",target:"_blank",rel:"noopener noreferrer",className:"text-primary-600 hover:text-primary-800 underline",children:"OpenAI Platform"}),". Necesitarás añadir créditos a tu cuenta (mínimo $5 USD)."]})]})]}),p&&m.jsx("div",{className:`p-3 rounded mt-4 ${p.includes("Error")?"bg-red-100 text-red-800":"bg-green-100 text-green-800"}`,children:p}),m.jsxs("div",{className:"flex justify-end gap-2 mt-8",children:[m.jsx("button",{className:"btn-secondary",onClick:()=>v(-1),disabled:u,children:"Cancelar"}),m.jsx("button",{className:"btn-primary",onClick:E,disabled:u,children:u?"Guardando...":"Guardar configuración"})]})]})]})},qM=()=>{const[n,e]=V.useState([]),[t,a]=V.useState([]),[s,l]=V.useState([]),[u,f]=V.useState(!0);V.useEffect(()=>{(async()=>{try{f(!0);const[T,C,A]=await Promise.all([cw(null,100),uw(null,100),iu()]);e(T),a(C),l(A)}catch(T){console.error("Error al cargar datos para reportes:",T)}finally{f(!1)}})()},[]);const p=n.length+t.length,y={active:n.length,closed:t.length,payment:t.filter(E=>{var T;return((T=E.summary)==null?void 0:T.result)==="payment"}).length,partialPayment:t.filter(E=>{var T;return((T=E.summary)==null?void 0:T.result)==="partial_payment"}).length,promise:t.filter(E=>{var T;return((T=E.summary)==null?void 0:T.result)==="promise"}).length,noPayment:t.filter(E=>{var T;return((T=E.summary)==null?void 0:T.result)==="no_payment"}).length},v={total:s.length,withDebt:s.filter(E=>E.debt>0).length,totalDebt:s.reduce((E,T)=>E+(T.debt||0),0),highProbability:s.filter(E=>{var T;return((T=E.soul)==null?void 0:T.probability)>=70}).length,mediumProbability:s.filter(E=>{var T,C;return((T=E.soul)==null?void 0:T.probability)>=40&&((C=E.soul)==null?void 0:C.probability)<70}).length,lowProbability:s.filter(E=>{var T;return((T=E.soul)==null?void 0:T.probability)<40}).length};return u?m.jsxs("div",{className:"container mx-auto px-4 py-6",children:[m.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Reportes"}),m.jsxs("div",{className:"animate-pulse space-y-6",children:[m.jsx("div",{className:"h-40 bg-gray-200 rounded"}),m.jsx("div",{className:"h-40 bg-gray-200 rounded"}),m.jsx("div",{className:"h-60 bg-gray-200 rounded"})]})]}):m.jsxs("div",{className:"container mx-auto px-4 py-6",children:[m.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Reportes"}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[m.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[m.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Estadísticas de Conversaciones"}),m.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[m.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[m.jsx("h3",{className:"text-sm font-medium text-blue-800 mb-1",children:"Activas"}),m.jsx("p",{className:"text-2xl font-bold text-blue-600",children:y.active})]}),m.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[m.jsx("h3",{className:"text-sm font-medium text-green-800 mb-1",children:"Cerradas"}),m.jsx("p",{className:"text-2xl font-bold text-green-600",children:y.closed})]}),m.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[m.jsx("h3",{className:"text-sm font-medium text-green-800 mb-1",children:"Pagos completos"}),m.jsx("p",{className:"text-2xl font-bold text-green-600",children:y.payment}),m.jsxs("p",{className:"text-xs text-green-600",children:[p>0?Math.round(y.payment/p*100):0,"% del total"]})]}),m.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[m.jsx("h3",{className:"text-sm font-medium text-yellow-800 mb-1",children:"Pagos parciales"}),m.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:y.partialPayment}),m.jsxs("p",{className:"text-xs text-yellow-600",children:[p>0?Math.round(y.partialPayment/p*100):0,"% del total"]})]}),m.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[m.jsx("h3",{className:"text-sm font-medium text-yellow-800 mb-1",children:"Promesas de pago"}),m.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:y.promise}),m.jsxs("p",{className:"text-xs text-yellow-600",children:[p>0?Math.round(y.promise/p*100):0,"% del total"]})]}),m.jsxs("div",{className:"bg-red-50 p-4 rounded-lg",children:[m.jsx("h3",{className:"text-sm font-medium text-red-800 mb-1",children:"Sin pago"}),m.jsx("p",{className:"text-2xl font-bold text-red-600",children:y.noPayment}),m.jsxs("p",{className:"text-xs text-red-600",children:[p>0?Math.round(y.noPayment/p*100):0,"% del total"]})]})]})]}),m.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[m.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Estadísticas de Clientes"}),m.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[m.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[m.jsx("h3",{className:"text-sm font-medium text-blue-800 mb-1",children:"Total de clientes"}),m.jsx("p",{className:"text-2xl font-bold text-blue-600",children:v.total})]}),m.jsxs("div",{className:"bg-red-50 p-4 rounded-lg",children:[m.jsx("h3",{className:"text-sm font-medium text-red-800 mb-1",children:"Con deuda"}),m.jsx("p",{className:"text-2xl font-bold text-red-600",children:v.withDebt}),m.jsxs("p",{className:"text-xs text-red-600",children:[v.total>0?Math.round(v.withDebt/v.total*100):0,"% del total"]})]}),m.jsxs("div",{className:"bg-red-50 p-4 rounded-lg col-span-2",children:[m.jsx("h3",{className:"text-sm font-medium text-red-800 mb-1",children:"Deuda total"}),m.jsxs("p",{className:"text-2xl font-bold text-red-600",children:["$",v.totalDebt.toLocaleString("es-CO")]})]}),m.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[m.jsx("h3",{className:"text-sm font-medium text-green-800 mb-1",children:"Alta probabilidad de pago"}),m.jsx("p",{className:"text-2xl font-bold text-green-600",children:v.highProbability}),m.jsxs("p",{className:"text-xs text-green-600",children:[v.total>0?Math.round(v.highProbability/v.total*100):0,"% del total"]})]}),m.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[m.jsx("h3",{className:"text-sm font-medium text-yellow-800 mb-1",children:"Media probabilidad"}),m.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:v.mediumProbability}),m.jsxs("p",{className:"text-xs text-yellow-600",children:[v.total>0?Math.round(v.mediumProbability/v.total*100):0,"% del total"]})]})]})]})]}),m.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-8",children:[m.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Top 10 Clientes con Mayor Deuda"}),m.jsx("div",{className:"overflow-x-auto",children:m.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[m.jsx("thead",{className:"bg-gray-50",children:m.jsxs("tr",{children:[m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nombre"}),m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Deuda"}),m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Probabilidad de Pago"}),m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Última Conversación"})]})}),m.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.sort((E,T)=>T.debt-E.debt).slice(0,10).map(E=>{var T,C,A;return m.jsxs("tr",{children:[m.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:m.jsx("div",{className:"font-medium text-gray-900",children:E.name})}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:m.jsxs("div",{className:"text-sm font-medium text-red-600",children:["$",E.debt.toLocaleString("es-CO")]})}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:m.jsxs("div",{className:`text-sm font-medium ${((T=E.soul)==null?void 0:T.probability)>=70?"text-green-600":((C=E.soul)==null?void 0:C.probability)>=40?"text-yellow-600":"text-red-600"}`,children:[((A=E.soul)==null?void 0:A.probability)||0,"%"]})}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:m.jsx("div",{className:"text-sm text-gray-500",children:E.lastContact?new Date(E.lastContact.seconds*1e3).toLocaleDateString():"Sin contacto"})})]},E.id)})})]})})]})]})},FM=()=>{const{currentUser:n,userDetails:e}=ru(),t=Tn(),a=async()=>{try{await mj(),t("/login")}catch(s){console.error("Error al cerrar sesión:",s)}};return m.jsx("nav",{className:"bg-white p-4 shadow",children:m.jsxs("div",{className:"container mx-auto flex justify-between items-center",children:[m.jsx("div",{className:"flex items-center",children:m.jsx("span",{className:"text-lg font-semibold text-gray-700",children:"Sistema de Cobranza Adaptativa"})}),m.jsx("div",{className:"flex items-center space-x-4",children:n&&m.jsxs(m.Fragment,{children:[m.jsx("span",{className:"text-sm text-gray-600",children:(e==null?void 0:e.displayName)||n.email}),m.jsx("button",{className:"text-sm text-gray-600 hover:text-gray-900",onClick:a,children:"Cerrar sesión"})]})})]})})},HM=()=>{const{isAdmin:n}=ru();return m.jsxs("div",{className:"bg-gray-800 text-white w-64 flex-shrink-0 hidden md:block",children:[m.jsx("div",{className:"p-4",children:m.jsx("h2",{className:"text-xl font-bold",children:"Acriventas"})}),m.jsxs("nav",{className:"mt-8",children:[m.jsxs(fs,{to:"/",className:({isActive:e})=>`flex items-center py-2 px-4 ${e?"bg-gray-700":"hover:bg-gray-700"}`,end:!0,children:[m.jsx(Rj,{className:"mr-3"}),"Dashboard"]}),m.jsxs(fs,{to:"/clients",className:({isActive:e})=>`flex items-center py-2 px-4 ${e?"bg-gray-700":"hover:bg-gray-700"}`,children:[m.jsx(Dj,{className:"mr-3"}),"Clientes"]}),m.jsxs(fs,{to:"/conversations",className:({isActive:e})=>`flex items-center py-2 px-4 ${e?"bg-gray-700":"hover:bg-gray-700"}`,children:[m.jsx(Cj,{className:"mr-3"}),"Conversaciones"]}),m.jsxs(fs,{to:"/reports",className:({isActive:e})=>`flex items-center py-2 px-4 ${e?"bg-gray-700":"hover:bg-gray-700"}`,children:[m.jsx(Sj,{className:"mr-3"}),"Reportes"]}),m.jsxs(fs,{to:"/settings/ai",className:({isActive:e})=>`flex items-center py-2 px-4 ${e?"bg-gray-700":"hover:bg-gray-700"}`,children:[m.jsx(Ij,{className:"mr-3"}),"Configuración IA"]}),n&&m.jsxs(fs,{to:"/settings",className:({isActive:e})=>`flex items-center py-2 px-4 ${e?"bg-gray-700":"hover:bg-gray-700"}`,children:[m.jsx(Nj,{className:"mr-3"}),"Configuración"]})]})]})},GM=()=>m.jsxs("div",{className:"flex h-screen bg-gray-100",children:[m.jsx(HM,{}),m.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[m.jsx(FM,{}),m.jsx("main",{className:"flex-1 overflow-y-auto p-4",children:m.jsx(pN,{})})]})]}),$M=({children:n})=>{const{currentUser:e,loading:t}=ru();return t?m.jsx("div",{className:"flex h-screen items-center justify-center",children:"Cargando..."}):e?n:m.jsx(g1,{to:"/login"})};function YM(){return m.jsx(BN,{children:m.jsx(gj,{children:m.jsxs(yN,{children:[m.jsx(En,{path:"/login",element:m.jsx(yj,{})}),m.jsx(En,{path:"/register",element:m.jsx(vj,{})}),m.jsxs(En,{path:"/",element:m.jsx($M,{children:m.jsx(GM,{})}),children:[m.jsx(En,{index:!0,element:m.jsx(F6,{})}),m.jsx(En,{path:"clients",element:m.jsx(Q6,{})}),m.jsx(En,{path:"clients/:clientId",element:m.jsx(G6,{})}),m.jsx(En,{path:"clients/search",element:m.jsx($6,{})}),m.jsx(En,{path:"clients/new",element:m.jsx(Y6,{})}),m.jsx(En,{path:"conversation/new",element:m.jsx(K6,{})}),m.jsx(En,{path:"conversation/new/:clientId",element:m.jsx(LM,{})}),m.jsx(En,{path:"conversation/:conversationId",element:m.jsx(UM,{})}),m.jsx(En,{path:"reports",element:m.jsx(qM,{})}),m.jsx(En,{path:"settings/ai",element:m.jsx(BM,{})})]}),m.jsx(En,{path:"*",element:m.jsx(g1,{to:"/",replace:!0})})]})})})}TS.createRoot(document.getElementById("root")).render(m.jsx(V.StrictMode,{children:m.jsx(YM,{})}));
