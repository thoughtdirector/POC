(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();function uS(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var fp={exports:{}},fc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var V_;function dS(){if(V_)return fc;V_=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,a,l){var u=null;if(l!==void 0&&(u=""+l),a.key!==void 0&&(u=""+a.key),"key"in a){l={};for(var f in a)f!=="key"&&(l[f]=a[f])}else l=a;return a=l.ref,{$$typeof:n,type:i,key:u,ref:a!==void 0?a:null,props:l}}return fc.Fragment=e,fc.jsx=t,fc.jsxs=t,fc}var L_;function hS(){return L_||(L_=1,fp.exports=dS()),fp.exports}var p=hS(),mp={exports:{}},Oe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var U_;function fS(){if(U_)return Oe;U_=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),E=Symbol.iterator;function x(M){return M===null||typeof M!="object"?null:(M=E&&M[E]||M["@@iterator"],typeof M=="function"?M:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,k={};function O(M,oe,fe){this.props=M,this.context=oe,this.refs=k,this.updater=fe||C}O.prototype.isReactComponent={},O.prototype.setState=function(M,oe){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,oe,"setState")},O.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function $(){}$.prototype=O.prototype;function K(M,oe,fe){this.props=M,this.context=oe,this.refs=k,this.updater=fe||C}var z=K.prototype=new $;z.constructor=K,A(z,O.prototype),z.isPureReactComponent=!0;var ce=Array.isArray,le={H:null,A:null,T:null,S:null,V:null},ye=Object.prototype.hasOwnProperty;function j(M,oe,fe,ue,ee,ne){return fe=ne.ref,{$$typeof:n,type:M,key:oe,ref:fe!==void 0?fe:null,props:ne}}function N(M,oe){return j(M.type,oe,void 0,void 0,void 0,M.props)}function R(M){return typeof M=="object"&&M!==null&&M.$$typeof===n}function P(M){var oe={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(fe){return oe[fe]})}var U=/\/+/g;function B(M,oe){return typeof M=="object"&&M!==null&&M.key!=null?P(""+M.key):oe.toString(36)}function D(){}function bt(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(D,D):(M.status="pending",M.then(function(oe){M.status==="pending"&&(M.status="fulfilled",M.value=oe)},function(oe){M.status==="pending"&&(M.status="rejected",M.reason=oe)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function st(M,oe,fe,ue,ee){var ne=typeof M;(ne==="undefined"||ne==="boolean")&&(M=null);var W=!1;if(M===null)W=!0;else switch(ne){case"bigint":case"string":case"number":W=!0;break;case"object":switch(M.$$typeof){case n:case e:W=!0;break;case v:return W=M._init,st(W(M._payload),oe,fe,ue,ee)}}if(W)return ee=ee(M),W=ue===""?"."+B(M,0):ue,ce(ee)?(fe="",W!=null&&(fe=W.replace(U,"$&/")+"/"),st(ee,oe,fe,"",function(mr){return mr})):ee!=null&&(R(ee)&&(ee=N(ee,fe+(ee.key==null||M&&M.key===ee.key?"":(""+ee.key).replace(U,"$&/")+"/")+W)),oe.push(ee)),1;W=0;var _e=ue===""?".":ue+":";if(ce(M))for(var Ge=0;Ge<M.length;Ge++)ue=M[Ge],ne=_e+B(ue,Ge),W+=st(ue,oe,fe,ne,ee);else if(Ge=x(M),typeof Ge=="function")for(M=Ge.call(M),Ge=0;!(ue=M.next()).done;)ue=ue.value,ne=_e+B(ue,Ge++),W+=st(ue,oe,fe,ne,ee);else if(ne==="object"){if(typeof M.then=="function")return st(bt(M),oe,fe,ue,ee);throw oe=String(M),Error("Objects are not valid as a React child (found: "+(oe==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":oe)+"). If you meant to render a collection of children, use an array instead.")}return W}function J(M,oe,fe){if(M==null)return M;var ue=[],ee=0;return st(M,ue,"","",function(ne){return oe.call(fe,ne,ee++)}),ue}function he(M){if(M._status===-1){var oe=M._result;oe=oe(),oe.then(function(fe){(M._status===0||M._status===-1)&&(M._status=1,M._result=fe)},function(fe){(M._status===0||M._status===-1)&&(M._status=2,M._result=fe)}),M._status===-1&&(M._status=0,M._result=oe)}if(M._status===1)return M._result.default;throw M._result}var ve=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var oe=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(oe))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)};function Me(){}return Oe.Children={map:J,forEach:function(M,oe,fe){J(M,function(){oe.apply(this,arguments)},fe)},count:function(M){var oe=0;return J(M,function(){oe++}),oe},toArray:function(M){return J(M,function(oe){return oe})||[]},only:function(M){if(!R(M))throw Error("React.Children.only expected to receive a single React element child.");return M}},Oe.Component=O,Oe.Fragment=t,Oe.Profiler=a,Oe.PureComponent=K,Oe.StrictMode=i,Oe.Suspense=m,Oe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=le,Oe.__COMPILER_RUNTIME={__proto__:null,c:function(M){return le.H.useMemoCache(M)}},Oe.cache=function(M){return function(){return M.apply(null,arguments)}},Oe.cloneElement=function(M,oe,fe){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var ue=A({},M.props),ee=M.key,ne=void 0;if(oe!=null)for(W in oe.ref!==void 0&&(ne=void 0),oe.key!==void 0&&(ee=""+oe.key),oe)!ye.call(oe,W)||W==="key"||W==="__self"||W==="__source"||W==="ref"&&oe.ref===void 0||(ue[W]=oe[W]);var W=arguments.length-2;if(W===1)ue.children=fe;else if(1<W){for(var _e=Array(W),Ge=0;Ge<W;Ge++)_e[Ge]=arguments[Ge+2];ue.children=_e}return j(M.type,ee,void 0,void 0,ne,ue)},Oe.createContext=function(M){return M={$$typeof:u,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:l,_context:M},M},Oe.createElement=function(M,oe,fe){var ue,ee={},ne=null;if(oe!=null)for(ue in oe.key!==void 0&&(ne=""+oe.key),oe)ye.call(oe,ue)&&ue!=="key"&&ue!=="__self"&&ue!=="__source"&&(ee[ue]=oe[ue]);var W=arguments.length-2;if(W===1)ee.children=fe;else if(1<W){for(var _e=Array(W),Ge=0;Ge<W;Ge++)_e[Ge]=arguments[Ge+2];ee.children=_e}if(M&&M.defaultProps)for(ue in W=M.defaultProps,W)ee[ue]===void 0&&(ee[ue]=W[ue]);return j(M,ne,void 0,void 0,null,ee)},Oe.createRef=function(){return{current:null}},Oe.forwardRef=function(M){return{$$typeof:f,render:M}},Oe.isValidElement=R,Oe.lazy=function(M){return{$$typeof:v,_payload:{_status:-1,_result:M},_init:he}},Oe.memo=function(M,oe){return{$$typeof:y,type:M,compare:oe===void 0?null:oe}},Oe.startTransition=function(M){var oe=le.T,fe={};le.T=fe;try{var ue=M(),ee=le.S;ee!==null&&ee(fe,ue),typeof ue=="object"&&ue!==null&&typeof ue.then=="function"&&ue.then(Me,ve)}catch(ne){ve(ne)}finally{le.T=oe}},Oe.unstable_useCacheRefresh=function(){return le.H.useCacheRefresh()},Oe.use=function(M){return le.H.use(M)},Oe.useActionState=function(M,oe,fe){return le.H.useActionState(M,oe,fe)},Oe.useCallback=function(M,oe){return le.H.useCallback(M,oe)},Oe.useContext=function(M){return le.H.useContext(M)},Oe.useDebugValue=function(){},Oe.useDeferredValue=function(M,oe){return le.H.useDeferredValue(M,oe)},Oe.useEffect=function(M,oe,fe){var ue=le.H;if(typeof fe=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ue.useEffect(M,oe)},Oe.useId=function(){return le.H.useId()},Oe.useImperativeHandle=function(M,oe,fe){return le.H.useImperativeHandle(M,oe,fe)},Oe.useInsertionEffect=function(M,oe){return le.H.useInsertionEffect(M,oe)},Oe.useLayoutEffect=function(M,oe){return le.H.useLayoutEffect(M,oe)},Oe.useMemo=function(M,oe){return le.H.useMemo(M,oe)},Oe.useOptimistic=function(M,oe){return le.H.useOptimistic(M,oe)},Oe.useReducer=function(M,oe,fe){return le.H.useReducer(M,oe,fe)},Oe.useRef=function(M){return le.H.useRef(M)},Oe.useState=function(M){return le.H.useState(M)},Oe.useSyncExternalStore=function(M,oe,fe){return le.H.useSyncExternalStore(M,oe,fe)},Oe.useTransition=function(){return le.H.useTransition()},Oe.version="19.1.0",Oe}var z_;function yg(){return z_||(z_=1,mp.exports=fS()),mp.exports}var V=yg();const ya=uS(V);var pp={exports:{}},mc={},gp={exports:{}},yp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var B_;function mS(){return B_||(B_=1,function(n){function e(J,he){var ve=J.length;J.push(he);e:for(;0<ve;){var Me=ve-1>>>1,M=J[Me];if(0<a(M,he))J[Me]=he,J[ve]=M,ve=Me;else break e}}function t(J){return J.length===0?null:J[0]}function i(J){if(J.length===0)return null;var he=J[0],ve=J.pop();if(ve!==he){J[0]=ve;e:for(var Me=0,M=J.length,oe=M>>>1;Me<oe;){var fe=2*(Me+1)-1,ue=J[fe],ee=fe+1,ne=J[ee];if(0>a(ue,ve))ee<M&&0>a(ne,ue)?(J[Me]=ne,J[ee]=ve,Me=ee):(J[Me]=ue,J[fe]=ve,Me=fe);else if(ee<M&&0>a(ne,ve))J[Me]=ne,J[ee]=ve,Me=ee;else break e}}return he}function a(J,he){var ve=J.sortIndex-he.sortIndex;return ve!==0?ve:J.id-he.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var u=Date,f=u.now();n.unstable_now=function(){return u.now()-f}}var m=[],y=[],v=1,E=null,x=3,C=!1,A=!1,k=!1,O=!1,$=typeof setTimeout=="function"?setTimeout:null,K=typeof clearTimeout=="function"?clearTimeout:null,z=typeof setImmediate<"u"?setImmediate:null;function ce(J){for(var he=t(y);he!==null;){if(he.callback===null)i(y);else if(he.startTime<=J)i(y),he.sortIndex=he.expirationTime,e(m,he);else break;he=t(y)}}function le(J){if(k=!1,ce(J),!A)if(t(m)!==null)A=!0,ye||(ye=!0,B());else{var he=t(y);he!==null&&st(le,he.startTime-J)}}var ye=!1,j=-1,N=5,R=-1;function P(){return O?!0:!(n.unstable_now()-R<N)}function U(){if(O=!1,ye){var J=n.unstable_now();R=J;var he=!0;try{e:{A=!1,k&&(k=!1,K(j),j=-1),C=!0;var ve=x;try{t:{for(ce(J),E=t(m);E!==null&&!(E.expirationTime>J&&P());){var Me=E.callback;if(typeof Me=="function"){E.callback=null,x=E.priorityLevel;var M=Me(E.expirationTime<=J);if(J=n.unstable_now(),typeof M=="function"){E.callback=M,ce(J),he=!0;break t}E===t(m)&&i(m),ce(J)}else i(m);E=t(m)}if(E!==null)he=!0;else{var oe=t(y);oe!==null&&st(le,oe.startTime-J),he=!1}}break e}finally{E=null,x=ve,C=!1}he=void 0}}finally{he?B():ye=!1}}}var B;if(typeof z=="function")B=function(){z(U)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,bt=D.port2;D.port1.onmessage=U,B=function(){bt.postMessage(null)}}else B=function(){$(U,0)};function st(J,he){j=$(function(){J(n.unstable_now())},he)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(J){J.callback=null},n.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<J?Math.floor(1e3/J):5},n.unstable_getCurrentPriorityLevel=function(){return x},n.unstable_next=function(J){switch(x){case 1:case 2:case 3:var he=3;break;default:he=x}var ve=x;x=he;try{return J()}finally{x=ve}},n.unstable_requestPaint=function(){O=!0},n.unstable_runWithPriority=function(J,he){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var ve=x;x=J;try{return he()}finally{x=ve}},n.unstable_scheduleCallback=function(J,he,ve){var Me=n.unstable_now();switch(typeof ve=="object"&&ve!==null?(ve=ve.delay,ve=typeof ve=="number"&&0<ve?Me+ve:Me):ve=Me,J){case 1:var M=-1;break;case 2:M=250;break;case 5:M=1073741823;break;case 4:M=1e4;break;default:M=5e3}return M=ve+M,J={id:v++,callback:he,priorityLevel:J,startTime:ve,expirationTime:M,sortIndex:-1},ve>Me?(J.sortIndex=ve,e(y,J),t(m)===null&&J===t(y)&&(k?(K(j),j=-1):k=!0,st(le,ve-Me))):(J.sortIndex=M,e(m,J),A||C||(A=!0,ye||(ye=!0,B()))),J},n.unstable_shouldYield=P,n.unstable_wrapCallback=function(J){var he=x;return function(){var ve=x;x=he;try{return J.apply(this,arguments)}finally{x=ve}}}}(yp)),yp}var q_;function pS(){return q_||(q_=1,gp.exports=mS()),gp.exports}var vp={exports:{}},an={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F_;function gS(){if(F_)return an;F_=1;var n=yg();function e(m){var y="https://react.dev/errors/"+m;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)y+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+m+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(m,y,v){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:E==null?null:""+E,children:m,containerInfo:y,implementation:v}}var u=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(m,y){if(m==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return an.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,an.createPortal=function(m,y){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return l(m,y,null,v)},an.flushSync=function(m){var y=u.T,v=i.p;try{if(u.T=null,i.p=2,m)return m()}finally{u.T=y,i.p=v,i.d.f()}},an.preconnect=function(m,y){typeof m=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,i.d.C(m,y))},an.prefetchDNS=function(m){typeof m=="string"&&i.d.D(m)},an.preinit=function(m,y){if(typeof m=="string"&&y&&typeof y.as=="string"){var v=y.as,E=f(v,y.crossOrigin),x=typeof y.integrity=="string"?y.integrity:void 0,C=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;v==="style"?i.d.S(m,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:E,integrity:x,fetchPriority:C}):v==="script"&&i.d.X(m,{crossOrigin:E,integrity:x,fetchPriority:C,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},an.preinitModule=function(m,y){if(typeof m=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var v=f(y.as,y.crossOrigin);i.d.M(m,{crossOrigin:v,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&i.d.M(m)},an.preload=function(m,y){if(typeof m=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var v=y.as,E=f(v,y.crossOrigin);i.d.L(m,v,{crossOrigin:E,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},an.preloadModule=function(m,y){if(typeof m=="string")if(y){var v=f(y.as,y.crossOrigin);i.d.m(m,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:v,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else i.d.m(m)},an.requestFormReset=function(m){i.d.r(m)},an.unstable_batchedUpdates=function(m,y){return m(y)},an.useFormState=function(m,y,v){return u.H.useFormState(m,y,v)},an.useFormStatus=function(){return u.H.useHostTransitionStatus()},an.version="19.1.0",an}var H_;function yS(){if(H_)return vp.exports;H_=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),vp.exports=gS(),vp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var G_;function vS(){if(G_)return mc;G_=1;var n=pS(),e=yg(),t=yS();function i(r){var s="https://react.dev/errors/"+r;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function l(r){var s=r,o=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,(s.flags&4098)!==0&&(o=s.return),r=s.return;while(r)}return s.tag===3?o:null}function u(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function f(r){if(l(r)!==r)throw Error(i(188))}function m(r){var s=r.alternate;if(!s){if(s=l(r),s===null)throw Error(i(188));return s!==r?null:r}for(var o=r,c=s;;){var h=o.return;if(h===null)break;var g=h.alternate;if(g===null){if(c=h.return,c!==null){o=c;continue}break}if(h.child===g.child){for(g=h.child;g;){if(g===o)return f(h),r;if(g===c)return f(h),s;g=g.sibling}throw Error(i(188))}if(o.return!==c.return)o=h,c=g;else{for(var T=!1,w=h.child;w;){if(w===o){T=!0,o=h,c=g;break}if(w===c){T=!0,c=h,o=g;break}w=w.sibling}if(!T){for(w=g.child;w;){if(w===o){T=!0,o=g,c=h;break}if(w===c){T=!0,c=g,o=h;break}w=w.sibling}if(!T)throw Error(i(189))}}if(o.alternate!==c)throw Error(i(190))}if(o.tag!==3)throw Error(i(188));return o.stateNode.current===o?r:s}function y(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r;for(r=r.child;r!==null;){if(s=y(r),s!==null)return s;r=r.sibling}return null}var v=Object.assign,E=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),C=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),$=Symbol.for("react.provider"),K=Symbol.for("react.consumer"),z=Symbol.for("react.context"),ce=Symbol.for("react.forward_ref"),le=Symbol.for("react.suspense"),ye=Symbol.for("react.suspense_list"),j=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),U=Symbol.iterator;function B(r){return r===null||typeof r!="object"?null:(r=U&&r[U]||r["@@iterator"],typeof r=="function"?r:null)}var D=Symbol.for("react.client.reference");function bt(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===D?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case A:return"Fragment";case O:return"Profiler";case k:return"StrictMode";case le:return"Suspense";case ye:return"SuspenseList";case R:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case C:return"Portal";case z:return(r.displayName||"Context")+".Provider";case K:return(r._context.displayName||"Context")+".Consumer";case ce:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case j:return s=r.displayName||null,s!==null?s:bt(r.type)||"Memo";case N:s=r._payload,r=r._init;try{return bt(r(s))}catch{}}return null}var st=Array.isArray,J=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,he=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ve={pending:!1,data:null,method:null,action:null},Me=[],M=-1;function oe(r){return{current:r}}function fe(r){0>M||(r.current=Me[M],Me[M]=null,M--)}function ue(r,s){M++,Me[M]=r.current,r.current=s}var ee=oe(null),ne=oe(null),W=oe(null),_e=oe(null);function Ge(r,s){switch(ue(W,s),ue(ne,r),ue(ee,null),s.nodeType){case 9:case 11:r=(r=s.documentElement)&&(r=r.namespaceURI)?d_(r):0;break;default:if(r=s.tagName,s=s.namespaceURI)s=d_(s),r=h_(s,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}fe(ee),ue(ee,r)}function mr(){fe(ee),fe(ne),fe(W)}function Ni(r){r.memoizedState!==null&&ue(_e,r);var s=ee.current,o=h_(s,r.type);s!==o&&(ue(ne,r),ue(ee,o))}function qr(r){ne.current===r&&(fe(ee),fe(ne)),_e.current===r&&(fe(_e),lc._currentValue=ve)}var Rs=Object.prototype.hasOwnProperty,Is=n.unstable_scheduleCallback,Os=n.unstable_cancelCallback,sl=n.unstable_shouldYield,lu=n.unstable_requestPaint,Ln=n.unstable_now,ff=n.unstable_getCurrentPriorityLevel,al=n.unstable_ImmediatePriority,Oa=n.unstable_UserBlockingPriority,Ds=n.unstable_NormalPriority,mf=n.unstable_LowPriority,Da=n.unstable_IdlePriority,ol=n.log,cu=n.unstable_setDisableYieldValue,yt=null,We=null;function Nn(r){if(typeof ol=="function"&&cu(r),We&&typeof We.setStrictMode=="function")try{We.setStrictMode(yt,r)}catch{}}var rn=Math.clz32?Math.clz32:Ps,uu=Math.log,pf=Math.LN2;function Ps(r){return r>>>=0,r===0?32:31-(uu(r)/pf|0)|0}var js=256,Ms=4194304;function tr(r){var s=r&42;if(s!==0)return s;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function Pa(r,s,o){var c=r.pendingLanes;if(c===0)return 0;var h=0,g=r.suspendedLanes,T=r.pingedLanes;r=r.warmLanes;var w=c&134217727;return w!==0?(c=w&~g,c!==0?h=tr(c):(T&=w,T!==0?h=tr(T):o||(o=w&~r,o!==0&&(h=tr(o))))):(w=c&~g,w!==0?h=tr(w):T!==0?h=tr(T):o||(o=c&~r,o!==0&&(h=tr(o)))),h===0?0:s!==0&&s!==h&&(s&g)===0&&(g=h&-h,o=s&-s,g>=o||g===32&&(o&4194048)!==0)?s:h}function ks(r,s){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&s)===0}function ll(r,s){switch(r){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function cl(){var r=js;return js<<=1,(js&4194048)===0&&(js=256),r}function ul(){var r=Ms;return Ms<<=1,(Ms&62914560)===0&&(Ms=4194304),r}function Fr(r){for(var s=[],o=0;31>o;o++)s.push(r);return s}function Hr(r,s){r.pendingLanes|=s,s!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function dl(r,s,o,c,h,g){var T=r.pendingLanes;r.pendingLanes=o,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=o,r.entangledLanes&=o,r.errorRecoveryDisabledLanes&=o,r.shellSuspendCounter=0;var w=r.entanglements,I=r.expirationTimes,G=r.hiddenUpdates;for(o=T&~o;0<o;){var te=31-rn(o),se=1<<te;w[te]=0,I[te]=-1;var Y=G[te];if(Y!==null)for(G[te]=null,te=0;te<Y.length;te++){var Q=Y[te];Q!==null&&(Q.lane&=-536870913)}o&=~se}c!==0&&pr(r,c,0),g!==0&&h===0&&r.tag!==0&&(r.suspendedLanes|=g&~(T&~s))}function pr(r,s,o){r.pendingLanes|=s,r.suspendedLanes&=~s;var c=31-rn(s);r.entangledLanes|=s,r.entanglements[c]=r.entanglements[c]|1073741824|o&4194090}function hl(r,s){var o=r.entangledLanes|=s;for(r=r.entanglements;o;){var c=31-rn(o),h=1<<c;h&s|r[c]&s&&(r[c]|=s),o&=~h}}function Ri(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function ja(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function Ii(){var r=he.p;return r!==0?r:(r=window.event,r===void 0?32:O_(r.type))}function du(r,s){var o=he.p;try{return he.p=r,s()}finally{he.p=o}}var ut=Math.random().toString(36).slice(2),Ot="__reactFiber$"+ut,At="__reactProps$"+ut,Un="__reactContainer$"+ut,fl="__reactEvents$"+ut,gf="__reactListeners$"+ut,Oi="__reactHandles$"+ut,hu="__reactResources$"+ut,Vs="__reactMarker$"+ut;function Di(r){delete r[Ot],delete r[At],delete r[fl],delete r[gf],delete r[Oi]}function Gr(r){var s=r[Ot];if(s)return s;for(var o=r.parentNode;o;){if(s=o[Un]||o[Ot]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(r=g_(r);r!==null;){if(o=r[Ot])return o;r=g_(r)}return s}r=o,o=r.parentNode}return null}function gr(r){if(r=r[Ot]||r[Un]){var s=r.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return r}return null}function yr(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r.stateNode;throw Error(i(33))}function hn(r){var s=r[hu];return s||(s=r[hu]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Et(r){r[Vs]=!0}var ml=new Set,Ma={};function nr(r,s){$r(r,s),$r(r+"Capture",s)}function $r(r,s){for(Ma[r]=s,r=0;r<s.length;r++)ml.add(s[r])}var fu=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),mu={},Ls={};function pu(r){return Rs.call(Ls,r)?!0:Rs.call(mu,r)?!1:fu.test(r)?Ls[r]=!0:(mu[r]=!0,!1)}function Pi(r,s,o){if(pu(s))if(o===null)r.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":r.removeAttribute(s);return;case"boolean":var c=s.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){r.removeAttribute(s);return}}r.setAttribute(s,""+o)}}function vr(r,s,o){if(o===null)r.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(s);return}r.setAttribute(s,""+o)}}function Kt(r,s,o,c){if(c===null)r.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(o);return}r.setAttributeNS(s,o,""+c)}}var Us,gu;function Yr(r){if(Us===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);Us=s&&s[1]||"",gu=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Us+r+gu}var ka=!1;function Va(r,s){if(!r||ka)return"";ka=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(s){var se=function(){throw Error()};if(Object.defineProperty(se.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(se,[])}catch(Q){var Y=Q}Reflect.construct(r,[],se)}else{try{se.call()}catch(Q){Y=Q}r.call(se.prototype)}}else{try{throw Error()}catch(Q){Y=Q}(se=r())&&typeof se.catch=="function"&&se.catch(function(){})}}catch(Q){if(Q&&Y&&typeof Q.stack=="string")return[Q.stack,Y.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=c.DetermineComponentFrameRoot(),T=g[0],w=g[1];if(T&&w){var I=T.split(`
`),G=w.split(`
`);for(h=c=0;c<I.length&&!I[c].includes("DetermineComponentFrameRoot");)c++;for(;h<G.length&&!G[h].includes("DetermineComponentFrameRoot");)h++;if(c===I.length||h===G.length)for(c=I.length-1,h=G.length-1;1<=c&&0<=h&&I[c]!==G[h];)h--;for(;1<=c&&0<=h;c--,h--)if(I[c]!==G[h]){if(c!==1||h!==1)do if(c--,h--,0>h||I[c]!==G[h]){var te=`
`+I[c].replace(" at new "," at ");return r.displayName&&te.includes("<anonymous>")&&(te=te.replace("<anonymous>",r.displayName)),te}while(1<=c&&0<=h);break}}}finally{ka=!1,Error.prepareStackTrace=o}return(o=r?r.displayName||r.name:"")?Yr(o):""}function pl(r){switch(r.tag){case 26:case 27:case 5:return Yr(r.type);case 16:return Yr("Lazy");case 13:return Yr("Suspense");case 19:return Yr("SuspenseList");case 0:case 15:return Va(r.type,!1);case 11:return Va(r.type.render,!1);case 1:return Va(r.type,!0);case 31:return Yr("Activity");default:return""}}function La(r){try{var s="";do s+=pl(r),r=r.return;while(r);return s}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function fn(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function gl(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function yf(r){var s=gl(r)?"checked":"value",o=Object.getOwnPropertyDescriptor(r.constructor.prototype,s),c=""+r[s];if(!r.hasOwnProperty(s)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var h=o.get,g=o.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return h.call(this)},set:function(T){c=""+T,g.call(this,T)}}),Object.defineProperty(r,s,{enumerable:o.enumerable}),{getValue:function(){return c},setValue:function(T){c=""+T},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function Ua(r){r._valueTracker||(r._valueTracker=yf(r))}function yl(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var o=s.getValue(),c="";return r&&(c=gl(r)?r.checked?"true":"false":r.value),r=c,r!==o?(s.setValue(r),!0):!1}function zs(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var vf=/[\n"\\]/g;function St(r){return r.replace(vf,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Rn(r,s,o,c,h,g,T,w){r.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?r.type=T:r.removeAttribute("type"),s!=null?T==="number"?(s===0&&r.value===""||r.value!=s)&&(r.value=""+fn(s)):r.value!==""+fn(s)&&(r.value=""+fn(s)):T!=="submit"&&T!=="reset"||r.removeAttribute("value"),s!=null?ji(r,T,fn(s)):o!=null?ji(r,T,fn(o)):c!=null&&r.removeAttribute("value"),h==null&&g!=null&&(r.defaultChecked=!!g),h!=null&&(r.checked=h&&typeof h!="function"&&typeof h!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?r.name=""+fn(w):r.removeAttribute("name")}function Bs(r,s,o,c,h,g,T,w){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(r.type=g),s!=null||o!=null){if(!(g!=="submit"&&g!=="reset"||s!=null))return;o=o!=null?""+fn(o):"",s=s!=null?""+fn(s):o,w||s===r.value||(r.value=s),r.defaultValue=s}c=c??h,c=typeof c!="function"&&typeof c!="symbol"&&!!c,r.checked=w?r.checked:!!c,r.defaultChecked=!!c,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(r.name=T)}function ji(r,s,o){s==="number"&&zs(r.ownerDocument)===r||r.defaultValue===""+o||(r.defaultValue=""+o)}function Kr(r,s,o,c){if(r=r.options,s){s={};for(var h=0;h<o.length;h++)s["$"+o[h]]=!0;for(o=0;o<r.length;o++)h=s.hasOwnProperty("$"+r[o].value),r[o].selected!==h&&(r[o].selected=h),h&&c&&(r[o].defaultSelected=!0)}else{for(o=""+fn(o),s=null,h=0;h<r.length;h++){if(r[h].value===o){r[h].selected=!0,c&&(r[h].defaultSelected=!0);return}s!==null||r[h].disabled||(s=r[h])}s!==null&&(s.selected=!0)}}function et(r,s,o){if(s!=null&&(s=""+fn(s),s!==r.value&&(r.value=s),o==null)){r.defaultValue!==s&&(r.defaultValue=s);return}r.defaultValue=o!=null?""+fn(o):""}function qs(r,s,o,c){if(s==null){if(c!=null){if(o!=null)throw Error(i(92));if(st(c)){if(1<c.length)throw Error(i(93));c=c[0]}o=c}o==null&&(o=""),s=o}o=fn(s),r.defaultValue=o,c=r.textContent,c===o&&c!==""&&c!==null&&(r.value=c)}function zn(r,s){if(s){var o=r.firstChild;if(o&&o===r.lastChild&&o.nodeType===3){o.nodeValue=s;return}}r.textContent=s}var Fs=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function yu(r,s,o){var c=s.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?c?r.setProperty(s,""):s==="float"?r.cssFloat="":r[s]="":c?r.setProperty(s,o):typeof o!="number"||o===0||Fs.has(s)?s==="float"?r.cssFloat=o:r[s]=(""+o).trim():r[s]=o+"px"}function vl(r,s,o){if(s!=null&&typeof s!="object")throw Error(i(62));if(r=r.style,o!=null){for(var c in o)!o.hasOwnProperty(c)||s!=null&&s.hasOwnProperty(c)||(c.indexOf("--")===0?r.setProperty(c,""):c==="float"?r.cssFloat="":r[c]="");for(var h in s)c=s[h],s.hasOwnProperty(h)&&o[h]!==c&&yu(r,h,c)}else for(var g in s)s.hasOwnProperty(g)&&yu(r,g,s[g])}function _l(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _f=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),bf=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function za(r){return bf.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}var Qr=null;function Bn(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Wr=null,Xr=null;function bl(r){var s=gr(r);if(s&&(r=s.stateNode)){var o=r[At]||null;e:switch(r=s.stateNode,s.type){case"input":if(Rn(r,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),s=o.name,o.type==="radio"&&s!=null){for(o=r;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+St(""+s)+'"][type="radio"]'),s=0;s<o.length;s++){var c=o[s];if(c!==r&&c.form===r.form){var h=c[At]||null;if(!h)throw Error(i(90));Rn(c,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(s=0;s<o.length;s++)c=o[s],c.form===r.form&&yl(c)}break e;case"textarea":et(r,o.value,o.defaultValue);break e;case"select":s=o.value,s!=null&&Kr(r,!!o.multiple,s,!1)}}}var _r=!1;function vu(r,s,o){if(_r)return r(s,o);_r=!0;try{var c=r(s);return c}finally{if(_r=!1,(Wr!==null||Xr!==null)&&(dd(),Wr&&(s=Wr,r=Xr,Xr=Wr=null,bl(s),r)))for(s=0;s<r.length;s++)bl(r[s])}}function Hs(r,s){var o=r.stateNode;if(o===null)return null;var c=o[At]||null;if(c===null)return null;o=c[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(r=r.type,c=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!c;break e;default:r=!1}if(r)return null;if(o&&typeof o!="function")throw Error(i(231,s,typeof o));return o}var rr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),qn=!1;if(rr)try{var Gs={};Object.defineProperty(Gs,"passive",{get:function(){qn=!0}}),window.addEventListener("test",Gs,Gs),window.removeEventListener("test",Gs,Gs)}catch{qn=!1}var br=null,Mi=null,Zr=null;function El(){if(Zr)return Zr;var r,s=Mi,o=s.length,c,h="value"in br?br.value:br.textContent,g=h.length;for(r=0;r<o&&s[r]===h[r];r++);var T=o-r;for(c=1;c<=T&&s[o-c]===h[g-c];c++);return Zr=h.slice(r,1<c?1-c:void 0)}function Er(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function Tr(){return!0}function Tl(){return!1}function Ut(r){function s(o,c,h,g,T){this._reactName=o,this._targetInst=h,this.type=c,this.nativeEvent=g,this.target=T,this.currentTarget=null;for(var w in r)r.hasOwnProperty(w)&&(o=r[w],this[w]=o?o(g):g[w]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Tr:Tl,this.isPropagationStopped=Tl,this}return v(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Tr)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Tr)},persist:function(){},isPersistent:Tr}),s}var Ke={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ba=Ut(Ke),$s=v({},Ke,{view:0,detail:0}),_u=Ut($s),qa,Fa,xr,Ys=v({},$s,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ws,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==xr&&(xr&&r.type==="mousemove"?(qa=r.screenX-xr.screenX,Fa=r.screenY-xr.screenY):Fa=qa=0,xr=r),qa)},movementY:function(r){return"movementY"in r?r.movementY:Fa}}),Fn=Ut(Ys),bu=v({},Ys,{dataTransfer:0}),Ef=Ut(bu),Ks=v({},$s,{relatedTarget:0}),Ha=Ut(Ks),xl=v({},Ke,{animationName:0,elapsedTime:0,pseudoElement:0}),Ga=Ut(xl),Eu=v({},Ke,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),$a=Ut(Eu),Tf=v({},Ke,{data:0}),wl=Ut(Tf),Qs={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Tu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Al(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=xu[r])?!!s[r]:!1}function Ws(){return Al}var wu=v({},$s,{key:function(r){if(r.key){var s=Qs[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=Er(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Tu[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ws,charCode:function(r){return r.type==="keypress"?Er(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Er(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Ya=Ut(wu),Au=v({},Ys,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Sl=Ut(Au),Jr=v({},$s,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ws}),Su=Ut(Jr),Cu=v({},Ke,{propertyName:0,elapsedTime:0,pseudoElement:0}),Nu=Ut(Cu),Ru=v({},Ys,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Ka=Ut(Ru),mn=v({},Ke,{newState:0,oldState:0}),Iu=Ut(mn),Ou=[9,13,27,32],wr=rr&&"CompositionEvent"in window,d=null;rr&&"documentMode"in document&&(d=document.documentMode);var _=rr&&"TextEvent"in window&&!d,b=rr&&(!wr||d&&8<d&&11>=d),S=" ",F=!1;function X(r,s){switch(r){case"keyup":return Ou.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function de(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var ze=!1;function Dt(r,s){switch(r){case"compositionend":return de(s);case"keypress":return s.which!==32?null:(F=!0,S);case"textInput":return r=s.data,r===S&&F?null:r;default:return null}}function Be(r,s){if(ze)return r==="compositionend"||!wr&&X(r,s)?(r=El(),Zr=Mi=br=null,ze=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return b&&s.locale!=="ko"?null:s.data;default:return null}}var zt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Pt(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!zt[r.type]:s==="textarea"}function ei(r,s,o,c){Wr?Xr?Xr.push(c):Xr=[c]:Wr=c,s=yd(s,"onChange"),0<s.length&&(o=new Ba("onChange","change",null,o,c),r.push({event:o,listeners:s}))}var Qt=null,Ar=null;function Cl(r){a_(r,0)}function Du(r){var s=yr(r);if(yl(s))return r}function Cy(r,s){if(r==="change")return s}var Ny=!1;if(rr){var xf;if(rr){var wf="oninput"in document;if(!wf){var Ry=document.createElement("div");Ry.setAttribute("oninput","return;"),wf=typeof Ry.oninput=="function"}xf=wf}else xf=!1;Ny=xf&&(!document.documentMode||9<document.documentMode)}function Iy(){Qt&&(Qt.detachEvent("onpropertychange",Oy),Ar=Qt=null)}function Oy(r){if(r.propertyName==="value"&&Du(Ar)){var s=[];ei(s,Ar,r,Bn(r)),vu(Cl,s)}}function zw(r,s,o){r==="focusin"?(Iy(),Qt=s,Ar=o,Qt.attachEvent("onpropertychange",Oy)):r==="focusout"&&Iy()}function Bw(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Du(Ar)}function qw(r,s){if(r==="click")return Du(s)}function Fw(r,s){if(r==="input"||r==="change")return Du(s)}function Hw(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var In=typeof Object.is=="function"?Object.is:Hw;function Nl(r,s){if(In(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var o=Object.keys(r),c=Object.keys(s);if(o.length!==c.length)return!1;for(c=0;c<o.length;c++){var h=o[c];if(!Rs.call(s,h)||!In(r[h],s[h]))return!1}return!0}function Dy(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Py(r,s){var o=Dy(r);r=0;for(var c;o;){if(o.nodeType===3){if(c=r+o.textContent.length,r<=s&&c>=s)return{node:o,offset:s-r};r=c}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Dy(o)}}function jy(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?jy(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function My(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var s=zs(r.document);s instanceof r.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)r=s.contentWindow;else break;s=zs(r.document)}return s}function Af(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}var Gw=rr&&"documentMode"in document&&11>=document.documentMode,Qa=null,Sf=null,Rl=null,Cf=!1;function ky(r,s,o){var c=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Cf||Qa==null||Qa!==zs(c)||(c=Qa,"selectionStart"in c&&Af(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Rl&&Nl(Rl,c)||(Rl=c,c=yd(Sf,"onSelect"),0<c.length&&(s=new Ba("onSelect","select",null,s,o),r.push({event:s,listeners:c}),s.target=Qa)))}function Xs(r,s){var o={};return o[r.toLowerCase()]=s.toLowerCase(),o["Webkit"+r]="webkit"+s,o["Moz"+r]="moz"+s,o}var Wa={animationend:Xs("Animation","AnimationEnd"),animationiteration:Xs("Animation","AnimationIteration"),animationstart:Xs("Animation","AnimationStart"),transitionrun:Xs("Transition","TransitionRun"),transitionstart:Xs("Transition","TransitionStart"),transitioncancel:Xs("Transition","TransitionCancel"),transitionend:Xs("Transition","TransitionEnd")},Nf={},Vy={};rr&&(Vy=document.createElement("div").style,"AnimationEvent"in window||(delete Wa.animationend.animation,delete Wa.animationiteration.animation,delete Wa.animationstart.animation),"TransitionEvent"in window||delete Wa.transitionend.transition);function Zs(r){if(Nf[r])return Nf[r];if(!Wa[r])return r;var s=Wa[r],o;for(o in s)if(s.hasOwnProperty(o)&&o in Vy)return Nf[r]=s[o];return r}var Ly=Zs("animationend"),Uy=Zs("animationiteration"),zy=Zs("animationstart"),$w=Zs("transitionrun"),Yw=Zs("transitionstart"),Kw=Zs("transitioncancel"),By=Zs("transitionend"),qy=new Map,Rf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Rf.push("scrollEnd");function ir(r,s){qy.set(r,s),nr(s,[r])}var Fy=new WeakMap;function Hn(r,s){if(typeof r=="object"&&r!==null){var o=Fy.get(r);return o!==void 0?o:(s={value:r,source:s,stack:La(s)},Fy.set(r,s),s)}return{value:r,source:s,stack:La(s)}}var Gn=[],Xa=0,If=0;function Pu(){for(var r=Xa,s=If=Xa=0;s<r;){var o=Gn[s];Gn[s++]=null;var c=Gn[s];Gn[s++]=null;var h=Gn[s];Gn[s++]=null;var g=Gn[s];if(Gn[s++]=null,c!==null&&h!==null){var T=c.pending;T===null?h.next=h:(h.next=T.next,T.next=h),c.pending=h}g!==0&&Hy(o,h,g)}}function ju(r,s,o,c){Gn[Xa++]=r,Gn[Xa++]=s,Gn[Xa++]=o,Gn[Xa++]=c,If|=c,r.lanes|=c,r=r.alternate,r!==null&&(r.lanes|=c)}function Of(r,s,o,c){return ju(r,s,o,c),Mu(r)}function Za(r,s){return ju(r,null,null,s),Mu(r)}function Hy(r,s,o){r.lanes|=o;var c=r.alternate;c!==null&&(c.lanes|=o);for(var h=!1,g=r.return;g!==null;)g.childLanes|=o,c=g.alternate,c!==null&&(c.childLanes|=o),g.tag===22&&(r=g.stateNode,r===null||r._visibility&1||(h=!0)),r=g,g=g.return;return r.tag===3?(g=r.stateNode,h&&s!==null&&(h=31-rn(o),r=g.hiddenUpdates,c=r[h],c===null?r[h]=[s]:c.push(s),s.lane=o|536870912),g):null}function Mu(r){if(50<ec)throw ec=0,Vm=null,Error(i(185));for(var s=r.return;s!==null;)r=s,s=r.return;return r.tag===3?r.stateNode:null}var Ja={};function Qw(r,s,o,c){this.tag=r,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function On(r,s,o,c){return new Qw(r,s,o,c)}function Df(r){return r=r.prototype,!(!r||!r.isReactComponent)}function ti(r,s){var o=r.alternate;return o===null?(o=On(r.tag,s,r.key,r.mode),o.elementType=r.elementType,o.type=r.type,o.stateNode=r.stateNode,o.alternate=r,r.alternate=o):(o.pendingProps=s,o.type=r.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=r.flags&65011712,o.childLanes=r.childLanes,o.lanes=r.lanes,o.child=r.child,o.memoizedProps=r.memoizedProps,o.memoizedState=r.memoizedState,o.updateQueue=r.updateQueue,s=r.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=r.sibling,o.index=r.index,o.ref=r.ref,o.refCleanup=r.refCleanup,o}function Gy(r,s){r.flags&=65011714;var o=r.alternate;return o===null?(r.childLanes=0,r.lanes=s,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,s=o.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),r}function ku(r,s,o,c,h,g){var T=0;if(c=r,typeof r=="function")Df(r)&&(T=1);else if(typeof r=="string")T=XA(r,o,ee.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case R:return r=On(31,o,s,h),r.elementType=R,r.lanes=g,r;case A:return Js(o.children,h,g,s);case k:T=8,h|=24;break;case O:return r=On(12,o,s,h|2),r.elementType=O,r.lanes=g,r;case le:return r=On(13,o,s,h),r.elementType=le,r.lanes=g,r;case ye:return r=On(19,o,s,h),r.elementType=ye,r.lanes=g,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case $:case z:T=10;break e;case K:T=9;break e;case ce:T=11;break e;case j:T=14;break e;case N:T=16,c=null;break e}T=29,o=Error(i(130,r===null?"null":typeof r,"")),c=null}return s=On(T,o,s,h),s.elementType=r,s.type=c,s.lanes=g,s}function Js(r,s,o,c){return r=On(7,r,c,s),r.lanes=o,r}function Pf(r,s,o){return r=On(6,r,null,s),r.lanes=o,r}function jf(r,s,o){return s=On(4,r.children!==null?r.children:[],r.key,s),s.lanes=o,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}var eo=[],to=0,Vu=null,Lu=0,$n=[],Yn=0,ea=null,ni=1,ri="";function ta(r,s){eo[to++]=Lu,eo[to++]=Vu,Vu=r,Lu=s}function $y(r,s,o){$n[Yn++]=ni,$n[Yn++]=ri,$n[Yn++]=ea,ea=r;var c=ni;r=ri;var h=32-rn(c)-1;c&=~(1<<h),o+=1;var g=32-rn(s)+h;if(30<g){var T=h-h%5;g=(c&(1<<T)-1).toString(32),c>>=T,h-=T,ni=1<<32-rn(s)+h|o<<h|c,ri=g+r}else ni=1<<g|o<<h|c,ri=r}function Mf(r){r.return!==null&&(ta(r,1),$y(r,1,0))}function kf(r){for(;r===Vu;)Vu=eo[--to],eo[to]=null,Lu=eo[--to],eo[to]=null;for(;r===ea;)ea=$n[--Yn],$n[Yn]=null,ri=$n[--Yn],$n[Yn]=null,ni=$n[--Yn],$n[Yn]=null}var pn=null,vt=null,Ye=!1,na=null,Sr=!1,Vf=Error(i(519));function ra(r){var s=Error(i(418,""));throw Dl(Hn(s,r)),Vf}function Yy(r){var s=r.stateNode,o=r.type,c=r.memoizedProps;switch(s[Ot]=r,s[At]=c,o){case"dialog":Ve("cancel",s),Ve("close",s);break;case"iframe":case"object":case"embed":Ve("load",s);break;case"video":case"audio":for(o=0;o<nc.length;o++)Ve(nc[o],s);break;case"source":Ve("error",s);break;case"img":case"image":case"link":Ve("error",s),Ve("load",s);break;case"details":Ve("toggle",s);break;case"input":Ve("invalid",s),Bs(s,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0),Ua(s);break;case"select":Ve("invalid",s);break;case"textarea":Ve("invalid",s),qs(s,c.value,c.defaultValue,c.children),Ua(s)}o=c.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||s.textContent===""+o||c.suppressHydrationWarning===!0||u_(s.textContent,o)?(c.popover!=null&&(Ve("beforetoggle",s),Ve("toggle",s)),c.onScroll!=null&&Ve("scroll",s),c.onScrollEnd!=null&&Ve("scrollend",s),c.onClick!=null&&(s.onclick=vd),s=!0):s=!1,s||ra(r)}function Ky(r){for(pn=r.return;pn;)switch(pn.tag){case 5:case 13:Sr=!1;return;case 27:case 3:Sr=!0;return;default:pn=pn.return}}function Il(r){if(r!==pn)return!1;if(!Ye)return Ky(r),Ye=!0,!1;var s=r.tag,o;if((o=s!==3&&s!==27)&&((o=s===5)&&(o=r.type,o=!(o!=="form"&&o!=="button")||Jm(r.type,r.memoizedProps)),o=!o),o&&vt&&ra(r),Ky(r),s===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));e:{for(r=r.nextSibling,s=0;r;){if(r.nodeType===8)if(o=r.data,o==="/$"){if(s===0){vt=ar(r.nextSibling);break e}s--}else o!=="$"&&o!=="$!"&&o!=="$?"||s++;r=r.nextSibling}vt=null}}else s===27?(s=vt,Xi(r.type)?(r=rp,rp=null,vt=r):vt=s):vt=pn?ar(r.stateNode.nextSibling):null;return!0}function Ol(){vt=pn=null,Ye=!1}function Qy(){var r=na;return r!==null&&(Tn===null?Tn=r:Tn.push.apply(Tn,r),na=null),r}function Dl(r){na===null?na=[r]:na.push(r)}var Lf=oe(null),ia=null,ii=null;function ki(r,s,o){ue(Lf,s._currentValue),s._currentValue=o}function si(r){r._currentValue=Lf.current,fe(Lf)}function Uf(r,s,o){for(;r!==null;){var c=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),r===o)break;r=r.return}}function zf(r,s,o,c){var h=r.child;for(h!==null&&(h.return=r);h!==null;){var g=h.dependencies;if(g!==null){var T=h.child;g=g.firstContext;e:for(;g!==null;){var w=g;g=h;for(var I=0;I<s.length;I++)if(w.context===s[I]){g.lanes|=o,w=g.alternate,w!==null&&(w.lanes|=o),Uf(g.return,o,r),c||(T=null);break e}g=w.next}}else if(h.tag===18){if(T=h.return,T===null)throw Error(i(341));T.lanes|=o,g=T.alternate,g!==null&&(g.lanes|=o),Uf(T,o,r),T=null}else T=h.child;if(T!==null)T.return=h;else for(T=h;T!==null;){if(T===r){T=null;break}if(h=T.sibling,h!==null){h.return=T.return,T=h;break}T=T.return}h=T}}function Pl(r,s,o,c){r=null;for(var h=s,g=!1;h!==null;){if(!g){if((h.flags&524288)!==0)g=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var T=h.alternate;if(T===null)throw Error(i(387));if(T=T.memoizedProps,T!==null){var w=h.type;In(h.pendingProps.value,T.value)||(r!==null?r.push(w):r=[w])}}else if(h===_e.current){if(T=h.alternate,T===null)throw Error(i(387));T.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(r!==null?r.push(lc):r=[lc])}h=h.return}r!==null&&zf(s,r,o,c),s.flags|=262144}function Uu(r){for(r=r.firstContext;r!==null;){if(!In(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function sa(r){ia=r,ii=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function sn(r){return Wy(ia,r)}function zu(r,s){return ia===null&&sa(r),Wy(r,s)}function Wy(r,s){var o=s._currentValue;if(s={context:s,memoizedValue:o,next:null},ii===null){if(r===null)throw Error(i(308));ii=s,r.dependencies={lanes:0,firstContext:s},r.flags|=524288}else ii=ii.next=s;return o}var Ww=typeof AbortController<"u"?AbortController:function(){var r=[],s=this.signal={aborted:!1,addEventListener:function(o,c){r.push(c)}};this.abort=function(){s.aborted=!0,r.forEach(function(o){return o()})}},Xw=n.unstable_scheduleCallback,Zw=n.unstable_NormalPriority,jt={$$typeof:z,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Bf(){return{controller:new Ww,data:new Map,refCount:0}}function jl(r){r.refCount--,r.refCount===0&&Xw(Zw,function(){r.controller.abort()})}var Ml=null,qf=0,no=0,ro=null;function Jw(r,s){if(Ml===null){var o=Ml=[];qf=0,no=Hm(),ro={status:"pending",value:void 0,then:function(c){o.push(c)}}}return qf++,s.then(Xy,Xy),s}function Xy(){if(--qf===0&&Ml!==null){ro!==null&&(ro.status="fulfilled");var r=Ml;Ml=null,no=0,ro=null;for(var s=0;s<r.length;s++)(0,r[s])()}}function eA(r,s){var o=[],c={status:"pending",value:null,reason:null,then:function(h){o.push(h)}};return r.then(function(){c.status="fulfilled",c.value=s;for(var h=0;h<o.length;h++)(0,o[h])(s)},function(h){for(c.status="rejected",c.reason=h,h=0;h<o.length;h++)(0,o[h])(void 0)}),c}var Zy=J.S;J.S=function(r,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&Jw(r,s),Zy!==null&&Zy(r,s)};var aa=oe(null);function Ff(){var r=aa.current;return r!==null?r:at.pooledCache}function Bu(r,s){s===null?ue(aa,aa.current):ue(aa,s.pool)}function Jy(){var r=Ff();return r===null?null:{parent:jt._currentValue,pool:r}}var kl=Error(i(460)),ev=Error(i(474)),qu=Error(i(542)),Hf={then:function(){}};function tv(r){return r=r.status,r==="fulfilled"||r==="rejected"}function Fu(){}function nv(r,s,o){switch(o=r[o],o===void 0?r.push(s):o!==s&&(s.then(Fu,Fu),s=o),s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,iv(r),r;default:if(typeof s.status=="string")s.then(Fu,Fu);else{if(r=at,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=s,r.status="pending",r.then(function(c){if(s.status==="pending"){var h=s;h.status="fulfilled",h.value=c}},function(c){if(s.status==="pending"){var h=s;h.status="rejected",h.reason=c}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,iv(r),r}throw Vl=s,kl}}var Vl=null;function rv(){if(Vl===null)throw Error(i(459));var r=Vl;return Vl=null,r}function iv(r){if(r===kl||r===qu)throw Error(i(483))}var Vi=!1;function Gf(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function $f(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Li(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function Ui(r,s,o){var c=r.updateQueue;if(c===null)return null;if(c=c.shared,(Xe&2)!==0){var h=c.pending;return h===null?s.next=s:(s.next=h.next,h.next=s),c.pending=s,s=Mu(r),Hy(r,null,o),s}return ju(r,c,s,o),Mu(r)}function Ll(r,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194048)!==0)){var c=s.lanes;c&=r.pendingLanes,o|=c,s.lanes=o,hl(r,o)}}function Yf(r,s){var o=r.updateQueue,c=r.alternate;if(c!==null&&(c=c.updateQueue,o===c)){var h=null,g=null;if(o=o.firstBaseUpdate,o!==null){do{var T={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};g===null?h=g=T:g=g.next=T,o=o.next}while(o!==null);g===null?h=g=s:g=g.next=s}else h=g=s;o={baseState:c.baseState,firstBaseUpdate:h,lastBaseUpdate:g,shared:c.shared,callbacks:c.callbacks},r.updateQueue=o;return}r=o.lastBaseUpdate,r===null?o.firstBaseUpdate=s:r.next=s,o.lastBaseUpdate=s}var Kf=!1;function Ul(){if(Kf){var r=ro;if(r!==null)throw r}}function zl(r,s,o,c){Kf=!1;var h=r.updateQueue;Vi=!1;var g=h.firstBaseUpdate,T=h.lastBaseUpdate,w=h.shared.pending;if(w!==null){h.shared.pending=null;var I=w,G=I.next;I.next=null,T===null?g=G:T.next=G,T=I;var te=r.alternate;te!==null&&(te=te.updateQueue,w=te.lastBaseUpdate,w!==T&&(w===null?te.firstBaseUpdate=G:w.next=G,te.lastBaseUpdate=I))}if(g!==null){var se=h.baseState;T=0,te=G=I=null,w=g;do{var Y=w.lane&-536870913,Q=Y!==w.lane;if(Q?(qe&Y)===Y:(c&Y)===Y){Y!==0&&Y===no&&(Kf=!0),te!==null&&(te=te.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var Se=r,Te=w;Y=s;var rt=o;switch(Te.tag){case 1:if(Se=Te.payload,typeof Se=="function"){se=Se.call(rt,se,Y);break e}se=Se;break e;case 3:Se.flags=Se.flags&-65537|128;case 0:if(Se=Te.payload,Y=typeof Se=="function"?Se.call(rt,se,Y):Se,Y==null)break e;se=v({},se,Y);break e;case 2:Vi=!0}}Y=w.callback,Y!==null&&(r.flags|=64,Q&&(r.flags|=8192),Q=h.callbacks,Q===null?h.callbacks=[Y]:Q.push(Y))}else Q={lane:Y,tag:w.tag,payload:w.payload,callback:w.callback,next:null},te===null?(G=te=Q,I=se):te=te.next=Q,T|=Y;if(w=w.next,w===null){if(w=h.shared.pending,w===null)break;Q=w,w=Q.next,Q.next=null,h.lastBaseUpdate=Q,h.shared.pending=null}}while(!0);te===null&&(I=se),h.baseState=I,h.firstBaseUpdate=G,h.lastBaseUpdate=te,g===null&&(h.shared.lanes=0),Yi|=T,r.lanes=T,r.memoizedState=se}}function sv(r,s){if(typeof r!="function")throw Error(i(191,r));r.call(s)}function av(r,s){var o=r.callbacks;if(o!==null)for(r.callbacks=null,r=0;r<o.length;r++)sv(o[r],s)}var io=oe(null),Hu=oe(0);function ov(r,s){r=hi,ue(Hu,r),ue(io,s),hi=r|s.baseLanes}function Qf(){ue(Hu,hi),ue(io,io.current)}function Wf(){hi=Hu.current,fe(io),fe(Hu)}var zi=0,De=null,tt=null,Ct=null,Gu=!1,so=!1,oa=!1,$u=0,Bl=0,ao=null,tA=0;function Tt(){throw Error(i(321))}function Xf(r,s){if(s===null)return!1;for(var o=0;o<s.length&&o<r.length;o++)if(!In(r[o],s[o]))return!1;return!0}function Zf(r,s,o,c,h,g){return zi=g,De=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,J.H=r===null||r.memoizedState===null?Hv:Gv,oa=!1,g=o(c,h),oa=!1,so&&(g=cv(s,o,c,h)),lv(r),g}function lv(r){J.H=Zu;var s=tt!==null&&tt.next!==null;if(zi=0,Ct=tt=De=null,Gu=!1,Bl=0,ao=null,s)throw Error(i(300));r===null||Bt||(r=r.dependencies,r!==null&&Uu(r)&&(Bt=!0))}function cv(r,s,o,c){De=r;var h=0;do{if(so&&(ao=null),Bl=0,so=!1,25<=h)throw Error(i(301));if(h+=1,Ct=tt=null,r.updateQueue!=null){var g=r.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}J.H=lA,g=s(o,c)}while(so);return g}function nA(){var r=J.H,s=r.useState()[0];return s=typeof s.then=="function"?ql(s):s,r=r.useState()[0],(tt!==null?tt.memoizedState:null)!==r&&(De.flags|=1024),s}function Jf(){var r=$u!==0;return $u=0,r}function em(r,s,o){s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~o}function tm(r){if(Gu){for(r=r.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Gu=!1}zi=0,Ct=tt=De=null,so=!1,Bl=$u=0,ao=null}function bn(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ct===null?De.memoizedState=Ct=r:Ct=Ct.next=r,Ct}function Nt(){if(tt===null){var r=De.alternate;r=r!==null?r.memoizedState:null}else r=tt.next;var s=Ct===null?De.memoizedState:Ct.next;if(s!==null)Ct=s,tt=r;else{if(r===null)throw De.alternate===null?Error(i(467)):Error(i(310));tt=r,r={memoizedState:tt.memoizedState,baseState:tt.baseState,baseQueue:tt.baseQueue,queue:tt.queue,next:null},Ct===null?De.memoizedState=Ct=r:Ct=Ct.next=r}return Ct}function nm(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ql(r){var s=Bl;return Bl+=1,ao===null&&(ao=[]),r=nv(ao,r,s),s=De,(Ct===null?s.memoizedState:Ct.next)===null&&(s=s.alternate,J.H=s===null||s.memoizedState===null?Hv:Gv),r}function Yu(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return ql(r);if(r.$$typeof===z)return sn(r)}throw Error(i(438,String(r)))}function rm(r){var s=null,o=De.updateQueue;if(o!==null&&(s=o.memoCache),s==null){var c=De.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(s={data:c.data.map(function(h){return h.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),o===null&&(o=nm(),De.updateQueue=o),o.memoCache=s,o=s.data[s.index],o===void 0)for(o=s.data[s.index]=Array(r),c=0;c<r;c++)o[c]=P;return s.index++,o}function ai(r,s){return typeof s=="function"?s(r):s}function Ku(r){var s=Nt();return im(s,tt,r)}function im(r,s,o){var c=r.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=o;var h=r.baseQueue,g=c.pending;if(g!==null){if(h!==null){var T=h.next;h.next=g.next,g.next=T}s.baseQueue=h=g,c.pending=null}if(g=r.baseState,h===null)r.memoizedState=g;else{s=h.next;var w=T=null,I=null,G=s,te=!1;do{var se=G.lane&-536870913;if(se!==G.lane?(qe&se)===se:(zi&se)===se){var Y=G.revertLane;if(Y===0)I!==null&&(I=I.next={lane:0,revertLane:0,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),se===no&&(te=!0);else if((zi&Y)===Y){G=G.next,Y===no&&(te=!0);continue}else se={lane:0,revertLane:G.revertLane,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},I===null?(w=I=se,T=g):I=I.next=se,De.lanes|=Y,Yi|=Y;se=G.action,oa&&o(g,se),g=G.hasEagerState?G.eagerState:o(g,se)}else Y={lane:se,revertLane:G.revertLane,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},I===null?(w=I=Y,T=g):I=I.next=Y,De.lanes|=se,Yi|=se;G=G.next}while(G!==null&&G!==s);if(I===null?T=g:I.next=w,!In(g,r.memoizedState)&&(Bt=!0,te&&(o=ro,o!==null)))throw o;r.memoizedState=g,r.baseState=T,r.baseQueue=I,c.lastRenderedState=g}return h===null&&(c.lanes=0),[r.memoizedState,c.dispatch]}function sm(r){var s=Nt(),o=s.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=r;var c=o.dispatch,h=o.pending,g=s.memoizedState;if(h!==null){o.pending=null;var T=h=h.next;do g=r(g,T.action),T=T.next;while(T!==h);In(g,s.memoizedState)||(Bt=!0),s.memoizedState=g,s.baseQueue===null&&(s.baseState=g),o.lastRenderedState=g}return[g,c]}function uv(r,s,o){var c=De,h=Nt(),g=Ye;if(g){if(o===void 0)throw Error(i(407));o=o()}else o=s();var T=!In((tt||h).memoizedState,o);T&&(h.memoizedState=o,Bt=!0),h=h.queue;var w=fv.bind(null,c,h,r);if(Fl(2048,8,w,[r]),h.getSnapshot!==s||T||Ct!==null&&Ct.memoizedState.tag&1){if(c.flags|=2048,oo(9,Qu(),hv.bind(null,c,h,o,s),null),at===null)throw Error(i(349));g||(zi&124)!==0||dv(c,s,o)}return o}function dv(r,s,o){r.flags|=16384,r={getSnapshot:s,value:o},s=De.updateQueue,s===null?(s=nm(),De.updateQueue=s,s.stores=[r]):(o=s.stores,o===null?s.stores=[r]:o.push(r))}function hv(r,s,o,c){s.value=o,s.getSnapshot=c,mv(s)&&pv(r)}function fv(r,s,o){return o(function(){mv(s)&&pv(r)})}function mv(r){var s=r.getSnapshot;r=r.value;try{var o=s();return!In(r,o)}catch{return!0}}function pv(r){var s=Za(r,2);s!==null&&kn(s,r,2)}function am(r){var s=bn();if(typeof r=="function"){var o=r;if(r=o(),oa){Nn(!0);try{o()}finally{Nn(!1)}}}return s.memoizedState=s.baseState=r,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ai,lastRenderedState:r},s}function gv(r,s,o,c){return r.baseState=o,im(r,tt,typeof c=="function"?c:ai)}function rA(r,s,o,c,h){if(Xu(r))throw Error(i(485));if(r=s.action,r!==null){var g={payload:h,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){g.listeners.push(T)}};J.T!==null?o(!0):g.isTransition=!1,c(g),o=s.pending,o===null?(g.next=s.pending=g,yv(s,g)):(g.next=o.next,s.pending=o.next=g)}}function yv(r,s){var o=s.action,c=s.payload,h=r.state;if(s.isTransition){var g=J.T,T={};J.T=T;try{var w=o(h,c),I=J.S;I!==null&&I(T,w),vv(r,s,w)}catch(G){om(r,s,G)}finally{J.T=g}}else try{g=o(h,c),vv(r,s,g)}catch(G){om(r,s,G)}}function vv(r,s,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(c){_v(r,s,c)},function(c){return om(r,s,c)}):_v(r,s,o)}function _v(r,s,o){s.status="fulfilled",s.value=o,bv(s),r.state=o,s=r.pending,s!==null&&(o=s.next,o===s?r.pending=null:(o=o.next,s.next=o,yv(r,o)))}function om(r,s,o){var c=r.pending;if(r.pending=null,c!==null){c=c.next;do s.status="rejected",s.reason=o,bv(s),s=s.next;while(s!==c)}r.action=null}function bv(r){r=r.listeners;for(var s=0;s<r.length;s++)(0,r[s])()}function Ev(r,s){return s}function Tv(r,s){if(Ye){var o=at.formState;if(o!==null){e:{var c=De;if(Ye){if(vt){t:{for(var h=vt,g=Sr;h.nodeType!==8;){if(!g){h=null;break t}if(h=ar(h.nextSibling),h===null){h=null;break t}}g=h.data,h=g==="F!"||g==="F"?h:null}if(h){vt=ar(h.nextSibling),c=h.data==="F!";break e}}ra(c)}c=!1}c&&(s=o[0])}}return o=bn(),o.memoizedState=o.baseState=s,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ev,lastRenderedState:s},o.queue=c,o=Bv.bind(null,De,c),c.dispatch=o,c=am(!1),g=hm.bind(null,De,!1,c.queue),c=bn(),h={state:s,dispatch:null,action:r,pending:null},c.queue=h,o=rA.bind(null,De,h,g,o),h.dispatch=o,c.memoizedState=r,[s,o,!1]}function xv(r){var s=Nt();return wv(s,tt,r)}function wv(r,s,o){if(s=im(r,s,Ev)[0],r=Ku(ai)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var c=ql(s)}catch(T){throw T===kl?qu:T}else c=s;s=Nt();var h=s.queue,g=h.dispatch;return o!==s.memoizedState&&(De.flags|=2048,oo(9,Qu(),iA.bind(null,h,o),null)),[c,g,r]}function iA(r,s){r.action=s}function Av(r){var s=Nt(),o=tt;if(o!==null)return wv(s,o,r);Nt(),s=s.memoizedState,o=Nt();var c=o.queue.dispatch;return o.memoizedState=r,[s,c,!1]}function oo(r,s,o,c){return r={tag:r,create:o,deps:c,inst:s,next:null},s=De.updateQueue,s===null&&(s=nm(),De.updateQueue=s),o=s.lastEffect,o===null?s.lastEffect=r.next=r:(c=o.next,o.next=r,r.next=c,s.lastEffect=r),r}function Qu(){return{destroy:void 0,resource:void 0}}function Sv(){return Nt().memoizedState}function Wu(r,s,o,c){var h=bn();c=c===void 0?null:c,De.flags|=r,h.memoizedState=oo(1|s,Qu(),o,c)}function Fl(r,s,o,c){var h=Nt();c=c===void 0?null:c;var g=h.memoizedState.inst;tt!==null&&c!==null&&Xf(c,tt.memoizedState.deps)?h.memoizedState=oo(s,g,o,c):(De.flags|=r,h.memoizedState=oo(1|s,g,o,c))}function Cv(r,s){Wu(8390656,8,r,s)}function Nv(r,s){Fl(2048,8,r,s)}function Rv(r,s){return Fl(4,2,r,s)}function Iv(r,s){return Fl(4,4,r,s)}function Ov(r,s){if(typeof s=="function"){r=r();var o=s(r);return function(){typeof o=="function"?o():s(null)}}if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function Dv(r,s,o){o=o!=null?o.concat([r]):null,Fl(4,4,Ov.bind(null,s,r),o)}function lm(){}function Pv(r,s){var o=Nt();s=s===void 0?null:s;var c=o.memoizedState;return s!==null&&Xf(s,c[1])?c[0]:(o.memoizedState=[r,s],r)}function jv(r,s){var o=Nt();s=s===void 0?null:s;var c=o.memoizedState;if(s!==null&&Xf(s,c[1]))return c[0];if(c=r(),oa){Nn(!0);try{r()}finally{Nn(!1)}}return o.memoizedState=[c,s],c}function cm(r,s,o){return o===void 0||(zi&1073741824)!==0?r.memoizedState=s:(r.memoizedState=o,r=V0(),De.lanes|=r,Yi|=r,o)}function Mv(r,s,o,c){return In(o,s)?o:io.current!==null?(r=cm(r,o,c),In(r,s)||(Bt=!0),r):(zi&42)===0?(Bt=!0,r.memoizedState=o):(r=V0(),De.lanes|=r,Yi|=r,s)}function kv(r,s,o,c,h){var g=he.p;he.p=g!==0&&8>g?g:8;var T=J.T,w={};J.T=w,hm(r,!1,s,o);try{var I=h(),G=J.S;if(G!==null&&G(w,I),I!==null&&typeof I=="object"&&typeof I.then=="function"){var te=eA(I,c);Hl(r,s,te,Mn(r))}else Hl(r,s,c,Mn(r))}catch(se){Hl(r,s,{then:function(){},status:"rejected",reason:se},Mn())}finally{he.p=g,J.T=T}}function sA(){}function um(r,s,o,c){if(r.tag!==5)throw Error(i(476));var h=Vv(r).queue;kv(r,h,s,ve,o===null?sA:function(){return Lv(r),o(c)})}function Vv(r){var s=r.memoizedState;if(s!==null)return s;s={memoizedState:ve,baseState:ve,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ai,lastRenderedState:ve},next:null};var o={};return s.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ai,lastRenderedState:o},next:null},r.memoizedState=s,r=r.alternate,r!==null&&(r.memoizedState=s),s}function Lv(r){var s=Vv(r).next.queue;Hl(r,s,{},Mn())}function dm(){return sn(lc)}function Uv(){return Nt().memoizedState}function zv(){return Nt().memoizedState}function aA(r){for(var s=r.return;s!==null;){switch(s.tag){case 24:case 3:var o=Mn();r=Li(o);var c=Ui(s,r,o);c!==null&&(kn(c,s,o),Ll(c,s,o)),s={cache:Bf()},r.payload=s;return}s=s.return}}function oA(r,s,o){var c=Mn();o={lane:c,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},Xu(r)?qv(s,o):(o=Of(r,s,o,c),o!==null&&(kn(o,r,c),Fv(o,s,c)))}function Bv(r,s,o){var c=Mn();Hl(r,s,o,c)}function Hl(r,s,o,c){var h={lane:c,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(Xu(r))qv(s,h);else{var g=r.alternate;if(r.lanes===0&&(g===null||g.lanes===0)&&(g=s.lastRenderedReducer,g!==null))try{var T=s.lastRenderedState,w=g(T,o);if(h.hasEagerState=!0,h.eagerState=w,In(w,T))return ju(r,s,h,0),at===null&&Pu(),!1}catch{}finally{}if(o=Of(r,s,h,c),o!==null)return kn(o,r,c),Fv(o,s,c),!0}return!1}function hm(r,s,o,c){if(c={lane:2,revertLane:Hm(),action:c,hasEagerState:!1,eagerState:null,next:null},Xu(r)){if(s)throw Error(i(479))}else s=Of(r,o,c,2),s!==null&&kn(s,r,2)}function Xu(r){var s=r.alternate;return r===De||s!==null&&s===De}function qv(r,s){so=Gu=!0;var o=r.pending;o===null?s.next=s:(s.next=o.next,o.next=s),r.pending=s}function Fv(r,s,o){if((o&4194048)!==0){var c=s.lanes;c&=r.pendingLanes,o|=c,s.lanes=o,hl(r,o)}}var Zu={readContext:sn,use:Yu,useCallback:Tt,useContext:Tt,useEffect:Tt,useImperativeHandle:Tt,useLayoutEffect:Tt,useInsertionEffect:Tt,useMemo:Tt,useReducer:Tt,useRef:Tt,useState:Tt,useDebugValue:Tt,useDeferredValue:Tt,useTransition:Tt,useSyncExternalStore:Tt,useId:Tt,useHostTransitionStatus:Tt,useFormState:Tt,useActionState:Tt,useOptimistic:Tt,useMemoCache:Tt,useCacheRefresh:Tt},Hv={readContext:sn,use:Yu,useCallback:function(r,s){return bn().memoizedState=[r,s===void 0?null:s],r},useContext:sn,useEffect:Cv,useImperativeHandle:function(r,s,o){o=o!=null?o.concat([r]):null,Wu(4194308,4,Ov.bind(null,s,r),o)},useLayoutEffect:function(r,s){return Wu(4194308,4,r,s)},useInsertionEffect:function(r,s){Wu(4,2,r,s)},useMemo:function(r,s){var o=bn();s=s===void 0?null:s;var c=r();if(oa){Nn(!0);try{r()}finally{Nn(!1)}}return o.memoizedState=[c,s],c},useReducer:function(r,s,o){var c=bn();if(o!==void 0){var h=o(s);if(oa){Nn(!0);try{o(s)}finally{Nn(!1)}}}else h=s;return c.memoizedState=c.baseState=h,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:h},c.queue=r,r=r.dispatch=oA.bind(null,De,r),[c.memoizedState,r]},useRef:function(r){var s=bn();return r={current:r},s.memoizedState=r},useState:function(r){r=am(r);var s=r.queue,o=Bv.bind(null,De,s);return s.dispatch=o,[r.memoizedState,o]},useDebugValue:lm,useDeferredValue:function(r,s){var o=bn();return cm(o,r,s)},useTransition:function(){var r=am(!1);return r=kv.bind(null,De,r.queue,!0,!1),bn().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,s,o){var c=De,h=bn();if(Ye){if(o===void 0)throw Error(i(407));o=o()}else{if(o=s(),at===null)throw Error(i(349));(qe&124)!==0||dv(c,s,o)}h.memoizedState=o;var g={value:o,getSnapshot:s};return h.queue=g,Cv(fv.bind(null,c,g,r),[r]),c.flags|=2048,oo(9,Qu(),hv.bind(null,c,g,o,s),null),o},useId:function(){var r=bn(),s=at.identifierPrefix;if(Ye){var o=ri,c=ni;o=(c&~(1<<32-rn(c)-1)).toString(32)+o,s="«"+s+"R"+o,o=$u++,0<o&&(s+="H"+o.toString(32)),s+="»"}else o=tA++,s="«"+s+"r"+o.toString(32)+"»";return r.memoizedState=s},useHostTransitionStatus:dm,useFormState:Tv,useActionState:Tv,useOptimistic:function(r){var s=bn();s.memoizedState=s.baseState=r;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=o,s=hm.bind(null,De,!0,o),o.dispatch=s,[r,s]},useMemoCache:rm,useCacheRefresh:function(){return bn().memoizedState=aA.bind(null,De)}},Gv={readContext:sn,use:Yu,useCallback:Pv,useContext:sn,useEffect:Nv,useImperativeHandle:Dv,useInsertionEffect:Rv,useLayoutEffect:Iv,useMemo:jv,useReducer:Ku,useRef:Sv,useState:function(){return Ku(ai)},useDebugValue:lm,useDeferredValue:function(r,s){var o=Nt();return Mv(o,tt.memoizedState,r,s)},useTransition:function(){var r=Ku(ai)[0],s=Nt().memoizedState;return[typeof r=="boolean"?r:ql(r),s]},useSyncExternalStore:uv,useId:Uv,useHostTransitionStatus:dm,useFormState:xv,useActionState:xv,useOptimistic:function(r,s){var o=Nt();return gv(o,tt,r,s)},useMemoCache:rm,useCacheRefresh:zv},lA={readContext:sn,use:Yu,useCallback:Pv,useContext:sn,useEffect:Nv,useImperativeHandle:Dv,useInsertionEffect:Rv,useLayoutEffect:Iv,useMemo:jv,useReducer:sm,useRef:Sv,useState:function(){return sm(ai)},useDebugValue:lm,useDeferredValue:function(r,s){var o=Nt();return tt===null?cm(o,r,s):Mv(o,tt.memoizedState,r,s)},useTransition:function(){var r=sm(ai)[0],s=Nt().memoizedState;return[typeof r=="boolean"?r:ql(r),s]},useSyncExternalStore:uv,useId:Uv,useHostTransitionStatus:dm,useFormState:Av,useActionState:Av,useOptimistic:function(r,s){var o=Nt();return tt!==null?gv(o,tt,r,s):(o.baseState=r,[r,o.queue.dispatch])},useMemoCache:rm,useCacheRefresh:zv},lo=null,Gl=0;function Ju(r){var s=Gl;return Gl+=1,lo===null&&(lo=[]),nv(lo,r,s)}function $l(r,s){s=s.props.ref,r.ref=s!==void 0?s:null}function ed(r,s){throw s.$$typeof===E?Error(i(525)):(r=Object.prototype.toString.call(s),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r)))}function $v(r){var s=r._init;return s(r._payload)}function Yv(r){function s(q,L){if(r){var H=q.deletions;H===null?(q.deletions=[L],q.flags|=16):H.push(L)}}function o(q,L){if(!r)return null;for(;L!==null;)s(q,L),L=L.sibling;return null}function c(q){for(var L=new Map;q!==null;)q.key!==null?L.set(q.key,q):L.set(q.index,q),q=q.sibling;return L}function h(q,L){return q=ti(q,L),q.index=0,q.sibling=null,q}function g(q,L,H){return q.index=H,r?(H=q.alternate,H!==null?(H=H.index,H<L?(q.flags|=67108866,L):H):(q.flags|=67108866,L)):(q.flags|=1048576,L)}function T(q){return r&&q.alternate===null&&(q.flags|=67108866),q}function w(q,L,H,re){return L===null||L.tag!==6?(L=Pf(H,q.mode,re),L.return=q,L):(L=h(L,H),L.return=q,L)}function I(q,L,H,re){var ge=H.type;return ge===A?te(q,L,H.props.children,re,H.key):L!==null&&(L.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===N&&$v(ge)===L.type)?(L=h(L,H.props),$l(L,H),L.return=q,L):(L=ku(H.type,H.key,H.props,null,q.mode,re),$l(L,H),L.return=q,L)}function G(q,L,H,re){return L===null||L.tag!==4||L.stateNode.containerInfo!==H.containerInfo||L.stateNode.implementation!==H.implementation?(L=jf(H,q.mode,re),L.return=q,L):(L=h(L,H.children||[]),L.return=q,L)}function te(q,L,H,re,ge){return L===null||L.tag!==7?(L=Js(H,q.mode,re,ge),L.return=q,L):(L=h(L,H),L.return=q,L)}function se(q,L,H){if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return L=Pf(""+L,q.mode,H),L.return=q,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case x:return H=ku(L.type,L.key,L.props,null,q.mode,H),$l(H,L),H.return=q,H;case C:return L=jf(L,q.mode,H),L.return=q,L;case N:var re=L._init;return L=re(L._payload),se(q,L,H)}if(st(L)||B(L))return L=Js(L,q.mode,H,null),L.return=q,L;if(typeof L.then=="function")return se(q,Ju(L),H);if(L.$$typeof===z)return se(q,zu(q,L),H);ed(q,L)}return null}function Y(q,L,H,re){var ge=L!==null?L.key:null;if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return ge!==null?null:w(q,L,""+H,re);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case x:return H.key===ge?I(q,L,H,re):null;case C:return H.key===ge?G(q,L,H,re):null;case N:return ge=H._init,H=ge(H._payload),Y(q,L,H,re)}if(st(H)||B(H))return ge!==null?null:te(q,L,H,re,null);if(typeof H.then=="function")return Y(q,L,Ju(H),re);if(H.$$typeof===z)return Y(q,L,zu(q,H),re);ed(q,H)}return null}function Q(q,L,H,re,ge){if(typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint")return q=q.get(H)||null,w(L,q,""+re,ge);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case x:return q=q.get(re.key===null?H:re.key)||null,I(L,q,re,ge);case C:return q=q.get(re.key===null?H:re.key)||null,G(L,q,re,ge);case N:var je=re._init;return re=je(re._payload),Q(q,L,H,re,ge)}if(st(re)||B(re))return q=q.get(H)||null,te(L,q,re,ge,null);if(typeof re.then=="function")return Q(q,L,H,Ju(re),ge);if(re.$$typeof===z)return Q(q,L,H,zu(L,re),ge);ed(L,re)}return null}function Se(q,L,H,re){for(var ge=null,je=null,be=L,xe=L=0,Ft=null;be!==null&&xe<H.length;xe++){be.index>xe?(Ft=be,be=null):Ft=be.sibling;var $e=Y(q,be,H[xe],re);if($e===null){be===null&&(be=Ft);break}r&&be&&$e.alternate===null&&s(q,be),L=g($e,L,xe),je===null?ge=$e:je.sibling=$e,je=$e,be=Ft}if(xe===H.length)return o(q,be),Ye&&ta(q,xe),ge;if(be===null){for(;xe<H.length;xe++)be=se(q,H[xe],re),be!==null&&(L=g(be,L,xe),je===null?ge=be:je.sibling=be,je=be);return Ye&&ta(q,xe),ge}for(be=c(be);xe<H.length;xe++)Ft=Q(be,q,xe,H[xe],re),Ft!==null&&(r&&Ft.alternate!==null&&be.delete(Ft.key===null?xe:Ft.key),L=g(Ft,L,xe),je===null?ge=Ft:je.sibling=Ft,je=Ft);return r&&be.forEach(function(ns){return s(q,ns)}),Ye&&ta(q,xe),ge}function Te(q,L,H,re){if(H==null)throw Error(i(151));for(var ge=null,je=null,be=L,xe=L=0,Ft=null,$e=H.next();be!==null&&!$e.done;xe++,$e=H.next()){be.index>xe?(Ft=be,be=null):Ft=be.sibling;var ns=Y(q,be,$e.value,re);if(ns===null){be===null&&(be=Ft);break}r&&be&&ns.alternate===null&&s(q,be),L=g(ns,L,xe),je===null?ge=ns:je.sibling=ns,je=ns,be=Ft}if($e.done)return o(q,be),Ye&&ta(q,xe),ge;if(be===null){for(;!$e.done;xe++,$e=H.next())$e=se(q,$e.value,re),$e!==null&&(L=g($e,L,xe),je===null?ge=$e:je.sibling=$e,je=$e);return Ye&&ta(q,xe),ge}for(be=c(be);!$e.done;xe++,$e=H.next())$e=Q(be,q,xe,$e.value,re),$e!==null&&(r&&$e.alternate!==null&&be.delete($e.key===null?xe:$e.key),L=g($e,L,xe),je===null?ge=$e:je.sibling=$e,je=$e);return r&&be.forEach(function(cS){return s(q,cS)}),Ye&&ta(q,xe),ge}function rt(q,L,H,re){if(typeof H=="object"&&H!==null&&H.type===A&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case x:e:{for(var ge=H.key;L!==null;){if(L.key===ge){if(ge=H.type,ge===A){if(L.tag===7){o(q,L.sibling),re=h(L,H.props.children),re.return=q,q=re;break e}}else if(L.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===N&&$v(ge)===L.type){o(q,L.sibling),re=h(L,H.props),$l(re,H),re.return=q,q=re;break e}o(q,L);break}else s(q,L);L=L.sibling}H.type===A?(re=Js(H.props.children,q.mode,re,H.key),re.return=q,q=re):(re=ku(H.type,H.key,H.props,null,q.mode,re),$l(re,H),re.return=q,q=re)}return T(q);case C:e:{for(ge=H.key;L!==null;){if(L.key===ge)if(L.tag===4&&L.stateNode.containerInfo===H.containerInfo&&L.stateNode.implementation===H.implementation){o(q,L.sibling),re=h(L,H.children||[]),re.return=q,q=re;break e}else{o(q,L);break}else s(q,L);L=L.sibling}re=jf(H,q.mode,re),re.return=q,q=re}return T(q);case N:return ge=H._init,H=ge(H._payload),rt(q,L,H,re)}if(st(H))return Se(q,L,H,re);if(B(H)){if(ge=B(H),typeof ge!="function")throw Error(i(150));return H=ge.call(H),Te(q,L,H,re)}if(typeof H.then=="function")return rt(q,L,Ju(H),re);if(H.$$typeof===z)return rt(q,L,zu(q,H),re);ed(q,H)}return typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint"?(H=""+H,L!==null&&L.tag===6?(o(q,L.sibling),re=h(L,H),re.return=q,q=re):(o(q,L),re=Pf(H,q.mode,re),re.return=q,q=re),T(q)):o(q,L)}return function(q,L,H,re){try{Gl=0;var ge=rt(q,L,H,re);return lo=null,ge}catch(be){if(be===kl||be===qu)throw be;var je=On(29,be,null,q.mode);return je.lanes=re,je.return=q,je}finally{}}}var co=Yv(!0),Kv=Yv(!1),Kn=oe(null),Cr=null;function Bi(r){var s=r.alternate;ue(Mt,Mt.current&1),ue(Kn,r),Cr===null&&(s===null||io.current!==null||s.memoizedState!==null)&&(Cr=r)}function Qv(r){if(r.tag===22){if(ue(Mt,Mt.current),ue(Kn,r),Cr===null){var s=r.alternate;s!==null&&s.memoizedState!==null&&(Cr=r)}}else qi()}function qi(){ue(Mt,Mt.current),ue(Kn,Kn.current)}function oi(r){fe(Kn),Cr===r&&(Cr=null),fe(Mt)}var Mt=oe(0);function td(r){for(var s=r;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||np(o)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function fm(r,s,o,c){s=r.memoizedState,o=o(c,s),o=o==null?s:v({},s,o),r.memoizedState=o,r.lanes===0&&(r.updateQueue.baseState=o)}var mm={enqueueSetState:function(r,s,o){r=r._reactInternals;var c=Mn(),h=Li(c);h.payload=s,o!=null&&(h.callback=o),s=Ui(r,h,c),s!==null&&(kn(s,r,c),Ll(s,r,c))},enqueueReplaceState:function(r,s,o){r=r._reactInternals;var c=Mn(),h=Li(c);h.tag=1,h.payload=s,o!=null&&(h.callback=o),s=Ui(r,h,c),s!==null&&(kn(s,r,c),Ll(s,r,c))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var o=Mn(),c=Li(o);c.tag=2,s!=null&&(c.callback=s),s=Ui(r,c,o),s!==null&&(kn(s,r,o),Ll(s,r,o))}};function Wv(r,s,o,c,h,g,T){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(c,g,T):s.prototype&&s.prototype.isPureReactComponent?!Nl(o,c)||!Nl(h,g):!0}function Xv(r,s,o,c){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,c),s.state!==r&&mm.enqueueReplaceState(s,s.state,null)}function la(r,s){var o=s;if("ref"in s){o={};for(var c in s)c!=="ref"&&(o[c]=s[c])}if(r=r.defaultProps){o===s&&(o=v({},o));for(var h in r)o[h]===void 0&&(o[h]=r[h])}return o}var nd=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)};function Zv(r){nd(r)}function Jv(r){console.error(r)}function e0(r){nd(r)}function rd(r,s){try{var o=r.onUncaughtError;o(s.value,{componentStack:s.stack})}catch(c){setTimeout(function(){throw c})}}function t0(r,s,o){try{var c=r.onCaughtError;c(o.value,{componentStack:o.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function pm(r,s,o){return o=Li(o),o.tag=3,o.payload={element:null},o.callback=function(){rd(r,s)},o}function n0(r){return r=Li(r),r.tag=3,r}function r0(r,s,o,c){var h=o.type.getDerivedStateFromError;if(typeof h=="function"){var g=c.value;r.payload=function(){return h(g)},r.callback=function(){t0(s,o,c)}}var T=o.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(r.callback=function(){t0(s,o,c),typeof h!="function"&&(Ki===null?Ki=new Set([this]):Ki.add(this));var w=c.stack;this.componentDidCatch(c.value,{componentStack:w!==null?w:""})})}function cA(r,s,o,c,h){if(o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(s=o.alternate,s!==null&&Pl(s,o,h,!0),o=Kn.current,o!==null){switch(o.tag){case 13:return Cr===null?Um():o.alternate===null&&_t===0&&(_t=3),o.flags&=-257,o.flags|=65536,o.lanes=h,c===Hf?o.flags|=16384:(s=o.updateQueue,s===null?o.updateQueue=new Set([c]):s.add(c),Bm(r,c,h)),!1;case 22:return o.flags|=65536,c===Hf?o.flags|=16384:(s=o.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([c])},o.updateQueue=s):(o=s.retryQueue,o===null?s.retryQueue=new Set([c]):o.add(c)),Bm(r,c,h)),!1}throw Error(i(435,o.tag))}return Bm(r,c,h),Um(),!1}if(Ye)return s=Kn.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=h,c!==Vf&&(r=Error(i(422),{cause:c}),Dl(Hn(r,o)))):(c!==Vf&&(s=Error(i(423),{cause:c}),Dl(Hn(s,o))),r=r.current.alternate,r.flags|=65536,h&=-h,r.lanes|=h,c=Hn(c,o),h=pm(r.stateNode,c,h),Yf(r,h),_t!==4&&(_t=2)),!1;var g=Error(i(520),{cause:c});if(g=Hn(g,o),Jl===null?Jl=[g]:Jl.push(g),_t!==4&&(_t=2),s===null)return!0;c=Hn(c,o),o=s;do{switch(o.tag){case 3:return o.flags|=65536,r=h&-h,o.lanes|=r,r=pm(o.stateNode,c,r),Yf(o,r),!1;case 1:if(s=o.type,g=o.stateNode,(o.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Ki===null||!Ki.has(g))))return o.flags|=65536,h&=-h,o.lanes|=h,h=n0(h),r0(h,r,o,c),Yf(o,h),!1}o=o.return}while(o!==null);return!1}var i0=Error(i(461)),Bt=!1;function Wt(r,s,o,c){s.child=r===null?Kv(s,null,o,c):co(s,r.child,o,c)}function s0(r,s,o,c,h){o=o.render;var g=s.ref;if("ref"in c){var T={};for(var w in c)w!=="ref"&&(T[w]=c[w])}else T=c;return sa(s),c=Zf(r,s,o,T,g,h),w=Jf(),r!==null&&!Bt?(em(r,s,h),li(r,s,h)):(Ye&&w&&Mf(s),s.flags|=1,Wt(r,s,c,h),s.child)}function a0(r,s,o,c,h){if(r===null){var g=o.type;return typeof g=="function"&&!Df(g)&&g.defaultProps===void 0&&o.compare===null?(s.tag=15,s.type=g,o0(r,s,g,c,h)):(r=ku(o.type,null,c,s,s.mode,h),r.ref=s.ref,r.return=s,s.child=r)}if(g=r.child,!xm(r,h)){var T=g.memoizedProps;if(o=o.compare,o=o!==null?o:Nl,o(T,c)&&r.ref===s.ref)return li(r,s,h)}return s.flags|=1,r=ti(g,c),r.ref=s.ref,r.return=s,s.child=r}function o0(r,s,o,c,h){if(r!==null){var g=r.memoizedProps;if(Nl(g,c)&&r.ref===s.ref)if(Bt=!1,s.pendingProps=c=g,xm(r,h))(r.flags&131072)!==0&&(Bt=!0);else return s.lanes=r.lanes,li(r,s,h)}return gm(r,s,o,c,h)}function l0(r,s,o){var c=s.pendingProps,h=c.children,g=r!==null?r.memoizedState:null;if(c.mode==="hidden"){if((s.flags&128)!==0){if(c=g!==null?g.baseLanes|o:o,r!==null){for(h=s.child=r.child,g=0;h!==null;)g=g|h.lanes|h.childLanes,h=h.sibling;s.childLanes=g&~c}else s.childLanes=0,s.child=null;return c0(r,s,c,o)}if((o&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},r!==null&&Bu(s,g!==null?g.cachePool:null),g!==null?ov(s,g):Qf(),Qv(s);else return s.lanes=s.childLanes=536870912,c0(r,s,g!==null?g.baseLanes|o:o,o)}else g!==null?(Bu(s,g.cachePool),ov(s,g),qi(),s.memoizedState=null):(r!==null&&Bu(s,null),Qf(),qi());return Wt(r,s,h,o),s.child}function c0(r,s,o,c){var h=Ff();return h=h===null?null:{parent:jt._currentValue,pool:h},s.memoizedState={baseLanes:o,cachePool:h},r!==null&&Bu(s,null),Qf(),Qv(s),r!==null&&Pl(r,s,c,!0),null}function id(r,s){var o=s.ref;if(o===null)r!==null&&r.ref!==null&&(s.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(i(284));(r===null||r.ref!==o)&&(s.flags|=4194816)}}function gm(r,s,o,c,h){return sa(s),o=Zf(r,s,o,c,void 0,h),c=Jf(),r!==null&&!Bt?(em(r,s,h),li(r,s,h)):(Ye&&c&&Mf(s),s.flags|=1,Wt(r,s,o,h),s.child)}function u0(r,s,o,c,h,g){return sa(s),s.updateQueue=null,o=cv(s,c,o,h),lv(r),c=Jf(),r!==null&&!Bt?(em(r,s,g),li(r,s,g)):(Ye&&c&&Mf(s),s.flags|=1,Wt(r,s,o,g),s.child)}function d0(r,s,o,c,h){if(sa(s),s.stateNode===null){var g=Ja,T=o.contextType;typeof T=="object"&&T!==null&&(g=sn(T)),g=new o(c,g),s.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=mm,s.stateNode=g,g._reactInternals=s,g=s.stateNode,g.props=c,g.state=s.memoizedState,g.refs={},Gf(s),T=o.contextType,g.context=typeof T=="object"&&T!==null?sn(T):Ja,g.state=s.memoizedState,T=o.getDerivedStateFromProps,typeof T=="function"&&(fm(s,o,T,c),g.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(T=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),T!==g.state&&mm.enqueueReplaceState(g,g.state,null),zl(s,c,g,h),Ul(),g.state=s.memoizedState),typeof g.componentDidMount=="function"&&(s.flags|=4194308),c=!0}else if(r===null){g=s.stateNode;var w=s.memoizedProps,I=la(o,w);g.props=I;var G=g.context,te=o.contextType;T=Ja,typeof te=="object"&&te!==null&&(T=sn(te));var se=o.getDerivedStateFromProps;te=typeof se=="function"||typeof g.getSnapshotBeforeUpdate=="function",w=s.pendingProps!==w,te||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(w||G!==T)&&Xv(s,g,c,T),Vi=!1;var Y=s.memoizedState;g.state=Y,zl(s,c,g,h),Ul(),G=s.memoizedState,w||Y!==G||Vi?(typeof se=="function"&&(fm(s,o,se,c),G=s.memoizedState),(I=Vi||Wv(s,o,I,c,Y,G,T))?(te||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(s.flags|=4194308)):(typeof g.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=G),g.props=c,g.state=G,g.context=T,c=I):(typeof g.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{g=s.stateNode,$f(r,s),T=s.memoizedProps,te=la(o,T),g.props=te,se=s.pendingProps,Y=g.context,G=o.contextType,I=Ja,typeof G=="object"&&G!==null&&(I=sn(G)),w=o.getDerivedStateFromProps,(G=typeof w=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(T!==se||Y!==I)&&Xv(s,g,c,I),Vi=!1,Y=s.memoizedState,g.state=Y,zl(s,c,g,h),Ul();var Q=s.memoizedState;T!==se||Y!==Q||Vi||r!==null&&r.dependencies!==null&&Uu(r.dependencies)?(typeof w=="function"&&(fm(s,o,w,c),Q=s.memoizedState),(te=Vi||Wv(s,o,te,c,Y,Q,I)||r!==null&&r.dependencies!==null&&Uu(r.dependencies))?(G||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(c,Q,I),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(c,Q,I)),typeof g.componentDidUpdate=="function"&&(s.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof g.componentDidUpdate!="function"||T===r.memoizedProps&&Y===r.memoizedState||(s.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||T===r.memoizedProps&&Y===r.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=Q),g.props=c,g.state=Q,g.context=I,c=te):(typeof g.componentDidUpdate!="function"||T===r.memoizedProps&&Y===r.memoizedState||(s.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||T===r.memoizedProps&&Y===r.memoizedState||(s.flags|=1024),c=!1)}return g=c,id(r,s),c=(s.flags&128)!==0,g||c?(g=s.stateNode,o=c&&typeof o.getDerivedStateFromError!="function"?null:g.render(),s.flags|=1,r!==null&&c?(s.child=co(s,r.child,null,h),s.child=co(s,null,o,h)):Wt(r,s,o,h),s.memoizedState=g.state,r=s.child):r=li(r,s,h),r}function h0(r,s,o,c){return Ol(),s.flags|=256,Wt(r,s,o,c),s.child}var ym={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function vm(r){return{baseLanes:r,cachePool:Jy()}}function _m(r,s,o){return r=r!==null?r.childLanes&~o:0,s&&(r|=Qn),r}function f0(r,s,o){var c=s.pendingProps,h=!1,g=(s.flags&128)!==0,T;if((T=g)||(T=r!==null&&r.memoizedState===null?!1:(Mt.current&2)!==0),T&&(h=!0,s.flags&=-129),T=(s.flags&32)!==0,s.flags&=-33,r===null){if(Ye){if(h?Bi(s):qi(),Ye){var w=vt,I;if(I=w){e:{for(I=w,w=Sr;I.nodeType!==8;){if(!w){w=null;break e}if(I=ar(I.nextSibling),I===null){w=null;break e}}w=I}w!==null?(s.memoizedState={dehydrated:w,treeContext:ea!==null?{id:ni,overflow:ri}:null,retryLane:536870912,hydrationErrors:null},I=On(18,null,null,0),I.stateNode=w,I.return=s,s.child=I,pn=s,vt=null,I=!0):I=!1}I||ra(s)}if(w=s.memoizedState,w!==null&&(w=w.dehydrated,w!==null))return np(w)?s.lanes=32:s.lanes=536870912,null;oi(s)}return w=c.children,c=c.fallback,h?(qi(),h=s.mode,w=sd({mode:"hidden",children:w},h),c=Js(c,h,o,null),w.return=s,c.return=s,w.sibling=c,s.child=w,h=s.child,h.memoizedState=vm(o),h.childLanes=_m(r,T,o),s.memoizedState=ym,c):(Bi(s),bm(s,w))}if(I=r.memoizedState,I!==null&&(w=I.dehydrated,w!==null)){if(g)s.flags&256?(Bi(s),s.flags&=-257,s=Em(r,s,o)):s.memoizedState!==null?(qi(),s.child=r.child,s.flags|=128,s=null):(qi(),h=c.fallback,w=s.mode,c=sd({mode:"visible",children:c.children},w),h=Js(h,w,o,null),h.flags|=2,c.return=s,h.return=s,c.sibling=h,s.child=c,co(s,r.child,null,o),c=s.child,c.memoizedState=vm(o),c.childLanes=_m(r,T,o),s.memoizedState=ym,s=h);else if(Bi(s),np(w)){if(T=w.nextSibling&&w.nextSibling.dataset,T)var G=T.dgst;T=G,c=Error(i(419)),c.stack="",c.digest=T,Dl({value:c,source:null,stack:null}),s=Em(r,s,o)}else if(Bt||Pl(r,s,o,!1),T=(o&r.childLanes)!==0,Bt||T){if(T=at,T!==null&&(c=o&-o,c=(c&42)!==0?1:Ri(c),c=(c&(T.suspendedLanes|o))!==0?0:c,c!==0&&c!==I.retryLane))throw I.retryLane=c,Za(r,c),kn(T,r,c),i0;w.data==="$?"||Um(),s=Em(r,s,o)}else w.data==="$?"?(s.flags|=192,s.child=r.child,s=null):(r=I.treeContext,vt=ar(w.nextSibling),pn=s,Ye=!0,na=null,Sr=!1,r!==null&&($n[Yn++]=ni,$n[Yn++]=ri,$n[Yn++]=ea,ni=r.id,ri=r.overflow,ea=s),s=bm(s,c.children),s.flags|=4096);return s}return h?(qi(),h=c.fallback,w=s.mode,I=r.child,G=I.sibling,c=ti(I,{mode:"hidden",children:c.children}),c.subtreeFlags=I.subtreeFlags&65011712,G!==null?h=ti(G,h):(h=Js(h,w,o,null),h.flags|=2),h.return=s,c.return=s,c.sibling=h,s.child=c,c=h,h=s.child,w=r.child.memoizedState,w===null?w=vm(o):(I=w.cachePool,I!==null?(G=jt._currentValue,I=I.parent!==G?{parent:G,pool:G}:I):I=Jy(),w={baseLanes:w.baseLanes|o,cachePool:I}),h.memoizedState=w,h.childLanes=_m(r,T,o),s.memoizedState=ym,c):(Bi(s),o=r.child,r=o.sibling,o=ti(o,{mode:"visible",children:c.children}),o.return=s,o.sibling=null,r!==null&&(T=s.deletions,T===null?(s.deletions=[r],s.flags|=16):T.push(r)),s.child=o,s.memoizedState=null,o)}function bm(r,s){return s=sd({mode:"visible",children:s},r.mode),s.return=r,r.child=s}function sd(r,s){return r=On(22,r,null,s),r.lanes=0,r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},r}function Em(r,s,o){return co(s,r.child,null,o),r=bm(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function m0(r,s,o){r.lanes|=s;var c=r.alternate;c!==null&&(c.lanes|=s),Uf(r.return,s,o)}function Tm(r,s,o,c,h){var g=r.memoizedState;g===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:o,tailMode:h}:(g.isBackwards=s,g.rendering=null,g.renderingStartTime=0,g.last=c,g.tail=o,g.tailMode=h)}function p0(r,s,o){var c=s.pendingProps,h=c.revealOrder,g=c.tail;if(Wt(r,s,c.children,o),c=Mt.current,(c&2)!==0)c=c&1|2,s.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&m0(r,o,s);else if(r.tag===19)m0(r,o,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}c&=1}switch(ue(Mt,c),h){case"forwards":for(o=s.child,h=null;o!==null;)r=o.alternate,r!==null&&td(r)===null&&(h=o),o=o.sibling;o=h,o===null?(h=s.child,s.child=null):(h=o.sibling,o.sibling=null),Tm(s,!1,h,o,g);break;case"backwards":for(o=null,h=s.child,s.child=null;h!==null;){if(r=h.alternate,r!==null&&td(r)===null){s.child=h;break}r=h.sibling,h.sibling=o,o=h,h=r}Tm(s,!0,o,null,g);break;case"together":Tm(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function li(r,s,o){if(r!==null&&(s.dependencies=r.dependencies),Yi|=s.lanes,(o&s.childLanes)===0)if(r!==null){if(Pl(r,s,o,!1),(o&s.childLanes)===0)return null}else return null;if(r!==null&&s.child!==r.child)throw Error(i(153));if(s.child!==null){for(r=s.child,o=ti(r,r.pendingProps),s.child=o,o.return=s;r.sibling!==null;)r=r.sibling,o=o.sibling=ti(r,r.pendingProps),o.return=s;o.sibling=null}return s.child}function xm(r,s){return(r.lanes&s)!==0?!0:(r=r.dependencies,!!(r!==null&&Uu(r)))}function uA(r,s,o){switch(s.tag){case 3:Ge(s,s.stateNode.containerInfo),ki(s,jt,r.memoizedState.cache),Ol();break;case 27:case 5:Ni(s);break;case 4:Ge(s,s.stateNode.containerInfo);break;case 10:ki(s,s.type,s.memoizedProps.value);break;case 13:var c=s.memoizedState;if(c!==null)return c.dehydrated!==null?(Bi(s),s.flags|=128,null):(o&s.child.childLanes)!==0?f0(r,s,o):(Bi(s),r=li(r,s,o),r!==null?r.sibling:null);Bi(s);break;case 19:var h=(r.flags&128)!==0;if(c=(o&s.childLanes)!==0,c||(Pl(r,s,o,!1),c=(o&s.childLanes)!==0),h){if(c)return p0(r,s,o);s.flags|=128}if(h=s.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),ue(Mt,Mt.current),c)break;return null;case 22:case 23:return s.lanes=0,l0(r,s,o);case 24:ki(s,jt,r.memoizedState.cache)}return li(r,s,o)}function g0(r,s,o){if(r!==null)if(r.memoizedProps!==s.pendingProps)Bt=!0;else{if(!xm(r,o)&&(s.flags&128)===0)return Bt=!1,uA(r,s,o);Bt=(r.flags&131072)!==0}else Bt=!1,Ye&&(s.flags&1048576)!==0&&$y(s,Lu,s.index);switch(s.lanes=0,s.tag){case 16:e:{r=s.pendingProps;var c=s.elementType,h=c._init;if(c=h(c._payload),s.type=c,typeof c=="function")Df(c)?(r=la(c,r),s.tag=1,s=d0(null,s,c,r,o)):(s.tag=0,s=gm(null,s,c,r,o));else{if(c!=null){if(h=c.$$typeof,h===ce){s.tag=11,s=s0(null,s,c,r,o);break e}else if(h===j){s.tag=14,s=a0(null,s,c,r,o);break e}}throw s=bt(c)||c,Error(i(306,s,""))}}return s;case 0:return gm(r,s,s.type,s.pendingProps,o);case 1:return c=s.type,h=la(c,s.pendingProps),d0(r,s,c,h,o);case 3:e:{if(Ge(s,s.stateNode.containerInfo),r===null)throw Error(i(387));c=s.pendingProps;var g=s.memoizedState;h=g.element,$f(r,s),zl(s,c,null,o);var T=s.memoizedState;if(c=T.cache,ki(s,jt,c),c!==g.cache&&zf(s,[jt],o,!0),Ul(),c=T.element,g.isDehydrated)if(g={element:c,isDehydrated:!1,cache:T.cache},s.updateQueue.baseState=g,s.memoizedState=g,s.flags&256){s=h0(r,s,c,o);break e}else if(c!==h){h=Hn(Error(i(424)),s),Dl(h),s=h0(r,s,c,o);break e}else{switch(r=s.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(vt=ar(r.firstChild),pn=s,Ye=!0,na=null,Sr=!0,o=Kv(s,null,c,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(Ol(),c===h){s=li(r,s,o);break e}Wt(r,s,c,o)}s=s.child}return s;case 26:return id(r,s),r===null?(o=b_(s.type,null,s.pendingProps,null))?s.memoizedState=o:Ye||(o=s.type,r=s.pendingProps,c=_d(W.current).createElement(o),c[Ot]=s,c[At]=r,Zt(c,o,r),Et(c),s.stateNode=c):s.memoizedState=b_(s.type,r.memoizedProps,s.pendingProps,r.memoizedState),null;case 27:return Ni(s),r===null&&Ye&&(c=s.stateNode=y_(s.type,s.pendingProps,W.current),pn=s,Sr=!0,h=vt,Xi(s.type)?(rp=h,vt=ar(c.firstChild)):vt=h),Wt(r,s,s.pendingProps.children,o),id(r,s),r===null&&(s.flags|=4194304),s.child;case 5:return r===null&&Ye&&((h=c=vt)&&(c=LA(c,s.type,s.pendingProps,Sr),c!==null?(s.stateNode=c,pn=s,vt=ar(c.firstChild),Sr=!1,h=!0):h=!1),h||ra(s)),Ni(s),h=s.type,g=s.pendingProps,T=r!==null?r.memoizedProps:null,c=g.children,Jm(h,g)?c=null:T!==null&&Jm(h,T)&&(s.flags|=32),s.memoizedState!==null&&(h=Zf(r,s,nA,null,null,o),lc._currentValue=h),id(r,s),Wt(r,s,c,o),s.child;case 6:return r===null&&Ye&&((r=o=vt)&&(o=UA(o,s.pendingProps,Sr),o!==null?(s.stateNode=o,pn=s,vt=null,r=!0):r=!1),r||ra(s)),null;case 13:return f0(r,s,o);case 4:return Ge(s,s.stateNode.containerInfo),c=s.pendingProps,r===null?s.child=co(s,null,c,o):Wt(r,s,c,o),s.child;case 11:return s0(r,s,s.type,s.pendingProps,o);case 7:return Wt(r,s,s.pendingProps,o),s.child;case 8:return Wt(r,s,s.pendingProps.children,o),s.child;case 12:return Wt(r,s,s.pendingProps.children,o),s.child;case 10:return c=s.pendingProps,ki(s,s.type,c.value),Wt(r,s,c.children,o),s.child;case 9:return h=s.type._context,c=s.pendingProps.children,sa(s),h=sn(h),c=c(h),s.flags|=1,Wt(r,s,c,o),s.child;case 14:return a0(r,s,s.type,s.pendingProps,o);case 15:return o0(r,s,s.type,s.pendingProps,o);case 19:return p0(r,s,o);case 31:return c=s.pendingProps,o=s.mode,c={mode:c.mode,children:c.children},r===null?(o=sd(c,o),o.ref=s.ref,s.child=o,o.return=s,s=o):(o=ti(r.child,c),o.ref=s.ref,s.child=o,o.return=s,s=o),s;case 22:return l0(r,s,o);case 24:return sa(s),c=sn(jt),r===null?(h=Ff(),h===null&&(h=at,g=Bf(),h.pooledCache=g,g.refCount++,g!==null&&(h.pooledCacheLanes|=o),h=g),s.memoizedState={parent:c,cache:h},Gf(s),ki(s,jt,h)):((r.lanes&o)!==0&&($f(r,s),zl(s,null,null,o),Ul()),h=r.memoizedState,g=s.memoizedState,h.parent!==c?(h={parent:c,cache:c},s.memoizedState=h,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=h),ki(s,jt,c)):(c=g.cache,ki(s,jt,c),c!==h.cache&&zf(s,[jt],o,!0))),Wt(r,s,s.pendingProps.children,o),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function ci(r){r.flags|=4}function y0(r,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!A_(s)){if(s=Kn.current,s!==null&&((qe&4194048)===qe?Cr!==null:(qe&62914560)!==qe&&(qe&536870912)===0||s!==Cr))throw Vl=Hf,ev;r.flags|=8192}}function ad(r,s){s!==null&&(r.flags|=4),r.flags&16384&&(s=r.tag!==22?ul():536870912,r.lanes|=s,mo|=s)}function Yl(r,s){if(!Ye)switch(r.tailMode){case"hidden":s=r.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?r.tail=null:o.sibling=null;break;case"collapsed":o=r.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:c.sibling=null}}function pt(r){var s=r.alternate!==null&&r.alternate.child===r.child,o=0,c=0;if(s)for(var h=r.child;h!==null;)o|=h.lanes|h.childLanes,c|=h.subtreeFlags&65011712,c|=h.flags&65011712,h.return=r,h=h.sibling;else for(h=r.child;h!==null;)o|=h.lanes|h.childLanes,c|=h.subtreeFlags,c|=h.flags,h.return=r,h=h.sibling;return r.subtreeFlags|=c,r.childLanes=o,s}function dA(r,s,o){var c=s.pendingProps;switch(kf(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pt(s),null;case 1:return pt(s),null;case 3:return o=s.stateNode,c=null,r!==null&&(c=r.memoizedState.cache),s.memoizedState.cache!==c&&(s.flags|=2048),si(jt),mr(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(r===null||r.child===null)&&(Il(s)?ci(s):r===null||r.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Qy())),pt(s),null;case 26:return o=s.memoizedState,r===null?(ci(s),o!==null?(pt(s),y0(s,o)):(pt(s),s.flags&=-16777217)):o?o!==r.memoizedState?(ci(s),pt(s),y0(s,o)):(pt(s),s.flags&=-16777217):(r.memoizedProps!==c&&ci(s),pt(s),s.flags&=-16777217),null;case 27:qr(s),o=W.current;var h=s.type;if(r!==null&&s.stateNode!=null)r.memoizedProps!==c&&ci(s);else{if(!c){if(s.stateNode===null)throw Error(i(166));return pt(s),null}r=ee.current,Il(s)?Yy(s):(r=y_(h,c,o),s.stateNode=r,ci(s))}return pt(s),null;case 5:if(qr(s),o=s.type,r!==null&&s.stateNode!=null)r.memoizedProps!==c&&ci(s);else{if(!c){if(s.stateNode===null)throw Error(i(166));return pt(s),null}if(r=ee.current,Il(s))Yy(s);else{switch(h=_d(W.current),r){case 1:r=h.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:r=h.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":r=h.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":r=h.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":r=h.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof c.is=="string"?h.createElement("select",{is:c.is}):h.createElement("select"),c.multiple?r.multiple=!0:c.size&&(r.size=c.size);break;default:r=typeof c.is=="string"?h.createElement(o,{is:c.is}):h.createElement(o)}}r[Ot]=s,r[At]=c;e:for(h=s.child;h!==null;){if(h.tag===5||h.tag===6)r.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===s)break e;for(;h.sibling===null;){if(h.return===null||h.return===s)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}s.stateNode=r;e:switch(Zt(r,o,c),o){case"button":case"input":case"select":case"textarea":r=!!c.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&ci(s)}}return pt(s),s.flags&=-16777217,null;case 6:if(r&&s.stateNode!=null)r.memoizedProps!==c&&ci(s);else{if(typeof c!="string"&&s.stateNode===null)throw Error(i(166));if(r=W.current,Il(s)){if(r=s.stateNode,o=s.memoizedProps,c=null,h=pn,h!==null)switch(h.tag){case 27:case 5:c=h.memoizedProps}r[Ot]=s,r=!!(r.nodeValue===o||c!==null&&c.suppressHydrationWarning===!0||u_(r.nodeValue,o)),r||ra(s)}else r=_d(r).createTextNode(c),r[Ot]=s,s.stateNode=r}return pt(s),null;case 13:if(c=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(h=Il(s),c!==null&&c.dehydrated!==null){if(r===null){if(!h)throw Error(i(318));if(h=s.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(i(317));h[Ot]=s}else Ol(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;pt(s),h=!1}else h=Qy(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=h),h=!0;if(!h)return s.flags&256?(oi(s),s):(oi(s),null)}if(oi(s),(s.flags&128)!==0)return s.lanes=o,s;if(o=c!==null,r=r!==null&&r.memoizedState!==null,o){c=s.child,h=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(h=c.alternate.memoizedState.cachePool.pool);var g=null;c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(g=c.memoizedState.cachePool.pool),g!==h&&(c.flags|=2048)}return o!==r&&o&&(s.child.flags|=8192),ad(s,s.updateQueue),pt(s),null;case 4:return mr(),r===null&&Km(s.stateNode.containerInfo),pt(s),null;case 10:return si(s.type),pt(s),null;case 19:if(fe(Mt),h=s.memoizedState,h===null)return pt(s),null;if(c=(s.flags&128)!==0,g=h.rendering,g===null)if(c)Yl(h,!1);else{if(_t!==0||r!==null&&(r.flags&128)!==0)for(r=s.child;r!==null;){if(g=td(r),g!==null){for(s.flags|=128,Yl(h,!1),r=g.updateQueue,s.updateQueue=r,ad(s,r),s.subtreeFlags=0,r=o,o=s.child;o!==null;)Gy(o,r),o=o.sibling;return ue(Mt,Mt.current&1|2),s.child}r=r.sibling}h.tail!==null&&Ln()>cd&&(s.flags|=128,c=!0,Yl(h,!1),s.lanes=4194304)}else{if(!c)if(r=td(g),r!==null){if(s.flags|=128,c=!0,r=r.updateQueue,s.updateQueue=r,ad(s,r),Yl(h,!0),h.tail===null&&h.tailMode==="hidden"&&!g.alternate&&!Ye)return pt(s),null}else 2*Ln()-h.renderingStartTime>cd&&o!==536870912&&(s.flags|=128,c=!0,Yl(h,!1),s.lanes=4194304);h.isBackwards?(g.sibling=s.child,s.child=g):(r=h.last,r!==null?r.sibling=g:s.child=g,h.last=g)}return h.tail!==null?(s=h.tail,h.rendering=s,h.tail=s.sibling,h.renderingStartTime=Ln(),s.sibling=null,r=Mt.current,ue(Mt,c?r&1|2:r&1),s):(pt(s),null);case 22:case 23:return oi(s),Wf(),c=s.memoizedState!==null,r!==null?r.memoizedState!==null!==c&&(s.flags|=8192):c&&(s.flags|=8192),c?(o&536870912)!==0&&(s.flags&128)===0&&(pt(s),s.subtreeFlags&6&&(s.flags|=8192)):pt(s),o=s.updateQueue,o!==null&&ad(s,o.retryQueue),o=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),c=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),c!==o&&(s.flags|=2048),r!==null&&fe(aa),null;case 24:return o=null,r!==null&&(o=r.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),si(jt),pt(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function hA(r,s){switch(kf(s),s.tag){case 1:return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return si(jt),mr(),r=s.flags,(r&65536)!==0&&(r&128)===0?(s.flags=r&-65537|128,s):null;case 26:case 27:case 5:return qr(s),null;case 13:if(oi(s),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(i(340));Ol()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return fe(Mt),null;case 4:return mr(),null;case 10:return si(s.type),null;case 22:case 23:return oi(s),Wf(),r!==null&&fe(aa),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 24:return si(jt),null;case 25:return null;default:return null}}function v0(r,s){switch(kf(s),s.tag){case 3:si(jt),mr();break;case 26:case 27:case 5:qr(s);break;case 4:mr();break;case 13:oi(s);break;case 19:fe(Mt);break;case 10:si(s.type);break;case 22:case 23:oi(s),Wf(),r!==null&&fe(aa);break;case 24:si(jt)}}function Kl(r,s){try{var o=s.updateQueue,c=o!==null?o.lastEffect:null;if(c!==null){var h=c.next;o=h;do{if((o.tag&r)===r){c=void 0;var g=o.create,T=o.inst;c=g(),T.destroy=c}o=o.next}while(o!==h)}}catch(w){it(s,s.return,w)}}function Fi(r,s,o){try{var c=s.updateQueue,h=c!==null?c.lastEffect:null;if(h!==null){var g=h.next;c=g;do{if((c.tag&r)===r){var T=c.inst,w=T.destroy;if(w!==void 0){T.destroy=void 0,h=s;var I=o,G=w;try{G()}catch(te){it(h,I,te)}}}c=c.next}while(c!==g)}}catch(te){it(s,s.return,te)}}function _0(r){var s=r.updateQueue;if(s!==null){var o=r.stateNode;try{av(s,o)}catch(c){it(r,r.return,c)}}}function b0(r,s,o){o.props=la(r.type,r.memoizedProps),o.state=r.memoizedState;try{o.componentWillUnmount()}catch(c){it(r,s,c)}}function Ql(r,s){try{var o=r.ref;if(o!==null){switch(r.tag){case 26:case 27:case 5:var c=r.stateNode;break;case 30:c=r.stateNode;break;default:c=r.stateNode}typeof o=="function"?r.refCleanup=o(c):o.current=c}}catch(h){it(r,s,h)}}function Nr(r,s){var o=r.ref,c=r.refCleanup;if(o!==null)if(typeof c=="function")try{c()}catch(h){it(r,s,h)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(h){it(r,s,h)}else o.current=null}function E0(r){var s=r.type,o=r.memoizedProps,c=r.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":o.autoFocus&&c.focus();break e;case"img":o.src?c.src=o.src:o.srcSet&&(c.srcset=o.srcSet)}}catch(h){it(r,r.return,h)}}function wm(r,s,o){try{var c=r.stateNode;PA(c,r.type,o,s),c[At]=s}catch(h){it(r,r.return,h)}}function T0(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&Xi(r.type)||r.tag===4}function Am(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||T0(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&Xi(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Sm(r,s,o){var c=r.tag;if(c===5||c===6)r=r.stateNode,s?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(r,s):(s=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,s.appendChild(r),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=vd));else if(c!==4&&(c===27&&Xi(r.type)&&(o=r.stateNode,s=null),r=r.child,r!==null))for(Sm(r,s,o),r=r.sibling;r!==null;)Sm(r,s,o),r=r.sibling}function od(r,s,o){var c=r.tag;if(c===5||c===6)r=r.stateNode,s?o.insertBefore(r,s):o.appendChild(r);else if(c!==4&&(c===27&&Xi(r.type)&&(o=r.stateNode),r=r.child,r!==null))for(od(r,s,o),r=r.sibling;r!==null;)od(r,s,o),r=r.sibling}function x0(r){var s=r.stateNode,o=r.memoizedProps;try{for(var c=r.type,h=s.attributes;h.length;)s.removeAttributeNode(h[0]);Zt(s,c,o),s[Ot]=r,s[At]=o}catch(g){it(r,r.return,g)}}var ui=!1,xt=!1,Cm=!1,w0=typeof WeakSet=="function"?WeakSet:Set,qt=null;function fA(r,s){if(r=r.containerInfo,Xm=Ad,r=My(r),Af(r)){if("selectionStart"in r)var o={start:r.selectionStart,end:r.selectionEnd};else e:{o=(o=r.ownerDocument)&&o.defaultView||window;var c=o.getSelection&&o.getSelection();if(c&&c.rangeCount!==0){o=c.anchorNode;var h=c.anchorOffset,g=c.focusNode;c=c.focusOffset;try{o.nodeType,g.nodeType}catch{o=null;break e}var T=0,w=-1,I=-1,G=0,te=0,se=r,Y=null;t:for(;;){for(var Q;se!==o||h!==0&&se.nodeType!==3||(w=T+h),se!==g||c!==0&&se.nodeType!==3||(I=T+c),se.nodeType===3&&(T+=se.nodeValue.length),(Q=se.firstChild)!==null;)Y=se,se=Q;for(;;){if(se===r)break t;if(Y===o&&++G===h&&(w=T),Y===g&&++te===c&&(I=T),(Q=se.nextSibling)!==null)break;se=Y,Y=se.parentNode}se=Q}o=w===-1||I===-1?null:{start:w,end:I}}else o=null}o=o||{start:0,end:0}}else o=null;for(Zm={focusedElem:r,selectionRange:o},Ad=!1,qt=s;qt!==null;)if(s=qt,r=s.child,(s.subtreeFlags&1024)!==0&&r!==null)r.return=s,qt=r;else for(;qt!==null;){switch(s=qt,g=s.alternate,r=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((r&1024)!==0&&g!==null){r=void 0,o=s,h=g.memoizedProps,g=g.memoizedState,c=o.stateNode;try{var Se=la(o.type,h,o.elementType===o.type);r=c.getSnapshotBeforeUpdate(Se,g),c.__reactInternalSnapshotBeforeUpdate=r}catch(Te){it(o,o.return,Te)}}break;case 3:if((r&1024)!==0){if(r=s.stateNode.containerInfo,o=r.nodeType,o===9)tp(r);else if(o===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":tp(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=s.sibling,r!==null){r.return=s.return,qt=r;break}qt=s.return}}function A0(r,s,o){var c=o.flags;switch(o.tag){case 0:case 11:case 15:Hi(r,o),c&4&&Kl(5,o);break;case 1:if(Hi(r,o),c&4)if(r=o.stateNode,s===null)try{r.componentDidMount()}catch(T){it(o,o.return,T)}else{var h=la(o.type,s.memoizedProps);s=s.memoizedState;try{r.componentDidUpdate(h,s,r.__reactInternalSnapshotBeforeUpdate)}catch(T){it(o,o.return,T)}}c&64&&_0(o),c&512&&Ql(o,o.return);break;case 3:if(Hi(r,o),c&64&&(r=o.updateQueue,r!==null)){if(s=null,o.child!==null)switch(o.child.tag){case 27:case 5:s=o.child.stateNode;break;case 1:s=o.child.stateNode}try{av(r,s)}catch(T){it(o,o.return,T)}}break;case 27:s===null&&c&4&&x0(o);case 26:case 5:Hi(r,o),s===null&&c&4&&E0(o),c&512&&Ql(o,o.return);break;case 12:Hi(r,o);break;case 13:Hi(r,o),c&4&&N0(r,o),c&64&&(r=o.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(o=TA.bind(null,o),zA(r,o))));break;case 22:if(c=o.memoizedState!==null||ui,!c){s=s!==null&&s.memoizedState!==null||xt,h=ui;var g=xt;ui=c,(xt=s)&&!g?Gi(r,o,(o.subtreeFlags&8772)!==0):Hi(r,o),ui=h,xt=g}break;case 30:break;default:Hi(r,o)}}function S0(r){var s=r.alternate;s!==null&&(r.alternate=null,S0(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&Di(s)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var dt=null,En=!1;function di(r,s,o){for(o=o.child;o!==null;)C0(r,s,o),o=o.sibling}function C0(r,s,o){if(We&&typeof We.onCommitFiberUnmount=="function")try{We.onCommitFiberUnmount(yt,o)}catch{}switch(o.tag){case 26:xt||Nr(o,s),di(r,s,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:xt||Nr(o,s);var c=dt,h=En;Xi(o.type)&&(dt=o.stateNode,En=!1),di(r,s,o),ic(o.stateNode),dt=c,En=h;break;case 5:xt||Nr(o,s);case 6:if(c=dt,h=En,dt=null,di(r,s,o),dt=c,En=h,dt!==null)if(En)try{(dt.nodeType===9?dt.body:dt.nodeName==="HTML"?dt.ownerDocument.body:dt).removeChild(o.stateNode)}catch(g){it(o,s,g)}else try{dt.removeChild(o.stateNode)}catch(g){it(o,s,g)}break;case 18:dt!==null&&(En?(r=dt,p_(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,o.stateNode),hc(r)):p_(dt,o.stateNode));break;case 4:c=dt,h=En,dt=o.stateNode.containerInfo,En=!0,di(r,s,o),dt=c,En=h;break;case 0:case 11:case 14:case 15:xt||Fi(2,o,s),xt||Fi(4,o,s),di(r,s,o);break;case 1:xt||(Nr(o,s),c=o.stateNode,typeof c.componentWillUnmount=="function"&&b0(o,s,c)),di(r,s,o);break;case 21:di(r,s,o);break;case 22:xt=(c=xt)||o.memoizedState!==null,di(r,s,o),xt=c;break;default:di(r,s,o)}}function N0(r,s){if(s.memoizedState===null&&(r=s.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{hc(r)}catch(o){it(s,s.return,o)}}function mA(r){switch(r.tag){case 13:case 19:var s=r.stateNode;return s===null&&(s=r.stateNode=new w0),s;case 22:return r=r.stateNode,s=r._retryCache,s===null&&(s=r._retryCache=new w0),s;default:throw Error(i(435,r.tag))}}function Nm(r,s){var o=mA(r);s.forEach(function(c){var h=xA.bind(null,r,c);o.has(c)||(o.add(c),c.then(h,h))})}function Dn(r,s){var o=s.deletions;if(o!==null)for(var c=0;c<o.length;c++){var h=o[c],g=r,T=s,w=T;e:for(;w!==null;){switch(w.tag){case 27:if(Xi(w.type)){dt=w.stateNode,En=!1;break e}break;case 5:dt=w.stateNode,En=!1;break e;case 3:case 4:dt=w.stateNode.containerInfo,En=!0;break e}w=w.return}if(dt===null)throw Error(i(160));C0(g,T,h),dt=null,En=!1,g=h.alternate,g!==null&&(g.return=null),h.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)R0(s,r),s=s.sibling}var sr=null;function R0(r,s){var o=r.alternate,c=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:Dn(s,r),Pn(r),c&4&&(Fi(3,r,r.return),Kl(3,r),Fi(5,r,r.return));break;case 1:Dn(s,r),Pn(r),c&512&&(xt||o===null||Nr(o,o.return)),c&64&&ui&&(r=r.updateQueue,r!==null&&(c=r.callbacks,c!==null&&(o=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=o===null?c:o.concat(c))));break;case 26:var h=sr;if(Dn(s,r),Pn(r),c&512&&(xt||o===null||Nr(o,o.return)),c&4){var g=o!==null?o.memoizedState:null;if(c=r.memoizedState,o===null)if(c===null)if(r.stateNode===null){e:{c=r.type,o=r.memoizedProps,h=h.ownerDocument||h;t:switch(c){case"title":g=h.getElementsByTagName("title")[0],(!g||g[Vs]||g[Ot]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=h.createElement(c),h.head.insertBefore(g,h.querySelector("head > title"))),Zt(g,c,o),g[Ot]=r,Et(g),c=g;break e;case"link":var T=x_("link","href",h).get(c+(o.href||""));if(T){for(var w=0;w<T.length;w++)if(g=T[w],g.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&g.getAttribute("rel")===(o.rel==null?null:o.rel)&&g.getAttribute("title")===(o.title==null?null:o.title)&&g.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){T.splice(w,1);break t}}g=h.createElement(c),Zt(g,c,o),h.head.appendChild(g);break;case"meta":if(T=x_("meta","content",h).get(c+(o.content||""))){for(w=0;w<T.length;w++)if(g=T[w],g.getAttribute("content")===(o.content==null?null:""+o.content)&&g.getAttribute("name")===(o.name==null?null:o.name)&&g.getAttribute("property")===(o.property==null?null:o.property)&&g.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&g.getAttribute("charset")===(o.charSet==null?null:o.charSet)){T.splice(w,1);break t}}g=h.createElement(c),Zt(g,c,o),h.head.appendChild(g);break;default:throw Error(i(468,c))}g[Ot]=r,Et(g),c=g}r.stateNode=c}else w_(h,r.type,r.stateNode);else r.stateNode=T_(h,c,r.memoizedProps);else g!==c?(g===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):g.count--,c===null?w_(h,r.type,r.stateNode):T_(h,c,r.memoizedProps)):c===null&&r.stateNode!==null&&wm(r,r.memoizedProps,o.memoizedProps)}break;case 27:Dn(s,r),Pn(r),c&512&&(xt||o===null||Nr(o,o.return)),o!==null&&c&4&&wm(r,r.memoizedProps,o.memoizedProps);break;case 5:if(Dn(s,r),Pn(r),c&512&&(xt||o===null||Nr(o,o.return)),r.flags&32){h=r.stateNode;try{zn(h,"")}catch(Q){it(r,r.return,Q)}}c&4&&r.stateNode!=null&&(h=r.memoizedProps,wm(r,h,o!==null?o.memoizedProps:h)),c&1024&&(Cm=!0);break;case 6:if(Dn(s,r),Pn(r),c&4){if(r.stateNode===null)throw Error(i(162));c=r.memoizedProps,o=r.stateNode;try{o.nodeValue=c}catch(Q){it(r,r.return,Q)}}break;case 3:if(Td=null,h=sr,sr=bd(s.containerInfo),Dn(s,r),sr=h,Pn(r),c&4&&o!==null&&o.memoizedState.isDehydrated)try{hc(s.containerInfo)}catch(Q){it(r,r.return,Q)}Cm&&(Cm=!1,I0(r));break;case 4:c=sr,sr=bd(r.stateNode.containerInfo),Dn(s,r),Pn(r),sr=c;break;case 12:Dn(s,r),Pn(r);break;case 13:Dn(s,r),Pn(r),r.child.flags&8192&&r.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(jm=Ln()),c&4&&(c=r.updateQueue,c!==null&&(r.updateQueue=null,Nm(r,c)));break;case 22:h=r.memoizedState!==null;var I=o!==null&&o.memoizedState!==null,G=ui,te=xt;if(ui=G||h,xt=te||I,Dn(s,r),xt=te,ui=G,Pn(r),c&8192)e:for(s=r.stateNode,s._visibility=h?s._visibility&-2:s._visibility|1,h&&(o===null||I||ui||xt||ca(r)),o=null,s=r;;){if(s.tag===5||s.tag===26){if(o===null){I=o=s;try{if(g=I.stateNode,h)T=g.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{w=I.stateNode;var se=I.memoizedProps.style,Y=se!=null&&se.hasOwnProperty("display")?se.display:null;w.style.display=Y==null||typeof Y=="boolean"?"":(""+Y).trim()}}catch(Q){it(I,I.return,Q)}}}else if(s.tag===6){if(o===null){I=s;try{I.stateNode.nodeValue=h?"":I.memoizedProps}catch(Q){it(I,I.return,Q)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===r)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break e;for(;s.sibling===null;){if(s.return===null||s.return===r)break e;o===s&&(o=null),s=s.return}o===s&&(o=null),s.sibling.return=s.return,s=s.sibling}c&4&&(c=r.updateQueue,c!==null&&(o=c.retryQueue,o!==null&&(c.retryQueue=null,Nm(r,o))));break;case 19:Dn(s,r),Pn(r),c&4&&(c=r.updateQueue,c!==null&&(r.updateQueue=null,Nm(r,c)));break;case 30:break;case 21:break;default:Dn(s,r),Pn(r)}}function Pn(r){var s=r.flags;if(s&2){try{for(var o,c=r.return;c!==null;){if(T0(c)){o=c;break}c=c.return}if(o==null)throw Error(i(160));switch(o.tag){case 27:var h=o.stateNode,g=Am(r);od(r,g,h);break;case 5:var T=o.stateNode;o.flags&32&&(zn(T,""),o.flags&=-33);var w=Am(r);od(r,w,T);break;case 3:case 4:var I=o.stateNode.containerInfo,G=Am(r);Sm(r,G,I);break;default:throw Error(i(161))}}catch(te){it(r,r.return,te)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function I0(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var s=r;I0(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),r=r.sibling}}function Hi(r,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)A0(r,s.alternate,s),s=s.sibling}function ca(r){for(r=r.child;r!==null;){var s=r;switch(s.tag){case 0:case 11:case 14:case 15:Fi(4,s,s.return),ca(s);break;case 1:Nr(s,s.return);var o=s.stateNode;typeof o.componentWillUnmount=="function"&&b0(s,s.return,o),ca(s);break;case 27:ic(s.stateNode);case 26:case 5:Nr(s,s.return),ca(s);break;case 22:s.memoizedState===null&&ca(s);break;case 30:ca(s);break;default:ca(s)}r=r.sibling}}function Gi(r,s,o){for(o=o&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var c=s.alternate,h=r,g=s,T=g.flags;switch(g.tag){case 0:case 11:case 15:Gi(h,g,o),Kl(4,g);break;case 1:if(Gi(h,g,o),c=g,h=c.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(G){it(c,c.return,G)}if(c=g,h=c.updateQueue,h!==null){var w=c.stateNode;try{var I=h.shared.hiddenCallbacks;if(I!==null)for(h.shared.hiddenCallbacks=null,h=0;h<I.length;h++)sv(I[h],w)}catch(G){it(c,c.return,G)}}o&&T&64&&_0(g),Ql(g,g.return);break;case 27:x0(g);case 26:case 5:Gi(h,g,o),o&&c===null&&T&4&&E0(g),Ql(g,g.return);break;case 12:Gi(h,g,o);break;case 13:Gi(h,g,o),o&&T&4&&N0(h,g);break;case 22:g.memoizedState===null&&Gi(h,g,o),Ql(g,g.return);break;case 30:break;default:Gi(h,g,o)}s=s.sibling}}function Rm(r,s){var o=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),r=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(r=s.memoizedState.cachePool.pool),r!==o&&(r!=null&&r.refCount++,o!=null&&jl(o))}function Im(r,s){r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&jl(r))}function Rr(r,s,o,c){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)O0(r,s,o,c),s=s.sibling}function O0(r,s,o,c){var h=s.flags;switch(s.tag){case 0:case 11:case 15:Rr(r,s,o,c),h&2048&&Kl(9,s);break;case 1:Rr(r,s,o,c);break;case 3:Rr(r,s,o,c),h&2048&&(r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&jl(r)));break;case 12:if(h&2048){Rr(r,s,o,c),r=s.stateNode;try{var g=s.memoizedProps,T=g.id,w=g.onPostCommit;typeof w=="function"&&w(T,s.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(I){it(s,s.return,I)}}else Rr(r,s,o,c);break;case 13:Rr(r,s,o,c);break;case 23:break;case 22:g=s.stateNode,T=s.alternate,s.memoizedState!==null?g._visibility&2?Rr(r,s,o,c):Wl(r,s):g._visibility&2?Rr(r,s,o,c):(g._visibility|=2,uo(r,s,o,c,(s.subtreeFlags&10256)!==0)),h&2048&&Rm(T,s);break;case 24:Rr(r,s,o,c),h&2048&&Im(s.alternate,s);break;default:Rr(r,s,o,c)}}function uo(r,s,o,c,h){for(h=h&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var g=r,T=s,w=o,I=c,G=T.flags;switch(T.tag){case 0:case 11:case 15:uo(g,T,w,I,h),Kl(8,T);break;case 23:break;case 22:var te=T.stateNode;T.memoizedState!==null?te._visibility&2?uo(g,T,w,I,h):Wl(g,T):(te._visibility|=2,uo(g,T,w,I,h)),h&&G&2048&&Rm(T.alternate,T);break;case 24:uo(g,T,w,I,h),h&&G&2048&&Im(T.alternate,T);break;default:uo(g,T,w,I,h)}s=s.sibling}}function Wl(r,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var o=r,c=s,h=c.flags;switch(c.tag){case 22:Wl(o,c),h&2048&&Rm(c.alternate,c);break;case 24:Wl(o,c),h&2048&&Im(c.alternate,c);break;default:Wl(o,c)}s=s.sibling}}var Xl=8192;function ho(r){if(r.subtreeFlags&Xl)for(r=r.child;r!==null;)D0(r),r=r.sibling}function D0(r){switch(r.tag){case 26:ho(r),r.flags&Xl&&r.memoizedState!==null&&JA(sr,r.memoizedState,r.memoizedProps);break;case 5:ho(r);break;case 3:case 4:var s=sr;sr=bd(r.stateNode.containerInfo),ho(r),sr=s;break;case 22:r.memoizedState===null&&(s=r.alternate,s!==null&&s.memoizedState!==null?(s=Xl,Xl=16777216,ho(r),Xl=s):ho(r));break;default:ho(r)}}function P0(r){var s=r.alternate;if(s!==null&&(r=s.child,r!==null)){s.child=null;do s=r.sibling,r.sibling=null,r=s;while(r!==null)}}function Zl(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var c=s[o];qt=c,M0(c,r)}P0(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)j0(r),r=r.sibling}function j0(r){switch(r.tag){case 0:case 11:case 15:Zl(r),r.flags&2048&&Fi(9,r,r.return);break;case 3:Zl(r);break;case 12:Zl(r);break;case 22:var s=r.stateNode;r.memoizedState!==null&&s._visibility&2&&(r.return===null||r.return.tag!==13)?(s._visibility&=-3,ld(r)):Zl(r);break;default:Zl(r)}}function ld(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var c=s[o];qt=c,M0(c,r)}P0(r)}for(r=r.child;r!==null;){switch(s=r,s.tag){case 0:case 11:case 15:Fi(8,s,s.return),ld(s);break;case 22:o=s.stateNode,o._visibility&2&&(o._visibility&=-3,ld(s));break;default:ld(s)}r=r.sibling}}function M0(r,s){for(;qt!==null;){var o=qt;switch(o.tag){case 0:case 11:case 15:Fi(8,o,s);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var c=o.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:jl(o.memoizedState.cache)}if(c=o.child,c!==null)c.return=o,qt=c;else e:for(o=r;qt!==null;){c=qt;var h=c.sibling,g=c.return;if(S0(c),c===o){qt=null;break e}if(h!==null){h.return=g,qt=h;break e}qt=g}}}var pA={getCacheForType:function(r){var s=sn(jt),o=s.data.get(r);return o===void 0&&(o=r(),s.data.set(r,o)),o}},gA=typeof WeakMap=="function"?WeakMap:Map,Xe=0,at=null,ke=null,qe=0,Ze=0,jn=null,$i=!1,fo=!1,Om=!1,hi=0,_t=0,Yi=0,ua=0,Dm=0,Qn=0,mo=0,Jl=null,Tn=null,Pm=!1,jm=0,cd=1/0,ud=null,Ki=null,Xt=0,Qi=null,po=null,go=0,Mm=0,km=null,k0=null,ec=0,Vm=null;function Mn(){if((Xe&2)!==0&&qe!==0)return qe&-qe;if(J.T!==null){var r=no;return r!==0?r:Hm()}return Ii()}function V0(){Qn===0&&(Qn=(qe&536870912)===0||Ye?cl():536870912);var r=Kn.current;return r!==null&&(r.flags|=32),Qn}function kn(r,s,o){(r===at&&(Ze===2||Ze===9)||r.cancelPendingCommit!==null)&&(yo(r,0),Wi(r,qe,Qn,!1)),Hr(r,o),((Xe&2)===0||r!==at)&&(r===at&&((Xe&2)===0&&(ua|=o),_t===4&&Wi(r,qe,Qn,!1)),Ir(r))}function L0(r,s,o){if((Xe&6)!==0)throw Error(i(327));var c=!o&&(s&124)===0&&(s&r.expiredLanes)===0||ks(r,s),h=c?_A(r,s):zm(r,s,!0),g=c;do{if(h===0){fo&&!c&&Wi(r,s,0,!1);break}else{if(o=r.current.alternate,g&&!yA(o)){h=zm(r,s,!1),g=!1;continue}if(h===2){if(g=s,r.errorRecoveryDisabledLanes&g)var T=0;else T=r.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){s=T;e:{var w=r;h=Jl;var I=w.current.memoizedState.isDehydrated;if(I&&(yo(w,T).flags|=256),T=zm(w,T,!1),T!==2){if(Om&&!I){w.errorRecoveryDisabledLanes|=g,ua|=g,h=4;break e}g=Tn,Tn=h,g!==null&&(Tn===null?Tn=g:Tn.push.apply(Tn,g))}h=T}if(g=!1,h!==2)continue}}if(h===1){yo(r,0),Wi(r,s,0,!0);break}e:{switch(c=r,g=h,g){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:Wi(c,s,Qn,!$i);break e;case 2:Tn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(h=jm+300-Ln(),10<h)){if(Wi(c,s,Qn,!$i),Pa(c,0,!0)!==0)break e;c.timeoutHandle=f_(U0.bind(null,c,o,Tn,ud,Pm,s,Qn,ua,mo,$i,g,2,-0,0),h);break e}U0(c,o,Tn,ud,Pm,s,Qn,ua,mo,$i,g,0,-0,0)}}break}while(!0);Ir(r)}function U0(r,s,o,c,h,g,T,w,I,G,te,se,Y,Q){if(r.timeoutHandle=-1,se=s.subtreeFlags,(se&8192||(se&16785408)===16785408)&&(oc={stylesheets:null,count:0,unsuspend:ZA},D0(s),se=eS(),se!==null)){r.cancelPendingCommit=se($0.bind(null,r,s,g,o,c,h,T,w,I,te,1,Y,Q)),Wi(r,g,T,!G);return}$0(r,s,g,o,c,h,T,w,I)}function yA(r){for(var s=r;;){var o=s.tag;if((o===0||o===11||o===15)&&s.flags&16384&&(o=s.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var c=0;c<o.length;c++){var h=o[c],g=h.getSnapshot;h=h.value;try{if(!In(g(),h))return!1}catch{return!1}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Wi(r,s,o,c){s&=~Dm,s&=~ua,r.suspendedLanes|=s,r.pingedLanes&=~s,c&&(r.warmLanes|=s),c=r.expirationTimes;for(var h=s;0<h;){var g=31-rn(h),T=1<<g;c[g]=-1,h&=~T}o!==0&&pr(r,o,s)}function dd(){return(Xe&6)===0?(tc(0),!1):!0}function Lm(){if(ke!==null){if(Ze===0)var r=ke.return;else r=ke,ii=ia=null,tm(r),lo=null,Gl=0,r=ke;for(;r!==null;)v0(r.alternate,r),r=r.return;ke=null}}function yo(r,s){var o=r.timeoutHandle;o!==-1&&(r.timeoutHandle=-1,MA(o)),o=r.cancelPendingCommit,o!==null&&(r.cancelPendingCommit=null,o()),Lm(),at=r,ke=o=ti(r.current,null),qe=s,Ze=0,jn=null,$i=!1,fo=ks(r,s),Om=!1,mo=Qn=Dm=ua=Yi=_t=0,Tn=Jl=null,Pm=!1,(s&8)!==0&&(s|=s&32);var c=r.entangledLanes;if(c!==0)for(r=r.entanglements,c&=s;0<c;){var h=31-rn(c),g=1<<h;s|=r[h],c&=~g}return hi=s,Pu(),o}function z0(r,s){De=null,J.H=Zu,s===kl||s===qu?(s=rv(),Ze=3):s===ev?(s=rv(),Ze=4):Ze=s===i0?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,jn=s,ke===null&&(_t=1,rd(r,Hn(s,r.current)))}function B0(){var r=J.H;return J.H=Zu,r===null?Zu:r}function q0(){var r=J.A;return J.A=pA,r}function Um(){_t=4,$i||(qe&4194048)!==qe&&Kn.current!==null||(fo=!0),(Yi&134217727)===0&&(ua&134217727)===0||at===null||Wi(at,qe,Qn,!1)}function zm(r,s,o){var c=Xe;Xe|=2;var h=B0(),g=q0();(at!==r||qe!==s)&&(ud=null,yo(r,s)),s=!1;var T=_t;e:do try{if(Ze!==0&&ke!==null){var w=ke,I=jn;switch(Ze){case 8:Lm(),T=6;break e;case 3:case 2:case 9:case 6:Kn.current===null&&(s=!0);var G=Ze;if(Ze=0,jn=null,vo(r,w,I,G),o&&fo){T=0;break e}break;default:G=Ze,Ze=0,jn=null,vo(r,w,I,G)}}vA(),T=_t;break}catch(te){z0(r,te)}while(!0);return s&&r.shellSuspendCounter++,ii=ia=null,Xe=c,J.H=h,J.A=g,ke===null&&(at=null,qe=0,Pu()),T}function vA(){for(;ke!==null;)F0(ke)}function _A(r,s){var o=Xe;Xe|=2;var c=B0(),h=q0();at!==r||qe!==s?(ud=null,cd=Ln()+500,yo(r,s)):fo=ks(r,s);e:do try{if(Ze!==0&&ke!==null){s=ke;var g=jn;t:switch(Ze){case 1:Ze=0,jn=null,vo(r,s,g,1);break;case 2:case 9:if(tv(g)){Ze=0,jn=null,H0(s);break}s=function(){Ze!==2&&Ze!==9||at!==r||(Ze=7),Ir(r)},g.then(s,s);break e;case 3:Ze=7;break e;case 4:Ze=5;break e;case 7:tv(g)?(Ze=0,jn=null,H0(s)):(Ze=0,jn=null,vo(r,s,g,7));break;case 5:var T=null;switch(ke.tag){case 26:T=ke.memoizedState;case 5:case 27:var w=ke;if(!T||A_(T)){Ze=0,jn=null;var I=w.sibling;if(I!==null)ke=I;else{var G=w.return;G!==null?(ke=G,hd(G)):ke=null}break t}}Ze=0,jn=null,vo(r,s,g,5);break;case 6:Ze=0,jn=null,vo(r,s,g,6);break;case 8:Lm(),_t=6;break e;default:throw Error(i(462))}}bA();break}catch(te){z0(r,te)}while(!0);return ii=ia=null,J.H=c,J.A=h,Xe=o,ke!==null?0:(at=null,qe=0,Pu(),_t)}function bA(){for(;ke!==null&&!sl();)F0(ke)}function F0(r){var s=g0(r.alternate,r,hi);r.memoizedProps=r.pendingProps,s===null?hd(r):ke=s}function H0(r){var s=r,o=s.alternate;switch(s.tag){case 15:case 0:s=u0(o,s,s.pendingProps,s.type,void 0,qe);break;case 11:s=u0(o,s,s.pendingProps,s.type.render,s.ref,qe);break;case 5:tm(s);default:v0(o,s),s=ke=Gy(s,hi),s=g0(o,s,hi)}r.memoizedProps=r.pendingProps,s===null?hd(r):ke=s}function vo(r,s,o,c){ii=ia=null,tm(s),lo=null,Gl=0;var h=s.return;try{if(cA(r,h,s,o,qe)){_t=1,rd(r,Hn(o,r.current)),ke=null;return}}catch(g){if(h!==null)throw ke=h,g;_t=1,rd(r,Hn(o,r.current)),ke=null;return}s.flags&32768?(Ye||c===1?r=!0:fo||(qe&536870912)!==0?r=!1:($i=r=!0,(c===2||c===9||c===3||c===6)&&(c=Kn.current,c!==null&&c.tag===13&&(c.flags|=16384))),G0(s,r)):hd(s)}function hd(r){var s=r;do{if((s.flags&32768)!==0){G0(s,$i);return}r=s.return;var o=dA(s.alternate,s,hi);if(o!==null){ke=o;return}if(s=s.sibling,s!==null){ke=s;return}ke=s=r}while(s!==null);_t===0&&(_t=5)}function G0(r,s){do{var o=hA(r.alternate,r);if(o!==null){o.flags&=32767,ke=o;return}if(o=r.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!s&&(r=r.sibling,r!==null)){ke=r;return}ke=r=o}while(r!==null);_t=6,ke=null}function $0(r,s,o,c,h,g,T,w,I){r.cancelPendingCommit=null;do fd();while(Xt!==0);if((Xe&6)!==0)throw Error(i(327));if(s!==null){if(s===r.current)throw Error(i(177));if(g=s.lanes|s.childLanes,g|=If,dl(r,o,g,T,w,I),r===at&&(ke=at=null,qe=0),po=s,Qi=r,go=o,Mm=g,km=h,k0=c,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,wA(Ds,function(){return X0(),null})):(r.callbackNode=null,r.callbackPriority=0),c=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||c){c=J.T,J.T=null,h=he.p,he.p=2,T=Xe,Xe|=4;try{fA(r,s,o)}finally{Xe=T,he.p=h,J.T=c}}Xt=1,Y0(),K0(),Q0()}}function Y0(){if(Xt===1){Xt=0;var r=Qi,s=po,o=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||o){o=J.T,J.T=null;var c=he.p;he.p=2;var h=Xe;Xe|=4;try{R0(s,r);var g=Zm,T=My(r.containerInfo),w=g.focusedElem,I=g.selectionRange;if(T!==w&&w&&w.ownerDocument&&jy(w.ownerDocument.documentElement,w)){if(I!==null&&Af(w)){var G=I.start,te=I.end;if(te===void 0&&(te=G),"selectionStart"in w)w.selectionStart=G,w.selectionEnd=Math.min(te,w.value.length);else{var se=w.ownerDocument||document,Y=se&&se.defaultView||window;if(Y.getSelection){var Q=Y.getSelection(),Se=w.textContent.length,Te=Math.min(I.start,Se),rt=I.end===void 0?Te:Math.min(I.end,Se);!Q.extend&&Te>rt&&(T=rt,rt=Te,Te=T);var q=Py(w,Te),L=Py(w,rt);if(q&&L&&(Q.rangeCount!==1||Q.anchorNode!==q.node||Q.anchorOffset!==q.offset||Q.focusNode!==L.node||Q.focusOffset!==L.offset)){var H=se.createRange();H.setStart(q.node,q.offset),Q.removeAllRanges(),Te>rt?(Q.addRange(H),Q.extend(L.node,L.offset)):(H.setEnd(L.node,L.offset),Q.addRange(H))}}}}for(se=[],Q=w;Q=Q.parentNode;)Q.nodeType===1&&se.push({element:Q,left:Q.scrollLeft,top:Q.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<se.length;w++){var re=se[w];re.element.scrollLeft=re.left,re.element.scrollTop=re.top}}Ad=!!Xm,Zm=Xm=null}finally{Xe=h,he.p=c,J.T=o}}r.current=s,Xt=2}}function K0(){if(Xt===2){Xt=0;var r=Qi,s=po,o=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||o){o=J.T,J.T=null;var c=he.p;he.p=2;var h=Xe;Xe|=4;try{A0(r,s.alternate,s)}finally{Xe=h,he.p=c,J.T=o}}Xt=3}}function Q0(){if(Xt===4||Xt===3){Xt=0,lu();var r=Qi,s=po,o=go,c=k0;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Xt=5:(Xt=0,po=Qi=null,W0(r,r.pendingLanes));var h=r.pendingLanes;if(h===0&&(Ki=null),ja(o),s=s.stateNode,We&&typeof We.onCommitFiberRoot=="function")try{We.onCommitFiberRoot(yt,s,void 0,(s.current.flags&128)===128)}catch{}if(c!==null){s=J.T,h=he.p,he.p=2,J.T=null;try{for(var g=r.onRecoverableError,T=0;T<c.length;T++){var w=c[T];g(w.value,{componentStack:w.stack})}}finally{J.T=s,he.p=h}}(go&3)!==0&&fd(),Ir(r),h=r.pendingLanes,(o&4194090)!==0&&(h&42)!==0?r===Vm?ec++:(ec=0,Vm=r):ec=0,tc(0)}}function W0(r,s){(r.pooledCacheLanes&=s)===0&&(s=r.pooledCache,s!=null&&(r.pooledCache=null,jl(s)))}function fd(r){return Y0(),K0(),Q0(),X0()}function X0(){if(Xt!==5)return!1;var r=Qi,s=Mm;Mm=0;var o=ja(go),c=J.T,h=he.p;try{he.p=32>o?32:o,J.T=null,o=km,km=null;var g=Qi,T=go;if(Xt=0,po=Qi=null,go=0,(Xe&6)!==0)throw Error(i(331));var w=Xe;if(Xe|=4,j0(g.current),O0(g,g.current,T,o),Xe=w,tc(0,!1),We&&typeof We.onPostCommitFiberRoot=="function")try{We.onPostCommitFiberRoot(yt,g)}catch{}return!0}finally{he.p=h,J.T=c,W0(r,s)}}function Z0(r,s,o){s=Hn(o,s),s=pm(r.stateNode,s,2),r=Ui(r,s,2),r!==null&&(Hr(r,2),Ir(r))}function it(r,s,o){if(r.tag===3)Z0(r,r,o);else for(;s!==null;){if(s.tag===3){Z0(s,r,o);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Ki===null||!Ki.has(c))){r=Hn(o,r),o=n0(2),c=Ui(s,o,2),c!==null&&(r0(o,c,s,r),Hr(c,2),Ir(c));break}}s=s.return}}function Bm(r,s,o){var c=r.pingCache;if(c===null){c=r.pingCache=new gA;var h=new Set;c.set(s,h)}else h=c.get(s),h===void 0&&(h=new Set,c.set(s,h));h.has(o)||(Om=!0,h.add(o),r=EA.bind(null,r,s,o),s.then(r,r))}function EA(r,s,o){var c=r.pingCache;c!==null&&c.delete(s),r.pingedLanes|=r.suspendedLanes&o,r.warmLanes&=~o,at===r&&(qe&o)===o&&(_t===4||_t===3&&(qe&62914560)===qe&&300>Ln()-jm?(Xe&2)===0&&yo(r,0):Dm|=o,mo===qe&&(mo=0)),Ir(r)}function J0(r,s){s===0&&(s=ul()),r=Za(r,s),r!==null&&(Hr(r,s),Ir(r))}function TA(r){var s=r.memoizedState,o=0;s!==null&&(o=s.retryLane),J0(r,o)}function xA(r,s){var o=0;switch(r.tag){case 13:var c=r.stateNode,h=r.memoizedState;h!==null&&(o=h.retryLane);break;case 19:c=r.stateNode;break;case 22:c=r.stateNode._retryCache;break;default:throw Error(i(314))}c!==null&&c.delete(s),J0(r,o)}function wA(r,s){return Is(r,s)}var md=null,_o=null,qm=!1,pd=!1,Fm=!1,da=0;function Ir(r){r!==_o&&r.next===null&&(_o===null?md=_o=r:_o=_o.next=r),pd=!0,qm||(qm=!0,SA())}function tc(r,s){if(!Fm&&pd){Fm=!0;do for(var o=!1,c=md;c!==null;){if(r!==0){var h=c.pendingLanes;if(h===0)var g=0;else{var T=c.suspendedLanes,w=c.pingedLanes;g=(1<<31-rn(42|r)+1)-1,g&=h&~(T&~w),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(o=!0,r_(c,g))}else g=qe,g=Pa(c,c===at?g:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(g&3)===0||ks(c,g)||(o=!0,r_(c,g));c=c.next}while(o);Fm=!1}}function AA(){e_()}function e_(){pd=qm=!1;var r=0;da!==0&&(jA()&&(r=da),da=0);for(var s=Ln(),o=null,c=md;c!==null;){var h=c.next,g=t_(c,s);g===0?(c.next=null,o===null?md=h:o.next=h,h===null&&(_o=o)):(o=c,(r!==0||(g&3)!==0)&&(pd=!0)),c=h}tc(r)}function t_(r,s){for(var o=r.suspendedLanes,c=r.pingedLanes,h=r.expirationTimes,g=r.pendingLanes&-62914561;0<g;){var T=31-rn(g),w=1<<T,I=h[T];I===-1?((w&o)===0||(w&c)!==0)&&(h[T]=ll(w,s)):I<=s&&(r.expiredLanes|=w),g&=~w}if(s=at,o=qe,o=Pa(r,r===s?o:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),c=r.callbackNode,o===0||r===s&&(Ze===2||Ze===9)||r.cancelPendingCommit!==null)return c!==null&&c!==null&&Os(c),r.callbackNode=null,r.callbackPriority=0;if((o&3)===0||ks(r,o)){if(s=o&-o,s===r.callbackPriority)return s;switch(c!==null&&Os(c),ja(o)){case 2:case 8:o=Oa;break;case 32:o=Ds;break;case 268435456:o=Da;break;default:o=Ds}return c=n_.bind(null,r),o=Is(o,c),r.callbackPriority=s,r.callbackNode=o,s}return c!==null&&c!==null&&Os(c),r.callbackPriority=2,r.callbackNode=null,2}function n_(r,s){if(Xt!==0&&Xt!==5)return r.callbackNode=null,r.callbackPriority=0,null;var o=r.callbackNode;if(fd()&&r.callbackNode!==o)return null;var c=qe;return c=Pa(r,r===at?c:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),c===0?null:(L0(r,c,s),t_(r,Ln()),r.callbackNode!=null&&r.callbackNode===o?n_.bind(null,r):null)}function r_(r,s){if(fd())return null;L0(r,s,!0)}function SA(){kA(function(){(Xe&6)!==0?Is(al,AA):e_()})}function Hm(){return da===0&&(da=cl()),da}function i_(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:za(""+r)}function s_(r,s){var o=s.ownerDocument.createElement("input");return o.name=s.name,o.value=s.value,r.id&&o.setAttribute("form",r.id),s.parentNode.insertBefore(o,s),r=new FormData(r),o.parentNode.removeChild(o),r}function CA(r,s,o,c,h){if(s==="submit"&&o&&o.stateNode===h){var g=i_((h[At]||null).action),T=c.submitter;T&&(s=(s=T[At]||null)?i_(s.formAction):T.getAttribute("formAction"),s!==null&&(g=s,T=null));var w=new Ba("action","action",null,c,h);r.push({event:w,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(da!==0){var I=T?s_(h,T):new FormData(h);um(o,{pending:!0,data:I,method:h.method,action:g},null,I)}}else typeof g=="function"&&(w.preventDefault(),I=T?s_(h,T):new FormData(h),um(o,{pending:!0,data:I,method:h.method,action:g},g,I))},currentTarget:h}]})}}for(var Gm=0;Gm<Rf.length;Gm++){var $m=Rf[Gm],NA=$m.toLowerCase(),RA=$m[0].toUpperCase()+$m.slice(1);ir(NA,"on"+RA)}ir(Ly,"onAnimationEnd"),ir(Uy,"onAnimationIteration"),ir(zy,"onAnimationStart"),ir("dblclick","onDoubleClick"),ir("focusin","onFocus"),ir("focusout","onBlur"),ir($w,"onTransitionRun"),ir(Yw,"onTransitionStart"),ir(Kw,"onTransitionCancel"),ir(By,"onTransitionEnd"),$r("onMouseEnter",["mouseout","mouseover"]),$r("onMouseLeave",["mouseout","mouseover"]),$r("onPointerEnter",["pointerout","pointerover"]),$r("onPointerLeave",["pointerout","pointerover"]),nr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),nr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),nr("onBeforeInput",["compositionend","keypress","textInput","paste"]),nr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),nr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),nr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var nc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),IA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(nc));function a_(r,s){s=(s&4)!==0;for(var o=0;o<r.length;o++){var c=r[o],h=c.event;c=c.listeners;e:{var g=void 0;if(s)for(var T=c.length-1;0<=T;T--){var w=c[T],I=w.instance,G=w.currentTarget;if(w=w.listener,I!==g&&h.isPropagationStopped())break e;g=w,h.currentTarget=G;try{g(h)}catch(te){nd(te)}h.currentTarget=null,g=I}else for(T=0;T<c.length;T++){if(w=c[T],I=w.instance,G=w.currentTarget,w=w.listener,I!==g&&h.isPropagationStopped())break e;g=w,h.currentTarget=G;try{g(h)}catch(te){nd(te)}h.currentTarget=null,g=I}}}}function Ve(r,s){var o=s[fl];o===void 0&&(o=s[fl]=new Set);var c=r+"__bubble";o.has(c)||(o_(s,r,2,!1),o.add(c))}function Ym(r,s,o){var c=0;s&&(c|=4),o_(o,r,c,s)}var gd="_reactListening"+Math.random().toString(36).slice(2);function Km(r){if(!r[gd]){r[gd]=!0,ml.forEach(function(o){o!=="selectionchange"&&(IA.has(o)||Ym(o,!1,r),Ym(o,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[gd]||(s[gd]=!0,Ym("selectionchange",!1,s))}}function o_(r,s,o,c){switch(O_(s)){case 2:var h=rS;break;case 8:h=iS;break;default:h=lp}o=h.bind(null,s,o,r),h=void 0,!qn||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(h=!0),c?h!==void 0?r.addEventListener(s,o,{capture:!0,passive:h}):r.addEventListener(s,o,!0):h!==void 0?r.addEventListener(s,o,{passive:h}):r.addEventListener(s,o,!1)}function Qm(r,s,o,c,h){var g=c;if((s&1)===0&&(s&2)===0&&c!==null)e:for(;;){if(c===null)return;var T=c.tag;if(T===3||T===4){var w=c.stateNode.containerInfo;if(w===h)break;if(T===4)for(T=c.return;T!==null;){var I=T.tag;if((I===3||I===4)&&T.stateNode.containerInfo===h)return;T=T.return}for(;w!==null;){if(T=Gr(w),T===null)return;if(I=T.tag,I===5||I===6||I===26||I===27){c=g=T;continue e}w=w.parentNode}}c=c.return}vu(function(){var G=g,te=Bn(o),se=[];e:{var Y=qy.get(r);if(Y!==void 0){var Q=Ba,Se=r;switch(r){case"keypress":if(Er(o)===0)break e;case"keydown":case"keyup":Q=Ya;break;case"focusin":Se="focus",Q=Ha;break;case"focusout":Se="blur",Q=Ha;break;case"beforeblur":case"afterblur":Q=Ha;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Q=Fn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Q=Ef;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Q=Su;break;case Ly:case Uy:case zy:Q=Ga;break;case By:Q=Nu;break;case"scroll":case"scrollend":Q=_u;break;case"wheel":Q=Ka;break;case"copy":case"cut":case"paste":Q=$a;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Q=Sl;break;case"toggle":case"beforetoggle":Q=Iu}var Te=(s&4)!==0,rt=!Te&&(r==="scroll"||r==="scrollend"),q=Te?Y!==null?Y+"Capture":null:Y;Te=[];for(var L=G,H;L!==null;){var re=L;if(H=re.stateNode,re=re.tag,re!==5&&re!==26&&re!==27||H===null||q===null||(re=Hs(L,q),re!=null&&Te.push(rc(L,re,H))),rt)break;L=L.return}0<Te.length&&(Y=new Q(Y,Se,null,o,te),se.push({event:Y,listeners:Te}))}}if((s&7)===0){e:{if(Y=r==="mouseover"||r==="pointerover",Q=r==="mouseout"||r==="pointerout",Y&&o!==Qr&&(Se=o.relatedTarget||o.fromElement)&&(Gr(Se)||Se[Un]))break e;if((Q||Y)&&(Y=te.window===te?te:(Y=te.ownerDocument)?Y.defaultView||Y.parentWindow:window,Q?(Se=o.relatedTarget||o.toElement,Q=G,Se=Se?Gr(Se):null,Se!==null&&(rt=l(Se),Te=Se.tag,Se!==rt||Te!==5&&Te!==27&&Te!==6)&&(Se=null)):(Q=null,Se=G),Q!==Se)){if(Te=Fn,re="onMouseLeave",q="onMouseEnter",L="mouse",(r==="pointerout"||r==="pointerover")&&(Te=Sl,re="onPointerLeave",q="onPointerEnter",L="pointer"),rt=Q==null?Y:yr(Q),H=Se==null?Y:yr(Se),Y=new Te(re,L+"leave",Q,o,te),Y.target=rt,Y.relatedTarget=H,re=null,Gr(te)===G&&(Te=new Te(q,L+"enter",Se,o,te),Te.target=H,Te.relatedTarget=rt,re=Te),rt=re,Q&&Se)t:{for(Te=Q,q=Se,L=0,H=Te;H;H=bo(H))L++;for(H=0,re=q;re;re=bo(re))H++;for(;0<L-H;)Te=bo(Te),L--;for(;0<H-L;)q=bo(q),H--;for(;L--;){if(Te===q||q!==null&&Te===q.alternate)break t;Te=bo(Te),q=bo(q)}Te=null}else Te=null;Q!==null&&l_(se,Y,Q,Te,!1),Se!==null&&rt!==null&&l_(se,rt,Se,Te,!0)}}e:{if(Y=G?yr(G):window,Q=Y.nodeName&&Y.nodeName.toLowerCase(),Q==="select"||Q==="input"&&Y.type==="file")var ge=Cy;else if(Pt(Y))if(Ny)ge=Fw;else{ge=Bw;var je=zw}else Q=Y.nodeName,!Q||Q.toLowerCase()!=="input"||Y.type!=="checkbox"&&Y.type!=="radio"?G&&_l(G.elementType)&&(ge=Cy):ge=qw;if(ge&&(ge=ge(r,G))){ei(se,ge,o,te);break e}je&&je(r,Y,G),r==="focusout"&&G&&Y.type==="number"&&G.memoizedProps.value!=null&&ji(Y,"number",Y.value)}switch(je=G?yr(G):window,r){case"focusin":(Pt(je)||je.contentEditable==="true")&&(Qa=je,Sf=G,Rl=null);break;case"focusout":Rl=Sf=Qa=null;break;case"mousedown":Cf=!0;break;case"contextmenu":case"mouseup":case"dragend":Cf=!1,ky(se,o,te);break;case"selectionchange":if(Gw)break;case"keydown":case"keyup":ky(se,o,te)}var be;if(wr)e:{switch(r){case"compositionstart":var xe="onCompositionStart";break e;case"compositionend":xe="onCompositionEnd";break e;case"compositionupdate":xe="onCompositionUpdate";break e}xe=void 0}else ze?X(r,o)&&(xe="onCompositionEnd"):r==="keydown"&&o.keyCode===229&&(xe="onCompositionStart");xe&&(b&&o.locale!=="ko"&&(ze||xe!=="onCompositionStart"?xe==="onCompositionEnd"&&ze&&(be=El()):(br=te,Mi="value"in br?br.value:br.textContent,ze=!0)),je=yd(G,xe),0<je.length&&(xe=new wl(xe,r,null,o,te),se.push({event:xe,listeners:je}),be?xe.data=be:(be=de(o),be!==null&&(xe.data=be)))),(be=_?Dt(r,o):Be(r,o))&&(xe=yd(G,"onBeforeInput"),0<xe.length&&(je=new wl("onBeforeInput","beforeinput",null,o,te),se.push({event:je,listeners:xe}),je.data=be)),CA(se,r,G,o,te)}a_(se,s)})}function rc(r,s,o){return{instance:r,listener:s,currentTarget:o}}function yd(r,s){for(var o=s+"Capture",c=[];r!==null;){var h=r,g=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||g===null||(h=Hs(r,o),h!=null&&c.unshift(rc(r,h,g)),h=Hs(r,s),h!=null&&c.push(rc(r,h,g))),r.tag===3)return c;r=r.return}return[]}function bo(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function l_(r,s,o,c,h){for(var g=s._reactName,T=[];o!==null&&o!==c;){var w=o,I=w.alternate,G=w.stateNode;if(w=w.tag,I!==null&&I===c)break;w!==5&&w!==26&&w!==27||G===null||(I=G,h?(G=Hs(o,g),G!=null&&T.unshift(rc(o,G,I))):h||(G=Hs(o,g),G!=null&&T.push(rc(o,G,I)))),o=o.return}T.length!==0&&r.push({event:s,listeners:T})}var OA=/\r\n?/g,DA=/\u0000|\uFFFD/g;function c_(r){return(typeof r=="string"?r:""+r).replace(OA,`
`).replace(DA,"")}function u_(r,s){return s=c_(s),c_(r)===s}function vd(){}function nt(r,s,o,c,h,g){switch(o){case"children":typeof c=="string"?s==="body"||s==="textarea"&&c===""||zn(r,c):(typeof c=="number"||typeof c=="bigint")&&s!=="body"&&zn(r,""+c);break;case"className":vr(r,"class",c);break;case"tabIndex":vr(r,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":vr(r,o,c);break;case"style":vl(r,c,g);break;case"data":if(s!=="object"){vr(r,"data",c);break}case"src":case"href":if(c===""&&(s!=="a"||o!=="href")){r.removeAttribute(o);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){r.removeAttribute(o);break}c=za(""+c),r.setAttribute(o,c);break;case"action":case"formAction":if(typeof c=="function"){r.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(o==="formAction"?(s!=="input"&&nt(r,s,"name",h.name,h,null),nt(r,s,"formEncType",h.formEncType,h,null),nt(r,s,"formMethod",h.formMethod,h,null),nt(r,s,"formTarget",h.formTarget,h,null)):(nt(r,s,"encType",h.encType,h,null),nt(r,s,"method",h.method,h,null),nt(r,s,"target",h.target,h,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){r.removeAttribute(o);break}c=za(""+c),r.setAttribute(o,c);break;case"onClick":c!=null&&(r.onclick=vd);break;case"onScroll":c!=null&&Ve("scroll",r);break;case"onScrollEnd":c!=null&&Ve("scrollend",r);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(o=c.__html,o!=null){if(h.children!=null)throw Error(i(60));r.innerHTML=o}}break;case"multiple":r.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":r.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){r.removeAttribute("xlink:href");break}o=za(""+c),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?r.setAttribute(o,""+c):r.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?r.setAttribute(o,""):r.removeAttribute(o);break;case"capture":case"download":c===!0?r.setAttribute(o,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?r.setAttribute(o,c):r.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?r.setAttribute(o,c):r.removeAttribute(o);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?r.removeAttribute(o):r.setAttribute(o,c);break;case"popover":Ve("beforetoggle",r),Ve("toggle",r),Pi(r,"popover",c);break;case"xlinkActuate":Kt(r,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Kt(r,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Kt(r,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Kt(r,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Kt(r,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Kt(r,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Kt(r,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Kt(r,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Kt(r,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Pi(r,"is",c);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=_f.get(o)||o,Pi(r,o,c))}}function Wm(r,s,o,c,h,g){switch(o){case"style":vl(r,c,g);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(o=c.__html,o!=null){if(h.children!=null)throw Error(i(60));r.innerHTML=o}}break;case"children":typeof c=="string"?zn(r,c):(typeof c=="number"||typeof c=="bigint")&&zn(r,""+c);break;case"onScroll":c!=null&&Ve("scroll",r);break;case"onScrollEnd":c!=null&&Ve("scrollend",r);break;case"onClick":c!=null&&(r.onclick=vd);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ma.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(h=o.endsWith("Capture"),s=o.slice(2,h?o.length-7:void 0),g=r[At]||null,g=g!=null?g[o]:null,typeof g=="function"&&r.removeEventListener(s,g,h),typeof c=="function")){typeof g!="function"&&g!==null&&(o in r?r[o]=null:r.hasAttribute(o)&&r.removeAttribute(o)),r.addEventListener(s,c,h);break e}o in r?r[o]=c:c===!0?r.setAttribute(o,""):Pi(r,o,c)}}}function Zt(r,s,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ve("error",r),Ve("load",r);var c=!1,h=!1,g;for(g in o)if(o.hasOwnProperty(g)){var T=o[g];if(T!=null)switch(g){case"src":c=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:nt(r,s,g,T,o,null)}}h&&nt(r,s,"srcSet",o.srcSet,o,null),c&&nt(r,s,"src",o.src,o,null);return;case"input":Ve("invalid",r);var w=g=T=h=null,I=null,G=null;for(c in o)if(o.hasOwnProperty(c)){var te=o[c];if(te!=null)switch(c){case"name":h=te;break;case"type":T=te;break;case"checked":I=te;break;case"defaultChecked":G=te;break;case"value":g=te;break;case"defaultValue":w=te;break;case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(i(137,s));break;default:nt(r,s,c,te,o,null)}}Bs(r,g,w,I,G,T,h,!1),Ua(r);return;case"select":Ve("invalid",r),c=T=g=null;for(h in o)if(o.hasOwnProperty(h)&&(w=o[h],w!=null))switch(h){case"value":g=w;break;case"defaultValue":T=w;break;case"multiple":c=w;default:nt(r,s,h,w,o,null)}s=g,o=T,r.multiple=!!c,s!=null?Kr(r,!!c,s,!1):o!=null&&Kr(r,!!c,o,!0);return;case"textarea":Ve("invalid",r),g=h=c=null;for(T in o)if(o.hasOwnProperty(T)&&(w=o[T],w!=null))switch(T){case"value":c=w;break;case"defaultValue":h=w;break;case"children":g=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(i(91));break;default:nt(r,s,T,w,o,null)}qs(r,c,h,g),Ua(r);return;case"option":for(I in o)if(o.hasOwnProperty(I)&&(c=o[I],c!=null))switch(I){case"selected":r.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:nt(r,s,I,c,o,null)}return;case"dialog":Ve("beforetoggle",r),Ve("toggle",r),Ve("cancel",r),Ve("close",r);break;case"iframe":case"object":Ve("load",r);break;case"video":case"audio":for(c=0;c<nc.length;c++)Ve(nc[c],r);break;case"image":Ve("error",r),Ve("load",r);break;case"details":Ve("toggle",r);break;case"embed":case"source":case"link":Ve("error",r),Ve("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(G in o)if(o.hasOwnProperty(G)&&(c=o[G],c!=null))switch(G){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:nt(r,s,G,c,o,null)}return;default:if(_l(s)){for(te in o)o.hasOwnProperty(te)&&(c=o[te],c!==void 0&&Wm(r,s,te,c,o,void 0));return}}for(w in o)o.hasOwnProperty(w)&&(c=o[w],c!=null&&nt(r,s,w,c,o,null))}function PA(r,s,o,c){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,g=null,T=null,w=null,I=null,G=null,te=null;for(Q in o){var se=o[Q];if(o.hasOwnProperty(Q)&&se!=null)switch(Q){case"checked":break;case"value":break;case"defaultValue":I=se;default:c.hasOwnProperty(Q)||nt(r,s,Q,null,c,se)}}for(var Y in c){var Q=c[Y];if(se=o[Y],c.hasOwnProperty(Y)&&(Q!=null||se!=null))switch(Y){case"type":g=Q;break;case"name":h=Q;break;case"checked":G=Q;break;case"defaultChecked":te=Q;break;case"value":T=Q;break;case"defaultValue":w=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(i(137,s));break;default:Q!==se&&nt(r,s,Y,Q,c,se)}}Rn(r,T,w,I,G,te,g,h);return;case"select":Q=T=w=Y=null;for(g in o)if(I=o[g],o.hasOwnProperty(g)&&I!=null)switch(g){case"value":break;case"multiple":Q=I;default:c.hasOwnProperty(g)||nt(r,s,g,null,c,I)}for(h in c)if(g=c[h],I=o[h],c.hasOwnProperty(h)&&(g!=null||I!=null))switch(h){case"value":Y=g;break;case"defaultValue":w=g;break;case"multiple":T=g;default:g!==I&&nt(r,s,h,g,c,I)}s=w,o=T,c=Q,Y!=null?Kr(r,!!o,Y,!1):!!c!=!!o&&(s!=null?Kr(r,!!o,s,!0):Kr(r,!!o,o?[]:"",!1));return;case"textarea":Q=Y=null;for(w in o)if(h=o[w],o.hasOwnProperty(w)&&h!=null&&!c.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:nt(r,s,w,null,c,h)}for(T in c)if(h=c[T],g=o[T],c.hasOwnProperty(T)&&(h!=null||g!=null))switch(T){case"value":Y=h;break;case"defaultValue":Q=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(i(91));break;default:h!==g&&nt(r,s,T,h,c,g)}et(r,Y,Q);return;case"option":for(var Se in o)if(Y=o[Se],o.hasOwnProperty(Se)&&Y!=null&&!c.hasOwnProperty(Se))switch(Se){case"selected":r.selected=!1;break;default:nt(r,s,Se,null,c,Y)}for(I in c)if(Y=c[I],Q=o[I],c.hasOwnProperty(I)&&Y!==Q&&(Y!=null||Q!=null))switch(I){case"selected":r.selected=Y&&typeof Y!="function"&&typeof Y!="symbol";break;default:nt(r,s,I,Y,c,Q)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Te in o)Y=o[Te],o.hasOwnProperty(Te)&&Y!=null&&!c.hasOwnProperty(Te)&&nt(r,s,Te,null,c,Y);for(G in c)if(Y=c[G],Q=o[G],c.hasOwnProperty(G)&&Y!==Q&&(Y!=null||Q!=null))switch(G){case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(i(137,s));break;default:nt(r,s,G,Y,c,Q)}return;default:if(_l(s)){for(var rt in o)Y=o[rt],o.hasOwnProperty(rt)&&Y!==void 0&&!c.hasOwnProperty(rt)&&Wm(r,s,rt,void 0,c,Y);for(te in c)Y=c[te],Q=o[te],!c.hasOwnProperty(te)||Y===Q||Y===void 0&&Q===void 0||Wm(r,s,te,Y,c,Q);return}}for(var q in o)Y=o[q],o.hasOwnProperty(q)&&Y!=null&&!c.hasOwnProperty(q)&&nt(r,s,q,null,c,Y);for(se in c)Y=c[se],Q=o[se],!c.hasOwnProperty(se)||Y===Q||Y==null&&Q==null||nt(r,s,se,Y,c,Q)}var Xm=null,Zm=null;function _d(r){return r.nodeType===9?r:r.ownerDocument}function d_(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function h_(r,s){if(r===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&s==="foreignObject"?0:r}function Jm(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var ep=null;function jA(){var r=window.event;return r&&r.type==="popstate"?r===ep?!1:(ep=r,!0):(ep=null,!1)}var f_=typeof setTimeout=="function"?setTimeout:void 0,MA=typeof clearTimeout=="function"?clearTimeout:void 0,m_=typeof Promise=="function"?Promise:void 0,kA=typeof queueMicrotask=="function"?queueMicrotask:typeof m_<"u"?function(r){return m_.resolve(null).then(r).catch(VA)}:f_;function VA(r){setTimeout(function(){throw r})}function Xi(r){return r==="head"}function p_(r,s){var o=s,c=0,h=0;do{var g=o.nextSibling;if(r.removeChild(o),g&&g.nodeType===8)if(o=g.data,o==="/$"){if(0<c&&8>c){o=c;var T=r.ownerDocument;if(o&1&&ic(T.documentElement),o&2&&ic(T.body),o&4)for(o=T.head,ic(o),T=o.firstChild;T;){var w=T.nextSibling,I=T.nodeName;T[Vs]||I==="SCRIPT"||I==="STYLE"||I==="LINK"&&T.rel.toLowerCase()==="stylesheet"||o.removeChild(T),T=w}}if(h===0){r.removeChild(g),hc(s);return}h--}else o==="$"||o==="$?"||o==="$!"?h++:c=o.charCodeAt(0)-48;else c=0;o=g}while(o);hc(s)}function tp(r){var s=r.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var o=s;switch(s=s.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":tp(o),Di(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}r.removeChild(o)}}function LA(r,s,o,c){for(;r.nodeType===1;){var h=o;if(r.nodeName.toLowerCase()!==s.toLowerCase()){if(!c&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(c){if(!r[Vs])switch(s){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(g=r.getAttribute("rel"),g==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(g!==h.rel||r.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||r.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||r.getAttribute("title")!==(h.title==null?null:h.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(g=r.getAttribute("src"),(g!==(h.src==null?null:h.src)||r.getAttribute("type")!==(h.type==null?null:h.type)||r.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&g&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(s==="input"&&r.type==="hidden"){var g=h.name==null?null:""+h.name;if(h.type==="hidden"&&r.getAttribute("name")===g)return r}else return r;if(r=ar(r.nextSibling),r===null)break}return null}function UA(r,s,o){if(s==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!o||(r=ar(r.nextSibling),r===null))return null;return r}function np(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState==="complete"}function zA(r,s){var o=r.ownerDocument;if(r.data!=="$?"||o.readyState==="complete")s();else{var c=function(){s(),o.removeEventListener("DOMContentLoaded",c)};o.addEventListener("DOMContentLoaded",c),r._reactRetry=c}}function ar(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return r}var rp=null;function g_(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var o=r.data;if(o==="$"||o==="$!"||o==="$?"){if(s===0)return r;s--}else o==="/$"&&s++}r=r.previousSibling}return null}function y_(r,s,o){switch(s=_d(o),r){case"html":if(r=s.documentElement,!r)throw Error(i(452));return r;case"head":if(r=s.head,!r)throw Error(i(453));return r;case"body":if(r=s.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}function ic(r){for(var s=r.attributes;s.length;)r.removeAttributeNode(s[0]);Di(r)}var Wn=new Map,v_=new Set;function bd(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var fi=he.d;he.d={f:BA,r:qA,D:FA,C:HA,L:GA,m:$A,X:KA,S:YA,M:QA};function BA(){var r=fi.f(),s=dd();return r||s}function qA(r){var s=gr(r);s!==null&&s.tag===5&&s.type==="form"?Lv(s):fi.r(r)}var Eo=typeof document>"u"?null:document;function __(r,s,o){var c=Eo;if(c&&typeof s=="string"&&s){var h=St(s);h='link[rel="'+r+'"][href="'+h+'"]',typeof o=="string"&&(h+='[crossorigin="'+o+'"]'),v_.has(h)||(v_.add(h),r={rel:r,crossOrigin:o,href:s},c.querySelector(h)===null&&(s=c.createElement("link"),Zt(s,"link",r),Et(s),c.head.appendChild(s)))}}function FA(r){fi.D(r),__("dns-prefetch",r,null)}function HA(r,s){fi.C(r,s),__("preconnect",r,s)}function GA(r,s,o){fi.L(r,s,o);var c=Eo;if(c&&r&&s){var h='link[rel="preload"][as="'+St(s)+'"]';s==="image"&&o&&o.imageSrcSet?(h+='[imagesrcset="'+St(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(h+='[imagesizes="'+St(o.imageSizes)+'"]')):h+='[href="'+St(r)+'"]';var g=h;switch(s){case"style":g=To(r);break;case"script":g=xo(r)}Wn.has(g)||(r=v({rel:"preload",href:s==="image"&&o&&o.imageSrcSet?void 0:r,as:s},o),Wn.set(g,r),c.querySelector(h)!==null||s==="style"&&c.querySelector(sc(g))||s==="script"&&c.querySelector(ac(g))||(s=c.createElement("link"),Zt(s,"link",r),Et(s),c.head.appendChild(s)))}}function $A(r,s){fi.m(r,s);var o=Eo;if(o&&r){var c=s&&typeof s.as=="string"?s.as:"script",h='link[rel="modulepreload"][as="'+St(c)+'"][href="'+St(r)+'"]',g=h;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=xo(r)}if(!Wn.has(g)&&(r=v({rel:"modulepreload",href:r},s),Wn.set(g,r),o.querySelector(h)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(ac(g)))return}c=o.createElement("link"),Zt(c,"link",r),Et(c),o.head.appendChild(c)}}}function YA(r,s,o){fi.S(r,s,o);var c=Eo;if(c&&r){var h=hn(c).hoistableStyles,g=To(r);s=s||"default";var T=h.get(g);if(!T){var w={loading:0,preload:null};if(T=c.querySelector(sc(g)))w.loading=5;else{r=v({rel:"stylesheet",href:r,"data-precedence":s},o),(o=Wn.get(g))&&ip(r,o);var I=T=c.createElement("link");Et(I),Zt(I,"link",r),I._p=new Promise(function(G,te){I.onload=G,I.onerror=te}),I.addEventListener("load",function(){w.loading|=1}),I.addEventListener("error",function(){w.loading|=2}),w.loading|=4,Ed(T,s,c)}T={type:"stylesheet",instance:T,count:1,state:w},h.set(g,T)}}}function KA(r,s){fi.X(r,s);var o=Eo;if(o&&r){var c=hn(o).hoistableScripts,h=xo(r),g=c.get(h);g||(g=o.querySelector(ac(h)),g||(r=v({src:r,async:!0},s),(s=Wn.get(h))&&sp(r,s),g=o.createElement("script"),Et(g),Zt(g,"link",r),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},c.set(h,g))}}function QA(r,s){fi.M(r,s);var o=Eo;if(o&&r){var c=hn(o).hoistableScripts,h=xo(r),g=c.get(h);g||(g=o.querySelector(ac(h)),g||(r=v({src:r,async:!0,type:"module"},s),(s=Wn.get(h))&&sp(r,s),g=o.createElement("script"),Et(g),Zt(g,"link",r),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},c.set(h,g))}}function b_(r,s,o,c){var h=(h=W.current)?bd(h):null;if(!h)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(s=To(o.href),o=hn(h).hoistableStyles,c=o.get(s),c||(c={type:"style",instance:null,count:0,state:null},o.set(s,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){r=To(o.href);var g=hn(h).hoistableStyles,T=g.get(r);if(T||(h=h.ownerDocument||h,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(r,T),(g=h.querySelector(sc(r)))&&!g._p&&(T.instance=g,T.state.loading=5),Wn.has(r)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Wn.set(r,o),g||WA(h,r,o,T.state))),s&&c===null)throw Error(i(528,""));return T}if(s&&c!==null)throw Error(i(529,""));return null;case"script":return s=o.async,o=o.src,typeof o=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=xo(o),o=hn(h).hoistableScripts,c=o.get(s),c||(c={type:"script",instance:null,count:0,state:null},o.set(s,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function To(r){return'href="'+St(r)+'"'}function sc(r){return'link[rel="stylesheet"]['+r+"]"}function E_(r){return v({},r,{"data-precedence":r.precedence,precedence:null})}function WA(r,s,o,c){r.querySelector('link[rel="preload"][as="style"]['+s+"]")?c.loading=1:(s=r.createElement("link"),c.preload=s,s.addEventListener("load",function(){return c.loading|=1}),s.addEventListener("error",function(){return c.loading|=2}),Zt(s,"link",o),Et(s),r.head.appendChild(s))}function xo(r){return'[src="'+St(r)+'"]'}function ac(r){return"script[async]"+r}function T_(r,s,o){if(s.count++,s.instance===null)switch(s.type){case"style":var c=r.querySelector('style[data-href~="'+St(o.href)+'"]');if(c)return s.instance=c,Et(c),c;var h=v({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return c=(r.ownerDocument||r).createElement("style"),Et(c),Zt(c,"style",h),Ed(c,o.precedence,r),s.instance=c;case"stylesheet":h=To(o.href);var g=r.querySelector(sc(h));if(g)return s.state.loading|=4,s.instance=g,Et(g),g;c=E_(o),(h=Wn.get(h))&&ip(c,h),g=(r.ownerDocument||r).createElement("link"),Et(g);var T=g;return T._p=new Promise(function(w,I){T.onload=w,T.onerror=I}),Zt(g,"link",c),s.state.loading|=4,Ed(g,o.precedence,r),s.instance=g;case"script":return g=xo(o.src),(h=r.querySelector(ac(g)))?(s.instance=h,Et(h),h):(c=o,(h=Wn.get(g))&&(c=v({},o),sp(c,h)),r=r.ownerDocument||r,h=r.createElement("script"),Et(h),Zt(h,"link",c),r.head.appendChild(h),s.instance=h);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(c=s.instance,s.state.loading|=4,Ed(c,o.precedence,r));return s.instance}function Ed(r,s,o){for(var c=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=c.length?c[c.length-1]:null,g=h,T=0;T<c.length;T++){var w=c[T];if(w.dataset.precedence===s)g=w;else if(g!==h)break}g?g.parentNode.insertBefore(r,g.nextSibling):(s=o.nodeType===9?o.head:o,s.insertBefore(r,s.firstChild))}function ip(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.title==null&&(r.title=s.title)}function sp(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.integrity==null&&(r.integrity=s.integrity)}var Td=null;function x_(r,s,o){if(Td===null){var c=new Map,h=Td=new Map;h.set(o,c)}else h=Td,c=h.get(o),c||(c=new Map,h.set(o,c));if(c.has(r))return c;for(c.set(r,null),o=o.getElementsByTagName(r),h=0;h<o.length;h++){var g=o[h];if(!(g[Vs]||g[Ot]||r==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var T=g.getAttribute(s)||"";T=r+T;var w=c.get(T);w?w.push(g):c.set(T,[g])}}return c}function w_(r,s,o){r=r.ownerDocument||r,r.head.insertBefore(o,s==="title"?r.querySelector("head > title"):null)}function XA(r,s,o){if(o===1||s.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return r=s.disabled,typeof s.precedence=="string"&&r==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function A_(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}var oc=null;function ZA(){}function JA(r,s,o){if(oc===null)throw Error(i(475));var c=oc;if(s.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var h=To(o.href),g=r.querySelector(sc(h));if(g){r=g._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(c.count++,c=xd.bind(c),r.then(c,c)),s.state.loading|=4,s.instance=g,Et(g);return}g=r.ownerDocument||r,o=E_(o),(h=Wn.get(h))&&ip(o,h),g=g.createElement("link"),Et(g);var T=g;T._p=new Promise(function(w,I){T.onload=w,T.onerror=I}),Zt(g,"link",o),s.instance=g}c.stylesheets===null&&(c.stylesheets=new Map),c.stylesheets.set(s,r),(r=s.state.preload)&&(s.state.loading&3)===0&&(c.count++,s=xd.bind(c),r.addEventListener("load",s),r.addEventListener("error",s))}}function eS(){if(oc===null)throw Error(i(475));var r=oc;return r.stylesheets&&r.count===0&&ap(r,r.stylesheets),0<r.count?function(s){var o=setTimeout(function(){if(r.stylesheets&&ap(r,r.stylesheets),r.unsuspend){var c=r.unsuspend;r.unsuspend=null,c()}},6e4);return r.unsuspend=s,function(){r.unsuspend=null,clearTimeout(o)}}:null}function xd(){if(this.count--,this.count===0){if(this.stylesheets)ap(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var wd=null;function ap(r,s){r.stylesheets=null,r.unsuspend!==null&&(r.count++,wd=new Map,s.forEach(tS,r),wd=null,xd.call(r))}function tS(r,s){if(!(s.state.loading&4)){var o=wd.get(r);if(o)var c=o.get(null);else{o=new Map,wd.set(r,o);for(var h=r.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<h.length;g++){var T=h[g];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(o.set(T.dataset.precedence,T),c=T)}c&&o.set(null,c)}h=s.instance,T=h.getAttribute("data-precedence"),g=o.get(T)||c,g===c&&o.set(null,h),o.set(T,h),this.count++,c=xd.bind(this),h.addEventListener("load",c),h.addEventListener("error",c),g?g.parentNode.insertBefore(h,g.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(h,r.firstChild)),s.state.loading|=4}}var lc={$$typeof:z,Provider:null,Consumer:null,_currentValue:ve,_currentValue2:ve,_threadCount:0};function nS(r,s,o,c,h,g,T,w){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Fr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Fr(0),this.hiddenUpdates=Fr(null),this.identifierPrefix=c,this.onUncaughtError=h,this.onCaughtError=g,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=w,this.incompleteTransitions=new Map}function S_(r,s,o,c,h,g,T,w,I,G,te,se){return r=new nS(r,s,o,T,w,I,G,se),s=1,g===!0&&(s|=24),g=On(3,null,null,s),r.current=g,g.stateNode=r,s=Bf(),s.refCount++,r.pooledCache=s,s.refCount++,g.memoizedState={element:c,isDehydrated:o,cache:s},Gf(g),r}function C_(r){return r?(r=Ja,r):Ja}function N_(r,s,o,c,h,g){h=C_(h),c.context===null?c.context=h:c.pendingContext=h,c=Li(s),c.payload={element:o},g=g===void 0?null:g,g!==null&&(c.callback=g),o=Ui(r,c,s),o!==null&&(kn(o,r,s),Ll(o,r,s))}function R_(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var o=r.retryLane;r.retryLane=o!==0&&o<s?o:s}}function op(r,s){R_(r,s),(r=r.alternate)&&R_(r,s)}function I_(r){if(r.tag===13){var s=Za(r,67108864);s!==null&&kn(s,r,67108864),op(r,67108864)}}var Ad=!0;function rS(r,s,o,c){var h=J.T;J.T=null;var g=he.p;try{he.p=2,lp(r,s,o,c)}finally{he.p=g,J.T=h}}function iS(r,s,o,c){var h=J.T;J.T=null;var g=he.p;try{he.p=8,lp(r,s,o,c)}finally{he.p=g,J.T=h}}function lp(r,s,o,c){if(Ad){var h=cp(c);if(h===null)Qm(r,s,c,Sd,o),D_(r,c);else if(aS(h,r,s,o,c))c.stopPropagation();else if(D_(r,c),s&4&&-1<sS.indexOf(r)){for(;h!==null;){var g=gr(h);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var T=tr(g.pendingLanes);if(T!==0){var w=g;for(w.pendingLanes|=2,w.entangledLanes|=2;T;){var I=1<<31-rn(T);w.entanglements[1]|=I,T&=~I}Ir(g),(Xe&6)===0&&(cd=Ln()+500,tc(0))}}break;case 13:w=Za(g,2),w!==null&&kn(w,g,2),dd(),op(g,2)}if(g=cp(c),g===null&&Qm(r,s,c,Sd,o),g===h)break;h=g}h!==null&&c.stopPropagation()}else Qm(r,s,c,null,o)}}function cp(r){return r=Bn(r),up(r)}var Sd=null;function up(r){if(Sd=null,r=Gr(r),r!==null){var s=l(r);if(s===null)r=null;else{var o=s.tag;if(o===13){if(r=u(s),r!==null)return r;r=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null)}}return Sd=r,null}function O_(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ff()){case al:return 2;case Oa:return 8;case Ds:case mf:return 32;case Da:return 268435456;default:return 32}default:return 32}}var dp=!1,Zi=null,Ji=null,es=null,cc=new Map,uc=new Map,ts=[],sS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function D_(r,s){switch(r){case"focusin":case"focusout":Zi=null;break;case"dragenter":case"dragleave":Ji=null;break;case"mouseover":case"mouseout":es=null;break;case"pointerover":case"pointerout":cc.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":uc.delete(s.pointerId)}}function dc(r,s,o,c,h,g){return r===null||r.nativeEvent!==g?(r={blockedOn:s,domEventName:o,eventSystemFlags:c,nativeEvent:g,targetContainers:[h]},s!==null&&(s=gr(s),s!==null&&I_(s)),r):(r.eventSystemFlags|=c,s=r.targetContainers,h!==null&&s.indexOf(h)===-1&&s.push(h),r)}function aS(r,s,o,c,h){switch(s){case"focusin":return Zi=dc(Zi,r,s,o,c,h),!0;case"dragenter":return Ji=dc(Ji,r,s,o,c,h),!0;case"mouseover":return es=dc(es,r,s,o,c,h),!0;case"pointerover":var g=h.pointerId;return cc.set(g,dc(cc.get(g)||null,r,s,o,c,h)),!0;case"gotpointercapture":return g=h.pointerId,uc.set(g,dc(uc.get(g)||null,r,s,o,c,h)),!0}return!1}function P_(r){var s=Gr(r.target);if(s!==null){var o=l(s);if(o!==null){if(s=o.tag,s===13){if(s=u(o),s!==null){r.blockedOn=s,du(r.priority,function(){if(o.tag===13){var c=Mn();c=Ri(c);var h=Za(o,c);h!==null&&kn(h,o,c),op(o,c)}});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){r.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Cd(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var o=cp(r.nativeEvent);if(o===null){o=r.nativeEvent;var c=new o.constructor(o.type,o);Qr=c,o.target.dispatchEvent(c),Qr=null}else return s=gr(o),s!==null&&I_(s),r.blockedOn=o,!1;s.shift()}return!0}function j_(r,s,o){Cd(r)&&o.delete(s)}function oS(){dp=!1,Zi!==null&&Cd(Zi)&&(Zi=null),Ji!==null&&Cd(Ji)&&(Ji=null),es!==null&&Cd(es)&&(es=null),cc.forEach(j_),uc.forEach(j_)}function Nd(r,s){r.blockedOn===s&&(r.blockedOn=null,dp||(dp=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,oS)))}var Rd=null;function M_(r){Rd!==r&&(Rd=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Rd===r&&(Rd=null);for(var s=0;s<r.length;s+=3){var o=r[s],c=r[s+1],h=r[s+2];if(typeof c!="function"){if(up(c||o)===null)continue;break}var g=gr(o);g!==null&&(r.splice(s,3),s-=3,um(g,{pending:!0,data:h,method:o.method,action:c},c,h))}}))}function hc(r){function s(I){return Nd(I,r)}Zi!==null&&Nd(Zi,r),Ji!==null&&Nd(Ji,r),es!==null&&Nd(es,r),cc.forEach(s),uc.forEach(s);for(var o=0;o<ts.length;o++){var c=ts[o];c.blockedOn===r&&(c.blockedOn=null)}for(;0<ts.length&&(o=ts[0],o.blockedOn===null);)P_(o),o.blockedOn===null&&ts.shift();if(o=(r.ownerDocument||r).$$reactFormReplay,o!=null)for(c=0;c<o.length;c+=3){var h=o[c],g=o[c+1],T=h[At]||null;if(typeof g=="function")T||M_(o);else if(T){var w=null;if(g&&g.hasAttribute("formAction")){if(h=g,T=g[At]||null)w=T.formAction;else if(up(h)!==null)continue}else w=T.action;typeof w=="function"?o[c+1]=w:(o.splice(c,3),c-=3),M_(o)}}}function hp(r){this._internalRoot=r}Id.prototype.render=hp.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(i(409));var o=s.current,c=Mn();N_(o,c,r,s,null,null)},Id.prototype.unmount=hp.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;N_(r.current,2,null,r,null,null),dd(),s[Un]=null}};function Id(r){this._internalRoot=r}Id.prototype.unstable_scheduleHydration=function(r){if(r){var s=Ii();r={blockedOn:null,target:r,priority:s};for(var o=0;o<ts.length&&s!==0&&s<ts[o].priority;o++);ts.splice(o,0,r),o===0&&P_(r)}};var k_=e.version;if(k_!=="19.1.0")throw Error(i(527,k_,"19.1.0"));he.findDOMNode=function(r){var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=m(s),r=r!==null?y(r):null,r=r===null?null:r.stateNode,r};var lS={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:J,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Od=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Od.isDisabled&&Od.supportsFiber)try{yt=Od.inject(lS),We=Od}catch{}}return mc.createRoot=function(r,s){if(!a(r))throw Error(i(299));var o=!1,c="",h=Zv,g=Jv,T=e0,w=null;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onUncaughtError!==void 0&&(h=s.onUncaughtError),s.onCaughtError!==void 0&&(g=s.onCaughtError),s.onRecoverableError!==void 0&&(T=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(w=s.unstable_transitionCallbacks)),s=S_(r,1,!1,null,null,o,c,h,g,T,w,null),r[Un]=s.current,Km(r),new hp(s)},mc.hydrateRoot=function(r,s,o){if(!a(r))throw Error(i(299));var c=!1,h="",g=Zv,T=Jv,w=e0,I=null,G=null;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(h=o.identifierPrefix),o.onUncaughtError!==void 0&&(g=o.onUncaughtError),o.onCaughtError!==void 0&&(T=o.onCaughtError),o.onRecoverableError!==void 0&&(w=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(I=o.unstable_transitionCallbacks),o.formState!==void 0&&(G=o.formState)),s=S_(r,1,!0,s,o??null,c,h,g,T,w,I,G),s.context=C_(null),o=s.current,c=Mn(),c=Ri(c),h=Li(c),h.callback=null,Ui(o,h,c),o=c,s.current.lanes=o,Hr(s,o),Ir(s),r[Un]=s.current,Km(r),new Id(s)},mc.version="19.1.0",mc}var $_;function _S(){if($_)return pp.exports;$_=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),pp.exports=vS(),pp.exports}var bS=_S(),pc={},Y_;function ES(){if(Y_)return pc;Y_=1,Object.defineProperty(pc,"__esModule",{value:!0}),pc.parse=u,pc.serialize=y;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,i=/^[\u0020-\u003A\u003D-\u007E]*$/,a=Object.prototype.toString,l=(()=>{const x=function(){};return x.prototype=Object.create(null),x})();function u(x,C){const A=new l,k=x.length;if(k<2)return A;const O=(C==null?void 0:C.decode)||v;let $=0;do{const K=x.indexOf("=",$);if(K===-1)break;const z=x.indexOf(";",$),ce=z===-1?k:z;if(K>ce){$=x.lastIndexOf(";",K-1)+1;continue}const le=f(x,$,K),ye=m(x,K,le),j=x.slice(le,ye);if(A[j]===void 0){let N=f(x,K+1,ce),R=m(x,ce,N);const P=O(x.slice(N,R));A[j]=P}$=ce+1}while($<k);return A}function f(x,C,A){do{const k=x.charCodeAt(C);if(k!==32&&k!==9)return C}while(++C<A);return A}function m(x,C,A){for(;C>A;){const k=x.charCodeAt(--C);if(k!==32&&k!==9)return C+1}return A}function y(x,C,A){const k=(A==null?void 0:A.encode)||encodeURIComponent;if(!n.test(x))throw new TypeError(`argument name is invalid: ${x}`);const O=k(C);if(!e.test(O))throw new TypeError(`argument val is invalid: ${C}`);let $=x+"="+O;if(!A)return $;if(A.maxAge!==void 0){if(!Number.isInteger(A.maxAge))throw new TypeError(`option maxAge is invalid: ${A.maxAge}`);$+="; Max-Age="+A.maxAge}if(A.domain){if(!t.test(A.domain))throw new TypeError(`option domain is invalid: ${A.domain}`);$+="; Domain="+A.domain}if(A.path){if(!i.test(A.path))throw new TypeError(`option path is invalid: ${A.path}`);$+="; Path="+A.path}if(A.expires){if(!E(A.expires)||!Number.isFinite(A.expires.valueOf()))throw new TypeError(`option expires is invalid: ${A.expires}`);$+="; Expires="+A.expires.toUTCString()}if(A.httpOnly&&($+="; HttpOnly"),A.secure&&($+="; Secure"),A.partitioned&&($+="; Partitioned"),A.priority)switch(typeof A.priority=="string"?A.priority.toLowerCase():void 0){case"low":$+="; Priority=Low";break;case"medium":$+="; Priority=Medium";break;case"high":$+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${A.priority}`)}if(A.sameSite)switch(typeof A.sameSite=="string"?A.sameSite.toLowerCase():A.sameSite){case!0:case"strict":$+="; SameSite=Strict";break;case"lax":$+="; SameSite=Lax";break;case"none":$+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${A.sameSite}`)}return $}function v(x){if(x.indexOf("%")===-1)return x;try{return decodeURIComponent(x)}catch{return x}}function E(x){return a.call(x)==="[object Date]"}return pc}ES();var K_="popstate";function TS(n={}){function e(a,l){let{pathname:u="/",search:f="",hash:m=""}=Sa(a.location.hash.substring(1));return!u.startsWith("/")&&!u.startsWith(".")&&(u="/"+u),Vp("",{pathname:u,search:f,hash:m},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function t(a,l){let u=a.document.querySelector("base"),f="";if(u&&u.getAttribute("href")){let m=a.location.href,y=m.indexOf("#");f=y===-1?m:m.slice(0,y)}return f+"#"+(typeof l=="string"?l:Ic(l))}function i(a,l){Jn(a.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(l)})`)}return wS(e,t,i,n)}function ht(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Jn(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function xS(){return Math.random().toString(36).substring(2,10)}function Q_(n,e){return{usr:n.state,key:n.key,idx:e}}function Vp(n,e,t=null,i){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Sa(e):e,state:t,key:e&&e.key||i||xS()}}function Ic({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Sa(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substring(i),n=n.substring(0,i)),n&&(e.pathname=n)}return e}function wS(n,e,t,i={}){let{window:a=document.defaultView,v5Compat:l=!1}=i,u=a.history,f="POP",m=null,y=v();y==null&&(y=0,u.replaceState({...u.state,idx:y},""));function v(){return(u.state||{idx:null}).idx}function E(){f="POP";let O=v(),$=O==null?null:O-y;y=O,m&&m({action:f,location:k.location,delta:$})}function x(O,$){f="PUSH";let K=Vp(k.location,O,$);t&&t(K,O),y=v()+1;let z=Q_(K,y),ce=k.createHref(K);try{u.pushState(z,"",ce)}catch(le){if(le instanceof DOMException&&le.name==="DataCloneError")throw le;a.location.assign(ce)}l&&m&&m({action:f,location:k.location,delta:1})}function C(O,$){f="REPLACE";let K=Vp(k.location,O,$);t&&t(K,O),y=v();let z=Q_(K,y),ce=k.createHref(K);u.replaceState(z,"",ce),l&&m&&m({action:f,location:k.location,delta:0})}function A(O){return AS(O)}let k={get action(){return f},get location(){return n(a,u)},listen(O){if(m)throw new Error("A history only accepts one active listener");return a.addEventListener(K_,E),m=O,()=>{a.removeEventListener(K_,E),m=null}},createHref(O){return e(a,O)},createURL:A,encodeLocation(O){let $=A(O);return{pathname:$.pathname,search:$.search,hash:$.hash}},push:x,replace:C,go(O){return u.go(O)}};return k}function AS(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),ht(t,"No window.location.(origin|href) available to create URL");let i=typeof n=="string"?n:Ic(n);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=t+i),new URL(i,t)}function s1(n,e,t="/"){return SS(n,e,t,!1)}function SS(n,e,t,i){let a=typeof e=="string"?Sa(e):e,l=_i(a.pathname||"/",t);if(l==null)return null;let u=a1(n);CS(u);let f=null;for(let m=0;f==null&&m<u.length;++m){let y=LS(l);f=kS(u[m],y,i)}return f}function a1(n,e=[],t=[],i=""){let a=(l,u,f)=>{let m={relativePath:f===void 0?l.path||"":f,caseSensitive:l.caseSensitive===!0,childrenIndex:u,route:l};m.relativePath.startsWith("/")&&(ht(m.relativePath.startsWith(i),`Absolute route path "${m.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),m.relativePath=m.relativePath.slice(i.length));let y=gi([i,m.relativePath]),v=t.concat(m);l.children&&l.children.length>0&&(ht(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${y}".`),a1(l.children,e,v,y)),!(l.path==null&&!l.index)&&e.push({path:y,score:jS(y,l.index),routesMeta:v})};return n.forEach((l,u)=>{var f;if(l.path===""||!((f=l.path)!=null&&f.includes("?")))a(l,u);else for(let m of o1(l.path))a(l,u,m)}),e}function o1(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,a=t.endsWith("?"),l=t.replace(/\?$/,"");if(i.length===0)return a?[l,""]:[l];let u=o1(i.join("/")),f=[];return f.push(...u.map(m=>m===""?l:[l,m].join("/"))),a&&f.push(...u),f.map(m=>n.startsWith("/")&&m===""?"/":m)}function CS(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:MS(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var NS=/^:[\w-]+$/,RS=3,IS=2,OS=1,DS=10,PS=-2,W_=n=>n==="*";function jS(n,e){let t=n.split("/"),i=t.length;return t.some(W_)&&(i+=PS),e&&(i+=IS),t.filter(a=>!W_(a)).reduce((a,l)=>a+(NS.test(l)?RS:l===""?OS:DS),i)}function MS(n,e){return n.length===e.length&&n.slice(0,-1).every((i,a)=>i===e[a])?n[n.length-1]-e[e.length-1]:0}function kS(n,e,t=!1){let{routesMeta:i}=n,a={},l="/",u=[];for(let f=0;f<i.length;++f){let m=i[f],y=f===i.length-1,v=l==="/"?e:e.slice(l.length)||"/",E=rh({path:m.relativePath,caseSensitive:m.caseSensitive,end:y},v),x=m.route;if(!E&&y&&t&&!i[i.length-1].route.index&&(E=rh({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},v)),!E)return null;Object.assign(a,E.params),u.push({params:a,pathname:gi([l,E.pathname]),pathnameBase:qS(gi([l,E.pathnameBase])),route:x}),E.pathnameBase!=="/"&&(l=gi([l,E.pathnameBase]))}return u}function rh(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=VS(n.path,n.caseSensitive,n.end),a=e.match(t);if(!a)return null;let l=a[0],u=l.replace(/(.)\/+$/,"$1"),f=a.slice(1);return{params:i.reduce((y,{paramName:v,isOptional:E},x)=>{if(v==="*"){let A=f[x]||"";u=l.slice(0,l.length-A.length).replace(/(.)\/+$/,"$1")}const C=f[x];return E&&!C?y[v]=void 0:y[v]=(C||"").replace(/%2F/g,"/"),y},{}),pathname:l,pathnameBase:u,pattern:n}}function VS(n,e=!1,t=!0){Jn(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let i=[],a="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,f,m)=>(i.push({paramName:f,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(i.push({paramName:"*"}),a+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?a+="\\/*$":n!==""&&n!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),i]}function LS(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Jn(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function _i(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}function US(n,e="/"){let{pathname:t,search:i="",hash:a=""}=typeof n=="string"?Sa(n):n;return{pathname:t?t.startsWith("/")?t:zS(t,e):e,search:FS(i),hash:HS(a)}}function zS(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(a=>{a===".."?t.length>1&&t.pop():a!=="."&&t.push(a)}),t.length>1?t.join("/"):"/"}function _p(n,e,t,i){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function BS(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function vg(n){let e=BS(n);return e.map((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)}function _g(n,e,t,i=!1){let a;typeof n=="string"?a=Sa(n):(a={...n},ht(!a.pathname||!a.pathname.includes("?"),_p("?","pathname","search",a)),ht(!a.pathname||!a.pathname.includes("#"),_p("#","pathname","hash",a)),ht(!a.search||!a.search.includes("#"),_p("#","search","hash",a)));let l=n===""||a.pathname==="",u=l?"/":a.pathname,f;if(u==null)f=t;else{let E=e.length-1;if(!i&&u.startsWith("..")){let x=u.split("/");for(;x[0]==="..";)x.shift(),E-=1;a.pathname=x.join("/")}f=E>=0?e[E]:"/"}let m=US(a,f),y=u&&u!=="/"&&u.endsWith("/"),v=(l||u===".")&&t.endsWith("/");return!m.pathname.endsWith("/")&&(y||v)&&(m.pathname+="/"),m}var gi=n=>n.join("/").replace(/\/\/+/g,"/"),qS=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),FS=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,HS=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function GS(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var l1=["POST","PUT","PATCH","DELETE"];new Set(l1);var $S=["GET",...l1];new Set($S);var Ko=V.createContext(null);Ko.displayName="DataRouter";var Rh=V.createContext(null);Rh.displayName="DataRouterState";var c1=V.createContext({isTransitioning:!1});c1.displayName="ViewTransition";var YS=V.createContext(new Map);YS.displayName="Fetchers";var KS=V.createContext(null);KS.displayName="Await";var hr=V.createContext(null);hr.displayName="Navigation";var Fc=V.createContext(null);Fc.displayName="Location";var er=V.createContext({outlet:null,matches:[],isDataRoute:!1});er.displayName="Route";var bg=V.createContext(null);bg.displayName="RouteError";function QS(n,{relative:e}={}){ht(Qo(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=V.useContext(hr),{hash:a,pathname:l,search:u}=Hc(n,{relative:e}),f=l;return t!=="/"&&(f=l==="/"?t:gi([t,l])),i.createHref({pathname:f,search:u,hash:a})}function Qo(){return V.useContext(Fc)!=null}function xs(){return ht(Qo(),"useLocation() may be used only in the context of a <Router> component."),V.useContext(Fc).location}var u1="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function d1(n){V.useContext(hr).static||V.useLayoutEffect(n)}function _n(){let{isDataRoute:n}=V.useContext(er);return n?uC():WS()}function WS(){ht(Qo(),"useNavigate() may be used only in the context of a <Router> component.");let n=V.useContext(Ko),{basename:e,navigator:t}=V.useContext(hr),{matches:i}=V.useContext(er),{pathname:a}=xs(),l=JSON.stringify(vg(i)),u=V.useRef(!1);return d1(()=>{u.current=!0}),V.useCallback((m,y={})=>{if(Jn(u.current,u1),!u.current)return;if(typeof m=="number"){t.go(m);return}let v=_g(m,JSON.parse(l),a,y.relative==="path");n==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:gi([e,v.pathname])),(y.replace?t.replace:t.push)(v,y.state,y)},[e,t,l,a,n])}var XS=V.createContext(null);function ZS(n){let e=V.useContext(er).outlet;return e&&V.createElement(XS.Provider,{value:n},e)}function Eg(){let{matches:n}=V.useContext(er),e=n[n.length-1];return e?e.params:{}}function Hc(n,{relative:e}={}){let{matches:t}=V.useContext(er),{pathname:i}=xs(),a=JSON.stringify(vg(t));return V.useMemo(()=>_g(n,JSON.parse(a),i,e==="path"),[n,a,i,e])}function JS(n,e){return h1(n,e)}function h1(n,e,t,i){var K;ht(Qo(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a,static:l}=V.useContext(hr),{matches:u}=V.useContext(er),f=u[u.length-1],m=f?f.params:{},y=f?f.pathname:"/",v=f?f.pathnameBase:"/",E=f&&f.route;{let z=E&&E.path||"";f1(y,!E||z.endsWith("*")||z.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${y}" (under <Route path="${z}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${z}"> to <Route path="${z==="/"?"*":`${z}/*`}">.`)}let x=xs(),C;if(e){let z=typeof e=="string"?Sa(e):e;ht(v==="/"||((K=z.pathname)==null?void 0:K.startsWith(v)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${v}" but pathname "${z.pathname}" was given in the \`location\` prop.`),C=z}else C=x;let A=C.pathname||"/",k=A;if(v!=="/"){let z=v.replace(/^\//,"").split("/");k="/"+A.replace(/^\//,"").split("/").slice(z.length).join("/")}let O=!l&&t&&t.matches&&t.matches.length>0?t.matches:s1(n,{pathname:k});Jn(E||O!=null,`No routes matched location "${C.pathname}${C.search}${C.hash}" `),Jn(O==null||O[O.length-1].route.element!==void 0||O[O.length-1].route.Component!==void 0||O[O.length-1].route.lazy!==void 0,`Matched leaf route at location "${C.pathname}${C.search}${C.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let $=iC(O&&O.map(z=>Object.assign({},z,{params:Object.assign({},m,z.params),pathname:gi([v,a.encodeLocation?a.encodeLocation(z.pathname).pathname:z.pathname]),pathnameBase:z.pathnameBase==="/"?v:gi([v,a.encodeLocation?a.encodeLocation(z.pathnameBase).pathname:z.pathnameBase])})),u,t,i);return e&&$?V.createElement(Fc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...C},navigationType:"POP"}},$):$}function eC(){let n=cC(),e=GS(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i},l={padding:"2px 4px",backgroundColor:i},u=null;return console.error("Error handled by React Router default ErrorBoundary:",n),u=V.createElement(V.Fragment,null,V.createElement("p",null,"💿 Hey developer 👋"),V.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",V.createElement("code",{style:l},"ErrorBoundary")," or"," ",V.createElement("code",{style:l},"errorElement")," prop on your route.")),V.createElement(V.Fragment,null,V.createElement("h2",null,"Unexpected Application Error!"),V.createElement("h3",{style:{fontStyle:"italic"}},e),t?V.createElement("pre",{style:a},t):null,u)}var tC=V.createElement(eC,null),nC=class extends V.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?V.createElement(er.Provider,{value:this.props.routeContext},V.createElement(bg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function rC({routeContext:n,match:e,children:t}){let i=V.useContext(Ko);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),V.createElement(er.Provider,{value:n},t)}function iC(n,e=[],t=null,i=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let a=n,l=t==null?void 0:t.errors;if(l!=null){let m=a.findIndex(y=>y.route.id&&(l==null?void 0:l[y.route.id])!==void 0);ht(m>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),a=a.slice(0,Math.min(a.length,m+1))}let u=!1,f=-1;if(t)for(let m=0;m<a.length;m++){let y=a[m];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(f=m),y.route.id){let{loaderData:v,errors:E}=t,x=y.route.loader&&!v.hasOwnProperty(y.route.id)&&(!E||E[y.route.id]===void 0);if(y.route.lazy||x){u=!0,f>=0?a=a.slice(0,f+1):a=[a[0]];break}}}return a.reduceRight((m,y,v)=>{let E,x=!1,C=null,A=null;t&&(E=l&&y.route.id?l[y.route.id]:void 0,C=y.route.errorElement||tC,u&&(f<0&&v===0?(f1("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),x=!0,A=null):f===v&&(x=!0,A=y.route.hydrateFallbackElement||null)));let k=e.concat(a.slice(0,v+1)),O=()=>{let $;return E?$=C:x?$=A:y.route.Component?$=V.createElement(y.route.Component,null):y.route.element?$=y.route.element:$=m,V.createElement(rC,{match:y,routeContext:{outlet:m,matches:k,isDataRoute:t!=null},children:$})};return t&&(y.route.ErrorBoundary||y.route.errorElement||v===0)?V.createElement(nC,{location:t.location,revalidation:t.revalidation,component:C,error:E,children:O(),routeContext:{outlet:null,matches:k,isDataRoute:!0}}):O()},null)}function Tg(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function sC(n){let e=V.useContext(Ko);return ht(e,Tg(n)),e}function aC(n){let e=V.useContext(Rh);return ht(e,Tg(n)),e}function oC(n){let e=V.useContext(er);return ht(e,Tg(n)),e}function xg(n){let e=oC(n),t=e.matches[e.matches.length-1];return ht(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function lC(){return xg("useRouteId")}function cC(){var i;let n=V.useContext(bg),e=aC("useRouteError"),t=xg("useRouteError");return n!==void 0?n:(i=e.errors)==null?void 0:i[t]}function uC(){let{router:n}=sC("useNavigate"),e=xg("useNavigate"),t=V.useRef(!1);return d1(()=>{t.current=!0}),V.useCallback(async(a,l={})=>{Jn(t.current,u1),t.current&&(typeof a=="number"?n.navigate(a):await n.navigate(a,{fromRouteId:e,...l}))},[n,e])}var X_={};function f1(n,e,t){!e&&!X_[n]&&(X_[n]=!0,Jn(!1,t))}V.memo(dC);function dC({routes:n,future:e,state:t}){return h1(n,void 0,t,e)}function m1({to:n,replace:e,state:t,relative:i}){ht(Qo(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=V.useContext(hr);Jn(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=V.useContext(er),{pathname:u}=xs(),f=_n(),m=_g(n,vg(l),u,i==="path"),y=JSON.stringify(m);return V.useEffect(()=>{f(JSON.parse(y),{replace:e,state:t,relative:i})},[f,y,i,e,t]),null}function hC(n){return ZS(n.context)}function gn(n){ht(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function fC({basename:n="/",children:e=null,location:t,navigationType:i="POP",navigator:a,static:l=!1}){ht(!Qo(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=n.replace(/^\/*/,"/"),f=V.useMemo(()=>({basename:u,navigator:a,static:l,future:{}}),[u,a,l]);typeof t=="string"&&(t=Sa(t));let{pathname:m="/",search:y="",hash:v="",state:E=null,key:x="default"}=t,C=V.useMemo(()=>{let A=_i(m,u);return A==null?null:{location:{pathname:A,search:y,hash:v,state:E,key:x},navigationType:i}},[u,m,y,v,E,x,i]);return Jn(C!=null,`<Router basename="${u}"> is not able to match the URL "${m}${y}${v}" because it does not start with the basename, so the <Router> won't render anything.`),C==null?null:V.createElement(hr.Provider,{value:f},V.createElement(Fc.Provider,{children:e,value:C}))}function mC({children:n,location:e}){return JS(Lp(n),e)}function Lp(n,e=[]){let t=[];return V.Children.forEach(n,(i,a)=>{if(!V.isValidElement(i))return;let l=[...e,a];if(i.type===V.Fragment){t.push.apply(t,Lp(i.props.children,l));return}ht(i.type===gn,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ht(!i.props.index||!i.props.children,"An index route cannot have child routes.");let u={id:i.props.id||l.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(u.children=Lp(i.props.children,l)),t.push(u)}),t}var zd="get",Bd="application/x-www-form-urlencoded";function Ih(n){return n!=null&&typeof n.tagName=="string"}function pC(n){return Ih(n)&&n.tagName.toLowerCase()==="button"}function gC(n){return Ih(n)&&n.tagName.toLowerCase()==="form"}function yC(n){return Ih(n)&&n.tagName.toLowerCase()==="input"}function vC(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function _C(n,e){return n.button===0&&(!e||e==="_self")&&!vC(n)}var Dd=null;function bC(){if(Dd===null)try{new FormData(document.createElement("form"),0),Dd=!1}catch{Dd=!0}return Dd}var EC=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function bp(n){return n!=null&&!EC.has(n)?(Jn(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Bd}"`),null):n}function TC(n,e){let t,i,a,l,u;if(gC(n)){let f=n.getAttribute("action");i=f?_i(f,e):null,t=n.getAttribute("method")||zd,a=bp(n.getAttribute("enctype"))||Bd,l=new FormData(n)}else if(pC(n)||yC(n)&&(n.type==="submit"||n.type==="image")){let f=n.form;if(f==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=n.getAttribute("formaction")||f.getAttribute("action");if(i=m?_i(m,e):null,t=n.getAttribute("formmethod")||f.getAttribute("method")||zd,a=bp(n.getAttribute("formenctype"))||bp(f.getAttribute("enctype"))||Bd,l=new FormData(f,n),!bC()){let{name:y,type:v,value:E}=n;if(v==="image"){let x=y?`${y}.`:"";l.append(`${x}x`,"0"),l.append(`${x}y`,"0")}else y&&l.append(y,E)}}else{if(Ih(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=zd,i=null,a=Bd,u=n}return l&&a==="text/plain"&&(u=l,l=void 0),{action:i,method:t.toLowerCase(),encType:a,formData:l,body:u}}function wg(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function xC(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function wC(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function AC(n,e,t){let i=await Promise.all(n.map(async a=>{let l=e.routes[a.route.id];if(l){let u=await xC(l,t);return u.links?u.links():[]}return[]}));return RC(i.flat(1).filter(wC).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function Z_(n,e,t,i,a,l){let u=(m,y)=>t[y]?m.route.id!==t[y].route.id:!0,f=(m,y)=>{var v;return t[y].pathname!==m.pathname||((v=t[y].route.path)==null?void 0:v.endsWith("*"))&&t[y].params["*"]!==m.params["*"]};return l==="assets"?e.filter((m,y)=>u(m,y)||f(m,y)):l==="data"?e.filter((m,y)=>{var E;let v=i.routes[m.route.id];if(!v||!v.hasLoader)return!1;if(u(m,y)||f(m,y))return!0;if(m.route.shouldRevalidate){let x=m.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((E=t[0])==null?void 0:E.params)||{},nextUrl:new URL(n,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof x=="boolean")return x}return!0}):[]}function SC(n,e,{includeHydrateFallback:t}={}){return CC(n.map(i=>{let a=e.routes[i.route.id];if(!a)return[];let l=[a.module];return a.clientActionModule&&(l=l.concat(a.clientActionModule)),a.clientLoaderModule&&(l=l.concat(a.clientLoaderModule)),t&&a.hydrateFallbackModule&&(l=l.concat(a.hydrateFallbackModule)),a.imports&&(l=l.concat(a.imports)),l}).flat(1))}function CC(n){return[...new Set(n)]}function NC(n){let e={},t=Object.keys(n).sort();for(let i of t)e[i]=n[i];return e}function RC(n,e){let t=new Set;return new Set(e),n.reduce((i,a)=>{let l=JSON.stringify(NC(a));return t.has(l)||(t.add(l),i.push({key:l,link:a})),i},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var IC=new Set([100,101,204,205]);function OC(n,e){let t=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t.pathname==="/"?t.pathname="_root.data":e&&_i(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function p1(){let n=V.useContext(Ko);return wg(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function DC(){let n=V.useContext(Rh);return wg(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Ag=V.createContext(void 0);Ag.displayName="FrameworkContext";function g1(){let n=V.useContext(Ag);return wg(n,"You must render this element inside a <HydratedRouter> element"),n}function PC(n,e){let t=V.useContext(Ag),[i,a]=V.useState(!1),[l,u]=V.useState(!1),{onFocus:f,onBlur:m,onMouseEnter:y,onMouseLeave:v,onTouchStart:E}=e,x=V.useRef(null);V.useEffect(()=>{if(n==="render"&&u(!0),n==="viewport"){let k=$=>{$.forEach(K=>{u(K.isIntersecting)})},O=new IntersectionObserver(k,{threshold:.5});return x.current&&O.observe(x.current),()=>{O.disconnect()}}},[n]),V.useEffect(()=>{if(i){let k=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(k)}}},[i]);let C=()=>{a(!0)},A=()=>{a(!1),u(!1)};return t?n!=="intent"?[l,x,{}]:[l,x,{onFocus:gc(f,C),onBlur:gc(m,A),onMouseEnter:gc(y,C),onMouseLeave:gc(v,A),onTouchStart:gc(E,C)}]:[!1,x,{}]}function gc(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function jC({page:n,...e}){let{router:t}=p1(),i=V.useMemo(()=>s1(t.routes,n,t.basename),[t.routes,n,t.basename]);return i?V.createElement(kC,{page:n,matches:i,...e}):null}function MC(n){let{manifest:e,routeModules:t}=g1(),[i,a]=V.useState([]);return V.useEffect(()=>{let l=!1;return AC(n,e,t).then(u=>{l||a(u)}),()=>{l=!0}},[n,e,t]),i}function kC({page:n,matches:e,...t}){let i=xs(),{manifest:a,routeModules:l}=g1(),{basename:u}=p1(),{loaderData:f,matches:m}=DC(),y=V.useMemo(()=>Z_(n,e,m,a,i,"data"),[n,e,m,a,i]),v=V.useMemo(()=>Z_(n,e,m,a,i,"assets"),[n,e,m,a,i]),E=V.useMemo(()=>{if(n===i.pathname+i.search+i.hash)return[];let A=new Set,k=!1;if(e.forEach($=>{var z;let K=a.routes[$.route.id];!K||!K.hasLoader||(!y.some(ce=>ce.route.id===$.route.id)&&$.route.id in f&&((z=l[$.route.id])!=null&&z.shouldRevalidate)||K.hasClientLoader?k=!0:A.add($.route.id))}),A.size===0)return[];let O=OC(n,u);return k&&A.size>0&&O.searchParams.set("_routes",e.filter($=>A.has($.route.id)).map($=>$.route.id).join(",")),[O.pathname+O.search]},[u,f,i,a,y,e,n,l]),x=V.useMemo(()=>SC(v,a),[v,a]),C=MC(v);return V.createElement(V.Fragment,null,E.map(A=>V.createElement("link",{key:A,rel:"prefetch",as:"fetch",href:A,...t})),x.map(A=>V.createElement("link",{key:A,rel:"modulepreload",href:A,...t})),C.map(({key:A,link:k})=>V.createElement("link",{key:A,...k})))}function VC(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var y1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{y1&&(window.__reactRouterVersion="7.6.0")}catch{}function LC({basename:n,children:e,window:t}){let i=V.useRef();i.current==null&&(i.current=TS({window:t,v5Compat:!0}));let a=i.current,[l,u]=V.useState({action:a.action,location:a.location}),f=V.useCallback(m=>{V.startTransition(()=>u(m))},[u]);return V.useLayoutEffect(()=>a.listen(f),[a,f]),V.createElement(fC,{basename:n,children:e,location:l.location,navigationType:l.action,navigator:a})}var v1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Oh=V.forwardRef(function({onClick:e,discover:t="render",prefetch:i="none",relative:a,reloadDocument:l,replace:u,state:f,target:m,to:y,preventScrollReset:v,viewTransition:E,...x},C){let{basename:A}=V.useContext(hr),k=typeof y=="string"&&v1.test(y),O,$=!1;if(typeof y=="string"&&k&&(O=y,y1))try{let R=new URL(window.location.href),P=y.startsWith("//")?new URL(R.protocol+y):new URL(y),U=_i(P.pathname,A);P.origin===R.origin&&U!=null?y=U+P.search+P.hash:$=!0}catch{Jn(!1,`<Link to="${y}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let K=QS(y,{relative:a}),[z,ce,le]=PC(i,x),ye=BC(y,{replace:u,state:f,target:m,preventScrollReset:v,relative:a,viewTransition:E});function j(R){e&&e(R),R.defaultPrevented||ye(R)}let N=V.createElement("a",{...x,...le,href:O||K,onClick:$||l?e:j,ref:VC(C,ce),target:m,"data-discover":!k&&t==="render"?"true":void 0});return z&&!k?V.createElement(V.Fragment,null,N,V.createElement(jC,{page:K})):N});Oh.displayName="Link";var ha=V.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:i="",end:a=!1,style:l,to:u,viewTransition:f,children:m,...y},v){let E=Hc(u,{relative:y.relative}),x=xs(),C=V.useContext(Rh),{navigator:A,basename:k}=V.useContext(hr),O=C!=null&&$C(E)&&f===!0,$=A.encodeLocation?A.encodeLocation(E).pathname:E.pathname,K=x.pathname,z=C&&C.navigation&&C.navigation.location?C.navigation.location.pathname:null;t||(K=K.toLowerCase(),z=z?z.toLowerCase():null,$=$.toLowerCase()),z&&k&&(z=_i(z,k)||z);const ce=$!=="/"&&$.endsWith("/")?$.length-1:$.length;let le=K===$||!a&&K.startsWith($)&&K.charAt(ce)==="/",ye=z!=null&&(z===$||!a&&z.startsWith($)&&z.charAt($.length)==="/"),j={isActive:le,isPending:ye,isTransitioning:O},N=le?e:void 0,R;typeof i=="function"?R=i(j):R=[i,le?"active":null,ye?"pending":null,O?"transitioning":null].filter(Boolean).join(" ");let P=typeof l=="function"?l(j):l;return V.createElement(Oh,{...y,"aria-current":N,className:R,ref:v,style:P,to:u,viewTransition:f},typeof m=="function"?m(j):m)});ha.displayName="NavLink";var UC=V.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:i,replace:a,state:l,method:u=zd,action:f,onSubmit:m,relative:y,preventScrollReset:v,viewTransition:E,...x},C)=>{let A=HC(),k=GC(f,{relative:y}),O=u.toLowerCase()==="get"?"get":"post",$=typeof f=="string"&&v1.test(f),K=z=>{if(m&&m(z),z.defaultPrevented)return;z.preventDefault();let ce=z.nativeEvent.submitter,le=(ce==null?void 0:ce.getAttribute("formmethod"))||u;A(ce||z.currentTarget,{fetcherKey:e,method:le,navigate:t,replace:a,state:l,relative:y,preventScrollReset:v,viewTransition:E})};return V.createElement("form",{ref:C,method:O,action:k,onSubmit:i?m:K,...x,"data-discover":!$&&n==="render"?"true":void 0})});UC.displayName="Form";function zC(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function _1(n){let e=V.useContext(Ko);return ht(e,zC(n)),e}function BC(n,{target:e,replace:t,state:i,preventScrollReset:a,relative:l,viewTransition:u}={}){let f=_n(),m=xs(),y=Hc(n,{relative:l});return V.useCallback(v=>{if(_C(v,e)){v.preventDefault();let E=t!==void 0?t:Ic(m)===Ic(y);f(n,{replace:E,state:i,preventScrollReset:a,relative:l,viewTransition:u})}},[m,f,y,t,i,e,n,a,l,u])}var qC=0,FC=()=>`__${String(++qC)}__`;function HC(){let{router:n}=_1("useSubmit"),{basename:e}=V.useContext(hr),t=lC();return V.useCallback(async(i,a={})=>{let{action:l,method:u,encType:f,formData:m,body:y}=TC(i,e);if(a.navigate===!1){let v=a.fetcherKey||FC();await n.fetch(v,t,a.action||l,{preventScrollReset:a.preventScrollReset,formData:m,body:y,formMethod:a.method||u,formEncType:a.encType||f,flushSync:a.flushSync})}else await n.navigate(a.action||l,{preventScrollReset:a.preventScrollReset,formData:m,body:y,formMethod:a.method||u,formEncType:a.encType||f,replace:a.replace,state:a.state,fromRouteId:t,flushSync:a.flushSync,viewTransition:a.viewTransition})},[n,e,t])}function GC(n,{relative:e}={}){let{basename:t}=V.useContext(hr),i=V.useContext(er);ht(i,"useFormAction must be used inside a RouteContext");let[a]=i.matches.slice(-1),l={...Hc(n||".",{relative:e})},u=xs();if(n==null){l.search=u.search;let f=new URLSearchParams(l.search),m=f.getAll("index");if(m.some(v=>v==="")){f.delete("index"),m.filter(E=>E).forEach(E=>f.append("index",E));let v=f.toString();l.search=v?`?${v}`:""}}return(!n||n===".")&&a.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:gi([t,l.pathname])),Ic(l)}function $C(n,e={}){let t=V.useContext(c1);ht(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=_1("useViewTransitionState"),a=Hc(n,{relative:e.relative});if(!t.isTransitioning)return!1;let l=_i(t.currentLocation.pathname,i)||t.currentLocation.pathname,u=_i(t.nextLocation.pathname,i)||t.nextLocation.pathname;return rh(a.pathname,u)!=null||rh(a.pathname,l)!=null}[...IC];const YC=()=>{};var J_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b1=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let a=n.charCodeAt(i);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(a=65536+((a&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},KC=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const a=n[t++];if(a<128)e[i++]=String.fromCharCode(a);else if(a>191&&a<224){const l=n[t++];e[i++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=n[t++],u=n[t++],f=n[t++],m=((a&7)<<18|(l&63)<<12|(u&63)<<6|f&63)-65536;e[i++]=String.fromCharCode(55296+(m>>10)),e[i++]=String.fromCharCode(56320+(m&1023))}else{const l=n[t++],u=n[t++];e[i++]=String.fromCharCode((a&15)<<12|(l&63)<<6|u&63)}}return e.join("")},E1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let a=0;a<n.length;a+=3){const l=n[a],u=a+1<n.length,f=u?n[a+1]:0,m=a+2<n.length,y=m?n[a+2]:0,v=l>>2,E=(l&3)<<4|f>>4;let x=(f&15)<<2|y>>6,C=y&63;m||(C=64,u||(x=64)),i.push(t[v],t[E],t[x],t[C])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(b1(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):KC(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let a=0;a<n.length;){const l=t[n.charAt(a++)],f=a<n.length?t[n.charAt(a)]:0;++a;const y=a<n.length?t[n.charAt(a)]:64;++a;const E=a<n.length?t[n.charAt(a)]:64;if(++a,l==null||f==null||y==null||E==null)throw new QC;const x=l<<2|f>>4;if(i.push(x),y!==64){const C=f<<4&240|y>>2;if(i.push(C),E!==64){const A=y<<6&192|E;i.push(A)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class QC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const WC=function(n){const e=b1(n);return E1.encodeByteArray(e,!0)},ih=function(n){return WC(n).replace(/\./g,"")},T1=function(n){try{return E1.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZC=()=>XC().__FIREBASE_DEFAULTS__,JC=()=>{if(typeof process>"u"||typeof J_>"u")return;const n=J_.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},eN=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&T1(n[1]);return e&&JSON.parse(e)},Dh=()=>{try{return YC()||ZC()||JC()||eN()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},x1=n=>{var e,t;return(t=(e=Dh())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},tN=n=>{const e=x1(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},w1=()=>{var n;return(n=Dh())===null||n===void 0?void 0:n.config},A1=n=>{var e;return(e=Dh())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nN{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gc(n){return n.endsWith(".cloudworkstations.dev")}async function S1(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rN(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",a=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},n);return[ih(JSON.stringify(t)),ih(JSON.stringify(u)),""].join(".")}const wc={};function iN(){const n={prod:[],emulator:[]};for(const e of Object.keys(wc))wc[e]?n.emulator.push(e):n.prod.push(e);return n}function sN(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let eb=!1;function Ph(n,e){if(typeof window>"u"||typeof document>"u"||!Gc(window.location.host)||wc[n]===e||wc[n]||eb)return;wc[n]=e;function t(x){return`__firebase__banner__${x}`}const i="__firebase__banner",l=iN().prod.length>0;function u(){const x=document.getElementById(i);x&&x.remove()}function f(x){x.style.display="flex",x.style.background="#7faaf0",x.style.position="fixed",x.style.bottom="5px",x.style.left="5px",x.style.padding=".5em",x.style.borderRadius="5px",x.style.alignItems="center"}function m(x,C){x.setAttribute("width","24"),x.setAttribute("id",C),x.setAttribute("height","24"),x.setAttribute("viewBox","0 0 24 24"),x.setAttribute("fill","none"),x.style.marginLeft="-6px"}function y(){const x=document.createElement("span");return x.style.cursor="pointer",x.style.marginLeft="16px",x.style.fontSize="24px",x.innerHTML=" &times;",x.onclick=()=>{eb=!0,u()},x}function v(x,C){x.setAttribute("id",C),x.innerText="Learn more",x.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",x.setAttribute("target","__blank"),x.style.paddingLeft="5px",x.style.textDecoration="underline"}function E(){const x=sN(i),C=t("text"),A=document.getElementById(C)||document.createElement("span"),k=t("learnmore"),O=document.getElementById(k)||document.createElement("a"),$=t("preprendIcon"),K=document.getElementById($)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(x.created){const z=x.element;f(z),v(O,k);const ce=y();m(K,$),z.append(K,A,O,ce),document.body.appendChild(z)}l?(A.innerText="Preview backend disconnected.",K.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(K.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,A.innerText="Preview backend running in this workspace."),A.setAttribute("id",C)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function aN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(dn())}function oN(){var n;const e=(n=Dh())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function lN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function cN(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function uN(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function dN(){const n=dn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function hN(){return!oN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function fN(){try{return typeof indexedDB=="object"}catch{return!1}}function mN(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(i);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{var l;e(((l=a.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pN="FirebaseError";class Ai extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=pN,Object.setPrototypeOf(this,Ai.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,$c.prototype.create)}}class $c{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],u=l?gN(l,i):"Error",f=`${this.serviceName}: ${u} (${a}).`;return new Ai(a,f,i)}}function gN(n,e){return n.replace(yN,(t,i)=>{const a=e[i];return a!=null?String(a):`<${i}?>`})}const yN=/\{\$([^}]+)}/g;function vN(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function _a(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const a of t){if(!i.includes(a))return!1;const l=n[a],u=e[a];if(tb(l)&&tb(u)){if(!_a(l,u))return!1}else if(l!==u)return!1}for(const a of i)if(!t.includes(a))return!1;return!0}function tb(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yc(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function vc(n){const e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[a,l]=i.split("=");e[decodeURIComponent(a)]=decodeURIComponent(l)}}),e}function _c(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function _N(n,e){const t=new bN(n,e);return t.subscribe.bind(t)}class bN{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let a;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");EN(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:i},a.next===void 0&&(a.next=Ep),a.error===void 0&&(a.error=Ep),a.complete===void 0&&(a.complete=Ep);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function EN(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Ep(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lt(n){return n&&n._delegate?n._delegate:n}class ba{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TN{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new nN;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&i.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(l){if(a)return null;throw l}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(wN(e))try{this.getOrInitializeService({instanceIdentifier:fa})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});i.resolve(l)}catch{}}}}clearInstance(e=fa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=fa){return this.instances.has(e)}getOptions(e=fa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,u]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);i===f&&u.resolve(a)}return a}onInit(e,t){var i;const a=this.normalizeInstanceIdentifier(t),l=(i=this.onInitCallbacks.get(a))!==null&&i!==void 0?i:new Set;l.add(e),this.onInitCallbacks.set(a,l);const u=this.instances.get(a);return u&&e(u,a),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const a of i)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:xN(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=fa){return this.component?this.component.multipleInstances?e:fa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function xN(n){return n===fa?void 0:n}function wN(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AN{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new TN(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Le;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Le||(Le={}));const SN={debug:Le.DEBUG,verbose:Le.VERBOSE,info:Le.INFO,warn:Le.WARN,error:Le.ERROR,silent:Le.SILENT},CN=Le.INFO,NN={[Le.DEBUG]:"log",[Le.VERBOSE]:"log",[Le.INFO]:"info",[Le.WARN]:"warn",[Le.ERROR]:"error"},RN=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),a=NN[e];if(a)console[a](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Sg{constructor(e){this.name=e,this._logLevel=CN,this._logHandler=RN,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?SN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Le.DEBUG,...e),this._logHandler(this,Le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Le.VERBOSE,...e),this._logHandler(this,Le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Le.INFO,...e),this._logHandler(this,Le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Le.WARN,...e),this._logHandler(this,Le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Le.ERROR,...e),this._logHandler(this,Le.ERROR,...e)}}const IN=(n,e)=>e.some(t=>n instanceof t);let nb,rb;function ON(){return nb||(nb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function DN(){return rb||(rb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const C1=new WeakMap,Up=new WeakMap,N1=new WeakMap,Tp=new WeakMap,Cg=new WeakMap;function PN(n){const e=new Promise((t,i)=>{const a=()=>{n.removeEventListener("success",l),n.removeEventListener("error",u)},l=()=>{t(us(n.result)),a()},u=()=>{i(n.error),a()};n.addEventListener("success",l),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&C1.set(t,n)}).catch(()=>{}),Cg.set(e,n),e}function jN(n){if(Up.has(n))return;const e=new Promise((t,i)=>{const a=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",u),n.removeEventListener("abort",u)},l=()=>{t(),a()},u=()=>{i(n.error||new DOMException("AbortError","AbortError")),a()};n.addEventListener("complete",l),n.addEventListener("error",u),n.addEventListener("abort",u)});Up.set(n,e)}let zp={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Up.get(n);if(e==="objectStoreNames")return n.objectStoreNames||N1.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return us(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function MN(n){zp=n(zp)}function kN(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(xp(this),e,...t);return N1.set(i,e.sort?e.sort():[e]),us(i)}:DN().includes(n)?function(...e){return n.apply(xp(this),e),us(C1.get(this))}:function(...e){return us(n.apply(xp(this),e))}}function VN(n){return typeof n=="function"?kN(n):(n instanceof IDBTransaction&&jN(n),IN(n,ON())?new Proxy(n,zp):n)}function us(n){if(n instanceof IDBRequest)return PN(n);if(Tp.has(n))return Tp.get(n);const e=VN(n);return e!==n&&(Tp.set(n,e),Cg.set(e,n)),e}const xp=n=>Cg.get(n);function LN(n,e,{blocked:t,upgrade:i,blocking:a,terminated:l}={}){const u=indexedDB.open(n,e),f=us(u);return i&&u.addEventListener("upgradeneeded",m=>{i(us(u.result),m.oldVersion,m.newVersion,us(u.transaction),m)}),t&&u.addEventListener("blocked",m=>t(m.oldVersion,m.newVersion,m)),f.then(m=>{l&&m.addEventListener("close",()=>l()),a&&m.addEventListener("versionchange",y=>a(y.oldVersion,y.newVersion,y))}).catch(()=>{}),f}const UN=["get","getKey","getAll","getAllKeys","count"],zN=["put","add","delete","clear"],wp=new Map;function ib(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(wp.get(e))return wp.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,a=zN.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(a||UN.includes(t)))return;const l=async function(u,...f){const m=this.transaction(u,a?"readwrite":"readonly");let y=m.store;return i&&(y=y.index(f.shift())),(await Promise.all([y[t](...f),a&&m.done]))[0]};return wp.set(e,l),l}MN(n=>({...n,get:(e,t,i)=>ib(e,t)||n.get(e,t,i),has:(e,t)=>!!ib(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BN{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(qN(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function qN(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Bp="@firebase/app",sb="0.12.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bi=new Sg("@firebase/app"),FN="@firebase/app-compat",HN="@firebase/analytics-compat",GN="@firebase/analytics",$N="@firebase/app-check-compat",YN="@firebase/app-check",KN="@firebase/auth",QN="@firebase/auth-compat",WN="@firebase/database",XN="@firebase/data-connect",ZN="@firebase/database-compat",JN="@firebase/functions",eR="@firebase/functions-compat",tR="@firebase/installations",nR="@firebase/installations-compat",rR="@firebase/messaging",iR="@firebase/messaging-compat",sR="@firebase/performance",aR="@firebase/performance-compat",oR="@firebase/remote-config",lR="@firebase/remote-config-compat",cR="@firebase/storage",uR="@firebase/storage-compat",dR="@firebase/firestore",hR="@firebase/vertexai",fR="@firebase/firestore-compat",mR="firebase",pR="11.7.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qp="[DEFAULT]",gR={[Bp]:"fire-core",[FN]:"fire-core-compat",[GN]:"fire-analytics",[HN]:"fire-analytics-compat",[YN]:"fire-app-check",[$N]:"fire-app-check-compat",[KN]:"fire-auth",[QN]:"fire-auth-compat",[WN]:"fire-rtdb",[XN]:"fire-data-connect",[ZN]:"fire-rtdb-compat",[JN]:"fire-fn",[eR]:"fire-fn-compat",[tR]:"fire-iid",[nR]:"fire-iid-compat",[rR]:"fire-fcm",[iR]:"fire-fcm-compat",[sR]:"fire-perf",[aR]:"fire-perf-compat",[oR]:"fire-rc",[lR]:"fire-rc-compat",[cR]:"fire-gcs",[uR]:"fire-gcs-compat",[dR]:"fire-fst",[fR]:"fire-fst-compat",[hR]:"fire-vertex","fire-js":"fire-js",[mR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sh=new Map,yR=new Map,Fp=new Map;function ab(n,e){try{n.container.addComponent(e)}catch(t){bi.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Vo(n){const e=n.name;if(Fp.has(e))return bi.debug(`There were multiple attempts to register component ${e}.`),!1;Fp.set(e,n);for(const t of sh.values())ab(t,n);for(const t of yR.values())ab(t,n);return!0}function Ng(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Xn(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ds=new $c("app","Firebase",vR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _R{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ba("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ds.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wo=pR;function R1(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i=Object.assign({name:qp,automaticDataCollectionEnabled:!1},e),a=i.name;if(typeof a!="string"||!a)throw ds.create("bad-app-name",{appName:String(a)});if(t||(t=w1()),!t)throw ds.create("no-options");const l=sh.get(a);if(l){if(_a(t,l.options)&&_a(i,l.config))return l;throw ds.create("duplicate-app",{appName:a})}const u=new AN(a);for(const m of Fp.values())u.addComponent(m);const f=new _R(t,i,u);return sh.set(a,f),f}function I1(n=qp){const e=sh.get(n);if(!e&&n===qp&&w1())return R1();if(!e)throw ds.create("no-app",{appName:n});return e}function hs(n,e,t){var i;let a=(i=gR[n])!==null&&i!==void 0?i:n;t&&(a+=`-${t}`);const l=a.match(/\s|\//),u=e.match(/\s|\//);if(l||u){const f=[`Unable to register library "${a}" with version "${e}":`];l&&f.push(`library name "${a}" contains illegal characters (whitespace or "/")`),l&&u&&f.push("and"),u&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),bi.warn(f.join(" "));return}Vo(new ba(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bR="firebase-heartbeat-database",ER=1,Oc="firebase-heartbeat-store";let Ap=null;function O1(){return Ap||(Ap=LN(bR,ER,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Oc)}catch(t){console.warn(t)}}}}).catch(n=>{throw ds.create("idb-open",{originalErrorMessage:n.message})})),Ap}async function TR(n){try{const t=(await O1()).transaction(Oc),i=await t.objectStore(Oc).get(D1(n));return await t.done,i}catch(e){if(e instanceof Ai)bi.warn(e.message);else{const t=ds.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});bi.warn(t.message)}}}async function ob(n,e){try{const i=(await O1()).transaction(Oc,"readwrite");await i.objectStore(Oc).put(e,D1(n)),await i.done}catch(t){if(t instanceof Ai)bi.warn(t.message);else{const i=ds.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});bi.warn(i.message)}}}function D1(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xR=1024,wR=30;class AR{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new CR(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=lb();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(u=>u.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:a}),this._heartbeatsCache.heartbeats.length>wR){const u=NR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){bi.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=lb(),{heartbeatsToSend:i,unsentEntries:a}=SR(this._heartbeatsCache.heartbeats),l=ih(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return bi.warn(t),""}}}function lb(){return new Date().toISOString().substring(0,10)}function SR(n,e=xR){const t=[];let i=n.slice();for(const a of n){const l=t.find(u=>u.agent===a.agent);if(l){if(l.dates.push(a.date),cb(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),cb(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class CR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return fN()?mN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await TR(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const a=await this.read();return ob(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const a=await this.read();return ob(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function cb(n){return ih(JSON.stringify({version:2,heartbeats:n})).length}function NR(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RR(n){Vo(new ba("platform-logger",e=>new BN(e),"PRIVATE")),Vo(new ba("heartbeat",e=>new AR(e),"PRIVATE")),hs(Bp,sb,n),hs(Bp,sb,"esm2017"),hs("fire-js","")}RR("");function Rg(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(n);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(n,i[a])&&(t[i[a]]=n[i[a]]);return t}function P1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const IR=P1,j1=new $c("auth","Firebase",P1());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ah=new Sg("@firebase/auth");function OR(n,...e){ah.logLevel<=Le.WARN&&ah.warn(`Auth (${Wo}): ${n}`,...e)}function qd(n,...e){ah.logLevel<=Le.ERROR&&ah.error(`Auth (${Wo}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lr(n,...e){throw Ig(n,...e)}function Mr(n,...e){return Ig(n,...e)}function M1(n,e,t){const i=Object.assign(Object.assign({},IR()),{[e]:t});return new $c("auth","Firebase",i).create(e,{appName:n.name})}function yi(n){return M1(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ig(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return j1.create(n,...e)}function we(n,e,...t){if(!n)throw Ig(e,...t)}function mi(n){const e="INTERNAL ASSERTION FAILED: "+n;throw qd(e),new Error(e)}function Ei(n,e){n||mi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hp(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function DR(){return ub()==="http:"||ub()==="https:"}function ub(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(DR()||cN()||"connection"in navigator)?navigator.onLine:!0}function jR(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ei(t>e,"Short delay should be less than long delay!"),this.isMobile=aN()||uN()}get(){return PR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Og(n,e){Ei(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k1{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;mi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;mi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;mi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kR=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],VR=new Kc(3e4,6e4);function ws(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Si(n,e,t,i,a={}){return V1(n,a,async()=>{let l={},u={};i&&(e==="GET"?u=i:l={body:JSON.stringify(i)});const f=Yc(Object.assign({key:n.config.apiKey},u)).slice(1),m=await n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);const y=Object.assign({method:e,headers:m},l);return lN()||(y.referrerPolicy="no-referrer"),n.emulatorConfig&&Gc(n.emulatorConfig.host)&&(y.credentials="include"),k1.fetch()(await L1(n,n.config.apiHost,t,f),y)})}async function V1(n,e,t){n._canInitEmulator=!1;const i=Object.assign(Object.assign({},MR),e);try{const a=new UR(n),l=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const u=await l.json();if("needConfirmation"in u)throw Pd(n,"account-exists-with-different-credential",u);if(l.ok&&!("errorMessage"in u))return u;{const f=l.ok?u.errorMessage:u.error.message,[m,y]=f.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw Pd(n,"credential-already-in-use",u);if(m==="EMAIL_EXISTS")throw Pd(n,"email-already-in-use",u);if(m==="USER_DISABLED")throw Pd(n,"user-disabled",u);const v=i[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw M1(n,v,y);lr(n,v)}}catch(a){if(a instanceof Ai)throw a;lr(n,"network-request-failed",{message:String(a)})}}async function Qc(n,e,t,i,a={}){const l=await Si(n,e,t,i,a);return"mfaPendingCredential"in l&&lr(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function L1(n,e,t,i){const a=`${e}${t}?${i}`,l=n,u=l.config.emulator?Og(n.config,a):`${n.config.apiScheme}://${a}`;return kR.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(u).toString():u}function LR(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class UR{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Mr(this.auth,"network-request-failed")),VR.get())})}}function Pd(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const a=Mr(n,e,i);return a.customData._tokenResponse=t,a}function db(n){return n!==void 0&&n.enterprise!==void 0}class zR{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return LR(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function BR(n,e){return Si(n,"GET","/v2/recaptchaConfig",ws(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qR(n,e){return Si(n,"POST","/v1/accounts:delete",e)}async function oh(n,e){return Si(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ac(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function FR(n,e=!1){const t=Lt(n),i=await t.getIdToken(e),a=Dg(i);we(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,u=l==null?void 0:l.sign_in_provider;return{claims:a,token:i,authTime:Ac(Sp(a.auth_time)),issuedAtTime:Ac(Sp(a.iat)),expirationTime:Ac(Sp(a.exp)),signInProvider:u||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Sp(n){return Number(n)*1e3}function Dg(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return qd("JWT malformed, contained fewer than 3 sections"),null;try{const a=T1(t);return a?JSON.parse(a):(qd("Failed to decode base64 JWT payload"),null)}catch(a){return qd("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function hb(n){const e=Dg(n);return we(e,"internal-error"),we(typeof e.exp<"u","internal-error"),we(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lo(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Ai&&HR(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function HR({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const a=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ac(this.lastLoginAt),this.creationTime=Ac(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lh(n){var e;const t=n.auth,i=await n.getIdToken(),a=await Lo(n,oh(t,{idToken:i}));we(a==null?void 0:a.users.length,t,"internal-error");const l=a.users[0];n._notifyReloadListener(l);const u=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?U1(l.providerUserInfo):[],f=YR(n.providerData,u),m=n.isAnonymous,y=!(n.email&&l.passwordHash)&&!(f!=null&&f.length),v=m?y:!1,E={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:f,metadata:new Gp(l.createdAt,l.lastLoginAt),isAnonymous:v};Object.assign(n,E)}async function $R(n){const e=Lt(n);await lh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function YR(n,e){return[...n.filter(i=>!e.some(a=>a.providerId===i.providerId)),...e]}function U1(n){return n.map(e=>{var{providerId:t}=e,i=Rg(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KR(n,e){const t=await V1(n,{},async()=>{const i=Yc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=n.config,u=await L1(n,a,"/v1/token",`key=${l}`),f=await n._getAdditionalHeaders();return f["Content-Type"]="application/x-www-form-urlencoded",k1.fetch()(u,{method:"POST",headers:f,body:i})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function QR(n,e){return Si(n,"POST","/v2/accounts:revokeToken",ws(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){we(e.idToken,"internal-error"),we(typeof e.idToken<"u","internal-error"),we(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):hb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){we(e.length!==0,"internal-error");const t=hb(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(we(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:a,expiresIn:l}=await KR(e,t);this.updateTokensAndExpiration(i,a,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:a,expirationTime:l}=t,u=new Oo;return i&&(we(typeof i=="string","internal-error",{appName:e}),u.refreshToken=i),a&&(we(typeof a=="string","internal-error",{appName:e}),u.accessToken=a),l&&(we(typeof l=="number","internal-error",{appName:e}),u.expirationTime=l),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Oo,this.toJSON())}_performRefresh(){return mi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rs(n,e){we(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class or{constructor(e){var{uid:t,auth:i,stsTokenManager:a}=e,l=Rg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new GR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Gp(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await Lo(this,this.stsTokenManager.getToken(this.auth,e));return we(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return FR(this,e)}reload(){return $R(this)}_assign(e){this!==e&&(we(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new or(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){we(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await lh(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Xn(this.auth.app))return Promise.reject(yi(this.auth));const e=await this.getIdToken();return await Lo(this,qR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,a,l,u,f,m,y,v;const E=(i=t.displayName)!==null&&i!==void 0?i:void 0,x=(a=t.email)!==null&&a!==void 0?a:void 0,C=(l=t.phoneNumber)!==null&&l!==void 0?l:void 0,A=(u=t.photoURL)!==null&&u!==void 0?u:void 0,k=(f=t.tenantId)!==null&&f!==void 0?f:void 0,O=(m=t._redirectEventId)!==null&&m!==void 0?m:void 0,$=(y=t.createdAt)!==null&&y!==void 0?y:void 0,K=(v=t.lastLoginAt)!==null&&v!==void 0?v:void 0,{uid:z,emailVerified:ce,isAnonymous:le,providerData:ye,stsTokenManager:j}=t;we(z&&j,e,"internal-error");const N=Oo.fromJSON(this.name,j);we(typeof z=="string",e,"internal-error"),rs(E,e.name),rs(x,e.name),we(typeof ce=="boolean",e,"internal-error"),we(typeof le=="boolean",e,"internal-error"),rs(C,e.name),rs(A,e.name),rs(k,e.name),rs(O,e.name),rs($,e.name),rs(K,e.name);const R=new or({uid:z,auth:e,email:x,emailVerified:ce,displayName:E,isAnonymous:le,photoURL:A,phoneNumber:C,tenantId:k,stsTokenManager:N,createdAt:$,lastLoginAt:K});return ye&&Array.isArray(ye)&&(R.providerData=ye.map(P=>Object.assign({},P))),O&&(R._redirectEventId=O),R}static async _fromIdTokenResponse(e,t,i=!1){const a=new Oo;a.updateFromServerResponse(t);const l=new or({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:i});return await lh(l),l}static async _fromGetAccountInfoResponse(e,t,i){const a=t.users[0];we(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?U1(a.providerUserInfo):[],u=!(a.email&&a.passwordHash)&&!(l!=null&&l.length),f=new Oo;f.updateFromIdToken(i);const m=new or({uid:a.localId,auth:e,stsTokenManager:f,isAnonymous:u}),y={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new Gp(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(l!=null&&l.length)};return Object.assign(m,y),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fb=new Map;function pi(n){Ei(n instanceof Function,"Expected a class definition");let e=fb.get(n);return e?(Ei(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,fb.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}z1.type="NONE";const mb=z1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fd(n,e,t){return`firebase:${n}:${e}:${t}`}class Do{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:a,name:l}=this.auth;this.fullUserKey=Fd(this.userKey,a.apiKey,l),this.fullPersistenceKey=Fd("persistence",a.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await oh(this.auth,{idToken:e}).catch(()=>{});return t?or._fromGetAccountInfoResponse(this.auth,t,e):null}return or._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Do(pi(mb),e,i);const a=(await Promise.all(t.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let l=a[0]||pi(mb);const u=Fd(i,e.config.apiKey,e.name);let f=null;for(const y of t)try{const v=await y._get(u);if(v){let E;if(typeof v=="string"){const x=await oh(e,{idToken:v}).catch(()=>{});if(!x)break;E=await or._fromGetAccountInfoResponse(e,x,v)}else E=or._fromJSON(e,v);y!==l&&(f=E),l=y;break}}catch{}const m=a.filter(y=>y._shouldAllowMigration);return!l._shouldAllowMigration||!m.length?new Do(l,e,i):(l=m[0],f&&await l._set(u,f.toJSON()),await Promise.all(t.map(async y=>{if(y!==l)try{await y._remove(u)}catch{}})),new Do(l,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pb(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(H1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(B1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if($1(e))return"Blackberry";if(Y1(e))return"Webos";if(q1(e))return"Safari";if((e.includes("chrome/")||F1(e))&&!e.includes("edge/"))return"Chrome";if(G1(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function B1(n=dn()){return/firefox\//i.test(n)}function q1(n=dn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function F1(n=dn()){return/crios\//i.test(n)}function H1(n=dn()){return/iemobile/i.test(n)}function G1(n=dn()){return/android/i.test(n)}function $1(n=dn()){return/blackberry/i.test(n)}function Y1(n=dn()){return/webos/i.test(n)}function Pg(n=dn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function WR(n=dn()){var e;return Pg(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function XR(){return dN()&&document.documentMode===10}function K1(n=dn()){return Pg(n)||G1(n)||Y1(n)||$1(n)||/windows phone/i.test(n)||H1(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q1(n,e=[]){let t;switch(n){case"Browser":t=pb(dn());break;case"Worker":t=`${pb(dn())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Wo}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((u,f)=>{try{const m=e(l);u(m)}catch(m){f(m)}});i.onAbort=t,this.queue.push(i);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JR(n,e={}){return Si(n,"GET","/v2/passwordPolicy",ws(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e2=6;class t2{constructor(e){var t,i,a,l;const u=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=u.minPasswordLength)!==null&&t!==void 0?t:e2,u.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=u.maxPasswordLength),u.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=u.containsLowercaseCharacter),u.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=u.containsUppercaseCharacter),u.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=u.containsNumericCharacter),u.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=u.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(a=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&a!==void 0?a:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,a,l,u,f;const m={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,m),this.validatePasswordCharacterOptions(e,m),m.isValid&&(m.isValid=(t=m.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),m.isValid&&(m.isValid=(i=m.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),m.isValid&&(m.isValid=(a=m.containsLowercaseLetter)!==null&&a!==void 0?a:!0),m.isValid&&(m.isValid=(l=m.containsUppercaseLetter)!==null&&l!==void 0?l:!0),m.isValid&&(m.isValid=(u=m.containsNumericCharacter)!==null&&u!==void 0?u:!0),m.isValid&&(m.isValid=(f=m.containsNonAlphanumericCharacter)!==null&&f!==void 0?f:!0),m}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let a=0;a<e.length;a++)i=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n2{constructor(e,t,i,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new gb(this),this.idTokenSubscription=new gb(this),this.beforeStateQueue=new ZR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=j1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=pi(t)),this._initializationPromise=this.queue(async()=>{var i,a,l;if(!this._deleted&&(this.persistenceManager=await Do.create(this,e),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((a=this._popupRedirectResolver)===null||a===void 0)&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)===null||l===void 0?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await oh(this,{idToken:e}),i=await or._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Xn(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(f,f))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let a=i,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,f=a==null?void 0:a._redirectEventId,m=await this.tryRedirectSignIn(e);(!u||u===f)&&(m!=null&&m.user)&&(a=m.user,l=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(a)}catch(u){a=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return we(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await lh(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=jR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Xn(this.app))return Promise.reject(yi(this));const t=e?Lt(e):null;return t&&we(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&we(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Xn(this.app)?Promise.reject(yi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Xn(this.app)?Promise.reject(yi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(pi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await JR(this),t=new t2(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new $c("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await QR(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&pi(e)||this._popupRedirectResolver;we(t,this,"argument-error"),this.redirectPersistenceManager=await Do.create(this,[pi(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,a){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let u=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(we(f,this,"internal-error"),f.then(()=>{u||l(this.currentUser)}),typeof t=="function"){const m=e.addObserver(t,i,a);return()=>{u=!0,m()}}else{const m=e.addObserver(t);return()=>{u=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return we(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Q1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);const a=await this._getAppCheckToken();return a&&(t["X-Firebase-AppCheck"]=a),t}async _getAppCheckToken(){var e;if(Xn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&OR(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Ca(n){return Lt(n)}class gb{constructor(e){this.auth=e,this.observer=null,this.addObserver=_N(t=>this.observer=t)}get next(){return we(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function r2(n){jh=n}function W1(n){return jh.loadJS(n)}function i2(){return jh.recaptchaEnterpriseScript}function s2(){return jh.gapiScript}function a2(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class o2{constructor(){this.enterprise=new l2}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class l2{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const c2="recaptcha-enterprise",X1="NO_RECAPTCHA";class u2{constructor(e){this.type=c2,this.auth=Ca(e)}async verify(e="verify",t=!1){async function i(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(u,f)=>{BR(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(m=>{if(m.recaptchaKey===void 0)f(new Error("recaptcha Enterprise site key undefined"));else{const y=new zR(m);return l.tenantId==null?l._agentRecaptchaConfig=y:l._tenantRecaptchaConfigs[l.tenantId]=y,u(y.siteKey)}}).catch(m=>{f(m)})})}function a(l,u,f){const m=window.grecaptcha;db(m)?m.enterprise.ready(()=>{m.enterprise.execute(l,{action:e}).then(y=>{u(y)}).catch(()=>{u(X1)})}):f(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new o2().execute("siteKey",{action:"verify"}):new Promise((l,u)=>{i(this.auth).then(f=>{if(!t&&db(window.grecaptcha))a(f,l,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let m=i2();m.length!==0&&(m+=f),W1(m).then(()=>{a(f,l,u)}).catch(y=>{u(y)})}}).catch(f=>{u(f)})})}}async function yb(n,e,t,i=!1,a=!1){const l=new u2(n);let u;if(a)u=X1;else try{u=await l.verify(t)}catch{u=await l.verify(t,!0)}const f=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in f){const m=f.phoneEnrollmentInfo.phoneNumber,y=f.phoneEnrollmentInfo.recaptchaToken;Object.assign(f,{phoneEnrollmentInfo:{phoneNumber:m,recaptchaToken:y,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in f){const m=f.phoneSignInInfo.recaptchaToken;Object.assign(f,{phoneSignInInfo:{recaptchaToken:m,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return f}return i?Object.assign(f,{captchaResp:u}):Object.assign(f,{captchaResponse:u}),Object.assign(f,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(f,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),f}async function $p(n,e,t,i,a){var l;if(!((l=n._getRecaptchaConfig())===null||l===void 0)&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await yb(n,e,t,t==="getOobCode");return i(n,u)}else return i(n,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await yb(n,e,t,t==="getOobCode");return i(n,f)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d2(n,e){const t=Ng(n,"auth");if(t.isInitialized()){const a=t.getImmediate(),l=t.getOptions();if(_a(l,e??{}))return a;lr(a,"already-initialized")}return t.initialize({options:e})}function h2(n,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(pi);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function f2(n,e,t){const i=Ca(n);we(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const a=!1,l=Z1(e),{host:u,port:f}=m2(e),m=f===null?"":`:${f}`,y={url:`${l}//${u}${m}/`},v=Object.freeze({host:u,port:f,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!i._canInitEmulator){we(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),we(_a(y,i.config.emulator)&&_a(v,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=y,i.emulatorConfig=v,i.settings.appVerificationDisabledForTesting=!0,Gc(u)?(Ph("Auth",!0),S1(`${l}//${u}${m}`)):p2()}function Z1(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function m2(n){const e=Z1(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(i);if(a){const l=a[1];return{host:l,port:vb(i.substr(l.length+1))}}else{const[l,u]=i.split(":");return{host:l,port:vb(u)}}}function vb(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function p2(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jg{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return mi("not implemented")}_getIdTokenResponse(e){return mi("not implemented")}_linkToIdToken(e,t){return mi("not implemented")}_getReauthenticationResolver(e){return mi("not implemented")}}async function g2(n,e){return Si(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function y2(n,e){return Qc(n,"POST","/v1/accounts:signInWithPassword",ws(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function v2(n,e){return Qc(n,"POST","/v1/accounts:signInWithEmailLink",ws(n,e))}async function _2(n,e){return Qc(n,"POST","/v1/accounts:signInWithEmailLink",ws(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dc extends jg{constructor(e,t,i,a=null){super("password",i),this._email=e,this._password=t,this._tenantId=a}static _fromEmailAndPassword(e,t){return new Dc(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new Dc(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return $p(e,t,"signInWithPassword",y2);case"emailLink":return v2(e,{email:this._email,oobCode:this._password});default:lr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return $p(e,i,"signUpPassword",g2);case"emailLink":return _2(e,{idToken:t,email:this._email,oobCode:this._password});default:lr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Po(n,e){return Qc(n,"POST","/v1/accounts:signInWithIdp",ws(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b2="http://localhost";class Ea extends jg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ea(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):lr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:a}=t,l=Rg(t,["providerId","signInMethod"]);if(!i||!a)return null;const u=new Ea(i,a);return u.idToken=l.idToken||void 0,u.accessToken=l.accessToken||void 0,u.secret=l.secret,u.nonce=l.nonce,u.pendingToken=l.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return Po(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Po(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Po(e,t)}buildRequest(){const e={requestUri:b2,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Yc(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E2(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function T2(n){const e=vc(_c(n)).link,t=e?vc(_c(e)).deep_link_id:null,i=vc(_c(n)).deep_link_id;return(i?vc(_c(i)).link:null)||i||t||e||n}class Mg{constructor(e){var t,i,a,l,u,f;const m=vc(_c(e)),y=(t=m.apiKey)!==null&&t!==void 0?t:null,v=(i=m.oobCode)!==null&&i!==void 0?i:null,E=E2((a=m.mode)!==null&&a!==void 0?a:null);we(y&&v&&E,"argument-error"),this.apiKey=y,this.operation=E,this.code=v,this.continueUrl=(l=m.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(u=m.lang)!==null&&u!==void 0?u:null,this.tenantId=(f=m.tenantId)!==null&&f!==void 0?f:null}static parseLink(e){const t=T2(e);try{return new Mg(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(){this.providerId=Xo.PROVIDER_ID}static credential(e,t){return Dc._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=Mg.parseLink(t);return we(i,"argument-error"),Dc._fromEmailAndCode(e,i.code,i.tenantId)}}Xo.PROVIDER_ID="password";Xo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Xo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J1{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc extends J1{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss extends Wc{constructor(){super("facebook.com")}static credential(e){return Ea._fromParams({providerId:ss.PROVIDER_ID,signInMethod:ss.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ss.credentialFromTaggedObject(e)}static credentialFromError(e){return ss.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ss.credential(e.oauthAccessToken)}catch{return null}}}ss.FACEBOOK_SIGN_IN_METHOD="facebook.com";ss.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as extends Wc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ea._fromParams({providerId:as.PROVIDER_ID,signInMethod:as.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return as.credentialFromTaggedObject(e)}static credentialFromError(e){return as.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return as.credential(t,i)}catch{return null}}}as.GOOGLE_SIGN_IN_METHOD="google.com";as.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os extends Wc{constructor(){super("github.com")}static credential(e){return Ea._fromParams({providerId:os.PROVIDER_ID,signInMethod:os.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return os.credentialFromTaggedObject(e)}static credentialFromError(e){return os.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return os.credential(e.oauthAccessToken)}catch{return null}}}os.GITHUB_SIGN_IN_METHOD="github.com";os.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls extends Wc{constructor(){super("twitter.com")}static credential(e,t){return Ea._fromParams({providerId:ls.PROVIDER_ID,signInMethod:ls.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ls.credentialFromTaggedObject(e)}static credentialFromError(e){return ls.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return ls.credential(t,i)}catch{return null}}}ls.TWITTER_SIGN_IN_METHOD="twitter.com";ls.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x2(n,e){return Qc(n,"POST","/v1/accounts:signUp",ws(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,a=!1){const l=await or._fromIdTokenResponse(e,i,a),u=_b(i);return new Ta({user:l,providerId:u,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const a=_b(i);return new Ta({user:e,providerId:a,_tokenResponse:i,operationType:t})}}function _b(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ch extends Ai{constructor(e,t,i,a){var l;super(t.code,t.message),this.operationType=i,this.user=a,Object.setPrototypeOf(this,ch.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,a){return new ch(e,t,i,a)}}function eT(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?ch._fromErrorAndOperation(n,l,e,i):l})}async function w2(n,e,t=!1){const i=await Lo(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Ta._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A2(n,e,t=!1){const{auth:i}=n;if(Xn(i.app))return Promise.reject(yi(i));const a="reauthenticate";try{const l=await Lo(n,eT(i,a,e,n),t);we(l.idToken,i,"internal-error");const u=Dg(l.idToken);we(u,i,"internal-error");const{sub:f}=u;return we(n.uid===f,i,"user-mismatch"),Ta._forOperation(n,a,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&lr(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tT(n,e,t=!1){if(Xn(n.app))return Promise.reject(yi(n));const i="signIn",a=await eT(n,i,e),l=await Ta._fromIdTokenResponse(n,i,a);return t||await n._updateCurrentUser(l.user),l}async function S2(n,e){return tT(Ca(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nT(n){const e=Ca(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function C2(n,e,t){if(Xn(n.app))return Promise.reject(yi(n));const i=Ca(n),u=await $p(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",x2).catch(m=>{throw m.code==="auth/password-does-not-meet-requirements"&&nT(n),m}),f=await Ta._fromIdTokenResponse(i,"signIn",u);return await i._updateCurrentUser(f.user),f}function N2(n,e,t){return Xn(n.app)?Promise.reject(yi(n)):S2(Lt(n),Xo.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&nT(n),i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function R2(n,e){return Si(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I2(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const i=Lt(n),l={idToken:await i.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},u=await Lo(i,R2(i.auth,l));i.displayName=u.displayName||null,i.photoURL=u.photoUrl||null;const f=i.providerData.find(({providerId:m})=>m==="password");f&&(f.displayName=i.displayName,f.photoURL=i.photoURL),await i._updateTokensIfNecessary(u)}function O2(n,e,t,i){return Lt(n).onIdTokenChanged(e,t,i)}function D2(n,e,t){return Lt(n).beforeAuthStateChanged(e,t)}function P2(n,e,t,i){return Lt(n).onAuthStateChanged(e,t,i)}function j2(n){return Lt(n).signOut()}const uh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rT{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(uh,"1"),this.storage.removeItem(uh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M2=1e3,k2=10;class iT extends rT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=K1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),a=this.localCache[t];i!==a&&e(t,a,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,f,m)=>{this.notifyListeners(u,m)});return}const i=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const u=this.storage.getItem(i);!t&&this.localCache[i]===u||this.notifyListeners(i,u)},l=this.storage.getItem(i);XR()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,k2):a()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},M2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}iT.type="LOCAL";const V2=iT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sT extends rT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}sT.type="SESSION";const aT=sT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L2(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const i=new Mh(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:a,data:l}=t.data,u=this.handlersMap[a];if(!(u!=null&&u.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:a});const f=Array.from(u).map(async y=>y(t.origin,l)),m=await L2(f);t.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:m})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Mh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kg(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U2{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,u;return new Promise((f,m)=>{const y=kg("",20);a.port1.start();const v=setTimeout(()=>{m(new Error("unsupported_event"))},i);u={messageChannel:a,onMessage(E){const x=E;if(x.data.eventId===y)switch(x.data.status){case"ack":clearTimeout(v),l=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),f(x.data.response);break;default:clearTimeout(v),clearTimeout(l),m(new Error("invalid_response"));break}}},this.handlers.add(u),a.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:y,data:t},[a.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kr(){return window}function z2(n){kr().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oT(){return typeof kr().WorkerGlobalScope<"u"&&typeof kr().importScripts=="function"}async function B2(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function q2(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function F2(){return oT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lT="firebaseLocalStorageDb",H2=1,dh="firebaseLocalStorage",cT="fbase_key";class Xc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function kh(n,e){return n.transaction([dh],e?"readwrite":"readonly").objectStore(dh)}function G2(){const n=indexedDB.deleteDatabase(lT);return new Xc(n).toPromise()}function Yp(){const n=indexedDB.open(lT,H2);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(dh,{keyPath:cT})}catch(a){t(a)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(dh)?e(i):(i.close(),await G2(),e(await Yp()))})})}async function bb(n,e,t){const i=kh(n,!0).put({[cT]:e,value:t});return new Xc(i).toPromise()}async function $2(n,e){const t=kh(n,!1).get(e),i=await new Xc(t).toPromise();return i===void 0?null:i.value}function Eb(n,e){const t=kh(n,!0).delete(e);return new Xc(t).toPromise()}const Y2=800,K2=3;class uT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Yp(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>K2)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return oT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Mh._getInstance(F2()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await B2(),!this.activeServiceWorker)return;this.sender=new U2(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((t=i[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||q2()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Yp();return await bb(e,uh,"1"),await Eb(e,uh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>bb(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>$2(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Eb(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=kh(a,!1).getAll();return new Xc(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)i.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!i.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Y2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}uT.type="LOCAL";const Q2=uT;new Kc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W2(n,e){return e?pi(e):(we(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vg extends jg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Po(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Po(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Po(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function X2(n){return tT(n.auth,new Vg(n),n.bypassAuthState)}function Z2(n){const{auth:e,user:t}=n;return we(t,e,"internal-error"),A2(t,new Vg(n),n.bypassAuthState)}async function J2(n){const{auth:e,user:t}=n;return we(t,e,"internal-error"),w2(t,new Vg(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dT{constructor(e,t,i,a,l=!1){this.auth=e,this.resolver=i,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:a,tenantId:l,error:u,type:f}=e;if(u){this.reject(u);return}const m={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(m))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return X2;case"linkViaPopup":case"linkViaRedirect":return J2;case"reauthViaPopup":case"reauthViaRedirect":return Z2;default:lr(this.auth,"internal-error")}}resolve(e){Ei(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ei(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eI=new Kc(2e3,1e4);class Io extends dT{constructor(e,t,i,a,l){super(e,t,a,l),this.provider=i,this.authWindow=null,this.pollId=null,Io.currentPopupAction&&Io.currentPopupAction.cancel(),Io.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return we(e,this.auth,"internal-error"),e}async onExecution(){Ei(this.filter.length===1,"Popup operations only handle one event");const e=kg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Mr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Mr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Io.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if(!((i=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Mr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,eI.get())};e()}}Io.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tI="pendingRedirect",Hd=new Map;class nI extends dT{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Hd.get(this.auth._key());if(!e){try{const i=await rI(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Hd.set(this.auth._key(),e)}return this.bypassAuthState||Hd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function rI(n,e){const t=aI(e),i=sI(n);if(!await i._isAvailable())return!1;const a=await i._get(t)==="true";return await i._remove(t),a}function iI(n,e){Hd.set(n._key(),e)}function sI(n){return pi(n._redirectPersistence)}function aI(n){return Fd(tI,n.config.apiKey,n.name)}async function oI(n,e,t=!1){if(Xn(n.app))return Promise.reject(yi(n));const i=Ca(n),a=W2(i,e),u=await new nI(i,a,t).execute();return u&&!t&&(delete u.user._redirectEventId,await i._persistUserIfCurrent(u.user),await i._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lI=10*60*1e3;class cI{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!uI(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!hT(e)){const a=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(Mr(this.auth,a))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=lI&&this.cachedEventUids.clear(),this.cachedEventUids.has(Tb(e))}saveEventToCache(e){this.cachedEventUids.add(Tb(e)),this.lastProcessedEventTime=Date.now()}}function Tb(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function hT({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function uI(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return hT(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dI(n,e={}){return Si(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hI=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,fI=/^https?/;async function mI(n){if(n.config.emulator)return;const{authorizedDomains:e}=await dI(n);for(const t of e)try{if(pI(t))return}catch{}lr(n,"unauthorized-domain")}function pI(n){const e=Hp(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===i}if(!fI.test(t))return!1;if(hI.test(n))return i===n;const a=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gI=new Kc(3e4,6e4);function xb(){const n=kr().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function yI(n){return new Promise((e,t)=>{var i,a,l;function u(){xb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{xb(),t(Mr(n,"network-request-failed"))},timeout:gI.get()})}if(!((a=(i=kr().gapi)===null||i===void 0?void 0:i.iframes)===null||a===void 0)&&a.Iframe)e(gapi.iframes.getContext());else if(!((l=kr().gapi)===null||l===void 0)&&l.load)u();else{const f=a2("iframefcb");return kr()[f]=()=>{gapi.load?u():t(Mr(n,"network-request-failed"))},W1(`${s2()}?onload=${f}`).catch(m=>t(m))}}).catch(e=>{throw Gd=null,e})}let Gd=null;function vI(n){return Gd=Gd||yI(n),Gd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _I=new Kc(5e3,15e3),bI="__/auth/iframe",EI="emulator/auth/iframe",TI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},xI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function wI(n){const e=n.config;we(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Og(e,EI):`https://${n.config.authDomain}/${bI}`,i={apiKey:e.apiKey,appName:n.name,v:Wo},a=xI.get(n.config.apiHost);a&&(i.eid=a);const l=n._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${Yc(i).slice(1)}`}async function AI(n){const e=await vI(n),t=kr().gapi;return we(t,n,"internal-error"),e.open({where:document.body,url:wI(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:TI,dontclear:!0},i=>new Promise(async(a,l)=>{await i.restyle({setHideOnLeave:!1});const u=Mr(n,"network-request-failed"),f=kr().setTimeout(()=>{l(u)},_I.get());function m(){kr().clearTimeout(f),a(i)}i.ping(m).then(m,()=>{l(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},CI=500,NI=600,RI="_blank",II="http://localhost";class wb{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function OI(n,e,t,i=CI,a=NI){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),u=Math.max((window.screen.availWidth-i)/2,0).toString();let f="";const m=Object.assign(Object.assign({},SI),{width:i.toString(),height:a.toString(),top:l,left:u}),y=dn().toLowerCase();t&&(f=F1(y)?RI:t),B1(y)&&(e=e||II,m.scrollbars="yes");const v=Object.entries(m).reduce((x,[C,A])=>`${x}${C}=${A},`,"");if(WR(y)&&f!=="_self")return DI(e||"",f),new wb(null);const E=window.open(e||"",f,v);we(E,n,"popup-blocked");try{E.focus()}catch{}return new wb(E)}function DI(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PI="__/auth/handler",jI="emulator/auth/handler",MI=encodeURIComponent("fac");async function Ab(n,e,t,i,a,l){we(n.config.authDomain,n,"auth-domain-config-required"),we(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:Wo,eventId:a};if(e instanceof J1){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",vN(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,E]of Object.entries({}))u[v]=E}if(e instanceof Wc){const v=e.getScopes().filter(E=>E!=="");v.length>0&&(u.scopes=v.join(","))}n.tenantId&&(u.tid=n.tenantId);const f=u;for(const v of Object.keys(f))f[v]===void 0&&delete f[v];const m=await n._getAppCheckToken(),y=m?`#${MI}=${encodeURIComponent(m)}`:"";return`${kI(n)}?${Yc(f).slice(1)}${y}`}function kI({config:n}){return n.emulator?Og(n,jI):`https://${n.authDomain}/${PI}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cp="webStorageSupport";class VI{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=aT,this._completeRedirectFn=oI,this._overrideRedirectResult=iI}async _openPopup(e,t,i,a){var l;Ei((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const u=await Ab(e,t,i,Hp(),a);return OI(e,u,kg())}async _openRedirect(e,t,i,a){await this._originValidation(e);const l=await Ab(e,t,i,Hp(),a);return z2(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:l}=this.eventManagers[t];return a?Promise.resolve(a):(Ei(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await AI(e),i=new cI(e);return t.register("authEvent",a=>(we(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:i.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Cp,{type:Cp},a=>{var l;const u=(l=a==null?void 0:a[0])===null||l===void 0?void 0:l[Cp];u!==void 0&&t(!!u),lr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=mI(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return K1()||q1()||Pg()}}const LI=VI;var Sb="@firebase/auth",Cb="1.10.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){we(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zI(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function BI(n){Vo(new ba("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:u,authDomain:f}=i.options;we(u&&!u.includes(":"),"invalid-api-key",{appName:i.name});const m={apiKey:u,authDomain:f,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Q1(n)},y=new n2(i,a,l,m);return h2(y,t),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Vo(new ba("auth-internal",e=>{const t=Ca(e.getProvider("auth").getImmediate());return(i=>new UI(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),hs(Sb,Cb,zI(n)),hs(Sb,Cb,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qI=5*60,FI=A1("authIdTokenMaxAge")||qI;let Nb=null;const HI=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>FI)return;const a=t==null?void 0:t.token;Nb!==a&&(Nb=a,await fetch(n,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function GI(n=I1()){const e=Ng(n,"auth");if(e.isInitialized())return e.getImmediate();const t=d2(n,{popupRedirectResolver:LI,persistence:[Q2,V2,aT]}),i=A1("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const u=HI(l.toString());D2(t,u,()=>u(t.currentUser)),O2(t,f=>u(f))}}const a=x1("auth");return a?f2(t,`http://${a}`):Ph("Auth",!1),t}function $I(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}r2({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=a=>{const l=Mr("internal-error");l.customData=a,t(l)},i.type="text/javascript",i.charset="UTF-8",$I().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});BI("Browser");var YI="firebase",KI="11.7.3";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */hs(YI,KI,"app");var Rb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var fs,fT;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(j,N){function R(){}R.prototype=N.prototype,j.D=N.prototype,j.prototype=new R,j.prototype.constructor=j,j.C=function(P,U,B){for(var D=Array(arguments.length-2),bt=2;bt<arguments.length;bt++)D[bt-2]=arguments[bt];return N.prototype[U].apply(P,D)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(j,N,R){R||(R=0);var P=Array(16);if(typeof N=="string")for(var U=0;16>U;++U)P[U]=N.charCodeAt(R++)|N.charCodeAt(R++)<<8|N.charCodeAt(R++)<<16|N.charCodeAt(R++)<<24;else for(U=0;16>U;++U)P[U]=N[R++]|N[R++]<<8|N[R++]<<16|N[R++]<<24;N=j.g[0],R=j.g[1],U=j.g[2];var B=j.g[3],D=N+(B^R&(U^B))+P[0]+3614090360&4294967295;N=R+(D<<7&4294967295|D>>>25),D=B+(U^N&(R^U))+P[1]+3905402710&4294967295,B=N+(D<<12&4294967295|D>>>20),D=U+(R^B&(N^R))+P[2]+606105819&4294967295,U=B+(D<<17&4294967295|D>>>15),D=R+(N^U&(B^N))+P[3]+3250441966&4294967295,R=U+(D<<22&4294967295|D>>>10),D=N+(B^R&(U^B))+P[4]+4118548399&4294967295,N=R+(D<<7&4294967295|D>>>25),D=B+(U^N&(R^U))+P[5]+1200080426&4294967295,B=N+(D<<12&4294967295|D>>>20),D=U+(R^B&(N^R))+P[6]+2821735955&4294967295,U=B+(D<<17&4294967295|D>>>15),D=R+(N^U&(B^N))+P[7]+4249261313&4294967295,R=U+(D<<22&4294967295|D>>>10),D=N+(B^R&(U^B))+P[8]+1770035416&4294967295,N=R+(D<<7&4294967295|D>>>25),D=B+(U^N&(R^U))+P[9]+2336552879&4294967295,B=N+(D<<12&4294967295|D>>>20),D=U+(R^B&(N^R))+P[10]+4294925233&4294967295,U=B+(D<<17&4294967295|D>>>15),D=R+(N^U&(B^N))+P[11]+2304563134&4294967295,R=U+(D<<22&4294967295|D>>>10),D=N+(B^R&(U^B))+P[12]+1804603682&4294967295,N=R+(D<<7&4294967295|D>>>25),D=B+(U^N&(R^U))+P[13]+4254626195&4294967295,B=N+(D<<12&4294967295|D>>>20),D=U+(R^B&(N^R))+P[14]+2792965006&4294967295,U=B+(D<<17&4294967295|D>>>15),D=R+(N^U&(B^N))+P[15]+1236535329&4294967295,R=U+(D<<22&4294967295|D>>>10),D=N+(U^B&(R^U))+P[1]+4129170786&4294967295,N=R+(D<<5&4294967295|D>>>27),D=B+(R^U&(N^R))+P[6]+3225465664&4294967295,B=N+(D<<9&4294967295|D>>>23),D=U+(N^R&(B^N))+P[11]+643717713&4294967295,U=B+(D<<14&4294967295|D>>>18),D=R+(B^N&(U^B))+P[0]+3921069994&4294967295,R=U+(D<<20&4294967295|D>>>12),D=N+(U^B&(R^U))+P[5]+3593408605&4294967295,N=R+(D<<5&4294967295|D>>>27),D=B+(R^U&(N^R))+P[10]+38016083&4294967295,B=N+(D<<9&4294967295|D>>>23),D=U+(N^R&(B^N))+P[15]+3634488961&4294967295,U=B+(D<<14&4294967295|D>>>18),D=R+(B^N&(U^B))+P[4]+3889429448&4294967295,R=U+(D<<20&4294967295|D>>>12),D=N+(U^B&(R^U))+P[9]+568446438&4294967295,N=R+(D<<5&4294967295|D>>>27),D=B+(R^U&(N^R))+P[14]+3275163606&4294967295,B=N+(D<<9&4294967295|D>>>23),D=U+(N^R&(B^N))+P[3]+4107603335&4294967295,U=B+(D<<14&4294967295|D>>>18),D=R+(B^N&(U^B))+P[8]+1163531501&4294967295,R=U+(D<<20&4294967295|D>>>12),D=N+(U^B&(R^U))+P[13]+2850285829&4294967295,N=R+(D<<5&4294967295|D>>>27),D=B+(R^U&(N^R))+P[2]+4243563512&4294967295,B=N+(D<<9&4294967295|D>>>23),D=U+(N^R&(B^N))+P[7]+1735328473&4294967295,U=B+(D<<14&4294967295|D>>>18),D=R+(B^N&(U^B))+P[12]+2368359562&4294967295,R=U+(D<<20&4294967295|D>>>12),D=N+(R^U^B)+P[5]+4294588738&4294967295,N=R+(D<<4&4294967295|D>>>28),D=B+(N^R^U)+P[8]+2272392833&4294967295,B=N+(D<<11&4294967295|D>>>21),D=U+(B^N^R)+P[11]+1839030562&4294967295,U=B+(D<<16&4294967295|D>>>16),D=R+(U^B^N)+P[14]+4259657740&4294967295,R=U+(D<<23&4294967295|D>>>9),D=N+(R^U^B)+P[1]+2763975236&4294967295,N=R+(D<<4&4294967295|D>>>28),D=B+(N^R^U)+P[4]+1272893353&4294967295,B=N+(D<<11&4294967295|D>>>21),D=U+(B^N^R)+P[7]+4139469664&4294967295,U=B+(D<<16&4294967295|D>>>16),D=R+(U^B^N)+P[10]+3200236656&4294967295,R=U+(D<<23&4294967295|D>>>9),D=N+(R^U^B)+P[13]+681279174&4294967295,N=R+(D<<4&4294967295|D>>>28),D=B+(N^R^U)+P[0]+3936430074&4294967295,B=N+(D<<11&4294967295|D>>>21),D=U+(B^N^R)+P[3]+3572445317&4294967295,U=B+(D<<16&4294967295|D>>>16),D=R+(U^B^N)+P[6]+76029189&4294967295,R=U+(D<<23&4294967295|D>>>9),D=N+(R^U^B)+P[9]+3654602809&4294967295,N=R+(D<<4&4294967295|D>>>28),D=B+(N^R^U)+P[12]+3873151461&4294967295,B=N+(D<<11&4294967295|D>>>21),D=U+(B^N^R)+P[15]+530742520&4294967295,U=B+(D<<16&4294967295|D>>>16),D=R+(U^B^N)+P[2]+3299628645&4294967295,R=U+(D<<23&4294967295|D>>>9),D=N+(U^(R|~B))+P[0]+4096336452&4294967295,N=R+(D<<6&4294967295|D>>>26),D=B+(R^(N|~U))+P[7]+1126891415&4294967295,B=N+(D<<10&4294967295|D>>>22),D=U+(N^(B|~R))+P[14]+2878612391&4294967295,U=B+(D<<15&4294967295|D>>>17),D=R+(B^(U|~N))+P[5]+4237533241&4294967295,R=U+(D<<21&4294967295|D>>>11),D=N+(U^(R|~B))+P[12]+1700485571&4294967295,N=R+(D<<6&4294967295|D>>>26),D=B+(R^(N|~U))+P[3]+2399980690&4294967295,B=N+(D<<10&4294967295|D>>>22),D=U+(N^(B|~R))+P[10]+4293915773&4294967295,U=B+(D<<15&4294967295|D>>>17),D=R+(B^(U|~N))+P[1]+2240044497&4294967295,R=U+(D<<21&4294967295|D>>>11),D=N+(U^(R|~B))+P[8]+1873313359&4294967295,N=R+(D<<6&4294967295|D>>>26),D=B+(R^(N|~U))+P[15]+4264355552&4294967295,B=N+(D<<10&4294967295|D>>>22),D=U+(N^(B|~R))+P[6]+2734768916&4294967295,U=B+(D<<15&4294967295|D>>>17),D=R+(B^(U|~N))+P[13]+1309151649&4294967295,R=U+(D<<21&4294967295|D>>>11),D=N+(U^(R|~B))+P[4]+4149444226&4294967295,N=R+(D<<6&4294967295|D>>>26),D=B+(R^(N|~U))+P[11]+3174756917&4294967295,B=N+(D<<10&4294967295|D>>>22),D=U+(N^(B|~R))+P[2]+718787259&4294967295,U=B+(D<<15&4294967295|D>>>17),D=R+(B^(U|~N))+P[9]+3951481745&4294967295,j.g[0]=j.g[0]+N&4294967295,j.g[1]=j.g[1]+(U+(D<<21&4294967295|D>>>11))&4294967295,j.g[2]=j.g[2]+U&4294967295,j.g[3]=j.g[3]+B&4294967295}i.prototype.u=function(j,N){N===void 0&&(N=j.length);for(var R=N-this.blockSize,P=this.B,U=this.h,B=0;B<N;){if(U==0)for(;B<=R;)a(this,j,B),B+=this.blockSize;if(typeof j=="string"){for(;B<N;)if(P[U++]=j.charCodeAt(B++),U==this.blockSize){a(this,P),U=0;break}}else for(;B<N;)if(P[U++]=j[B++],U==this.blockSize){a(this,P),U=0;break}}this.h=U,this.o+=N},i.prototype.v=function(){var j=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);j[0]=128;for(var N=1;N<j.length-8;++N)j[N]=0;var R=8*this.o;for(N=j.length-8;N<j.length;++N)j[N]=R&255,R/=256;for(this.u(j),j=Array(16),N=R=0;4>N;++N)for(var P=0;32>P;P+=8)j[R++]=this.g[N]>>>P&255;return j};function l(j,N){var R=f;return Object.prototype.hasOwnProperty.call(R,j)?R[j]:R[j]=N(j)}function u(j,N){this.h=N;for(var R=[],P=!0,U=j.length-1;0<=U;U--){var B=j[U]|0;P&&B==N||(R[U]=B,P=!1)}this.g=R}var f={};function m(j){return-128<=j&&128>j?l(j,function(N){return new u([N|0],0>N?-1:0)}):new u([j|0],0>j?-1:0)}function y(j){if(isNaN(j)||!isFinite(j))return E;if(0>j)return O(y(-j));for(var N=[],R=1,P=0;j>=R;P++)N[P]=j/R|0,R*=4294967296;return new u(N,0)}function v(j,N){if(j.length==0)throw Error("number format error: empty string");if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(j.charAt(0)=="-")return O(v(j.substring(1),N));if(0<=j.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=y(Math.pow(N,8)),P=E,U=0;U<j.length;U+=8){var B=Math.min(8,j.length-U),D=parseInt(j.substring(U,U+B),N);8>B?(B=y(Math.pow(N,B)),P=P.j(B).add(y(D))):(P=P.j(R),P=P.add(y(D)))}return P}var E=m(0),x=m(1),C=m(16777216);n=u.prototype,n.m=function(){if(k(this))return-O(this).m();for(var j=0,N=1,R=0;R<this.g.length;R++){var P=this.i(R);j+=(0<=P?P:4294967296+P)*N,N*=4294967296}return j},n.toString=function(j){if(j=j||10,2>j||36<j)throw Error("radix out of range: "+j);if(A(this))return"0";if(k(this))return"-"+O(this).toString(j);for(var N=y(Math.pow(j,6)),R=this,P="";;){var U=ce(R,N).g;R=$(R,U.j(N));var B=((0<R.g.length?R.g[0]:R.h)>>>0).toString(j);if(R=U,A(R))return B+P;for(;6>B.length;)B="0"+B;P=B+P}},n.i=function(j){return 0>j?0:j<this.g.length?this.g[j]:this.h};function A(j){if(j.h!=0)return!1;for(var N=0;N<j.g.length;N++)if(j.g[N]!=0)return!1;return!0}function k(j){return j.h==-1}n.l=function(j){return j=$(this,j),k(j)?-1:A(j)?0:1};function O(j){for(var N=j.g.length,R=[],P=0;P<N;P++)R[P]=~j.g[P];return new u(R,~j.h).add(x)}n.abs=function(){return k(this)?O(this):this},n.add=function(j){for(var N=Math.max(this.g.length,j.g.length),R=[],P=0,U=0;U<=N;U++){var B=P+(this.i(U)&65535)+(j.i(U)&65535),D=(B>>>16)+(this.i(U)>>>16)+(j.i(U)>>>16);P=D>>>16,B&=65535,D&=65535,R[U]=D<<16|B}return new u(R,R[R.length-1]&-2147483648?-1:0)};function $(j,N){return j.add(O(N))}n.j=function(j){if(A(this)||A(j))return E;if(k(this))return k(j)?O(this).j(O(j)):O(O(this).j(j));if(k(j))return O(this.j(O(j)));if(0>this.l(C)&&0>j.l(C))return y(this.m()*j.m());for(var N=this.g.length+j.g.length,R=[],P=0;P<2*N;P++)R[P]=0;for(P=0;P<this.g.length;P++)for(var U=0;U<j.g.length;U++){var B=this.i(P)>>>16,D=this.i(P)&65535,bt=j.i(U)>>>16,st=j.i(U)&65535;R[2*P+2*U]+=D*st,K(R,2*P+2*U),R[2*P+2*U+1]+=B*st,K(R,2*P+2*U+1),R[2*P+2*U+1]+=D*bt,K(R,2*P+2*U+1),R[2*P+2*U+2]+=B*bt,K(R,2*P+2*U+2)}for(P=0;P<N;P++)R[P]=R[2*P+1]<<16|R[2*P];for(P=N;P<2*N;P++)R[P]=0;return new u(R,0)};function K(j,N){for(;(j[N]&65535)!=j[N];)j[N+1]+=j[N]>>>16,j[N]&=65535,N++}function z(j,N){this.g=j,this.h=N}function ce(j,N){if(A(N))throw Error("division by zero");if(A(j))return new z(E,E);if(k(j))return N=ce(O(j),N),new z(O(N.g),O(N.h));if(k(N))return N=ce(j,O(N)),new z(O(N.g),N.h);if(30<j.g.length){if(k(j)||k(N))throw Error("slowDivide_ only works with positive integers.");for(var R=x,P=N;0>=P.l(j);)R=le(R),P=le(P);var U=ye(R,1),B=ye(P,1);for(P=ye(P,2),R=ye(R,2);!A(P);){var D=B.add(P);0>=D.l(j)&&(U=U.add(R),B=D),P=ye(P,1),R=ye(R,1)}return N=$(j,U.j(N)),new z(U,N)}for(U=E;0<=j.l(N);){for(R=Math.max(1,Math.floor(j.m()/N.m())),P=Math.ceil(Math.log(R)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),B=y(R),D=B.j(N);k(D)||0<D.l(j);)R-=P,B=y(R),D=B.j(N);A(B)&&(B=x),U=U.add(B),j=$(j,D)}return new z(U,j)}n.A=function(j){return ce(this,j).h},n.and=function(j){for(var N=Math.max(this.g.length,j.g.length),R=[],P=0;P<N;P++)R[P]=this.i(P)&j.i(P);return new u(R,this.h&j.h)},n.or=function(j){for(var N=Math.max(this.g.length,j.g.length),R=[],P=0;P<N;P++)R[P]=this.i(P)|j.i(P);return new u(R,this.h|j.h)},n.xor=function(j){for(var N=Math.max(this.g.length,j.g.length),R=[],P=0;P<N;P++)R[P]=this.i(P)^j.i(P);return new u(R,this.h^j.h)};function le(j){for(var N=j.g.length+1,R=[],P=0;P<N;P++)R[P]=j.i(P)<<1|j.i(P-1)>>>31;return new u(R,j.h)}function ye(j,N){var R=N>>5;N%=32;for(var P=j.g.length-R,U=[],B=0;B<P;B++)U[B]=0<N?j.i(B+R)>>>N|j.i(B+R+1)<<32-N:j.i(B+R);return new u(U,j.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,fT=i,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=y,u.fromString=v,fs=u}).apply(typeof Rb<"u"?Rb:typeof self<"u"?self:typeof window<"u"?window:{});var jd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var mT,bc,pT,$d,Kp,gT,yT,vT;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,_,b){return d==Array.prototype||d==Object.prototype||(d[_]=b.value),d};function t(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof jd=="object"&&jd];for(var _=0;_<d.length;++_){var b=d[_];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var i=t(this);function a(d,_){if(_)e:{var b=i;d=d.split(".");for(var S=0;S<d.length-1;S++){var F=d[S];if(!(F in b))break e;b=b[F]}d=d[d.length-1],S=b[d],_=_(S),_!=S&&_!=null&&e(b,d,{configurable:!0,writable:!0,value:_})}}function l(d,_){d instanceof String&&(d+="");var b=0,S=!1,F={next:function(){if(!S&&b<d.length){var X=b++;return{value:_(X,d[X]),done:!1}}return S=!0,{done:!0,value:void 0}}};return F[Symbol.iterator]=function(){return F},F}a("Array.prototype.values",function(d){return d||function(){return l(this,function(_,b){return b})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},f=this||self;function m(d){var _=typeof d;return _=_!="object"?_:d?Array.isArray(d)?"array":_:"null",_=="array"||_=="object"&&typeof d.length=="number"}function y(d){var _=typeof d;return _=="object"&&d!=null||_=="function"}function v(d,_,b){return d.call.apply(d.bind,arguments)}function E(d,_,b){if(!d)throw Error();if(2<arguments.length){var S=Array.prototype.slice.call(arguments,2);return function(){var F=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(F,S),d.apply(_,F)}}return function(){return d.apply(_,arguments)}}function x(d,_,b){return x=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?v:E,x.apply(null,arguments)}function C(d,_){var b=Array.prototype.slice.call(arguments,1);return function(){var S=b.slice();return S.push.apply(S,arguments),d.apply(this,S)}}function A(d,_){function b(){}b.prototype=_.prototype,d.aa=_.prototype,d.prototype=new b,d.prototype.constructor=d,d.Qb=function(S,F,X){for(var de=Array(arguments.length-2),ze=2;ze<arguments.length;ze++)de[ze-2]=arguments[ze];return _.prototype[F].apply(S,de)}}function k(d){const _=d.length;if(0<_){const b=Array(_);for(let S=0;S<_;S++)b[S]=d[S];return b}return[]}function O(d,_){for(let b=1;b<arguments.length;b++){const S=arguments[b];if(m(S)){const F=d.length||0,X=S.length||0;d.length=F+X;for(let de=0;de<X;de++)d[F+de]=S[de]}else d.push(S)}}class ${constructor(_,b){this.i=_,this.j=b,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function K(d){return/^[\s\xa0]*$/.test(d)}function z(){var d=f.navigator;return d&&(d=d.userAgent)?d:""}function ce(d){return ce[" "](d),d}ce[" "]=function(){};var le=z().indexOf("Gecko")!=-1&&!(z().toLowerCase().indexOf("webkit")!=-1&&z().indexOf("Edge")==-1)&&!(z().indexOf("Trident")!=-1||z().indexOf("MSIE")!=-1)&&z().indexOf("Edge")==-1;function ye(d,_,b){for(const S in d)_.call(b,d[S],S,d)}function j(d,_){for(const b in d)_.call(void 0,d[b],b,d)}function N(d){const _={};for(const b in d)_[b]=d[b];return _}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(d,_){let b,S;for(let F=1;F<arguments.length;F++){S=arguments[F];for(b in S)d[b]=S[b];for(let X=0;X<R.length;X++)b=R[X],Object.prototype.hasOwnProperty.call(S,b)&&(d[b]=S[b])}}function U(d){var _=1;d=d.split(":");const b=[];for(;0<_&&d.length;)b.push(d.shift()),_--;return d.length&&b.push(d.join(":")),b}function B(d){f.setTimeout(()=>{throw d},0)}function D(){var d=Me;let _=null;return d.g&&(_=d.g,d.g=d.g.next,d.g||(d.h=null),_.next=null),_}class bt{constructor(){this.h=this.g=null}add(_,b){const S=st.get();S.set(_,b),this.h?this.h.next=S:this.g=S,this.h=S}}var st=new $(()=>new J,d=>d.reset());class J{constructor(){this.next=this.g=this.h=null}set(_,b){this.h=_,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let he,ve=!1,Me=new bt,M=()=>{const d=f.Promise.resolve(void 0);he=()=>{d.then(oe)}};var oe=()=>{for(var d;d=D();){try{d.h.call(d.g)}catch(b){B(b)}var _=st;_.j(d),100>_.h&&(_.h++,d.next=_.g,_.g=d)}ve=!1};function fe(){this.s=this.s,this.C=this.C}fe.prototype.s=!1,fe.prototype.ma=function(){this.s||(this.s=!0,this.N())},fe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ue(d,_){this.type=d,this.g=this.target=_,this.defaultPrevented=!1}ue.prototype.h=function(){this.defaultPrevented=!0};var ee=function(){if(!f.addEventListener||!Object.defineProperty)return!1;var d=!1,_=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const b=()=>{};f.addEventListener("test",b,_),f.removeEventListener("test",b,_)}catch{}return d}();function ne(d,_){if(ue.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var b=this.type=d.type,S=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=_,_=d.relatedTarget){if(le){e:{try{ce(_.nodeName);var F=!0;break e}catch{}F=!1}F||(_=null)}}else b=="mouseover"?_=d.fromElement:b=="mouseout"&&(_=d.toElement);this.relatedTarget=_,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:W[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&ne.aa.h.call(this)}}A(ne,ue);var W={2:"touch",3:"pen",4:"mouse"};ne.prototype.h=function(){ne.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var _e="closure_listenable_"+(1e6*Math.random()|0),Ge=0;function mr(d,_,b,S,F){this.listener=d,this.proxy=null,this.src=_,this.type=b,this.capture=!!S,this.ha=F,this.key=++Ge,this.da=this.fa=!1}function Ni(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function qr(d){this.src=d,this.g={},this.h=0}qr.prototype.add=function(d,_,b,S,F){var X=d.toString();d=this.g[X],d||(d=this.g[X]=[],this.h++);var de=Is(d,_,S,F);return-1<de?(_=d[de],b||(_.fa=!1)):(_=new mr(_,this.src,X,!!S,F),_.fa=b,d.push(_)),_};function Rs(d,_){var b=_.type;if(b in d.g){var S=d.g[b],F=Array.prototype.indexOf.call(S,_,void 0),X;(X=0<=F)&&Array.prototype.splice.call(S,F,1),X&&(Ni(_),d.g[b].length==0&&(delete d.g[b],d.h--))}}function Is(d,_,b,S){for(var F=0;F<d.length;++F){var X=d[F];if(!X.da&&X.listener==_&&X.capture==!!b&&X.ha==S)return F}return-1}var Os="closure_lm_"+(1e6*Math.random()|0),sl={};function lu(d,_,b,S,F){if(Array.isArray(_)){for(var X=0;X<_.length;X++)lu(d,_[X],b,S,F);return null}return b=cu(b),d&&d[_e]?d.K(_,b,y(S)?!!S.capture:!1,F):Ln(d,_,b,!1,S,F)}function Ln(d,_,b,S,F,X){if(!_)throw Error("Invalid event type");var de=y(F)?!!F.capture:!!F,ze=Da(d);if(ze||(d[Os]=ze=new qr(d)),b=ze.add(_,b,S,de,X),b.proxy)return b;if(S=ff(),b.proxy=S,S.src=d,S.listener=b,d.addEventListener)ee||(F=de),F===void 0&&(F=!1),d.addEventListener(_.toString(),S,F);else if(d.attachEvent)d.attachEvent(Ds(_.toString()),S);else if(d.addListener&&d.removeListener)d.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return b}function ff(){function d(b){return _.call(d.src,d.listener,b)}const _=mf;return d}function al(d,_,b,S,F){if(Array.isArray(_))for(var X=0;X<_.length;X++)al(d,_[X],b,S,F);else S=y(S)?!!S.capture:!!S,b=cu(b),d&&d[_e]?(d=d.i,_=String(_).toString(),_ in d.g&&(X=d.g[_],b=Is(X,b,S,F),-1<b&&(Ni(X[b]),Array.prototype.splice.call(X,b,1),X.length==0&&(delete d.g[_],d.h--)))):d&&(d=Da(d))&&(_=d.g[_.toString()],d=-1,_&&(d=Is(_,b,S,F)),(b=-1<d?_[d]:null)&&Oa(b))}function Oa(d){if(typeof d!="number"&&d&&!d.da){var _=d.src;if(_&&_[_e])Rs(_.i,d);else{var b=d.type,S=d.proxy;_.removeEventListener?_.removeEventListener(b,S,d.capture):_.detachEvent?_.detachEvent(Ds(b),S):_.addListener&&_.removeListener&&_.removeListener(S),(b=Da(_))?(Rs(b,d),b.h==0&&(b.src=null,_[Os]=null)):Ni(d)}}}function Ds(d){return d in sl?sl[d]:sl[d]="on"+d}function mf(d,_){if(d.da)d=!0;else{_=new ne(_,this);var b=d.listener,S=d.ha||d.src;d.fa&&Oa(d),d=b.call(S,_)}return d}function Da(d){return d=d[Os],d instanceof qr?d:null}var ol="__closure_events_fn_"+(1e9*Math.random()>>>0);function cu(d){return typeof d=="function"?d:(d[ol]||(d[ol]=function(_){return d.handleEvent(_)}),d[ol])}function yt(){fe.call(this),this.i=new qr(this),this.M=this,this.F=null}A(yt,fe),yt.prototype[_e]=!0,yt.prototype.removeEventListener=function(d,_,b,S){al(this,d,_,b,S)};function We(d,_){var b,S=d.F;if(S)for(b=[];S;S=S.F)b.push(S);if(d=d.M,S=_.type||_,typeof _=="string")_=new ue(_,d);else if(_ instanceof ue)_.target=_.target||d;else{var F=_;_=new ue(S,d),P(_,F)}if(F=!0,b)for(var X=b.length-1;0<=X;X--){var de=_.g=b[X];F=Nn(de,S,!0,_)&&F}if(de=_.g=d,F=Nn(de,S,!0,_)&&F,F=Nn(de,S,!1,_)&&F,b)for(X=0;X<b.length;X++)de=_.g=b[X],F=Nn(de,S,!1,_)&&F}yt.prototype.N=function(){if(yt.aa.N.call(this),this.i){var d=this.i,_;for(_ in d.g){for(var b=d.g[_],S=0;S<b.length;S++)Ni(b[S]);delete d.g[_],d.h--}}this.F=null},yt.prototype.K=function(d,_,b,S){return this.i.add(String(d),_,!1,b,S)},yt.prototype.L=function(d,_,b,S){return this.i.add(String(d),_,!0,b,S)};function Nn(d,_,b,S){if(_=d.i.g[String(_)],!_)return!0;_=_.concat();for(var F=!0,X=0;X<_.length;++X){var de=_[X];if(de&&!de.da&&de.capture==b){var ze=de.listener,Dt=de.ha||de.src;de.fa&&Rs(d.i,de),F=ze.call(Dt,S)!==!1&&F}}return F&&!S.defaultPrevented}function rn(d,_,b){if(typeof d=="function")b&&(d=x(d,b));else if(d&&typeof d.handleEvent=="function")d=x(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(_)?-1:f.setTimeout(d,_||0)}function uu(d){d.g=rn(()=>{d.g=null,d.i&&(d.i=!1,uu(d))},d.l);const _=d.h;d.h=null,d.m.apply(null,_)}class pf extends fe{constructor(_,b){super(),this.m=_,this.l=b,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:uu(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ps(d){fe.call(this),this.h=d,this.g={}}A(Ps,fe);var js=[];function Ms(d){ye(d.g,function(_,b){this.g.hasOwnProperty(b)&&Oa(_)},d),d.g={}}Ps.prototype.N=function(){Ps.aa.N.call(this),Ms(this)},Ps.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var tr=f.JSON.stringify,Pa=f.JSON.parse,ks=class{stringify(d){return f.JSON.stringify(d,void 0)}parse(d){return f.JSON.parse(d,void 0)}};function ll(){}ll.prototype.h=null;function cl(d){return d.h||(d.h=d.i())}function ul(){}var Fr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Hr(){ue.call(this,"d")}A(Hr,ue);function dl(){ue.call(this,"c")}A(dl,ue);var pr={},hl=null;function Ri(){return hl=hl||new yt}pr.La="serverreachability";function ja(d){ue.call(this,pr.La,d)}A(ja,ue);function Ii(d){const _=Ri();We(_,new ja(_))}pr.STAT_EVENT="statevent";function du(d,_){ue.call(this,pr.STAT_EVENT,d),this.stat=_}A(du,ue);function ut(d){const _=Ri();We(_,new du(_,d))}pr.Ma="timingevent";function Ot(d,_){ue.call(this,pr.Ma,d),this.size=_}A(Ot,ue);function At(d,_){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){d()},_)}function Un(){this.g=!0}Un.prototype.xa=function(){this.g=!1};function fl(d,_,b,S,F,X){d.info(function(){if(d.g)if(X)for(var de="",ze=X.split("&"),Dt=0;Dt<ze.length;Dt++){var Be=ze[Dt].split("=");if(1<Be.length){var zt=Be[0];Be=Be[1];var Pt=zt.split("_");de=2<=Pt.length&&Pt[1]=="type"?de+(zt+"="+Be+"&"):de+(zt+"=redacted&")}}else de=null;else de=X;return"XMLHTTP REQ ("+S+") [attempt "+F+"]: "+_+`
`+b+`
`+de})}function gf(d,_,b,S,F,X,de){d.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+F+"]: "+_+`
`+b+`
`+X+" "+de})}function Oi(d,_,b,S){d.info(function(){return"XMLHTTP TEXT ("+_+"): "+Vs(d,b)+(S?" "+S:"")})}function hu(d,_){d.info(function(){return"TIMEOUT: "+_})}Un.prototype.info=function(){};function Vs(d,_){if(!d.g)return _;if(!_)return null;try{var b=JSON.parse(_);if(b){for(d=0;d<b.length;d++)if(Array.isArray(b[d])){var S=b[d];if(!(2>S.length)){var F=S[1];if(Array.isArray(F)&&!(1>F.length)){var X=F[0];if(X!="noop"&&X!="stop"&&X!="close")for(var de=1;de<F.length;de++)F[de]=""}}}}return tr(b)}catch{return _}}var Di={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Gr={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},gr;function yr(){}A(yr,ll),yr.prototype.g=function(){return new XMLHttpRequest},yr.prototype.i=function(){return{}},gr=new yr;function hn(d,_,b,S){this.j=d,this.i=_,this.l=b,this.R=S||1,this.U=new Ps(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Et}function Et(){this.i=null,this.g="",this.h=!1}var ml={},Ma={};function nr(d,_,b){d.L=1,d.v=qs(Rn(_)),d.m=b,d.P=!0,$r(d,null)}function $r(d,_){d.F=Date.now(),Ls(d),d.A=Rn(d.v);var b=d.A,S=d.R;Array.isArray(S)||(S=[String(S)]),bl(b.i,"t",S),d.C=0,b=d.j.J,d.h=new Et,d.g=Nu(d.j,b?_:null,!d.m),0<d.O&&(d.M=new pf(x(d.Y,d,d.g),d.O)),_=d.U,b=d.g,S=d.ca;var F="readystatechange";Array.isArray(F)||(F&&(js[0]=F.toString()),F=js);for(var X=0;X<F.length;X++){var de=lu(b,F[X],S||_.handleEvent,!1,_.h||_);if(!de)break;_.g[de.key]=de}_=d.H?N(d.H):{},d.m?(d.u||(d.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,_)):(d.u="GET",d.g.ea(d.A,d.u,null,_)),Ii(),fl(d.i,d.u,d.A,d.l,d.R,d.m)}hn.prototype.ca=function(d){d=d.target;const _=this.M;_&&Fn(d)==3?_.j():this.Y(d)},hn.prototype.Y=function(d){try{if(d==this.g)e:{const Pt=Fn(this.g);var _=this.g.Ba();const ei=this.g.Z();if(!(3>Pt)&&(Pt!=3||this.g&&(this.h.h||this.g.oa()||bu(this.g)))){this.J||Pt!=4||_==7||(_==8||0>=ei?Ii(3):Ii(2)),Pi(this);var b=this.g.Z();this.X=b;t:if(fu(this)){var S=bu(this.g);d="";var F=S.length,X=Fn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Kt(this),vr(this);var de="";break t}this.h.i=new f.TextDecoder}for(_=0;_<F;_++)this.h.h=!0,d+=this.h.i.decode(S[_],{stream:!(X&&_==F-1)});S.length=0,this.h.g+=d,this.C=0,de=this.h.g}else de=this.g.oa();if(this.o=b==200,gf(this.i,this.u,this.A,this.l,this.R,Pt,b),this.o){if(this.T&&!this.K){t:{if(this.g){var ze,Dt=this.g;if((ze=Dt.g?Dt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!K(ze)){var Be=ze;break t}}Be=null}if(b=Be)Oi(this.i,this.l,b,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Us(this,b);else{this.o=!1,this.s=3,ut(12),Kt(this),vr(this);break e}}if(this.P){b=!0;let Qt;for(;!this.J&&this.C<de.length;)if(Qt=mu(this,de),Qt==Ma){Pt==4&&(this.s=4,ut(14),b=!1),Oi(this.i,this.l,null,"[Incomplete Response]");break}else if(Qt==ml){this.s=4,ut(15),Oi(this.i,this.l,de,"[Invalid Chunk]"),b=!1;break}else Oi(this.i,this.l,Qt,null),Us(this,Qt);if(fu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Pt!=4||de.length!=0||this.h.h||(this.s=1,ut(16),b=!1),this.o=this.o&&b,!b)Oi(this.i,this.l,de,"[Invalid Chunked Response]"),Kt(this),vr(this);else if(0<de.length&&!this.W){this.W=!0;var zt=this.j;zt.g==this&&zt.ba&&!zt.M&&(zt.j.info("Great, no buffering proxy detected. Bytes received: "+de.length),Ws(zt),zt.M=!0,ut(11))}}else Oi(this.i,this.l,de,null),Us(this,de);Pt==4&&Kt(this),this.o&&!this.J&&(Pt==4?Au(this.j,this):(this.o=!1,Ls(this)))}else Ef(this.g),b==400&&0<de.indexOf("Unknown SID")?(this.s=3,ut(12)):(this.s=0,ut(13)),Kt(this),vr(this)}}}catch{}finally{}};function fu(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function mu(d,_){var b=d.C,S=_.indexOf(`
`,b);return S==-1?Ma:(b=Number(_.substring(b,S)),isNaN(b)?ml:(S+=1,S+b>_.length?Ma:(_=_.slice(S,S+b),d.C=S+b,_)))}hn.prototype.cancel=function(){this.J=!0,Kt(this)};function Ls(d){d.S=Date.now()+d.I,pu(d,d.I)}function pu(d,_){if(d.B!=null)throw Error("WatchDog timer not null");d.B=At(x(d.ba,d),_)}function Pi(d){d.B&&(f.clearTimeout(d.B),d.B=null)}hn.prototype.ba=function(){this.B=null;const d=Date.now();0<=d-this.S?(hu(this.i,this.A),this.L!=2&&(Ii(),ut(17)),Kt(this),this.s=2,vr(this)):pu(this,this.S-d)};function vr(d){d.j.G==0||d.J||Au(d.j,d)}function Kt(d){Pi(d);var _=d.M;_&&typeof _.ma=="function"&&_.ma(),d.M=null,Ms(d.U),d.g&&(_=d.g,d.g=null,_.abort(),_.ma())}function Us(d,_){try{var b=d.j;if(b.G!=0&&(b.g==d||pl(b.h,d))){if(!d.K&&pl(b.h,d)&&b.G==3){try{var S=b.Da.g.parse(_)}catch{S=null}if(Array.isArray(S)&&S.length==3){var F=S;if(F[0]==0){e:if(!b.u){if(b.g)if(b.g.F+3e3<d.F)Ya(b),Ga(b);else break e;Al(b),ut(18)}}else b.za=F[1],0<b.za-b.T&&37500>F[2]&&b.F&&b.v==0&&!b.C&&(b.C=At(x(b.Za,b),6e3));if(1>=Va(b.h)&&b.ca){try{b.ca()}catch{}b.ca=void 0}}else Jr(b,11)}else if((d.K||b.g==d)&&Ya(b),!K(_))for(F=b.Da.g.parse(_),_=0;_<F.length;_++){let Be=F[_];if(b.T=Be[0],Be=Be[1],b.G==2)if(Be[0]=="c"){b.K=Be[1],b.ia=Be[2];const zt=Be[3];zt!=null&&(b.la=zt,b.j.info("VER="+b.la));const Pt=Be[4];Pt!=null&&(b.Aa=Pt,b.j.info("SVER="+b.Aa));const ei=Be[5];ei!=null&&typeof ei=="number"&&0<ei&&(S=1.5*ei,b.L=S,b.j.info("backChannelRequestTimeoutMs_="+S)),S=b;const Qt=d.g;if(Qt){const Ar=Qt.g?Qt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ar){var X=S.h;X.g||Ar.indexOf("spdy")==-1&&Ar.indexOf("quic")==-1&&Ar.indexOf("h2")==-1||(X.j=X.l,X.g=new Set,X.h&&(La(X,X.h),X.h=null))}if(S.D){const Cl=Qt.g?Qt.g.getResponseHeader("X-HTTP-Session-Id"):null;Cl&&(S.ya=Cl,et(S.I,S.D,Cl))}}b.G=3,b.l&&b.l.ua(),b.ba&&(b.R=Date.now()-d.F,b.j.info("Handshake RTT: "+b.R+"ms")),S=b;var de=d;if(S.qa=Cu(S,S.J?S.ia:null,S.W),de.K){fn(S.h,de);var ze=de,Dt=S.L;Dt&&(ze.I=Dt),ze.B&&(Pi(ze),Ls(ze)),S.g=de}else xu(S);0<b.i.length&&$a(b)}else Be[0]!="stop"&&Be[0]!="close"||Jr(b,7);else b.G==3&&(Be[0]=="stop"||Be[0]=="close"?Be[0]=="stop"?Jr(b,7):xl(b):Be[0]!="noop"&&b.l&&b.l.ta(Be),b.v=0)}}Ii(4)}catch{}}var gu=class{constructor(d,_){this.g=d,this.map=_}};function Yr(d){this.l=d||10,f.PerformanceNavigationTiming?(d=f.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ka(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function Va(d){return d.h?1:d.g?d.g.size:0}function pl(d,_){return d.h?d.h==_:d.g?d.g.has(_):!1}function La(d,_){d.g?d.g.add(_):d.h=_}function fn(d,_){d.h&&d.h==_?d.h=null:d.g&&d.g.has(_)&&d.g.delete(_)}Yr.prototype.cancel=function(){if(this.i=gl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function gl(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let _=d.i;for(const b of d.g.values())_=_.concat(b.D);return _}return k(d.i)}function yf(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(m(d)){for(var _=[],b=d.length,S=0;S<b;S++)_.push(d[S]);return _}_=[],b=0;for(S in d)_[b++]=d[S];return _}function Ua(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(m(d)||typeof d=="string"){var _=[];d=d.length;for(var b=0;b<d;b++)_.push(b);return _}_=[],b=0;for(const S in d)_[b++]=S;return _}}}function yl(d,_){if(d.forEach&&typeof d.forEach=="function")d.forEach(_,void 0);else if(m(d)||typeof d=="string")Array.prototype.forEach.call(d,_,void 0);else for(var b=Ua(d),S=yf(d),F=S.length,X=0;X<F;X++)_.call(void 0,S[X],b&&b[X],d)}var zs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function vf(d,_){if(d){d=d.split("&");for(var b=0;b<d.length;b++){var S=d[b].indexOf("="),F=null;if(0<=S){var X=d[b].substring(0,S);F=d[b].substring(S+1)}else X=d[b];_(X,F?decodeURIComponent(F.replace(/\+/g," ")):"")}}}function St(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof St){this.h=d.h,Bs(this,d.j),this.o=d.o,this.g=d.g,ji(this,d.s),this.l=d.l;var _=d.i,b=new Qr;b.i=_.i,_.g&&(b.g=new Map(_.g),b.h=_.h),Kr(this,b),this.m=d.m}else d&&(_=String(d).match(zs))?(this.h=!1,Bs(this,_[1]||"",!0),this.o=zn(_[2]||""),this.g=zn(_[3]||"",!0),ji(this,_[4]),this.l=zn(_[5]||"",!0),Kr(this,_[6]||"",!0),this.m=zn(_[7]||"")):(this.h=!1,this.i=new Qr(null,this.h))}St.prototype.toString=function(){var d=[],_=this.j;_&&d.push(Fs(_,vl,!0),":");var b=this.g;return(b||_=="file")&&(d.push("//"),(_=this.o)&&d.push(Fs(_,vl,!0),"@"),d.push(encodeURIComponent(String(b)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.s,b!=null&&d.push(":",String(b))),(b=this.l)&&(this.g&&b.charAt(0)!="/"&&d.push("/"),d.push(Fs(b,b.charAt(0)=="/"?_f:_l,!0))),(b=this.i.toString())&&d.push("?",b),(b=this.m)&&d.push("#",Fs(b,za)),d.join("")};function Rn(d){return new St(d)}function Bs(d,_,b){d.j=b?zn(_,!0):_,d.j&&(d.j=d.j.replace(/:$/,""))}function ji(d,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);d.s=_}else d.s=null}function Kr(d,_,b){_ instanceof Qr?(d.i=_,vu(d.i,d.h)):(b||(_=Fs(_,bf)),d.i=new Qr(_,d.h))}function et(d,_,b){d.i.set(_,b)}function qs(d){return et(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function zn(d,_){return d?_?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Fs(d,_,b){return typeof d=="string"?(d=encodeURI(d).replace(_,yu),b&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function yu(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var vl=/[#\/\?@]/g,_l=/[#\?:]/g,_f=/[#\?]/g,bf=/[#\?@]/g,za=/#/g;function Qr(d,_){this.h=this.g=null,this.i=d||null,this.j=!!_}function Bn(d){d.g||(d.g=new Map,d.h=0,d.i&&vf(d.i,function(_,b){d.add(decodeURIComponent(_.replace(/\+/g," ")),b)}))}n=Qr.prototype,n.add=function(d,_){Bn(this),this.i=null,d=_r(this,d);var b=this.g.get(d);return b||this.g.set(d,b=[]),b.push(_),this.h+=1,this};function Wr(d,_){Bn(d),_=_r(d,_),d.g.has(_)&&(d.i=null,d.h-=d.g.get(_).length,d.g.delete(_))}function Xr(d,_){return Bn(d),_=_r(d,_),d.g.has(_)}n.forEach=function(d,_){Bn(this),this.g.forEach(function(b,S){b.forEach(function(F){d.call(_,F,S,this)},this)},this)},n.na=function(){Bn(this);const d=Array.from(this.g.values()),_=Array.from(this.g.keys()),b=[];for(let S=0;S<_.length;S++){const F=d[S];for(let X=0;X<F.length;X++)b.push(_[S])}return b},n.V=function(d){Bn(this);let _=[];if(typeof d=="string")Xr(this,d)&&(_=_.concat(this.g.get(_r(this,d))));else{d=Array.from(this.g.values());for(let b=0;b<d.length;b++)_=_.concat(d[b])}return _},n.set=function(d,_){return Bn(this),this.i=null,d=_r(this,d),Xr(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[_]),this.h+=1,this},n.get=function(d,_){return d?(d=this.V(d),0<d.length?String(d[0]):_):_};function bl(d,_,b){Wr(d,_),0<b.length&&(d.i=null,d.g.set(_r(d,_),k(b)),d.h+=b.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],_=Array.from(this.g.keys());for(var b=0;b<_.length;b++){var S=_[b];const X=encodeURIComponent(String(S)),de=this.V(S);for(S=0;S<de.length;S++){var F=X;de[S]!==""&&(F+="="+encodeURIComponent(String(de[S]))),d.push(F)}}return this.i=d.join("&")};function _r(d,_){return _=String(_),d.j&&(_=_.toLowerCase()),_}function vu(d,_){_&&!d.j&&(Bn(d),d.i=null,d.g.forEach(function(b,S){var F=S.toLowerCase();S!=F&&(Wr(this,S),bl(this,F,b))},d)),d.j=_}function Hs(d,_){const b=new Un;if(f.Image){const S=new Image;S.onload=C(qn,b,"TestLoadImage: loaded",!0,_,S),S.onerror=C(qn,b,"TestLoadImage: error",!1,_,S),S.onabort=C(qn,b,"TestLoadImage: abort",!1,_,S),S.ontimeout=C(qn,b,"TestLoadImage: timeout",!1,_,S),f.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=d}else _(!1)}function rr(d,_){const b=new Un,S=new AbortController,F=setTimeout(()=>{S.abort(),qn(b,"TestPingServer: timeout",!1,_)},1e4);fetch(d,{signal:S.signal}).then(X=>{clearTimeout(F),X.ok?qn(b,"TestPingServer: ok",!0,_):qn(b,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(F),qn(b,"TestPingServer: error",!1,_)})}function qn(d,_,b,S,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),S(b)}catch{}}function Gs(){this.g=new ks}function br(d,_,b){const S=b||"";try{yl(d,function(F,X){let de=F;y(F)&&(de=tr(F)),_.push(S+X+"="+encodeURIComponent(de))})}catch(F){throw _.push(S+"type="+encodeURIComponent("_badmap")),F}}function Mi(d){this.l=d.Ub||null,this.j=d.eb||!1}A(Mi,ll),Mi.prototype.g=function(){return new Zr(this.l,this.j)},Mi.prototype.i=function(d){return function(){return d}}({});function Zr(d,_){yt.call(this),this.D=d,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}A(Zr,yt),n=Zr.prototype,n.open=function(d,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=_,this.readyState=1,Tr(this)},n.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(_.body=d),(this.D||f).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Er(this)),this.readyState=0},n.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,Tr(this)),this.g&&(this.readyState=3,Tr(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;El(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function El(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}n.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var _=d.value?d.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!d.done}))&&(this.response=this.responseText+=_)}d.done?Er(this):Tr(this),this.readyState==3&&El(this)}},n.Ra=function(d){this.g&&(this.response=this.responseText=d,Er(this))},n.Qa=function(d){this.g&&(this.response=d,Er(this))},n.ga=function(){this.g&&Er(this)};function Er(d){d.readyState=4,d.l=null,d.j=null,d.v=null,Tr(d)}n.setRequestHeader=function(d,_){this.u.append(d,_)},n.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],_=this.h.entries();for(var b=_.next();!b.done;)b=b.value,d.push(b[0]+": "+b[1]),b=_.next();return d.join(`\r
`)};function Tr(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Zr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function Tl(d){let _="";return ye(d,function(b,S){_+=S,_+=":",_+=b,_+=`\r
`}),_}function Ut(d,_,b){e:{for(S in b){var S=!1;break e}S=!0}S||(b=Tl(b),typeof d=="string"?b!=null&&encodeURIComponent(String(b)):et(d,_,b))}function Ke(d){yt.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}A(Ke,yt);var Ba=/^https?$/i,$s=["POST","PUT"];n=Ke.prototype,n.Ha=function(d){this.J=d},n.ea=function(d,_,b,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);_=_?_.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():gr.g(),this.v=this.o?cl(this.o):cl(gr),this.g.onreadystatechange=x(this.Ea,this);try{this.B=!0,this.g.open(_,String(d),!0),this.B=!1}catch(X){_u(this,X);return}if(d=b||"",b=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var F in S)b.set(F,S[F]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const X of S.keys())b.set(X,S.get(X));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(b.keys()).find(X=>X.toLowerCase()=="content-type"),F=f.FormData&&d instanceof f.FormData,!(0<=Array.prototype.indexOf.call($s,_,void 0))||S||F||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[X,de]of b)this.g.setRequestHeader(X,de);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ys(this),this.u=!0,this.g.send(d),this.u=!1}catch(X){_u(this,X)}};function _u(d,_){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=_,d.m=5,qa(d),xr(d)}function qa(d){d.A||(d.A=!0,We(d,"complete"),We(d,"error"))}n.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,We(this,"complete"),We(this,"abort"),xr(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),xr(this,!0)),Ke.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Fa(this):this.bb())},n.bb=function(){Fa(this)};function Fa(d){if(d.h&&typeof u<"u"&&(!d.v[1]||Fn(d)!=4||d.Z()!=2)){if(d.u&&Fn(d)==4)rn(d.Ea,0,d);else if(We(d,"readystatechange"),Fn(d)==4){d.h=!1;try{const de=d.Z();e:switch(de){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var b;if(!(b=_)){var S;if(S=de===0){var F=String(d.D).match(zs)[1]||null;!F&&f.self&&f.self.location&&(F=f.self.location.protocol.slice(0,-1)),S=!Ba.test(F?F.toLowerCase():"")}b=S}if(b)We(d,"complete"),We(d,"success");else{d.m=6;try{var X=2<Fn(d)?d.g.statusText:""}catch{X=""}d.l=X+" ["+d.Z()+"]",qa(d)}}finally{xr(d)}}}}function xr(d,_){if(d.g){Ys(d);const b=d.g,S=d.v[0]?()=>{}:null;d.g=null,d.v=null,_||We(d,"ready");try{b.onreadystatechange=S}catch{}}}function Ys(d){d.I&&(f.clearTimeout(d.I),d.I=null)}n.isActive=function(){return!!this.g};function Fn(d){return d.g?d.g.readyState:0}n.Z=function(){try{return 2<Fn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(d){if(this.g){var _=this.g.responseText;return d&&_.indexOf(d)==0&&(_=_.substring(d.length)),Pa(_)}};function bu(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function Ef(d){const _={};d=(d.g&&2<=Fn(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<d.length;S++){if(K(d[S]))continue;var b=U(d[S]);const F=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const X=_[F]||[];_[F]=X,X.push(b)}j(_,function(S){return S.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ks(d,_,b){return b&&b.internalChannelParams&&b.internalChannelParams[d]||_}function Ha(d){this.Aa=0,this.i=[],this.j=new Un,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ks("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ks("baseRetryDelayMs",5e3,d),this.cb=Ks("retryDelaySeedMs",1e4,d),this.Wa=Ks("forwardChannelMaxRetries",2,d),this.wa=Ks("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new Yr(d&&d.concurrentRequestLimit),this.Da=new Gs,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Ha.prototype,n.la=8,n.G=1,n.connect=function(d,_,b,S){ut(0),this.W=d,this.H=_||{},b&&S!==void 0&&(this.H.OSID=b,this.H.OAID=S),this.F=this.X,this.I=Cu(this,null,this.W),$a(this)};function xl(d){if(Eu(d),d.G==3){var _=d.U++,b=Rn(d.I);if(et(b,"SID",d.K),et(b,"RID",_),et(b,"TYPE","terminate"),Qs(d,b),_=new hn(d,d.j,_),_.L=2,_.v=qs(Rn(b)),b=!1,f.navigator&&f.navigator.sendBeacon)try{b=f.navigator.sendBeacon(_.v.toString(),"")}catch{}!b&&f.Image&&(new Image().src=_.v,b=!0),b||(_.g=Nu(_.j,null),_.g.ea(_.v)),_.F=Date.now(),Ls(_)}Su(d)}function Ga(d){d.g&&(Ws(d),d.g.cancel(),d.g=null)}function Eu(d){Ga(d),d.u&&(f.clearTimeout(d.u),d.u=null),Ya(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&f.clearTimeout(d.s),d.s=null)}function $a(d){if(!ka(d.h)&&!d.s){d.s=!0;var _=d.Ga;he||M(),ve||(he(),ve=!0),Me.add(_,d),d.B=0}}function Tf(d,_){return Va(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=_.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=At(x(d.Ga,d,_),Sl(d,d.B)),d.B++,!0)}n.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;const F=new hn(this,this.j,d);let X=this.o;if(this.S&&(X?(X=N(X),P(X,this.S)):X=this.S),this.m!==null||this.O||(F.H=X,X=null),this.P)e:{for(var _=0,b=0;b<this.i.length;b++){t:{var S=this.i[b];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(_+=S,4096<_){_=b;break e}if(_===4096||b===this.i.length-1){_=b+1;break e}}_=1e3}else _=1e3;_=Tu(this,F,_),b=Rn(this.I),et(b,"RID",d),et(b,"CVER",22),this.D&&et(b,"X-HTTP-Session-Id",this.D),Qs(this,b),X&&(this.O?_="headers="+encodeURIComponent(String(Tl(X)))+"&"+_:this.m&&Ut(b,this.m,X)),La(this.h,F),this.Ua&&et(b,"TYPE","init"),this.P?(et(b,"$req",_),et(b,"SID","null"),F.T=!0,nr(F,b,null)):nr(F,b,_),this.G=2}}else this.G==3&&(d?wl(this,d):this.i.length==0||ka(this.h)||wl(this))};function wl(d,_){var b;_?b=_.l:b=d.U++;const S=Rn(d.I);et(S,"SID",d.K),et(S,"RID",b),et(S,"AID",d.T),Qs(d,S),d.m&&d.o&&Ut(S,d.m,d.o),b=new hn(d,d.j,b,d.B+1),d.m===null&&(b.H=d.o),_&&(d.i=_.D.concat(d.i)),_=Tu(d,b,1e3),b.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),La(d.h,b),nr(b,S,_)}function Qs(d,_){d.H&&ye(d.H,function(b,S){et(_,S,b)}),d.l&&yl({},function(b,S){et(_,S,b)})}function Tu(d,_,b){b=Math.min(d.i.length,b);var S=d.l?x(d.l.Na,d.l,d):null;e:{var F=d.i;let X=-1;for(;;){const de=["count="+b];X==-1?0<b?(X=F[0].g,de.push("ofs="+X)):X=0:de.push("ofs="+X);let ze=!0;for(let Dt=0;Dt<b;Dt++){let Be=F[Dt].g;const zt=F[Dt].map;if(Be-=X,0>Be)X=Math.max(0,F[Dt].g-100),ze=!1;else try{br(zt,de,"req"+Be+"_")}catch{S&&S(zt)}}if(ze){S=de.join("&");break e}}}return d=d.i.splice(0,b),_.D=d,S}function xu(d){if(!d.g&&!d.u){d.Y=1;var _=d.Fa;he||M(),ve||(he(),ve=!0),Me.add(_,d),d.v=0}}function Al(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=At(x(d.Fa,d),Sl(d,d.v)),d.v++,!0)}n.Fa=function(){if(this.u=null,wu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=At(x(this.ab,this),d)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ut(10),Ga(this),wu(this))};function Ws(d){d.A!=null&&(f.clearTimeout(d.A),d.A=null)}function wu(d){d.g=new hn(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var _=Rn(d.qa);et(_,"RID","rpc"),et(_,"SID",d.K),et(_,"AID",d.T),et(_,"CI",d.F?"0":"1"),!d.F&&d.ja&&et(_,"TO",d.ja),et(_,"TYPE","xmlhttp"),Qs(d,_),d.m&&d.o&&Ut(_,d.m,d.o),d.L&&(d.g.I=d.L);var b=d.g;d=d.ia,b.L=1,b.v=qs(Rn(_)),b.m=null,b.P=!0,$r(b,d)}n.Za=function(){this.C!=null&&(this.C=null,Ga(this),Al(this),ut(19))};function Ya(d){d.C!=null&&(f.clearTimeout(d.C),d.C=null)}function Au(d,_){var b=null;if(d.g==_){Ya(d),Ws(d),d.g=null;var S=2}else if(pl(d.h,_))b=_.D,fn(d.h,_),S=1;else return;if(d.G!=0){if(_.o)if(S==1){b=_.m?_.m.length:0,_=Date.now()-_.F;var F=d.B;S=Ri(),We(S,new Ot(S,b)),$a(d)}else xu(d);else if(F=_.s,F==3||F==0&&0<_.X||!(S==1&&Tf(d,_)||S==2&&Al(d)))switch(b&&0<b.length&&(_=d.h,_.i=_.i.concat(b)),F){case 1:Jr(d,5);break;case 4:Jr(d,10);break;case 3:Jr(d,6);break;default:Jr(d,2)}}}function Sl(d,_){let b=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(b*=2),b*_}function Jr(d,_){if(d.j.info("Error code "+_),_==2){var b=x(d.fb,d),S=d.Xa;const F=!S;S=new St(S||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||Bs(S,"https"),qs(S),F?Hs(S.toString(),b):rr(S.toString(),b)}else ut(2);d.G=0,d.l&&d.l.sa(_),Su(d),Eu(d)}n.fb=function(d){d?(this.j.info("Successfully pinged google.com"),ut(2)):(this.j.info("Failed to ping google.com"),ut(1))};function Su(d){if(d.G=0,d.ka=[],d.l){const _=gl(d.h);(_.length!=0||d.i.length!=0)&&(O(d.ka,_),O(d.ka,d.i),d.h.i.length=0,k(d.i),d.i.length=0),d.l.ra()}}function Cu(d,_,b){var S=b instanceof St?Rn(b):new St(b);if(S.g!="")_&&(S.g=_+"."+S.g),ji(S,S.s);else{var F=f.location;S=F.protocol,_=_?_+"."+F.hostname:F.hostname,F=+F.port;var X=new St(null);S&&Bs(X,S),_&&(X.g=_),F&&ji(X,F),b&&(X.l=b),S=X}return b=d.D,_=d.ya,b&&_&&et(S,b,_),et(S,"VER",d.la),Qs(d,S),S}function Nu(d,_,b){if(_&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return _=d.Ca&&!d.pa?new Ke(new Mi({eb:b})):new Ke(d.pa),_.Ha(d.J),_}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ru(){}n=Ru.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Ka(){}Ka.prototype.g=function(d,_){return new mn(d,_)};function mn(d,_){yt.call(this),this.g=new Ha(_),this.l=d,this.h=_&&_.messageUrlParams||null,d=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(d?d["X-WebChannel-Content-Type"]=_.messageContentType:d={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(d?d["X-WebChannel-Client-Profile"]=_.va:d={"X-WebChannel-Client-Profile":_.va}),this.g.S=d,(d=_&&_.Sb)&&!K(d)&&(this.g.m=d),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!K(_)&&(this.g.D=_,d=this.h,d!==null&&_ in d&&(d=this.h,_ in d&&delete d[_])),this.j=new wr(this)}A(mn,yt),mn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},mn.prototype.close=function(){xl(this.g)},mn.prototype.o=function(d){var _=this.g;if(typeof d=="string"){var b={};b.__data__=d,d=b}else this.u&&(b={},b.__data__=tr(d),d=b);_.i.push(new gu(_.Ya++,d)),_.G==3&&$a(_)},mn.prototype.N=function(){this.g.l=null,delete this.j,xl(this.g),delete this.g,mn.aa.N.call(this)};function Iu(d){Hr.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var _=d.__sm__;if(_){e:{for(const b in _){d=b;break e}d=void 0}(this.i=d)&&(d=this.i,_=_!==null&&d in _?_[d]:void 0),this.data=_}else this.data=d}A(Iu,Hr);function Ou(){dl.call(this),this.status=1}A(Ou,dl);function wr(d){this.g=d}A(wr,Ru),wr.prototype.ua=function(){We(this.g,"a")},wr.prototype.ta=function(d){We(this.g,new Iu(d))},wr.prototype.sa=function(d){We(this.g,new Ou)},wr.prototype.ra=function(){We(this.g,"b")},Ka.prototype.createWebChannel=Ka.prototype.g,mn.prototype.send=mn.prototype.o,mn.prototype.open=mn.prototype.m,mn.prototype.close=mn.prototype.close,vT=function(){return new Ka},yT=function(){return Ri()},gT=pr,Kp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Di.NO_ERROR=0,Di.TIMEOUT=8,Di.HTTP_ERROR=6,$d=Di,Gr.COMPLETE="complete",pT=Gr,ul.EventType=Fr,Fr.OPEN="a",Fr.CLOSE="b",Fr.ERROR="c",Fr.MESSAGE="d",yt.prototype.listen=yt.prototype.K,bc=ul,Ke.prototype.listenOnce=Ke.prototype.L,Ke.prototype.getLastError=Ke.prototype.Ka,Ke.prototype.getLastErrorCode=Ke.prototype.Ba,Ke.prototype.getStatus=Ke.prototype.Z,Ke.prototype.getResponseJson=Ke.prototype.Oa,Ke.prototype.getResponseText=Ke.prototype.oa,Ke.prototype.send=Ke.prototype.ea,Ke.prototype.setWithCredentials=Ke.prototype.Ha,mT=Ke}).apply(typeof jd<"u"?jd:typeof self<"u"?self:typeof window<"u"?window:{});const Ib="@firebase/firestore",Ob="4.7.14";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ln.UNAUTHENTICATED=new ln(null),ln.GOOGLE_CREDENTIALS=new ln("google-credentials-uid"),ln.FIRST_PARTY=new ln("first-party-uid"),ln.MOCK_USER=new ln("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zo="11.7.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xa=new Sg("@firebase/firestore");function So(){return xa.logLevel}function pe(n,...e){if(xa.logLevel<=Le.DEBUG){const t=e.map(Lg);xa.debug(`Firestore (${Zo}): ${n}`,...t)}}function Ti(n,...e){if(xa.logLevel<=Le.ERROR){const t=e.map(Lg);xa.error(`Firestore (${Zo}): ${n}`,...t)}}function Uo(n,...e){if(xa.logLevel<=Le.WARN){const t=e.map(Lg);xa.warn(`Firestore (${Zo}): ${n}`,...t)}}function Lg(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ae(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,_T(n,i,t)}function _T(n,e,t){let i=`FIRESTORE (${Zo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw Ti(i),new Error(i)}function Qe(n,e,t,i){let a="Unexpected state";typeof t=="string"?a=t:i=t,n||_T(e,a,i)}function Re(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ie={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class me extends Ai{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class QI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ln.UNAUTHENTICATED))}shutdown(){}}class WI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class XI{constructor(e){this.t=e,this.currentUser=ln.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Qe(this.o===void 0,42304);let i=this.i;const a=m=>this.i!==i?(i=this.i,t(m)):Promise.resolve();let l=new vi;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new vi,e.enqueueRetryable(()=>a(this.currentUser))};const u=()=>{const m=l;e.enqueueRetryable(async()=>{await m.promise,await a(this.currentUser)})},f=m=>{pe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit(m=>f(m)),setTimeout(()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?f(m):(pe("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new vi)}},0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(pe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Qe(typeof i.accessToken=="string",31837,{l:i}),new bT(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Qe(e===null||typeof e=="string",2055,{h:e}),new ln(e)}}class ZI{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=ln.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class JI{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new ZI(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(ln.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Db{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class eO{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Xn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Qe(this.o===void 0,3512);const i=l=>{l.error!=null&&pe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const u=l.token!==this.m;return this.m=l.token,pe("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>i(l))};const a=l=>{pe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(l=>a(l)),setTimeout(()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):pe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Db(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Qe(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Db(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tO(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ET(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const a=tO(40);for(let l=0;l<a.length;++l)i.length<20&&a[l]<t&&(i+=e.charAt(a[l]%62))}return i}}function Pe(n,e){return n<e?-1:n>e?1:0}function Qp(n,e){let t=0;for(;t<n.length&&t<e.length;){const i=n.codePointAt(t),a=e.codePointAt(t);if(i!==a){if(i<128&&a<128)return Pe(i,a);{const l=ET(),u=nO(l.encode(Pb(n,t)),l.encode(Pb(e,t)));return u!==0?u:Pe(i,a)}}t+=i>65535?2:1}return Pe(n.length,e.length)}function Pb(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function nO(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return Pe(n[t],e[t]);return Pe(n.length,e.length)}function zo(n,e,t){return n.length===e.length&&n.every((i,a)=>t(i,e[a]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jb=-62135596800,Mb=1e6;class kt{static now(){return kt.fromMillis(Date.now())}static fromDate(e){return kt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*Mb);return new kt(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new me(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new me(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<jb)throw new me(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new me(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Mb}_compareTo(e){return this.seconds===e.seconds?Pe(this.nanoseconds,e.nanoseconds):Pe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-jb;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{static fromTimestamp(e){return new Ce(e)}static min(){return new Ce(new kt(0,0))}static max(){return new Ce(new kt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kb="__name__";class Dr{constructor(e,t,i){t===void 0?t=0:t>e.length&&Ae(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&Ae(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Dr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Dr?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let a=0;a<i;a++){const l=Dr.compareSegments(e.get(a),t.get(a));if(l!==0)return l}return Pe(e.length,t.length)}static compareSegments(e,t){const i=Dr.isNumericId(e),a=Dr.isNumericId(t);return i&&!a?-1:!i&&a?1:i&&a?Dr.extractNumericId(e).compare(Dr.extractNumericId(t)):Qp(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return fs.fromString(e.substring(4,e.length-2))}}class lt extends Dr{construct(e,t,i){return new lt(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new me(ie.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(a=>a.length>0))}return new lt(t)}static emptyPath(){return new lt([])}}const rO=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class tn extends Dr{construct(e,t,i){return new tn(e,t,i)}static isValidIdentifier(e){return rO.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),tn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===kb}static keyField(){return new tn([kb])}static fromServerFormat(e){const t=[];let i="",a=0;const l=()=>{if(i.length===0)throw new me(ie.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let u=!1;for(;a<e.length;){const f=e[a];if(f==="\\"){if(a+1===e.length)throw new me(ie.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[a+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new me(ie.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=m,a+=2}else f==="`"?(u=!u,a++):f!=="."||u?(i+=f,a++):(l(),a++)}if(l(),u)throw new me(ie.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new tn(t)}static emptyPath(){return new tn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(e){this.path=e}static fromPath(e){return new Ee(lt.fromString(e))}static fromName(e){return new Ee(lt.fromString(e).popFirst(5))}static empty(){return new Ee(lt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&lt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return lt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ee(new lt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pc=-1;function iO(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,a=Ce.fromTimestamp(i===1e9?new kt(t+1,0):new kt(t,i));return new gs(a,Ee.empty(),e)}function sO(n){return new gs(n.readTime,n.key,Pc)}class gs{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new gs(Ce.min(),Ee.empty(),Pc)}static max(){return new gs(Ce.max(),Ee.empty(),Pc)}}function aO(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ee.comparator(n.documentKey,e.documentKey),t!==0?t:Pe(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oO="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class lO{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jo(n){if(n.code!==ie.FAILED_PRECONDITION||n.message!==oO)throw n;pe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ae(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ae((i,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,a)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ae?t:ae.resolve(t)}catch(t){return ae.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ae.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ae.reject(t)}static resolve(e){return new ae((t,i)=>{t(e)})}static reject(e){return new ae((t,i)=>{i(e)})}static waitFor(e){return new ae((t,i)=>{let a=0,l=0,u=!1;e.forEach(f=>{++a,f.next(()=>{++l,u&&l===a&&t()},m=>i(m))}),u=!0,l===a&&t()})}static or(e){let t=ae.resolve(!1);for(const i of e)t=t.next(a=>a?ae.resolve(a):i());return t}static forEach(e,t){const i=[];return e.forEach((a,l)=>{i.push(t.call(this,a,l))}),this.waitFor(i)}static mapArray(e,t){return new ae((i,a)=>{const l=e.length,u=new Array(l);let f=0;for(let m=0;m<l;m++){const y=m;t(e[y]).next(v=>{u[y]=v,++f,f===l&&i(u)},v=>a(v))}})}static doWhile(e,t){return new ae((i,a)=>{const l=()=>{e()===!0?t().next(()=>{l()},a):i()};l()})}}function cO(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function el(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ue(i),this.ce=i=>t.writeSequenceNumber(i))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}Vh.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ug=-1;function Lh(n){return n==null}function hh(n){return n===0&&1/n==-1/0}function uO(n){return typeof n=="number"&&Number.isInteger(n)&&!hh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xT="";function dO(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Vb(e)),e=hO(n.get(t),e);return Vb(e)}function hO(n,e){let t=e;const i=n.length;for(let a=0;a<i;a++){const l=n.charAt(a);switch(l){case"\0":t+="";break;case xT:t+="";break;default:t+=l}}return t}function Vb(n){return n+xT+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lb(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function As(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function wT(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e,t){this.comparator=e,this.root=t||en.EMPTY}insert(e,t){return new gt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,en.BLACK,null,null))}remove(e){return new gt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,en.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const a=this.comparator(e,i.key);if(a===0)return t+i.left.size;a<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Md(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Md(this.root,e,this.comparator,!1)}getReverseIterator(){return new Md(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Md(this.root,e,this.comparator,!0)}}class Md{constructor(e,t,i,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class en{constructor(e,t,i,a,l){this.key=e,this.value=t,this.color=i??en.RED,this.left=a??en.EMPTY,this.right=l??en.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,a,l){return new en(e??this.key,t??this.value,i??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let a=this;const l=i(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,i),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,i)),a.fixUp()}removeMin(){if(this.left.isEmpty())return en.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return en.EMPTY;i=a.right.min(),a=a.copy(i.key,i.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,en.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,en.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ae(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ae(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ae(27949);return e+(this.isRed()?0:1)}}en.EMPTY=null,en.RED=!0,en.BLACK=!1;en.EMPTY=new class{constructor(){this.size=0}get key(){throw Ae(57766)}get value(){throw Ae(16141)}get color(){throw Ae(16727)}get left(){throw Ae(29726)}get right(){throw Ae(36894)}copy(e,t,i,a,l){return this}insert(e,t,i){return new en(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e){this.comparator=e,this.data=new gt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const a=i.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ub(this.data.getIterator())}getIteratorFrom(e){return new Ub(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof Vt)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=i.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Vt(this.comparator);return t.data=e,t}}class Ub{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e){this.fields=e,e.sort(tn.comparator)}static empty(){return new Vn([])}unionWith(e){let t=new Vt(tn.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Vn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return zo(this.fields,e.fields,(t,i)=>t.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new AT("Invalid base64 string: "+l):l}}(e);return new nn(t)}static fromUint8Array(e){const t=function(a){let l="";for(let u=0;u<a.length;++u)l+=String.fromCharCode(a[u]);return l}(e);return new nn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const i=new Uint8Array(t.length);for(let a=0;a<t.length;a++)i[a]=t.charCodeAt(a);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Pe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}nn.EMPTY_BYTE_STRING=new nn("");const fO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ys(n){if(Qe(!!n,39018),typeof n=="string"){let e=0;const t=fO.exec(n);if(Qe(!!t,46558,{timestamp:n}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:wt(n.seconds),nanos:wt(n.nanos)}}function wt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function vs(n){return typeof n=="string"?nn.fromBase64String(n):nn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ST="server_timestamp",CT="__type__",NT="__previous_value__",RT="__local_write_time__";function zg(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[CT])===null||t===void 0?void 0:t.stringValue)===ST}function Uh(n){const e=n.mapValue.fields[NT];return zg(e)?Uh(e):e}function jc(n){const e=ys(n.mapValue.fields[RT].timestampValue);return new kt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mO{constructor(e,t,i,a,l,u,f,m,y,v){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=a,this.ssl=l,this.forceLongPolling=u,this.autoDetectLongPolling=f,this.longPollingOptions=m,this.useFetchStreams=y,this.isUsingEmulator=v}}const fh="(default)";class Mc{constructor(e,t){this.projectId=e,this.database=t||fh}static empty(){return new Mc("","")}get isDefaultDatabase(){return this.database===fh}isEqual(e){return e instanceof Mc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IT="__type__",pO="__max__",kd={mapValue:{}},OT="__vector__",mh="value";function _s(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?zg(n)?4:yO(n)?9007199254740991:gO(n)?10:11:Ae(28295,{value:n})}function Ur(n,e){if(n===e)return!0;const t=_s(n);if(t!==_s(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return jc(n).isEqual(jc(e));case 3:return function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const u=ys(a.timestampValue),f=ys(l.timestampValue);return u.seconds===f.seconds&&u.nanos===f.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(a,l){return vs(a.bytesValue).isEqual(vs(l.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(a,l){return wt(a.geoPointValue.latitude)===wt(l.geoPointValue.latitude)&&wt(a.geoPointValue.longitude)===wt(l.geoPointValue.longitude)}(n,e);case 2:return function(a,l){if("integerValue"in a&&"integerValue"in l)return wt(a.integerValue)===wt(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const u=wt(a.doubleValue),f=wt(l.doubleValue);return u===f?hh(u)===hh(f):isNaN(u)&&isNaN(f)}return!1}(n,e);case 9:return zo(n.arrayValue.values||[],e.arrayValue.values||[],Ur);case 10:case 11:return function(a,l){const u=a.mapValue.fields||{},f=l.mapValue.fields||{};if(Lb(u)!==Lb(f))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(f[m]===void 0||!Ur(u[m],f[m])))return!1;return!0}(n,e);default:return Ae(52216,{left:n})}}function kc(n,e){return(n.values||[]).find(t=>Ur(t,e))!==void 0}function Bo(n,e){if(n===e)return 0;const t=_s(n),i=_s(e);if(t!==i)return Pe(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Pe(n.booleanValue,e.booleanValue);case 2:return function(l,u){const f=wt(l.integerValue||l.doubleValue),m=wt(u.integerValue||u.doubleValue);return f<m?-1:f>m?1:f===m?0:isNaN(f)?isNaN(m)?0:-1:1}(n,e);case 3:return zb(n.timestampValue,e.timestampValue);case 4:return zb(jc(n),jc(e));case 5:return Qp(n.stringValue,e.stringValue);case 6:return function(l,u){const f=vs(l),m=vs(u);return f.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(l,u){const f=l.split("/"),m=u.split("/");for(let y=0;y<f.length&&y<m.length;y++){const v=Pe(f[y],m[y]);if(v!==0)return v}return Pe(f.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(l,u){const f=Pe(wt(l.latitude),wt(u.latitude));return f!==0?f:Pe(wt(l.longitude),wt(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return Bb(n.arrayValue,e.arrayValue);case 10:return function(l,u){var f,m,y,v;const E=l.fields||{},x=u.fields||{},C=(f=E[mh])===null||f===void 0?void 0:f.arrayValue,A=(m=x[mh])===null||m===void 0?void 0:m.arrayValue,k=Pe(((y=C==null?void 0:C.values)===null||y===void 0?void 0:y.length)||0,((v=A==null?void 0:A.values)===null||v===void 0?void 0:v.length)||0);return k!==0?k:Bb(C,A)}(n.mapValue,e.mapValue);case 11:return function(l,u){if(l===kd.mapValue&&u===kd.mapValue)return 0;if(l===kd.mapValue)return 1;if(u===kd.mapValue)return-1;const f=l.fields||{},m=Object.keys(f),y=u.fields||{},v=Object.keys(y);m.sort(),v.sort();for(let E=0;E<m.length&&E<v.length;++E){const x=Qp(m[E],v[E]);if(x!==0)return x;const C=Bo(f[m[E]],y[v[E]]);if(C!==0)return C}return Pe(m.length,v.length)}(n.mapValue,e.mapValue);default:throw Ae(23264,{Pe:t})}}function zb(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Pe(n,e);const t=ys(n),i=ys(e),a=Pe(t.seconds,i.seconds);return a!==0?a:Pe(t.nanos,i.nanos)}function Bb(n,e){const t=n.values||[],i=e.values||[];for(let a=0;a<t.length&&a<i.length;++a){const l=Bo(t[a],i[a]);if(l)return l}return Pe(t.length,i.length)}function qo(n){return Wp(n)}function Wp(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const i=ys(t);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return vs(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Ee.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let i="[",a=!0;for(const l of t.values||[])a?a=!1:i+=",",i+=Wp(l);return i+"]"}(n.arrayValue):"mapValue"in n?function(t){const i=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const u of i)l?l=!1:a+=",",a+=`${u}:${Wp(t.fields[u])}`;return a+"}"}(n.mapValue):Ae(61005,{value:n})}function Yd(n){switch(_s(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Uh(n);return e?16+Yd(e):16;case 5:return 2*n.stringValue.length;case 6:return vs(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((a,l)=>a+Yd(l),0)}(n.arrayValue);case 10:case 11:return function(i){let a=0;return As(i.fields,(l,u)=>{a+=l.length+Yd(u)}),a}(n.mapValue);default:throw Ae(13486,{value:n})}}function qb(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Xp(n){return!!n&&"integerValue"in n}function Bg(n){return!!n&&"arrayValue"in n}function Fb(n){return!!n&&"nullValue"in n}function Hb(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Kd(n){return!!n&&"mapValue"in n}function gO(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[IT])===null||t===void 0?void 0:t.stringValue)===OT}function Sc(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return As(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=Sc(i)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Sc(n.arrayValue.values[t]);return e}return Object.assign({},n)}function yO(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===pO}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e){this.value=e}static empty(){return new wn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Kd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Sc(t)}setAll(e){let t=tn.emptyPath(),i={},a=[];e.forEach((u,f)=>{if(!t.isImmediateParentOf(f)){const m=this.getFieldsMap(t);this.applyChanges(m,i,a),i={},a=[],t=f.popLast()}u?i[f.lastSegment()]=Sc(u):a.push(f.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,i,a)}delete(e){const t=this.field(e.popLast());Kd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ur(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let a=t.mapValue.fields[e.get(i)];Kd(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,i){As(t,(a,l)=>e[a]=l);for(const a of i)delete e[a]}clone(){return new wn(Sc(this.value))}}function DT(n){const e=[];return As(n.fields,(t,i)=>{const a=new tn([t]);if(Kd(i)){const l=DT(i.mapValue).fields;if(l.length===0)e.push(a);else for(const u of l)e.push(a.child(u))}else e.push(a)}),new Vn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e,t,i,a,l,u,f){this.key=e,this.documentType=t,this.version=i,this.readTime=a,this.createTime=l,this.data=u,this.documentState=f}static newInvalidDocument(e){return new cn(e,0,Ce.min(),Ce.min(),Ce.min(),wn.empty(),0)}static newFoundDocument(e,t,i,a){return new cn(e,1,t,Ce.min(),i,a,0)}static newNoDocument(e,t){return new cn(e,2,t,Ce.min(),Ce.min(),wn.empty(),0)}static newUnknownDocument(e,t){return new cn(e,3,t,Ce.min(),Ce.min(),wn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=wn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=wn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof cn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new cn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ph{constructor(e,t){this.position=e,this.inclusive=t}}function Gb(n,e,t){let i=0;for(let a=0;a<n.position.length;a++){const l=e[a],u=n.position[a];if(l.field.isKeyField()?i=Ee.comparator(Ee.fromName(u.referenceValue),t.key):i=Bo(u,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function $b(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ur(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(e,t="asc"){this.field=e,this.dir=t}}function vO(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PT{}class It extends PT{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new bO(e,t,i):t==="array-contains"?new xO(e,i):t==="in"?new wO(e,i):t==="not-in"?new AO(e,i):t==="array-contains-any"?new SO(e,i):new It(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new EO(e,i):new TO(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Bo(t,this.value)):t!==null&&_s(this.value)===_s(t)&&this.matchesComparison(Bo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ae(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class cr extends PT{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new cr(e,t)}matches(e){return jT(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function jT(n){return n.op==="and"}function MT(n){return _O(n)&&jT(n)}function _O(n){for(const e of n.filters)if(e instanceof cr)return!1;return!0}function Zp(n){if(n instanceof It)return n.field.canonicalString()+n.op.toString()+qo(n.value);if(MT(n))return n.filters.map(e=>Zp(e)).join(",");{const e=n.filters.map(t=>Zp(t)).join(",");return`${n.op}(${e})`}}function kT(n,e){return n instanceof It?function(i,a){return a instanceof It&&i.op===a.op&&i.field.isEqual(a.field)&&Ur(i.value,a.value)}(n,e):n instanceof cr?function(i,a){return a instanceof cr&&i.op===a.op&&i.filters.length===a.filters.length?i.filters.reduce((l,u,f)=>l&&kT(u,a.filters[f]),!0):!1}(n,e):void Ae(19439)}function VT(n){return n instanceof It?function(t){return`${t.field.canonicalString()} ${t.op} ${qo(t.value)}`}(n):n instanceof cr?function(t){return t.op.toString()+" {"+t.getFilters().map(VT).join(" ,")+"}"}(n):"Filter"}class bO extends It{constructor(e,t,i){super(e,t,i),this.key=Ee.fromName(i.referenceValue)}matches(e){const t=Ee.comparator(e.key,this.key);return this.matchesComparison(t)}}class EO extends It{constructor(e,t){super(e,"in",t),this.keys=LT("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class TO extends It{constructor(e,t){super(e,"not-in",t),this.keys=LT("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function LT(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(i=>Ee.fromName(i.referenceValue))}class xO extends It{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Bg(t)&&kc(t.arrayValue,this.value)}}class wO extends It{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&kc(this.value.arrayValue,t)}}class AO extends It{constructor(e,t){super(e,"not-in",t)}matches(e){if(kc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!kc(this.value.arrayValue,t)}}class SO extends It{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Bg(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>kc(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CO{constructor(e,t=null,i=[],a=[],l=null,u=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=a,this.limit=l,this.startAt=u,this.endAt=f,this.Ie=null}}function Yb(n,e=null,t=[],i=[],a=null,l=null,u=null){return new CO(n,e,t,i,a,l,u)}function qg(n){const e=Re(n);if(e.Ie===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>Zp(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>function(l){return l.field.canonicalString()+l.dir}(i)).join(","),Lh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>qo(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>qo(i)).join(",")),e.Ie=t}return e.Ie}function Fg(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!vO(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!kT(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!$b(n.startAt,e.startAt)&&$b(n.endAt,e.endAt)}function Jp(n){return Ee.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(e,t=null,i=[],a=[],l=null,u="F",f=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=a,this.limit=l,this.limitType=u,this.startAt=f,this.endAt=m,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function NO(n,e,t,i,a,l,u,f){return new tl(n,e,t,i,a,l,u,f)}function Hg(n){return new tl(n)}function Kb(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function UT(n){return n.collectionGroup!==null}function Cc(n){const e=Re(n);if(e.Ee===null){e.Ee=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ee.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let f=new Vt(tn.comparator);return u.filters.forEach(m=>{m.getFlattenedFilters().forEach(y=>{y.isInequality()&&(f=f.add(y.field))})}),f})(e).forEach(l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ee.push(new Vc(l,i))}),t.has(tn.keyField().canonicalString())||e.Ee.push(new Vc(tn.keyField(),i))}return e.Ee}function Vr(n){const e=Re(n);return e.de||(e.de=RO(e,Cc(n))),e.de}function RO(n,e){if(n.limitType==="F")return Yb(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(a=>{const l=a.dir==="desc"?"asc":"desc";return new Vc(a.field,l)});const t=n.endAt?new ph(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new ph(n.startAt.position,n.startAt.inclusive):null;return Yb(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function eg(n,e){const t=n.filters.concat([e]);return new tl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function gh(n,e,t){return new tl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function zh(n,e){return Fg(Vr(n),Vr(e))&&n.limitType===e.limitType}function zT(n){return`${qg(Vr(n))}|lt:${n.limitType}`}function Co(n){return`Query(target=${function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map(a=>VT(a)).join(", ")}]`),Lh(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map(a=>function(u){return`${u.field.canonicalString()} (${u.dir})`}(a)).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(a=>qo(a)).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(a=>qo(a)).join(",")),`Target(${i})`}(Vr(n))}; limitType=${n.limitType})`}function Bh(n,e){return e.isFoundDocument()&&function(i,a){const l=a.key.path;return i.collectionGroup!==null?a.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):Ee.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)}(n,e)&&function(i,a){for(const l of Cc(i))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0}(n,e)&&function(i,a){for(const l of i.filters)if(!l.matches(a))return!1;return!0}(n,e)&&function(i,a){return!(i.startAt&&!function(u,f,m){const y=Gb(u,f,m);return u.inclusive?y<=0:y<0}(i.startAt,Cc(i),a)||i.endAt&&!function(u,f,m){const y=Gb(u,f,m);return u.inclusive?y>=0:y>0}(i.endAt,Cc(i),a))}(n,e)}function IO(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function BT(n){return(e,t)=>{let i=!1;for(const a of Cc(n)){const l=OO(a,e,t);if(l!==0)return l;i=i||a.field.isKeyField()}return 0}}function OO(n,e,t){const i=n.field.isKeyField()?Ee.comparator(e.key,t.key):function(l,u,f){const m=u.data.field(l),y=f.data.field(l);return m!==null&&y!==null?Bo(m,y):Ae(42886)}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Ae(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[a,l]of i)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),a=this.inner[i];if(a===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return i.length===1?delete this.inner[t]:i.splice(a,1),this.innerSize--,!0;return!1}forEach(e){As(this.inner,(t,i)=>{for(const[a,l]of i)e(a,l)})}isEmpty(){return wT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DO=new gt(Ee.comparator);function xi(){return DO}const qT=new gt(Ee.comparator);function Ec(...n){let e=qT;for(const t of n)e=e.insert(t.key,t);return e}function FT(n){let e=qT;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function pa(){return Nc()}function HT(){return Nc()}function Nc(){return new Na(n=>n.toString(),(n,e)=>n.isEqual(e))}const PO=new gt(Ee.comparator),jO=new Vt(Ee.comparator);function Ue(...n){let e=jO;for(const t of n)e=e.add(t);return e}const MO=new Vt(Pe);function kO(){return MO}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gg(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:hh(e)?"-0":e}}function GT(n){return{integerValue:""+n}}function VO(n,e){return uO(e)?GT(e):Gg(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qh{constructor(){this._=void 0}}function LO(n,e,t){return n instanceof Lc?function(a,l){const u={fields:{[CT]:{stringValue:ST},[RT]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&zg(l)&&(l=Uh(l)),l&&(u.fields[NT]=l),{mapValue:u}}(t,e):n instanceof Uc?YT(n,e):n instanceof zc?KT(n,e):function(a,l){const u=$T(a,l),f=Qb(u)+Qb(a.Re);return Xp(u)&&Xp(a.Re)?GT(f):Gg(a.serializer,f)}(n,e)}function UO(n,e,t){return n instanceof Uc?YT(n,e):n instanceof zc?KT(n,e):t}function $T(n,e){return n instanceof yh?function(i){return Xp(i)||function(l){return!!l&&"doubleValue"in l}(i)}(e)?e:{integerValue:0}:null}class Lc extends qh{}class Uc extends qh{constructor(e){super(),this.elements=e}}function YT(n,e){const t=QT(e);for(const i of n.elements)t.some(a=>Ur(a,i))||t.push(i);return{arrayValue:{values:t}}}class zc extends qh{constructor(e){super(),this.elements=e}}function KT(n,e){let t=QT(e);for(const i of n.elements)t=t.filter(a=>!Ur(a,i));return{arrayValue:{values:t}}}class yh extends qh{constructor(e,t){super(),this.serializer=e,this.Re=t}}function Qb(n){return wt(n.integerValue||n.doubleValue)}function QT(n){return Bg(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zO{constructor(e,t){this.field=e,this.transform=t}}function BO(n,e){return n.field.isEqual(e.field)&&function(i,a){return i instanceof Uc&&a instanceof Uc||i instanceof zc&&a instanceof zc?zo(i.elements,a.elements,Ur):i instanceof yh&&a instanceof yh?Ur(i.Re,a.Re):i instanceof Lc&&a instanceof Lc}(n.transform,e.transform)}class qO{constructor(e,t){this.version=e,this.transformResults=t}}class Zn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Zn}static exists(e){return new Zn(void 0,e)}static updateTime(e){return new Zn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Qd(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Fh{}function WT(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new $g(n.key,Zn.none()):new Zc(n.key,n.data,Zn.none());{const t=n.data,i=wn.empty();let a=new Vt(tn.comparator);for(let l of e.fields)if(!a.has(l)){let u=t.field(l);u===null&&l.length>1&&(l=l.popLast(),u=t.field(l)),u===null?i.delete(l):i.set(l,u),a=a.add(l)}return new Ss(n.key,i,new Vn(a.toArray()),Zn.none())}}function FO(n,e,t){n instanceof Zc?function(a,l,u){const f=a.value.clone(),m=Xb(a.fieldTransforms,l,u.transformResults);f.setAll(m),l.convertToFoundDocument(u.version,f).setHasCommittedMutations()}(n,e,t):n instanceof Ss?function(a,l,u){if(!Qd(a.precondition,l))return void l.convertToUnknownDocument(u.version);const f=Xb(a.fieldTransforms,l,u.transformResults),m=l.data;m.setAll(XT(a)),m.setAll(f),l.convertToFoundDocument(u.version,m).setHasCommittedMutations()}(n,e,t):function(a,l,u){l.convertToNoDocument(u.version).setHasCommittedMutations()}(0,e,t)}function Rc(n,e,t,i){return n instanceof Zc?function(l,u,f,m){if(!Qd(l.precondition,u))return f;const y=l.value.clone(),v=Zb(l.fieldTransforms,m,u);return y.setAll(v),u.convertToFoundDocument(u.version,y).setHasLocalMutations(),null}(n,e,t,i):n instanceof Ss?function(l,u,f,m){if(!Qd(l.precondition,u))return f;const y=Zb(l.fieldTransforms,m,u),v=u.data;return v.setAll(XT(l)),v.setAll(y),u.convertToFoundDocument(u.version,v).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(E=>E.field))}(n,e,t,i):function(l,u,f){return Qd(l.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):f}(n,e,t)}function HO(n,e){let t=null;for(const i of n.fieldTransforms){const a=e.data.field(i.field),l=$T(i.transform,a||null);l!=null&&(t===null&&(t=wn.empty()),t.set(i.field,l))}return t||null}function Wb(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(i,a){return i===void 0&&a===void 0||!(!i||!a)&&zo(i,a,(l,u)=>BO(l,u))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Zc extends Fh{constructor(e,t,i,a=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Ss extends Fh{constructor(e,t,i,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function XT(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}}),e}function Xb(n,e,t){const i=new Map;Qe(n.length===t.length,32656,{Ve:t.length,me:n.length});for(let a=0;a<t.length;a++){const l=n[a],u=l.transform,f=e.data.field(l.field);i.set(l.field,UO(u,f,t[a]))}return i}function Zb(n,e,t){const i=new Map;for(const a of n){const l=a.transform,u=t.data.field(a.field);i.set(a.field,LO(l,u,e))}return i}class $g extends Fh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class GO extends Fh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $O{constructor(e,t,i,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=a}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&FO(l,e,i[a])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=Rc(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=Rc(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=HT();return this.mutations.forEach(a=>{const l=e.get(a.key),u=l.overlayedDocument;let f=this.applyToLocalView(u,l.mutatedFields);f=t.has(a.key)?null:f;const m=WT(u,f);m!==null&&i.set(a.key,m),u.isValidDocument()||u.convertToNoDocument(Ce.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ue())}isEqual(e){return this.batchId===e.batchId&&zo(this.mutations,e.mutations,(t,i)=>Wb(t,i))&&zo(this.baseMutations,e.baseMutations,(t,i)=>Wb(t,i))}}class Yg{constructor(e,t,i,a){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=a}static from(e,t,i){Qe(e.mutations.length===i.length,58842,{fe:e.mutations.length,ge:i.length});let a=function(){return PO}();const l=e.mutations;for(let u=0;u<l.length;u++)a=a.insert(l[u].key,i[u].version);return new Yg(e,t,i,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YO{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KO{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Rt,Fe;function QO(n){switch(n){case ie.OK:return Ae(64938);case ie.CANCELLED:case ie.UNKNOWN:case ie.DEADLINE_EXCEEDED:case ie.RESOURCE_EXHAUSTED:case ie.INTERNAL:case ie.UNAVAILABLE:case ie.UNAUTHENTICATED:return!1;case ie.INVALID_ARGUMENT:case ie.NOT_FOUND:case ie.ALREADY_EXISTS:case ie.PERMISSION_DENIED:case ie.FAILED_PRECONDITION:case ie.ABORTED:case ie.OUT_OF_RANGE:case ie.UNIMPLEMENTED:case ie.DATA_LOSS:return!0;default:return Ae(15467,{code:n})}}function ZT(n){if(n===void 0)return Ti("GRPC error has no .code"),ie.UNKNOWN;switch(n){case Rt.OK:return ie.OK;case Rt.CANCELLED:return ie.CANCELLED;case Rt.UNKNOWN:return ie.UNKNOWN;case Rt.DEADLINE_EXCEEDED:return ie.DEADLINE_EXCEEDED;case Rt.RESOURCE_EXHAUSTED:return ie.RESOURCE_EXHAUSTED;case Rt.INTERNAL:return ie.INTERNAL;case Rt.UNAVAILABLE:return ie.UNAVAILABLE;case Rt.UNAUTHENTICATED:return ie.UNAUTHENTICATED;case Rt.INVALID_ARGUMENT:return ie.INVALID_ARGUMENT;case Rt.NOT_FOUND:return ie.NOT_FOUND;case Rt.ALREADY_EXISTS:return ie.ALREADY_EXISTS;case Rt.PERMISSION_DENIED:return ie.PERMISSION_DENIED;case Rt.FAILED_PRECONDITION:return ie.FAILED_PRECONDITION;case Rt.ABORTED:return ie.ABORTED;case Rt.OUT_OF_RANGE:return ie.OUT_OF_RANGE;case Rt.UNIMPLEMENTED:return ie.UNIMPLEMENTED;case Rt.DATA_LOSS:return ie.DATA_LOSS;default:return Ae(39323,{code:n})}}(Fe=Rt||(Rt={}))[Fe.OK=0]="OK",Fe[Fe.CANCELLED=1]="CANCELLED",Fe[Fe.UNKNOWN=2]="UNKNOWN",Fe[Fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Fe[Fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Fe[Fe.NOT_FOUND=5]="NOT_FOUND",Fe[Fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Fe[Fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Fe[Fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Fe[Fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Fe[Fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Fe[Fe.ABORTED=10]="ABORTED",Fe[Fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Fe[Fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Fe[Fe.INTERNAL=13]="INTERNAL",Fe[Fe.UNAVAILABLE=14]="UNAVAILABLE",Fe[Fe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WO=new fs([4294967295,4294967295],0);function Jb(n){const e=ET().encode(n),t=new fT;return t.update(e),new Uint8Array(t.digest())}function eE(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new fs([t,i],0),new fs([a,l],0)]}class Kg{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Tc(`Invalid padding: ${t}`);if(i<0)throw new Tc(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Tc(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Tc(`Invalid padding when bitmap length is 0: ${t}`);this.pe=8*e.length-t,this.ye=fs.fromNumber(this.pe)}we(e,t,i){let a=e.add(t.multiply(fs.fromNumber(i)));return a.compare(WO)===1&&(a=new fs([a.getBits(0),a.getBits(1)],0)),a.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const t=Jb(e),[i,a]=eE(t);for(let l=0;l<this.hashCount;l++){const u=this.we(i,a,l);if(!this.be(u))return!1}return!0}static create(e,t,i){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),u=new Kg(l,a,t);return i.forEach(f=>u.insert(f)),u}insert(e){if(this.pe===0)return;const t=Jb(e),[i,a]=eE(t);for(let l=0;l<this.hashCount;l++){const u=this.we(i,a,l);this.Se(u)}}Se(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Tc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hh{constructor(e,t,i,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const a=new Map;return a.set(e,Jc.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Hh(Ce.min(),a,new gt(Pe),xi(),Ue())}}class Jc{constructor(e,t,i,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Jc(i,t,Ue(),Ue(),Ue())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wd{constructor(e,t,i,a){this.De=e,this.removedTargetIds=t,this.key=i,this.ve=a}}class JT{constructor(e,t){this.targetId=e,this.Ce=t}}class ex{constructor(e,t,i=nn.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=a}}class tE{constructor(){this.Fe=0,this.Me=nE(),this.xe=nn.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=Ue(),t=Ue(),i=Ue();return this.Me.forEach((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:i=i.add(a);break;default:Ae(38017,{changeType:l})}}),new Jc(this.xe,this.Oe,e,t,i)}Qe(){this.Ne=!1,this.Me=nE()}$e(e,t){this.Ne=!0,this.Me=this.Me.insert(e,t)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,Qe(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class XO{constructor(e){this.ze=e,this.je=new Map,this.He=xi(),this.Je=Vd(),this.Ye=Vd(),this.Ze=new gt(Pe)}Xe(e){for(const t of e.De)e.ve&&e.ve.isFoundDocument()?this.et(t,e.ve):this.tt(t,e.key,e.ve);for(const t of e.removedTargetIds)this.tt(t,e.key,e.ve)}nt(e){this.forEachTarget(e,t=>{const i=this.rt(t);switch(e.state){case 0:this.it(t)&&i.ke(e.resumeToken);break;case 1:i.We(),i.Be||i.Qe(),i.ke(e.resumeToken);break;case 2:i.We(),i.Be||this.removeTarget(t);break;case 3:this.it(t)&&(i.Ge(),i.ke(e.resumeToken));break;case 4:this.it(t)&&(this.st(t),i.ke(e.resumeToken));break;default:Ae(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.je.forEach((i,a)=>{this.it(a)&&t(a)})}ot(e){const t=e.targetId,i=e.Ce.count,a=this._t(t);if(a){const l=a.target;if(Jp(l))if(i===0){const u=new Ee(l.path);this.tt(t,u,cn.newNoDocument(u,Ce.min()))}else Qe(i===1,20013,{expectedCount:i});else{const u=this.ut(t);if(u!==i){const f=this.ct(e),m=f?this.lt(f,e,u):1;if(m!==0){this.st(t);const y=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,y)}}}}}ct(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:a=0},hashCount:l=0}=t;let u,f;try{u=vs(i).toUint8Array()}catch(m){if(m instanceof AT)return Uo("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{f=new Kg(u,a,l)}catch(m){return Uo(m instanceof Tc?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return f.pe===0?null:f}lt(e,t,i){return t.Ce.count===i-this.Tt(e,t.targetId)?0:2}Tt(e,t){const i=this.ze.getRemoteKeysForTarget(t);let a=0;return i.forEach(l=>{const u=this.ze.Pt(),f=`projects/${u.projectId}/databases/${u.database}/documents/${l.path.canonicalString()}`;e.mightContain(f)||(this.tt(t,l,null),a++)}),a}It(e){const t=new Map;this.je.forEach((l,u)=>{const f=this._t(u);if(f){if(l.current&&Jp(f.target)){const m=new Ee(f.target.path);this.Et(m).has(u)||this.dt(u,m)||this.tt(u,m,cn.newNoDocument(m,e))}l.Le&&(t.set(u,l.qe()),l.Qe())}});let i=Ue();this.Ye.forEach((l,u)=>{let f=!0;u.forEachWhile(m=>{const y=this._t(m);return!y||y.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)}),f&&(i=i.add(l))}),this.He.forEach((l,u)=>u.setReadTime(e));const a=new Hh(e,t,this.Ze,this.He,i);return this.He=xi(),this.Je=Vd(),this.Ye=Vd(),this.Ze=new gt(Pe),a}et(e,t){if(!this.it(e))return;const i=this.dt(e,t.key)?2:0;this.rt(e).$e(t.key,i),this.He=this.He.insert(t.key,t),this.Je=this.Je.insert(t.key,this.Et(t.key).add(e)),this.Ye=this.Ye.insert(t.key,this.At(t.key).add(e))}tt(e,t,i){if(!this.it(e))return;const a=this.rt(e);this.dt(e,t)?a.$e(t,1):a.Ue(t),this.Ye=this.Ye.insert(t,this.At(t).delete(e)),this.Ye=this.Ye.insert(t,this.At(t).add(e)),i&&(this.He=this.He.insert(t,i))}removeTarget(e){this.je.delete(e)}ut(e){const t=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let t=this.je.get(e);return t||(t=new tE,this.je.set(e,t)),t}At(e){let t=this.Ye.get(e);return t||(t=new Vt(Pe),this.Ye=this.Ye.insert(e,t)),t}Et(e){let t=this.Je.get(e);return t||(t=new Vt(Pe),this.Je=this.Je.insert(e,t)),t}it(e){const t=this._t(e)!==null;return t||pe("WatchChangeAggregator","Detected inactive target",e),t}_t(e){const t=this.je.get(e);return t&&t.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new tE),this.ze.getRemoteKeysForTarget(e).forEach(t=>{this.tt(e,t,null)})}dt(e,t){return this.ze.getRemoteKeysForTarget(e).has(t)}}function Vd(){return new gt(Ee.comparator)}function nE(){return new gt(Ee.comparator)}const ZO={asc:"ASCENDING",desc:"DESCENDING"},JO={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},eD={and:"AND",or:"OR"};class tD{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function tg(n,e){return n.useProto3Json||Lh(e)?e:{value:e}}function vh(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function tx(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function nD(n,e){return vh(n,e.toTimestamp())}function Lr(n){return Qe(!!n,49232),Ce.fromTimestamp(function(t){const i=ys(t);return new kt(i.seconds,i.nanos)}(n))}function Qg(n,e){return ng(n,e).canonicalString()}function ng(n,e){const t=function(a){return new lt(["projects",a.projectId,"databases",a.database])}(n).child("documents");return e===void 0?t:t.child(e)}function nx(n){const e=lt.fromString(n);return Qe(ox(e),10190,{key:e.toString()}),e}function rg(n,e){return Qg(n.databaseId,e.path)}function Np(n,e){const t=nx(e);if(t.get(1)!==n.databaseId.projectId)throw new me(ie.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new me(ie.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ee(ix(t))}function rx(n,e){return Qg(n.databaseId,e)}function rD(n){const e=nx(n);return e.length===4?lt.emptyPath():ix(e)}function ig(n){return new lt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function ix(n){return Qe(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function rE(n,e,t){return{name:rg(n,e),fields:t.value.mapValue.fields}}function iD(n,e){let t;if("targetChange"in e){e.targetChange;const i=function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Ae(39313,{state:y})}(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=function(y,v){return y.useProto3Json?(Qe(v===void 0||typeof v=="string",58123),nn.fromBase64String(v||"")):(Qe(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),nn.fromUint8Array(v||new Uint8Array))}(n,e.targetChange.resumeToken),u=e.targetChange.cause,f=u&&function(y){const v=y.code===void 0?ie.UNKNOWN:ZT(y.code);return new me(v,y.message||"")}(u);t=new ex(i,a,l,f||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const a=Np(n,i.document.name),l=Lr(i.document.updateTime),u=i.document.createTime?Lr(i.document.createTime):Ce.min(),f=new wn({mapValue:{fields:i.document.fields}}),m=cn.newFoundDocument(a,l,u,f),y=i.targetIds||[],v=i.removedTargetIds||[];t=new Wd(y,v,m.key,m)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const a=Np(n,i.document),l=i.readTime?Lr(i.readTime):Ce.min(),u=cn.newNoDocument(a,l),f=i.removedTargetIds||[];t=new Wd([],f,u.key,u)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const a=Np(n,i.document),l=i.removedTargetIds||[];t=new Wd([],l,a,null)}else{if(!("filter"in e))return Ae(11601,{Vt:e});{e.filter;const i=e.filter;i.targetId;const{count:a=0,unchangedNames:l}=i,u=new KO(a,l),f=i.targetId;t=new JT(f,u)}}return t}function sD(n,e){let t;if(e instanceof Zc)t={update:rE(n,e.key,e.value)};else if(e instanceof $g)t={delete:rg(n,e.key)};else if(e instanceof Ss)t={update:rE(n,e.key,e.data),updateMask:mD(e.fieldMask)};else{if(!(e instanceof GO))return Ae(16599,{ft:e.type});t={verify:rg(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(l,u){const f=u.transform;if(f instanceof Lc)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof Uc)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof zc)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof yh)return{fieldPath:u.field.canonicalString(),increment:f.Re};throw Ae(20930,{transform:u.transform})}(0,i))),e.precondition.isNone||(t.currentDocument=function(a,l){return l.updateTime!==void 0?{updateTime:nD(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Ae(27497)}(n,e.precondition)),t}function aD(n,e){return n&&n.length>0?(Qe(e!==void 0,14353),n.map(t=>function(a,l){let u=a.updateTime?Lr(a.updateTime):Lr(l);return u.isEqual(Ce.min())&&(u=Lr(l)),new qO(u,a.transformResults||[])}(t,e))):[]}function oD(n,e){return{documents:[rx(n,e.path)]}}function lD(n,e){const t={structuredQuery:{}},i=e.path;let a;e.collectionGroup!==null?(a=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=rx(n,a);const l=function(y){if(y.length!==0)return ax(cr.create(y,"and"))}(e.filters);l&&(t.structuredQuery.where=l);const u=function(y){if(y.length!==0)return y.map(v=>function(x){return{field:No(x.field),direction:dD(x.dir)}}(v))}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const f=tg(n,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=function(y){return{before:y.inclusive,values:y.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(y){return{before:!y.inclusive,values:y.position}}(e.endAt)),{gt:t,parent:a}}function cD(n){let e=rD(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let a=null;if(i>0){Qe(i===1,65062);const v=t.from[0];v.allDescendants?a=v.collectionId:e=e.child(v.collectionId)}let l=[];t.where&&(l=function(E){const x=sx(E);return x instanceof cr&&MT(x)?x.getFilters():[x]}(t.where));let u=[];t.orderBy&&(u=function(E){return E.map(x=>function(A){return new Vc(Ro(A.field),function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(A.direction))}(x))}(t.orderBy));let f=null;t.limit&&(f=function(E){let x;return x=typeof E=="object"?E.value:E,Lh(x)?null:x}(t.limit));let m=null;t.startAt&&(m=function(E){const x=!!E.before,C=E.values||[];return new ph(C,x)}(t.startAt));let y=null;return t.endAt&&(y=function(E){const x=!E.before,C=E.values||[];return new ph(C,x)}(t.endAt)),NO(e,a,u,l,f,"F",m,y)}function uD(n,e){const t=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ae(28987,{purpose:a})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function sx(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Ro(t.unaryFilter.field);return It.create(i,"==",{doubleValue:NaN});case"IS_NULL":const a=Ro(t.unaryFilter.field);return It.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Ro(t.unaryFilter.field);return It.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Ro(t.unaryFilter.field);return It.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ae(61313);default:return Ae(60726)}}(n):n.fieldFilter!==void 0?function(t){return It.create(Ro(t.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ae(58110);default:return Ae(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return cr.create(t.compositeFilter.filters.map(i=>sx(i)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Ae(1026)}}(t.compositeFilter.op))}(n):Ae(30097,{filter:n})}function dD(n){return ZO[n]}function hD(n){return JO[n]}function fD(n){return eD[n]}function No(n){return{fieldPath:n.canonicalString()}}function Ro(n){return tn.fromServerFormat(n.fieldPath)}function ax(n){return n instanceof It?function(t){if(t.op==="=="){if(Hb(t.value))return{unaryFilter:{field:No(t.field),op:"IS_NAN"}};if(Fb(t.value))return{unaryFilter:{field:No(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Hb(t.value))return{unaryFilter:{field:No(t.field),op:"IS_NOT_NAN"}};if(Fb(t.value))return{unaryFilter:{field:No(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:No(t.field),op:hD(t.op),value:t.value}}}(n):n instanceof cr?function(t){const i=t.getFilters().map(a=>ax(a));return i.length===1?i[0]:{compositeFilter:{op:fD(t.op),filters:i}}}(n):Ae(54877,{filter:n})}function mD(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function ox(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs{constructor(e,t,i,a,l=Ce.min(),u=Ce.min(),f=nn.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=f,this.expectedCount=m}withSequenceNumber(e){return new cs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new cs(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new cs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new cs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pD{constructor(e){this.wt=e}}function gD(n){const e=cD({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?gh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yD{constructor(){this.yn=new vD}addToCollectionParentIndex(e,t){return this.yn.add(t),ae.resolve()}getCollectionParents(e,t){return ae.resolve(this.yn.getEntries(t))}addFieldIndex(e,t){return ae.resolve()}deleteFieldIndex(e,t){return ae.resolve()}deleteAllFieldIndexes(e){return ae.resolve()}createTargetIndexes(e,t){return ae.resolve()}getDocumentsMatchingTarget(e,t){return ae.resolve(null)}getIndexType(e,t){return ae.resolve(0)}getFieldIndexes(e,t){return ae.resolve([])}getNextCollectionGroupToUpdate(e){return ae.resolve(null)}getMinOffset(e,t){return ae.resolve(gs.min())}getMinOffsetFromCollectionGroup(e,t){return ae.resolve(gs.min())}updateCollectionGroup(e,t,i){return ae.resolve()}updateIndexEntries(e,t){return ae.resolve()}}class vD{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t]||new Vt(lt.comparator),l=!a.has(i);return this.index[t]=a.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t];return a&&a.has(i)}getEntries(e){return(this.index[e]||new Vt(lt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},lx=41943040;class xn{static withCacheSize(e){return new xn(e,xn.DEFAULT_COLLECTION_PERCENTILE,xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */xn.DEFAULT_COLLECTION_PERCENTILE=10,xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,xn.DEFAULT=new xn(lx,xn.DEFAULT_COLLECTION_PERCENTILE,xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),xn.DISABLED=new xn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(e){this.nr=e}next(){return this.nr+=2,this.nr}static rr(){return new Fo(0)}static ir(){return new Fo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sE="LruGarbageCollector",_D=1048576;function aE([n,e],[t,i]){const a=Pe(n,t);return a===0?Pe(e,i):a}class bD{constructor(e){this.cr=e,this.buffer=new Vt(aE),this.lr=0}hr(){return++this.lr}Pr(e){const t=[e,this.hr()];if(this.buffer.size<this.cr)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();aE(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class ED{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Tr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ir(6e4)}stop(){this.Tr&&(this.Tr.cancel(),this.Tr=null)}get started(){return this.Tr!==null}Ir(e){pe(sE,`Garbage collection scheduled in ${e}ms`),this.Tr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Tr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){el(t)?pe(sE,"Ignoring IndexedDB error during garbage collection: ",t):await Jo(t)}await this.Ir(3e5)})}}class TD{constructor(e,t){this.Er=e,this.params=t}calculateTargetCount(e,t){return this.Er.dr(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(t===0)return ae.resolve(Vh.le);const i=new bD(t);return this.Er.forEachTarget(e,a=>i.Pr(a.sequenceNumber)).next(()=>this.Er.Ar(e,a=>i.Pr(a))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.Er.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Er.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(pe("LruGarbageCollector","Garbage collection skipped; disabled"),ae.resolve(iE)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(pe("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),iE):this.Rr(e,t))}getCacheSize(e){return this.Er.getCacheSize(e)}Rr(e,t){let i,a,l,u,f,m,y;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(E=>(E>this.params.maximumSequenceNumbersToCollect?(pe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),a=this.params.maximumSequenceNumbersToCollect):a=E,u=Date.now(),this.nthSequenceNumber(e,a))).next(E=>(i=E,f=Date.now(),this.removeTargets(e,i,t))).next(E=>(l=E,m=Date.now(),this.removeOrphanedDocuments(e,i))).next(E=>(y=Date.now(),So()<=Le.DEBUG&&pe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-v}ms
	Determined least recently used ${a} in `+(f-u)+`ms
	Removed ${l} targets in `+(m-f)+`ms
	Removed ${E} documents in `+(y-m)+`ms
Total Duration: ${y-v}ms`),ae.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:E})))}}function xD(n,e){return new TD(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wD{constructor(){this.changes=new Na(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,cn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?ae.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AD{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SD{constructor(e,t,i,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=a}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(a=>(i=a,this.remoteDocumentCache.getEntry(e,t))).next(a=>(i!==null&&Rc(i.mutation,a,Vn.empty(),kt.now()),a))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,Ue()).next(()=>i))}getLocalViewOfDocuments(e,t,i=Ue()){const a=pa();return this.populateOverlays(e,a,t).next(()=>this.computeViews(e,t,a,i).next(l=>{let u=Ec();return l.forEach((f,m)=>{u=u.insert(f,m.overlayedDocument)}),u}))}getOverlayedDocuments(e,t){const i=pa();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,Ue()))}populateOverlays(e,t,i){const a=[];return i.forEach(l=>{t.has(l)||a.push(l)}),this.documentOverlayCache.getOverlays(e,a).next(l=>{l.forEach((u,f)=>{t.set(u,f)})})}computeViews(e,t,i,a){let l=xi();const u=Nc(),f=function(){return Nc()}();return t.forEach((m,y)=>{const v=i.get(y.key);a.has(y.key)&&(v===void 0||v.mutation instanceof Ss)?l=l.insert(y.key,y):v!==void 0?(u.set(y.key,v.mutation.getFieldMask()),Rc(v.mutation,y,v.mutation.getFieldMask(),kt.now())):u.set(y.key,Vn.empty())}),this.recalculateAndSaveOverlays(e,l).next(m=>(m.forEach((y,v)=>u.set(y,v)),t.forEach((y,v)=>{var E;return f.set(y,new AD(v,(E=u.get(y))!==null&&E!==void 0?E:null))}),f))}recalculateAndSaveOverlays(e,t){const i=Nc();let a=new gt((u,f)=>u-f),l=Ue();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(u=>{for(const f of u)f.keys().forEach(m=>{const y=t.get(m);if(y===null)return;let v=i.get(m)||Vn.empty();v=f.applyToLocalView(y,v),i.set(m,v);const E=(a.get(f.batchId)||Ue()).add(m);a=a.insert(f.batchId,E)})}).next(()=>{const u=[],f=a.getReverseIterator();for(;f.hasNext();){const m=f.getNext(),y=m.key,v=m.value,E=HT();v.forEach(x=>{if(!l.has(x)){const C=WT(t.get(x),i.get(x));C!==null&&E.set(x,C),l=l.add(x)}}),u.push(this.documentOverlayCache.saveOverlays(e,y,E))}return ae.waitFor(u)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i,a){return function(u){return Ee.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):UT(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,a):this.getDocumentsMatchingCollectionQuery(e,t,i,a)}getNextDocuments(e,t,i,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,a).next(l=>{const u=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,a-l.size):ae.resolve(pa());let f=Pc,m=l;return u.next(y=>ae.forEach(y,(v,E)=>(f<E.largestBatchId&&(f=E.largestBatchId),l.get(v)?ae.resolve():this.remoteDocumentCache.getEntry(e,v).next(x=>{m=m.insert(v,x)}))).next(()=>this.populateOverlays(e,y,l)).next(()=>this.computeViews(e,m,y,Ue())).next(v=>({batchId:f,changes:FT(v)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ee(t)).next(i=>{let a=Ec();return i.isFoundDocument()&&(a=a.insert(i.key,i)),a})}getDocumentsMatchingCollectionGroupQuery(e,t,i,a){const l=t.collectionGroup;let u=Ec();return this.indexManager.getCollectionParents(e,l).next(f=>ae.forEach(f,m=>{const y=function(E,x){return new tl(x,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)}(t,m.child(l));return this.getDocumentsMatchingCollectionQuery(e,y,i,a).next(v=>{v.forEach((E,x)=>{u=u.insert(E,x)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,i,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(u=>(l=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,a))).next(u=>{l.forEach((m,y)=>{const v=y.getKey();u.get(v)===null&&(u=u.insert(v,cn.newInvalidDocument(v)))});let f=Ec();return u.forEach((m,y)=>{const v=l.get(m);v!==void 0&&Rc(v.mutation,y,Vn.empty(),kt.now()),Bh(t,y)&&(f=f.insert(m,y))}),f})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CD{constructor(e){this.serializer=e,this.Fr=new Map,this.Mr=new Map}getBundleMetadata(e,t){return ae.resolve(this.Fr.get(t))}saveBundleMetadata(e,t){return this.Fr.set(t.id,function(a){return{id:a.id,version:a.version,createTime:Lr(a.createTime)}}(t)),ae.resolve()}getNamedQuery(e,t){return ae.resolve(this.Mr.get(t))}saveNamedQuery(e,t){return this.Mr.set(t.name,function(a){return{name:a.name,query:gD(a.bundledQuery),readTime:Lr(a.readTime)}}(t)),ae.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ND{constructor(){this.overlays=new gt(Ee.comparator),this.Or=new Map}getOverlay(e,t){return ae.resolve(this.overlays.get(t))}getOverlays(e,t){const i=pa();return ae.forEach(t,a=>this.getOverlay(e,a).next(l=>{l!==null&&i.set(a,l)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((a,l)=>{this.St(e,t,l)}),ae.resolve()}removeOverlaysForBatchId(e,t,i){const a=this.Or.get(i);return a!==void 0&&(a.forEach(l=>this.overlays=this.overlays.remove(l)),this.Or.delete(i)),ae.resolve()}getOverlaysForCollection(e,t,i){const a=pa(),l=t.length+1,u=new Ee(t.child("")),f=this.overlays.getIteratorFrom(u);for(;f.hasNext();){const m=f.getNext().value,y=m.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===l&&m.largestBatchId>i&&a.set(m.getKey(),m)}return ae.resolve(a)}getOverlaysForCollectionGroup(e,t,i,a){let l=new gt((y,v)=>y-v);const u=this.overlays.getIterator();for(;u.hasNext();){const y=u.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>i){let v=l.get(y.largestBatchId);v===null&&(v=pa(),l=l.insert(y.largestBatchId,v)),v.set(y.getKey(),y)}}const f=pa(),m=l.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach((y,v)=>f.set(y,v)),!(f.size()>=a)););return ae.resolve(f)}St(e,t,i){const a=this.overlays.get(i.key);if(a!==null){const u=this.Or.get(a.largestBatchId).delete(i.key);this.Or.set(a.largestBatchId,u)}this.overlays=this.overlays.insert(i.key,new YO(t,i));let l=this.Or.get(t);l===void 0&&(l=Ue(),this.Or.set(t,l)),this.Or.set(t,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RD{constructor(){this.sessionToken=nn.EMPTY_BYTE_STRING}getSessionToken(e){return ae.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ae.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wg{constructor(){this.Nr=new Vt(Ht.Br),this.Lr=new Vt(Ht.kr)}isEmpty(){return this.Nr.isEmpty()}addReference(e,t){const i=new Ht(e,t);this.Nr=this.Nr.add(i),this.Lr=this.Lr.add(i)}qr(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.Qr(new Ht(e,t))}$r(e,t){e.forEach(i=>this.removeReference(i,t))}Ur(e){const t=new Ee(new lt([])),i=new Ht(t,e),a=new Ht(t,e+1),l=[];return this.Lr.forEachInRange([i,a],u=>{this.Qr(u),l.push(u.key)}),l}Kr(){this.Nr.forEach(e=>this.Qr(e))}Qr(e){this.Nr=this.Nr.delete(e),this.Lr=this.Lr.delete(e)}Wr(e){const t=new Ee(new lt([])),i=new Ht(t,e),a=new Ht(t,e+1);let l=Ue();return this.Lr.forEachInRange([i,a],u=>{l=l.add(u.key)}),l}containsKey(e){const t=new Ht(e,0),i=this.Nr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Ht{constructor(e,t){this.key=e,this.Gr=t}static Br(e,t){return Ee.comparator(e.key,t.key)||Pe(e.Gr,t.Gr)}static kr(e,t){return Pe(e.Gr,t.Gr)||Ee.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ID{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Jn=1,this.zr=new Vt(Ht.Br)}checkEmpty(e){return ae.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,a){const l=this.Jn;this.Jn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new $O(l,t,i,a);this.mutationQueue.push(u);for(const f of a)this.zr=this.zr.add(new Ht(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return ae.resolve(u)}lookupMutationBatch(e,t){return ae.resolve(this.jr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,a=this.Hr(i),l=a<0?0:a;return ae.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return ae.resolve(this.mutationQueue.length===0?Ug:this.Jn-1)}getAllMutationBatches(e){return ae.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Ht(t,0),a=new Ht(t,Number.POSITIVE_INFINITY),l=[];return this.zr.forEachInRange([i,a],u=>{const f=this.jr(u.Gr);l.push(f)}),ae.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Vt(Pe);return t.forEach(a=>{const l=new Ht(a,0),u=new Ht(a,Number.POSITIVE_INFINITY);this.zr.forEachInRange([l,u],f=>{i=i.add(f.Gr)})}),ae.resolve(this.Jr(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,a=i.length+1;let l=i;Ee.isDocumentKey(l)||(l=l.child(""));const u=new Ht(new Ee(l),0);let f=new Vt(Pe);return this.zr.forEachWhile(m=>{const y=m.key.path;return!!i.isPrefixOf(y)&&(y.length===a&&(f=f.add(m.Gr)),!0)},u),ae.resolve(this.Jr(f))}Jr(e){const t=[];return e.forEach(i=>{const a=this.jr(i);a!==null&&t.push(a)}),t}removeMutationBatch(e,t){Qe(this.Yr(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.zr;return ae.forEach(t.mutations,a=>{const l=new Ht(a.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.zr=i})}Xn(e){}containsKey(e,t){const i=new Ht(t,0),a=this.zr.firstAfterOrEqual(i);return ae.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,ae.resolve()}Yr(e,t){return this.Hr(e)}Hr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}jr(e){const t=this.Hr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OD{constructor(e){this.Zr=e,this.docs=function(){return new gt(Ee.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,a=this.docs.get(i),l=a?a.size:0,u=this.Zr(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:u}),this.size+=u-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return ae.resolve(i?i.document.mutableCopy():cn.newInvalidDocument(t))}getEntries(e,t){let i=xi();return t.forEach(a=>{const l=this.docs.get(a);i=i.insert(a,l?l.document.mutableCopy():cn.newInvalidDocument(a))}),ae.resolve(i)}getDocumentsMatchingQuery(e,t,i,a){let l=xi();const u=t.path,f=new Ee(u.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(f);for(;m.hasNext();){const{key:y,value:{document:v}}=m.getNext();if(!u.isPrefixOf(y.path))break;y.path.length>u.length+1||aO(sO(v),i)<=0||(a.has(v.key)||Bh(t,v))&&(l=l.insert(v.key,v.mutableCopy()))}return ae.resolve(l)}getAllFromCollectionGroup(e,t,i,a){Ae(9500)}Xr(e,t){return ae.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new DD(this)}getSize(e){return ae.resolve(this.size)}}class DD extends wD{constructor(e){super(),this.vr=e}applyChanges(e){const t=[];return this.changes.forEach((i,a)=>{a.isValidDocument()?t.push(this.vr.addEntry(e,a)):this.vr.removeEntry(i)}),ae.waitFor(t)}getFromCache(e,t){return this.vr.getEntry(e,t)}getAllFromCache(e,t){return this.vr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PD{constructor(e){this.persistence=e,this.ei=new Na(t=>qg(t),Fg),this.lastRemoteSnapshotVersion=Ce.min(),this.highestTargetId=0,this.ti=0,this.ni=new Wg,this.targetCount=0,this.ri=Fo.rr()}forEachTarget(e,t){return this.ei.forEach((i,a)=>t(a)),ae.resolve()}getLastRemoteSnapshotVersion(e){return ae.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ae.resolve(this.ti)}allocateTargetId(e){return this.highestTargetId=this.ri.next(),ae.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.ti&&(this.ti=t),ae.resolve()}ar(e){this.ei.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ri=new Fo(t),this.highestTargetId=t),e.sequenceNumber>this.ti&&(this.ti=e.sequenceNumber)}addTargetData(e,t){return this.ar(t),this.targetCount+=1,ae.resolve()}updateTargetData(e,t){return this.ar(t),ae.resolve()}removeTargetData(e,t){return this.ei.delete(t.target),this.ni.Ur(t.targetId),this.targetCount-=1,ae.resolve()}removeTargets(e,t,i){let a=0;const l=[];return this.ei.forEach((u,f)=>{f.sequenceNumber<=t&&i.get(f.targetId)===null&&(this.ei.delete(u),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),a++)}),ae.waitFor(l).next(()=>a)}getTargetCount(e){return ae.resolve(this.targetCount)}getTargetData(e,t){const i=this.ei.get(t)||null;return ae.resolve(i)}addMatchingKeys(e,t,i){return this.ni.qr(t,i),ae.resolve()}removeMatchingKeys(e,t,i){this.ni.$r(t,i);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach(u=>{l.push(a.markPotentiallyOrphaned(e,u))}),ae.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.ni.Ur(t),ae.resolve()}getMatchingKeysForTargetId(e,t){const i=this.ni.Wr(t);return ae.resolve(i)}containsKey(e,t){return ae.resolve(this.ni.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cx{constructor(e,t){this.ii={},this.overlays={},this.si=new Vh(0),this.oi=!1,this.oi=!0,this._i=new RD,this.referenceDelegate=e(this),this.ai=new PD(this),this.indexManager=new yD,this.remoteDocumentCache=function(a){return new OD(a)}(i=>this.referenceDelegate.ui(i)),this.serializer=new pD(t),this.ci=new CD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.oi=!1,Promise.resolve()}get started(){return this.oi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new ND,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ii[e.toKey()];return i||(i=new ID(t,this.referenceDelegate),this.ii[e.toKey()]=i),i}getGlobalsCache(){return this._i}getTargetCache(){return this.ai}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.ci}runTransaction(e,t,i){pe("MemoryPersistence","Starting transaction:",e);const a=new jD(this.si.next());return this.referenceDelegate.li(),i(a).next(l=>this.referenceDelegate.hi(a).next(()=>l)).toPromise().then(l=>(a.raiseOnCommittedEvent(),l))}Pi(e,t){return ae.or(Object.values(this.ii).map(i=>()=>i.containsKey(e,t)))}}class jD extends lO{constructor(e){super(),this.currentSequenceNumber=e}}class Xg{constructor(e){this.persistence=e,this.Ti=new Wg,this.Ii=null}static Ei(e){return new Xg(e)}get di(){if(this.Ii)return this.Ii;throw Ae(60996)}addReference(e,t,i){return this.Ti.addReference(i,t),this.di.delete(i.toString()),ae.resolve()}removeReference(e,t,i){return this.Ti.removeReference(i,t),this.di.add(i.toString()),ae.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),ae.resolve()}removeTarget(e,t){this.Ti.Ur(t.targetId).forEach(a=>this.di.add(a.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(a=>{a.forEach(l=>this.di.add(l.toString()))}).next(()=>i.removeTargetData(e,t))}li(){this.Ii=new Set}hi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ae.forEach(this.di,i=>{const a=Ee.fromPath(i);return this.Ai(e,a).next(l=>{l||t.removeEntry(a,Ce.min())})}).next(()=>(this.Ii=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ai(e,t).next(i=>{i?this.di.delete(t.toString()):this.di.add(t.toString())})}ui(e){return 0}Ai(e,t){return ae.or([()=>ae.resolve(this.Ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Pi(e,t)])}}class _h{constructor(e,t){this.persistence=e,this.Ri=new Na(i=>dO(i.path),(i,a)=>i.isEqual(a)),this.garbageCollector=xD(this,t)}static Ei(e,t){return new _h(e,t)}li(){}hi(e){return ae.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.Vr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>t.next(a=>i+a))}Vr(e){let t=0;return this.Ar(e,i=>{t++}).next(()=>t)}Ar(e,t){return ae.forEach(this.Ri,(i,a)=>this.gr(e,i,a).next(l=>l?ae.resolve():t(a)))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.Xr(e,u=>this.gr(e,u,t).next(f=>{f||(i++,l.removeEntry(u,Ce.min()))})).next(()=>l.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,t){return this.Ri.set(t,e.currentSequenceNumber),ae.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.Ri.set(i,e.currentSequenceNumber),ae.resolve()}removeReference(e,t,i){return this.Ri.set(i,e.currentSequenceNumber),ae.resolve()}updateLimboDocument(e,t){return this.Ri.set(t,e.currentSequenceNumber),ae.resolve()}ui(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Yd(e.data.value)),t}gr(e,t,i){return ae.or([()=>this.persistence.Pi(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.Ri.get(t);return ae.resolve(a!==void 0&&a>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zg{constructor(e,t,i,a){this.targetId=e,this.fromCache=t,this.ls=i,this.hs=a}static Ps(e,t){let i=Ue(),a=Ue();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new Zg(e,t.fromCache,i,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MD{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kD{constructor(){this.Ts=!1,this.Is=!1,this.Es=100,this.ds=function(){return hN()?8:cO(dn())>0?6:4}()}initialize(e,t){this.As=e,this.indexManager=t,this.Ts=!0}getDocumentsMatchingQuery(e,t,i,a){const l={result:null};return this.Rs(e,t).next(u=>{l.result=u}).next(()=>{if(!l.result)return this.Vs(e,t,a,i).next(u=>{l.result=u})}).next(()=>{if(l.result)return;const u=new MD;return this.fs(e,t,u).next(f=>{if(l.result=f,this.Is)return this.gs(e,t,u,f.size)})}).next(()=>l.result)}gs(e,t,i,a){return i.documentReadCount<this.Es?(So()<=Le.DEBUG&&pe("QueryEngine","SDK will not create cache indexes for query:",Co(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Es,"documents"),ae.resolve()):(So()<=Le.DEBUG&&pe("QueryEngine","Query:",Co(t),"scans",i.documentReadCount,"local documents and returns",a,"documents as results."),i.documentReadCount>this.ds*a?(So()<=Le.DEBUG&&pe("QueryEngine","The SDK decides to create cache indexes for query:",Co(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Vr(t))):ae.resolve())}Rs(e,t){if(Kb(t))return ae.resolve(null);let i=Vr(t);return this.indexManager.getIndexType(e,i).next(a=>a===0?null:(t.limit!==null&&a===1&&(t=gh(t,null,"F"),i=Vr(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(l=>{const u=Ue(...l);return this.As.getDocuments(e,u).next(f=>this.indexManager.getMinOffset(e,i).next(m=>{const y=this.ps(t,f);return this.ys(t,y,u,m.readTime)?this.Rs(e,gh(t,null,"F")):this.ws(e,y,t,m)}))})))}Vs(e,t,i,a){return Kb(t)||a.isEqual(Ce.min())?ae.resolve(null):this.As.getDocuments(e,i).next(l=>{const u=this.ps(t,l);return this.ys(t,u,i,a)?ae.resolve(null):(So()<=Le.DEBUG&&pe("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Co(t)),this.ws(e,u,t,iO(a,Pc)).next(f=>f))})}ps(e,t){let i=new Vt(BT(e));return t.forEach((a,l)=>{Bh(e,l)&&(i=i.add(l))}),i}ys(e,t,i,a){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}fs(e,t,i){return So()<=Le.DEBUG&&pe("QueryEngine","Using full collection scan to execute query:",Co(t)),this.As.getDocumentsMatchingQuery(e,t,gs.min(),i)}ws(e,t,i,a){return this.As.getDocumentsMatchingQuery(e,i,a).next(l=>(t.forEach(u=>{l=l.insert(u.key,u)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jg="LocalStore",VD=3e8;class LD{constructor(e,t,i,a){this.persistence=e,this.bs=t,this.serializer=a,this.Ss=new gt(Pe),this.Ds=new Na(l=>qg(l),Fg),this.vs=new Map,this.Cs=e.getRemoteDocumentCache(),this.ai=e.getTargetCache(),this.ci=e.getBundleCache(),this.Fs(i)}Fs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new SD(this.Cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Cs.setIndexManager(this.indexManager),this.bs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ss))}}function UD(n,e,t,i){return new LD(n,e,t,i)}async function ux(n,e){const t=Re(n);return await t.persistence.runTransaction("Handle user change","readonly",i=>{let a;return t.mutationQueue.getAllMutationBatches(i).next(l=>(a=l,t.Fs(e),t.mutationQueue.getAllMutationBatches(i))).next(l=>{const u=[],f=[];let m=Ue();for(const y of a){u.push(y.batchId);for(const v of y.mutations)m=m.add(v.key)}for(const y of l){f.push(y.batchId);for(const v of y.mutations)m=m.add(v.key)}return t.localDocuments.getDocuments(i,m).next(y=>({Ms:y,removedBatchIds:u,addedBatchIds:f}))})})}function zD(n,e){const t=Re(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const a=e.batch.keys(),l=t.Cs.newChangeBuffer({trackRemovals:!0});return function(f,m,y,v){const E=y.batch,x=E.keys();let C=ae.resolve();return x.forEach(A=>{C=C.next(()=>v.getEntry(m,A)).next(k=>{const O=y.docVersions.get(A);Qe(O!==null,48541),k.version.compareTo(O)<0&&(E.applyToRemoteDocument(k,y),k.isValidDocument()&&(k.setReadTime(y.commitVersion),v.addEntry(k)))})}),C.next(()=>f.mutationQueue.removeMutationBatch(m,E))}(t,i,e,l).next(()=>l.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,a,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(f){let m=Ue();for(let y=0;y<f.mutationResults.length;++y)f.mutationResults[y].transformResults.length>0&&(m=m.add(f.batch.mutations[y].key));return m}(e))).next(()=>t.localDocuments.getDocuments(i,a))})}function dx(n){const e=Re(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.ai.getLastRemoteSnapshotVersion(t))}function BD(n,e){const t=Re(n),i=e.snapshotVersion;let a=t.Ss;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const u=t.Cs.newChangeBuffer({trackRemovals:!0});a=t.Ss;const f=[];e.targetChanges.forEach((v,E)=>{const x=a.get(E);if(!x)return;f.push(t.ai.removeMatchingKeys(l,v.removedDocuments,E).next(()=>t.ai.addMatchingKeys(l,v.addedDocuments,E)));let C=x.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(E)!==null?C=C.withResumeToken(nn.EMPTY_BYTE_STRING,Ce.min()).withLastLimboFreeSnapshotVersion(Ce.min()):v.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(v.resumeToken,i)),a=a.insert(E,C),function(k,O,$){return k.resumeToken.approximateByteSize()===0||O.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=VD?!0:$.addedDocuments.size+$.modifiedDocuments.size+$.removedDocuments.size>0}(x,C,v)&&f.push(t.ai.updateTargetData(l,C))});let m=xi(),y=Ue();if(e.documentUpdates.forEach(v=>{e.resolvedLimboDocuments.has(v)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(l,v))}),f.push(qD(l,u,e.documentUpdates).next(v=>{m=v.xs,y=v.Os})),!i.isEqual(Ce.min())){const v=t.ai.getLastRemoteSnapshotVersion(l).next(E=>t.ai.setTargetsMetadata(l,l.currentSequenceNumber,i));f.push(v)}return ae.waitFor(f).next(()=>u.apply(l)).next(()=>t.localDocuments.getLocalViewOfDocuments(l,m,y)).next(()=>m)}).then(l=>(t.Ss=a,l))}function qD(n,e,t){let i=Ue(),a=Ue();return t.forEach(l=>i=i.add(l)),e.getEntries(n,i).next(l=>{let u=xi();return t.forEach((f,m)=>{const y=l.get(f);m.isFoundDocument()!==y.isFoundDocument()&&(a=a.add(f)),m.isNoDocument()&&m.version.isEqual(Ce.min())?(e.removeEntry(f,m.readTime),u=u.insert(f,m)):!y.isValidDocument()||m.version.compareTo(y.version)>0||m.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(m),u=u.insert(f,m)):pe(Jg,"Ignoring outdated watch update for ",f,". Current version:",y.version," Watch version:",m.version)}),{xs:u,Os:a}})}function FD(n,e){const t=Re(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=Ug),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function HD(n,e){const t=Re(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let a;return t.ai.getTargetData(i,e).next(l=>l?(a=l,ae.resolve(a)):t.ai.allocateTargetId(i).next(u=>(a=new cs(e,u,"TargetPurposeListen",i.currentSequenceNumber),t.ai.addTargetData(i,a).next(()=>a))))}).then(i=>{const a=t.Ss.get(i.targetId);return(a===null||i.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ss=t.Ss.insert(i.targetId,i),t.Ds.set(e,i.targetId)),i})}async function sg(n,e,t){const i=Re(n),a=i.Ss.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,u=>i.persistence.referenceDelegate.removeTarget(u,a))}catch(u){if(!el(u))throw u;pe(Jg,`Failed to update sequence numbers for target ${e}: ${u}`)}i.Ss=i.Ss.remove(e),i.Ds.delete(a.target)}function oE(n,e,t){const i=Re(n);let a=Ce.min(),l=Ue();return i.persistence.runTransaction("Execute query","readwrite",u=>function(m,y,v){const E=Re(m),x=E.Ds.get(v);return x!==void 0?ae.resolve(E.Ss.get(x)):E.ai.getTargetData(y,v)}(i,u,Vr(e)).next(f=>{if(f)return a=f.lastLimboFreeSnapshotVersion,i.ai.getMatchingKeysForTargetId(u,f.targetId).next(m=>{l=m})}).next(()=>i.bs.getDocumentsMatchingQuery(u,e,t?a:Ce.min(),t?l:Ue())).next(f=>(GD(i,IO(e),f),{documents:f,Ns:l})))}function GD(n,e,t){let i=n.vs.get(e)||Ce.min();t.forEach((a,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)}),n.vs.set(e,i)}class lE{constructor(){this.activeTargetIds=kO()}$s(e){this.activeTargetIds=this.activeTargetIds.add(e)}Us(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Qs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class $D{constructor(){this.So=new lE,this.Do={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.So.$s(e),this.Do[e]||"not-current"}updateQueryState(e,t,i){this.Do[e]=t}removeLocalQueryTarget(e){this.So.Us(e)}isLocalQueryTarget(e){return this.So.activeTargetIds.has(e)}clearQueryState(e){delete this.Do[e]}getAllActiveQueryTargets(){return this.So.activeTargetIds}isActiveQueryTarget(e){return this.So.activeTargetIds.has(e)}start(){return this.So=new lE,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YD{vo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cE="ConnectivityMonitor";class uE{constructor(){this.Co=()=>this.Fo(),this.Mo=()=>this.xo(),this.Oo=[],this.No()}vo(e){this.Oo.push(e)}shutdown(){window.removeEventListener("online",this.Co),window.removeEventListener("offline",this.Mo)}No(){window.addEventListener("online",this.Co),window.addEventListener("offline",this.Mo)}Fo(){pe(cE,"Network connectivity changed: AVAILABLE");for(const e of this.Oo)e(0)}xo(){pe(cE,"Network connectivity changed: UNAVAILABLE");for(const e of this.Oo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ld=null;function ag(){return Ld===null?Ld=function(){return 268435456+Math.round(2147483648*Math.random())}():Ld++,"0x"+Ld.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rp="RestConnection",KD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class QD{get Bo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Lo=t+"://"+e.host,this.ko=`projects/${i}/databases/${a}`,this.qo=this.databaseId.database===fh?`project_id=${i}`:`project_id=${i}&database_id=${a}`}Qo(e,t,i,a,l){const u=ag(),f=this.$o(e,t.toUriEncodedString());pe(Rp,`Sending RPC '${e}' ${u}:`,f,i);const m={"google-cloud-resource-prefix":this.ko,"x-goog-request-params":this.qo};this.Uo(m,a,l);const{host:y}=new URL(f),v=Gc(y);return this.Ko(e,f,m,i,v).then(E=>(pe(Rp,`Received RPC '${e}' ${u}: `,E),E),E=>{throw Uo(Rp,`RPC '${e}' ${u} failed with error: `,E,"url: ",f,"request:",i),E})}Wo(e,t,i,a,l,u){return this.Qo(e,t,i,a,l)}Uo(e,t,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Zo}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((a,l)=>e[l]=a),i&&i.headers.forEach((a,l)=>e[l]=a)}$o(e,t){const i=KD[e];return`${this.Lo}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WD{constructor(e){this.Go=e.Go,this.zo=e.zo}jo(e){this.Ho=e}Jo(e){this.Yo=e}Zo(e){this.Xo=e}onMessage(e){this.e_=e}close(){this.zo()}send(e){this.Go(e)}t_(){this.Ho()}n_(){this.Yo()}r_(e){this.Xo(e)}i_(e){this.e_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const on="WebChannelConnection";class XD extends QD{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ko(e,t,i,a,l){const u=ag();return new Promise((f,m)=>{const y=new mT;y.setWithCredentials(!0),y.listenOnce(pT.COMPLETE,()=>{try{switch(y.getLastErrorCode()){case $d.NO_ERROR:const E=y.getResponseJson();pe(on,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(E)),f(E);break;case $d.TIMEOUT:pe(on,`RPC '${e}' ${u} timed out`),m(new me(ie.DEADLINE_EXCEEDED,"Request time out"));break;case $d.HTTP_ERROR:const x=y.getStatus();if(pe(on,`RPC '${e}' ${u} failed with status:`,x,"response text:",y.getResponseText()),x>0){let C=y.getResponseJson();Array.isArray(C)&&(C=C[0]);const A=C==null?void 0:C.error;if(A&&A.status&&A.message){const k=function($){const K=$.toLowerCase().replace(/_/g,"-");return Object.values(ie).indexOf(K)>=0?K:ie.UNKNOWN}(A.status);m(new me(k,A.message))}else m(new me(ie.UNKNOWN,"Server responded with status "+y.getStatus()))}else m(new me(ie.UNAVAILABLE,"Connection failed."));break;default:Ae(9055,{s_:e,streamId:u,o_:y.getLastErrorCode(),__:y.getLastError()})}}finally{pe(on,`RPC '${e}' ${u} completed.`)}});const v=JSON.stringify(a);pe(on,`RPC '${e}' ${u} sending request:`,a),y.send(t,"POST",v,i,15)})}a_(e,t,i){const a=ag(),l=[this.Lo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=vT(),f=yT(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(m.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(m.useFetchStreams=!0),this.Uo(m.initMessageHeaders,t,i),m.encodeInitMessageHeaders=!0;const v=l.join("");pe(on,`Creating RPC '${e}' stream ${a}: ${v}`,m);const E=u.createWebChannel(v,m);let x=!1,C=!1;const A=new WD({Go:O=>{C?pe(on,`Not sending because RPC '${e}' stream ${a} is closed:`,O):(x||(pe(on,`Opening RPC '${e}' stream ${a} transport.`),E.open(),x=!0),pe(on,`RPC '${e}' stream ${a} sending:`,O),E.send(O))},zo:()=>E.close()}),k=(O,$,K)=>{O.listen($,z=>{try{K(z)}catch(ce){setTimeout(()=>{throw ce},0)}})};return k(E,bc.EventType.OPEN,()=>{C||(pe(on,`RPC '${e}' stream ${a} transport opened.`),A.t_())}),k(E,bc.EventType.CLOSE,()=>{C||(C=!0,pe(on,`RPC '${e}' stream ${a} transport closed`),A.r_())}),k(E,bc.EventType.ERROR,O=>{C||(C=!0,Uo(on,`RPC '${e}' stream ${a} transport errored. Name:`,O.name,"Message:",O.message),A.r_(new me(ie.UNAVAILABLE,"The operation could not be completed")))}),k(E,bc.EventType.MESSAGE,O=>{var $;if(!C){const K=O.data[0];Qe(!!K,16349);const z=K,ce=(z==null?void 0:z.error)||(($=z[0])===null||$===void 0?void 0:$.error);if(ce){pe(on,`RPC '${e}' stream ${a} received error:`,ce);const le=ce.status;let ye=function(R){const P=Rt[R];if(P!==void 0)return ZT(P)}(le),j=ce.message;ye===void 0&&(ye=ie.INTERNAL,j="Unknown error status: "+le+" with message "+ce.message),C=!0,A.r_(new me(ye,j)),E.close()}else pe(on,`RPC '${e}' stream ${a} received:`,K),A.i_(K)}}),k(f,gT.STAT_EVENT,O=>{O.stat===Kp.PROXY?pe(on,`RPC '${e}' stream ${a} detected buffering proxy`):O.stat===Kp.NOPROXY&&pe(on,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{A.n_()},0),A}}function Ip(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gh(n){return new tD(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hx{constructor(e,t,i=1e3,a=1.5,l=6e4){this.bi=e,this.timerId=t,this.u_=i,this.c_=a,this.l_=l,this.h_=0,this.P_=null,this.T_=Date.now(),this.reset()}reset(){this.h_=0}I_(){this.h_=this.l_}E_(e){this.cancel();const t=Math.floor(this.h_+this.d_()),i=Math.max(0,Date.now()-this.T_),a=Math.max(0,t-i);a>0&&pe("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.h_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.P_=this.bi.enqueueAfterDelay(this.timerId,a,()=>(this.T_=Date.now(),e())),this.h_*=this.c_,this.h_<this.u_&&(this.h_=this.u_),this.h_>this.l_&&(this.h_=this.l_)}A_(){this.P_!==null&&(this.P_.skipDelay(),this.P_=null)}cancel(){this.P_!==null&&(this.P_.cancel(),this.P_=null)}d_(){return(Math.random()-.5)*this.h_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dE="PersistentStream";class fx{constructor(e,t,i,a,l,u,f,m){this.bi=e,this.R_=i,this.V_=a,this.connection=l,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=f,this.listener=m,this.state=0,this.m_=0,this.f_=null,this.g_=null,this.stream=null,this.p_=0,this.y_=new hx(e,t)}w_(){return this.state===1||this.state===5||this.b_()}b_(){return this.state===2||this.state===3}start(){this.p_=0,this.state!==4?this.auth():this.S_()}async stop(){this.w_()&&await this.close(0)}D_(){this.state=0,this.y_.reset()}v_(){this.b_()&&this.f_===null&&(this.f_=this.bi.enqueueAfterDelay(this.R_,6e4,()=>this.C_()))}F_(e){this.M_(),this.stream.send(e)}async C_(){if(this.b_())return this.close(0)}M_(){this.f_&&(this.f_.cancel(),this.f_=null)}x_(){this.g_&&(this.g_.cancel(),this.g_=null)}async close(e,t){this.M_(),this.x_(),this.y_.cancel(),this.m_++,e!==4?this.y_.reset():t&&t.code===ie.RESOURCE_EXHAUSTED?(Ti(t.toString()),Ti("Using maximum backoff delay to prevent overloading the backend."),this.y_.I_()):t&&t.code===ie.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.O_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Zo(t)}O_(){}auth(){this.state=1;const e=this.N_(this.m_),t=this.m_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,a])=>{this.m_===t&&this.B_(i,a)},i=>{e(()=>{const a=new me(ie.UNKNOWN,"Fetching auth token failed: "+i.message);return this.L_(a)})})}B_(e,t){const i=this.N_(this.m_);this.stream=this.k_(e,t),this.stream.jo(()=>{i(()=>this.listener.jo())}),this.stream.Jo(()=>{i(()=>(this.state=2,this.g_=this.bi.enqueueAfterDelay(this.V_,1e4,()=>(this.b_()&&(this.state=3),Promise.resolve())),this.listener.Jo()))}),this.stream.Zo(a=>{i(()=>this.L_(a))}),this.stream.onMessage(a=>{i(()=>++this.p_==1?this.q_(a):this.onNext(a))})}S_(){this.state=5,this.y_.E_(async()=>{this.state=0,this.start()})}L_(e){return pe(dE,`close with error: ${e}`),this.stream=null,this.close(4,e)}N_(e){return t=>{this.bi.enqueueAndForget(()=>this.m_===e?t():(pe(dE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class ZD extends fx{constructor(e,t,i,a,l,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,a,u),this.serializer=l}k_(e,t){return this.connection.a_("Listen",e,t)}q_(e){return this.onNext(e)}onNext(e){this.y_.reset();const t=iD(this.serializer,e),i=function(l){if(!("targetChange"in l))return Ce.min();const u=l.targetChange;return u.targetIds&&u.targetIds.length?Ce.min():u.readTime?Lr(u.readTime):Ce.min()}(e);return this.listener.Q_(t,i)}U_(e){const t={};t.database=ig(this.serializer),t.addTarget=function(l,u){let f;const m=u.target;if(f=Jp(m)?{documents:oD(l,m)}:{query:lD(l,m).gt},f.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){f.resumeToken=tx(l,u.resumeToken);const y=tg(l,u.expectedCount);y!==null&&(f.expectedCount=y)}else if(u.snapshotVersion.compareTo(Ce.min())>0){f.readTime=vh(l,u.snapshotVersion.toTimestamp());const y=tg(l,u.expectedCount);y!==null&&(f.expectedCount=y)}return f}(this.serializer,e);const i=uD(this.serializer,e);i&&(t.labels=i),this.F_(t)}K_(e){const t={};t.database=ig(this.serializer),t.removeTarget=e,this.F_(t)}}class JD extends fx{constructor(e,t,i,a,l,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,a,u),this.serializer=l}get W_(){return this.p_>0}start(){this.lastStreamToken=void 0,super.start()}O_(){this.W_&&this.G_([])}k_(e,t){return this.connection.a_("Write",e,t)}q_(e){return Qe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Qe(!e.writeResults||e.writeResults.length===0,55816),this.listener.z_()}onNext(e){Qe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.y_.reset();const t=aD(e.writeResults,e.commitTime),i=Lr(e.commitTime);return this.listener.j_(i,t)}H_(){const e={};e.database=ig(this.serializer),this.F_(e)}G_(e){const t={streamToken:this.lastStreamToken,writes:e.map(i=>sD(this.serializer,i))};this.F_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e4{}class t4 extends e4{constructor(e,t,i,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=a,this.J_=!1}Y_(){if(this.J_)throw new me(ie.FAILED_PRECONDITION,"The client has already been terminated.")}Qo(e,t,i,a){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,u])=>this.connection.Qo(e,ng(t,i),a,l,u)).catch(l=>{throw l.name==="FirebaseError"?(l.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new me(ie.UNKNOWN,l.toString())})}Wo(e,t,i,a,l){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,f])=>this.connection.Wo(e,ng(t,i),a,u,f,l)).catch(u=>{throw u.name==="FirebaseError"?(u.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new me(ie.UNKNOWN,u.toString())})}terminate(){this.J_=!0,this.connection.terminate()}}class n4{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.Z_=0,this.X_=null,this.ea=!0}ta(){this.Z_===0&&(this.na("Unknown"),this.X_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.X_=null,this.ra("Backend didn't respond within 10 seconds."),this.na("Offline"),Promise.resolve())))}ia(e){this.state==="Online"?this.na("Unknown"):(this.Z_++,this.Z_>=1&&(this.sa(),this.ra(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.na("Offline")))}set(e){this.sa(),this.Z_=0,e==="Online"&&(this.ea=!1),this.na(e)}na(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ra(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ea?(Ti(t),this.ea=!1):pe("OnlineStateTracker",t)}sa(){this.X_!==null&&(this.X_.cancel(),this.X_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wa="RemoteStore";class r4{constructor(e,t,i,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.oa=[],this._a=new Map,this.aa=new Set,this.ua=[],this.ca=l,this.ca.vo(u=>{i.enqueueAndForget(async()=>{Ra(this)&&(pe(wa,"Restarting streams for network reachability change."),await async function(m){const y=Re(m);y.aa.add(4),await eu(y),y.la.set("Unknown"),y.aa.delete(4),await $h(y)}(this))})}),this.la=new n4(i,a)}}async function $h(n){if(Ra(n))for(const e of n.ua)await e(!0)}async function eu(n){for(const e of n.ua)await e(!1)}function mx(n,e){const t=Re(n);t._a.has(e.targetId)||(t._a.set(e.targetId,e),ry(t)?ny(t):nl(t).b_()&&ty(t,e))}function ey(n,e){const t=Re(n),i=nl(t);t._a.delete(e),i.b_()&&px(t,e),t._a.size===0&&(i.b_()?i.v_():Ra(t)&&t.la.set("Unknown"))}function ty(n,e){if(n.ha.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ce.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}nl(n).U_(e)}function px(n,e){n.ha.Ke(e),nl(n).K_(e)}function ny(n){n.ha=new XO({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>n._a.get(e)||null,Pt:()=>n.datastore.serializer.databaseId}),nl(n).start(),n.la.ta()}function ry(n){return Ra(n)&&!nl(n).w_()&&n._a.size>0}function Ra(n){return Re(n).aa.size===0}function gx(n){n.ha=void 0}async function i4(n){n.la.set("Online")}async function s4(n){n._a.forEach((e,t)=>{ty(n,e)})}async function a4(n,e){gx(n),ry(n)?(n.la.ia(e),ny(n)):n.la.set("Unknown")}async function o4(n,e,t){if(n.la.set("Online"),e instanceof ex&&e.state===2&&e.cause)try{await async function(a,l){const u=l.cause;for(const f of l.targetIds)a._a.has(f)&&(await a.remoteSyncer.rejectListen(f,u),a._a.delete(f),a.ha.removeTarget(f))}(n,e)}catch(i){pe(wa,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await bh(n,i)}else if(e instanceof Wd?n.ha.Xe(e):e instanceof JT?n.ha.ot(e):n.ha.nt(e),!t.isEqual(Ce.min()))try{const i=await dx(n.localStore);t.compareTo(i)>=0&&await function(l,u){const f=l.ha.It(u);return f.targetChanges.forEach((m,y)=>{if(m.resumeToken.approximateByteSize()>0){const v=l._a.get(y);v&&l._a.set(y,v.withResumeToken(m.resumeToken,u))}}),f.targetMismatches.forEach((m,y)=>{const v=l._a.get(m);if(!v)return;l._a.set(m,v.withResumeToken(nn.EMPTY_BYTE_STRING,v.snapshotVersion)),px(l,m);const E=new cs(v.target,m,y,v.sequenceNumber);ty(l,E)}),l.remoteSyncer.applyRemoteEvent(f)}(n,t)}catch(i){pe(wa,"Failed to raise snapshot:",i),await bh(n,i)}}async function bh(n,e,t){if(!el(e))throw e;n.aa.add(1),await eu(n),n.la.set("Offline"),t||(t=()=>dx(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{pe(wa,"Retrying IndexedDB access"),await t(),n.aa.delete(1),await $h(n)})}function yx(n,e){return e().catch(t=>bh(n,t,e))}async function Yh(n){const e=Re(n),t=bs(e);let i=e.oa.length>0?e.oa[e.oa.length-1].batchId:Ug;for(;l4(e);)try{const a=await FD(e.localStore,i);if(a===null){e.oa.length===0&&t.v_();break}i=a.batchId,c4(e,a)}catch(a){await bh(e,a)}vx(e)&&_x(e)}function l4(n){return Ra(n)&&n.oa.length<10}function c4(n,e){n.oa.push(e);const t=bs(n);t.b_()&&t.W_&&t.G_(e.mutations)}function vx(n){return Ra(n)&&!bs(n).w_()&&n.oa.length>0}function _x(n){bs(n).start()}async function u4(n){bs(n).H_()}async function d4(n){const e=bs(n);for(const t of n.oa)e.G_(t.mutations)}async function h4(n,e,t){const i=n.oa.shift(),a=Yg.from(i,e,t);await yx(n,()=>n.remoteSyncer.applySuccessfulWrite(a)),await Yh(n)}async function f4(n,e){e&&bs(n).W_&&await async function(i,a){if(function(u){return QO(u)&&u!==ie.ABORTED}(a.code)){const l=i.oa.shift();bs(i).D_(),await yx(i,()=>i.remoteSyncer.rejectFailedWrite(l.batchId,a)),await Yh(i)}}(n,e),vx(n)&&_x(n)}async function hE(n,e){const t=Re(n);t.asyncQueue.verifyOperationInProgress(),pe(wa,"RemoteStore received new credentials");const i=Ra(t);t.aa.add(3),await eu(t),i&&t.la.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.aa.delete(3),await $h(t)}async function m4(n,e){const t=Re(n);e?(t.aa.delete(2),await $h(t)):e||(t.aa.add(2),await eu(t),t.la.set("Unknown"))}function nl(n){return n.Pa||(n.Pa=function(t,i,a){const l=Re(t);return l.Y_(),new ZD(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)}(n.datastore,n.asyncQueue,{jo:i4.bind(null,n),Jo:s4.bind(null,n),Zo:a4.bind(null,n),Q_:o4.bind(null,n)}),n.ua.push(async e=>{e?(n.Pa.D_(),ry(n)?ny(n):n.la.set("Unknown")):(await n.Pa.stop(),gx(n))})),n.Pa}function bs(n){return n.Ta||(n.Ta=function(t,i,a){const l=Re(t);return l.Y_(),new JD(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)}(n.datastore,n.asyncQueue,{jo:()=>Promise.resolve(),Jo:u4.bind(null,n),Zo:f4.bind(null,n),z_:d4.bind(null,n),j_:h4.bind(null,n)}),n.ua.push(async e=>{e?(n.Ta.D_(),await Yh(n)):(await n.Ta.stop(),n.oa.length>0&&(pe(wa,`Stopping write stream with ${n.oa.length} pending writes`),n.oa=[]))})),n.Ta}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iy{constructor(e,t,i,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=a,this.removalCallback=l,this.deferred=new vi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,a,l){const u=Date.now()+i,f=new iy(e,t,u,a,l);return f.start(i),f}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new me(ie.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function sy(n,e){if(Ti("AsyncQueue",`${e}: ${n}`),el(n))return new me(ie.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{static emptySet(e){return new jo(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||Ee.comparator(t.key,i.key):(t,i)=>Ee.comparator(t.key,i.key),this.keyedMap=Ec(),this.sortedSet=new gt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof jo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=i.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new jo;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE{constructor(){this.Ia=new gt(Ee.comparator)}track(e){const t=e.doc.key,i=this.Ia.get(t);i?e.type!==0&&i.type===3?this.Ia=this.Ia.insert(t,e):e.type===3&&i.type!==1?this.Ia=this.Ia.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.Ia=this.Ia.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.Ia=this.Ia.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.Ia=this.Ia.remove(t):e.type===1&&i.type===2?this.Ia=this.Ia.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.Ia=this.Ia.insert(t,{type:2,doc:e.doc}):Ae(63341,{Vt:e,Ea:i}):this.Ia=this.Ia.insert(t,e)}da(){const e=[];return this.Ia.inorderTraversal((t,i)=>{e.push(i)}),e}}class Ho{constructor(e,t,i,a,l,u,f,m,y){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=a,this.mutatedKeys=l,this.fromCache=u,this.syncStateChanged=f,this.excludesMetadataChanges=m,this.hasCachedResults=y}static fromInitialDocuments(e,t,i,a,l){const u=[];return t.forEach(f=>{u.push({type:0,doc:f})}),new Ho(e,t,jo.emptySet(t),u,i,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&zh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==i[a].type||!t[a].doc.isEqual(i[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p4{constructor(){this.Aa=void 0,this.Ra=[]}Va(){return this.Ra.some(e=>e.ma())}}class g4{constructor(){this.queries=mE(),this.onlineState="Unknown",this.fa=new Set}terminate(){(function(t,i){const a=Re(t),l=a.queries;a.queries=mE(),l.forEach((u,f)=>{for(const m of f.Ra)m.onError(i)})})(this,new me(ie.ABORTED,"Firestore shutting down"))}}function mE(){return new Na(n=>zT(n),zh)}async function bx(n,e){const t=Re(n);let i=3;const a=e.query;let l=t.queries.get(a);l?!l.Va()&&e.ma()&&(i=2):(l=new p4,i=e.ma()?0:1);try{switch(i){case 0:l.Aa=await t.onListen(a,!0);break;case 1:l.Aa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(u){const f=sy(u,`Initialization of query '${Co(e.query)}' failed`);return void e.onError(f)}t.queries.set(a,l),l.Ra.push(e),e.ga(t.onlineState),l.Aa&&e.pa(l.Aa)&&ay(t)}async function Ex(n,e){const t=Re(n),i=e.query;let a=3;const l=t.queries.get(i);if(l){const u=l.Ra.indexOf(e);u>=0&&(l.Ra.splice(u,1),l.Ra.length===0?a=e.ma()?0:1:!l.Va()&&e.ma()&&(a=2))}switch(a){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function y4(n,e){const t=Re(n);let i=!1;for(const a of e){const l=a.query,u=t.queries.get(l);if(u){for(const f of u.Ra)f.pa(a)&&(i=!0);u.Aa=a}}i&&ay(t)}function v4(n,e,t){const i=Re(n),a=i.queries.get(e);if(a)for(const l of a.Ra)l.onError(t);i.queries.delete(e)}function ay(n){n.fa.forEach(e=>{e.next()})}var og,pE;(pE=og||(og={})).ya="default",pE.Cache="cache";class Tx{constructor(e,t,i){this.query=e,this.wa=t,this.ba=!1,this.Sa=null,this.onlineState="Unknown",this.options=i||{}}pa(e){if(!this.options.includeMetadataChanges){const i=[];for(const a of e.docChanges)a.type!==3&&i.push(a);e=new Ho(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ba?this.Da(e)&&(this.wa.next(e),t=!0):this.va(e,this.onlineState)&&(this.Ca(e),t=!0),this.Sa=e,t}onError(e){this.wa.error(e)}ga(e){this.onlineState=e;let t=!1;return this.Sa&&!this.ba&&this.va(this.Sa,e)&&(this.Ca(this.Sa),t=!0),t}va(e,t){if(!e.fromCache||!this.ma())return!0;const i=t!=="Offline";return(!this.options.Fa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Da(e){if(e.docChanges.length>0)return!0;const t=this.Sa&&this.Sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Ca(e){e=Ho.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ba=!0,this.wa.next(e)}ma(){return this.options.source!==og.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xx{constructor(e){this.key=e}}class wx{constructor(e){this.key=e}}class _4{constructor(e,t){this.query=e,this.qa=t,this.Qa=null,this.hasCachedResults=!1,this.current=!1,this.$a=Ue(),this.mutatedKeys=Ue(),this.Ua=BT(e),this.Ka=new jo(this.Ua)}get Wa(){return this.qa}Ga(e,t){const i=t?t.za:new fE,a=t?t.Ka:this.Ka;let l=t?t.mutatedKeys:this.mutatedKeys,u=a,f=!1;const m=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,y=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((v,E)=>{const x=a.get(v),C=Bh(this.query,E)?E:null,A=!!x&&this.mutatedKeys.has(x.key),k=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations);let O=!1;x&&C?x.data.isEqual(C.data)?A!==k&&(i.track({type:3,doc:C}),O=!0):this.ja(x,C)||(i.track({type:2,doc:C}),O=!0,(m&&this.Ua(C,m)>0||y&&this.Ua(C,y)<0)&&(f=!0)):!x&&C?(i.track({type:0,doc:C}),O=!0):x&&!C&&(i.track({type:1,doc:x}),O=!0,(m||y)&&(f=!0)),O&&(C?(u=u.add(C),l=k?l.add(v):l.delete(v)):(u=u.delete(v),l=l.delete(v)))}),this.query.limit!==null)for(;u.size>this.query.limit;){const v=this.query.limitType==="F"?u.last():u.first();u=u.delete(v.key),l=l.delete(v.key),i.track({type:1,doc:v})}return{Ka:u,za:i,ys:f,mutatedKeys:l}}ja(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,a){const l=this.Ka;this.Ka=e.Ka,this.mutatedKeys=e.mutatedKeys;const u=e.za.da();u.sort((v,E)=>function(C,A){const k=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ae(20277,{Vt:O})}};return k(C)-k(A)}(v.type,E.type)||this.Ua(v.doc,E.doc)),this.Ha(i),a=a!=null&&a;const f=t&&!a?this.Ja():[],m=this.$a.size===0&&this.current&&!a?1:0,y=m!==this.Qa;return this.Qa=m,u.length!==0||y?{snapshot:new Ho(this.query,e.Ka,l,u,e.mutatedKeys,m===0,y,!1,!!i&&i.resumeToken.approximateByteSize()>0),Ya:f}:{Ya:f}}ga(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ka:this.Ka,za:new fE,mutatedKeys:this.mutatedKeys,ys:!1},!1)):{Ya:[]}}Za(e){return!this.qa.has(e)&&!!this.Ka.has(e)&&!this.Ka.get(e).hasLocalMutations}Ha(e){e&&(e.addedDocuments.forEach(t=>this.qa=this.qa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.qa=this.qa.delete(t)),this.current=e.current)}Ja(){if(!this.current)return[];const e=this.$a;this.$a=Ue(),this.Ka.forEach(i=>{this.Za(i.key)&&(this.$a=this.$a.add(i.key))});const t=[];return e.forEach(i=>{this.$a.has(i)||t.push(new wx(i))}),this.$a.forEach(i=>{e.has(i)||t.push(new xx(i))}),t}Xa(e){this.qa=e.Ns,this.$a=Ue();const t=this.Ga(e.documents);return this.applyChanges(t,!0)}eu(){return Ho.fromInitialDocuments(this.query,this.Ka,this.mutatedKeys,this.Qa===0,this.hasCachedResults)}}const oy="SyncEngine";class b4{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class E4{constructor(e){this.key=e,this.tu=!1}}class T4{constructor(e,t,i,a,l,u){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=u,this.nu={},this.ru=new Na(f=>zT(f),zh),this.iu=new Map,this.su=new Set,this.ou=new gt(Ee.comparator),this._u=new Map,this.au=new Wg,this.uu={},this.cu=new Map,this.lu=Fo.ir(),this.onlineState="Unknown",this.hu=void 0}get isPrimaryClient(){return this.hu===!0}}async function x4(n,e,t=!0){const i=Ix(n);let a;const l=i.ru.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.eu()):a=await Ax(i,e,t,!0),a}async function w4(n,e){const t=Ix(n);await Ax(t,e,!0,!1)}async function Ax(n,e,t,i){const a=await HD(n.localStore,Vr(e)),l=a.targetId,u=n.sharedClientState.addLocalQueryTarget(l,t);let f;return i&&(f=await A4(n,e,l,u==="current",a.resumeToken)),n.isPrimaryClient&&t&&mx(n.remoteStore,a),f}async function A4(n,e,t,i,a){n.Pu=(E,x,C)=>async function(k,O,$,K){let z=O.view.Ga($);z.ys&&(z=await oE(k.localStore,O.query,!1).then(({documents:j})=>O.view.Ga(j,z)));const ce=K&&K.targetChanges.get(O.targetId),le=K&&K.targetMismatches.get(O.targetId)!=null,ye=O.view.applyChanges(z,k.isPrimaryClient,ce,le);return yE(k,O.targetId,ye.Ya),ye.snapshot}(n,E,x,C);const l=await oE(n.localStore,e,!0),u=new _4(e,l.Ns),f=u.Ga(l.documents),m=Jc.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",a),y=u.applyChanges(f,n.isPrimaryClient,m);yE(n,t,y.Ya);const v=new b4(e,t,u);return n.ru.set(e,v),n.iu.has(t)?n.iu.get(t).push(e):n.iu.set(t,[e]),y.snapshot}async function S4(n,e,t){const i=Re(n),a=i.ru.get(e),l=i.iu.get(a.targetId);if(l.length>1)return i.iu.set(a.targetId,l.filter(u=>!zh(u,e))),void i.ru.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(a.targetId),i.sharedClientState.isActiveQueryTarget(a.targetId)||await sg(i.localStore,a.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(a.targetId),t&&ey(i.remoteStore,a.targetId),lg(i,a.targetId)}).catch(Jo)):(lg(i,a.targetId),await sg(i.localStore,a.targetId,!0))}async function C4(n,e){const t=Re(n),i=t.ru.get(e),a=t.iu.get(i.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),ey(t.remoteStore,i.targetId))}async function N4(n,e,t){const i=M4(n);try{const a=await function(u,f){const m=Re(u),y=kt.now(),v=f.reduce((C,A)=>C.add(A.key),Ue());let E,x;return m.persistence.runTransaction("Locally write mutations","readwrite",C=>{let A=xi(),k=Ue();return m.Cs.getEntries(C,v).next(O=>{A=O,A.forEach(($,K)=>{K.isValidDocument()||(k=k.add($))})}).next(()=>m.localDocuments.getOverlayedDocuments(C,A)).next(O=>{E=O;const $=[];for(const K of f){const z=HO(K,E.get(K.key).overlayedDocument);z!=null&&$.push(new Ss(K.key,z,DT(z.value.mapValue),Zn.exists(!0)))}return m.mutationQueue.addMutationBatch(C,y,$,f)}).next(O=>{x=O;const $=O.applyToLocalDocumentSet(E,k);return m.documentOverlayCache.saveOverlays(C,O.batchId,$)})}).then(()=>({batchId:x.batchId,changes:FT(E)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(a.batchId),function(u,f,m){let y=u.uu[u.currentUser.toKey()];y||(y=new gt(Pe)),y=y.insert(f,m),u.uu[u.currentUser.toKey()]=y}(i,a.batchId,t),await tu(i,a.changes),await Yh(i.remoteStore)}catch(a){const l=sy(a,"Failed to persist write");t.reject(l)}}async function Sx(n,e){const t=Re(n);try{const i=await BD(t.localStore,e);e.targetChanges.forEach((a,l)=>{const u=t._u.get(l);u&&(Qe(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?u.tu=!0:a.modifiedDocuments.size>0?Qe(u.tu,14607):a.removedDocuments.size>0&&(Qe(u.tu,42227),u.tu=!1))}),await tu(t,i,e)}catch(i){await Jo(i)}}function gE(n,e,t){const i=Re(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const a=[];i.ru.forEach((l,u)=>{const f=u.view.ga(e);f.snapshot&&a.push(f.snapshot)}),function(u,f){const m=Re(u);m.onlineState=f;let y=!1;m.queries.forEach((v,E)=>{for(const x of E.Ra)x.ga(f)&&(y=!0)}),y&&ay(m)}(i.eventManager,e),a.length&&i.nu.Q_(a),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function R4(n,e,t){const i=Re(n);i.sharedClientState.updateQueryState(e,"rejected",t);const a=i._u.get(e),l=a&&a.key;if(l){let u=new gt(Ee.comparator);u=u.insert(l,cn.newNoDocument(l,Ce.min()));const f=Ue().add(l),m=new Hh(Ce.min(),new Map,new gt(Pe),u,f);await Sx(i,m),i.ou=i.ou.remove(l),i._u.delete(e),ly(i)}else await sg(i.localStore,e,!1).then(()=>lg(i,e,t)).catch(Jo)}async function I4(n,e){const t=Re(n),i=e.batch.batchId;try{const a=await zD(t.localStore,e);Nx(t,i,null),Cx(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await tu(t,a)}catch(a){await Jo(a)}}async function O4(n,e,t){const i=Re(n);try{const a=await function(u,f){const m=Re(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",y=>{let v;return m.mutationQueue.lookupMutationBatch(y,f).next(E=>(Qe(E!==null,37113),v=E.keys(),m.mutationQueue.removeMutationBatch(y,E))).next(()=>m.mutationQueue.performConsistencyCheck(y)).next(()=>m.documentOverlayCache.removeOverlaysForBatchId(y,v,f)).next(()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,v)).next(()=>m.localDocuments.getDocuments(y,v))})}(i.localStore,e);Nx(i,e,t),Cx(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await tu(i,a)}catch(a){await Jo(a)}}function Cx(n,e){(n.cu.get(e)||[]).forEach(t=>{t.resolve()}),n.cu.delete(e)}function Nx(n,e,t){const i=Re(n);let a=i.uu[i.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),i.uu[i.currentUser.toKey()]=a}}function lg(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.iu.get(e))n.ru.delete(i),t&&n.nu.Tu(i,t);n.iu.delete(e),n.isPrimaryClient&&n.au.Ur(e).forEach(i=>{n.au.containsKey(i)||Rx(n,i)})}function Rx(n,e){n.su.delete(e.path.canonicalString());const t=n.ou.get(e);t!==null&&(ey(n.remoteStore,t),n.ou=n.ou.remove(e),n._u.delete(t),ly(n))}function yE(n,e,t){for(const i of t)i instanceof xx?(n.au.addReference(i.key,e),D4(n,i)):i instanceof wx?(pe(oy,"Document no longer in limbo: "+i.key),n.au.removeReference(i.key,e),n.au.containsKey(i.key)||Rx(n,i.key)):Ae(19791,{Iu:i})}function D4(n,e){const t=e.key,i=t.path.canonicalString();n.ou.get(t)||n.su.has(i)||(pe(oy,"New document in limbo: "+t),n.su.add(i),ly(n))}function ly(n){for(;n.su.size>0&&n.ou.size<n.maxConcurrentLimboResolutions;){const e=n.su.values().next().value;n.su.delete(e);const t=new Ee(lt.fromString(e)),i=n.lu.next();n._u.set(i,new E4(t)),n.ou=n.ou.insert(t,i),mx(n.remoteStore,new cs(Vr(Hg(t.path)),i,"TargetPurposeLimboResolution",Vh.le))}}async function tu(n,e,t){const i=Re(n),a=[],l=[],u=[];i.ru.isEmpty()||(i.ru.forEach((f,m)=>{u.push(i.Pu(m,e,t).then(y=>{var v;if((y||t)&&i.isPrimaryClient){const E=y?!y.fromCache:(v=t==null?void 0:t.targetChanges.get(m.targetId))===null||v===void 0?void 0:v.current;i.sharedClientState.updateQueryState(m.targetId,E?"current":"not-current")}if(y){a.push(y);const E=Zg.Ps(m.targetId,y);l.push(E)}}))}),await Promise.all(u),i.nu.Q_(a),await async function(m,y){const v=Re(m);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",E=>ae.forEach(y,x=>ae.forEach(x.ls,C=>v.persistence.referenceDelegate.addReference(E,x.targetId,C)).next(()=>ae.forEach(x.hs,C=>v.persistence.referenceDelegate.removeReference(E,x.targetId,C)))))}catch(E){if(!el(E))throw E;pe(Jg,"Failed to update sequence numbers: "+E)}for(const E of y){const x=E.targetId;if(!E.fromCache){const C=v.Ss.get(x),A=C.snapshotVersion,k=C.withLastLimboFreeSnapshotVersion(A);v.Ss=v.Ss.insert(x,k)}}}(i.localStore,l))}async function P4(n,e){const t=Re(n);if(!t.currentUser.isEqual(e)){pe(oy,"User change. New user:",e.toKey());const i=await ux(t.localStore,e);t.currentUser=e,function(l,u){l.cu.forEach(f=>{f.forEach(m=>{m.reject(new me(ie.CANCELLED,u))})}),l.cu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await tu(t,i.Ms)}}function j4(n,e){const t=Re(n),i=t._u.get(e);if(i&&i.tu)return Ue().add(i.key);{let a=Ue();const l=t.iu.get(e);if(!l)return a;for(const u of l){const f=t.ru.get(u);a=a.unionWith(f.view.Wa)}return a}}function Ix(n){const e=Re(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Sx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=j4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=R4.bind(null,e),e.nu.Q_=y4.bind(null,e.eventManager),e.nu.Tu=v4.bind(null,e.eventManager),e}function M4(n){const e=Re(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=I4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=O4.bind(null,e),e}class Eh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Gh(e.databaseInfo.databaseId),this.sharedClientState=this.Au(e),this.persistence=this.Ru(e),await this.persistence.start(),this.localStore=this.Vu(e),this.gcScheduler=this.mu(e,this.localStore),this.indexBackfillerScheduler=this.fu(e,this.localStore)}mu(e,t){return null}fu(e,t){return null}Vu(e){return UD(this.persistence,new kD,e.initialUser,this.serializer)}Ru(e){return new cx(Xg.Ei,this.serializer)}Au(e){return new $D}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Eh.provider={build:()=>new Eh};class k4 extends Eh{constructor(e){super(),this.cacheSizeBytes=e}mu(e,t){Qe(this.persistence.referenceDelegate instanceof _h,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new ED(i,e.asyncQueue,t)}Ru(e){const t=this.cacheSizeBytes!==void 0?xn.withCacheSize(this.cacheSizeBytes):xn.DEFAULT;return new cx(i=>_h.Ei(i,t),this.serializer)}}class cg{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>gE(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=P4.bind(null,this.syncEngine),await m4(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new g4}()}createDatastore(e){const t=Gh(e.databaseInfo.databaseId),i=function(l){return new XD(l)}(e.databaseInfo);return function(l,u,f,m){return new t4(l,u,f,m)}(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return function(i,a,l,u,f){return new r4(i,a,l,u,f)}(this.localStore,this.datastore,e.asyncQueue,t=>gE(this.syncEngine,t,0),function(){return uE.C()?new uE:new YD}())}createSyncEngine(e,t){return function(a,l,u,f,m,y,v){const E=new T4(a,l,u,f,m,y);return v&&(E.hu=!0),E}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(a){const l=Re(a);pe(wa,"RemoteStore shutting down."),l.aa.add(5),await eu(l),l.ca.shutdown(),l.la.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}cg.provider={build:()=>new cg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ox{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.pu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.pu(this.observer.error,e):Ti("Uncaught Error in snapshot listener:",e.toString()))}yu(){this.muted=!0}pu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Es="FirestoreClient";class V4{constructor(e,t,i,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=a,this.user=ln.UNAUTHENTICATED,this.clientId=TT.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,async u=>{pe(Es,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u}),this.appCheckCredentials.start(i,u=>(pe(Es,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new vi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=sy(t,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function Op(n,e){n.asyncQueue.verifyOperationInProgress(),pe(Es,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(async a=>{i.isEqual(a)||(await ux(e.localStore,a),i=a)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function vE(n,e){n.asyncQueue.verifyOperationInProgress();const t=await L4(n);pe(Es,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(i=>hE(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>hE(e.remoteStore,a)),n._onlineComponents=e}async function L4(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){pe(Es,"Using user provided OfflineComponentProvider");try{await Op(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(a){return a.name==="FirebaseError"?a.code===ie.FAILED_PRECONDITION||a.code===ie.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(t))throw t;Uo("Error using user provided cache. Falling back to memory cache: "+t),await Op(n,new Eh)}}else pe(Es,"Using default OfflineComponentProvider"),await Op(n,new k4(void 0));return n._offlineComponents}async function Dx(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(pe(Es,"Using user provided OnlineComponentProvider"),await vE(n,n._uninitializedComponentsProvider._online)):(pe(Es,"Using default OnlineComponentProvider"),await vE(n,new cg))),n._onlineComponents}function U4(n){return Dx(n).then(e=>e.syncEngine)}async function Px(n){const e=await Dx(n),t=e.eventManager;return t.onListen=x4.bind(null,e.syncEngine),t.onUnlisten=S4.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=w4.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=C4.bind(null,e.syncEngine),t}function z4(n,e,t={}){const i=new vi;return n.asyncQueue.enqueueAndForget(async()=>function(l,u,f,m,y){const v=new Ox({next:x=>{v.yu(),u.enqueueAndForget(()=>Ex(l,E));const C=x.docs.has(f);!C&&x.fromCache?y.reject(new me(ie.UNAVAILABLE,"Failed to get document because the client is offline.")):C&&x.fromCache&&m&&m.source==="server"?y.reject(new me(ie.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(x)},error:x=>y.reject(x)}),E=new Tx(Hg(f.path),v,{includeMetadataChanges:!0,Fa:!0});return bx(l,E)}(await Px(n),n.asyncQueue,e,t,i)),i.promise}function B4(n,e,t={}){const i=new vi;return n.asyncQueue.enqueueAndForget(async()=>function(l,u,f,m,y){const v=new Ox({next:x=>{v.yu(),u.enqueueAndForget(()=>Ex(l,E)),x.fromCache&&m.source==="server"?y.reject(new me(ie.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(x)},error:x=>y.reject(x)}),E=new Tx(f,v,{includeMetadataChanges:!0,Fa:!0});return bx(l,E)}(await Px(n),n.asyncQueue,e,t,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jx(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _E=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mx(n,e,t){if(!t)throw new me(ie.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function q4(n,e,t,i){if(e===!0&&i===!0)throw new me(ie.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function bE(n){if(!Ee.isDocumentKey(n))throw new me(ie.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function EE(n){if(Ee.isDocumentKey(n))throw new me(ie.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Kh(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ae(12329,{type:typeof n})}function ur(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new me(ie.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Kh(n);throw new me(ie.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function F4(n,e){if(e<=0)throw new me(ie.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kx="firestore.googleapis.com",TE=!0;class xE{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new me(ie.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=kx,this.ssl=TE}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:TE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=lx;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<_D)throw new me(ie.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}q4("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=jx((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new me(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new me(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new me(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,a){return i.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Qh{constructor(e,t,i,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new xE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new me(ie.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new me(ie.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new xE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new QI;switch(i.type){case"firstParty":return new JI(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new me(ie.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,Ph("Firestore",this._settings.isUsingEmulator),this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const i=_E.get(t);i&&(pe("ComponentProvider","Removing Datastore"),_E.delete(t),i.terminate())}(this),Promise.resolve()}}function H4(n,e,t,i={}){var a;n=ur(n,Qh);const l=Gc(e),u=n._getSettings(),f=Object.assign(Object.assign({},u),{emulatorOptions:n._getEmulatorOptions()}),m=`${e}:${t}`;u.host!==kx&&u.host!==m&&Uo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const y=Object.assign(Object.assign({},u),{host:m,ssl:l,emulatorOptions:i});if(!_a(y,f)&&(n._setSettings(y),l&&(S1(`https://${m}`),Ph("Firestore",!0)),i.mockUserToken)){let v,E;if(typeof i.mockUserToken=="string")v=i.mockUserToken,E=ln.MOCK_USER;else{v=rN(i.mockUserToken,(a=n._app)===null||a===void 0?void 0:a.options.projectId);const x=i.mockUserToken.sub||i.mockUserToken.user_id;if(!x)throw new me(ie.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new ln(x)}n._authCredentials=new WI(new bT(v,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Cs(this.firestore,e,this._query)}}class yn{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ms(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new yn(this.firestore,e,this._key)}}class ms extends Cs{constructor(e,t,i){super(e,t,Hg(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new yn(this.firestore,null,new Ee(e))}withConverter(e){return new ms(this.firestore,e,this._path)}}function dr(n,e,...t){if(n=Lt(n),Mx("collection","path",e),n instanceof Qh){const i=lt.fromString(e,...t);return EE(i),new ms(n,null,i)}{if(!(n instanceof yn||n instanceof ms))throw new me(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(lt.fromString(e,...t));return EE(i),new ms(n.firestore,null,i)}}function ft(n,e,...t){if(n=Lt(n),arguments.length===1&&(e=TT.newId()),Mx("doc","path",e),n instanceof Qh){const i=lt.fromString(e,...t);return bE(i),new yn(n,null,new Ee(i))}{if(!(n instanceof yn||n instanceof ms))throw new me(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(lt.fromString(e,...t));return bE(i),new yn(n.firestore,n instanceof ms?n.converter:null,new Ee(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wE="AsyncQueue";class AE{constructor(e=Promise.resolve()){this.Qu=[],this.$u=!1,this.Uu=[],this.Ku=null,this.Wu=!1,this.Gu=!1,this.zu=[],this.y_=new hx(this,"async_queue_retry"),this.ju=()=>{const i=Ip();i&&pe(wE,"Visibility state changed to "+i.visibilityState),this.y_.A_()},this.Hu=e;const t=Ip();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.ju)}get isShuttingDown(){return this.$u}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ju(),this.Yu(e)}enterRestrictedMode(e){if(!this.$u){this.$u=!0,this.Gu=e||!1;const t=Ip();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.ju)}}enqueue(e){if(this.Ju(),this.$u)return new Promise(()=>{});const t=new vi;return this.Yu(()=>this.$u&&this.Gu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qu.push(e),this.Zu()))}async Zu(){if(this.Qu.length!==0){try{await this.Qu[0](),this.Qu.shift(),this.y_.reset()}catch(e){if(!el(e))throw e;pe(wE,"Operation failed with retryable error: "+e)}this.Qu.length>0&&this.y_.E_(()=>this.Zu())}}Yu(e){const t=this.Hu.then(()=>(this.Wu=!0,e().catch(i=>{throw this.Ku=i,this.Wu=!1,Ti("INTERNAL UNHANDLED ERROR: ",SE(i)),i}).then(i=>(this.Wu=!1,i))));return this.Hu=t,t}enqueueAfterDelay(e,t,i){this.Ju(),this.zu.indexOf(e)>-1&&(t=0);const a=iy.createAndSchedule(this,e,t,i,l=>this.Xu(l));return this.Uu.push(a),a}Ju(){this.Ku&&Ae(47125,{ec:SE(this.Ku)})}verifyOperationInProgress(){}async tc(){let e;do e=this.Hu,await e;while(e!==this.Hu)}nc(e){for(const t of this.Uu)if(t.timerId===e)return!0;return!1}rc(e){return this.tc().then(()=>{this.Uu.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this.Uu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.tc()})}sc(e){this.zu.push(e)}Xu(e){const t=this.Uu.indexOf(e);this.Uu.splice(t,1)}}function SE(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Ia extends Qh{constructor(e,t,i,a){super(e,t,i,a),this.type="firestore",this._queue=new AE,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new AE(e),this._firestoreClient=void 0,await e}}}function G4(n,e){const t=typeof n=="object"?n:I1(),i=typeof n=="string"?n:fh,a=Ng(t,"firestore").getImmediate({identifier:i});if(!a._initialized){const l=tN("firestore");l&&H4(a,...l)}return a}function cy(n){if(n._terminated)throw new me(ie.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||$4(n),n._firestoreClient}function $4(n){var e,t,i;const a=n._freezeSettings(),l=function(f,m,y,v){return new mO(f,m,y,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,jx(v.experimentalLongPollingOptions),v.useFetchStreams,v.isUsingEmulator)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,a);n._componentsProvider||!((t=a.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=a.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),n._firestoreClient=new V4(n._authCredentials,n._appCheckCredentials,n._queue,l,n._componentsProvider&&function(f){const m=f==null?void 0:f._online.build();return{_offline:f==null?void 0:f._offline.build(m),_online:m}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Go(nn.fromBase64String(e))}catch(t){throw new me(ie.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Go(nn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wh{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new me(ie.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new tn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uy{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new me(ie.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new me(ie.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Pe(this._lat,e._lat)||Pe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dy{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,a){if(i.length!==a.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==a[l])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y4=/^__.*__$/;class K4{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Ss(e,this.data,this.fieldMask,t,this.fieldTransforms):new Zc(e,this.data,t,this.fieldTransforms)}}class Vx{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Ss(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Lx(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ae(40011,{oc:n})}}class hy{constructor(e,t,i,a,l,u){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=a,l===void 0&&this._c(),this.fieldTransforms=l||[],this.fieldMask=u||[]}get path(){return this.settings.path}get oc(){return this.settings.oc}ac(e){return new hy(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}uc(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),a=this.ac({path:i,cc:!1});return a.lc(e),a}hc(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),a=this.ac({path:i,cc:!1});return a._c(),a}Pc(e){return this.ac({path:void 0,cc:!0})}Tc(e){return Th(e,this.settings.methodName,this.settings.Ic||!1,this.path,this.settings.Ec)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}_c(){if(this.path)for(let e=0;e<this.path.length;e++)this.lc(this.path.get(e))}lc(e){if(e.length===0)throw this.Tc("Document fields must not be empty");if(Lx(this.oc)&&Y4.test(e))throw this.Tc('Document fields cannot begin and end with "__"')}}class Q4{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Gh(e)}dc(e,t,i,a=!1){return new hy({oc:e,methodName:t,Ec:i,path:tn.emptyPath(),cc:!1,Ic:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Zh(n){const e=n._freezeSettings(),t=Gh(n._databaseId);return new Q4(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Ux(n,e,t,i,a,l={}){const u=n.dc(l.merge||l.mergeFields?2:0,e,t,a);my("Data must be an object, but it was:",u,i);const f=zx(i,u);let m,y;if(l.merge)m=new Vn(u.fieldMask),y=u.fieldTransforms;else if(l.mergeFields){const v=[];for(const E of l.mergeFields){const x=ug(e,E,t);if(!u.contains(x))throw new me(ie.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);qx(v,x)||v.push(x)}m=new Vn(v),y=u.fieldTransforms.filter(E=>m.covers(E.field))}else m=null,y=u.fieldTransforms;return new K4(new wn(f),m,y)}class Jh extends Xh{_toFieldTransform(e){if(e.oc!==2)throw e.oc===1?e.Tc(`${this._methodName}() can only appear at the top level of your update data`):e.Tc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Jh}}class fy extends Xh{_toFieldTransform(e){return new zO(e.path,new Lc)}isEqual(e){return e instanceof fy}}function W4(n,e,t,i){const a=n.dc(1,e,t);my("Data must be an object, but it was:",a,i);const l=[],u=wn.empty();As(i,(m,y)=>{const v=py(e,m,t);y=Lt(y);const E=a.hc(v);if(y instanceof Jh)l.push(v);else{const x=nu(y,E);x!=null&&(l.push(v),u.set(v,x))}});const f=new Vn(l);return new Vx(u,f,a.fieldTransforms)}function X4(n,e,t,i,a,l){const u=n.dc(1,e,t),f=[ug(e,i,t)],m=[a];if(l.length%2!=0)throw new me(ie.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<l.length;x+=2)f.push(ug(e,l[x])),m.push(l[x+1]);const y=[],v=wn.empty();for(let x=f.length-1;x>=0;--x)if(!qx(y,f[x])){const C=f[x];let A=m[x];A=Lt(A);const k=u.hc(C);if(A instanceof Jh)y.push(C);else{const O=nu(A,k);O!=null&&(y.push(C),v.set(C,O))}}const E=new Vn(y);return new Vx(v,E,u.fieldTransforms)}function Z4(n,e,t,i=!1){return nu(t,n.dc(i?4:3,e))}function nu(n,e){if(Bx(n=Lt(n)))return my("Unsupported field value:",e,n),zx(n,e);if(n instanceof Xh)return function(i,a){if(!Lx(a.oc))throw a.Tc(`${i._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Tc(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(a);l&&a.fieldTransforms.push(l)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.cc&&e.oc!==4)throw e.Tc("Nested arrays are not supported");return function(i,a){const l=[];let u=0;for(const f of i){let m=nu(f,a.Pc(u));m==null&&(m={nullValue:"NULL_VALUE"}),l.push(m),u++}return{arrayValue:{values:l}}}(n,e)}return function(i,a){if((i=Lt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return VO(a.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=kt.fromDate(i);return{timestampValue:vh(a.serializer,l)}}if(i instanceof kt){const l=new kt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:vh(a.serializer,l)}}if(i instanceof uy)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Go)return{bytesValue:tx(a.serializer,i._byteString)};if(i instanceof yn){const l=a.databaseId,u=i.firestore._databaseId;if(!u.isEqual(l))throw a.Tc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Qg(i.firestore._databaseId||a.databaseId,i._key.path)}}if(i instanceof dy)return function(u,f){return{mapValue:{fields:{[IT]:{stringValue:OT},[mh]:{arrayValue:{values:u.toArray().map(y=>{if(typeof y!="number")throw f.Tc("VectorValues must only contain numeric values.");return Gg(f.serializer,y)})}}}}}}(i,a);throw a.Tc(`Unsupported field value: ${Kh(i)}`)}(n,e)}function zx(n,e){const t={};return wT(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):As(n,(i,a)=>{const l=nu(a,e.uc(i));l!=null&&(t[i]=l)}),{mapValue:{fields:t}}}function Bx(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof kt||n instanceof uy||n instanceof Go||n instanceof yn||n instanceof Xh||n instanceof dy)}function my(n,e,t){if(!Bx(t)||!function(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)}(t)){const i=Kh(t);throw i==="an object"?e.Tc(n+" a custom object"):e.Tc(n+" "+i)}}function ug(n,e,t){if((e=Lt(e))instanceof Wh)return e._internalPath;if(typeof e=="string")return py(n,e);throw Th("Field path arguments must be of type string or ",n,!1,void 0,t)}const J4=new RegExp("[~\\*/\\[\\]]");function py(n,e,t){if(e.search(J4)>=0)throw Th(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Wh(...e.split("."))._internalPath}catch{throw Th(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Th(n,e,t,i,a){const l=i&&!i.isEmpty(),u=a!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let m="";return(l||u)&&(m+=" (found",l&&(m+=` in field ${i}`),u&&(m+=` in document ${a}`),m+=")"),new me(ie.INVALID_ARGUMENT,f+n+m)}function qx(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fx{constructor(e,t,i,a,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new yn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new eP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(ef("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class eP extends Fx{data(){return super.data()}}function ef(n,e){return typeof e=="string"?py(n,e):e instanceof Wh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tP(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new me(ie.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class gy{}class yy extends gy{}function zr(n,e,...t){let i=[];e instanceof gy&&i.push(e),i=i.concat(t),function(l){const u=l.filter(m=>m instanceof vy).length,f=l.filter(m=>m instanceof tf).length;if(u>1||u>0&&f>0)throw new me(ie.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const a of i)n=a._apply(n);return n}class tf extends yy{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new tf(e,t,i)}_apply(e){const t=this._parse(e);return Hx(e._query,t),new Cs(e.firestore,e.converter,eg(e._query,t))}_parse(e){const t=Zh(e.firestore);return function(l,u,f,m,y,v,E){let x;if(y.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new me(ie.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){NE(E,v);const A=[];for(const k of E)A.push(CE(m,l,k));x={arrayValue:{values:A}}}else x=CE(m,l,E)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||NE(E,v),x=Z4(f,u,E,v==="in"||v==="not-in");return It.create(y,v,x)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Gt(n,e,t){const i=e,a=ef("where",n);return tf._create(a,i,t)}class vy extends gy{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new vy(e,t)}_parse(e){const t=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return t.length===1?t[0]:cr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(a,l){let u=a;const f=l.getFlattenedFilters();for(const m of f)Hx(u,m),u=eg(u,m)}(e._query,t),new Cs(e.firestore,e.converter,eg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class _y extends yy{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new _y(e,t)}_apply(e){const t=function(a,l,u){if(a.startAt!==null)throw new me(ie.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new me(ie.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Vc(l,u)}(e._query,this._field,this._direction);return new Cs(e.firestore,e.converter,function(a,l){const u=a.explicitOrderBy.concat([l]);return new tl(a.path,a.collectionGroup,u,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(e._query,t))}}function Br(n,e="asc"){const t=e,i=ef("orderBy",n);return _y._create(i,t)}class by extends yy{constructor(e,t,i){super(),this.type=e,this._limit=t,this._limitType=i}static _create(e,t,i){return new by(e,t,i)}_apply(e){return new Cs(e.firestore,e.converter,gh(e._query,this._limit,this._limitType))}}function Ts(n){return F4("limit",n),by._create("limit",n,"F")}function CE(n,e,t){if(typeof(t=Lt(t))=="string"){if(t==="")throw new me(ie.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!UT(e)&&t.indexOf("/")!==-1)throw new me(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(lt.fromString(t));if(!Ee.isDocumentKey(i))throw new me(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return qb(n,new Ee(i))}if(t instanceof yn)return qb(n,t._key);throw new me(ie.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Kh(t)}.`)}function NE(n,e){if(!Array.isArray(n)||n.length===0)throw new me(ie.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Hx(n,e){const t=function(a,l){for(const u of a)for(const f of u.getFlattenedFilters())if(l.indexOf(f.op)>=0)return f.op;return null}(n.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new me(ie.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new me(ie.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class nP{convertValue(e,t="none"){switch(_s(e)){case 0:return null;case 1:return e.booleanValue;case 2:return wt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(vs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ae(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return As(e,(a,l)=>{i[a]=this.convertValue(l,t)}),i}convertVectorValue(e){var t,i,a;const l=(a=(i=(t=e.fields)===null||t===void 0?void 0:t[mh].arrayValue)===null||i===void 0?void 0:i.values)===null||a===void 0?void 0:a.map(u=>wt(u.doubleValue));return new dy(l)}convertGeoPoint(e){return new uy(wt(e.latitude),wt(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Uh(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(jc(e));default:return null}}convertTimestamp(e){const t=ys(e);return new kt(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=lt.fromString(e);Qe(ox(i),9688,{name:e});const a=new Mc(i.get(1),i.get(3)),l=new Ee(i.popFirst(5));return a.isEqual(t)||Ti(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gx(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class $x extends Fx{constructor(e,t,i,a,l,u){super(e,t,i,a,u),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Xd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(ef("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class Xd extends $x{data(e={}){return super.data(e)}}class rP{constructor(e,t,i,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new xc(a.hasPendingWrites,a.fromCache),this.query=i}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new Xd(this._firestore,this._userDataWriter,i.key,i,new xc(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new me(ie.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(a,l){if(a._snapshot.oldDocs.isEmpty()){let u=0;return a._snapshot.docChanges.map(f=>{const m=new Xd(a._firestore,a._userDataWriter,f.doc.key,f.doc,new xc(a._snapshot.mutatedKeys.has(f.doc.key),a._snapshot.fromCache),a.query.converter);return f.doc,{type:"added",doc:m,oldIndex:-1,newIndex:u++}})}{let u=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(f=>l||f.type!==3).map(f=>{const m=new Xd(a._firestore,a._userDataWriter,f.doc.key,f.doc,new xc(a._snapshot.mutatedKeys.has(f.doc.key),a._snapshot.fromCache),a.query.converter);let y=-1,v=-1;return f.type!==0&&(y=u.indexOf(f.doc.key),u=u.delete(f.doc.key)),f.type!==1&&(u=u.add(f.doc),v=u.indexOf(f.doc.key)),{type:iP(f.type),doc:m,oldIndex:y,newIndex:v}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function iP(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ae(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vn(n){n=ur(n,yn);const e=ur(n.firestore,Ia);return z4(cy(e),n._key).then(t=>oP(e,n,t))}class Yx extends nP{constructor(e){super(),this.firestore=e}convertBytes(e){return new Go(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new yn(this.firestore,null,t)}}function Ns(n){n=ur(n,Cs);const e=ur(n.firestore,Ia),t=cy(e),i=new Yx(e);return tP(n._query),B4(t,n._query).then(a=>new rP(e,i,n,a))}function Ey(n,e,t){n=ur(n,yn);const i=ur(n.firestore,Ia),a=Gx(n.converter,e,t);return nf(i,[Ux(Zh(i),"setDoc",n._key,a,n.converter!==null,t).toMutation(n._key,Zn.none())])}function Cn(n,e,t,...i){n=ur(n,yn);const a=ur(n.firestore,Ia),l=Zh(a);let u;return u=typeof(e=Lt(e))=="string"||e instanceof Wh?X4(l,"updateDoc",n._key,e,t,i):W4(l,"updateDoc",n._key,e),nf(a,[u.toMutation(n._key,Zn.exists(!0))])}function sP(n){return nf(ur(n.firestore,Ia),[new $g(n._key,Zn.none())])}function aP(n,e){const t=ur(n.firestore,Ia),i=ft(n),a=Gx(n.converter,e);return nf(t,[Ux(Zh(n.firestore),"addDoc",i._key,a,n.converter!==null,{}).toMutation(i._key,Zn.exists(!1))]).then(()=>i)}function nf(n,e){return function(i,a){const l=new vi;return i.asyncQueue.enqueueAndForget(async()=>N4(await U4(i),a,l)),l.promise}(cy(n),e)}function oP(n,e,t){const i=t.docs.get(e._key),a=new Yx(n);return new $x(n,a,e._key,i,new xc(t.hasPendingWrites,t.fromCache),e.converter)}function ct(){return new fy("serverTimestamp")}(function(e,t=!0){(function(a){Zo=a})(Wo),Vo(new ba("firestore",(i,{instanceIdentifier:a,options:l})=>{const u=i.getProvider("app").getImmediate(),f=new Ia(new XI(i.getProvider("auth-internal")),new eO(u,i.getProvider("app-check-internal")),function(y,v){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new me(ie.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Mc(y.options.projectId,v)}(u,a),u);return l=Object.assign({useFetchStreams:t},l),f._setSettings(l),f},"PUBLIC").setMultipleInstances(!0)),hs(Ib,Ob,e),hs(Ib,Ob,"esm2017")})();const lP={apiKey:"AIzaSyApEi7CgbADU0urEtkdRBheJubnyEA-qnw",authDomain:"acriventas-poc.firebaseapp.com",databaseURL:"https://acriventas-poc-default-rtdb.firebaseio.com",projectId:"acriventas-poc",storageBucket:"acriventas-poc.firebasestorage.app",messagingSenderId:"718850780341",appId:"1:718850780341:web:aec07ccdad37235dece2fc",measurementId:"G-0DGH1RQX2G"},Kx=R1(lP),rf=GI(Kx),He=G4(Kx),cP=async(n,e,t,i="agent")=>{try{const l=(await C2(rf,n,e)).user;return await I2(l,{displayName:t}),await Ey(ft(He,"users",l.uid),{uid:l.uid,email:n,displayName:t,role:i,createdAt:ct(),lastLogin:ct()}),l}catch(a){throw console.error("Error al registrar usuario:",a),a}},uP=async(n,e)=>{try{const t=await N2(rf,n,e);return await Ey(ft(He,"users",t.user.uid),{lastLogin:ct()},{merge:!0}),t.user}catch(t){throw console.error("Error al iniciar sesión:",t),t}},dP=async()=>j2(rf),hP=async n=>{try{const e=await vn(ft(He,"users",n));return e.exists()?e.data():null}catch(e){throw console.error("Error al obtener datos del usuario:",e),e}},Qx=V.createContext(),ru=()=>V.useContext(Qx),fP=({children:n})=>{const[e,t]=V.useState(null),[i,a]=V.useState(null),[l,u]=V.useState(!0);V.useEffect(()=>P2(rf,async y=>{if(t(y),y)try{const v=await hP(y.uid);a(v)}catch(v){console.error("Error al cargar detalles del usuario:",v)}else a(null);u(!1)}),[]);const f={currentUser:e,userDetails:i,isAdmin:(i==null?void 0:i.role)==="admin",isAgent:(i==null?void 0:i.role)==="agent",loading:l};return p.jsx(Qx.Provider,{value:f,children:!l&&n})},mP=()=>{const[n,e]=V.useState(""),[t,i]=V.useState(""),[a,l]=V.useState(""),[u,f]=V.useState(!1),m=_n(),y=async v=>{v.preventDefault();try{l(""),f(!0),await uP(n,t),m("/")}catch(E){l("Credenciales incorrectas. Intente nuevamente."),console.error(E)}finally{f(!1)}};return p.jsx("div",{className:"min-h-screen bg-gradient-to-b from-gray-800 to-gray-900 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:p.jsxs("div",{className:"max-w-md w-full space-y-8 bg-white p-10 rounded-xl shadow-2xl",children:[p.jsxs("div",{children:[p.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Sistema de Cobranza Adaptativa"}),p.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Inicie sesión para continuar"})]}),a&&p.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-md",role:"alert",children:p.jsx("span",{className:"block sm:inline",children:a})}),p.jsxs("form",{className:"mt-8 space-y-6",onSubmit:y,children:[p.jsxs("div",{className:"rounded-md space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{htmlFor:"email-address",className:"block text-sm font-medium text-gray-700",children:"Email"}),p.jsx("input",{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,className:"appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Correo electrónico",value:n,onChange:v=>e(v.target.value)})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Contraseña"}),p.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,className:"appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Contraseña",value:t,onChange:v=>i(v.target.value)})]})]}),p.jsx("div",{children:p.jsx("button",{type:"submit",disabled:u,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:u?"Iniciando sesión...":"Iniciar sesión"})}),p.jsx("div",{className:"text-center text-sm",children:p.jsx(Oh,{to:"/register",className:"font-medium text-primary-600 hover:text-primary-500",children:"¿No tiene cuenta? Regístrese aquí"})})]})]})})},pP=()=>{const[n,e]=V.useState({displayName:"",email:"",password:"",passwordConfirm:""}),[t,i]=V.useState(""),[a,l]=V.useState(!1),u=_n(),f=y=>{const{name:v,value:E}=y.target;e(x=>({...x,[v]:E}))},m=async y=>{if(y.preventDefault(),n.password!==n.passwordConfirm)return i("Las contraseñas no coinciden");if(n.password.length<6)return i("La contraseña debe tener al menos 6 caracteres");try{i(""),l(!0),await cP(n.email,n.password,n.displayName),u("/")}catch(v){console.error("Error al registrar:",v),i(v.code==="auth/email-already-in-use"?"Este correo ya está registrado":"Error al crear la cuenta. Intente nuevamente.")}finally{l(!1)}};return p.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:p.jsxs("div",{className:"max-w-md w-full space-y-8 bg-white p-10 rounded-lg shadow-md",children:[p.jsxs("div",{children:[p.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Crear nueva cuenta"}),p.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Complete el formulario para registrarse"})]}),t&&p.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:p.jsx("span",{className:"block sm:inline",children:t})}),p.jsxs("form",{className:"mt-8 space-y-6",onSubmit:m,children:[p.jsxs("div",{className:"rounded-md shadow-sm space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{htmlFor:"displayName",className:"sr-only",children:"Nombre completo"}),p.jsx("input",{id:"displayName",name:"displayName",type:"text",required:!0,className:"appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-primary-500 focus:border-primary-500 focus:z-10 sm:text-sm",placeholder:"Nombre completo",value:n.displayName,onChange:f})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"email-address",className:"sr-only",children:"Email"}),p.jsx("input",{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,className:"appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-primary-500 focus:border-primary-500 focus:z-10 sm:text-sm",placeholder:"Correo electrónico",value:n.email,onChange:f})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"password",className:"sr-only",children:"Contraseña"}),p.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"new-password",required:!0,className:"appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-primary-500 focus:border-primary-500 focus:z-10 sm:text-sm",placeholder:"Contraseña",value:n.password,onChange:f})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"passwordConfirm",className:"sr-only",children:"Confirmar contraseña"}),p.jsx("input",{id:"passwordConfirm",name:"passwordConfirm",type:"password",autoComplete:"new-password",required:!0,className:"appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-primary-500 focus:border-primary-500 focus:z-10 sm:text-sm",placeholder:"Confirmar contraseña",value:n.passwordConfirm,onChange:f})]})]}),p.jsx("div",{children:p.jsx("button",{type:"submit",disabled:a,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:a?"Creando cuenta...":"Registrarse"})}),p.jsx("div",{className:"text-center",children:p.jsx(Oh,{to:"/login",className:"text-sm text-primary-600 hover:text-primary-500",children:"¿Ya tiene una cuenta? Inicie sesión"})})]})]})})};var Wx={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},RE=ya.createContext&&ya.createContext(Wx),gP=["attr","size","title"];function yP(n,e){if(n==null)return{};var t=vP(n,e),i,a;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(n);for(a=0;a<l.length;a++)i=l[a],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}function vP(n,e){if(n==null)return{};var t={};for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)){if(e.indexOf(i)>=0)continue;t[i]=n[i]}return t}function xh(){return xh=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},xh.apply(this,arguments)}function IE(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),t.push.apply(t,i)}return t}function wh(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?IE(Object(t),!0).forEach(function(i){_P(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):IE(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function _P(n,e,t){return e=bP(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function bP(n){var e=EP(n,"string");return typeof e=="symbol"?e:e+""}function EP(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Xx(n){return n&&n.map((e,t)=>ya.createElement(e.tag,wh({key:t},e.attr),Xx(e.child)))}function Ci(n){return e=>ya.createElement(TP,xh({attr:wh({},n.attr)},e),Xx(n.child))}function TP(n){var e=t=>{var{attr:i,size:a,title:l}=n,u=yP(n,gP),f=a||t.size||"1em",m;return t.className&&(m=t.className),n.className&&(m=(m?m+" ":"")+n.className),ya.createElement("svg",xh({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,i,u,{className:m,style:wh(wh({color:n.color||t.color},t.style),n.style),height:f,width:f,xmlns:"http://www.w3.org/2000/svg"}),l&&ya.createElement("title",null,l),n.children)};return RE!==void 0?ya.createElement(RE.Consumer,null,t=>e(t)):e(Wx)}function xP(n){return Ci({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M496 384H64V80c0-8.84-7.16-16-16-16H16C7.16 64 0 71.16 0 80v336c0 17.67 14.33 32 32 32h464c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16zM464 96H345.94c-21.38 0-32.09 25.85-16.97 40.97l32.4 32.4L288 242.75l-73.37-73.37c-12.5-12.5-32.76-12.5-45.25 0l-68.69 68.69c-6.25 6.25-6.25 16.38 0 22.63l22.62 22.62c6.25 6.25 16.38 6.25 22.63 0L192 237.25l73.37 73.37c12.5 12.5 32.76 12.5 45.25 0l96-96 32.4 32.4c15.12 15.12 40.97 4.41 40.97-16.97V112c.01-8.84-7.15-16-15.99-16z"},child:[]}]})(n)}function wP(n){return Ci({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14-11.1-35.6-30-67.8-54.7-94.6-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7-36.7-8.2-74.3-7.8-109.2 0-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3-24.7 26.7-43.6 58.9-54.7 94.6-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14 11.1 35.6 30 67.8 54.7 94.6 3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7 36.7 8.2 74.3 7.8 109.2 0 5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3 24.7-26.7 43.6-58.9 54.7-94.6 1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z"},child:[]}]})(n)}function AP(n){return Ci({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M416 192c0-88.4-93.1-160-208-160S0 103.6 0 192c0 34.3 14.1 65.9 38 92-13.4 30.2-35.5 54.2-35.8 54.5-2.2 2.3-2.8 5.7-1.5 8.7S4.8 352 8 352c36.6 0 66.9-12.3 88.7-25 32.2 15.7 70.3 25 111.3 25 114.9 0 208-71.6 208-160zm122 220c23.9-26 38-57.7 38-92 0-66.9-53.5-124.2-129.3-148.1.9 6.6 1.3 13.3 1.3 20.1 0 105.9-107.7 192-240 192-10.8 0-21.3-.8-31.7-1.9C207.8 439.6 281.8 480 368 480c41 0 79.1-9.2 111.3-25 21.8 12.7 52.1 25 88.7 25 3.2 0 6.1-1.9 7.3-4.8 1.3-2.9.7-6.3-1.5-8.7-.3-.3-22.4-24.2-35.8-54.5z"},child:[]}]})(n)}function SP(n){return Ci({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"},child:[]}]})(n)}function Zx(n){return Ci({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(n)}function CP(n){return Ci({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M32,224H64V416H32A31.96166,31.96166,0,0,1,0,384V256A31.96166,31.96166,0,0,1,32,224Zm512-48V448a64.06328,64.06328,0,0,1-64,64H160a64.06328,64.06328,0,0,1-64-64V176a79.974,79.974,0,0,1,80-80H288V32a32,32,0,0,1,64,0V96H464A79.974,79.974,0,0,1,544,176ZM264,256a40,40,0,1,0-40,40A39.997,39.997,0,0,0,264,256Zm-8,128H192v32h64Zm96,0H288v32h64ZM456,256a40,40,0,1,0-40,40A39.997,39.997,0,0,0,456,256Zm-8,128H384v32h64ZM640,256V384a31.96166,31.96166,0,0,1-32,32H576V224h32A31.96166,31.96166,0,0,1,640,256Z"},child:[]}]})(n)}function Jx(n){return Ci({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"},child:[]}]})(n)}function NP(n){return Ci({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M192 256c61.9 0 112-50.1 112-112S253.9 32 192 32 80 82.1 80 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C51.6 288 0 339.6 0 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zM480 256c53 0 96-43 96-96s-43-96-96-96-96 43-96 96 43 96 96 96zm48 32h-3.8c-13.9 4.8-28.6 8-44.2 8s-30.3-3.2-44.2-8H432c-20.4 0-39.2 5.9-55.7 15.4 24.4 26.3 39.7 61.2 39.7 99.8v38.4c0 2.2-.5 4.3-.6 6.4H592c26.5 0 48-21.5 48-48 0-61.9-50.1-112-112-112z"},child:[]}]})(n)}function RP(n){return Ci({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M624 208h-64v-64c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v64h-64c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h64v64c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-64h64c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zm-400 48c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(n)}const IP=()=>{const n=_n();return p.jsxs("div",{className:"flex flex-wrap gap-4 mb-8",children:[p.jsxs("button",{onClick:()=>n("/conversation/new"),className:"btn-primary flex items-center gap-2",children:[p.jsx(Zx,{})," Iniciar Conversación"]}),p.jsxs("button",{onClick:()=>n("/clients/search"),className:"btn-secondary flex items-center gap-2",children:[p.jsx(Jx,{})," Buscar Cliente"]}),p.jsxs("button",{onClick:()=>n("/clients/new"),className:"btn-secondary flex items-center gap-2",children:[p.jsx(RP,{})," Agregar Cliente"]})]})},ew=6048e5,OP=864e5,Ud=43200,OE=1440,DE=Symbol.for("constructDateFrom");function wi(n,e){return typeof n=="function"?n(e):n&&typeof n=="object"&&DE in n?n[DE](e):n instanceof Date?new n.constructor(e):new Date(e)}function Yt(n,e){return wi(e||n,n)}let DP={};function iu(){return DP}function Bc(n,e){var f,m,y,v;const t=iu(),i=(e==null?void 0:e.weekStartsOn)??((m=(f=e==null?void 0:e.locale)==null?void 0:f.options)==null?void 0:m.weekStartsOn)??t.weekStartsOn??((v=(y=t.locale)==null?void 0:y.options)==null?void 0:v.weekStartsOn)??0,a=Yt(n,e==null?void 0:e.in),l=a.getDay(),u=(l<i?7:0)+l-i;return a.setDate(a.getDate()-u),a.setHours(0,0,0,0),a}function Ah(n,e){return Bc(n,{...e,weekStartsOn:1})}function tw(n,e){const t=Yt(n,e==null?void 0:e.in),i=t.getFullYear(),a=wi(t,0);a.setFullYear(i+1,0,4),a.setHours(0,0,0,0);const l=Ah(a),u=wi(t,0);u.setFullYear(i,0,4),u.setHours(0,0,0,0);const f=Ah(u);return t.getTime()>=l.getTime()?i+1:t.getTime()>=f.getTime()?i:i-1}function Sh(n){const e=Yt(n),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+n-+t}function sf(n,...e){const t=wi.bind(null,n||e.find(i=>typeof i=="object"));return e.map(t)}function PE(n,e){const t=Yt(n,e==null?void 0:e.in);return t.setHours(0,0,0,0),t}function PP(n,e,t){const[i,a]=sf(t==null?void 0:t.in,n,e),l=PE(i),u=PE(a),f=+l-Sh(l),m=+u-Sh(u);return Math.round((f-m)/OP)}function jP(n,e){const t=tw(n,e),i=wi(n,0);return i.setFullYear(t,0,4),i.setHours(0,0,0,0),Ah(i)}function Zd(n,e){const t=+Yt(n)-+Yt(e);return t<0?-1:t>0?1:t}function MP(n){return wi(n,Date.now())}function kP(n){return n instanceof Date||typeof n=="object"&&Object.prototype.toString.call(n)==="[object Date]"}function VP(n){return!(!kP(n)&&typeof n!="number"||isNaN(+Yt(n)))}function LP(n,e,t){const[i,a]=sf(t==null?void 0:t.in,n,e),l=i.getFullYear()-a.getFullYear(),u=i.getMonth()-a.getMonth();return l*12+u}function UP(n){return e=>{const i=(n?Math[n]:Math.trunc)(e);return i===0?0:i}}function zP(n,e){return+Yt(n)-+Yt(e)}function BP(n,e){const t=Yt(n,e==null?void 0:e.in);return t.setHours(23,59,59,999),t}function qP(n,e){const t=Yt(n,e==null?void 0:e.in),i=t.getMonth();return t.setFullYear(t.getFullYear(),i+1,0),t.setHours(23,59,59,999),t}function FP(n,e){const t=Yt(n,e==null?void 0:e.in);return+BP(t,e)==+qP(t,e)}function HP(n,e,t){const[i,a,l]=sf(t==null?void 0:t.in,n,n,e),u=Zd(a,l),f=Math.abs(LP(a,l));if(f<1)return 0;a.getMonth()===1&&a.getDate()>27&&a.setDate(30),a.setMonth(a.getMonth()-u*f);let m=Zd(a,l)===-u;FP(i)&&f===1&&Zd(i,l)===1&&(m=!1);const y=u*(f-+m);return y===0?0:y}function GP(n,e,t){const i=zP(n,e)/1e3;return UP(t==null?void 0:t.roundingMethod)(i)}function $P(n,e){const t=Yt(n,e==null?void 0:e.in);return t.setFullYear(t.getFullYear(),0,1),t.setHours(0,0,0,0),t}const YP={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},KP=(n,e,t)=>{let i;const a=YP[n];return typeof a=="string"?i=a:e===1?i=a.one:i=a.other.replace("{{count}}",e.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+i:i+" ago":i};function Mo(n){return(e={})=>{const t=e.width?String(e.width):n.defaultWidth;return n.formats[t]||n.formats[n.defaultWidth]}}const QP={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},WP={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},XP={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},ZP={date:Mo({formats:QP,defaultWidth:"full"}),time:Mo({formats:WP,defaultWidth:"full"}),dateTime:Mo({formats:XP,defaultWidth:"full"})},JP={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},e6=(n,e,t,i)=>JP[n];function Pr(n){return(e,t)=>{const i=t!=null&&t.context?String(t.context):"standalone";let a;if(i==="formatting"&&n.formattingValues){const u=n.defaultFormattingWidth||n.defaultWidth,f=t!=null&&t.width?String(t.width):u;a=n.formattingValues[f]||n.formattingValues[u]}else{const u=n.defaultWidth,f=t!=null&&t.width?String(t.width):n.defaultWidth;a=n.values[f]||n.values[u]}const l=n.argumentCallback?n.argumentCallback(e):e;return a[l]}}const t6={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},n6={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},r6={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},i6={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},s6={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},a6={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},o6=(n,e)=>{const t=Number(n),i=t%100;if(i>20||i<10)switch(i%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},l6={ordinalNumber:o6,era:Pr({values:t6,defaultWidth:"wide"}),quarter:Pr({values:n6,defaultWidth:"wide",argumentCallback:n=>n-1}),month:Pr({values:r6,defaultWidth:"wide"}),day:Pr({values:i6,defaultWidth:"wide"}),dayPeriod:Pr({values:s6,defaultWidth:"wide",formattingValues:a6,defaultFormattingWidth:"wide"})};function jr(n){return(e,t={})=>{const i=t.width,a=i&&n.matchPatterns[i]||n.matchPatterns[n.defaultMatchWidth],l=e.match(a);if(!l)return null;const u=l[0],f=i&&n.parsePatterns[i]||n.parsePatterns[n.defaultParseWidth],m=Array.isArray(f)?u6(f,E=>E.test(u)):c6(f,E=>E.test(u));let y;y=n.valueCallback?n.valueCallback(m):m,y=t.valueCallback?t.valueCallback(y):y;const v=e.slice(u.length);return{value:y,rest:v}}}function c6(n,e){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&e(n[t]))return t}function u6(n,e){for(let t=0;t<n.length;t++)if(e(n[t]))return t}function nw(n){return(e,t={})=>{const i=e.match(n.matchPattern);if(!i)return null;const a=i[0],l=e.match(n.parsePattern);if(!l)return null;let u=n.valueCallback?n.valueCallback(l[0]):l[0];u=t.valueCallback?t.valueCallback(u):u;const f=e.slice(a.length);return{value:u,rest:f}}}const d6=/^(\d+)(th|st|nd|rd)?/i,h6=/\d+/i,f6={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},m6={any:[/^b/i,/^(a|c)/i]},p6={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},g6={any:[/1/i,/2/i,/3/i,/4/i]},y6={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},v6={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},_6={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},b6={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},E6={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},T6={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},x6={ordinalNumber:nw({matchPattern:d6,parsePattern:h6,valueCallback:n=>parseInt(n,10)}),era:jr({matchPatterns:f6,defaultMatchWidth:"wide",parsePatterns:m6,defaultParseWidth:"any"}),quarter:jr({matchPatterns:p6,defaultMatchWidth:"wide",parsePatterns:g6,defaultParseWidth:"any",valueCallback:n=>n+1}),month:jr({matchPatterns:y6,defaultMatchWidth:"wide",parsePatterns:v6,defaultParseWidth:"any"}),day:jr({matchPatterns:_6,defaultMatchWidth:"wide",parsePatterns:b6,defaultParseWidth:"any"}),dayPeriod:jr({matchPatterns:E6,defaultMatchWidth:"any",parsePatterns:T6,defaultParseWidth:"any"})},rw={code:"en-US",formatDistance:KP,formatLong:ZP,formatRelative:e6,localize:l6,match:x6,options:{weekStartsOn:0,firstWeekContainsDate:1}};function w6(n,e){const t=Yt(n,e==null?void 0:e.in);return PP(t,$P(t))+1}function A6(n,e){const t=Yt(n,e==null?void 0:e.in),i=+Ah(t)-+jP(t);return Math.round(i/ew)+1}function iw(n,e){var v,E,x,C;const t=Yt(n,e==null?void 0:e.in),i=t.getFullYear(),a=iu(),l=(e==null?void 0:e.firstWeekContainsDate)??((E=(v=e==null?void 0:e.locale)==null?void 0:v.options)==null?void 0:E.firstWeekContainsDate)??a.firstWeekContainsDate??((C=(x=a.locale)==null?void 0:x.options)==null?void 0:C.firstWeekContainsDate)??1,u=wi((e==null?void 0:e.in)||n,0);u.setFullYear(i+1,0,l),u.setHours(0,0,0,0);const f=Bc(u,e),m=wi((e==null?void 0:e.in)||n,0);m.setFullYear(i,0,l),m.setHours(0,0,0,0);const y=Bc(m,e);return+t>=+f?i+1:+t>=+y?i:i-1}function S6(n,e){var f,m,y,v;const t=iu(),i=(e==null?void 0:e.firstWeekContainsDate)??((m=(f=e==null?void 0:e.locale)==null?void 0:f.options)==null?void 0:m.firstWeekContainsDate)??t.firstWeekContainsDate??((v=(y=t.locale)==null?void 0:y.options)==null?void 0:v.firstWeekContainsDate)??1,a=iw(n,e),l=wi((e==null?void 0:e.in)||n,0);return l.setFullYear(a,0,i),l.setHours(0,0,0,0),Bc(l,e)}function C6(n,e){const t=Yt(n,e==null?void 0:e.in),i=+Bc(t,e)-+S6(t,e);return Math.round(i/ew)+1}function Je(n,e){const t=n<0?"-":"",i=Math.abs(n).toString().padStart(e,"0");return t+i}const is={y(n,e){const t=n.getFullYear(),i=t>0?t:1-t;return Je(e==="yy"?i%100:i,e.length)},M(n,e){const t=n.getMonth();return e==="M"?String(t+1):Je(t+1,2)},d(n,e){return Je(n.getDate(),e.length)},a(n,e){const t=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(n,e){return Je(n.getHours()%12||12,e.length)},H(n,e){return Je(n.getHours(),e.length)},m(n,e){return Je(n.getMinutes(),e.length)},s(n,e){return Je(n.getSeconds(),e.length)},S(n,e){const t=e.length,i=n.getMilliseconds(),a=Math.trunc(i*Math.pow(10,t-3));return Je(a,e.length)}},wo={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},jE={G:function(n,e,t){const i=n.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(i,{width:"abbreviated"});case"GGGGG":return t.era(i,{width:"narrow"});case"GGGG":default:return t.era(i,{width:"wide"})}},y:function(n,e,t){if(e==="yo"){const i=n.getFullYear(),a=i>0?i:1-i;return t.ordinalNumber(a,{unit:"year"})}return is.y(n,e)},Y:function(n,e,t,i){const a=iw(n,i),l=a>0?a:1-a;if(e==="YY"){const u=l%100;return Je(u,2)}return e==="Yo"?t.ordinalNumber(l,{unit:"year"}):Je(l,e.length)},R:function(n,e){const t=tw(n);return Je(t,e.length)},u:function(n,e){const t=n.getFullYear();return Je(t,e.length)},Q:function(n,e,t){const i=Math.ceil((n.getMonth()+1)/3);switch(e){case"Q":return String(i);case"QQ":return Je(i,2);case"Qo":return t.ordinalNumber(i,{unit:"quarter"});case"QQQ":return t.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(i,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(i,{width:"wide",context:"formatting"})}},q:function(n,e,t){const i=Math.ceil((n.getMonth()+1)/3);switch(e){case"q":return String(i);case"qq":return Je(i,2);case"qo":return t.ordinalNumber(i,{unit:"quarter"});case"qqq":return t.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(i,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(i,{width:"wide",context:"standalone"})}},M:function(n,e,t){const i=n.getMonth();switch(e){case"M":case"MM":return is.M(n,e);case"Mo":return t.ordinalNumber(i+1,{unit:"month"});case"MMM":return t.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(i,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(i,{width:"wide",context:"formatting"})}},L:function(n,e,t){const i=n.getMonth();switch(e){case"L":return String(i+1);case"LL":return Je(i+1,2);case"Lo":return t.ordinalNumber(i+1,{unit:"month"});case"LLL":return t.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(i,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(i,{width:"wide",context:"standalone"})}},w:function(n,e,t,i){const a=C6(n,i);return e==="wo"?t.ordinalNumber(a,{unit:"week"}):Je(a,e.length)},I:function(n,e,t){const i=A6(n);return e==="Io"?t.ordinalNumber(i,{unit:"week"}):Je(i,e.length)},d:function(n,e,t){return e==="do"?t.ordinalNumber(n.getDate(),{unit:"date"}):is.d(n,e)},D:function(n,e,t){const i=w6(n);return e==="Do"?t.ordinalNumber(i,{unit:"dayOfYear"}):Je(i,e.length)},E:function(n,e,t){const i=n.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(i,{width:"short",context:"formatting"});case"EEEE":default:return t.day(i,{width:"wide",context:"formatting"})}},e:function(n,e,t,i){const a=n.getDay(),l=(a-i.weekStartsOn+8)%7||7;switch(e){case"e":return String(l);case"ee":return Je(l,2);case"eo":return t.ordinalNumber(l,{unit:"day"});case"eee":return t.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(a,{width:"short",context:"formatting"});case"eeee":default:return t.day(a,{width:"wide",context:"formatting"})}},c:function(n,e,t,i){const a=n.getDay(),l=(a-i.weekStartsOn+8)%7||7;switch(e){case"c":return String(l);case"cc":return Je(l,e.length);case"co":return t.ordinalNumber(l,{unit:"day"});case"ccc":return t.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(a,{width:"narrow",context:"standalone"});case"cccccc":return t.day(a,{width:"short",context:"standalone"});case"cccc":default:return t.day(a,{width:"wide",context:"standalone"})}},i:function(n,e,t){const i=n.getDay(),a=i===0?7:i;switch(e){case"i":return String(a);case"ii":return Je(a,e.length);case"io":return t.ordinalNumber(a,{unit:"day"});case"iii":return t.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(i,{width:"short",context:"formatting"});case"iiii":default:return t.day(i,{width:"wide",context:"formatting"})}},a:function(n,e,t){const a=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(n,e,t){const i=n.getHours();let a;switch(i===12?a=wo.noon:i===0?a=wo.midnight:a=i/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(n,e,t){const i=n.getHours();let a;switch(i>=17?a=wo.evening:i>=12?a=wo.afternoon:i>=4?a=wo.morning:a=wo.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(n,e,t){if(e==="ho"){let i=n.getHours()%12;return i===0&&(i=12),t.ordinalNumber(i,{unit:"hour"})}return is.h(n,e)},H:function(n,e,t){return e==="Ho"?t.ordinalNumber(n.getHours(),{unit:"hour"}):is.H(n,e)},K:function(n,e,t){const i=n.getHours()%12;return e==="Ko"?t.ordinalNumber(i,{unit:"hour"}):Je(i,e.length)},k:function(n,e,t){let i=n.getHours();return i===0&&(i=24),e==="ko"?t.ordinalNumber(i,{unit:"hour"}):Je(i,e.length)},m:function(n,e,t){return e==="mo"?t.ordinalNumber(n.getMinutes(),{unit:"minute"}):is.m(n,e)},s:function(n,e,t){return e==="so"?t.ordinalNumber(n.getSeconds(),{unit:"second"}):is.s(n,e)},S:function(n,e){return is.S(n,e)},X:function(n,e,t){const i=n.getTimezoneOffset();if(i===0)return"Z";switch(e){case"X":return kE(i);case"XXXX":case"XX":return ma(i);case"XXXXX":case"XXX":default:return ma(i,":")}},x:function(n,e,t){const i=n.getTimezoneOffset();switch(e){case"x":return kE(i);case"xxxx":case"xx":return ma(i);case"xxxxx":case"xxx":default:return ma(i,":")}},O:function(n,e,t){const i=n.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+ME(i,":");case"OOOO":default:return"GMT"+ma(i,":")}},z:function(n,e,t){const i=n.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+ME(i,":");case"zzzz":default:return"GMT"+ma(i,":")}},t:function(n,e,t){const i=Math.trunc(+n/1e3);return Je(i,e.length)},T:function(n,e,t){return Je(+n,e.length)}};function ME(n,e=""){const t=n>0?"-":"+",i=Math.abs(n),a=Math.trunc(i/60),l=i%60;return l===0?t+String(a):t+String(a)+e+Je(l,2)}function kE(n,e){return n%60===0?(n>0?"-":"+")+Je(Math.abs(n)/60,2):ma(n,e)}function ma(n,e=""){const t=n>0?"-":"+",i=Math.abs(n),a=Je(Math.trunc(i/60),2),l=Je(i%60,2);return t+a+e+l}const VE=(n,e)=>{switch(n){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},sw=(n,e)=>{switch(n){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},N6=(n,e)=>{const t=n.match(/(P+)(p+)?/)||[],i=t[1],a=t[2];if(!a)return VE(n,e);let l;switch(i){case"P":l=e.dateTime({width:"short"});break;case"PP":l=e.dateTime({width:"medium"});break;case"PPP":l=e.dateTime({width:"long"});break;case"PPPP":default:l=e.dateTime({width:"full"});break}return l.replace("{{date}}",VE(i,e)).replace("{{time}}",sw(a,e))},R6={p:sw,P:N6},I6=/^D+$/,O6=/^Y+$/,D6=["D","DD","YY","YYYY"];function P6(n){return I6.test(n)}function j6(n){return O6.test(n)}function M6(n,e,t){const i=k6(n,e,t);if(console.warn(i),D6.includes(n))throw new RangeError(i)}function k6(n,e,t){const i=n[0]==="Y"?"years":"days of the month";return`Use \`${n.toLowerCase()}\` instead of \`${n}\` (in \`${e}\`) for formatting ${i} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const V6=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,L6=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,U6=/^'([^]*?)'?$/,z6=/''/g,B6=/[a-zA-Z]/;function ko(n,e,t){var v,E,x,C,A,k,O,$;const i=iu(),a=(t==null?void 0:t.locale)??i.locale??rw,l=(t==null?void 0:t.firstWeekContainsDate)??((E=(v=t==null?void 0:t.locale)==null?void 0:v.options)==null?void 0:E.firstWeekContainsDate)??i.firstWeekContainsDate??((C=(x=i.locale)==null?void 0:x.options)==null?void 0:C.firstWeekContainsDate)??1,u=(t==null?void 0:t.weekStartsOn)??((k=(A=t==null?void 0:t.locale)==null?void 0:A.options)==null?void 0:k.weekStartsOn)??i.weekStartsOn??(($=(O=i.locale)==null?void 0:O.options)==null?void 0:$.weekStartsOn)??0,f=Yt(n,t==null?void 0:t.in);if(!VP(f))throw new RangeError("Invalid time value");let m=e.match(L6).map(K=>{const z=K[0];if(z==="p"||z==="P"){const ce=R6[z];return ce(K,a.formatLong)}return K}).join("").match(V6).map(K=>{if(K==="''")return{isToken:!1,value:"'"};const z=K[0];if(z==="'")return{isToken:!1,value:q6(K)};if(jE[z])return{isToken:!0,value:K};if(z.match(B6))throw new RangeError("Format string contains an unescaped latin alphabet character `"+z+"`");return{isToken:!1,value:K}});a.localize.preprocessor&&(m=a.localize.preprocessor(f,m));const y={firstWeekContainsDate:l,weekStartsOn:u,locale:a};return m.map(K=>{if(!K.isToken)return K.value;const z=K.value;(!(t!=null&&t.useAdditionalWeekYearTokens)&&j6(z)||!(t!=null&&t.useAdditionalDayOfYearTokens)&&P6(z))&&M6(z,e,String(n));const ce=jE[z[0]];return ce(f,z,a.localize,y)}).join("")}function q6(n){const e=n.match(U6);return e?e[1].replace(z6,"'"):n}function F6(n,e,t){const i=iu(),a=(t==null?void 0:t.locale)??i.locale??rw,l=2520,u=Zd(n,e);if(isNaN(u))throw new RangeError("Invalid time value");const f=Object.assign({},t,{addSuffix:t==null?void 0:t.addSuffix,comparison:u}),[m,y]=sf(t==null?void 0:t.in,...u>0?[e,n]:[n,e]),v=GP(y,m),E=(Sh(y)-Sh(m))/1e3,x=Math.round((v-E)/60);let C;if(x<2)return t!=null&&t.includeSeconds?v<5?a.formatDistance("lessThanXSeconds",5,f):v<10?a.formatDistance("lessThanXSeconds",10,f):v<20?a.formatDistance("lessThanXSeconds",20,f):v<40?a.formatDistance("halfAMinute",0,f):v<60?a.formatDistance("lessThanXMinutes",1,f):a.formatDistance("xMinutes",1,f):x===0?a.formatDistance("lessThanXMinutes",1,f):a.formatDistance("xMinutes",x,f);if(x<45)return a.formatDistance("xMinutes",x,f);if(x<90)return a.formatDistance("aboutXHours",1,f);if(x<OE){const A=Math.round(x/60);return a.formatDistance("aboutXHours",A,f)}else{if(x<l)return a.formatDistance("xDays",1,f);if(x<Ud){const A=Math.round(x/OE);return a.formatDistance("xDays",A,f)}else if(x<Ud*2)return C=Math.round(x/Ud),a.formatDistance("aboutXMonths",C,f)}if(C=HP(y,m),C<12){const A=Math.round(x/Ud);return a.formatDistance("xMonths",A,f)}else{const A=C%12,k=Math.trunc(C/12);return A<3?a.formatDistance("aboutXYears",k,f):A<9?a.formatDistance("overXYears",k,f):a.formatDistance("almostXYears",k+1,f)}}function LE(n,e){return F6(n,MP(n),e)}const H6={lessThanXSeconds:{one:"menos de un segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"medio minuto",lessThanXMinutes:{one:"menos de un minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"alrededor de 1 hora",other:"alrededor de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 día",other:"{{count}} días"},aboutXWeeks:{one:"alrededor de 1 semana",other:"alrededor de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"alrededor de 1 mes",other:"alrededor de {{count}} meses"},xMonths:{one:"1 mes",other:"{{count}} meses"},aboutXYears:{one:"alrededor de 1 año",other:"alrededor de {{count}} años"},xYears:{one:"1 año",other:"{{count}} años"},overXYears:{one:"más de 1 año",other:"más de {{count}} años"},almostXYears:{one:"casi 1 año",other:"casi {{count}} años"}},G6=(n,e,t)=>{let i;const a=H6[n];return typeof a=="string"?i=a:e===1?i=a.one:i=a.other.replace("{{count}}",e.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"en "+i:"hace "+i:i},$6={full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/y"},Y6={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},K6={full:"{{date}} 'a las' {{time}}",long:"{{date}} 'a las' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Q6={date:Mo({formats:$6,defaultWidth:"full"}),time:Mo({formats:Y6,defaultWidth:"full"}),dateTime:Mo({formats:K6,defaultWidth:"full"})},W6={lastWeek:"'el' eeee 'pasado a la' p",yesterday:"'ayer a la' p",today:"'hoy a la' p",tomorrow:"'mañana a la' p",nextWeek:"eeee 'a la' p",other:"P"},X6={lastWeek:"'el' eeee 'pasado a las' p",yesterday:"'ayer a las' p",today:"'hoy a las' p",tomorrow:"'mañana a las' p",nextWeek:"eeee 'a las' p",other:"P"},Z6=(n,e,t,i)=>e.getHours()!==1?X6[n]:W6[n],J6={narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","después de cristo"]},ej={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1º trimestre","2º trimestre","3º trimestre","4º trimestre"]},tj={narrow:["e","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],wide:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]},nj={narrow:["d","l","m","m","j","v","s"],short:["do","lu","ma","mi","ju","vi","sá"],abbreviated:["dom","lun","mar","mié","jue","vie","sáb"],wide:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"]},rj={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"}},ij={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"}},sj=(n,e)=>Number(n)+"º",aj={ordinalNumber:sj,era:Pr({values:J6,defaultWidth:"wide"}),quarter:Pr({values:ej,defaultWidth:"wide",argumentCallback:n=>Number(n)-1}),month:Pr({values:tj,defaultWidth:"wide"}),day:Pr({values:nj,defaultWidth:"wide"}),dayPeriod:Pr({values:rj,defaultWidth:"wide",formattingValues:ij,defaultFormattingWidth:"wide"})},oj=/^(\d+)(º)?/i,lj=/\d+/i,cj={narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|a\.?\s?e\.?\s?c\.?|d\.?\s?c\.?|e\.?\s?c\.?)/i,wide:/^(antes de cristo|antes de la era com[uú]n|despu[eé]s de cristo|era com[uú]n)/i},uj={any:[/^ac/i,/^dc/i],wide:[/^(antes de cristo|antes de la era com[uú]n)/i,/^(despu[eé]s de cristo|era com[uú]n)/i]},dj={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234](º)? trimestre/i},hj={any:[/1/i,/2/i,/3/i,/4/i]},fj={narrow:/^[efmajsond]/i,abbreviated:/^(ene|feb|mar|abr|may|jun|jul|ago|sep|oct|nov|dic)/i,wide:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i},mj={narrow:[/^e/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^en/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i]},pj={narrow:/^[dlmjvs]/i,short:/^(do|lu|ma|mi|ju|vi|s[áa])/i,abbreviated:/^(dom|lun|mar|mi[ée]|jue|vie|s[áa]b)/i,wide:/^(domingo|lunes|martes|mi[ée]rcoles|jueves|viernes|s[áa]bado)/i},gj={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^do/i,/^lu/i,/^ma/i,/^mi/i,/^ju/i,/^vi/i,/^sa/i]},yj={narrow:/^(a|p|mn|md|(de la|a las) (mañana|tarde|noche))/i,any:/^([ap]\.?\s?m\.?|medianoche|mediodia|(de la|a las) (mañana|tarde|noche))/i},vj={any:{am:/^a/i,pm:/^p/i,midnight:/^mn/i,noon:/^md/i,morning:/mañana/i,afternoon:/tarde/i,evening:/tarde/i,night:/noche/i}},_j={ordinalNumber:nw({matchPattern:oj,parsePattern:lj,valueCallback:function(n){return parseInt(n,10)}}),era:jr({matchPatterns:cj,defaultMatchWidth:"wide",parsePatterns:uj,defaultParseWidth:"any"}),quarter:jr({matchPatterns:dj,defaultMatchWidth:"wide",parsePatterns:hj,defaultParseWidth:"any",valueCallback:n=>n+1}),month:jr({matchPatterns:fj,defaultMatchWidth:"wide",parsePatterns:mj,defaultParseWidth:"any"}),day:jr({matchPatterns:pj,defaultMatchWidth:"wide",parsePatterns:gj,defaultParseWidth:"any"}),dayPeriod:jr({matchPatterns:yj,defaultMatchWidth:"any",parsePatterns:vj,defaultParseWidth:"any"})},ps={code:"es",formatDistance:G6,formatLong:Q6,formatRelative:Z6,localize:aj,match:_j,options:{weekStartsOn:1,firstWeekContainsDate:1}},Jt=[];for(let n=0;n<256;++n)Jt.push((n+256).toString(16).slice(1));function bj(n,e=0){return(Jt[n[e+0]]+Jt[n[e+1]]+Jt[n[e+2]]+Jt[n[e+3]]+"-"+Jt[n[e+4]]+Jt[n[e+5]]+"-"+Jt[n[e+6]]+Jt[n[e+7]]+"-"+Jt[n[e+8]]+Jt[n[e+9]]+"-"+Jt[n[e+10]]+Jt[n[e+11]]+Jt[n[e+12]]+Jt[n[e+13]]+Jt[n[e+14]]+Jt[n[e+15]]).toLowerCase()}let Dp;const Ej=new Uint8Array(16);function Tj(){if(!Dp){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Dp=crypto.getRandomValues.bind(crypto)}return Dp(Ej)}const xj=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),UE={randomUUID:xj};function Ty(n,e,t){var a;if(UE.randomUUID&&!n)return UE.randomUUID();n=n||{};const i=n.random??((a=n.rng)==null?void 0:a.call(n))??Tj();if(i.length<16)throw new Error("Random bytes length must be >= 16");return i[6]=i[6]&15|64,i[8]=i[8]&63|128,bj(i)}const aw=dr(He,"clients"),wj=async n=>{const e=Ty(),t=ft(He,"clients",e),i={relationship:n.relationship||50,history:n.history||50,attitude:n.attitude||50,sensitivity:n.sensitivity||50,probability:n.probability||50};return await Ey(t,{id:e,name:n.name,email:n.email||"",phone:n.phone||"",debt:Number(n.debt)||0,createdAt:ct(),updatedAt:ct(),soul:i,status:"active",tags:n.tags||[],notes:n.notes||"",lastContact:null,paymentHistory:[]}),e},ow=async n=>{const e=await vn(ft(He,"clients",n));return e.exists()?{id:e.id,...e.data()}:null},su=async()=>(await Ns(zr(aw,Br("name","asc")))).docs.map(e=>({id:e.id,...e.data()})),Aj=async n=>{if(!n||n.trim()==="")return su();const e=n.toLowerCase().trim();return(await Ns(aw)).docs.map(a=>({id:a.id,...a.data()})).filter(a=>a.name.toLowerCase().includes(e)||a.email&&a.email.toLowerCase().includes(e)||a.phone&&a.phone.includes(e))},Sj=async(n,e)=>{const t=ft(He,"clients",n);if(!(await vn(t)).exists())throw new Error("Cliente no encontrado");return delete e.id,delete e.createdAt,await Cn(t,{...e,updatedAt:ct()}),n},Cj=async(n,e,t=null)=>{const i=ft(He,"clients",n),a=await vn(i);if(!a.exists())throw new Error("Cliente no encontrado");const l=a.data(),u={debt:Number(e),updatedAt:ct()};return t&&(u.paymentHistory=[...l.paymentHistory||[],{date:ct(),amount:t.amount,type:t.type||"payment",notes:t.notes||""}]),await Cn(i,u),n},Nj=async n=>{const e=ft(He,"clients",n);await Cn(e,{lastContact:ct(),updatedAt:ct()})},Ne={GREETING:"greeting",DEBT_NOTIFICATION:"debt_notification",NEGOTIATION:"negotiation",PAYMENT_CONFIRMATION:"payment_confirmation",FAREWELL:"farewell"},$t={NEW:"new",ACTIVE:"active",INACTIVE:"inactive",CLOSED:"closed"},Rj={neutral:{relationship:0,history:0,attitude:0,sensitivity:0,probability:0},accepts_payment:{relationship:5,history:10,attitude:10,sensitivity:-5,probability:20},offers_partial:{relationship:5,history:5,attitude:10,sensitivity:-5,probability:15},reschedule:{relationship:2,history:-5,attitude:5,sensitivity:0,probability:-5},evades:{relationship:-5,history:-5,attitude:-10,sensitivity:5,probability:-10},annoyed:{relationship:-10,history:-5,attitude:-15,sensitivity:10,probability:-15},refuses:{relationship:-20,history:-20,attitude:-20,sensitivity:20,probability:-30},thanks:{relationship:5,history:0,attitude:10,sensitivity:-5,probability:10},no_answer:{relationship:-5,history:-10,attitude:-5,sensitivity:0,probability:-10},confirms_payment:{relationship:10,history:20,attitude:20,sensitivity:-10,probability:30}},Ij=async(n,e,t)=>{const i=ft(He,"clients",n),a=await vn(i);if(!a.exists())throw new Error("Cliente no encontrado");const l=a.data();await Nj(n);const u={clientId:n,clientName:l.name,agentId:e,startedAt:ct(),updatedAt:ct(),status:$t.NEW,isActive:!0,initialSoul:t||l.soul,currentSoul:t||l.soul,turns:[],nextActionDate:null,summary:null};return(await aP(dr(He,"conversations"),u)).id},zE=async(n,e)=>{const t=ft(He,"conversations",n),i=await vn(t);if(!i.exists())throw new Error("Conversación no encontrada");const a=i.data();let l={...a.currentSoul},u={relationship:0,history:0,attitude:0,sensitivity:0,probability:0};if(e.event&&e.event!=="neutral"){u=Rj[e.event]||u;const E=x=>Math.min(Math.max(x,0),100);l={relationship:E(l.relationship+(u.relationship||0)),history:E(l.history+(u.history||0)),attitude:E(l.attitude+(u.attitude||0)),sensitivity:E(l.sensitivity+(u.sensitivity||0)),probability:E(l.probability+(u.probability||0))}}const f=new Date,m={id:Ty(),timestamp:f,timestampMillis:f.getTime(),...e,phase:e.phase||Ne.NEGOTIATION,deltas:u,currentSoul:l},y=[...a.turns,m],v=a.status===$t.NEW?$t.ACTIVE:a.status;if(await Cn(t,{turns:y,currentSoul:l,status:v,isActive:!0,updatedAt:ct()}),e.sender==="client"&&e.event!=="neutral"){const E=ft(He,"clients",a.clientId);await Cn(E,{soul:l,updatedAt:ct()})}return{turns:y,currentSoul:l}},Ao=async n=>{const e=await vn(ft(He,"conversations",n));if(!e.exists())return null;const t={id:e.id,...e.data()};if(t.clientId)try{const i=await vn(ft(He,"clients",t.clientId));i.exists()&&(t.client={id:i.id,...i.data()})}catch(i){console.error("Error al cargar datos del cliente:",i)}return t},xy=async(n,e=5)=>{const t=zr(dr(He,"conversations"),Gt("clientId","==",n),Br("startedAt","desc"),Ts(e));return(await Ns(t)).docs.map(a=>({id:a.id,...a.data()}))},Oj=async(n,e)=>{const t=ft(He,"conversations",n),i=await vn(t);if(!i.exists())throw new Error("Conversación no encontrada");const a=i.data();if(await Cn(t,{status:$t.CLOSED,isActive:!1,closedAt:ct(),updatedAt:ct(),summary:{...e,createdAt:ct()}}),a.clientId){const l=ft(He,"clients",a.clientId);await Cn(l,{soul:a.currentSoul,updatedAt:ct()})}return n},Dj=async(n=null,e=10)=>{let t;return n?t=zr(dr(He,"conversations"),Gt("status","==",$t.NEW),Gt("agentId","==",n),Br("startedAt","desc"),Ts(e)):t=zr(dr(He,"conversations"),Gt("status","==",$t.NEW),Br("startedAt","desc"),Ts(e)),(await Ns(t)).docs.map(a=>({id:a.id,...a.data()}))},lw=async(n=null,e=10)=>{let t;return n?t=zr(dr(He,"conversations"),Gt("status","==",$t.ACTIVE),Gt("isActive","==",!0),Gt("agentId","==",n),Br("startedAt","desc"),Ts(e)):t=zr(dr(He,"conversations"),Gt("status","==",$t.ACTIVE),Gt("isActive","==",!0),Br("startedAt","desc"),Ts(e)),(await Ns(t)).docs.map(a=>({id:a.id,...a.data()}))},Pj=async n=>{const e=zr(dr(He,"conversations"),Gt("clientId","==",n),Gt("isActive","==",!0),Gt("status","in",[$t.NEW,$t.ACTIVE]),Br("updatedAt","desc"));return(await Ns(e)).docs.map(i=>({id:i.id,...i.data()}))},cw=async(n=null,e=100)=>{let t;return n?t=zr(dr(He,"conversations"),Gt("status","==",$t.CLOSED),Gt("agentId","==",n),Br("closedAt","desc"),Ts(e)):t=zr(dr(He,"conversations"),Gt("status","==",$t.CLOSED),Br("closedAt","desc"),Ts(e)),(await Ns(t)).docs.map(a=>({id:a.id,...a.data()}))},jj=async(n=10)=>{const e=new Date,t=zr(dr(He,"conversations"),Gt("status","==",$t.ACTIVE),Gt("isActive","==",!0),Gt("nextActionDate",">=",e),Br("nextActionDate","asc"),Ts(n));return(await Ns(t)).docs.map(a=>({id:a.id,...a.data()}))},Mj=async(n,e)=>{try{const t=ft(He,"conversations",n),i=await vn(t);if(!i.exists())throw new Error("Conversación no encontrada");const a=i.data();if(await Cn(t,{currentSoul:e,updatedAt:ct()}),a.clientId){const l=ft(He,"clients",a.clientId);await Cn(l,{soul:e,updatedAt:ct()})}return e}catch(t){throw console.error("Error al actualizar valores del alma:",t),t}},uw=async n=>{const e=ft(He,"conversations",n);if(!(await vn(e)).exists())throw new Error("Conversación no encontrada");return await sP(e),n},BE=async(n,e,t=!0)=>{const i=ft(He,"conversations",n);if(!(await vn(i)).exists())throw new Error("Conversación no encontrada");if(!Object.values($t).includes(e))throw new Error("Estado de conversación no válido");return await Cn(i,{status:e,isActive:t,updatedAt:ct()}),n},kj=async(n,e,t)=>{const i=ft(He,"conversations",n),a=await vn(i);if(!a.exists())throw new Error("Conversación no encontrada");const u=a.data().turns.map(f=>f.id===e?{...f,...t,phase:t.phase||f.phase,isEdited:!0,editedAt:new Date}:f);return await Cn(i,{turns:u,updatedAt:ct()}),u},Vj=async(n,e)=>{const t=ft(He,"conversations",n),i=await vn(t);if(!i.exists())throw new Error("Conversación no encontrada");const l=i.data().turns.filter(u=>u.id!==e);return await Cn(t,{turns:l,updatedAt:ct()}),l},Lj=async(n,e)=>{const t=ft(He,"conversations",n),i=await vn(t);if(!i.exists())throw new Error("Conversación no encontrada");const a=i.data(),l=e.deltas||{relationship:0,history:0,attitude:0,sensitivity:0,probability:0};let u={...a.currentSoul};if(e.event&&e.event!=="neutral"&&e.deltas){const v=E=>Math.min(Math.max(E,0),100);u={relationship:v(u.relationship+(l.relationship||0)),history:v(u.history+(l.history||0)),attitude:v(u.attitude+(l.attitude||0)),sensitivity:v(u.sensitivity+(l.sensitivity||0)),probability:v(u.probability+(l.probability||0))}}const f=new Date,m={id:Ty(),timestamp:f,timestampMillis:f.getTime(),...e,phase:e.phase||Ne.NEGOTIATION,deltas:l,currentSoul:u,isManual:!0},y=[...a.turns,m];if(await Cn(t,{turns:y,currentSoul:u,updatedAt:ct()}),e.updateClientSoul&&e.sender==="client"&&e.event!=="neutral"){const v=ft(He,"clients",a.clientId);await Cn(v,{soul:u,updatedAt:ct()})}return{turns:y,currentSoul:u}},Pp=({title:n,conversations:e,isLoading:t,emptyMessage:i="No hay conversaciones disponibles",showClientInfo:a=!0,onConversationDeleted:l=null})=>{const u=_n(),[f,m]=V.useState(e),y=async(E,x)=>{if(x.stopPropagation(),window.confirm("¿Está seguro que desea eliminar esta conversación? Esta acción es permanente y no se puede deshacer."))try{await uw(E),l?l(E):m(C=>C.filter(A=>A.id!==E))}catch(C){console.error("Error al eliminar conversación:",C),alert("Error al eliminar la conversación: "+C.message)}};if(t)return p.jsxs("div",{className:"bg-white p-4 rounded-lg shadow mb-6",children:[p.jsx("h2",{className:"text-lg font-semibold mb-4",children:n}),p.jsx("div",{className:"animate-pulse flex space-x-4",children:p.jsxs("div",{className:"flex-1 space-y-4 py-1",children:[p.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),p.jsxs("div",{className:"space-y-2",children:[p.jsx("div",{className:"h-4 bg-gray-200 rounded"}),p.jsx("div",{className:"h-4 bg-gray-200 rounded w-5/6"})]})]})})]});const v=l?e:f;return p.jsxs("div",{className:"bg-white p-4 rounded-lg shadow mb-6",children:[p.jsx("h2",{className:"text-lg font-semibold mb-4",children:n}),v.length===0?p.jsx("p",{className:"text-gray-500 text-center py-4",children:i}):p.jsx("ul",{className:"divide-y divide-gray-200",children:v.map(E=>{const C=(E.turns&&E.turns.length>0?E.turns[E.turns.length-1].sender:null)==="client"?"border-l-4 border-green-500":"border-l-4 border-gray-300",A=E.startedAt?LE(new Date(E.startedAt.seconds*1e3),{addSuffix:!0,locale:ps}):"Fecha desconocida";return p.jsxs("li",{className:`p-3 hover:bg-gray-50 cursor-pointer ${C}`,onClick:()=>u(`/conversation/${E.id}`),children:[p.jsxs("div",{className:"flex justify-between",children:[p.jsxs("span",{className:"font-medium",children:[a?E.clientName||"Cliente":"",E.isActive&&p.jsx("span",{className:"ml-2 px-1.5 py-0.5 bg-green-100 text-green-800 text-xs rounded-full",children:"Activa"})]}),p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsx("span",{className:"text-sm text-gray-500",children:A}),p.jsx("button",{className:"text-red-500 hover:text-red-700",onClick:k=>y(E.id,k),title:"Eliminar conversación",children:p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),E.turns&&E.turns.length>0&&p.jsx("p",{className:"text-sm text-gray-600 mt-1 truncate",children:E.turns[E.turns.length-1].message}),E.nextActionDate&&p.jsxs("div",{className:"mt-2 text-xs text-blue-600",children:["Próxima acción: ",LE(new Date(E.nextActionDate.seconds*1e3),{addSuffix:!0,locale:ps})]})]},E.id)})})]})},Uj=({onFilterChange:n})=>{const[e,t]=V.useState("newest"),i=a=>{t(a),n(a)};return p.jsxs("div",{className:"flex space-x-2 mb-4",children:[p.jsx("button",{className:`px-3 py-1 text-sm rounded-full ${e==="newest"?"bg-primary-100 text-primary-800":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,onClick:()=>i("newest"),children:"Más recientes"}),p.jsx("button",{className:`px-3 py-1 text-sm rounded-full ${e==="upcoming"?"bg-primary-100 text-primary-800":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,onClick:()=>i("upcoming"),children:"Próxima fecha"})]})},zj=()=>{const{currentUser:n}=ru(),[e,t]=V.useState([]),[i,a]=V.useState([]),[l,u]=V.useState([]),[f,m]=V.useState(!0),[y,v]=V.useState("newest");V.useEffect(()=>{(async()=>{m(!0);try{let A;y==="newest"?A=await Dj(n.uid):A=await jj();const k=await lw(n.uid),O=await cw(n.uid);t(A),a(k),u(O)}catch(A){console.error("Error al cargar conversaciones:",A)}finally{m(!1)}})()},[n,y]);const E=C=>{v(C)},x=C=>{t(A=>A.filter(k=>k.id!==C)),a(A=>A.filter(k=>k.id!==C)),u(A=>A.filter(k=>k.id!==C))};return p.jsxs("div",{className:"container mx-auto px-4 py-6",children:[p.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Dashboard"}),p.jsx(IP,{}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[p.jsxs("div",{children:[p.jsxs("div",{className:"mb-2",children:[p.jsx("h2",{className:"text-lg font-semibold",children:"Nuevas Conversaciones"}),p.jsx(Uj,{onFilterChange:E})]}),p.jsx(Pp,{title:"",conversations:e,isLoading:f,emptyMessage:"No hay nuevas conversaciones",onConversationDeleted:x}),p.jsx(Pp,{title:"Conversaciones Activas",conversations:i,isLoading:f,emptyMessage:"No hay conversaciones activas",onConversationDeleted:x})]}),p.jsx("div",{children:p.jsx(Pp,{title:"Historial de Conversaciones",conversations:l,isLoading:f,emptyMessage:"No hay conversaciones en el historial",onConversationDeleted:x})})]})]})},$o=({initialValues:n,onChange:e,readOnly:t=!1})=>{const[i,a]=V.useState({relationship:50,history:50,attitude:50,sensitivity:50,probability:50,...n});V.useEffect(()=>{n&&a({relationship:50,history:50,attitude:50,sensitivity:50,probability:50,...n})},[n]);const l=(m,y)=>{const v={...i,[m]:parseInt(y,10)};a(v),e&&e(v)},u=m=>m<30?"bg-red-500":m<50?"bg-orange-500":m<70?"bg-yellow-500":"bg-green-500",f=(m,y,v)=>p.jsxs("div",{className:"mb-6",children:[p.jsxs("div",{className:"flex justify-between items-center mb-2",children:[p.jsx("label",{className:"text-sm font-medium text-gray-700",children:m}),p.jsx("span",{className:`px-2 py-1 rounded-full text-white text-xs font-medium ${u(i[y])}`,children:i[y]})]}),p.jsx("input",{type:"range",min:"0",max:"100",step:"1",value:i[y],onChange:E=>l(y,E.target.value),disabled:t,className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"}),p.jsx("p",{className:"mt-1 text-sm text-gray-500",children:v})]});return p.jsxs("div",{className:"space-y-2",children:[f("Relación/Cercanía","relationship","Indica cuán cercana es la relación con el cliente."),f("Historial de Pago","history","Nivel de cumplimiento de pagos en el pasado."),f("Actitud en la Llamada","attitude","Disposición emocional del cliente en la conversación."),f("Sensibilidad a Presión","sensitivity","Nivel de reacción negativa a la insistencia o tono de urgencia."),f("Probabilidad de Pago","probability","Estimación de si pagará pronto.")]})},Bj=()=>{const{clientId:n}=Eg(),e=_n(),[t,i]=V.useState(null),[a,l]=V.useState([]),[u,f]=V.useState([]),[m,y]=V.useState(!0),[v,E]=V.useState(!1),[x,C]=V.useState(null);V.useEffect(()=>{(async()=>{try{y(!0);const ce=await ow(n);i(ce),C(ce);const le=await Pj(n),ye=await xy(n,10);l(le);const j=ye.filter(N=>!N.isActive);f(j)}catch(ce){console.error("Error al cargar datos del cliente:",ce)}finally{y(!1)}})()},[n]);const A=z=>{const{name:ce,value:le}=z.target;C(ye=>({...ye,[ce]:ce==="debt"?parseFloat(le)||0:le}))},k=z=>{C(ce=>({...ce,soul:z}))},O=async z=>{z.preventDefault();try{y(!0),await Sj(n,{name:x.name,email:x.email,phone:x.phone,notes:x.notes,soul:x.soul}),t.debt!==x.debt&&await Cj(n,x.debt),i(x),E(!1)}catch(ce){console.error("Error al actualizar cliente:",ce)}finally{y(!1)}},$=()=>{e(`/conversation/new/${n}`)},K=z=>{if(!z)return"N/A";const ce=new Date(z.seconds*1e3);return ko(ce,"PPP",{locale:ps})};return m&&!t?p.jsx("div",{className:"container mx-auto px-4 py-6",children:p.jsxs("div",{className:"animate-pulse",children:[p.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-6"}),p.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-4"}),p.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-4"}),p.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/3 mb-4"})]})}):t?p.jsxs("div",{className:"container mx-auto px-4 py-6",children:[p.jsxs("div",{className:"flex justify-between items-center mb-6",children:[p.jsx("h1",{className:"text-2xl font-bold",children:t.name}),p.jsx("div",{className:"flex gap-2",children:v?p.jsx("button",{className:"btn-secondary",onClick:()=>{C(t),E(!1)},children:"Cancelar Edición"}):p.jsxs(p.Fragment,{children:[p.jsx("button",{className:"btn-secondary",onClick:()=>E(!0),children:"Editar"}),p.jsx("button",{className:"btn-primary",onClick:$,children:"Nueva Conversación"})]})})]}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[p.jsxs("div",{className:"md:col-span-2",children:[v?p.jsxs("form",{onSubmit:O,className:"bg-white rounded-lg shadow p-6",children:[p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"name",className:"label",children:"Nombre completo"}),p.jsx("input",{type:"text",id:"name",name:"name",className:"input",value:x.name,onChange:A,required:!0})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"email",className:"label",children:"Email"}),p.jsx("input",{type:"email",id:"email",name:"email",className:"input",value:x.email,onChange:A})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"phone",className:"label",children:"Teléfono"}),p.jsx("input",{type:"text",id:"phone",name:"phone",className:"input",value:x.phone,onChange:A,required:!0})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"debt",className:"label",children:"Monto de deuda"}),p.jsx("input",{type:"number",id:"debt",name:"debt",className:"input",value:x.debt,onChange:A,required:!0})]}),p.jsxs("div",{className:"form-group md:col-span-2",children:[p.jsx("label",{htmlFor:"notes",className:"label",children:"Notas"}),p.jsx("textarea",{id:"notes",name:"notes",rows:"3",className:"input",value:x.notes,onChange:A})]})]}),p.jsxs("div",{className:"mt-6",children:[p.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Variables del Alma"}),p.jsx($o,{initialValues:x.soul,onChange:k,readOnly:!1}),p.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Ajuste las variables de relación con el cliente según su conocimiento actual."})]}),p.jsx("div",{className:"flex justify-end mt-6",children:p.jsx("button",{type:"submit",className:"btn-primary",disabled:m,children:m?"Guardando...":"Guardar Cambios"})})]}):p.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-y-4",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Email"}),p.jsx("p",{children:t.email||"No disponible"})]}),p.jsxs("div",{children:[p.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Teléfono"}),p.jsx("p",{children:t.phone||"No disponible"})]}),p.jsxs("div",{children:[p.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Monto de deuda"}),p.jsxs("p",{className:"text-xl font-semibold text-red-600",children:["$",t.debt.toLocaleString("es-CO")]})]}),p.jsxs("div",{children:[p.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Último contacto"}),p.jsx("p",{children:t.lastContact?K(t.lastContact):"Sin contacto reciente"})]}),t.notes&&p.jsxs("div",{className:"md:col-span-2 mt-4",children:[p.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"Notas"}),p.jsx("p",{className:"text-gray-700 whitespace-pre-line",children:t.notes})]})]})}),p.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mt-6",children:[p.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Conversaciones Activas"}),a.length===0?p.jsx("p",{className:"text-gray-500 text-center py-4",children:"No hay conversaciones activas con este cliente."}):p.jsx("ul",{className:"divide-y divide-gray-200",children:a.map(z=>{const ce=z.startedAt?ko(new Date(z.startedAt.seconds*1e3),"PPp",{locale:ps}):"Fecha desconocida",le=z.turns&&z.turns.length>0?z.turns[z.turns.length-1]:null;return p.jsxs("li",{className:"py-3 cursor-pointer hover:bg-gray-50",onClick:()=>e(`/conversation/${z.id}`),children:[p.jsxs("div",{className:"flex justify-between",children:[p.jsxs("span",{className:"font-medium",children:["Conversación del ",ce]}),p.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Activa"})]}),le&&p.jsxs("p",{className:"text-sm text-gray-600 mt-1 truncate",children:[p.jsx("span",{className:"font-medium",children:le.sender==="agent"?"Agente: ":"Cliente: "}),le.message]})]},z.id)})}),p.jsx("div",{className:"mt-4",children:p.jsx("button",{className:"btn-primary",onClick:$,children:"Iniciar Nueva Conversación"})})]}),p.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mt-6",children:[p.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Historial de Conversaciones"}),u.length===0?p.jsx("p",{className:"text-gray-500 text-center py-4",children:"No hay conversaciones en el historial."}):p.jsx("ul",{className:"divide-y divide-gray-200",children:u.map(z=>{const ce=z.startedAt?ko(new Date(z.startedAt.seconds*1e3),"PPp",{locale:ps}):"Fecha desconocida",le=z.turns&&z.turns.length>0?z.turns[z.turns.length-1]:null;return p.jsxs("li",{className:"py-3 cursor-pointer hover:bg-gray-50",onClick:()=>e(`/conversation/${z.id}`),children:[p.jsxs("div",{className:"flex justify-between",children:[p.jsxs("span",{className:"font-medium",children:["Conversación del ",ce]}),p.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${z.status==="closed"?"bg-gray-100 text-gray-800":"bg-blue-100 text-blue-800"}`,children:z.status==="closed"?"Finalizada":"Inactiva"})]}),le&&p.jsxs("p",{className:"text-sm text-gray-600 mt-1 truncate",children:[p.jsx("span",{className:"font-medium",children:le.sender==="agent"?"Agente: ":"Cliente: "}),le.message]}),z.summary&&p.jsxs("div",{className:"mt-1 text-xs",children:[p.jsx("span",{className:"text-gray-500",children:"Resultado: "}),p.jsx("span",{className:"font-medium",children:z.summary.result})]})]},z.id)})})]})]}),p.jsx("div",{children:p.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[p.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Variables del Alma"}),p.jsx($o,{initialValues:v?x.soul:t.soul,onChange:v?k:null,readOnly:!v}),p.jsxs("div",{className:"mt-4 text-sm text-gray-500",children:[p.jsx("p",{children:"Estas variables representan la disposición y relación del cliente, y se ajustan automáticamente durante las conversaciones."}),p.jsx("p",{className:"mt-2",children:'Para modificar estos valores, utilice el botón "Editar" en la parte superior.'})]})]})})]})]}):p.jsxs("div",{className:"container mx-auto px-4 py-6",children:[p.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:[p.jsx("strong",{className:"font-bold",children:"Error:"}),p.jsx("span",{className:"block sm:inline",children:" No se pudo encontrar el cliente."})]}),p.jsx("button",{className:"btn-secondary mt-4",onClick:()=>e(-1),children:"Volver"})]})},qj=()=>{const n=_n(),[e,t]=V.useState(""),[i,a]=V.useState([]),[l,u]=V.useState(!1),[f,m]=V.useState(!1),y=async v=>{if(v.preventDefault(),!!e.trim()){u(!0),m(!0);try{const E=await Aj(e);a(E)}catch(E){console.error("Error al buscar clientes:",E)}finally{u(!1)}}};return p.jsxs("div",{className:"container mx-auto px-4 py-6",children:[p.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Buscar Cliente"}),p.jsx("form",{onSubmit:y,className:"mb-6",children:p.jsxs("div",{className:"flex gap-2",children:[p.jsx("input",{type:"text",className:"input flex-grow",placeholder:"Nombre, teléfono o email del cliente",value:e,onChange:v=>t(v.target.value)}),p.jsx("button",{type:"submit",className:"btn-primary",disabled:l,children:l?"Buscando...":"Buscar"})]})}),p.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[p.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Resultados"}),l?p.jsxs("div",{className:"animate-pulse space-y-4 py-4",children:[p.jsx("div",{className:"h-5 bg-gray-200 rounded w-3/4"}),p.jsx("div",{className:"h-5 bg-gray-200 rounded w-1/2"}),p.jsx("div",{className:"h-5 bg-gray-200 rounded w-5/6"})]}):i.length===0?p.jsx("p",{className:"text-gray-500 text-center py-4",children:f?"No se encontraron resultados. Intente con otros términos de búsqueda.":"Ingrese un término de búsqueda para encontrar clientes."}):p.jsx("ul",{className:"divide-y divide-gray-200",children:i.map(v=>p.jsxs("li",{className:"py-3 hover:bg-gray-50 cursor-pointer",onClick:()=>n(`/clients/${v.id}`),children:[p.jsxs("div",{className:"flex justify-between",children:[p.jsx("span",{className:"font-medium",children:v.name}),p.jsxs("span",{className:"text-red-600 font-medium",children:["$",v.debt.toLocaleString("es-CO")]})]}),p.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:[v.phone," ",v.email&&`| ${v.email}`]}),p.jsxs("div",{className:"flex mt-2 space-x-2",children:[p.jsx("button",{className:"text-sm text-primary-600 hover:text-primary-800",onClick:E=>{E.stopPropagation(),n(`/clients/${v.id}`)},children:"Ver detalles"}),p.jsx("button",{className:"text-sm text-primary-600 hover:text-primary-800",onClick:E=>{E.stopPropagation(),n(`/conversation/new/${v.id}`)},children:"Iniciar conversación"})]})]},v.id))})]}),p.jsx("div",{className:"mt-6",children:p.jsx("button",{className:"btn-secondary",onClick:()=>n(-1),children:"Volver"})})]})},Fj=()=>{const n=_n(),[e,t]=V.useState({name:"",email:"",phone:"",debt:"",notes:""}),[i,a]=V.useState({relationship:50,history:50,attitude:50,sensitivity:50,probability:50}),[l,u]=V.useState(!1),[f,m]=V.useState(""),y=E=>{const{name:x,value:C}=E.target;t(A=>({...A,[x]:x==="debt"?parseFloat(C)||"":C}))},v=async E=>{if(E.preventDefault(),m(""),!e.name.trim()){m("El nombre del cliente es obligatorio");return}if(!e.phone.trim()){m("El teléfono es obligatorio");return}if(isNaN(e.debt)||e.debt===""){m("Debe ingresar un monto de deuda válido");return}try{u(!0);const x={...e,...i},C=await wj(x);console.log("Cliente creado con ID:",C),n(`/clients/${C}`)}catch(x){console.error("Error al crear el cliente:",x),m("Ocurrió un error al crear el cliente. Por favor, intente nuevamente.")}finally{u(!1)}};return p.jsxs("div",{className:"container mx-auto px-4 py-6",children:[p.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Agregar Nuevo Cliente"}),f&&p.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-6",role:"alert",children:p.jsx("span",{className:"block sm:inline",children:f})}),p.jsxs("form",{onSubmit:v,className:"bg-white rounded-lg shadow p-6",children:[p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"name",className:"label",children:"Nombre completo *"}),p.jsx("input",{type:"text",id:"name",name:"name",className:"input",value:e.name,onChange:y,required:!0})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"email",className:"label",children:"Email"}),p.jsx("input",{type:"email",id:"email",name:"email",className:"input",value:e.email,onChange:y})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"phone",className:"label",children:"Teléfono *"}),p.jsx("input",{type:"text",id:"phone",name:"phone",className:"input",value:e.phone,onChange:y,required:!0})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"debt",className:"label",children:"Monto de deuda *"}),p.jsx("input",{type:"number",id:"debt",name:"debt",className:"input",value:e.debt,onChange:y,required:!0})]}),p.jsxs("div",{className:"form-group md:col-span-2",children:[p.jsx("label",{htmlFor:"notes",className:"label",children:"Notas"}),p.jsx("textarea",{id:"notes",name:"notes",rows:"3",className:"input",value:e.notes,onChange:y})]})]}),p.jsx("h3",{className:"text-lg font-semibold mt-8 mb-4",children:"Variables del Alma del Cliente"}),p.jsx($o,{initialValues:i,onChange:a}),p.jsxs("div",{className:"flex justify-end gap-4 mt-8",children:[p.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>n(-1),disabled:l,children:"Cancelar"}),p.jsx("button",{type:"submit",className:"btn-primary",disabled:l,children:l?"Guardando...":"Guardar Cliente"})]})]})]})},Hj=()=>{const n=_n(),[e,t]=V.useState([]),[i,a]=V.useState(!0),[l,u]=V.useState("");V.useEffect(()=>{(async()=>{try{const y=await su();t(y)}catch(y){console.error("Error al cargar clientes:",y)}finally{a(!1)}})()},[]);const f=e.filter(m=>m.name.toLowerCase().includes(l.toLowerCase())||m.email.toLowerCase().includes(l.toLowerCase())||m.phone.includes(l));return p.jsxs("div",{className:"container mx-auto px-4 py-6",children:[p.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Seleccionar Cliente para Conversación"}),p.jsx("div",{className:"mb-6",children:p.jsx("input",{type:"text",className:"input",placeholder:"Buscar cliente...",value:l,onChange:m=>u(m.target.value)})}),p.jsx("div",{className:"bg-white rounded-lg shadow",children:i?p.jsx("div",{className:"p-4",children:"Cargando clientes..."}):f.length===0?p.jsxs("div",{className:"p-4 text-center",children:[p.jsx("p",{className:"text-gray-500",children:"No se encontraron clientes."}),p.jsx("button",{className:"btn-primary mt-4",onClick:()=>n("/clients/new"),children:"Agregar Nuevo Cliente"})]}):p.jsx("ul",{className:"divide-y divide-gray-200",children:f.map(m=>p.jsxs("li",{className:"p-4 hover:bg-gray-50 cursor-pointer",onClick:()=>n(`/conversation/new/${m.id}`),children:[p.jsxs("div",{className:"flex justify-between",children:[p.jsx("span",{className:"font-medium",children:m.name}),p.jsxs("span",{className:"text-primary-600 font-semibold",children:["$",m.debt.toLocaleString()]})]}),p.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:[m.phone," | ",m.email]})]},m.id))})}),p.jsx("div",{className:"mt-6",children:p.jsx("button",{className:"btn-secondary",onClick:()=>n(-1),children:"Volver"})})]})},Gj=()=>{const n=_n(),[e,t]=V.useState([]),[i,a]=V.useState(!0),[l,u]=V.useState("");V.useEffect(()=>{(async()=>{try{a(!0);const y=await su();t(y)}catch(y){console.error("Error al cargar clientes:",y)}finally{a(!1)}})()},[]);const f=e.filter(m=>m.name.toLowerCase().includes(l.toLowerCase())||m.email&&m.email.toLowerCase().includes(l.toLowerCase())||m.phone&&m.phone.includes(l));return p.jsxs("div",{className:"container mx-auto px-4 py-6",children:[p.jsxs("div",{className:"flex justify-between items-center mb-6",children:[p.jsx("h1",{className:"text-2xl font-bold",children:"Clientes"}),p.jsxs("div",{className:"flex space-x-2",children:[p.jsxs("button",{className:"btn-primary flex items-center gap-2",onClick:()=>n("/clients/new"),children:[p.jsx(Zx,{})," Agregar Cliente"]}),p.jsxs("button",{className:"btn-secondary flex items-center gap-2",onClick:()=>n("/clients/search"),children:[p.jsx(Jx,{})," Búsqueda Avanzada"]})]})]}),p.jsx("div",{className:"mb-6",children:p.jsx("input",{type:"text",className:"input",placeholder:"Buscar cliente por nombre, email o teléfono...",value:l,onChange:m=>u(m.target.value)})}),p.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:i?p.jsx("div",{className:"p-4",children:p.jsxs("div",{className:"animate-pulse space-y-4",children:[p.jsx("div",{className:"h-5 bg-gray-200 rounded"}),p.jsx("div",{className:"h-5 bg-gray-200 rounded"}),p.jsx("div",{className:"h-5 bg-gray-200 rounded"})]})}):f.length===0?p.jsxs("div",{className:"p-8 text-center",children:[p.jsx("p",{className:"text-gray-500 mb-4",children:"No se encontraron clientes."}),p.jsx("button",{className:"btn-primary",onClick:()=>n("/clients/new"),children:"Agregar Nuevo Cliente"})]}):p.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[p.jsx("thead",{className:"bg-gray-50",children:p.jsxs("tr",{children:[p.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nombre"}),p.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contacto"}),p.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Deuda"}),p.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado del Alma"}),p.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),p.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:f.map(m=>p.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>n(`/clients/${m.id}`),children:[p.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:p.jsx("div",{className:"font-medium text-gray-900",children:m.name})}),p.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[p.jsx("div",{className:"text-sm text-gray-500",children:m.phone}),p.jsx("div",{className:"text-sm text-gray-500",children:m.email})]}),p.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:p.jsxs("div",{className:"text-sm font-medium text-red-600",children:["$",m.debt.toLocaleString("es-CO")]})}),p.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:p.jsx("div",{className:"flex space-x-1",children:m.soul&&p.jsxs(p.Fragment,{children:[p.jsxs("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${m.soul.relationship>70?"bg-green-100 text-green-800":m.soul.relationship>40?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:["R:",m.soul.relationship]}),p.jsxs("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${m.soul.probability>70?"bg-green-100 text-green-800":m.soul.probability>40?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:["P:",m.soul.probability]})]})})}),p.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:p.jsx("button",{className:"text-primary-600 hover:text-primary-900 mr-3",onClick:y=>{y.stopPropagation(),n(`/conversation/new/${m.id}`)},children:"Iniciar Conversación"})})]},m.id))})]})})]})},$j=async(n,e,t)=>{const i=n.toLowerCase();let a="neutral";i.includes("pagar")||i.includes("transferir")||i.includes("depositar")?i.includes("completo")||i.includes("todo")?a="accepts_payment":i.includes("parte")||i.includes("parcial")||i.includes("algo")?a="offers_partial":(i.includes("próxima")||i.includes("después")||i.includes("luego"))&&(a="reschedule"):i.includes("gracias")||i.includes("agradezco")?a="thanks":i.includes("ya pagué")||i.includes("realicé el pago")||i.includes("transferí")?a="confirms_payment":i.includes("no puedo")||i.includes("imposible")?a="evades":i.includes("molesto")||i.includes("harto")||i.includes("fastidio")?a="annoyed":(i.includes("no voy a pagar")||i.includes("no pagaré")||i.includes("olvídate"))&&(a="refuses");const l={neutral:{relationship:0,history:0,attitude:0,sensitivity:0,probability:0},accepts_payment:{relationship:5,history:10,attitude:10,sensitivity:-5,probability:20},offers_partial:{relationship:5,history:5,attitude:10,sensitivity:-5,probability:15},reschedule:{relationship:2,history:-5,attitude:5,sensitivity:0,probability:-5},evades:{relationship:-5,history:-5,attitude:-10,sensitivity:5,probability:-10},annoyed:{relationship:-10,history:-5,attitude:-15,sensitivity:10,probability:-15},refuses:{relationship:-20,history:-20,attitude:-20,sensitivity:20,probability:-30},thanks:{relationship:5,history:0,attitude:10,sensitivity:-5,probability:10},no_answer:{relationship:-5,history:-10,attitude:-5,sensitivity:0,probability:-10},confirms_payment:{relationship:10,history:20,attitude:20,sensitivity:-10,probability:30}},u=l[a]||l.neutral;return{eventType:a,deltas:u,explanation:`Evento detectado "${a}" basado en palabras clave como "${i.split(" ").slice(0,3).join(" ")}..."`,confidence:.7}},Yj=async(n,e,t,i)=>{let a="neutral";e.relationship>70?e.sensitivity>70?a="friendly_no_pressure":a="friendly":e.relationship<40&&(e.sensitivity<40?a="formal_direct":a="formal_soft");const l={accepts_payment:{friendly_no_pressure:"¡Excelente noticia! Gracias por tu disposición. Cuando puedas hacer el pago, solo avísame.",friendly:"¡Perfecto! Muchas gracias por tu colaboración. ¿Te envío los datos para el pago?",formal_direct:"Muy bien. Le agradecemos su decisión. Necesitamos que realice el pago antes del fin de semana.",formal_soft:"Gracias por su confirmación. ¿Prefiere que le enviemos los datos bancarios por este medio?",neutral:"Entendido. ¿Desea que le enviemos la información para realizar el pago?"},offers_partial:{friendly_no_pressure:"Agradezco mucho tu esfuerzo por pagar una parte. Cualquier aporte es bienvenido.",friendly:"Gracias por tu disposición. Un pago parcial nos ayuda mucho. ¿Cuándo podrías realizar este abono?",formal_direct:"Tomamos nota de su oferta de pago parcial. ¿Cuándo podríamos esperar el resto del monto?",formal_soft:"Entendemos su situación. El pago parcial es un buen primer paso. ¿Cuándo sería posible?",neutral:"De acuerdo con el pago parcial. ¿Qué monto podría transferir y cuándo?"},default:{friendly_no_pressure:"Entiendo perfectamente. No te preocupes, cuando puedas realizar el pago me avisas.",friendly:"Agradezco que estemos en contacto. ¿Hay algo en lo que pueda ayudarte para facilitar el proceso?",formal_direct:"Necesitamos regularizar su situación. ¿Podría por favor indicarnos una fecha concreta de pago?",formal_soft:"Entendemos que pueden surgir contratiempos. ¿Podría comentarnos cuándo le sería posible realizar el pago?",neutral:"¿Podría por favor indicarnos cuándo podríamos esperar el pago?"}},u=l[i]||l.default;return{responseText:u[a]||u.neutral,explanation:`Respuesta generada usando tono "${a}" basado en Relación: ${e.relationship}, Sensibilidad: ${e.sensitivity}`,confidence:.8}};function dw(n,e){return function(){return n.apply(e,arguments)}}const{toString:Kj}=Object.prototype,{getPrototypeOf:wy}=Object,{iterator:af,toStringTag:hw}=Symbol,of=(n=>e=>{const t=Kj.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),fr=n=>(n=n.toLowerCase(),e=>of(e)===n),lf=n=>e=>typeof e===n,{isArray:rl}=Array,qc=lf("undefined");function Qj(n){return n!==null&&!qc(n)&&n.constructor!==null&&!qc(n.constructor)&&An(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const fw=fr("ArrayBuffer");function Wj(n){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&fw(n.buffer),e}const Xj=lf("string"),An=lf("function"),mw=lf("number"),cf=n=>n!==null&&typeof n=="object",Zj=n=>n===!0||n===!1,Jd=n=>{if(of(n)!=="object")return!1;const e=wy(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(hw in n)&&!(af in n)},Jj=fr("Date"),eM=fr("File"),tM=fr("Blob"),nM=fr("FileList"),rM=n=>cf(n)&&An(n.pipe),iM=n=>{let e;return n&&(typeof FormData=="function"&&n instanceof FormData||An(n.append)&&((e=of(n))==="formdata"||e==="object"&&An(n.toString)&&n.toString()==="[object FormData]"))},sM=fr("URLSearchParams"),[aM,oM,lM,cM]=["ReadableStream","Request","Response","Headers"].map(fr),uM=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function au(n,e,{allOwnKeys:t=!1}={}){if(n===null||typeof n>"u")return;let i,a;if(typeof n!="object"&&(n=[n]),rl(n))for(i=0,a=n.length;i<a;i++)e.call(null,n[i],i,n);else{const l=t?Object.getOwnPropertyNames(n):Object.keys(n),u=l.length;let f;for(i=0;i<u;i++)f=l[i],e.call(null,n[f],f,n)}}function pw(n,e){e=e.toLowerCase();const t=Object.keys(n);let i=t.length,a;for(;i-- >0;)if(a=t[i],e===a.toLowerCase())return a;return null}const ga=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,gw=n=>!qc(n)&&n!==ga;function dg(){const{caseless:n}=gw(this)&&this||{},e={},t=(i,a)=>{const l=n&&pw(e,a)||a;Jd(e[l])&&Jd(i)?e[l]=dg(e[l],i):Jd(i)?e[l]=dg({},i):rl(i)?e[l]=i.slice():e[l]=i};for(let i=0,a=arguments.length;i<a;i++)arguments[i]&&au(arguments[i],t);return e}const dM=(n,e,t,{allOwnKeys:i}={})=>(au(e,(a,l)=>{t&&An(a)?n[l]=dw(a,t):n[l]=a},{allOwnKeys:i}),n),hM=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),fM=(n,e,t,i)=>{n.prototype=Object.create(e.prototype,i),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:e.prototype}),t&&Object.assign(n.prototype,t)},mM=(n,e,t,i)=>{let a,l,u;const f={};if(e=e||{},n==null)return e;do{for(a=Object.getOwnPropertyNames(n),l=a.length;l-- >0;)u=a[l],(!i||i(u,n,e))&&!f[u]&&(e[u]=n[u],f[u]=!0);n=t!==!1&&wy(n)}while(n&&(!t||t(n,e))&&n!==Object.prototype);return e},pM=(n,e,t)=>{n=String(n),(t===void 0||t>n.length)&&(t=n.length),t-=e.length;const i=n.indexOf(e,t);return i!==-1&&i===t},gM=n=>{if(!n)return null;if(rl(n))return n;let e=n.length;if(!mw(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=n[e];return t},yM=(n=>e=>n&&e instanceof n)(typeof Uint8Array<"u"&&wy(Uint8Array)),vM=(n,e)=>{const i=(n&&n[af]).call(n);let a;for(;(a=i.next())&&!a.done;){const l=a.value;e.call(n,l[0],l[1])}},_M=(n,e)=>{let t;const i=[];for(;(t=n.exec(e))!==null;)i.push(t);return i},bM=fr("HTMLFormElement"),EM=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,i,a){return i.toUpperCase()+a}),qE=(({hasOwnProperty:n})=>(e,t)=>n.call(e,t))(Object.prototype),TM=fr("RegExp"),yw=(n,e)=>{const t=Object.getOwnPropertyDescriptors(n),i={};au(t,(a,l)=>{let u;(u=e(a,l,n))!==!1&&(i[l]=u||a)}),Object.defineProperties(n,i)},xM=n=>{yw(n,(e,t)=>{if(An(n)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const i=n[t];if(An(i)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},wM=(n,e)=>{const t={},i=a=>{a.forEach(l=>{t[l]=!0})};return rl(n)?i(n):i(String(n).split(e)),t},AM=()=>{},SM=(n,e)=>n!=null&&Number.isFinite(n=+n)?n:e;function CM(n){return!!(n&&An(n.append)&&n[hw]==="FormData"&&n[af])}const NM=n=>{const e=new Array(10),t=(i,a)=>{if(cf(i)){if(e.indexOf(i)>=0)return;if(!("toJSON"in i)){e[a]=i;const l=rl(i)?[]:{};return au(i,(u,f)=>{const m=t(u,a+1);!qc(m)&&(l[f]=m)}),e[a]=void 0,l}}return i};return t(n,0)},RM=fr("AsyncFunction"),IM=n=>n&&(cf(n)||An(n))&&An(n.then)&&An(n.catch),vw=((n,e)=>n?setImmediate:e?((t,i)=>(ga.addEventListener("message",({source:a,data:l})=>{a===ga&&l===t&&i.length&&i.shift()()},!1),a=>{i.push(a),ga.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",An(ga.postMessage)),OM=typeof queueMicrotask<"u"?queueMicrotask.bind(ga):typeof process<"u"&&process.nextTick||vw,DM=n=>n!=null&&An(n[af]),Z={isArray:rl,isArrayBuffer:fw,isBuffer:Qj,isFormData:iM,isArrayBufferView:Wj,isString:Xj,isNumber:mw,isBoolean:Zj,isObject:cf,isPlainObject:Jd,isReadableStream:aM,isRequest:oM,isResponse:lM,isHeaders:cM,isUndefined:qc,isDate:Jj,isFile:eM,isBlob:tM,isRegExp:TM,isFunction:An,isStream:rM,isURLSearchParams:sM,isTypedArray:yM,isFileList:nM,forEach:au,merge:dg,extend:dM,trim:uM,stripBOM:hM,inherits:fM,toFlatObject:mM,kindOf:of,kindOfTest:fr,endsWith:pM,toArray:gM,forEachEntry:vM,matchAll:_M,isHTMLForm:bM,hasOwnProperty:qE,hasOwnProp:qE,reduceDescriptors:yw,freezeMethods:xM,toObjectSet:wM,toCamelCase:EM,noop:AM,toFiniteNumber:SM,findKey:pw,global:ga,isContextDefined:gw,isSpecCompliantForm:CM,toJSONObject:NM,isAsyncFn:RM,isThenable:IM,setImmediate:vw,asap:OM,isIterable:DM};function Ie(n,e,t,i,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),i&&(this.request=i),a&&(this.response=a,this.status=a.status?a.status:null)}Z.inherits(Ie,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Z.toJSONObject(this.config),code:this.code,status:this.status}}});const _w=Ie.prototype,bw={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{bw[n]={value:n}});Object.defineProperties(Ie,bw);Object.defineProperty(_w,"isAxiosError",{value:!0});Ie.from=(n,e,t,i,a,l)=>{const u=Object.create(_w);return Z.toFlatObject(n,u,function(m){return m!==Error.prototype},f=>f!=="isAxiosError"),Ie.call(u,n.message,e,t,i,a),u.cause=n,u.name=n.name,l&&Object.assign(u,l),u};const PM=null;function hg(n){return Z.isPlainObject(n)||Z.isArray(n)}function Ew(n){return Z.endsWith(n,"[]")?n.slice(0,-2):n}function FE(n,e,t){return n?n.concat(e).map(function(a,l){return a=Ew(a),!t&&l?"["+a+"]":a}).join(t?".":""):e}function jM(n){return Z.isArray(n)&&!n.some(hg)}const MM=Z.toFlatObject(Z,{},null,function(e){return/^is[A-Z]/.test(e)});function uf(n,e,t){if(!Z.isObject(n))throw new TypeError("target must be an object");e=e||new FormData,t=Z.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(k,O){return!Z.isUndefined(O[k])});const i=t.metaTokens,a=t.visitor||v,l=t.dots,u=t.indexes,m=(t.Blob||typeof Blob<"u"&&Blob)&&Z.isSpecCompliantForm(e);if(!Z.isFunction(a))throw new TypeError("visitor must be a function");function y(A){if(A===null)return"";if(Z.isDate(A))return A.toISOString();if(!m&&Z.isBlob(A))throw new Ie("Blob is not supported. Use a Buffer instead.");return Z.isArrayBuffer(A)||Z.isTypedArray(A)?m&&typeof Blob=="function"?new Blob([A]):Buffer.from(A):A}function v(A,k,O){let $=A;if(A&&!O&&typeof A=="object"){if(Z.endsWith(k,"{}"))k=i?k:k.slice(0,-2),A=JSON.stringify(A);else if(Z.isArray(A)&&jM(A)||(Z.isFileList(A)||Z.endsWith(k,"[]"))&&($=Z.toArray(A)))return k=Ew(k),$.forEach(function(z,ce){!(Z.isUndefined(z)||z===null)&&e.append(u===!0?FE([k],ce,l):u===null?k:k+"[]",y(z))}),!1}return hg(A)?!0:(e.append(FE(O,k,l),y(A)),!1)}const E=[],x=Object.assign(MM,{defaultVisitor:v,convertValue:y,isVisitable:hg});function C(A,k){if(!Z.isUndefined(A)){if(E.indexOf(A)!==-1)throw Error("Circular reference detected in "+k.join("."));E.push(A),Z.forEach(A,function($,K){(!(Z.isUndefined($)||$===null)&&a.call(e,$,Z.isString(K)?K.trim():K,k,x))===!0&&C($,k?k.concat(K):[K])}),E.pop()}}if(!Z.isObject(n))throw new TypeError("data must be an object");return C(n),e}function HE(n){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(i){return e[i]})}function Ay(n,e){this._pairs=[],n&&uf(n,this,e)}const Tw=Ay.prototype;Tw.append=function(e,t){this._pairs.push([e,t])};Tw.toString=function(e){const t=e?function(i){return e.call(this,i,HE)}:HE;return this._pairs.map(function(a){return t(a[0])+"="+t(a[1])},"").join("&")};function kM(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function xw(n,e,t){if(!e)return n;const i=t&&t.encode||kM;Z.isFunction(t)&&(t={serialize:t});const a=t&&t.serialize;let l;if(a?l=a(e,t):l=Z.isURLSearchParams(e)?e.toString():new Ay(e,t).toString(i),l){const u=n.indexOf("#");u!==-1&&(n=n.slice(0,u)),n+=(n.indexOf("?")===-1?"?":"&")+l}return n}class GE{constructor(){this.handlers=[]}use(e,t,i){return this.handlers.push({fulfilled:e,rejected:t,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Z.forEach(this.handlers,function(i){i!==null&&e(i)})}}const ww={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},VM=typeof URLSearchParams<"u"?URLSearchParams:Ay,LM=typeof FormData<"u"?FormData:null,UM=typeof Blob<"u"?Blob:null,zM={isBrowser:!0,classes:{URLSearchParams:VM,FormData:LM,Blob:UM},protocols:["http","https","file","blob","url","data"]},Sy=typeof window<"u"&&typeof document<"u",fg=typeof navigator=="object"&&navigator||void 0,BM=Sy&&(!fg||["ReactNative","NativeScript","NS"].indexOf(fg.product)<0),qM=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",FM=Sy&&window.location.href||"http://localhost",HM=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Sy,hasStandardBrowserEnv:BM,hasStandardBrowserWebWorkerEnv:qM,navigator:fg,origin:FM},Symbol.toStringTag,{value:"Module"})),un={...HM,...zM};function GM(n,e){return uf(n,new un.classes.URLSearchParams,Object.assign({visitor:function(t,i,a,l){return un.isNode&&Z.isBuffer(t)?(this.append(i,t.toString("base64")),!1):l.defaultVisitor.apply(this,arguments)}},e))}function $M(n){return Z.matchAll(/\w+|\[(\w*)]/g,n).map(e=>e[0]==="[]"?"":e[1]||e[0])}function YM(n){const e={},t=Object.keys(n);let i;const a=t.length;let l;for(i=0;i<a;i++)l=t[i],e[l]=n[l];return e}function Aw(n){function e(t,i,a,l){let u=t[l++];if(u==="__proto__")return!0;const f=Number.isFinite(+u),m=l>=t.length;return u=!u&&Z.isArray(a)?a.length:u,m?(Z.hasOwnProp(a,u)?a[u]=[a[u],i]:a[u]=i,!f):((!a[u]||!Z.isObject(a[u]))&&(a[u]=[]),e(t,i,a[u],l)&&Z.isArray(a[u])&&(a[u]=YM(a[u])),!f)}if(Z.isFormData(n)&&Z.isFunction(n.entries)){const t={};return Z.forEachEntry(n,(i,a)=>{e($M(i),a,t,0)}),t}return null}function KM(n,e,t){if(Z.isString(n))try{return(e||JSON.parse)(n),Z.trim(n)}catch(i){if(i.name!=="SyntaxError")throw i}return(t||JSON.stringify)(n)}const ou={transitional:ww,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const i=t.getContentType()||"",a=i.indexOf("application/json")>-1,l=Z.isObject(e);if(l&&Z.isHTMLForm(e)&&(e=new FormData(e)),Z.isFormData(e))return a?JSON.stringify(Aw(e)):e;if(Z.isArrayBuffer(e)||Z.isBuffer(e)||Z.isStream(e)||Z.isFile(e)||Z.isBlob(e)||Z.isReadableStream(e))return e;if(Z.isArrayBufferView(e))return e.buffer;if(Z.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let f;if(l){if(i.indexOf("application/x-www-form-urlencoded")>-1)return GM(e,this.formSerializer).toString();if((f=Z.isFileList(e))||i.indexOf("multipart/form-data")>-1){const m=this.env&&this.env.FormData;return uf(f?{"files[]":e}:e,m&&new m,this.formSerializer)}}return l||a?(t.setContentType("application/json",!1),KM(e)):e}],transformResponse:[function(e){const t=this.transitional||ou.transitional,i=t&&t.forcedJSONParsing,a=this.responseType==="json";if(Z.isResponse(e)||Z.isReadableStream(e))return e;if(e&&Z.isString(e)&&(i&&!this.responseType||a)){const u=!(t&&t.silentJSONParsing)&&a;try{return JSON.parse(e)}catch(f){if(u)throw f.name==="SyntaxError"?Ie.from(f,Ie.ERR_BAD_RESPONSE,this,null,this.response):f}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:un.classes.FormData,Blob:un.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Z.forEach(["delete","get","head","post","put","patch"],n=>{ou.headers[n]={}});const QM=Z.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),WM=n=>{const e={};let t,i,a;return n&&n.split(`
`).forEach(function(u){a=u.indexOf(":"),t=u.substring(0,a).trim().toLowerCase(),i=u.substring(a+1).trim(),!(!t||e[t]&&QM[t])&&(t==="set-cookie"?e[t]?e[t].push(i):e[t]=[i]:e[t]=e[t]?e[t]+", "+i:i)}),e},$E=Symbol("internals");function yc(n){return n&&String(n).trim().toLowerCase()}function eh(n){return n===!1||n==null?n:Z.isArray(n)?n.map(eh):String(n)}function XM(n){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=t.exec(n);)e[i[1]]=i[2];return e}const ZM=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function jp(n,e,t,i,a){if(Z.isFunction(i))return i.call(this,e,t);if(a&&(e=t),!!Z.isString(e)){if(Z.isString(i))return e.indexOf(i)!==-1;if(Z.isRegExp(i))return i.test(e)}}function JM(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,i)=>t.toUpperCase()+i)}function e3(n,e){const t=Z.toCamelCase(" "+e);["get","set","has"].forEach(i=>{Object.defineProperty(n,i+t,{value:function(a,l,u){return this[i].call(this,e,a,l,u)},configurable:!0})})}let Sn=class{constructor(e){e&&this.set(e)}set(e,t,i){const a=this;function l(f,m,y){const v=yc(m);if(!v)throw new Error("header name must be a non-empty string");const E=Z.findKey(a,v);(!E||a[E]===void 0||y===!0||y===void 0&&a[E]!==!1)&&(a[E||m]=eh(f))}const u=(f,m)=>Z.forEach(f,(y,v)=>l(y,v,m));if(Z.isPlainObject(e)||e instanceof this.constructor)u(e,t);else if(Z.isString(e)&&(e=e.trim())&&!ZM(e))u(WM(e),t);else if(Z.isObject(e)&&Z.isIterable(e)){let f={},m,y;for(const v of e){if(!Z.isArray(v))throw TypeError("Object iterator must return a key-value pair");f[y=v[0]]=(m=f[y])?Z.isArray(m)?[...m,v[1]]:[m,v[1]]:v[1]}u(f,t)}else e!=null&&l(t,e,i);return this}get(e,t){if(e=yc(e),e){const i=Z.findKey(this,e);if(i){const a=this[i];if(!t)return a;if(t===!0)return XM(a);if(Z.isFunction(t))return t.call(this,a,i);if(Z.isRegExp(t))return t.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=yc(e),e){const i=Z.findKey(this,e);return!!(i&&this[i]!==void 0&&(!t||jp(this,this[i],i,t)))}return!1}delete(e,t){const i=this;let a=!1;function l(u){if(u=yc(u),u){const f=Z.findKey(i,u);f&&(!t||jp(i,i[f],f,t))&&(delete i[f],a=!0)}}return Z.isArray(e)?e.forEach(l):l(e),a}clear(e){const t=Object.keys(this);let i=t.length,a=!1;for(;i--;){const l=t[i];(!e||jp(this,this[l],l,e,!0))&&(delete this[l],a=!0)}return a}normalize(e){const t=this,i={};return Z.forEach(this,(a,l)=>{const u=Z.findKey(i,l);if(u){t[u]=eh(a),delete t[l];return}const f=e?JM(l):String(l).trim();f!==l&&delete t[l],t[f]=eh(a),i[f]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return Z.forEach(this,(i,a)=>{i!=null&&i!==!1&&(t[a]=e&&Z.isArray(i)?i.join(", "):i)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const i=new this(e);return t.forEach(a=>i.set(a)),i}static accessor(e){const i=(this[$E]=this[$E]={accessors:{}}).accessors,a=this.prototype;function l(u){const f=yc(u);i[f]||(e3(a,u),i[f]=!0)}return Z.isArray(e)?e.forEach(l):l(e),this}};Sn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Z.reduceDescriptors(Sn.prototype,({value:n},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(i){this[t]=i}}});Z.freezeMethods(Sn);function Mp(n,e){const t=this||ou,i=e||t,a=Sn.from(i.headers);let l=i.data;return Z.forEach(n,function(f){l=f.call(t,l,a.normalize(),e?e.status:void 0)}),a.normalize(),l}function Sw(n){return!!(n&&n.__CANCEL__)}function il(n,e,t){Ie.call(this,n??"canceled",Ie.ERR_CANCELED,e,t),this.name="CanceledError"}Z.inherits(il,Ie,{__CANCEL__:!0});function Cw(n,e,t){const i=t.config.validateStatus;!t.status||!i||i(t.status)?n(t):e(new Ie("Request failed with status code "+t.status,[Ie.ERR_BAD_REQUEST,Ie.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function t3(n){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return e&&e[1]||""}function n3(n,e){n=n||10;const t=new Array(n),i=new Array(n);let a=0,l=0,u;return e=e!==void 0?e:1e3,function(m){const y=Date.now(),v=i[l];u||(u=y),t[a]=m,i[a]=y;let E=l,x=0;for(;E!==a;)x+=t[E++],E=E%n;if(a=(a+1)%n,a===l&&(l=(l+1)%n),y-u<e)return;const C=v&&y-v;return C?Math.round(x*1e3/C):void 0}}function r3(n,e){let t=0,i=1e3/e,a,l;const u=(y,v=Date.now())=>{t=v,a=null,l&&(clearTimeout(l),l=null),n.apply(null,y)};return[(...y)=>{const v=Date.now(),E=v-t;E>=i?u(y,v):(a=y,l||(l=setTimeout(()=>{l=null,u(a)},i-E)))},()=>a&&u(a)]}const Ch=(n,e,t=3)=>{let i=0;const a=n3(50,250);return r3(l=>{const u=l.loaded,f=l.lengthComputable?l.total:void 0,m=u-i,y=a(m),v=u<=f;i=u;const E={loaded:u,total:f,progress:f?u/f:void 0,bytes:m,rate:y||void 0,estimated:y&&f&&v?(f-u)/y:void 0,event:l,lengthComputable:f!=null,[e?"download":"upload"]:!0};n(E)},t)},YE=(n,e)=>{const t=n!=null;return[i=>e[0]({lengthComputable:t,total:n,loaded:i}),e[1]]},KE=n=>(...e)=>Z.asap(()=>n(...e)),i3=un.hasStandardBrowserEnv?((n,e)=>t=>(t=new URL(t,un.origin),n.protocol===t.protocol&&n.host===t.host&&(e||n.port===t.port)))(new URL(un.origin),un.navigator&&/(msie|trident)/i.test(un.navigator.userAgent)):()=>!0,s3=un.hasStandardBrowserEnv?{write(n,e,t,i,a,l){const u=[n+"="+encodeURIComponent(e)];Z.isNumber(t)&&u.push("expires="+new Date(t).toGMTString()),Z.isString(i)&&u.push("path="+i),Z.isString(a)&&u.push("domain="+a),l===!0&&u.push("secure"),document.cookie=u.join("; ")},read(n){const e=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(n){this.write(n,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function a3(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function o3(n,e){return e?n.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):n}function Nw(n,e,t){let i=!a3(e);return n&&(i||t==!1)?o3(n,e):e}const QE=n=>n instanceof Sn?{...n}:n;function Aa(n,e){e=e||{};const t={};function i(y,v,E,x){return Z.isPlainObject(y)&&Z.isPlainObject(v)?Z.merge.call({caseless:x},y,v):Z.isPlainObject(v)?Z.merge({},v):Z.isArray(v)?v.slice():v}function a(y,v,E,x){if(Z.isUndefined(v)){if(!Z.isUndefined(y))return i(void 0,y,E,x)}else return i(y,v,E,x)}function l(y,v){if(!Z.isUndefined(v))return i(void 0,v)}function u(y,v){if(Z.isUndefined(v)){if(!Z.isUndefined(y))return i(void 0,y)}else return i(void 0,v)}function f(y,v,E){if(E in e)return i(y,v);if(E in n)return i(void 0,y)}const m={url:l,method:l,data:l,baseURL:u,transformRequest:u,transformResponse:u,paramsSerializer:u,timeout:u,timeoutMessage:u,withCredentials:u,withXSRFToken:u,adapter:u,responseType:u,xsrfCookieName:u,xsrfHeaderName:u,onUploadProgress:u,onDownloadProgress:u,decompress:u,maxContentLength:u,maxBodyLength:u,beforeRedirect:u,transport:u,httpAgent:u,httpsAgent:u,cancelToken:u,socketPath:u,responseEncoding:u,validateStatus:f,headers:(y,v,E)=>a(QE(y),QE(v),E,!0)};return Z.forEach(Object.keys(Object.assign({},n,e)),function(v){const E=m[v]||a,x=E(n[v],e[v],v);Z.isUndefined(x)&&E!==f||(t[v]=x)}),t}const Rw=n=>{const e=Aa({},n);let{data:t,withXSRFToken:i,xsrfHeaderName:a,xsrfCookieName:l,headers:u,auth:f}=e;e.headers=u=Sn.from(u),e.url=xw(Nw(e.baseURL,e.url,e.allowAbsoluteUrls),n.params,n.paramsSerializer),f&&u.set("Authorization","Basic "+btoa((f.username||"")+":"+(f.password?unescape(encodeURIComponent(f.password)):"")));let m;if(Z.isFormData(t)){if(un.hasStandardBrowserEnv||un.hasStandardBrowserWebWorkerEnv)u.setContentType(void 0);else if((m=u.getContentType())!==!1){const[y,...v]=m?m.split(";").map(E=>E.trim()).filter(Boolean):[];u.setContentType([y||"multipart/form-data",...v].join("; "))}}if(un.hasStandardBrowserEnv&&(i&&Z.isFunction(i)&&(i=i(e)),i||i!==!1&&i3(e.url))){const y=a&&l&&s3.read(l);y&&u.set(a,y)}return e},l3=typeof XMLHttpRequest<"u",c3=l3&&function(n){return new Promise(function(t,i){const a=Rw(n);let l=a.data;const u=Sn.from(a.headers).normalize();let{responseType:f,onUploadProgress:m,onDownloadProgress:y}=a,v,E,x,C,A;function k(){C&&C(),A&&A(),a.cancelToken&&a.cancelToken.unsubscribe(v),a.signal&&a.signal.removeEventListener("abort",v)}let O=new XMLHttpRequest;O.open(a.method.toUpperCase(),a.url,!0),O.timeout=a.timeout;function $(){if(!O)return;const z=Sn.from("getAllResponseHeaders"in O&&O.getAllResponseHeaders()),le={data:!f||f==="text"||f==="json"?O.responseText:O.response,status:O.status,statusText:O.statusText,headers:z,config:n,request:O};Cw(function(j){t(j),k()},function(j){i(j),k()},le),O=null}"onloadend"in O?O.onloadend=$:O.onreadystatechange=function(){!O||O.readyState!==4||O.status===0&&!(O.responseURL&&O.responseURL.indexOf("file:")===0)||setTimeout($)},O.onabort=function(){O&&(i(new Ie("Request aborted",Ie.ECONNABORTED,n,O)),O=null)},O.onerror=function(){i(new Ie("Network Error",Ie.ERR_NETWORK,n,O)),O=null},O.ontimeout=function(){let ce=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const le=a.transitional||ww;a.timeoutErrorMessage&&(ce=a.timeoutErrorMessage),i(new Ie(ce,le.clarifyTimeoutError?Ie.ETIMEDOUT:Ie.ECONNABORTED,n,O)),O=null},l===void 0&&u.setContentType(null),"setRequestHeader"in O&&Z.forEach(u.toJSON(),function(ce,le){O.setRequestHeader(le,ce)}),Z.isUndefined(a.withCredentials)||(O.withCredentials=!!a.withCredentials),f&&f!=="json"&&(O.responseType=a.responseType),y&&([x,A]=Ch(y,!0),O.addEventListener("progress",x)),m&&O.upload&&([E,C]=Ch(m),O.upload.addEventListener("progress",E),O.upload.addEventListener("loadend",C)),(a.cancelToken||a.signal)&&(v=z=>{O&&(i(!z||z.type?new il(null,n,O):z),O.abort(),O=null)},a.cancelToken&&a.cancelToken.subscribe(v),a.signal&&(a.signal.aborted?v():a.signal.addEventListener("abort",v)));const K=t3(a.url);if(K&&un.protocols.indexOf(K)===-1){i(new Ie("Unsupported protocol "+K+":",Ie.ERR_BAD_REQUEST,n));return}O.send(l||null)})},u3=(n,e)=>{const{length:t}=n=n?n.filter(Boolean):[];if(e||t){let i=new AbortController,a;const l=function(y){if(!a){a=!0,f();const v=y instanceof Error?y:this.reason;i.abort(v instanceof Ie?v:new il(v instanceof Error?v.message:v))}};let u=e&&setTimeout(()=>{u=null,l(new Ie(`timeout ${e} of ms exceeded`,Ie.ETIMEDOUT))},e);const f=()=>{n&&(u&&clearTimeout(u),u=null,n.forEach(y=>{y.unsubscribe?y.unsubscribe(l):y.removeEventListener("abort",l)}),n=null)};n.forEach(y=>y.addEventListener("abort",l));const{signal:m}=i;return m.unsubscribe=()=>Z.asap(f),m}},d3=function*(n,e){let t=n.byteLength;if(t<e){yield n;return}let i=0,a;for(;i<t;)a=i+e,yield n.slice(i,a),i=a},h3=async function*(n,e){for await(const t of f3(n))yield*d3(t,e)},f3=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const e=n.getReader();try{for(;;){const{done:t,value:i}=await e.read();if(t)break;yield i}}finally{await e.cancel()}},WE=(n,e,t,i)=>{const a=h3(n,e);let l=0,u,f=m=>{u||(u=!0,i&&i(m))};return new ReadableStream({async pull(m){try{const{done:y,value:v}=await a.next();if(y){f(),m.close();return}let E=v.byteLength;if(t){let x=l+=E;t(x)}m.enqueue(new Uint8Array(v))}catch(y){throw f(y),y}},cancel(m){return f(m),a.return()}},{highWaterMark:2})},df=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Iw=df&&typeof ReadableStream=="function",m3=df&&(typeof TextEncoder=="function"?(n=>e=>n.encode(e))(new TextEncoder):async n=>new Uint8Array(await new Response(n).arrayBuffer())),Ow=(n,...e)=>{try{return!!n(...e)}catch{return!1}},p3=Iw&&Ow(()=>{let n=!1;const e=new Request(un.origin,{body:new ReadableStream,method:"POST",get duplex(){return n=!0,"half"}}).headers.has("Content-Type");return n&&!e}),XE=64*1024,mg=Iw&&Ow(()=>Z.isReadableStream(new Response("").body)),Nh={stream:mg&&(n=>n.body)};df&&(n=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Nh[e]&&(Nh[e]=Z.isFunction(n[e])?t=>t[e]():(t,i)=>{throw new Ie(`Response type '${e}' is not supported`,Ie.ERR_NOT_SUPPORT,i)})})})(new Response);const g3=async n=>{if(n==null)return 0;if(Z.isBlob(n))return n.size;if(Z.isSpecCompliantForm(n))return(await new Request(un.origin,{method:"POST",body:n}).arrayBuffer()).byteLength;if(Z.isArrayBufferView(n)||Z.isArrayBuffer(n))return n.byteLength;if(Z.isURLSearchParams(n)&&(n=n+""),Z.isString(n))return(await m3(n)).byteLength},y3=async(n,e)=>{const t=Z.toFiniteNumber(n.getContentLength());return t??g3(e)},v3=df&&(async n=>{let{url:e,method:t,data:i,signal:a,cancelToken:l,timeout:u,onDownloadProgress:f,onUploadProgress:m,responseType:y,headers:v,withCredentials:E="same-origin",fetchOptions:x}=Rw(n);y=y?(y+"").toLowerCase():"text";let C=u3([a,l&&l.toAbortSignal()],u),A;const k=C&&C.unsubscribe&&(()=>{C.unsubscribe()});let O;try{if(m&&p3&&t!=="get"&&t!=="head"&&(O=await y3(v,i))!==0){let le=new Request(e,{method:"POST",body:i,duplex:"half"}),ye;if(Z.isFormData(i)&&(ye=le.headers.get("content-type"))&&v.setContentType(ye),le.body){const[j,N]=YE(O,Ch(KE(m)));i=WE(le.body,XE,j,N)}}Z.isString(E)||(E=E?"include":"omit");const $="credentials"in Request.prototype;A=new Request(e,{...x,signal:C,method:t.toUpperCase(),headers:v.normalize().toJSON(),body:i,duplex:"half",credentials:$?E:void 0});let K=await fetch(A);const z=mg&&(y==="stream"||y==="response");if(mg&&(f||z&&k)){const le={};["status","statusText","headers"].forEach(R=>{le[R]=K[R]});const ye=Z.toFiniteNumber(K.headers.get("content-length")),[j,N]=f&&YE(ye,Ch(KE(f),!0))||[];K=new Response(WE(K.body,XE,j,()=>{N&&N(),k&&k()}),le)}y=y||"text";let ce=await Nh[Z.findKey(Nh,y)||"text"](K,n);return!z&&k&&k(),await new Promise((le,ye)=>{Cw(le,ye,{data:ce,headers:Sn.from(K.headers),status:K.status,statusText:K.statusText,config:n,request:A})})}catch($){throw k&&k(),$&&$.name==="TypeError"&&/Load failed|fetch/i.test($.message)?Object.assign(new Ie("Network Error",Ie.ERR_NETWORK,n,A),{cause:$.cause||$}):Ie.from($,$&&$.code,n,A)}}),pg={http:PM,xhr:c3,fetch:v3};Z.forEach(pg,(n,e)=>{if(n){try{Object.defineProperty(n,"name",{value:e})}catch{}Object.defineProperty(n,"adapterName",{value:e})}});const ZE=n=>`- ${n}`,_3=n=>Z.isFunction(n)||n===null||n===!1,Dw={getAdapter:n=>{n=Z.isArray(n)?n:[n];const{length:e}=n;let t,i;const a={};for(let l=0;l<e;l++){t=n[l];let u;if(i=t,!_3(t)&&(i=pg[(u=String(t)).toLowerCase()],i===void 0))throw new Ie(`Unknown adapter '${u}'`);if(i)break;a[u||"#"+l]=i}if(!i){const l=Object.entries(a).map(([f,m])=>`adapter ${f} `+(m===!1?"is not supported by the environment":"is not available in the build"));let u=e?l.length>1?`since :
`+l.map(ZE).join(`
`):" "+ZE(l[0]):"as no adapter specified";throw new Ie("There is no suitable adapter to dispatch the request "+u,"ERR_NOT_SUPPORT")}return i},adapters:pg};function kp(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new il(null,n)}function JE(n){return kp(n),n.headers=Sn.from(n.headers),n.data=Mp.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),Dw.getAdapter(n.adapter||ou.adapter)(n).then(function(i){return kp(n),i.data=Mp.call(n,n.transformResponse,i),i.headers=Sn.from(i.headers),i},function(i){return Sw(i)||(kp(n),i&&i.response&&(i.response.data=Mp.call(n,n.transformResponse,i.response),i.response.headers=Sn.from(i.response.headers))),Promise.reject(i)})}const Pw="1.9.0",hf={};["object","boolean","number","function","string","symbol"].forEach((n,e)=>{hf[n]=function(i){return typeof i===n||"a"+(e<1?"n ":" ")+n}});const e1={};hf.transitional=function(e,t,i){function a(l,u){return"[Axios v"+Pw+"] Transitional option '"+l+"'"+u+(i?". "+i:"")}return(l,u,f)=>{if(e===!1)throw new Ie(a(u," has been removed"+(t?" in "+t:"")),Ie.ERR_DEPRECATED);return t&&!e1[u]&&(e1[u]=!0,console.warn(a(u," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(l,u,f):!0}};hf.spelling=function(e){return(t,i)=>(console.warn(`${i} is likely a misspelling of ${e}`),!0)};function b3(n,e,t){if(typeof n!="object")throw new Ie("options must be an object",Ie.ERR_BAD_OPTION_VALUE);const i=Object.keys(n);let a=i.length;for(;a-- >0;){const l=i[a],u=e[l];if(u){const f=n[l],m=f===void 0||u(f,l,n);if(m!==!0)throw new Ie("option "+l+" must be "+m,Ie.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new Ie("Unknown option "+l,Ie.ERR_BAD_OPTION)}}const th={assertOptions:b3,validators:hf},Or=th.validators;let va=class{constructor(e){this.defaults=e||{},this.interceptors={request:new GE,response:new GE}}async request(e,t){try{return await this._request(e,t)}catch(i){if(i instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const l=a.stack?a.stack.replace(/^.+\n/,""):"";try{i.stack?l&&!String(i.stack).endsWith(l.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+l):i.stack=l}catch{}}throw i}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=Aa(this.defaults,t);const{transitional:i,paramsSerializer:a,headers:l}=t;i!==void 0&&th.assertOptions(i,{silentJSONParsing:Or.transitional(Or.boolean),forcedJSONParsing:Or.transitional(Or.boolean),clarifyTimeoutError:Or.transitional(Or.boolean)},!1),a!=null&&(Z.isFunction(a)?t.paramsSerializer={serialize:a}:th.assertOptions(a,{encode:Or.function,serialize:Or.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),th.assertOptions(t,{baseUrl:Or.spelling("baseURL"),withXsrfToken:Or.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let u=l&&Z.merge(l.common,l[t.method]);l&&Z.forEach(["delete","get","head","post","put","patch","common"],A=>{delete l[A]}),t.headers=Sn.concat(u,l);const f=[];let m=!0;this.interceptors.request.forEach(function(k){typeof k.runWhen=="function"&&k.runWhen(t)===!1||(m=m&&k.synchronous,f.unshift(k.fulfilled,k.rejected))});const y=[];this.interceptors.response.forEach(function(k){y.push(k.fulfilled,k.rejected)});let v,E=0,x;if(!m){const A=[JE.bind(this),void 0];for(A.unshift.apply(A,f),A.push.apply(A,y),x=A.length,v=Promise.resolve(t);E<x;)v=v.then(A[E++],A[E++]);return v}x=f.length;let C=t;for(E=0;E<x;){const A=f[E++],k=f[E++];try{C=A(C)}catch(O){k.call(this,O);break}}try{v=JE.call(this,C)}catch(A){return Promise.reject(A)}for(E=0,x=y.length;E<x;)v=v.then(y[E++],y[E++]);return v}getUri(e){e=Aa(this.defaults,e);const t=Nw(e.baseURL,e.url,e.allowAbsoluteUrls);return xw(t,e.params,e.paramsSerializer)}};Z.forEach(["delete","get","head","options"],function(e){va.prototype[e]=function(t,i){return this.request(Aa(i||{},{method:e,url:t,data:(i||{}).data}))}});Z.forEach(["post","put","patch"],function(e){function t(i){return function(l,u,f){return this.request(Aa(f||{},{method:e,headers:i?{"Content-Type":"multipart/form-data"}:{},url:l,data:u}))}}va.prototype[e]=t(),va.prototype[e+"Form"]=t(!0)});let E3=class jw{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(l){t=l});const i=this;this.promise.then(a=>{if(!i._listeners)return;let l=i._listeners.length;for(;l-- >0;)i._listeners[l](a);i._listeners=null}),this.promise.then=a=>{let l;const u=new Promise(f=>{i.subscribe(f),l=f}).then(a);return u.cancel=function(){i.unsubscribe(l)},u},e(function(l,u,f){i.reason||(i.reason=new il(l,u,f),t(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=i=>{e.abort(i)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new jw(function(a){e=a}),cancel:e}}};function T3(n){return function(t){return n.apply(null,t)}}function x3(n){return Z.isObject(n)&&n.isAxiosError===!0}const gg={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(gg).forEach(([n,e])=>{gg[e]=n});function Mw(n){const e=new va(n),t=dw(va.prototype.request,e);return Z.extend(t,va.prototype,e,{allOwnKeys:!0}),Z.extend(t,e,null,{allOwnKeys:!0}),t.create=function(a){return Mw(Aa(n,a))},t}const mt=Mw(ou);mt.Axios=va;mt.CanceledError=il;mt.CancelToken=E3;mt.isCancel=Sw;mt.VERSION=Pw;mt.toFormData=uf;mt.AxiosError=Ie;mt.Cancel=mt.CanceledError;mt.all=function(e){return Promise.all(e)};mt.spread=T3;mt.isAxiosError=x3;mt.mergeConfig=Aa;mt.AxiosHeaders=Sn;mt.formToJSON=n=>Aw(Z.isHTMLForm(n)?new FormData(n):n);mt.getAdapter=Dw.getAdapter;mt.HttpStatusCode=gg;mt.default=mt;const{Axios:$3,AxiosError:Y3,CanceledError:K3,isCancel:Q3,CancelToken:W3,VERSION:X3,all:Z3,Cancel:J3,isAxiosError:ek,spread:tk,toFormData:nk,AxiosHeaders:rk,HttpStatusCode:ik,formToJSON:sk,getAdapter:ak,mergeConfig:ok}=mt,kw=()=>localStorage.getItem("huggingface_api_key")||".",w3=async(n,e,t)=>{var i;try{const a=kw();if(!a||a.trim()==="")return console.log("No hay API key configurada para Hugging Face, usando fallback local"),t1(n,e,t);const u=mt.create({baseURL:"https://api-inference.huggingface.co/models/HuggingFaceH4/zephyr-7b-beta",headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}});let f="";const m=e.slice(-5);for(const O of m)O.sender==="agent"?f+=`Agente: ${O.message}
`:f+=`Cliente: ${O.message}
`;const y=`<|system|>
Eres un asistente especializado en analizar mensajes en un contexto de cobranza. Tu tarea es categorizar la respuesta del cliente.

IMPORTANTE: NUNCA debes mencionar montos específicos de deuda. Habla siempre en términos de "deuda pendiente" o porcentajes, nunca valores monetarios exactos.

El cliente tiene las siguientes características:
- Relación/Cercanía: ${t.relationship}/100
- Historial de Pago: ${t.history}/100
- Actitud: ${t.attitude}/100
- Sensibilidad a Presión: ${t.sensitivity}/100
- Probabilidad de Pago: ${t.probability}/100

Historial reciente de la conversación: 
${f}
<|user|>
Clasifica este mensaje del cliente: "${n}"

Elige UNA de estas categorías EXACTAS sin explicación:
- neutral
- accepts_payment
- offers_partial
- reschedule
- evades
- annoyed
- refuses
- thanks
- no_answer
- confirms_payment
<|assistant|>`;console.log("Enviando solicitud a Hugging Face API para análisis...");const v=await u.post("",{inputs:y,parameters:{max_new_tokens:20,temperature:.1,top_p:.95,do_sample:!0,return_full_text:!1}});console.log("Respuesta de Hugging Face:",v.data);let E="";Array.isArray(v.data)?E=((i=v.data[0])==null?void 0:i.generated_text)||"":E=v.data.generated_text||"";let x="neutral";const C=["neutral","accepts_payment","offers_partial","reschedule","evades","annoyed","refuses","thanks","no_answer","confirms_payment"];for(const O of C)if(E.toLowerCase().includes(O)){x=O;break}const A={neutral:{relationship:0,history:0,attitude:0,sensitivity:0,probability:0},accepts_payment:{relationship:5,history:10,attitude:10,sensitivity:-5,probability:20},offers_partial:{relationship:5,history:5,attitude:10,sensitivity:-5,probability:15},reschedule:{relationship:2,history:-5,attitude:5,sensitivity:0,probability:-5},evades:{relationship:-5,history:-5,attitude:-10,sensitivity:5,probability:-10},annoyed:{relationship:-10,history:-5,attitude:-15,sensitivity:10,probability:-15},refuses:{relationship:-20,history:-20,attitude:-20,sensitivity:20,probability:-30},thanks:{relationship:5,history:0,attitude:10,sensitivity:-5,probability:10},no_answer:{relationship:-5,history:-10,attitude:-5,sensitivity:0,probability:-10},confirms_payment:{relationship:10,history:20,attitude:20,sensitivity:-10,probability:30}},k=A[x]||A.neutral;return console.log(`Evento detectado por Zephyr: "${x}" con deltas:`,k),{eventType:x,deltas:k,explanation:`Evento detectado por Zephyr: "${x}"`,confidence:.8}}catch(a){return console.error("Error al analizar mensaje con Zephyr:",a),console.log("Usando fallback local debido al error"),t1(n)}},A3=async(n,e,t,i)=>{var a;try{const l=kw();if(!l||l.trim()==="")return console.log("No hay API key configurada para Hugging Face, usando fallback local"),n1(n,e,t,i);const f=mt.create({baseURL:"https://api-inference.huggingface.co/models/HuggingFaceH4/zephyr-7b-beta",headers:{Authorization:`Bearer ${l}`,"Content-Type":"application/json"}});let m="";const y=n.slice(-6);for(const A of y)A.sender==="agent"?m+=`Agente: ${A.message}
`:m+=`Cliente: ${A.message}
`;let v="neutral";e.relationship>70?v=e.sensitivity>70?"amistoso sin presión":"amistoso directo":e.relationship<40&&(v=e.sensitivity<40?"formal directo":"formal suave");const E=`<|system|>
Eres un agente de cobranza de la empresa Acriventas. Tu objetivo es obtener el pago de una deuda pendiente mientras mantienes una buena relación con el cliente.

INSTRUCCIONES IMPORTANTES: 
1. NUNCA menciones montos específicos de dinero o deuda en tus respuestas.
2. Siempre habla en términos de "deuda pendiente" o usando porcentajes, no valores exactos.
3. No repitas los montos que el cliente mencione en sus mensajes.
4. Sé siempre respetuoso y profesional.

Debes usar un tono "${v}" basado en el perfil del cliente:
- Relación/Cercanía: ${e.relationship}/100
- Historial de Pago: ${e.history}/100
- Actitud: ${e.attitude}/100
- Sensibilidad a Presión: ${e.sensitivity}/100
- Probabilidad de Pago: ${e.probability}/100

Historial reciente de la conversación:
${m}

El último mensaje del cliente fue: "${t}"
El tipo de evento detectado es: "${i}"
<|user|>
Genera una respuesta empática y efectiva como agente de cobranza. La respuesta debe ser concisa (máximo 2 frases), adaptada al perfil del cliente, enfocada en lograr el pago de la deuda, y NUNCA debe mencionar montos específicos de dinero.
<|assistant|>`;console.log("Enviando solicitud para generar respuesta a Hugging Face API...");const x=await f.post("",{inputs:E,parameters:{max_new_tokens:100,temperature:.7,top_p:.95,do_sample:!0,return_full_text:!1}});console.log("Respuesta de Hugging Face para generación:",x.data);let C="";return Array.isArray(x.data)?C=((a=x.data[0])==null?void 0:a.generated_text)||"":C=x.data.generated_text||"",C=C.trim(),C||(C="Entiendo. ¿Podría por favor indicarnos cuándo podríamos esperar el pago de su deuda pendiente?"),console.log(`Respuesta generada por Zephyr usando tono "${v}": ${C}`),{responseText:C,explanation:`Respuesta generada por Zephyr usando tono "${v}"`,confidence:.8}}catch(l){return console.error("Error al generar respuesta con Zephyr:",l),console.log("Usando fallback local para respuesta debido al error"),n1(n,e,t,i)}},t1=(n,e,t)=>{const i=n.toLowerCase();let a="neutral";i.includes("pagar")||i.includes("transferir")||i.includes("depositar")?i.includes("completo")||i.includes("todo")?a="accepts_payment":i.includes("parte")||i.includes("parcial")||i.includes("algo")?a="offers_partial":(i.includes("próxima")||i.includes("después")||i.includes("luego"))&&(a="reschedule"):i.includes("gracias")||i.includes("agradezco")?a="thanks":i.includes("ya pagué")||i.includes("realicé el pago")||i.includes("transferí")?a="confirms_payment":i.includes("no puedo")||i.includes("imposible")?a="evades":i.includes("molesto")||i.includes("harto")||i.includes("fastidio")?a="annoyed":(i.includes("no voy a pagar")||i.includes("no pagaré")||i.includes("olvídate"))&&(a="refuses");const l={neutral:{relationship:0,history:0,attitude:0,sensitivity:0,probability:0},accepts_payment:{relationship:5,history:10,attitude:10,sensitivity:-5,probability:20},offers_partial:{relationship:5,history:5,attitude:10,sensitivity:-5,probability:15},reschedule:{relationship:2,history:-5,attitude:5,sensitivity:0,probability:-5},evades:{relationship:-5,history:-5,attitude:-10,sensitivity:5,probability:-10},annoyed:{relationship:-10,history:-5,attitude:-15,sensitivity:10,probability:-15},refuses:{relationship:-20,history:-20,attitude:-20,sensitivity:20,probability:-30},thanks:{relationship:5,history:0,attitude:10,sensitivity:-5,probability:10},no_answer:{relationship:-5,history:-10,attitude:-5,sensitivity:0,probability:-10},confirms_payment:{relationship:10,history:20,attitude:20,sensitivity:-10,probability:30}},u=l[a]||l.neutral;return console.log(`Evento detectado por fallback: "${a}" con deltas:`,u),{eventType:a,deltas:u,explanation:`Evento detectado por fallback: "${a}" basado en palabras clave.`,confidence:.6}},n1=(n,e,t,i)=>{let a="neutral";e.relationship>70?e.sensitivity>70?a="friendly_no_pressure":a="friendly":e.relationship<40&&(e.sensitivity<40?a="formal_direct":a="formal_soft");const l={accepts_payment:{friendly_no_pressure:"¡Excelente noticia! Gracias por tu disposición. Cuando puedas hacer el pago, solo avísame.",friendly:"¡Perfecto! Muchas gracias por tu colaboración. ¿Te envío los datos para el pago?",formal_direct:"Muy bien. Le agradecemos su decisión. Necesitamos que realice el pago antes del fin de semana.",formal_soft:"Gracias por su confirmación. ¿Prefiere que le enviemos los datos bancarios por este medio?",neutral:"Entendido. ¿Desea que le enviemos la información para realizar el pago?"},offers_partial:{friendly_no_pressure:"Agradezco mucho tu esfuerzo por pagar una parte. Cualquier aporte es bienvenido.",friendly:"Gracias por tu disposición. Un pago parcial nos ayuda mucho. ¿Cuándo podrías realizar este abono?",formal_direct:"Tomamos nota de su oferta de pago parcial. ¿Cuándo podríamos esperar el resto del monto pendiente?",formal_soft:"Entendemos su situación. El pago parcial es un buen primer paso. ¿Cuándo sería posible?",neutral:"De acuerdo con el pago parcial. ¿Qué porcentaje de la deuda podría transferir y cuándo?"},reschedule:{friendly_no_pressure:"No hay problema, entiendo que necesitas reprogramar. ¿Qué fecha te resultaría más conveniente?",friendly:"Claro que podemos ajustar la fecha. ¿Cuál sería el mejor momento para ti?",formal_direct:"Podemos considerar una nueva fecha. ¿Cuál es su propuesta concreta para el pago?",formal_soft:"Entendemos la necesidad de reprogramar. ¿Qué fecha le resultaría adecuada para realizar el pago?",neutral:"De acuerdo. ¿Cuál sería la nueva fecha propuesta para el pago?"},evades:{friendly_no_pressure:"Entiendo que quizás no es el mejor momento para hablar de esto. ¿Te parece si retomamos la conversación en otro momento?",friendly:"Noto que es un tema delicado. ¿Hay algo específico que podamos resolver para facilitar el pago?",formal_direct:"Necesitamos una respuesta concreta respecto al pago pendiente. ¿Podría indicarnos su plan de acción?",formal_soft:"Entendemos que pueda ser un tema complicado. ¿Podríamos concretar cuándo sería posible abordar el pago?",neutral:"¿Podría por favor indicarnos cuál es su situación respecto al pago pendiente?"},annoyed:{friendly_no_pressure:"Lamento si te he incomodado. No es mi intención molestar, solo buscamos encontrar una solución que funcione para ambos.",friendly:"Disculpa si te he molestado. ¿Qué podríamos hacer para resolver esta situación de la mejor manera?",formal_direct:"Entendemos su molestia. Sin embargo, necesitamos resolver el tema del pago pendiente. ¿Qué solución propone?",formal_soft:"Lamentamos si esta comunicación le resulta incómoda. ¿Habría un mejor momento o forma para abordar el tema?",neutral:"Entiendo. ¿Cómo preferiría que manejemos esta situación para llegar a una solución?"},refuses:{friendly_no_pressure:"Entiendo tu posición. Quizás podríamos explorar algunas alternativas que se ajusten mejor a tu situación actual.",friendly:"Comprendo que sea difícil en este momento. ¿Podríamos considerar opciones de pago más flexibles?",formal_direct:"Tomamos nota de su negativa. Sin embargo, la deuda permanece vigente. ¿Podríamos discutir alternativas de pago?",formal_soft:"Entendemos que pueda tener dificultades. ¿Le interesaría conocer otras opciones disponibles para resolver esta situación?",neutral:"¿Podríamos explorar alternativas que faciliten el pago de la deuda pendiente?"},thanks:{friendly_no_pressure:"¡No hay de qué! Estamos aquí para ayudarte. Si necesitas cualquier cosa, no dudes en hacérmelo saber.",friendly:"Es un placer poder ser de ayuda. ¿Hay algo más en lo que pueda asistirte?",formal_direct:"De nada. ¿Podríamos entonces confirmar cuándo realizará el pago?",formal_soft:"Nos alegra poder serle de utilidad. ¿Necesita alguna otra información para proceder?",neutral:"De nada. ¿Tiene alguna otra consulta respecto al pago?"},confirms_payment:{friendly_no_pressure:"¡Excelente noticia! Muchas gracias por tu pago. Verificaremos y te confirmaremos en cuanto se refleje en nuestro sistema.",friendly:"¡Genial! Gracias por confirmar tu pago. Lo verificaremos a la brevedad y te daremos el comprobante.",formal_direct:"Gracias por su confirmación. Procederemos a verificar el pago y le notificaremos cuando esté procesado.",formal_soft:"Agradecemos su pago. Realizaremos la verificación correspondiente y le informaremos una vez completado el proceso.",neutral:"Gracias por informarnos. Verificaremos el pago y actualizaremos el estado de su cuenta."},default:{friendly_no_pressure:"Entiendo perfectamente. No te preocupes, cuando puedas realizar el pago me avisas.",friendly:"Agradezco que estemos en contacto. ¿Hay algo en lo que pueda ayudarte para facilitar el proceso?",formal_direct:"Necesitamos regularizar su situación. ¿Podría por favor indicarnos una fecha concreta de pago?",formal_soft:"Entendemos que pueden surgir contratiempos. ¿Podría comentarnos cuándo le sería posible realizar el pago?",neutral:"¿Podría por favor indicarnos cuándo podríamos esperar el pago de la deuda pendiente?"}},u=l[i]||l.default,f=u[a]||u.neutral;return console.log(`Respuesta generada por fallback usando tono "${a}": ${f}`),{responseText:f,explanation:`Respuesta generada por fallback usando tono "${a}"`,confidence:.7}},Vw=()=>localStorage.getItem("openai_api_key")||"",S3=async n=>{try{const e=await xy(n,3);if(e.length===0)return null;let t=`=== HISTORIAL PREVIO CON ESTE CLIENTE ===
`;return e.forEach((i,a)=>{i.turns&&i.turns.length>0&&(t+=`
--- Conversación ${a+1} ---
`,i.turns.slice(-6).forEach(u=>{const f=u.sender==="agent"?"Agente":"Cliente";t+=`${f}: ${u.message}
`}),i.summary&&i.summary.result&&(t+=`Resultado: ${i.summary.result}
`,i.summary.notes&&(t+=`Notas: ${i.summary.notes}
`)))}),t}catch(e){return console.error("Error obteniendo contexto previo:",e),null}},C3=async(n,e)=>{try{const t=await su(),i=e*.3,a=t.filter(f=>f.id!==n.id&&f.debt>=e-i&&f.debt<=e+i);if(a.length===0)return null;const l=a.map(f=>{if(!f.soul)return null;const m=Math.abs(f.soul.relationship-n.relationship)+Math.abs(f.soul.attitude-n.attitude)+Math.abs(f.soul.sensitivity-n.sensitivity)+Math.abs(f.soul.probability-n.probability);return{client:f,similarity:m}}).filter(f=>f!==null).sort((f,m)=>f.similarity-m.similarity).slice(0,2);if(l.length===0)return null;let u=`=== CONTEXTO DE CLIENTES SIMILARES ===
`;u+=`(Clientes con perfil similar: deuda parecida, características del alma similares)

`;for(const{client:f}of l){const m=await xy(f.id,2);m.length>0&&(u+=`--- Estilo conversacional de cliente similar ---
`,u+=`Perfil del alma: R:${f.soul.relationship} A:${f.soul.attitude} S:${f.soul.sensitivity} P:${f.soul.probability}
`,m.forEach(y=>{y.turns&&y.turns.length>0&&(y.turns.slice(-4).forEach(E=>{const x=E.sender==="agent"?"Agente":"Cliente";u+=`${x}: ${E.message}
`}),y.summary&&(u+=`Resultado: ${y.summary.result}
`),u+=`
`)}))}return u}catch(t){return console.error("Error obteniendo contexto de clientes similares:",t),null}},Lw=async(n,e,t,i=!1)=>{const a=await S3(n),l=a?null:await C3(e,e.debt||0);let u="";a?u=a:l?u=l:u=`=== SIN CONTEXTO PREVIO ===
Esta es la primera interacción registrada con este tipo de perfil.
`;let f="";t&&t.length>0&&(f=`
=== CONVERSACIÓN ACTUAL ===
`,t.slice(-8).forEach(v=>{const E=v.sender==="agent"?"Agente":"Cliente";f+=`${E}: ${v.message}
`,v.event&&v.event!=="neutral"&&(f+=`[Evento detectado: ${v.event}]
`)}));const m=t&&t.length>0?t[t.length-1].phase||"negotiation":"greeting",y={greeting:"FASE 1 - SALUDO: Establecer contacto inicial, identificarse y crear rapport",debt_notification:"FASE 2 - COMUNICACIÓN DE DEUDA: Informar sobre la deuda pendiente de manera clara",negotiation:"FASE 3 - NEGOCIACIÓN: Buscar acuerdo de pago, manejar objeciones",payment_confirmation:"FASE 4 - CONCRETAR PAGO: Facilitar los datos de pago y confirmar compromisos",farewell:"FASE 5 - DESPEDIDA: Cerrar la conversación de manera cordial y profesional"};return{contextSection:u,currentConversation:f,currentPhase:m,phaseDescription:y[m]||y.negotiation}},N3=async(n,e,t)=>{var i,a,l;try{const u=Vw();if(!u||u.trim()==="")return console.log("No hay API key configurada para OpenAI, usando fallback local"),r1(n,e,t);const m=mt.create({baseURL:"https://api.openai.com/v1/chat/completions".replace("/chat/completions",""),headers:{Authorization:`Bearer ${u}`,"Content-Type":"application/json"}}),y=await Lw(t.clientId,t,e,!0),v=`Eres un especialista en análisis de comunicaciones para cobranza. Tu tarea es categorizar respuestas de clientes.

IMPORTANTE: NUNCA menciones montos específicos de deuda. Habla siempre en términos generales.

${y.contextSection}

PERFIL ACTUAL DEL CLIENTE:
- Relación/Cercanía: ${t.relationship}/100
- Historial de Pago: ${t.history}/100  
- Actitud: ${t.attitude}/100
- Sensibilidad a Presión: ${t.sensitivity}/100
- Probabilidad de Pago: ${t.probability}/100

FASE ACTUAL: ${y.phaseDescription}

${y.currentConversation}

INSTRUCCIONES:
Analiza el siguiente mensaje del cliente y clasifícalo en UNA de estas categorías EXACTAS:
- neutral
- accepts_payment
- offers_partial  
- reschedule
- evades
- annoyed
- refuses
- thanks
- no_answer
- confirms_payment

Responde SOLO con la categoría, sin explicaciones adicionales.`,E=`Mensaje del cliente a analizar: "${n}"`;console.log("Enviando solicitud a OpenAI API para análisis...");const x=await m.post("/chat/completions",{model:"gpt-3.5-turbo",messages:[{role:"system",content:v},{role:"user",content:E}],max_tokens:20,temperature:.1});console.log("Respuesta de OpenAI:",x.data);let C=((l=(a=(i=x.data.choices[0])==null?void 0:i.message)==null?void 0:a.content)==null?void 0:l.trim())||"",A="neutral";const k=["neutral","accepts_payment","offers_partial","reschedule","evades","annoyed","refuses","thanks","no_answer","confirms_payment"];for(const K of k)if(C.toLowerCase().includes(K)){A=K;break}const O={neutral:{relationship:0,history:0,attitude:0,sensitivity:0,probability:0},accepts_payment:{relationship:5,history:10,attitude:10,sensitivity:-5,probability:20},offers_partial:{relationship:5,history:5,attitude:10,sensitivity:-5,probability:15},reschedule:{relationship:2,history:-5,attitude:5,sensitivity:0,probability:-5},evades:{relationship:-5,history:-5,attitude:-10,sensitivity:5,probability:-10},annoyed:{relationship:-10,history:-5,attitude:-15,sensitivity:10,probability:-15},refuses:{relationship:-20,history:-20,attitude:-20,sensitivity:20,probability:-30},thanks:{relationship:5,history:0,attitude:10,sensitivity:-5,probability:10},no_answer:{relationship:-5,history:-10,attitude:-5,sensitivity:0,probability:-10},confirms_payment:{relationship:10,history:20,attitude:20,sensitivity:-10,probability:30}},$=O[A]||O.neutral;return console.log(`Evento detectado por OpenAI: "${A}" con deltas:`,$),{eventType:A,deltas:$,explanation:`Evento detectado por OpenAI: "${A}" con contexto de conversaciones previas`,confidence:.9}}catch(u){return console.error("Error al analizar mensaje con OpenAI:",u),console.log("Usando fallback local debido al error"),r1(n)}},R3=async(n,e,t,i)=>{var a,l,u;try{const f=Vw();if(!f||f.trim()==="")return console.log("No hay API key configurada para OpenAI, usando fallback local"),i1(n,e,t,i);const y=mt.create({baseURL:"https://api.openai.com/v1/chat/completions".replace("/chat/completions",""),headers:{Authorization:`Bearer ${f}`,"Content-Type":"application/json"}}),v=await Lw(e.clientId,e,n,!1);let E="";e.relationship>70?E=e.sensitivity>70?"amistoso sin presión, muy empático y comprensivo":"amistoso pero directo, manteniendo cordialidad":e.relationship<40?E=e.sensitivity<40?"formal y directo, profesional pero firme":"formal y suave, profesional y considerado":E="profesional equilibrado, ni muy amistoso ni muy formal";const x=`Eres un agente de cobranza profesional de Acriventas. Tu objetivo es recuperar pagos pendientes manteniendo buenas relaciones con los clientes.

REGLAS FUNDAMENTALES:
1. NUNCA menciones montos específicos de dinero o deuda
2. Habla siempre en términos de "deuda pendiente" o "saldo pendiente"
3. Sé profesional, empático y orientado a soluciones
4. Adapta tu tono al perfil del cliente

${v.contextSection}

PERFIL ACTUAL DEL CLIENTE:
- Relación/Cercanía: ${e.relationship}/100
- Historial de Pago: ${e.history}/100
- Actitud: ${e.attitude}/100  
- Sensibilidad a Presión: ${e.sensitivity}/100
- Probabilidad de Pago: ${e.probability}/100

TONO RECOMENDADO: ${E}

FASE ACTUAL: ${v.phaseDescription}

${v.currentConversation}

ÚLTIMO MENSAJE DEL CLIENTE: "${t}"
EVENTO DETECTADO: "${i}"

INSTRUCCIONES ESPECÍFICAS POR FASE:
- SALUDO: Preséntate cordialmente, identifica al cliente, establece el motivo de la llamada
- COMUNICACIÓN DE DEUDA: Informa sobre la deuda de manera clara pero sin montos específicos
- NEGOCIACIÓN: Busca acuerdos de pago, maneja objeciones, ofrece alternativas flexibles
- CONCRETAR PAGO: Facilita el proceso de pago, confirma fechas y métodos
- DESPEDIDA: Cierra cordialmente, confirma acuerdos, agradece la colaboración

Genera UNA respuesta concisa (máximo 2 oraciones) adaptada al perfil del cliente y la situación actual.`,C=`Basándote en el contexto y el evento "${i}", genera una respuesta apropiada como agente de cobranza.`;console.log("Enviando solicitud para generar respuesta a OpenAI API...");const A=await y.post("/chat/completions",{model:"gpt-3.5-turbo",messages:[{role:"system",content:x},{role:"user",content:C}],max_tokens:150,temperature:.7});console.log("Respuesta de OpenAI para generación:",A.data);let k=((u=(l=(a=A.data.choices[0])==null?void 0:a.message)==null?void 0:l.content)==null?void 0:u.trim())||"";return k||(k="Entiendo su situación. ¿Podríamos coordinar una fecha para el pago de su deuda pendiente?"),console.log(`Respuesta generada por OpenAI usando tono "${E}": ${k}`),{responseText:k,explanation:`Respuesta generada por OpenAI con contexto de conversaciones previas y tono "${E}"`,confidence:.9}}catch(f){return console.error("Error al generar respuesta con OpenAI:",f),console.log("Usando fallback local para respuesta debido al error"),i1(n,e,t,i)}},r1=(n,e,t)=>{const i=n.toLowerCase();let a="neutral";i.includes("pagar")||i.includes("transferir")||i.includes("depositar")?i.includes("completo")||i.includes("todo")||i.includes("total")?a="accepts_payment":i.includes("parte")||i.includes("parcial")||i.includes("algo")||i.includes("abono")?a="offers_partial":i.includes("próxima")||i.includes("después")||i.includes("luego")||i.includes("semana")?a="reschedule":a="accepts_payment":i.includes("gracias")||i.includes("agradezco")||i.includes("agradecida")?a="thanks":i.includes("ya pagué")||i.includes("realicé el pago")||i.includes("transferí")||i.includes("consigné")?a="confirms_payment":i.includes("no puedo")||i.includes("imposible")||i.includes("difícil")?a="evades":i.includes("molesto")||i.includes("harto")||i.includes("fastidio")||i.includes("joder")?a="annoyed":(i.includes("no voy a pagar")||i.includes("no pagaré")||i.includes("olvídate")||i.includes("no pienso"))&&(a="refuses");const l={neutral:{relationship:0,history:0,attitude:0,sensitivity:0,probability:0},accepts_payment:{relationship:5,history:10,attitude:10,sensitivity:-5,probability:20},offers_partial:{relationship:5,history:5,attitude:10,sensitivity:-5,probability:15},reschedule:{relationship:2,history:-5,attitude:5,sensitivity:0,probability:-5},evades:{relationship:-5,history:-5,attitude:-10,sensitivity:5,probability:-10},annoyed:{relationship:-10,history:-5,attitude:-15,sensitivity:10,probability:-15},refuses:{relationship:-20,history:-20,attitude:-20,sensitivity:20,probability:-30},thanks:{relationship:5,history:0,attitude:10,sensitivity:-5,probability:10},no_answer:{relationship:-5,history:-10,attitude:-5,sensitivity:0,probability:-10},confirms_payment:{relationship:10,history:20,attitude:20,sensitivity:-10,probability:30}},u=l[a]||l.neutral;return console.log(`Evento detectado por fallback mejorado: "${a}" con deltas:`,u),{eventType:a,deltas:u,explanation:`Evento detectado por análisis local mejorado: "${a}" basado en patrones de lenguaje.`,confidence:.7}},i1=(n,e,t,i)=>{let a="neutral";e.relationship>70?e.sensitivity>70?a="friendly_no_pressure":a="friendly":e.relationship<40&&(e.sensitivity<40?a="formal_direct":a="formal_soft");const l={accepts_payment:{friendly_no_pressure:"¡Excelente! Me alegra mucho escuchar eso. Cuando pueda realizar el pago, solo avíseme y le envío toda la información necesaria.",friendly:"¡Perfecto! Muchas gracias por su disposición. ¿Le parece bien que le envíe los datos bancarios ahora mismo?",formal_direct:"Muy bien, agradecemos su decisión. Le voy a proporcionar los datos para que pueda realizar el pago antes del viernes.",formal_soft:"Gracias por su confirmación. ¿Prefiere que le envíe la información de pago por WhatsApp o por correo?",neutral:"Entendido. ¿Desea que le proporcione los datos bancarios para realizar el pago?"},offers_partial:{friendly_no_pressure:"Agradezco mucho su esfuerzo por hacer este abono. Cualquier pago nos ayuda bastante y valoramos su compromiso.",friendly:"Gracias por ofrecerse a hacer un abono. Eso nos ayuda mucho. ¿Cuándo podría realizar esta transferencia?",formal_direct:"Tomamos nota de su propuesta de pago parcial. ¿Podría indicarnos cuándo haría este abono y cuándo el saldo restante?",formal_soft:"Entendemos su situación y agradecemos su disposición. ¿Qué porcentaje de la deuda podría cubrir inicialmente?",neutral:"De acuerdo con el pago parcial. ¿Podríamos coordinar cuándo haría este primer abono?"},reschedule:{friendly_no_pressure:"No hay ningún problema, entiendo que necesita más tiempo. ¿Qué fecha le resultaría más cómoda?",friendly:"Claro que podemos ajustar la fecha. ¿Cuál sería el mejor momento para usted realizar el pago?",formal_direct:"Podemos considerar una nueva fecha. ¿Cuál es su propuesta concreta y definitiva para el pago?",formal_soft:"Entendemos la necesidad de reprogramar. ¿Qué fecha le resultaría más conveniente para realizar el pago?",neutral:"De acuerdo. ¿Cuál sería la nueva fecha propuesta para efectuar el pago?"},evades:{friendly_no_pressure:"Entiendo que puede ser un tema delicado. No se preocupe, podemos buscar juntos la mejor solución para su situación.",friendly:"Comprendo que es una situación compleja. ¿Hay algo específico que podamos resolver para facilitar el pago?",formal_direct:"Necesitamos una respuesta concreta sobre el pago pendiente. ¿Podría indicarnos cuál es su situación actual?",formal_soft:"Entendemos que pueda ser un tema complicado. ¿Podríamos programar una fecha para hablar con más tranquilidad?",neutral:"¿Podría por favor ayudarnos a entender cuál es su situación respecto al pago pendiente?"},annoyed:{friendly_no_pressure:"Lamento mucho si le he causado alguna molestia. No es mi intención incomodarle, solo buscamos encontrar una solución que funcione para ambas partes.",friendly:"Disculpe si le he generado alguna molestia. ¿Qué podríamos hacer diferente para resolver esta situación de la mejor manera?",formal_direct:"Entendemos su molestia, sin embargo necesitamos resolver el tema del pago pendiente. ¿Qué alternativa propone?",formal_soft:"Lamentamos si esta comunicación le resulta incómoda. ¿Habría un mejor momento o forma para abordar este tema?",neutral:"Comprendo su posición. ¿Cómo preferiría que manejáramos esta situación para llegar a una solución?"},refuses:{friendly_no_pressure:"Entiendo su posición actual. Quizás podríamos explorar algunas alternativas de pago que se ajusten mejor a su situación.",friendly:"Comprendo que sea difícil en este momento. ¿Podríamos considerar un plan de pagos más flexible?",formal_direct:"Tomamos nota de su respuesta. Sin embargo, la deuda permanece vigente. ¿Podríamos discutir alternativas viables?",formal_soft:"Entendemos que pueda tener dificultades. ¿Le interesaría conocer otras opciones de pago disponibles?",neutral:"¿Podríamos explorar alternativas que faciliten el pago de la deuda pendiente?"},thanks:{friendly_no_pressure:"¡No hay de qué! Es un placer poder ayudarle. Si necesita cualquier cosa adicional, no dude en contactarme.",friendly:"Es un gusto poder ser de ayuda. ¿Hay algo más en lo que pueda asistirle para facilitar el proceso?",formal_direct:"De nada. ¿Podríamos entonces confirmar cuándo realizará el pago de la deuda pendiente?",formal_soft:"Nos alegra poder serle de utilidad. ¿Necesita alguna información adicional para proceder con el pago?",neutral:"De nada. ¿Tiene alguna otra consulta respecto al proceso de pago?"},confirms_payment:{friendly_no_pressure:"¡Excelente noticia! Muchas gracias por realizar el pago. Vamos a verificarlo y le confirmaremos en cuanto se refleje en el sistema.",friendly:"¡Genial! Gracias por confirmar su pago. Lo verificaremos inmediatamente y le daremos el comprobante correspondiente.",formal_direct:"Gracias por su confirmación. Procederemos a verificar el pago y le notificaremos una vez esté procesado en el sistema.",formal_soft:"Agradecemos mucho su pago. Realizaremos la verificación correspondiente y le informaremos cuando esté todo listo.",neutral:"Gracias por informarnos. Verificaremos el pago y actualizaremos el estado de su cuenta."},default:{friendly_no_pressure:"Entiendo perfectamente su situación. No se preocupe, cuando pueda realizar el pago solo avíseme.",friendly:"Agradezco que mantengamos esta comunicación. ¿Hay algo en lo que pueda ayudarle para facilitar el proceso de pago?",formal_direct:"Necesitamos regularizar su situación de deuda pendiente. ¿Podría indicarnos una fecha específica de pago?",formal_soft:"Entendemos que pueden surgir inconvenientes. ¿Podría comentarnos cuándo le sería posible realizar el pago?",neutral:"¿Podría por favor indicarnos cuándo podríamos esperar el pago de la deuda pendiente?"}},u=l[i]||l.default,f=u[a]||u.neutral;return console.log(`Respuesta generada por fallback mejorado usando tono "${a}": ${f}`),{responseText:f,explanation:`Respuesta generada por análisis local mejorado usando tono "${a}" adaptado al perfil del cliente`,confidence:.8}},ot={GEMINI:"gemini",ZEPHYR:"zephyr",OPENAI:"openai"};let Yo=ot.OPENAI;const I3=n=>Object.values(ot).includes(n)?(Yo=n,!0):!1,O3=()=>Yo,D3=async(n,e,t)=>{switch(Yo){case ot.GEMINI:return $j(n);case ot.ZEPHYR:return w3(n,e,t);case ot.OPENAI:return N3(n,e,t);default:throw new Error(`Servicio de IA no reconocido: ${Yo}`)}},nh=async(n,e,t,i)=>{switch(Yo){case ot.GEMINI:return Yj(n,e,t,i);case ot.ZEPHYR:return A3(n,e,t,i);case ot.OPENAI:return R3(n,e,t,i);default:throw new Error(`Servicio de IA no reconocido: ${Yo}`)}},Uw=({phase:n,onChange:e})=>{const t=i=>{e(i.target.value)};return p.jsxs("div",{className:"form-group",children:[p.jsx("label",{className:"label",children:"Fase de la conversación"}),p.jsxs("select",{className:"input w-full",value:n,onChange:t,children:[p.jsx("option",{value:Ne.GREETING,children:"Fase 1: Saludo"}),p.jsx("option",{value:Ne.DEBT_NOTIFICATION,children:"Fase 2: Comunicación de deuda"}),p.jsx("option",{value:Ne.NEGOTIATION,children:"Fase 3: Negociación"}),p.jsx("option",{value:Ne.PAYMENT_CONFIRMATION,children:"Fase 4: Concretar pago"}),p.jsx("option",{value:Ne.FAREWELL,children:"Fase 5: Despedida"})]})]})},P3=()=>{const{clientId:n}=Eg(),{currentUser:e}=ru(),t=_n(),[i,a]=V.useState(null),[l,u]=V.useState(null),[f,m]=V.useState(null),[y,v]=V.useState([]),[E,x]=V.useState(""),[C,A]=V.useState(!0),[k,O]=V.useState(!1),[$,K]=V.useState(""),[z,ce]=V.useState(""),[le,ye]=V.useState("neutral"),[j,N]=V.useState(""),[R,P]=V.useState(Ne.GREETING),[U,B]=V.useState({relationship:0,history:0,attitude:0,sensitivity:0,probability:0}),D=V.useRef(null);V.useEffect(()=>{(async()=>{try{A(!0);const W=await ow(n);a(W),m(W.soul);const _e=await Ij(n,e.uid,W.soul);u(_e);const Ge=`Hola ${W.name}, le saluda ${e.displayName} de Acriventas. Me comunico con usted respecto a su deuda pendiente.`;N(Ge),K(Ge)}catch(W){console.error("Error al iniciar conversación:",W)}finally{A(!1)}})()},[n,e]),V.useEffect(()=>{var ne;(ne=D.current)==null||ne.scrollIntoView({behavior:"smooth"})},[y]);const bt=async()=>{if(!(!E.trim()||k))try{O(!0);const ne={id:`agent-${Date.now()}`,sender:"agent",message:E,phase:R,timestamp:new Date};v(W=>[...W,ne]),await zE(l,{sender:"agent",message:E,phase:R,event:"neutral"}),x(""),R===Ne.GREETING&&P(Ne.DEBT_NOTIFICATION)}catch(ne){console.error("Error al enviar mensaje:",ne)}finally{O(!1)}},st=async ne=>{const W=ne.target.value;if(ce(W),W.trim().split(/\s+/).length>3)try{const _e=await D3(W,y,f);ye(_e.eventType),B(_e.deltas)}catch(_e){console.error("Error al analizar mensaje:",_e)}},J=async()=>{if(!(!z.trim()||k))try{O(!0);const ne={id:`client-${Date.now()}`,sender:"client",message:z,phase:R,timestamp:new Date,event:le};v(Ge=>[...Ge,ne]);const W=await zE(l,{sender:"client",message:z,phase:R,event:le});m(W.currentSoul);const _e=await nh(y,W.currentSoul,z,le);K(_e.responseText),ce(""),ye("neutral"),B({relationship:0,history:0,attitude:0,sensitivity:0,probability:0}),le==="accepts_payment"&&R===Ne.NEGOTIATION&&P(Ne.PAYMENT_CONFIRMATION),le==="confirms_payment"&&R===Ne.PAYMENT_CONFIRMATION&&P(Ne.FAREWELL)}catch(ne){console.error("Error al agregar mensaje del cliente:",ne)}finally{O(!1)}},he=ne=>{const W=ne.target.value;ye(W);const _e={neutral:{relationship:0,history:0,attitude:0,sensitivity:0,probability:0},accepts_payment:{relationship:5,history:10,attitude:10,sensitivity:-5,probability:20},offers_partial:{relationship:5,history:5,attitude:10,sensitivity:-5,probability:15},reschedule:{relationship:2,history:-5,attitude:5,sensitivity:0,probability:-5},evades:{relationship:-5,history:-5,attitude:-10,sensitivity:5,probability:-10},annoyed:{relationship:-10,history:-5,attitude:-15,sensitivity:10,probability:-15},refuses:{relationship:-20,history:-20,attitude:-20,sensitivity:20,probability:-30},thanks:{relationship:5,history:0,attitude:10,sensitivity:-5,probability:10},no_answer:{relationship:-5,history:-10,attitude:-5,sensitivity:0,probability:-10},confirms_payment:{relationship:10,history:20,attitude:20,sensitivity:-10,probability:30}};B(_e[W]||_e.neutral)},ve=ne=>{P(ne)},Me=()=>{$&&(x($),K(""))},M=async ne=>{m(ne);try{await Mj(l,ne)}catch(W){console.error("Error al actualizar valores del alma:",W)}},oe=()=>{t(`/conversation/${l}`)};if(C)return p.jsx("div",{className:"container mx-auto px-4 py-6",children:p.jsxs("div",{className:"animate-pulse space-y-4",children:[p.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4"}),p.jsx("div",{className:"h-64 bg-gray-200 rounded"}),p.jsx("div",{className:"h-10 bg-gray-200 rounded"})]})});if(!i)return p.jsxs("div",{className:"container mx-auto px-4 py-6",children:[p.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:[p.jsx("strong",{className:"font-bold",children:"Error:"}),p.jsx("span",{className:"block sm:inline",children:" No se pudo encontrar el cliente."})]}),p.jsx("button",{className:"btn-secondary mt-4",onClick:()=>t(-1),children:"Volver"})]});const fe=y.reduce((ne,W)=>{const _e=W.phase||Ne.NEGOTIATION;return ne[_e]||(ne[_e]=[]),ne[_e].push(W),ne},{}),ue=[Ne.GREETING,Ne.DEBT_NOTIFICATION,Ne.NEGOTIATION,Ne.PAYMENT_CONFIRMATION,Ne.FAREWELL],ee=ne=>{switch(ne){case Ne.GREETING:return"Fase 1: Saludo";case Ne.DEBT_NOTIFICATION:return"Fase 2: Comunicación de deuda";case Ne.NEGOTIATION:return"Fase 3: Negociación";case Ne.PAYMENT_CONFIRMATION:return"Fase 4: Concretar pago";case Ne.FAREWELL:return"Fase 5: Despedida";default:return"Fase desconocida"}};return p.jsxs("div",{className:"container mx-auto px-4 py-6",children:[p.jsxs("div",{className:"mb-6 flex justify-between items-center",children:[p.jsxs("h1",{className:"text-2xl font-bold",children:["Conversación con ",i.name]}),p.jsx("div",{children:p.jsx("button",{className:"btn-primary",onClick:oe,children:"Finalizar Conversación"})})]}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[p.jsx("div",{className:"md:col-span-2",children:p.jsxs("div",{className:"bg-white rounded-lg shadow p-4 mb-4",children:[p.jsxs("div",{className:"h-96 overflow-y-auto mb-4",children:[ue.map(ne=>{const W=fe[ne]||[];return W.length===0?null:p.jsxs("div",{className:"mb-6",children:[p.jsx("h3",{className:"text-md font-semibold mb-2 bg-gray-100 p-2 rounded",children:ee(ne)}),p.jsx("div",{className:"space-y-4",children:W.map(_e=>p.jsxs("div",{className:`mb-4 ${_e.sender==="agent"?"text-right":"text-left"}`,children:[p.jsxs("div",{className:`inline-block rounded-lg px-4 py-2 max-w-[80%] ${_e.sender==="agent"?"bg-primary-100 text-primary-800":"bg-gray-100 text-gray-800"}`,children:[p.jsx("p",{children:_e.message}),p.jsx("p",{className:"text-xs text-gray-500 mt-1",children:_e.timestamp.toLocaleTimeString()})]}),_e.event&&_e.event!=="neutral"&&p.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Evento: ",_e.event]})]},_e.id))})]},ne)}),y.length===0&&p.jsx("div",{className:"text-center p-4",children:p.jsx("p",{className:"text-gray-500",children:"No hay mensajes aún. Comience la conversación."})}),p.jsx("div",{ref:D})]}),p.jsxs("div",{className:"mb-4",children:[p.jsx(Uw,{phase:R,onChange:ve}),p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1 mt-4",children:"Mensaje del Agente"}),p.jsxs("div",{className:"flex",children:[p.jsx("input",{type:"text",className:"input flex-grow",placeholder:"Escriba su mensaje...",value:E,onChange:ne=>x(ne.target.value)}),p.jsx("button",{className:"btn-primary ml-2",onClick:bt,disabled:k||!E.trim(),children:"Enviar"})]}),$&&p.jsxs("div",{className:"mt-2 p-2 bg-blue-50 rounded-md",children:[p.jsx("p",{className:"text-sm text-blue-600 mb-1",children:"Respuesta sugerida:"}),p.jsx("p",{className:"text-sm",children:$}),p.jsx("button",{className:"text-xs text-blue-600 mt-1 underline",onClick:Me,children:"Usar esta respuesta"})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mensaje del Cliente"}),p.jsx("textarea",{className:"input w-full mb-2",rows:"3",placeholder:"Escriba lo que dijo el cliente...",value:z,onChange:st}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-2",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de Evento"}),p.jsxs("select",{className:"input w-full",value:le,onChange:he,children:[p.jsx("option",{value:"neutral",children:"Evento Neutro"}),p.jsx("option",{value:"accepts_payment",children:"Acepta pagar en fecha acordada"}),p.jsx("option",{value:"offers_partial",children:"Ofrece pago parcial"}),p.jsx("option",{value:"reschedule",children:"Propone nueva fecha"}),p.jsx("option",{value:"evades",children:"Evade o no da respuesta clara"}),p.jsx("option",{value:"annoyed",children:"Se muestra molesto"}),p.jsx("option",{value:"refuses",children:"Se niega a pagar"}),p.jsx("option",{value:"thanks",children:"Agradece recordatorio"}),p.jsx("option",{value:"no_answer",children:"No contesta la llamada"}),p.jsx("option",{value:"confirms_payment",children:"Confirma pago realizado"})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Modificaciones Sugeridas"}),p.jsxs("div",{className:"text-sm",children:[p.jsxs("p",{children:["Relación: ",U.relationship>0?"+":"",U.relationship]}),p.jsxs("p",{children:["Historial: ",U.history>0?"+":"",U.history]}),p.jsxs("p",{children:["Actitud: ",U.attitude>0?"+":"",U.attitude]}),p.jsxs("p",{children:["Sensibilidad: ",U.sensitivity>0?"+":"",U.sensitivity]}),p.jsxs("p",{children:["Probabilidad: ",U.probability>0?"+":"",U.probability]})]})]})]}),p.jsx("button",{className:"btn-secondary w-full",onClick:J,disabled:k||!z.trim(),children:"Agregar Mensaje del Cliente"})]})]})}),p.jsxs("div",{children:[p.jsxs("div",{className:"bg-white rounded-lg shadow p-4 mb-4",children:[p.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Información del Cliente"}),p.jsxs("div",{className:"space-y-2",children:[p.jsxs("p",{children:[p.jsx("span",{className:"font-medium",children:"Teléfono:"})," ",i.phone]}),p.jsxs("p",{children:[p.jsx("span",{className:"font-medium",children:"Email:"})," ",i.email||"No disponible"]}),p.jsxs("p",{children:[p.jsx("span",{className:"font-medium",children:"Estado de deuda:"})," Deuda pendiente"]}),p.jsx("p",{className:"text-sm text-gray-500 mt-2 italic",children:"Nota: Por razones de privacidad, no se muestran montos específicos en este módulo."})]})]}),p.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[p.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Variables del Alma"}),p.jsx($o,{initialValues:f,readOnly:!1,onChange:M}),p.jsx("p",{className:"mt-3 text-xs text-gray-500",children:"Puede ajustar manualmente las variables según su percepción de la conversación."})]})]})]})]})},j3=()=>{const{conversationId:n}=Eg(),e=_n(),[t,i]=V.useState(null),[a,l]=V.useState(!0),[u,f]=V.useState(!1),[m,y]=V.useState(!1),[v,E]=V.useState(null),[x,C]=V.useState(""),[A,k]=V.useState(!1),[O,$]=V.useState(Ne.NEGOTIATION),[K,z]=V.useState({sender:"agent",message:"",event:"neutral",phase:Ne.NEGOTIATION,deltas:{relationship:0,history:0,attitude:0,sensitivity:0,probability:0},updateClientSoul:!1}),[ce,le]=V.useState({result:"pending",notes:"",nextActionDate:""});V.useEffect(()=>{(async()=>{try{l(!0);const ne=await Ao(n);if(i(ne),ne.summary&&le(ne.summary),ne.turns&&ne.turns.length>0){const W=ne.turns[ne.turns.length-1];W.phase&&($(W.phase),z(_e=>({..._e,phase:W.phase})))}}catch(ne){console.error("Error al cargar conversación:",ne)}finally{l(!1)}})()},[n]);const ye=ee=>{const{name:ne,value:W}=ee.target;le(_e=>({..._e,[ne]:W}))},j=async()=>{try{f(!0),await Oj(n,ce);const ee=await Ao(n);i(ee),f(!1)}catch(ee){console.error("Error al cerrar conversación:",ee),f(!1)}},N=ee=>{const{name:ne,value:W}=ee.target;z(_e=>({..._e,[ne]:W}))},R=ee=>{$(ee),z(ne=>({...ne,phase:ee}))},P=(ee,ne)=>{z(W=>({...W,deltas:{...W.deltas,[ee]:parseInt(ne,10)||0}}))},U=async()=>{if(K.message.trim())try{const ee={sender:K.sender,message:K.message,event:K.event,phase:K.phase||O,deltas:K.deltas,updateClientSoul:K.updateClientSoul};await Lj(n,ee);const ne=await Ao(n);if(i(ne),z({sender:"agent",message:"",event:"neutral",phase:O,deltas:{relationship:0,history:0,attitude:0,sensitivity:0,probability:0},updateClientSoul:!1}),ee.sender==="client"&&ne.isActive)try{const W=await nh(ne.turns,ne.currentSoul,ee.message,ee.event);C(W.responseText),k(!0)}catch(W){console.error("Error al generar sugerencia de respuesta:",W)}}catch(ee){console.error("Error al agregar mensaje:",ee)}},B=async ee=>{var ne;if(t&&t.isActive)try{const W=v?v.message:((ne=t.turns.find(Ge=>Ge.sender==="client"))==null?void 0:ne.message)||"Mensaje del cliente",_e=await nh(t.turns,t.currentSoul,W,ee);C(_e.responseText),k(!0)}catch(W){console.error("Error al generar sugerencia:",W)}},D=async(ee,ne)=>{try{await kj(n,ee,ne);const W=await Ao(n);if(i(W),v.sender==="client"&&t.isActive)try{const _e=await nh(W.turns,W.currentSoul,ne.message,ne.event);C(_e.responseText),k(!0)}catch(_e){console.error("Error al generar sugerencia de respuesta:",_e)}E(null)}catch(W){console.error("Error al editar mensaje:",W)}},bt=async ee=>{if(window.confirm("¿Está seguro de que desea eliminar este mensaje?"))try{await Vj(n,ee);const ne=await Ao(n);i(ne)}catch(ne){console.error("Error al eliminar mensaje:",ne)}},st=async()=>{if(window.confirm("¿Está seguro que desea eliminar permanentemente esta conversación? Esta acción no se puede deshacer."))try{await uw(n),e("/")}catch(ee){console.error("Error al eliminar conversación:",ee),alert("Error al eliminar la conversación: "+ee.message)}},J=async()=>{try{t.isActive?await BE(n,$t.INACTIVE,!1):await BE(n,$t.ACTIVE,!0);const ee=await Ao(n);i(ee)}catch(ee){console.error("Error al cambiar estado de actividad:",ee)}},he=()=>{x&&(z(ee=>({...ee,message:x,sender:"agent"})),C(""),k(!1))},ve=()=>{var ee;t&&!t.isActive&&J(),(ee=document.getElementById("message-input"))==null||ee.focus()},Me=ee=>{if(!ee)return"N/A";if(ee.seconds){const ne=new Date(ee.seconds*1e3);return ko(ne,"PPp",{locale:ps})}else{if(ee instanceof Date)return ko(ee,"PPp",{locale:ps});{const ne=new Date(ee);return ko(ne,"PPp",{locale:ps})}}},M=()=>!t||!t.turns?{}:t.turns.reduce((ee,ne)=>{const W=ne.phase||Ne.NEGOTIATION;return ee[W]||(ee[W]=[]),ee[W].push(ne),ee},{}),oe=[Ne.GREETING,Ne.DEBT_NOTIFICATION,Ne.NEGOTIATION,Ne.PAYMENT_CONFIRMATION,Ne.FAREWELL],fe=ee=>{switch(ee){case Ne.GREETING:return"Fase 1: Saludo";case Ne.DEBT_NOTIFICATION:return"Fase 2: Comunicación de deuda";case Ne.NEGOTIATION:return"Fase 3: Negociación";case Ne.PAYMENT_CONFIRMATION:return"Fase 4: Concretar pago";case Ne.FAREWELL:return"Fase 5: Despedida";default:return"Fase desconocida"}};if(a)return p.jsx("div",{className:"container mx-auto px-4 py-6",children:p.jsxs("div",{className:"animate-pulse space-y-4",children:[p.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-6"}),p.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-4"}),p.jsx("div",{className:"h-64 bg-gray-200 rounded mb-4"}),p.jsx("div",{className:"h-24 bg-gray-200 rounded"})]})});if(!t)return p.jsxs("div",{className:"container mx-auto px-4 py-6",children:[p.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:[p.jsx("strong",{className:"font-bold",children:"Error:"}),p.jsx("span",{className:"block sm:inline",children:" No se pudo encontrar la conversación."})]}),p.jsx("button",{className:"btn-secondary mt-4",onClick:()=>e(-1),children:"Volver"})]});const ue=M();return p.jsxs("div",{className:"container mx-auto px-4 py-6",children:[p.jsxs("div",{className:"flex justify-between items-center mb-6",children:[p.jsxs("div",{children:[p.jsxs("h1",{className:"text-2xl font-bold",children:["Conversación con ",t.clientName]}),p.jsxs("p",{className:"text-gray-500",children:["Iniciada el ",Me(t.startedAt),p.jsx("span",{className:`ml-2 px-2 py-1 rounded-full text-xs ${t.isActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:t.isActive?"Activa":"Inactiva"})]})]}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx("button",{className:`btn-secondary ${m?"bg-blue-100 border-blue-300":""}`,onClick:()=>y(!m),children:m?"Salir de Edición":"Editar Conversación"}),p.jsx("button",{className:`btn-secondary ${t.isActive?"bg-amber-100 text-amber-800":"bg-green-100 text-green-800"}`,onClick:J,children:t.isActive?"Desactivar":"Activar"}),!t.isActive&&p.jsx("button",{className:"btn-secondary",onClick:ve,children:"Continuar Conversación"}),t.status!==$t.CLOSED&&p.jsx("button",{className:"btn-primary",onClick:()=>f(!0),children:"Finalizar Conversación"}),p.jsx("button",{className:"btn-secondary bg-red-600 text-white hover:bg-red-700",onClick:st,children:"Eliminar"}),p.jsx("button",{className:"btn-secondary",onClick:()=>e(-1),children:"Volver"})]})]}),m&&p.jsxs("div",{className:"bg-amber-50 border border-amber-200 text-amber-800 p-4 rounded mb-6",children:[p.jsx("h3",{className:"font-semibold mb-2",children:"Nota sobre edición de conversaciones"}),p.jsx("p",{children:"En este modo de edición puede modificar mensajes y eventos. Si la conversación está activa, se generarán sugerencias de respuesta basadas en los cambios realizados. Estas sugerencias se generan automáticamente al cambiar un tipo de evento o editar un mensaje del cliente."})]}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[p.jsxs("div",{className:"md:col-span-2",children:[p.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[p.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Mensajes por Fases"}),oe.map(ee=>{const ne=ue[ee]||[];return ne.length===0?null:p.jsxs("div",{className:"mb-6",children:[p.jsx("h3",{className:"text-md font-semibold mb-2 bg-gray-100 p-2 rounded",children:fe(ee)}),p.jsx("div",{className:"space-y-4",children:ne.map(W=>p.jsx("div",{className:`flex ${W.sender==="agent"?"justify-end":"justify-start"}`,children:p.jsxs("div",{className:`rounded-lg px-4 py-2 max-w-[80%] relative ${W.sender==="agent"?"bg-primary-100 text-primary-800":"bg-gray-100 text-gray-800"}`,children:[m&&p.jsxs("div",{className:"absolute top-1 right-1 flex gap-1",children:[p.jsx("button",{className:"text-xs text-blue-600 hover:text-blue-800",onClick:()=>E(W),children:"✏️"}),p.jsx("button",{className:"text-xs text-red-600 hover:text-red-800",onClick:()=>bt(W.id),children:"🗑️"})]}),v&&v.id===W.id?p.jsx(M3,{turn:W,onSave:_e=>D(W.id,_e),onCancel:()=>E(null),onEventChange:B}):p.jsxs(p.Fragment,{children:[p.jsx("p",{children:W.message}),p.jsxs("div",{className:"text-xs text-gray-500 mt-1 flex justify-between",children:[p.jsx("span",{children:Me(W.timestamp)}),W.isManual&&p.jsx("span",{className:"text-blue-500",children:"Manual"}),W.isEdited&&p.jsx("span",{className:"text-orange-500",children:"Editado"})]}),W.event&&W.event!=="neutral"&&p.jsxs("div",{className:"mt-2 text-xs",children:[p.jsx("span",{className:"font-medium",children:"Evento: "}),p.jsx("span",{children:W.event}),W.deltas&&p.jsxs("div",{className:"mt-1 grid grid-cols-5 gap-1",children:[p.jsxs("span",{className:`${W.deltas.relationship>0?"text-green-600":W.deltas.relationship<0?"text-red-600":"text-gray-500"}`,children:["R: ",W.deltas.relationship>0?"+":"",W.deltas.relationship]}),p.jsxs("span",{className:`${W.deltas.history>0?"text-green-600":W.deltas.history<0?"text-red-600":"text-gray-500"}`,children:["H: ",W.deltas.history>0?"+":"",W.deltas.history]}),p.jsxs("span",{className:`${W.deltas.attitude>0?"text-green-600":W.deltas.attitude<0?"text-red-600":"text-gray-500"}`,children:["A: ",W.deltas.attitude>0?"+":"",W.deltas.attitude]}),p.jsxs("span",{className:`${W.deltas.sensitivity>0?"text-green-600":W.deltas.sensitivity<0?"text-red-600":"text-gray-500"}`,children:["S: ",W.deltas.sensitivity>0?"+":"",W.deltas.sensitivity]}),p.jsxs("span",{className:`${W.deltas.probability>0?"text-green-600":W.deltas.probability<0?"text-red-600":"text-gray-500"}`,children:["P: ",W.deltas.probability>0?"+":"",W.deltas.probability]})]})]})]})]})},W.id))})]},ee)}),(!t.turns||t.turns.length===0)&&p.jsx("p",{className:"text-gray-500 text-center py-4",children:"No hay mensajes en esta conversación."}),x&&p.jsxs("div",{className:`mt-4 p-3 bg-blue-50 border border-blue-100 rounded-md transition-all duration-300 ${A?"opacity-100":"opacity-0"}`,children:[p.jsxs("div",{className:"flex justify-between items-start",children:[p.jsxs("div",{children:[p.jsx("p",{className:"text-sm font-medium text-blue-700 mb-1",children:"Sugerencia de respuesta:"}),p.jsx("p",{className:"text-sm text-blue-800",children:x})]}),p.jsx("button",{className:"text-xs bg-blue-600 text-white px-2 py-1 rounded hover:bg-blue-700",onClick:he,children:"Usar esta respuesta"})]}),p.jsx("p",{className:"text-xs text-blue-600 mt-2",children:"Esta sugerencia se generó automáticamente basada en el contexto y los cambios realizados."})]}),t.isActive&&p.jsxs("div",{className:"mt-6 p-4 border-t border-gray-200",children:[p.jsx("h3",{className:"text-md font-semibold mb-3",children:"Agregar Nuevo Mensaje"}),p.jsxs("div",{className:"space-y-4",children:[p.jsx(Uw,{phase:O,onChange:R}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Emisor"}),p.jsxs("select",{name:"sender",className:"input w-full",value:K.sender,onChange:N,children:[p.jsx("option",{value:"agent",children:"Agente"}),p.jsx("option",{value:"client",children:"Cliente"})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de Evento"}),p.jsxs("select",{name:"event",className:"input w-full",value:K.event,onChange:N,children:[p.jsx("option",{value:"neutral",children:"Evento Neutro"}),p.jsx("option",{value:"accepts_payment",children:"Acepta pagar"}),p.jsx("option",{value:"offers_partial",children:"Ofrece pago parcial"}),p.jsx("option",{value:"reschedule",children:"Propone nueva fecha"}),p.jsx("option",{value:"evades",children:"Evade"}),p.jsx("option",{value:"annoyed",children:"Se muestra molesto"}),p.jsx("option",{value:"refuses",children:"Se niega a pagar"}),p.jsx("option",{value:"thanks",children:"Agradece"}),p.jsx("option",{value:"no_answer",children:"No contesta"}),p.jsx("option",{value:"confirms_payment",children:"Confirma pago"})]})]})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"message-input",className:"block text-sm font-medium text-gray-700 mb-1",children:"Mensaje"}),p.jsx("textarea",{id:"message-input",name:"message",rows:"3",className:"input w-full",value:K.message,onChange:N,placeholder:"Escriba el mensaje..."})]}),K.event!=="neutral"&&p.jsxs(p.Fragment,{children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Deltas para Variables del Alma"}),p.jsxs("div",{className:"grid grid-cols-5 gap-2",children:[p.jsxs("div",{children:[p.jsx("label",{className:"text-xs text-gray-500",children:"Relación"}),p.jsx("input",{type:"number",min:"-100",max:"100",className:"input w-full text-sm",value:K.deltas.relationship,onChange:ee=>P("relationship",ee.target.value)})]}),p.jsxs("div",{children:[p.jsx("label",{className:"text-xs text-gray-500",children:"Historial"}),p.jsx("input",{type:"number",min:"-100",max:"100",className:"input w-full text-sm",value:K.deltas.history,onChange:ee=>P("history",ee.target.value)})]}),p.jsxs("div",{children:[p.jsx("label",{className:"text-xs text-gray-500",children:"Actitud"}),p.jsx("input",{type:"number",min:"-100",max:"100",className:"input w-full text-sm",value:K.deltas.attitude,onChange:ee=>P("attitude",ee.target.value)})]}),p.jsxs("div",{children:[p.jsx("label",{className:"text-xs text-gray-500",children:"Sensibilidad"}),p.jsx("input",{type:"number",min:"-100",max:"100",className:"input w-full text-sm",value:K.deltas.sensitivity,onChange:ee=>P("sensitivity",ee.target.value)})]}),p.jsxs("div",{children:[p.jsx("label",{className:"text-xs text-gray-500",children:"Probabilidad"}),p.jsx("input",{type:"number",min:"-100",max:"100",className:"input w-full text-sm",value:K.deltas.probability,onChange:ee=>P("probability",ee.target.value)})]})]})]}),p.jsxs("div",{className:"flex items-center",children:[p.jsx("input",{type:"checkbox",id:"updateClientSoul",checked:K.updateClientSoul,onChange:ee=>z(ne=>({...ne,updateClientSoul:ee.target.checked})),className:"mr-2"}),p.jsx("label",{htmlFor:"updateClientSoul",className:"text-sm text-gray-700",children:"Actualizar alma del cliente en la base de datos"})]})]}),p.jsx("button",{className:"btn-primary",onClick:U,disabled:!K.message.trim(),children:"Agregar Mensaje"})]})]}),!t.isActive&&p.jsx("div",{className:"mt-6 p-4 border-t border-gray-200",children:p.jsx("div",{className:"bg-gray-50 p-4 rounded-md text-center",children:p.jsx("p",{className:"text-gray-600",children:'Esta conversación no está activa. Pulse "Activar" si desea añadir más mensajes.'})})})]}),t.status===$t.CLOSED&&t.summary&&p.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[p.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Resumen de la Conversación"}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Resultado"}),p.jsxs("p",{className:"font-medium",children:[t.summary.result==="payment"&&"Pago realizado",t.summary.result==="partial_payment"&&"Pago parcial",t.summary.result==="promise"&&"Promesa de pago",t.summary.result==="no_payment"&&"Sin pago",t.summary.result==="pending"&&"Pendiente"]})]}),t.summary.nextActionDate&&p.jsxs("div",{children:[p.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Próxima acción"}),p.jsx("p",{children:Me(t.summary.nextActionDate)})]}),t.summary.notes&&p.jsxs("div",{className:"md:col-span-2",children:[p.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Notas"}),p.jsx("p",{className:"whitespace-pre-line",children:t.summary.notes})]})]})]}),u&&p.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:p.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-lg w-full mx-4",children:[p.jsx("h2",{className:"text-xl font-bold mb-4",children:"Cerrar Conversación"}),p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Resultado"}),p.jsxs("select",{name:"result",className:"input w-full",value:ce.result,onChange:ye,children:[p.jsx("option",{value:"payment",children:"Pago realizado"}),p.jsx("option",{value:"partial_payment",children:"Pago parcial"}),p.jsx("option",{value:"promise",children:"Promesa de pago"}),p.jsx("option",{value:"no_payment",children:"Sin pago"}),p.jsx("option",{value:"pending",children:"Pendiente"})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha de próxima acción"}),p.jsx("input",{type:"date",name:"nextActionDate",className:"input w-full",value:ce.nextActionDate,onChange:ye})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notas"}),p.jsx("textarea",{name:"notes",rows:"4",className:"input w-full",value:ce.notes,onChange:ye,placeholder:"Resumen de la conversación, acuerdos, observaciones..."})]})]}),p.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[p.jsx("button",{className:"btn-secondary",onClick:()=>f(!1),children:"Cancelar"}),p.jsx("button",{className:"btn-primary",onClick:j,children:"Cerrar Conversación"})]})]})})]}),p.jsxs("div",{children:[p.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[p.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Información del Cliente"}),p.jsxs("p",{className:"mb-2",children:[p.jsx("span",{className:"font-medium",children:"Nombre:"})," ",t.clientName]}),t.client&&p.jsxs(p.Fragment,{children:[p.jsxs("p",{className:"mb-2",children:[p.jsx("span",{className:"font-medium",children:"Teléfono:"})," ",t.client.phone]}),p.jsxs("p",{className:"mb-2",children:[p.jsx("span",{className:"font-medium",children:"Email:"})," ",t.client.email||"No disponible"]}),p.jsxs("p",{className:"mb-2",children:[p.jsx("span",{className:"font-medium",children:"Estado:"})," Deuda pendiente"]}),p.jsx("p",{className:"text-sm text-gray-500 italic",children:"Nota: Por privacidad, no se muestran montos específicos."}),p.jsx("div",{className:"mt-4",children:p.jsx("button",{className:"text-primary-600 text-sm font-medium hover:text-primary-800",onClick:()=>e(`/clients/${t.clientId}`),children:"Ver perfil completo"})})]})]}),p.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[p.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Variables del Alma"}),t.initialSoul&&t.currentSoul&&p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-2",children:"Inicial"}),p.jsx($o,{initialValues:t.initialSoul,readOnly:!0})]}),p.jsxs("div",{children:[p.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-2",children:"Actual"}),p.jsx($o,{initialValues:t.currentSoul,readOnly:!0})]}),p.jsxs("div",{className:"mt-4 p-3 bg-gray-50 rounded-md",children:[p.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Cambios"}),p.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[p.jsxs("div",{children:[p.jsx("span",{className:"font-medium",children:"Relación:"})," ",p.jsxs("span",{className:t.currentSoul.relationship>t.initialSoul.relationship?"text-green-600":t.currentSoul.relationship<t.initialSoul.relationship?"text-red-600":"text-gray-500",children:[t.currentSoul.relationship-t.initialSoul.relationship>0?"+":"",t.currentSoul.relationship-t.initialSoul.relationship]})]}),p.jsxs("div",{children:[p.jsx("span",{className:"font-medium",children:"Historial:"})," ",p.jsxs("span",{className:t.currentSoul.history>t.initialSoul.history?"text-green-600":t.currentSoul.history<t.initialSoul.history?"text-red-600":"text-gray-500",children:[t.currentSoul.history-t.initialSoul.history>0?"+":"",t.currentSoul.history-t.initialSoul.history]})]}),p.jsxs("div",{children:[p.jsx("span",{className:"font-medium",children:"Actitud:"})," ",p.jsxs("span",{className:t.currentSoul.attitude>t.initialSoul.attitude?"text-green-600":t.currentSoul.attitude<t.initialSoul.attitude?"text-red-600":"text-gray-500",children:[t.currentSoul.attitude-t.initialSoul.attitude>0?"+":"",t.currentSoul.attitude-t.initialSoul.attitude]})]}),p.jsxs("div",{children:[p.jsx("span",{className:"font-medium",children:"Sensibilidad:"})," ",p.jsxs("span",{className:t.currentSoul.sensitivity<t.initialSoul.sensitivity?"text-green-600":t.currentSoul.sensitivity>t.initialSoul.sensitivity?"text-red-600":"text-gray-500",children:[t.currentSoul.sensitivity-t.initialSoul.sensitivity>0?"+":"",t.currentSoul.sensitivity-t.initialSoul.sensitivity]})]}),p.jsxs("div",{className:"col-span-2",children:[p.jsx("span",{className:"font-medium",children:"Probabilidad de pago:"})," ",p.jsxs("span",{className:t.currentSoul.probability>t.initialSoul.probability?"text-green-600":t.currentSoul.probability<t.initialSoul.probability?"text-red-600":"text-gray-500",children:[t.currentSoul.probability-t.initialSoul.probability>0?"+":"",t.currentSoul.probability-t.initialSoul.probability]})]})]})]})]})]})]})]})]})},M3=({turn:n,onSave:e,onCancel:t,onEventChange:i})=>{const[a,l]=V.useState({message:n.message,event:n.event||"neutral",phase:n.phase||Ne.NEGOTIATION,deltas:n.deltas||{relationship:0,history:0,attitude:0,sensitivity:0,probability:0}}),u=v=>{const{name:E,value:x}=v.target;E==="event"&&x!==a.event&&i&&i(x),l(C=>({...C,[E]:x}))},f=v=>{l(E=>({...E,phase:v}))},m=(v,E)=>{l(x=>({...x,deltas:{...x.deltas,[v]:parseInt(E,10)||0}}))},y=v=>{v.preventDefault(),e(a)};return p.jsxs("form",{onSubmit:y,className:"space-y-3",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Mensaje"}),p.jsx("textarea",{name:"message",rows:"2",className:"w-full text-sm border border-gray-300 rounded px-2 py-1",value:a.message,onChange:u})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Fase"}),p.jsxs("select",{name:"phase",className:"w-full text-sm border border-gray-300 rounded px-2 py-1",value:a.phase,onChange:v=>f(v.target.value),children:[p.jsx("option",{value:Ne.GREETING,children:"Fase 1: Saludo"}),p.jsx("option",{value:Ne.DEBT_NOTIFICATION,children:"Fase 2: Comunicación de deuda"}),p.jsx("option",{value:Ne.NEGOTIATION,children:"Fase 3: Negociación"}),p.jsx("option",{value:Ne.PAYMENT_CONFIRMATION,children:"Fase 4: Concretar pago"}),p.jsx("option",{value:Ne.FAREWELL,children:"Fase 5: Despedida"})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Evento"}),p.jsxs("select",{name:"event",className:"w-full text-sm border border-gray-300 rounded px-2 py-1",value:a.event,onChange:u,children:[p.jsx("option",{value:"neutral",children:"Neutral"}),p.jsx("option",{value:"accepts_payment",children:"Acepta pagar"}),p.jsx("option",{value:"offers_partial",children:"Pago parcial"}),p.jsx("option",{value:"reschedule",children:"Nueva fecha"}),p.jsx("option",{value:"evades",children:"Evade"}),p.jsx("option",{value:"annoyed",children:"Molesto"}),p.jsx("option",{value:"refuses",children:"Se niega"}),p.jsx("option",{value:"thanks",children:"Agradece"}),p.jsx("option",{value:"no_answer",children:"No contesta"}),p.jsx("option",{value:"confirms_payment",children:"Confirma pago"})]})]}),a.event!=="neutral"&&p.jsxs("div",{children:[p.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Deltas"}),p.jsxs("div",{className:"grid grid-cols-5 gap-1",children:[p.jsx("input",{type:"number",min:"-100",max:"100",className:"w-full text-xs border border-gray-300 rounded px-1 py-1",value:a.deltas.relationship,onChange:v=>m("relationship",v.target.value),placeholder:"R"}),p.jsx("input",{type:"number",min:"-100",max:"100",className:"w-full text-xs border border-gray-300 rounded px-1 py-1",value:a.deltas.history,onChange:v=>m("history",v.target.value),placeholder:"H"}),p.jsx("input",{type:"number",min:"-100",max:"100",className:"w-full text-xs border border-gray-300 rounded px-1 py-1",value:a.deltas.attitude,onChange:v=>m("attitude",v.target.value),placeholder:"A"}),p.jsx("input",{type:"number",min:"-100",max:"100",className:"w-full text-xs border border-gray-300 rounded px-1 py-1",value:a.deltas.sensitivity,onChange:v=>m("sensitivity",v.target.value),placeholder:"S"}),p.jsx("input",{type:"number",min:"-100",max:"100",className:"w-full text-xs border border-gray-300 rounded px-1 py-1",value:a.deltas.probability,onChange:v=>m("probability",v.target.value),placeholder:"P"})]})]}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx("button",{type:"submit",className:"text-xs bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600",children:"Guardar"}),p.jsx("button",{type:"button",onClick:t,className:"text-xs bg-gray-500 text-white px-2 py-1 rounded hover:bg-gray-600",children:"Cancelar"})]})]})},k3=()=>{const[n,e]=V.useState(""),[t,i]=V.useState(""),[a,l]=V.useState(""),[u,f]=V.useState(!1),[m,y]=V.useState(""),v=_n();V.useEffect(()=>{e(O3());const A=localStorage.getItem("huggingface_api_key")||"",k=localStorage.getItem("openai_api_key")||"";i(A),l(k)},[]);const E=async()=>{f(!0),y("");try{if(n===ot.ZEPHYR&&!t.trim()){y("Error: Debe proporcionar una API Key válida para Hugging Face.");return}if(n===ot.OPENAI&&!a.trim()){y("Error: Debe proporcionar una API Key válida para OpenAI.");return}I3(n),localStorage.setItem("huggingface_api_key",t),localStorage.setItem("openai_api_key",a),y("Configuración guardada correctamente"),setTimeout(()=>v("/"),1500)}catch(A){console.error("Error al guardar configuración:",A),y("Error al guardar la configuración")}finally{f(!1)}},x=A=>{switch(A){case ot.GEMINI:return"Servicio básico con respuestas predefinidas (no requiere configuración externa)";case ot.ZEPHYR:return"Modelo Zephyr 7B Beta de Hugging Face - Buena calidad, requiere API key gratuita";case ot.OPENAI:return"GPT-3.5 Turbo de OpenAI - Máxima calidad con contexto avanzado, requiere API key de pago";default:return""}},C=A=>!A||A.length<8?A:A.substring(0,4)+"..."+A.substring(A.length-4);return p.jsxs("div",{className:"container mx-auto px-4 py-6",children:[p.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Configuración de IA"}),p.jsxs("div",{className:"bg-blue-50 border border-blue-200 text-blue-800 p-4 rounded mb-6",children:[p.jsx("h3",{className:"font-semibold mb-2",children:"💡 Acerca de los servicios de IA"}),p.jsx("p",{className:"text-sm mb-2",children:"El sistema utiliza diferentes servicios de IA para analizar las conversaciones y generar respuestas inteligentes adaptadas al perfil de cada cliente."}),p.jsxs("p",{className:"text-sm",children:[p.jsx("strong",{children:"Novedad:"})," El servicio OpenAI incluye contexto avanzado que utiliza conversaciones previas con el mismo cliente, o aprende del estilo conversacional de clientes similares si no existe historial previo."]})]}),p.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[p.jsxs("div",{className:"form-group mb-6",children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Servicio de IA"}),p.jsxs("div",{className:"space-y-3",children:[p.jsxs("label",{className:"flex items-start space-x-3 p-3 border rounded-lg cursor-pointer hover:bg-gray-50",children:[p.jsx("input",{type:"radio",name:"aiService",value:ot.GEMINI,checked:n===ot.GEMINI,onChange:A=>e(A.target.value),className:"mt-1"}),p.jsxs("div",{className:"flex-1",children:[p.jsx("div",{className:"font-medium text-gray-900",children:"Gemini (Básico)"}),p.jsx("div",{className:"text-sm text-gray-500",children:x(ot.GEMINI)})]}),p.jsx("span",{className:"px-2 py-1 text-xs bg-green-100 text-green-800 rounded",children:"GRATIS"})]}),p.jsxs("label",{className:"flex items-start space-x-3 p-3 border rounded-lg cursor-pointer hover:bg-gray-50",children:[p.jsx("input",{type:"radio",name:"aiService",value:ot.ZEPHYR,checked:n===ot.ZEPHYR,onChange:A=>e(A.target.value),className:"mt-1"}),p.jsxs("div",{className:"flex-1",children:[p.jsx("div",{className:"font-medium text-gray-900",children:"Zephyr 7B Beta (Hugging Face)"}),p.jsx("div",{className:"text-sm text-gray-500",children:x(ot.ZEPHYR)})]}),p.jsx("span",{className:"px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded",children:"API GRATUITA"})]}),p.jsxs("label",{className:"flex items-start space-x-3 p-3 border rounded-lg cursor-pointer hover:bg-gray-50",children:[p.jsx("input",{type:"radio",name:"aiService",value:ot.OPENAI,checked:n===ot.OPENAI,onChange:A=>e(A.target.value),className:"mt-1"}),p.jsxs("div",{className:"flex-1",children:[p.jsx("div",{className:"font-medium text-gray-900",children:"OpenAI GPT-3.5 Turbo"}),p.jsx("div",{className:"text-sm text-gray-500",children:x(ot.OPENAI)}),p.jsxs("div",{className:"text-xs text-green-600 mt-1",children:["✨ ",p.jsx("strong",{children:"Incluye contexto avanzado:"})," Usa conversaciones previas y aprende de clientes similares"]})]}),p.jsx("span",{className:"px-2 py-1 text-xs bg-purple-100 text-purple-800 rounded",children:"PREMIUM"})]})]})]}),p.jsxs("div",{className:"space-y-6",children:[n===ot.ZEPHYR&&p.jsxs("div",{className:"form-group border-t pt-6",children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"API Key de Hugging Face"}),p.jsx("input",{type:"password",className:"input w-full mb-2",value:t,onChange:A=>i(A.target.value),placeholder:"Ingresa tu API Key de Hugging Face"}),t&&p.jsxs("p",{className:"text-xs text-gray-500 mb-2",children:["API Key configurada: ",C(t)]}),p.jsxs("p",{className:"text-sm text-gray-500",children:["Obtén una API Key gratuita desde tu cuenta de"," ",p.jsx("a",{href:"https://huggingface.co/settings/tokens",target:"_blank",rel:"noopener noreferrer",className:"text-primary-600 hover:text-primary-800 underline",children:"Hugging Face"}),"."]})]}),n===ot.OPENAI&&p.jsxs("div",{className:"form-group border-t pt-6",children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"API Key de OpenAI"}),p.jsx("input",{type:"password",className:"input w-full mb-2",value:a,onChange:A=>l(A.target.value),placeholder:"Ingresa tu API Key de OpenAI (sk-...)"}),a&&p.jsxs("p",{className:"text-xs text-gray-500 mb-2",children:["API Key configurada: ",C(a)]}),p.jsxs("div",{className:"bg-amber-50 border border-amber-200 p-3 rounded text-sm text-amber-800 mb-2",children:[p.jsx("strong",{children:"💰 Costo estimado:"})," ~$0.002 USD por conversación (muy económico)"]}),p.jsxs("p",{className:"text-sm text-gray-500",children:["Obtén tu API Key desde"," ",p.jsx("a",{href:"https://platform.openai.com/api-keys",target:"_blank",rel:"noopener noreferrer",className:"text-primary-600 hover:text-primary-800 underline",children:"OpenAI Platform"}),". Necesitarás añadir créditos a tu cuenta (mínimo $5 USD)."]})]})]}),n===ot.OPENAI&&p.jsxs("div",{className:"mt-6 p-4 bg-green-50 border border-green-200 rounded",children:[p.jsx("h4",{className:"font-semibold text-green-800 mb-2",children:"🚀 Características avanzadas de OpenAI"}),p.jsxs("ul",{className:"text-sm text-green-700 space-y-1",children:[p.jsxs("li",{children:["• ",p.jsx("strong",{children:"Contexto inteligente:"})," Analiza conversaciones previas con el mismo cliente"]}),p.jsxs("li",{children:["• ",p.jsx("strong",{children:"Aprendizaje adaptativo:"})," Si no hay historial, aprende del estilo de clientes similares"]}),p.jsxs("li",{children:["• ",p.jsx("strong",{children:"Respuestas por fases:"})," Adapta el mensaje según la etapa de la conversación"]}),p.jsxs("li",{children:["• ",p.jsx("strong",{children:"Análisis de personalidad:"})," Ajusta el tono según el perfil psicológico del cliente"]}),p.jsxs("li",{children:["• ",p.jsx("strong",{children:"Mayor precisión:"})," Detecta mejor las intenciones y emociones del cliente"]})]})]}),m&&p.jsx("div",{className:`p-3 rounded mt-4 ${m.includes("Error")?"bg-red-100 text-red-800":"bg-green-100 text-green-800"}`,children:m}),p.jsxs("div",{className:"flex justify-end gap-2 mt-8",children:[p.jsx("button",{className:"btn-secondary",onClick:()=>v(-1),disabled:u,children:"Cancelar"}),p.jsx("button",{className:"btn-primary",onClick:E,disabled:u,children:u?"Guardando...":"Guardar configuración"})]})]})]})},V3=()=>{const[n,e]=V.useState([]),[t,i]=V.useState([]),[a,l]=V.useState([]),[u,f]=V.useState(!0);V.useEffect(()=>{(async()=>{try{f(!0);const[x,C,A]=await Promise.all([lw(null,100),cw(null,100),su()]);e(x),i(C),l(A)}catch(x){console.error("Error al cargar datos para reportes:",x)}finally{f(!1)}})()},[]);const m=n.length+t.length,y={active:n.length,closed:t.length,payment:t.filter(E=>{var x;return((x=E.summary)==null?void 0:x.result)==="payment"}).length,partialPayment:t.filter(E=>{var x;return((x=E.summary)==null?void 0:x.result)==="partial_payment"}).length,promise:t.filter(E=>{var x;return((x=E.summary)==null?void 0:x.result)==="promise"}).length,noPayment:t.filter(E=>{var x;return((x=E.summary)==null?void 0:x.result)==="no_payment"}).length},v={total:a.length,withDebt:a.filter(E=>E.debt>0).length,totalDebt:a.reduce((E,x)=>E+(x.debt||0),0),highProbability:a.filter(E=>{var x;return((x=E.soul)==null?void 0:x.probability)>=70}).length,mediumProbability:a.filter(E=>{var x,C;return((x=E.soul)==null?void 0:x.probability)>=40&&((C=E.soul)==null?void 0:C.probability)<70}).length,lowProbability:a.filter(E=>{var x;return((x=E.soul)==null?void 0:x.probability)<40}).length};return u?p.jsxs("div",{className:"container mx-auto px-4 py-6",children:[p.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Reportes"}),p.jsxs("div",{className:"animate-pulse space-y-6",children:[p.jsx("div",{className:"h-40 bg-gray-200 rounded"}),p.jsx("div",{className:"h-40 bg-gray-200 rounded"}),p.jsx("div",{className:"h-60 bg-gray-200 rounded"})]})]}):p.jsxs("div",{className:"container mx-auto px-4 py-6",children:[p.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Reportes"}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[p.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[p.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Estadísticas de Conversaciones"}),p.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[p.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[p.jsx("h3",{className:"text-sm font-medium text-blue-800 mb-1",children:"Activas"}),p.jsx("p",{className:"text-2xl font-bold text-blue-600",children:y.active})]}),p.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[p.jsx("h3",{className:"text-sm font-medium text-green-800 mb-1",children:"Cerradas"}),p.jsx("p",{className:"text-2xl font-bold text-green-600",children:y.closed})]}),p.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[p.jsx("h3",{className:"text-sm font-medium text-green-800 mb-1",children:"Pagos completos"}),p.jsx("p",{className:"text-2xl font-bold text-green-600",children:y.payment}),p.jsxs("p",{className:"text-xs text-green-600",children:[m>0?Math.round(y.payment/m*100):0,"% del total"]})]}),p.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[p.jsx("h3",{className:"text-sm font-medium text-yellow-800 mb-1",children:"Pagos parciales"}),p.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:y.partialPayment}),p.jsxs("p",{className:"text-xs text-yellow-600",children:[m>0?Math.round(y.partialPayment/m*100):0,"% del total"]})]}),p.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[p.jsx("h3",{className:"text-sm font-medium text-yellow-800 mb-1",children:"Promesas de pago"}),p.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:y.promise}),p.jsxs("p",{className:"text-xs text-yellow-600",children:[m>0?Math.round(y.promise/m*100):0,"% del total"]})]}),p.jsxs("div",{className:"bg-red-50 p-4 rounded-lg",children:[p.jsx("h3",{className:"text-sm font-medium text-red-800 mb-1",children:"Sin pago"}),p.jsx("p",{className:"text-2xl font-bold text-red-600",children:y.noPayment}),p.jsxs("p",{className:"text-xs text-red-600",children:[m>0?Math.round(y.noPayment/m*100):0,"% del total"]})]})]})]}),p.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[p.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Estadísticas de Clientes"}),p.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[p.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[p.jsx("h3",{className:"text-sm font-medium text-blue-800 mb-1",children:"Total de clientes"}),p.jsx("p",{className:"text-2xl font-bold text-blue-600",children:v.total})]}),p.jsxs("div",{className:"bg-red-50 p-4 rounded-lg",children:[p.jsx("h3",{className:"text-sm font-medium text-red-800 mb-1",children:"Con deuda"}),p.jsx("p",{className:"text-2xl font-bold text-red-600",children:v.withDebt}),p.jsxs("p",{className:"text-xs text-red-600",children:[v.total>0?Math.round(v.withDebt/v.total*100):0,"% del total"]})]}),p.jsxs("div",{className:"bg-red-50 p-4 rounded-lg col-span-2",children:[p.jsx("h3",{className:"text-sm font-medium text-red-800 mb-1",children:"Deuda total"}),p.jsxs("p",{className:"text-2xl font-bold text-red-600",children:["$",v.totalDebt.toLocaleString("es-CO")]})]}),p.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[p.jsx("h3",{className:"text-sm font-medium text-green-800 mb-1",children:"Alta probabilidad de pago"}),p.jsx("p",{className:"text-2xl font-bold text-green-600",children:v.highProbability}),p.jsxs("p",{className:"text-xs text-green-600",children:[v.total>0?Math.round(v.highProbability/v.total*100):0,"% del total"]})]}),p.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[p.jsx("h3",{className:"text-sm font-medium text-yellow-800 mb-1",children:"Media probabilidad"}),p.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:v.mediumProbability}),p.jsxs("p",{className:"text-xs text-yellow-600",children:[v.total>0?Math.round(v.mediumProbability/v.total*100):0,"% del total"]})]})]})]})]}),p.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-8",children:[p.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Top 10 Clientes con Mayor Deuda"}),p.jsx("div",{className:"overflow-x-auto",children:p.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[p.jsx("thead",{className:"bg-gray-50",children:p.jsxs("tr",{children:[p.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nombre"}),p.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Deuda"}),p.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Probabilidad de Pago"}),p.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Última Conversación"})]})}),p.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a.sort((E,x)=>x.debt-E.debt).slice(0,10).map(E=>{var x,C,A;return p.jsxs("tr",{children:[p.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:p.jsx("div",{className:"font-medium text-gray-900",children:E.name})}),p.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:p.jsxs("div",{className:"text-sm font-medium text-red-600",children:["$",E.debt.toLocaleString("es-CO")]})}),p.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:p.jsxs("div",{className:`text-sm font-medium ${((x=E.soul)==null?void 0:x.probability)>=70?"text-green-600":((C=E.soul)==null?void 0:C.probability)>=40?"text-yellow-600":"text-red-600"}`,children:[((A=E.soul)==null?void 0:A.probability)||0,"%"]})}),p.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:p.jsx("div",{className:"text-sm text-gray-500",children:E.lastContact?new Date(E.lastContact.seconds*1e3).toLocaleDateString():"Sin contacto"})})]},E.id)})})]})})]})]})},L3=()=>{const{currentUser:n,userDetails:e}=ru(),t=_n(),i=async()=>{try{await dP(),t("/login")}catch(a){console.error("Error al cerrar sesión:",a)}};return p.jsx("nav",{className:"bg-white p-4 shadow",children:p.jsxs("div",{className:"container mx-auto flex justify-between items-center",children:[p.jsx("div",{className:"flex items-center",children:p.jsx("span",{className:"text-lg font-semibold text-gray-700",children:"Sistema de Cobranza Adaptativa"})}),p.jsx("div",{className:"flex items-center space-x-4",children:n&&p.jsxs(p.Fragment,{children:[p.jsx("span",{className:"text-sm text-gray-600",children:(e==null?void 0:e.displayName)||n.email}),p.jsx("button",{className:"text-sm text-gray-600 hover:text-gray-900",onClick:i,children:"Cerrar sesión"})]})})]})})},U3=()=>{const{isAdmin:n}=ru();return p.jsxs("div",{className:"bg-gray-800 text-white w-64 flex-shrink-0 hidden md:block",children:[p.jsx("div",{className:"p-4",children:p.jsx("h2",{className:"text-xl font-bold",children:"Acriventas"})}),p.jsxs("nav",{className:"mt-8",children:[p.jsxs(ha,{to:"/",className:({isActive:e})=>`flex items-center py-2 px-4 ${e?"bg-gray-700":"hover:bg-gray-700"}`,end:!0,children:[p.jsx(SP,{className:"mr-3"}),"Dashboard"]}),p.jsxs(ha,{to:"/clients",className:({isActive:e})=>`flex items-center py-2 px-4 ${e?"bg-gray-700":"hover:bg-gray-700"}`,children:[p.jsx(NP,{className:"mr-3"}),"Clientes"]}),p.jsxs(ha,{to:"/conversations",className:({isActive:e})=>`flex items-center py-2 px-4 ${e?"bg-gray-700":"hover:bg-gray-700"}`,children:[p.jsx(AP,{className:"mr-3"}),"Conversaciones"]}),p.jsxs(ha,{to:"/reports",className:({isActive:e})=>`flex items-center py-2 px-4 ${e?"bg-gray-700":"hover:bg-gray-700"}`,children:[p.jsx(xP,{className:"mr-3"}),"Reportes"]}),p.jsxs(ha,{to:"/settings/ai",className:({isActive:e})=>`flex items-center py-2 px-4 ${e?"bg-gray-700":"hover:bg-gray-700"}`,children:[p.jsx(CP,{className:"mr-3"}),"Configuración IA"]}),n&&p.jsxs(ha,{to:"/settings",className:({isActive:e})=>`flex items-center py-2 px-4 ${e?"bg-gray-700":"hover:bg-gray-700"}`,children:[p.jsx(wP,{className:"mr-3"}),"Configuración"]})]})]})},z3=()=>p.jsxs("div",{className:"flex h-screen bg-gray-100",children:[p.jsx(U3,{}),p.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[p.jsx(L3,{}),p.jsx("main",{className:"flex-1 overflow-y-auto p-4",children:p.jsx(hC,{})})]})]}),B3=({children:n})=>{const{currentUser:e,loading:t}=ru();return t?p.jsx("div",{className:"flex h-screen items-center justify-center",children:"Cargando..."}):e?n:p.jsx(m1,{to:"/login"})};function q3(){return p.jsx(LC,{children:p.jsx(fP,{children:p.jsxs(mC,{children:[p.jsx(gn,{path:"/login",element:p.jsx(mP,{})}),p.jsx(gn,{path:"/register",element:p.jsx(pP,{})}),p.jsxs(gn,{path:"/",element:p.jsx(B3,{children:p.jsx(z3,{})}),children:[p.jsx(gn,{index:!0,element:p.jsx(zj,{})}),p.jsx(gn,{path:"clients",element:p.jsx(Gj,{})}),p.jsx(gn,{path:"clients/:clientId",element:p.jsx(Bj,{})}),p.jsx(gn,{path:"clients/search",element:p.jsx(qj,{})}),p.jsx(gn,{path:"clients/new",element:p.jsx(Fj,{})}),p.jsx(gn,{path:"conversation/new",element:p.jsx(Hj,{})}),p.jsx(gn,{path:"conversation/new/:clientId",element:p.jsx(P3,{})}),p.jsx(gn,{path:"conversation/:conversationId",element:p.jsx(j3,{})}),p.jsx(gn,{path:"reports",element:p.jsx(V3,{})}),p.jsx(gn,{path:"settings/ai",element:p.jsx(k3,{})})]}),p.jsx(gn,{path:"*",element:p.jsx(m1,{to:"/",replace:!0})})]})})})}bS.createRoot(document.getElementById("root")).render(p.jsx(V.StrictMode,{children:p.jsx(q3,{})}));
