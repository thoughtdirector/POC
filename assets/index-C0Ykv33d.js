(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();function sS(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var fp={exports:{}},fu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k_;function aS(){if(k_)return fu;k_=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var f in a)f!=="key"&&(l[f]=a[f])}else l=a;return a=l.ref,{$$typeof:n,type:i,key:c,ref:a!==void 0?a:null,props:l}}return fu.Fragment=e,fu.jsx=t,fu.jsxs=t,fu}var V_;function oS(){return V_||(V_=1,fp.exports=aS()),fp.exports}var g=oS(),mp={exports:{}},De={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var L_;function lS(){if(L_)return De;L_=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),E=Symbol.iterator;function w(j){return j===null||typeof j!="object"?null:(j=E&&j[E]||j["@@iterator"],typeof j=="function"?j:null)}var R={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,U={};function O(j,oe,fe){this.props=j,this.context=oe,this.refs=U,this.updater=fe||R}O.prototype.isReactComponent={},O.prototype.setState=function(j,oe){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,oe,"setState")},O.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function Y(){}Y.prototype=O.prototype;function Q(j,oe,fe){this.props=j,this.context=oe,this.refs=U,this.updater=fe||R}var z=Q.prototype=new Y;z.constructor=Q,S(z,O.prototype),z.isPureReactComponent=!0;var ue=Array.isArray,le={H:null,A:null,T:null,S:null,V:null},ye=Object.prototype.hasOwnProperty;function M(j,oe,fe,ce,ee,ne){return fe=ne.ref,{$$typeof:n,type:j,key:oe,ref:fe!==void 0?fe:null,props:ne}}function C(j,oe){return M(j.type,oe,void 0,void 0,void 0,j.props)}function N(j){return typeof j=="object"&&j!==null&&j.$$typeof===n}function P(j){var oe={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(fe){return oe[fe]})}var L=/\/+/g;function B(j,oe){return typeof j=="object"&&j!==null&&j.key!=null?P(""+j.key):oe.toString(36)}function D(){}function _t(j){switch(j.status){case"fulfilled":return j.value;case"rejected":throw j.reason;default:switch(typeof j.status=="string"?j.then(D,D):(j.status="pending",j.then(function(oe){j.status==="pending"&&(j.status="fulfilled",j.value=oe)},function(oe){j.status==="pending"&&(j.status="rejected",j.reason=oe)})),j.status){case"fulfilled":return j.value;case"rejected":throw j.reason}}throw j}function st(j,oe,fe,ce,ee){var ne=typeof j;(ne==="undefined"||ne==="boolean")&&(j=null);var W=!1;if(j===null)W=!0;else switch(ne){case"bigint":case"string":case"number":W=!0;break;case"object":switch(j.$$typeof){case n:case e:W=!0;break;case v:return W=j._init,st(W(j._payload),oe,fe,ce,ee)}}if(W)return ee=ee(j),W=ce===""?"."+B(j,0):ce,ue(ee)?(fe="",W!=null&&(fe=W.replace(L,"$&/")+"/"),st(ee,oe,fe,"",function(fr){return fr})):ee!=null&&(N(ee)&&(ee=C(ee,fe+(ee.key==null||j&&j.key===ee.key?"":(""+ee.key).replace(L,"$&/")+"/")+W)),oe.push(ee)),1;W=0;var _e=ce===""?".":ce+":";if(ue(j))for(var Ge=0;Ge<j.length;Ge++)ce=j[Ge],ne=_e+B(ce,Ge),W+=st(ce,oe,fe,ne,ee);else if(Ge=w(j),typeof Ge=="function")for(j=Ge.call(j),Ge=0;!(ce=j.next()).done;)ce=ce.value,ne=_e+B(ce,Ge++),W+=st(ce,oe,fe,ne,ee);else if(ne==="object"){if(typeof j.then=="function")return st(_t(j),oe,fe,ce,ee);throw oe=String(j),Error("Objects are not valid as a React child (found: "+(oe==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":oe)+"). If you meant to render a collection of children, use an array instead.")}return W}function J(j,oe,fe){if(j==null)return j;var ce=[],ee=0;return st(j,ce,"","",function(ne){return oe.call(fe,ne,ee++)}),ce}function he(j){if(j._status===-1){var oe=j._result;oe=oe(),oe.then(function(fe){(j._status===0||j._status===-1)&&(j._status=1,j._result=fe)},function(fe){(j._status===0||j._status===-1)&&(j._status=2,j._result=fe)}),j._status===-1&&(j._status=0,j._result=oe)}if(j._status===1)return j._result.default;throw j._result}var ve=typeof reportError=="function"?reportError:function(j){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var oe=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof j=="object"&&j!==null&&typeof j.message=="string"?String(j.message):String(j),error:j});if(!window.dispatchEvent(oe))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",j);return}console.error(j)};function je(){}return De.Children={map:J,forEach:function(j,oe,fe){J(j,function(){oe.apply(this,arguments)},fe)},count:function(j){var oe=0;return J(j,function(){oe++}),oe},toArray:function(j){return J(j,function(oe){return oe})||[]},only:function(j){if(!N(j))throw Error("React.Children.only expected to receive a single React element child.");return j}},De.Component=O,De.Fragment=t,De.Profiler=a,De.PureComponent=Q,De.StrictMode=i,De.Suspense=m,De.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=le,De.__COMPILER_RUNTIME={__proto__:null,c:function(j){return le.H.useMemoCache(j)}},De.cache=function(j){return function(){return j.apply(null,arguments)}},De.cloneElement=function(j,oe,fe){if(j==null)throw Error("The argument must be a React element, but you passed "+j+".");var ce=S({},j.props),ee=j.key,ne=void 0;if(oe!=null)for(W in oe.ref!==void 0&&(ne=void 0),oe.key!==void 0&&(ee=""+oe.key),oe)!ye.call(oe,W)||W==="key"||W==="__self"||W==="__source"||W==="ref"&&oe.ref===void 0||(ce[W]=oe[W]);var W=arguments.length-2;if(W===1)ce.children=fe;else if(1<W){for(var _e=Array(W),Ge=0;Ge<W;Ge++)_e[Ge]=arguments[Ge+2];ce.children=_e}return M(j.type,ee,void 0,void 0,ne,ce)},De.createContext=function(j){return j={$$typeof:c,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null},j.Provider=j,j.Consumer={$$typeof:l,_context:j},j},De.createElement=function(j,oe,fe){var ce,ee={},ne=null;if(oe!=null)for(ce in oe.key!==void 0&&(ne=""+oe.key),oe)ye.call(oe,ce)&&ce!=="key"&&ce!=="__self"&&ce!=="__source"&&(ee[ce]=oe[ce]);var W=arguments.length-2;if(W===1)ee.children=fe;else if(1<W){for(var _e=Array(W),Ge=0;Ge<W;Ge++)_e[Ge]=arguments[Ge+2];ee.children=_e}if(j&&j.defaultProps)for(ce in W=j.defaultProps,W)ee[ce]===void 0&&(ee[ce]=W[ce]);return M(j,ne,void 0,void 0,null,ee)},De.createRef=function(){return{current:null}},De.forwardRef=function(j){return{$$typeof:f,render:j}},De.isValidElement=N,De.lazy=function(j){return{$$typeof:v,_payload:{_status:-1,_result:j},_init:he}},De.memo=function(j,oe){return{$$typeof:y,type:j,compare:oe===void 0?null:oe}},De.startTransition=function(j){var oe=le.T,fe={};le.T=fe;try{var ce=j(),ee=le.S;ee!==null&&ee(fe,ce),typeof ce=="object"&&ce!==null&&typeof ce.then=="function"&&ce.then(je,ve)}catch(ne){ve(ne)}finally{le.T=oe}},De.unstable_useCacheRefresh=function(){return le.H.useCacheRefresh()},De.use=function(j){return le.H.use(j)},De.useActionState=function(j,oe,fe){return le.H.useActionState(j,oe,fe)},De.useCallback=function(j,oe){return le.H.useCallback(j,oe)},De.useContext=function(j){return le.H.useContext(j)},De.useDebugValue=function(){},De.useDeferredValue=function(j,oe){return le.H.useDeferredValue(j,oe)},De.useEffect=function(j,oe,fe){var ce=le.H;if(typeof fe=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ce.useEffect(j,oe)},De.useId=function(){return le.H.useId()},De.useImperativeHandle=function(j,oe,fe){return le.H.useImperativeHandle(j,oe,fe)},De.useInsertionEffect=function(j,oe){return le.H.useInsertionEffect(j,oe)},De.useLayoutEffect=function(j,oe){return le.H.useLayoutEffect(j,oe)},De.useMemo=function(j,oe){return le.H.useMemo(j,oe)},De.useOptimistic=function(j,oe){return le.H.useOptimistic(j,oe)},De.useReducer=function(j,oe,fe){return le.H.useReducer(j,oe,fe)},De.useRef=function(j){return le.H.useRef(j)},De.useState=function(j){return le.H.useState(j)},De.useSyncExternalStore=function(j,oe,fe){return le.H.useSyncExternalStore(j,oe,fe)},De.useTransition=function(){return le.H.useTransition()},De.version="19.1.0",De}var U_;function yg(){return U_||(U_=1,mp.exports=lS()),mp.exports}var V=yg();const ya=sS(V);var pp={exports:{}},mu={},gp={exports:{}},yp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var z_;function uS(){return z_||(z_=1,function(n){function e(J,he){var ve=J.length;J.push(he);e:for(;0<ve;){var je=ve-1>>>1,j=J[je];if(0<a(j,he))J[je]=he,J[ve]=j,ve=je;else break e}}function t(J){return J.length===0?null:J[0]}function i(J){if(J.length===0)return null;var he=J[0],ve=J.pop();if(ve!==he){J[0]=ve;e:for(var je=0,j=J.length,oe=j>>>1;je<oe;){var fe=2*(je+1)-1,ce=J[fe],ee=fe+1,ne=J[ee];if(0>a(ce,ve))ee<j&&0>a(ne,ce)?(J[je]=ne,J[ee]=ve,je=ee):(J[je]=ce,J[fe]=ve,je=fe);else if(ee<j&&0>a(ne,ve))J[je]=ne,J[ee]=ve,je=ee;else break e}}return he}function a(J,he){var ve=J.sortIndex-he.sortIndex;return ve!==0?ve:J.id-he.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,f=c.now();n.unstable_now=function(){return c.now()-f}}var m=[],y=[],v=1,E=null,w=3,R=!1,S=!1,U=!1,O=!1,Y=typeof setTimeout=="function"?setTimeout:null,Q=typeof clearTimeout=="function"?clearTimeout:null,z=typeof setImmediate<"u"?setImmediate:null;function ue(J){for(var he=t(y);he!==null;){if(he.callback===null)i(y);else if(he.startTime<=J)i(y),he.sortIndex=he.expirationTime,e(m,he);else break;he=t(y)}}function le(J){if(U=!1,ue(J),!S)if(t(m)!==null)S=!0,ye||(ye=!0,B());else{var he=t(y);he!==null&&st(le,he.startTime-J)}}var ye=!1,M=-1,C=5,N=-1;function P(){return O?!0:!(n.unstable_now()-N<C)}function L(){if(O=!1,ye){var J=n.unstable_now();N=J;var he=!0;try{e:{S=!1,U&&(U=!1,Q(M),M=-1),R=!0;var ve=w;try{t:{for(ue(J),E=t(m);E!==null&&!(E.expirationTime>J&&P());){var je=E.callback;if(typeof je=="function"){E.callback=null,w=E.priorityLevel;var j=je(E.expirationTime<=J);if(J=n.unstable_now(),typeof j=="function"){E.callback=j,ue(J),he=!0;break t}E===t(m)&&i(m),ue(J)}else i(m);E=t(m)}if(E!==null)he=!0;else{var oe=t(y);oe!==null&&st(le,oe.startTime-J),he=!1}}break e}finally{E=null,w=ve,R=!1}he=void 0}}finally{he?B():ye=!1}}}var B;if(typeof z=="function")B=function(){z(L)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,_t=D.port2;D.port1.onmessage=L,B=function(){_t.postMessage(null)}}else B=function(){Y(L,0)};function st(J,he){M=Y(function(){J(n.unstable_now())},he)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(J){J.callback=null},n.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<J?Math.floor(1e3/J):5},n.unstable_getCurrentPriorityLevel=function(){return w},n.unstable_next=function(J){switch(w){case 1:case 2:case 3:var he=3;break;default:he=w}var ve=w;w=he;try{return J()}finally{w=ve}},n.unstable_requestPaint=function(){O=!0},n.unstable_runWithPriority=function(J,he){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var ve=w;w=J;try{return he()}finally{w=ve}},n.unstable_scheduleCallback=function(J,he,ve){var je=n.unstable_now();switch(typeof ve=="object"&&ve!==null?(ve=ve.delay,ve=typeof ve=="number"&&0<ve?je+ve:je):ve=je,J){case 1:var j=-1;break;case 2:j=250;break;case 5:j=1073741823;break;case 4:j=1e4;break;default:j=5e3}return j=ve+j,J={id:v++,callback:he,priorityLevel:J,startTime:ve,expirationTime:j,sortIndex:-1},ve>je?(J.sortIndex=ve,e(y,J),t(m)===null&&J===t(y)&&(U?(Q(M),M=-1):U=!0,st(le,ve-je))):(J.sortIndex=j,e(m,J),S||R||(S=!0,ye||(ye=!0,B()))),J},n.unstable_shouldYield=P,n.unstable_wrapCallback=function(J){var he=w;return function(){var ve=w;w=he;try{return J.apply(this,arguments)}finally{w=ve}}}}(yp)),yp}var B_;function cS(){return B_||(B_=1,gp.exports=uS()),gp.exports}var vp={exports:{}},sn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var q_;function dS(){if(q_)return sn;q_=1;var n=yg();function e(m){var y="https://react.dev/errors/"+m;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)y+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+m+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(m,y,v){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:E==null?null:""+E,children:m,containerInfo:y,implementation:v}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(m,y){if(m==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return sn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,sn.createPortal=function(m,y){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return l(m,y,null,v)},sn.flushSync=function(m){var y=c.T,v=i.p;try{if(c.T=null,i.p=2,m)return m()}finally{c.T=y,i.p=v,i.d.f()}},sn.preconnect=function(m,y){typeof m=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,i.d.C(m,y))},sn.prefetchDNS=function(m){typeof m=="string"&&i.d.D(m)},sn.preinit=function(m,y){if(typeof m=="string"&&y&&typeof y.as=="string"){var v=y.as,E=f(v,y.crossOrigin),w=typeof y.integrity=="string"?y.integrity:void 0,R=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;v==="style"?i.d.S(m,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:E,integrity:w,fetchPriority:R}):v==="script"&&i.d.X(m,{crossOrigin:E,integrity:w,fetchPriority:R,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},sn.preinitModule=function(m,y){if(typeof m=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var v=f(y.as,y.crossOrigin);i.d.M(m,{crossOrigin:v,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&i.d.M(m)},sn.preload=function(m,y){if(typeof m=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var v=y.as,E=f(v,y.crossOrigin);i.d.L(m,v,{crossOrigin:E,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},sn.preloadModule=function(m,y){if(typeof m=="string")if(y){var v=f(y.as,y.crossOrigin);i.d.m(m,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:v,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else i.d.m(m)},sn.requestFormReset=function(m){i.d.r(m)},sn.unstable_batchedUpdates=function(m,y){return m(y)},sn.useFormState=function(m,y,v){return c.H.useFormState(m,y,v)},sn.useFormStatus=function(){return c.H.useHostTransitionStatus()},sn.version="19.1.0",sn}var F_;function hS(){if(F_)return vp.exports;F_=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),vp.exports=dS(),vp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var H_;function fS(){if(H_)return mu;H_=1;var n=cS(),e=yg(),t=hS();function i(r){var s="https://react.dev/errors/"+r;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function l(r){var s=r,o=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,(s.flags&4098)!==0&&(o=s.return),r=s.return;while(r)}return s.tag===3?o:null}function c(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function f(r){if(l(r)!==r)throw Error(i(188))}function m(r){var s=r.alternate;if(!s){if(s=l(r),s===null)throw Error(i(188));return s!==r?null:r}for(var o=r,u=s;;){var h=o.return;if(h===null)break;var p=h.alternate;if(p===null){if(u=h.return,u!==null){o=u;continue}break}if(h.child===p.child){for(p=h.child;p;){if(p===o)return f(h),r;if(p===u)return f(h),s;p=p.sibling}throw Error(i(188))}if(o.return!==u.return)o=h,u=p;else{for(var T=!1,x=h.child;x;){if(x===o){T=!0,o=h,u=p;break}if(x===u){T=!0,u=h,o=p;break}x=x.sibling}if(!T){for(x=p.child;x;){if(x===o){T=!0,o=p,u=h;break}if(x===u){T=!0,u=p,o=h;break}x=x.sibling}if(!T)throw Error(i(189))}}if(o.alternate!==u)throw Error(i(190))}if(o.tag!==3)throw Error(i(188));return o.stateNode.current===o?r:s}function y(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r;for(r=r.child;r!==null;){if(s=y(r),s!==null)return s;r=r.sibling}return null}var v=Object.assign,E=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),R=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),U=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),Y=Symbol.for("react.provider"),Q=Symbol.for("react.consumer"),z=Symbol.for("react.context"),ue=Symbol.for("react.forward_ref"),le=Symbol.for("react.suspense"),ye=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),L=Symbol.iterator;function B(r){return r===null||typeof r!="object"?null:(r=L&&r[L]||r["@@iterator"],typeof r=="function"?r:null)}var D=Symbol.for("react.client.reference");function _t(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===D?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case S:return"Fragment";case O:return"Profiler";case U:return"StrictMode";case le:return"Suspense";case ye:return"SuspenseList";case N:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case R:return"Portal";case z:return(r.displayName||"Context")+".Provider";case Q:return(r._context.displayName||"Context")+".Consumer";case ue:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case M:return s=r.displayName||null,s!==null?s:_t(r.type)||"Memo";case C:s=r._payload,r=r._init;try{return _t(r(s))}catch{}}return null}var st=Array.isArray,J=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,he=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ve={pending:!1,data:null,method:null,action:null},je=[],j=-1;function oe(r){return{current:r}}function fe(r){0>j||(r.current=je[j],je[j]=null,j--)}function ce(r,s){j++,je[j]=r.current,r.current=s}var ee=oe(null),ne=oe(null),W=oe(null),_e=oe(null);function Ge(r,s){switch(ce(W,s),ce(ne,r),ce(ee,null),s.nodeType){case 9:case 11:r=(r=s.documentElement)&&(r=r.namespaceURI)?c_(r):0;break;default:if(r=s.tagName,s=s.namespaceURI)s=c_(s),r=d_(s,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}fe(ee),ce(ee,r)}function fr(){fe(ee),fe(ne),fe(W)}function Ci(r){r.memoizedState!==null&&ce(_e,r);var s=ee.current,o=d_(s,r.type);s!==o&&(ce(ne,r),ce(ee,o))}function Br(r){ne.current===r&&(fe(ee),fe(ne)),_e.current===r&&(fe(_e),lu._currentValue=ve)}var Ns=Object.prototype.hasOwnProperty,Is=n.unstable_scheduleCallback,Ds=n.unstable_cancelCallback,sl=n.unstable_shouldYield,oc=n.unstable_requestPaint,Vn=n.unstable_now,ff=n.unstable_getCurrentPriorityLevel,al=n.unstable_ImmediatePriority,Da=n.unstable_UserBlockingPriority,Os=n.unstable_NormalPriority,mf=n.unstable_LowPriority,Oa=n.unstable_IdlePriority,ol=n.log,lc=n.unstable_setDisableYieldValue,pt=null,We=null;function Rn(r){if(typeof ol=="function"&&lc(r),We&&typeof We.setStrictMode=="function")try{We.setStrictMode(pt,r)}catch{}}var nn=Math.clz32?Math.clz32:Ps,uc=Math.log,pf=Math.LN2;function Ps(r){return r>>>=0,r===0?32:31-(uc(r)/pf|0)|0}var Ms=256,js=4194304;function er(r){var s=r&42;if(s!==0)return s;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function Pa(r,s,o){var u=r.pendingLanes;if(u===0)return 0;var h=0,p=r.suspendedLanes,T=r.pingedLanes;r=r.warmLanes;var x=u&134217727;return x!==0?(u=x&~p,u!==0?h=er(u):(T&=x,T!==0?h=er(T):o||(o=x&~r,o!==0&&(h=er(o))))):(x=u&~p,x!==0?h=er(x):T!==0?h=er(T):o||(o=u&~r,o!==0&&(h=er(o)))),h===0?0:s!==0&&s!==h&&(s&p)===0&&(p=h&-h,o=s&-s,p>=o||p===32&&(o&4194048)!==0)?s:h}function ks(r,s){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&s)===0}function ll(r,s){switch(r){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ul(){var r=Ms;return Ms<<=1,(Ms&4194048)===0&&(Ms=256),r}function cl(){var r=js;return js<<=1,(js&62914560)===0&&(js=4194304),r}function qr(r){for(var s=[],o=0;31>o;o++)s.push(r);return s}function Fr(r,s){r.pendingLanes|=s,s!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function dl(r,s,o,u,h,p){var T=r.pendingLanes;r.pendingLanes=o,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=o,r.entangledLanes&=o,r.errorRecoveryDisabledLanes&=o,r.shellSuspendCounter=0;var x=r.entanglements,I=r.expirationTimes,G=r.hiddenUpdates;for(o=T&~o;0<o;){var te=31-nn(o),se=1<<te;x[te]=0,I[te]=-1;var $=G[te];if($!==null)for(G[te]=null,te=0;te<$.length;te++){var K=$[te];K!==null&&(K.lane&=-536870913)}o&=~se}u!==0&&mr(r,u,0),p!==0&&h===0&&r.tag!==0&&(r.suspendedLanes|=p&~(T&~s))}function mr(r,s,o){r.pendingLanes|=s,r.suspendedLanes&=~s;var u=31-nn(s);r.entangledLanes|=s,r.entanglements[u]=r.entanglements[u]|1073741824|o&4194090}function hl(r,s){var o=r.entangledLanes|=s;for(r=r.entanglements;o;){var u=31-nn(o),h=1<<u;h&s|r[u]&s&&(r[u]|=s),o&=~h}}function Ni(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function Ma(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function Ii(){var r=he.p;return r!==0?r:(r=window.event,r===void 0?32:I_(r.type))}function cc(r,s){var o=he.p;try{return he.p=r,s()}finally{he.p=o}}var ut=Math.random().toString(36).slice(2),It="__reactFiber$"+ut,xt="__reactProps$"+ut,Ln="__reactContainer$"+ut,fl="__reactEvents$"+ut,gf="__reactListeners$"+ut,Di="__reactHandles$"+ut,dc="__reactResources$"+ut,Vs="__reactMarker$"+ut;function Oi(r){delete r[It],delete r[xt],delete r[fl],delete r[gf],delete r[Di]}function Hr(r){var s=r[It];if(s)return s;for(var o=r.parentNode;o;){if(s=o[Ln]||o[It]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(r=p_(r);r!==null;){if(o=r[It])return o;r=p_(r)}return s}r=o,o=r.parentNode}return null}function pr(r){if(r=r[It]||r[Ln]){var s=r.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return r}return null}function gr(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r.stateNode;throw Error(i(33))}function dn(r){var s=r[dc];return s||(s=r[dc]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function bt(r){r[Vs]=!0}var ml=new Set,ja={};function tr(r,s){Gr(r,s),Gr(r+"Capture",s)}function Gr(r,s){for(ja[r]=s,r=0;r<s.length;r++)ml.add(s[r])}var hc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),fc={},Ls={};function mc(r){return Ns.call(Ls,r)?!0:Ns.call(fc,r)?!1:hc.test(r)?Ls[r]=!0:(fc[r]=!0,!1)}function Pi(r,s,o){if(mc(s))if(o===null)r.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":r.removeAttribute(s);return;case"boolean":var u=s.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){r.removeAttribute(s);return}}r.setAttribute(s,""+o)}}function yr(r,s,o){if(o===null)r.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(s);return}r.setAttribute(s,""+o)}}function Yt(r,s,o,u){if(u===null)r.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(o);return}r.setAttributeNS(s,o,""+u)}}var Us,pc;function $r(r){if(Us===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);Us=s&&s[1]||"",pc=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Us+r+pc}var ka=!1;function Va(r,s){if(!r||ka)return"";ka=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(s){var se=function(){throw Error()};if(Object.defineProperty(se.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(se,[])}catch(K){var $=K}Reflect.construct(r,[],se)}else{try{se.call()}catch(K){$=K}r.call(se.prototype)}}else{try{throw Error()}catch(K){$=K}(se=r())&&typeof se.catch=="function"&&se.catch(function(){})}}catch(K){if(K&&$&&typeof K.stack=="string")return[K.stack,$.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=u.DetermineComponentFrameRoot(),T=p[0],x=p[1];if(T&&x){var I=T.split(`
`),G=x.split(`
`);for(h=u=0;u<I.length&&!I[u].includes("DetermineComponentFrameRoot");)u++;for(;h<G.length&&!G[h].includes("DetermineComponentFrameRoot");)h++;if(u===I.length||h===G.length)for(u=I.length-1,h=G.length-1;1<=u&&0<=h&&I[u]!==G[h];)h--;for(;1<=u&&0<=h;u--,h--)if(I[u]!==G[h]){if(u!==1||h!==1)do if(u--,h--,0>h||I[u]!==G[h]){var te=`
`+I[u].replace(" at new "," at ");return r.displayName&&te.includes("<anonymous>")&&(te=te.replace("<anonymous>",r.displayName)),te}while(1<=u&&0<=h);break}}}finally{ka=!1,Error.prepareStackTrace=o}return(o=r?r.displayName||r.name:"")?$r(o):""}function pl(r){switch(r.tag){case 26:case 27:case 5:return $r(r.type);case 16:return $r("Lazy");case 13:return $r("Suspense");case 19:return $r("SuspenseList");case 0:case 15:return Va(r.type,!1);case 11:return Va(r.type.render,!1);case 1:return Va(r.type,!0);case 31:return $r("Activity");default:return""}}function La(r){try{var s="";do s+=pl(r),r=r.return;while(r);return s}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function hn(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function gl(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function yf(r){var s=gl(r)?"checked":"value",o=Object.getOwnPropertyDescriptor(r.constructor.prototype,s),u=""+r[s];if(!r.hasOwnProperty(s)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var h=o.get,p=o.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return h.call(this)},set:function(T){u=""+T,p.call(this,T)}}),Object.defineProperty(r,s,{enumerable:o.enumerable}),{getValue:function(){return u},setValue:function(T){u=""+T},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function Ua(r){r._valueTracker||(r._valueTracker=yf(r))}function yl(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var o=s.getValue(),u="";return r&&(u=gl(r)?r.checked?"true":"false":r.value),r=u,r!==o?(s.setValue(r),!0):!1}function zs(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var vf=/[\n"\\]/g;function At(r){return r.replace(vf,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Cn(r,s,o,u,h,p,T,x){r.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?r.type=T:r.removeAttribute("type"),s!=null?T==="number"?(s===0&&r.value===""||r.value!=s)&&(r.value=""+hn(s)):r.value!==""+hn(s)&&(r.value=""+hn(s)):T!=="submit"&&T!=="reset"||r.removeAttribute("value"),s!=null?Mi(r,T,hn(s)):o!=null?Mi(r,T,hn(o)):u!=null&&r.removeAttribute("value"),h==null&&p!=null&&(r.defaultChecked=!!p),h!=null&&(r.checked=h&&typeof h!="function"&&typeof h!="symbol"),x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?r.name=""+hn(x):r.removeAttribute("name")}function Bs(r,s,o,u,h,p,T,x){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(r.type=p),s!=null||o!=null){if(!(p!=="submit"&&p!=="reset"||s!=null))return;o=o!=null?""+hn(o):"",s=s!=null?""+hn(s):o,x||s===r.value||(r.value=s),r.defaultValue=s}u=u??h,u=typeof u!="function"&&typeof u!="symbol"&&!!u,r.checked=x?r.checked:!!u,r.defaultChecked=!!u,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(r.name=T)}function Mi(r,s,o){s==="number"&&zs(r.ownerDocument)===r||r.defaultValue===""+o||(r.defaultValue=""+o)}function Yr(r,s,o,u){if(r=r.options,s){s={};for(var h=0;h<o.length;h++)s["$"+o[h]]=!0;for(o=0;o<r.length;o++)h=s.hasOwnProperty("$"+r[o].value),r[o].selected!==h&&(r[o].selected=h),h&&u&&(r[o].defaultSelected=!0)}else{for(o=""+hn(o),s=null,h=0;h<r.length;h++){if(r[h].value===o){r[h].selected=!0,u&&(r[h].defaultSelected=!0);return}s!==null||r[h].disabled||(s=r[h])}s!==null&&(s.selected=!0)}}function et(r,s,o){if(s!=null&&(s=""+hn(s),s!==r.value&&(r.value=s),o==null)){r.defaultValue!==s&&(r.defaultValue=s);return}r.defaultValue=o!=null?""+hn(o):""}function qs(r,s,o,u){if(s==null){if(u!=null){if(o!=null)throw Error(i(92));if(st(u)){if(1<u.length)throw Error(i(93));u=u[0]}o=u}o==null&&(o=""),s=o}o=hn(s),r.defaultValue=o,u=r.textContent,u===o&&u!==""&&u!==null&&(r.value=u)}function Un(r,s){if(s){var o=r.firstChild;if(o&&o===r.lastChild&&o.nodeType===3){o.nodeValue=s;return}}r.textContent=s}var Fs=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function gc(r,s,o){var u=s.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?r.setProperty(s,""):s==="float"?r.cssFloat="":r[s]="":u?r.setProperty(s,o):typeof o!="number"||o===0||Fs.has(s)?s==="float"?r.cssFloat=o:r[s]=(""+o).trim():r[s]=o+"px"}function vl(r,s,o){if(s!=null&&typeof s!="object")throw Error(i(62));if(r=r.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||s!=null&&s.hasOwnProperty(u)||(u.indexOf("--")===0?r.setProperty(u,""):u==="float"?r.cssFloat="":r[u]="");for(var h in s)u=s[h],s.hasOwnProperty(h)&&o[h]!==u&&gc(r,h,u)}else for(var p in s)s.hasOwnProperty(p)&&gc(r,p,s[p])}function _l(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _f=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),bf=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function za(r){return bf.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}var Kr=null;function zn(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Qr=null,Wr=null;function bl(r){var s=pr(r);if(s&&(r=s.stateNode)){var o=r[xt]||null;e:switch(r=s.stateNode,s.type){case"input":if(Cn(r,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),s=o.name,o.type==="radio"&&s!=null){for(o=r;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+At(""+s)+'"][type="radio"]'),s=0;s<o.length;s++){var u=o[s];if(u!==r&&u.form===r.form){var h=u[xt]||null;if(!h)throw Error(i(90));Cn(u,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(s=0;s<o.length;s++)u=o[s],u.form===r.form&&yl(u)}break e;case"textarea":et(r,o.value,o.defaultValue);break e;case"select":s=o.value,s!=null&&Yr(r,!!o.multiple,s,!1)}}}var vr=!1;function yc(r,s,o){if(vr)return r(s,o);vr=!0;try{var u=r(s);return u}finally{if(vr=!1,(Qr!==null||Wr!==null)&&(cd(),Qr&&(s=Qr,r=Wr,Wr=Qr=null,bl(s),r)))for(s=0;s<r.length;s++)bl(r[s])}}function Hs(r,s){var o=r.stateNode;if(o===null)return null;var u=o[xt]||null;if(u===null)return null;o=u[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(r=r.type,u=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!u;break e;default:r=!1}if(r)return null;if(o&&typeof o!="function")throw Error(i(231,s,typeof o));return o}var nr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Bn=!1;if(nr)try{var Gs={};Object.defineProperty(Gs,"passive",{get:function(){Bn=!0}}),window.addEventListener("test",Gs,Gs),window.removeEventListener("test",Gs,Gs)}catch{Bn=!1}var _r=null,ji=null,Xr=null;function El(){if(Xr)return Xr;var r,s=ji,o=s.length,u,h="value"in _r?_r.value:_r.textContent,p=h.length;for(r=0;r<o&&s[r]===h[r];r++);var T=o-r;for(u=1;u<=T&&s[o-u]===h[p-u];u++);return Xr=h.slice(r,1<u?1-u:void 0)}function br(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function Er(){return!0}function Tl(){return!1}function Lt(r){function s(o,u,h,p,T){this._reactName=o,this._targetInst=h,this.type=u,this.nativeEvent=p,this.target=T,this.currentTarget=null;for(var x in r)r.hasOwnProperty(x)&&(o=r[x],this[x]=o?o(p):p[x]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Er:Tl,this.isPropagationStopped=Tl,this}return v(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Er)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Er)},persist:function(){},isPersistent:Er}),s}var Ke={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ba=Lt(Ke),$s=v({},Ke,{view:0,detail:0}),vc=Lt($s),qa,Fa,Tr,Ys=v({},$s,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ws,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Tr&&(Tr&&r.type==="mousemove"?(qa=r.screenX-Tr.screenX,Fa=r.screenY-Tr.screenY):Fa=qa=0,Tr=r),qa)},movementY:function(r){return"movementY"in r?r.movementY:Fa}}),qn=Lt(Ys),_c=v({},Ys,{dataTransfer:0}),Ef=Lt(_c),Ks=v({},$s,{relatedTarget:0}),Ha=Lt(Ks),wl=v({},Ke,{animationName:0,elapsedTime:0,pseudoElement:0}),Ga=Lt(wl),bc=v({},Ke,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),$a=Lt(bc),Tf=v({},Ke,{data:0}),xl=Lt(Tf),Qs={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ec={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Tc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Al(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=Tc[r])?!!s[r]:!1}function Ws(){return Al}var wc=v({},$s,{key:function(r){if(r.key){var s=Qs[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=br(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Ec[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ws,charCode:function(r){return r.type==="keypress"?br(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?br(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Ya=Lt(wc),xc=v({},Ys,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Sl=Lt(xc),Zr=v({},$s,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ws}),Ac=Lt(Zr),Sc=v({},Ke,{propertyName:0,elapsedTime:0,pseudoElement:0}),Rc=Lt(Sc),Cc=v({},Ys,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Ka=Lt(Cc),fn=v({},Ke,{newState:0,oldState:0}),Nc=Lt(fn),Ic=[9,13,27,32],wr=nr&&"CompositionEvent"in window,d=null;nr&&"documentMode"in document&&(d=document.documentMode);var _=nr&&"TextEvent"in window&&!d,b=nr&&(!wr||d&&8<d&&11>=d),A=" ",F=!1;function X(r,s){switch(r){case"keyup":return Ic.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function de(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var ze=!1;function Dt(r,s){switch(r){case"compositionend":return de(s);case"keypress":return s.which!==32?null:(F=!0,A);case"textInput":return r=s.data,r===A&&F?null:r;default:return null}}function Be(r,s){if(ze)return r==="compositionend"||!wr&&X(r,s)?(r=El(),Xr=ji=_r=null,ze=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return b&&s.locale!=="ko"?null:s.data;default:return null}}var Ut={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ot(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!Ut[r.type]:s==="textarea"}function Jr(r,s,o,u){Qr?Wr?Wr.push(u):Wr=[u]:Qr=u,s=gd(s,"onChange"),0<s.length&&(o=new Ba("onChange","change",null,o,u),r.push({event:o,listeners:s}))}var Kt=null,xr=null;function Rl(r){s_(r,0)}function Dc(r){var s=gr(r);if(yl(s))return r}function Sy(r,s){if(r==="change")return s}var Ry=!1;if(nr){var wf;if(nr){var xf="oninput"in document;if(!xf){var Cy=document.createElement("div");Cy.setAttribute("oninput","return;"),xf=typeof Cy.oninput=="function"}wf=xf}else wf=!1;Ry=wf&&(!document.documentMode||9<document.documentMode)}function Ny(){Kt&&(Kt.detachEvent("onpropertychange",Iy),xr=Kt=null)}function Iy(r){if(r.propertyName==="value"&&Dc(xr)){var s=[];Jr(s,xr,r,zn(r)),yc(Rl,s)}}function jx(r,s,o){r==="focusin"?(Ny(),Kt=s,xr=o,Kt.attachEvent("onpropertychange",Iy)):r==="focusout"&&Ny()}function kx(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Dc(xr)}function Vx(r,s){if(r==="click")return Dc(s)}function Lx(r,s){if(r==="input"||r==="change")return Dc(s)}function Ux(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var Nn=typeof Object.is=="function"?Object.is:Ux;function Cl(r,s){if(Nn(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var o=Object.keys(r),u=Object.keys(s);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var h=o[u];if(!Ns.call(s,h)||!Nn(r[h],s[h]))return!1}return!0}function Dy(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Oy(r,s){var o=Dy(r);r=0;for(var u;o;){if(o.nodeType===3){if(u=r+o.textContent.length,r<=s&&u>=s)return{node:o,offset:s-r};r=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Dy(o)}}function Py(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?Py(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function My(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var s=zs(r.document);s instanceof r.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)r=s.contentWindow;else break;s=zs(r.document)}return s}function Af(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}var zx=nr&&"documentMode"in document&&11>=document.documentMode,Qa=null,Sf=null,Nl=null,Rf=!1;function jy(r,s,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Rf||Qa==null||Qa!==zs(u)||(u=Qa,"selectionStart"in u&&Af(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Nl&&Cl(Nl,u)||(Nl=u,u=gd(Sf,"onSelect"),0<u.length&&(s=new Ba("onSelect","select",null,s,o),r.push({event:s,listeners:u}),s.target=Qa)))}function Xs(r,s){var o={};return o[r.toLowerCase()]=s.toLowerCase(),o["Webkit"+r]="webkit"+s,o["Moz"+r]="moz"+s,o}var Wa={animationend:Xs("Animation","AnimationEnd"),animationiteration:Xs("Animation","AnimationIteration"),animationstart:Xs("Animation","AnimationStart"),transitionrun:Xs("Transition","TransitionRun"),transitionstart:Xs("Transition","TransitionStart"),transitioncancel:Xs("Transition","TransitionCancel"),transitionend:Xs("Transition","TransitionEnd")},Cf={},ky={};nr&&(ky=document.createElement("div").style,"AnimationEvent"in window||(delete Wa.animationend.animation,delete Wa.animationiteration.animation,delete Wa.animationstart.animation),"TransitionEvent"in window||delete Wa.transitionend.transition);function Zs(r){if(Cf[r])return Cf[r];if(!Wa[r])return r;var s=Wa[r],o;for(o in s)if(s.hasOwnProperty(o)&&o in ky)return Cf[r]=s[o];return r}var Vy=Zs("animationend"),Ly=Zs("animationiteration"),Uy=Zs("animationstart"),Bx=Zs("transitionrun"),qx=Zs("transitionstart"),Fx=Zs("transitioncancel"),zy=Zs("transitionend"),By=new Map,Nf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Nf.push("scrollEnd");function rr(r,s){By.set(r,s),tr(s,[r])}var qy=new WeakMap;function Fn(r,s){if(typeof r=="object"&&r!==null){var o=qy.get(r);return o!==void 0?o:(s={value:r,source:s,stack:La(s)},qy.set(r,s),s)}return{value:r,source:s,stack:La(s)}}var Hn=[],Xa=0,If=0;function Oc(){for(var r=Xa,s=If=Xa=0;s<r;){var o=Hn[s];Hn[s++]=null;var u=Hn[s];Hn[s++]=null;var h=Hn[s];Hn[s++]=null;var p=Hn[s];if(Hn[s++]=null,u!==null&&h!==null){var T=u.pending;T===null?h.next=h:(h.next=T.next,T.next=h),u.pending=h}p!==0&&Fy(o,h,p)}}function Pc(r,s,o,u){Hn[Xa++]=r,Hn[Xa++]=s,Hn[Xa++]=o,Hn[Xa++]=u,If|=u,r.lanes|=u,r=r.alternate,r!==null&&(r.lanes|=u)}function Df(r,s,o,u){return Pc(r,s,o,u),Mc(r)}function Za(r,s){return Pc(r,null,null,s),Mc(r)}function Fy(r,s,o){r.lanes|=o;var u=r.alternate;u!==null&&(u.lanes|=o);for(var h=!1,p=r.return;p!==null;)p.childLanes|=o,u=p.alternate,u!==null&&(u.childLanes|=o),p.tag===22&&(r=p.stateNode,r===null||r._visibility&1||(h=!0)),r=p,p=p.return;return r.tag===3?(p=r.stateNode,h&&s!==null&&(h=31-nn(o),r=p.hiddenUpdates,u=r[h],u===null?r[h]=[s]:u.push(s),s.lane=o|536870912),p):null}function Mc(r){if(50<eu)throw eu=0,Vm=null,Error(i(185));for(var s=r.return;s!==null;)r=s,s=r.return;return r.tag===3?r.stateNode:null}var Ja={};function Hx(r,s,o,u){this.tag=r,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function In(r,s,o,u){return new Hx(r,s,o,u)}function Of(r){return r=r.prototype,!(!r||!r.isReactComponent)}function ei(r,s){var o=r.alternate;return o===null?(o=In(r.tag,s,r.key,r.mode),o.elementType=r.elementType,o.type=r.type,o.stateNode=r.stateNode,o.alternate=r,r.alternate=o):(o.pendingProps=s,o.type=r.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=r.flags&65011712,o.childLanes=r.childLanes,o.lanes=r.lanes,o.child=r.child,o.memoizedProps=r.memoizedProps,o.memoizedState=r.memoizedState,o.updateQueue=r.updateQueue,s=r.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=r.sibling,o.index=r.index,o.ref=r.ref,o.refCleanup=r.refCleanup,o}function Hy(r,s){r.flags&=65011714;var o=r.alternate;return o===null?(r.childLanes=0,r.lanes=s,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,s=o.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),r}function jc(r,s,o,u,h,p){var T=0;if(u=r,typeof r=="function")Of(r)&&(T=1);else if(typeof r=="string")T=$A(r,o,ee.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case N:return r=In(31,o,s,h),r.elementType=N,r.lanes=p,r;case S:return Js(o.children,h,p,s);case U:T=8,h|=24;break;case O:return r=In(12,o,s,h|2),r.elementType=O,r.lanes=p,r;case le:return r=In(13,o,s,h),r.elementType=le,r.lanes=p,r;case ye:return r=In(19,o,s,h),r.elementType=ye,r.lanes=p,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case Y:case z:T=10;break e;case Q:T=9;break e;case ue:T=11;break e;case M:T=14;break e;case C:T=16,u=null;break e}T=29,o=Error(i(130,r===null?"null":typeof r,"")),u=null}return s=In(T,o,s,h),s.elementType=r,s.type=u,s.lanes=p,s}function Js(r,s,o,u){return r=In(7,r,u,s),r.lanes=o,r}function Pf(r,s,o){return r=In(6,r,null,s),r.lanes=o,r}function Mf(r,s,o){return s=In(4,r.children!==null?r.children:[],r.key,s),s.lanes=o,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}var eo=[],to=0,kc=null,Vc=0,Gn=[],$n=0,ea=null,ti=1,ni="";function ta(r,s){eo[to++]=Vc,eo[to++]=kc,kc=r,Vc=s}function Gy(r,s,o){Gn[$n++]=ti,Gn[$n++]=ni,Gn[$n++]=ea,ea=r;var u=ti;r=ni;var h=32-nn(u)-1;u&=~(1<<h),o+=1;var p=32-nn(s)+h;if(30<p){var T=h-h%5;p=(u&(1<<T)-1).toString(32),u>>=T,h-=T,ti=1<<32-nn(s)+h|o<<h|u,ni=p+r}else ti=1<<p|o<<h|u,ni=r}function jf(r){r.return!==null&&(ta(r,1),Gy(r,1,0))}function kf(r){for(;r===kc;)kc=eo[--to],eo[to]=null,Vc=eo[--to],eo[to]=null;for(;r===ea;)ea=Gn[--$n],Gn[$n]=null,ni=Gn[--$n],Gn[$n]=null,ti=Gn[--$n],Gn[$n]=null}var mn=null,gt=null,Ye=!1,na=null,Ar=!1,Vf=Error(i(519));function ra(r){var s=Error(i(418,""));throw Ol(Fn(s,r)),Vf}function $y(r){var s=r.stateNode,o=r.type,u=r.memoizedProps;switch(s[It]=r,s[xt]=u,o){case"dialog":Ve("cancel",s),Ve("close",s);break;case"iframe":case"object":case"embed":Ve("load",s);break;case"video":case"audio":for(o=0;o<nu.length;o++)Ve(nu[o],s);break;case"source":Ve("error",s);break;case"img":case"image":case"link":Ve("error",s),Ve("load",s);break;case"details":Ve("toggle",s);break;case"input":Ve("invalid",s),Bs(s,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),Ua(s);break;case"select":Ve("invalid",s);break;case"textarea":Ve("invalid",s),qs(s,u.value,u.defaultValue,u.children),Ua(s)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||s.textContent===""+o||u.suppressHydrationWarning===!0||u_(s.textContent,o)?(u.popover!=null&&(Ve("beforetoggle",s),Ve("toggle",s)),u.onScroll!=null&&Ve("scroll",s),u.onScrollEnd!=null&&Ve("scrollend",s),u.onClick!=null&&(s.onclick=yd),s=!0):s=!1,s||ra(r)}function Yy(r){for(mn=r.return;mn;)switch(mn.tag){case 5:case 13:Ar=!1;return;case 27:case 3:Ar=!0;return;default:mn=mn.return}}function Il(r){if(r!==mn)return!1;if(!Ye)return Yy(r),Ye=!0,!1;var s=r.tag,o;if((o=s!==3&&s!==27)&&((o=s===5)&&(o=r.type,o=!(o!=="form"&&o!=="button")||Jm(r.type,r.memoizedProps)),o=!o),o&&gt&&ra(r),Yy(r),s===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));e:{for(r=r.nextSibling,s=0;r;){if(r.nodeType===8)if(o=r.data,o==="/$"){if(s===0){gt=sr(r.nextSibling);break e}s--}else o!=="$"&&o!=="$!"&&o!=="$?"||s++;r=r.nextSibling}gt=null}}else s===27?(s=gt,Xi(r.type)?(r=rp,rp=null,gt=r):gt=s):gt=mn?sr(r.stateNode.nextSibling):null;return!0}function Dl(){gt=mn=null,Ye=!1}function Ky(){var r=na;return r!==null&&(En===null?En=r:En.push.apply(En,r),na=null),r}function Ol(r){na===null?na=[r]:na.push(r)}var Lf=oe(null),ia=null,ri=null;function ki(r,s,o){ce(Lf,s._currentValue),s._currentValue=o}function ii(r){r._currentValue=Lf.current,fe(Lf)}function Uf(r,s,o){for(;r!==null;){var u=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),r===o)break;r=r.return}}function zf(r,s,o,u){var h=r.child;for(h!==null&&(h.return=r);h!==null;){var p=h.dependencies;if(p!==null){var T=h.child;p=p.firstContext;e:for(;p!==null;){var x=p;p=h;for(var I=0;I<s.length;I++)if(x.context===s[I]){p.lanes|=o,x=p.alternate,x!==null&&(x.lanes|=o),Uf(p.return,o,r),u||(T=null);break e}p=x.next}}else if(h.tag===18){if(T=h.return,T===null)throw Error(i(341));T.lanes|=o,p=T.alternate,p!==null&&(p.lanes|=o),Uf(T,o,r),T=null}else T=h.child;if(T!==null)T.return=h;else for(T=h;T!==null;){if(T===r){T=null;break}if(h=T.sibling,h!==null){h.return=T.return,T=h;break}T=T.return}h=T}}function Pl(r,s,o,u){r=null;for(var h=s,p=!1;h!==null;){if(!p){if((h.flags&524288)!==0)p=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var T=h.alternate;if(T===null)throw Error(i(387));if(T=T.memoizedProps,T!==null){var x=h.type;Nn(h.pendingProps.value,T.value)||(r!==null?r.push(x):r=[x])}}else if(h===_e.current){if(T=h.alternate,T===null)throw Error(i(387));T.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(r!==null?r.push(lu):r=[lu])}h=h.return}r!==null&&zf(s,r,o,u),s.flags|=262144}function Lc(r){for(r=r.firstContext;r!==null;){if(!Nn(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function sa(r){ia=r,ri=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function rn(r){return Qy(ia,r)}function Uc(r,s){return ia===null&&sa(r),Qy(r,s)}function Qy(r,s){var o=s._currentValue;if(s={context:s,memoizedValue:o,next:null},ri===null){if(r===null)throw Error(i(308));ri=s,r.dependencies={lanes:0,firstContext:s},r.flags|=524288}else ri=ri.next=s;return o}var Gx=typeof AbortController<"u"?AbortController:function(){var r=[],s=this.signal={aborted:!1,addEventListener:function(o,u){r.push(u)}};this.abort=function(){s.aborted=!0,r.forEach(function(o){return o()})}},$x=n.unstable_scheduleCallback,Yx=n.unstable_NormalPriority,Pt={$$typeof:z,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Bf(){return{controller:new Gx,data:new Map,refCount:0}}function Ml(r){r.refCount--,r.refCount===0&&$x(Yx,function(){r.controller.abort()})}var jl=null,qf=0,no=0,ro=null;function Kx(r,s){if(jl===null){var o=jl=[];qf=0,no=Hm(),ro={status:"pending",value:void 0,then:function(u){o.push(u)}}}return qf++,s.then(Wy,Wy),s}function Wy(){if(--qf===0&&jl!==null){ro!==null&&(ro.status="fulfilled");var r=jl;jl=null,no=0,ro=null;for(var s=0;s<r.length;s++)(0,r[s])()}}function Qx(r,s){var o=[],u={status:"pending",value:null,reason:null,then:function(h){o.push(h)}};return r.then(function(){u.status="fulfilled",u.value=s;for(var h=0;h<o.length;h++)(0,o[h])(s)},function(h){for(u.status="rejected",u.reason=h,h=0;h<o.length;h++)(0,o[h])(void 0)}),u}var Xy=J.S;J.S=function(r,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&Kx(r,s),Xy!==null&&Xy(r,s)};var aa=oe(null);function Ff(){var r=aa.current;return r!==null?r:at.pooledCache}function zc(r,s){s===null?ce(aa,aa.current):ce(aa,s.pool)}function Zy(){var r=Ff();return r===null?null:{parent:Pt._currentValue,pool:r}}var kl=Error(i(460)),Jy=Error(i(474)),Bc=Error(i(542)),Hf={then:function(){}};function ev(r){return r=r.status,r==="fulfilled"||r==="rejected"}function qc(){}function tv(r,s,o){switch(o=r[o],o===void 0?r.push(s):o!==s&&(s.then(qc,qc),s=o),s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,rv(r),r;default:if(typeof s.status=="string")s.then(qc,qc);else{if(r=at,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=s,r.status="pending",r.then(function(u){if(s.status==="pending"){var h=s;h.status="fulfilled",h.value=u}},function(u){if(s.status==="pending"){var h=s;h.status="rejected",h.reason=u}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,rv(r),r}throw Vl=s,kl}}var Vl=null;function nv(){if(Vl===null)throw Error(i(459));var r=Vl;return Vl=null,r}function rv(r){if(r===kl||r===Bc)throw Error(i(483))}var Vi=!1;function Gf(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function $f(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Li(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function Ui(r,s,o){var u=r.updateQueue;if(u===null)return null;if(u=u.shared,(Xe&2)!==0){var h=u.pending;return h===null?s.next=s:(s.next=h.next,h.next=s),u.pending=s,s=Mc(r),Fy(r,null,o),s}return Pc(r,u,s,o),Mc(r)}function Ll(r,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194048)!==0)){var u=s.lanes;u&=r.pendingLanes,o|=u,s.lanes=o,hl(r,o)}}function Yf(r,s){var o=r.updateQueue,u=r.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var h=null,p=null;if(o=o.firstBaseUpdate,o!==null){do{var T={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};p===null?h=p=T:p=p.next=T,o=o.next}while(o!==null);p===null?h=p=s:p=p.next=s}else h=p=s;o={baseState:u.baseState,firstBaseUpdate:h,lastBaseUpdate:p,shared:u.shared,callbacks:u.callbacks},r.updateQueue=o;return}r=o.lastBaseUpdate,r===null?o.firstBaseUpdate=s:r.next=s,o.lastBaseUpdate=s}var Kf=!1;function Ul(){if(Kf){var r=ro;if(r!==null)throw r}}function zl(r,s,o,u){Kf=!1;var h=r.updateQueue;Vi=!1;var p=h.firstBaseUpdate,T=h.lastBaseUpdate,x=h.shared.pending;if(x!==null){h.shared.pending=null;var I=x,G=I.next;I.next=null,T===null?p=G:T.next=G,T=I;var te=r.alternate;te!==null&&(te=te.updateQueue,x=te.lastBaseUpdate,x!==T&&(x===null?te.firstBaseUpdate=G:x.next=G,te.lastBaseUpdate=I))}if(p!==null){var se=h.baseState;T=0,te=G=I=null,x=p;do{var $=x.lane&-536870913,K=$!==x.lane;if(K?(qe&$)===$:(u&$)===$){$!==0&&$===no&&(Kf=!0),te!==null&&(te=te.next={lane:0,tag:x.tag,payload:x.payload,callback:null,next:null});e:{var Se=r,Te=x;$=s;var rt=o;switch(Te.tag){case 1:if(Se=Te.payload,typeof Se=="function"){se=Se.call(rt,se,$);break e}se=Se;break e;case 3:Se.flags=Se.flags&-65537|128;case 0:if(Se=Te.payload,$=typeof Se=="function"?Se.call(rt,se,$):Se,$==null)break e;se=v({},se,$);break e;case 2:Vi=!0}}$=x.callback,$!==null&&(r.flags|=64,K&&(r.flags|=8192),K=h.callbacks,K===null?h.callbacks=[$]:K.push($))}else K={lane:$,tag:x.tag,payload:x.payload,callback:x.callback,next:null},te===null?(G=te=K,I=se):te=te.next=K,T|=$;if(x=x.next,x===null){if(x=h.shared.pending,x===null)break;K=x,x=K.next,K.next=null,h.lastBaseUpdate=K,h.shared.pending=null}}while(!0);te===null&&(I=se),h.baseState=I,h.firstBaseUpdate=G,h.lastBaseUpdate=te,p===null&&(h.shared.lanes=0),Yi|=T,r.lanes=T,r.memoizedState=se}}function iv(r,s){if(typeof r!="function")throw Error(i(191,r));r.call(s)}function sv(r,s){var o=r.callbacks;if(o!==null)for(r.callbacks=null,r=0;r<o.length;r++)iv(o[r],s)}var io=oe(null),Fc=oe(0);function av(r,s){r=di,ce(Fc,r),ce(io,s),di=r|s.baseLanes}function Qf(){ce(Fc,di),ce(io,io.current)}function Wf(){di=Fc.current,fe(io),fe(Fc)}var zi=0,Oe=null,tt=null,St=null,Hc=!1,so=!1,oa=!1,Gc=0,Bl=0,ao=null,Wx=0;function Et(){throw Error(i(321))}function Xf(r,s){if(s===null)return!1;for(var o=0;o<s.length&&o<r.length;o++)if(!Nn(r[o],s[o]))return!1;return!0}function Zf(r,s,o,u,h,p){return zi=p,Oe=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,J.H=r===null||r.memoizedState===null?Fv:Hv,oa=!1,p=o(u,h),oa=!1,so&&(p=lv(s,o,u,h)),ov(r),p}function ov(r){J.H=Xc;var s=tt!==null&&tt.next!==null;if(zi=0,St=tt=Oe=null,Hc=!1,Bl=0,ao=null,s)throw Error(i(300));r===null||zt||(r=r.dependencies,r!==null&&Lc(r)&&(zt=!0))}function lv(r,s,o,u){Oe=r;var h=0;do{if(so&&(ao=null),Bl=0,so=!1,25<=h)throw Error(i(301));if(h+=1,St=tt=null,r.updateQueue!=null){var p=r.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}J.H=rA,p=s(o,u)}while(so);return p}function Xx(){var r=J.H,s=r.useState()[0];return s=typeof s.then=="function"?ql(s):s,r=r.useState()[0],(tt!==null?tt.memoizedState:null)!==r&&(Oe.flags|=1024),s}function Jf(){var r=Gc!==0;return Gc=0,r}function em(r,s,o){s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~o}function tm(r){if(Hc){for(r=r.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Hc=!1}zi=0,St=tt=Oe=null,so=!1,Bl=Gc=0,ao=null}function _n(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return St===null?Oe.memoizedState=St=r:St=St.next=r,St}function Rt(){if(tt===null){var r=Oe.alternate;r=r!==null?r.memoizedState:null}else r=tt.next;var s=St===null?Oe.memoizedState:St.next;if(s!==null)St=s,tt=r;else{if(r===null)throw Oe.alternate===null?Error(i(467)):Error(i(310));tt=r,r={memoizedState:tt.memoizedState,baseState:tt.baseState,baseQueue:tt.baseQueue,queue:tt.queue,next:null},St===null?Oe.memoizedState=St=r:St=St.next=r}return St}function nm(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ql(r){var s=Bl;return Bl+=1,ao===null&&(ao=[]),r=tv(ao,r,s),s=Oe,(St===null?s.memoizedState:St.next)===null&&(s=s.alternate,J.H=s===null||s.memoizedState===null?Fv:Hv),r}function $c(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return ql(r);if(r.$$typeof===z)return rn(r)}throw Error(i(438,String(r)))}function rm(r){var s=null,o=Oe.updateQueue;if(o!==null&&(s=o.memoCache),s==null){var u=Oe.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(s={data:u.data.map(function(h){return h.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),o===null&&(o=nm(),Oe.updateQueue=o),o.memoCache=s,o=s.data[s.index],o===void 0)for(o=s.data[s.index]=Array(r),u=0;u<r;u++)o[u]=P;return s.index++,o}function si(r,s){return typeof s=="function"?s(r):s}function Yc(r){var s=Rt();return im(s,tt,r)}function im(r,s,o){var u=r.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=o;var h=r.baseQueue,p=u.pending;if(p!==null){if(h!==null){var T=h.next;h.next=p.next,p.next=T}s.baseQueue=h=p,u.pending=null}if(p=r.baseState,h===null)r.memoizedState=p;else{s=h.next;var x=T=null,I=null,G=s,te=!1;do{var se=G.lane&-536870913;if(se!==G.lane?(qe&se)===se:(zi&se)===se){var $=G.revertLane;if($===0)I!==null&&(I=I.next={lane:0,revertLane:0,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),se===no&&(te=!0);else if((zi&$)===$){G=G.next,$===no&&(te=!0);continue}else se={lane:0,revertLane:G.revertLane,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},I===null?(x=I=se,T=p):I=I.next=se,Oe.lanes|=$,Yi|=$;se=G.action,oa&&o(p,se),p=G.hasEagerState?G.eagerState:o(p,se)}else $={lane:se,revertLane:G.revertLane,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},I===null?(x=I=$,T=p):I=I.next=$,Oe.lanes|=se,Yi|=se;G=G.next}while(G!==null&&G!==s);if(I===null?T=p:I.next=x,!Nn(p,r.memoizedState)&&(zt=!0,te&&(o=ro,o!==null)))throw o;r.memoizedState=p,r.baseState=T,r.baseQueue=I,u.lastRenderedState=p}return h===null&&(u.lanes=0),[r.memoizedState,u.dispatch]}function sm(r){var s=Rt(),o=s.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=r;var u=o.dispatch,h=o.pending,p=s.memoizedState;if(h!==null){o.pending=null;var T=h=h.next;do p=r(p,T.action),T=T.next;while(T!==h);Nn(p,s.memoizedState)||(zt=!0),s.memoizedState=p,s.baseQueue===null&&(s.baseState=p),o.lastRenderedState=p}return[p,u]}function uv(r,s,o){var u=Oe,h=Rt(),p=Ye;if(p){if(o===void 0)throw Error(i(407));o=o()}else o=s();var T=!Nn((tt||h).memoizedState,o);T&&(h.memoizedState=o,zt=!0),h=h.queue;var x=hv.bind(null,u,h,r);if(Fl(2048,8,x,[r]),h.getSnapshot!==s||T||St!==null&&St.memoizedState.tag&1){if(u.flags|=2048,oo(9,Kc(),dv.bind(null,u,h,o,s),null),at===null)throw Error(i(349));p||(zi&124)!==0||cv(u,s,o)}return o}function cv(r,s,o){r.flags|=16384,r={getSnapshot:s,value:o},s=Oe.updateQueue,s===null?(s=nm(),Oe.updateQueue=s,s.stores=[r]):(o=s.stores,o===null?s.stores=[r]:o.push(r))}function dv(r,s,o,u){s.value=o,s.getSnapshot=u,fv(s)&&mv(r)}function hv(r,s,o){return o(function(){fv(s)&&mv(r)})}function fv(r){var s=r.getSnapshot;r=r.value;try{var o=s();return!Nn(r,o)}catch{return!0}}function mv(r){var s=Za(r,2);s!==null&&jn(s,r,2)}function am(r){var s=_n();if(typeof r=="function"){var o=r;if(r=o(),oa){Rn(!0);try{o()}finally{Rn(!1)}}}return s.memoizedState=s.baseState=r,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:si,lastRenderedState:r},s}function pv(r,s,o,u){return r.baseState=o,im(r,tt,typeof u=="function"?u:si)}function Zx(r,s,o,u,h){if(Wc(r))throw Error(i(485));if(r=s.action,r!==null){var p={payload:h,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){p.listeners.push(T)}};J.T!==null?o(!0):p.isTransition=!1,u(p),o=s.pending,o===null?(p.next=s.pending=p,gv(s,p)):(p.next=o.next,s.pending=o.next=p)}}function gv(r,s){var o=s.action,u=s.payload,h=r.state;if(s.isTransition){var p=J.T,T={};J.T=T;try{var x=o(h,u),I=J.S;I!==null&&I(T,x),yv(r,s,x)}catch(G){om(r,s,G)}finally{J.T=p}}else try{p=o(h,u),yv(r,s,p)}catch(G){om(r,s,G)}}function yv(r,s,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){vv(r,s,u)},function(u){return om(r,s,u)}):vv(r,s,o)}function vv(r,s,o){s.status="fulfilled",s.value=o,_v(s),r.state=o,s=r.pending,s!==null&&(o=s.next,o===s?r.pending=null:(o=o.next,s.next=o,gv(r,o)))}function om(r,s,o){var u=r.pending;if(r.pending=null,u!==null){u=u.next;do s.status="rejected",s.reason=o,_v(s),s=s.next;while(s!==u)}r.action=null}function _v(r){r=r.listeners;for(var s=0;s<r.length;s++)(0,r[s])()}function bv(r,s){return s}function Ev(r,s){if(Ye){var o=at.formState;if(o!==null){e:{var u=Oe;if(Ye){if(gt){t:{for(var h=gt,p=Ar;h.nodeType!==8;){if(!p){h=null;break t}if(h=sr(h.nextSibling),h===null){h=null;break t}}p=h.data,h=p==="F!"||p==="F"?h:null}if(h){gt=sr(h.nextSibling),u=h.data==="F!";break e}}ra(u)}u=!1}u&&(s=o[0])}}return o=_n(),o.memoizedState=o.baseState=s,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:bv,lastRenderedState:s},o.queue=u,o=zv.bind(null,Oe,u),u.dispatch=o,u=am(!1),p=hm.bind(null,Oe,!1,u.queue),u=_n(),h={state:s,dispatch:null,action:r,pending:null},u.queue=h,o=Zx.bind(null,Oe,h,p,o),h.dispatch=o,u.memoizedState=r,[s,o,!1]}function Tv(r){var s=Rt();return wv(s,tt,r)}function wv(r,s,o){if(s=im(r,s,bv)[0],r=Yc(si)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var u=ql(s)}catch(T){throw T===kl?Bc:T}else u=s;s=Rt();var h=s.queue,p=h.dispatch;return o!==s.memoizedState&&(Oe.flags|=2048,oo(9,Kc(),Jx.bind(null,h,o),null)),[u,p,r]}function Jx(r,s){r.action=s}function xv(r){var s=Rt(),o=tt;if(o!==null)return wv(s,o,r);Rt(),s=s.memoizedState,o=Rt();var u=o.queue.dispatch;return o.memoizedState=r,[s,u,!1]}function oo(r,s,o,u){return r={tag:r,create:o,deps:u,inst:s,next:null},s=Oe.updateQueue,s===null&&(s=nm(),Oe.updateQueue=s),o=s.lastEffect,o===null?s.lastEffect=r.next=r:(u=o.next,o.next=r,r.next=u,s.lastEffect=r),r}function Kc(){return{destroy:void 0,resource:void 0}}function Av(){return Rt().memoizedState}function Qc(r,s,o,u){var h=_n();u=u===void 0?null:u,Oe.flags|=r,h.memoizedState=oo(1|s,Kc(),o,u)}function Fl(r,s,o,u){var h=Rt();u=u===void 0?null:u;var p=h.memoizedState.inst;tt!==null&&u!==null&&Xf(u,tt.memoizedState.deps)?h.memoizedState=oo(s,p,o,u):(Oe.flags|=r,h.memoizedState=oo(1|s,p,o,u))}function Sv(r,s){Qc(8390656,8,r,s)}function Rv(r,s){Fl(2048,8,r,s)}function Cv(r,s){return Fl(4,2,r,s)}function Nv(r,s){return Fl(4,4,r,s)}function Iv(r,s){if(typeof s=="function"){r=r();var o=s(r);return function(){typeof o=="function"?o():s(null)}}if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function Dv(r,s,o){o=o!=null?o.concat([r]):null,Fl(4,4,Iv.bind(null,s,r),o)}function lm(){}function Ov(r,s){var o=Rt();s=s===void 0?null:s;var u=o.memoizedState;return s!==null&&Xf(s,u[1])?u[0]:(o.memoizedState=[r,s],r)}function Pv(r,s){var o=Rt();s=s===void 0?null:s;var u=o.memoizedState;if(s!==null&&Xf(s,u[1]))return u[0];if(u=r(),oa){Rn(!0);try{r()}finally{Rn(!1)}}return o.memoizedState=[u,s],u}function um(r,s,o){return o===void 0||(zi&1073741824)!==0?r.memoizedState=s:(r.memoizedState=o,r=k0(),Oe.lanes|=r,Yi|=r,o)}function Mv(r,s,o,u){return Nn(o,s)?o:io.current!==null?(r=um(r,o,u),Nn(r,s)||(zt=!0),r):(zi&42)===0?(zt=!0,r.memoizedState=o):(r=k0(),Oe.lanes|=r,Yi|=r,s)}function jv(r,s,o,u,h){var p=he.p;he.p=p!==0&&8>p?p:8;var T=J.T,x={};J.T=x,hm(r,!1,s,o);try{var I=h(),G=J.S;if(G!==null&&G(x,I),I!==null&&typeof I=="object"&&typeof I.then=="function"){var te=Qx(I,u);Hl(r,s,te,Mn(r))}else Hl(r,s,u,Mn(r))}catch(se){Hl(r,s,{then:function(){},status:"rejected",reason:se},Mn())}finally{he.p=p,J.T=T}}function eA(){}function cm(r,s,o,u){if(r.tag!==5)throw Error(i(476));var h=kv(r).queue;jv(r,h,s,ve,o===null?eA:function(){return Vv(r),o(u)})}function kv(r){var s=r.memoizedState;if(s!==null)return s;s={memoizedState:ve,baseState:ve,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:si,lastRenderedState:ve},next:null};var o={};return s.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:si,lastRenderedState:o},next:null},r.memoizedState=s,r=r.alternate,r!==null&&(r.memoizedState=s),s}function Vv(r){var s=kv(r).next.queue;Hl(r,s,{},Mn())}function dm(){return rn(lu)}function Lv(){return Rt().memoizedState}function Uv(){return Rt().memoizedState}function tA(r){for(var s=r.return;s!==null;){switch(s.tag){case 24:case 3:var o=Mn();r=Li(o);var u=Ui(s,r,o);u!==null&&(jn(u,s,o),Ll(u,s,o)),s={cache:Bf()},r.payload=s;return}s=s.return}}function nA(r,s,o){var u=Mn();o={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},Wc(r)?Bv(s,o):(o=Df(r,s,o,u),o!==null&&(jn(o,r,u),qv(o,s,u)))}function zv(r,s,o){var u=Mn();Hl(r,s,o,u)}function Hl(r,s,o,u){var h={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(Wc(r))Bv(s,h);else{var p=r.alternate;if(r.lanes===0&&(p===null||p.lanes===0)&&(p=s.lastRenderedReducer,p!==null))try{var T=s.lastRenderedState,x=p(T,o);if(h.hasEagerState=!0,h.eagerState=x,Nn(x,T))return Pc(r,s,h,0),at===null&&Oc(),!1}catch{}finally{}if(o=Df(r,s,h,u),o!==null)return jn(o,r,u),qv(o,s,u),!0}return!1}function hm(r,s,o,u){if(u={lane:2,revertLane:Hm(),action:u,hasEagerState:!1,eagerState:null,next:null},Wc(r)){if(s)throw Error(i(479))}else s=Df(r,o,u,2),s!==null&&jn(s,r,2)}function Wc(r){var s=r.alternate;return r===Oe||s!==null&&s===Oe}function Bv(r,s){so=Hc=!0;var o=r.pending;o===null?s.next=s:(s.next=o.next,o.next=s),r.pending=s}function qv(r,s,o){if((o&4194048)!==0){var u=s.lanes;u&=r.pendingLanes,o|=u,s.lanes=o,hl(r,o)}}var Xc={readContext:rn,use:$c,useCallback:Et,useContext:Et,useEffect:Et,useImperativeHandle:Et,useLayoutEffect:Et,useInsertionEffect:Et,useMemo:Et,useReducer:Et,useRef:Et,useState:Et,useDebugValue:Et,useDeferredValue:Et,useTransition:Et,useSyncExternalStore:Et,useId:Et,useHostTransitionStatus:Et,useFormState:Et,useActionState:Et,useOptimistic:Et,useMemoCache:Et,useCacheRefresh:Et},Fv={readContext:rn,use:$c,useCallback:function(r,s){return _n().memoizedState=[r,s===void 0?null:s],r},useContext:rn,useEffect:Sv,useImperativeHandle:function(r,s,o){o=o!=null?o.concat([r]):null,Qc(4194308,4,Iv.bind(null,s,r),o)},useLayoutEffect:function(r,s){return Qc(4194308,4,r,s)},useInsertionEffect:function(r,s){Qc(4,2,r,s)},useMemo:function(r,s){var o=_n();s=s===void 0?null:s;var u=r();if(oa){Rn(!0);try{r()}finally{Rn(!1)}}return o.memoizedState=[u,s],u},useReducer:function(r,s,o){var u=_n();if(o!==void 0){var h=o(s);if(oa){Rn(!0);try{o(s)}finally{Rn(!1)}}}else h=s;return u.memoizedState=u.baseState=h,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:h},u.queue=r,r=r.dispatch=nA.bind(null,Oe,r),[u.memoizedState,r]},useRef:function(r){var s=_n();return r={current:r},s.memoizedState=r},useState:function(r){r=am(r);var s=r.queue,o=zv.bind(null,Oe,s);return s.dispatch=o,[r.memoizedState,o]},useDebugValue:lm,useDeferredValue:function(r,s){var o=_n();return um(o,r,s)},useTransition:function(){var r=am(!1);return r=jv.bind(null,Oe,r.queue,!0,!1),_n().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,s,o){var u=Oe,h=_n();if(Ye){if(o===void 0)throw Error(i(407));o=o()}else{if(o=s(),at===null)throw Error(i(349));(qe&124)!==0||cv(u,s,o)}h.memoizedState=o;var p={value:o,getSnapshot:s};return h.queue=p,Sv(hv.bind(null,u,p,r),[r]),u.flags|=2048,oo(9,Kc(),dv.bind(null,u,p,o,s),null),o},useId:function(){var r=_n(),s=at.identifierPrefix;if(Ye){var o=ni,u=ti;o=(u&~(1<<32-nn(u)-1)).toString(32)+o,s="«"+s+"R"+o,o=Gc++,0<o&&(s+="H"+o.toString(32)),s+="»"}else o=Wx++,s="«"+s+"r"+o.toString(32)+"»";return r.memoizedState=s},useHostTransitionStatus:dm,useFormState:Ev,useActionState:Ev,useOptimistic:function(r){var s=_n();s.memoizedState=s.baseState=r;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=o,s=hm.bind(null,Oe,!0,o),o.dispatch=s,[r,s]},useMemoCache:rm,useCacheRefresh:function(){return _n().memoizedState=tA.bind(null,Oe)}},Hv={readContext:rn,use:$c,useCallback:Ov,useContext:rn,useEffect:Rv,useImperativeHandle:Dv,useInsertionEffect:Cv,useLayoutEffect:Nv,useMemo:Pv,useReducer:Yc,useRef:Av,useState:function(){return Yc(si)},useDebugValue:lm,useDeferredValue:function(r,s){var o=Rt();return Mv(o,tt.memoizedState,r,s)},useTransition:function(){var r=Yc(si)[0],s=Rt().memoizedState;return[typeof r=="boolean"?r:ql(r),s]},useSyncExternalStore:uv,useId:Lv,useHostTransitionStatus:dm,useFormState:Tv,useActionState:Tv,useOptimistic:function(r,s){var o=Rt();return pv(o,tt,r,s)},useMemoCache:rm,useCacheRefresh:Uv},rA={readContext:rn,use:$c,useCallback:Ov,useContext:rn,useEffect:Rv,useImperativeHandle:Dv,useInsertionEffect:Cv,useLayoutEffect:Nv,useMemo:Pv,useReducer:sm,useRef:Av,useState:function(){return sm(si)},useDebugValue:lm,useDeferredValue:function(r,s){var o=Rt();return tt===null?um(o,r,s):Mv(o,tt.memoizedState,r,s)},useTransition:function(){var r=sm(si)[0],s=Rt().memoizedState;return[typeof r=="boolean"?r:ql(r),s]},useSyncExternalStore:uv,useId:Lv,useHostTransitionStatus:dm,useFormState:xv,useActionState:xv,useOptimistic:function(r,s){var o=Rt();return tt!==null?pv(o,tt,r,s):(o.baseState=r,[r,o.queue.dispatch])},useMemoCache:rm,useCacheRefresh:Uv},lo=null,Gl=0;function Zc(r){var s=Gl;return Gl+=1,lo===null&&(lo=[]),tv(lo,r,s)}function $l(r,s){s=s.props.ref,r.ref=s!==void 0?s:null}function Jc(r,s){throw s.$$typeof===E?Error(i(525)):(r=Object.prototype.toString.call(s),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r)))}function Gv(r){var s=r._init;return s(r._payload)}function $v(r){function s(q,k){if(r){var H=q.deletions;H===null?(q.deletions=[k],q.flags|=16):H.push(k)}}function o(q,k){if(!r)return null;for(;k!==null;)s(q,k),k=k.sibling;return null}function u(q){for(var k=new Map;q!==null;)q.key!==null?k.set(q.key,q):k.set(q.index,q),q=q.sibling;return k}function h(q,k){return q=ei(q,k),q.index=0,q.sibling=null,q}function p(q,k,H){return q.index=H,r?(H=q.alternate,H!==null?(H=H.index,H<k?(q.flags|=67108866,k):H):(q.flags|=67108866,k)):(q.flags|=1048576,k)}function T(q){return r&&q.alternate===null&&(q.flags|=67108866),q}function x(q,k,H,re){return k===null||k.tag!==6?(k=Pf(H,q.mode,re),k.return=q,k):(k=h(k,H),k.return=q,k)}function I(q,k,H,re){var ge=H.type;return ge===S?te(q,k,H.props.children,re,H.key):k!==null&&(k.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===C&&Gv(ge)===k.type)?(k=h(k,H.props),$l(k,H),k.return=q,k):(k=jc(H.type,H.key,H.props,null,q.mode,re),$l(k,H),k.return=q,k)}function G(q,k,H,re){return k===null||k.tag!==4||k.stateNode.containerInfo!==H.containerInfo||k.stateNode.implementation!==H.implementation?(k=Mf(H,q.mode,re),k.return=q,k):(k=h(k,H.children||[]),k.return=q,k)}function te(q,k,H,re,ge){return k===null||k.tag!==7?(k=Js(H,q.mode,re,ge),k.return=q,k):(k=h(k,H),k.return=q,k)}function se(q,k,H){if(typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint")return k=Pf(""+k,q.mode,H),k.return=q,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case w:return H=jc(k.type,k.key,k.props,null,q.mode,H),$l(H,k),H.return=q,H;case R:return k=Mf(k,q.mode,H),k.return=q,k;case C:var re=k._init;return k=re(k._payload),se(q,k,H)}if(st(k)||B(k))return k=Js(k,q.mode,H,null),k.return=q,k;if(typeof k.then=="function")return se(q,Zc(k),H);if(k.$$typeof===z)return se(q,Uc(q,k),H);Jc(q,k)}return null}function $(q,k,H,re){var ge=k!==null?k.key:null;if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return ge!==null?null:x(q,k,""+H,re);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case w:return H.key===ge?I(q,k,H,re):null;case R:return H.key===ge?G(q,k,H,re):null;case C:return ge=H._init,H=ge(H._payload),$(q,k,H,re)}if(st(H)||B(H))return ge!==null?null:te(q,k,H,re,null);if(typeof H.then=="function")return $(q,k,Zc(H),re);if(H.$$typeof===z)return $(q,k,Uc(q,H),re);Jc(q,H)}return null}function K(q,k,H,re,ge){if(typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint")return q=q.get(H)||null,x(k,q,""+re,ge);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case w:return q=q.get(re.key===null?H:re.key)||null,I(k,q,re,ge);case R:return q=q.get(re.key===null?H:re.key)||null,G(k,q,re,ge);case C:var Me=re._init;return re=Me(re._payload),K(q,k,H,re,ge)}if(st(re)||B(re))return q=q.get(H)||null,te(k,q,re,ge,null);if(typeof re.then=="function")return K(q,k,H,Zc(re),ge);if(re.$$typeof===z)return K(q,k,H,Uc(k,re),ge);Jc(k,re)}return null}function Se(q,k,H,re){for(var ge=null,Me=null,be=k,we=k=0,qt=null;be!==null&&we<H.length;we++){be.index>we?(qt=be,be=null):qt=be.sibling;var $e=$(q,be,H[we],re);if($e===null){be===null&&(be=qt);break}r&&be&&$e.alternate===null&&s(q,be),k=p($e,k,we),Me===null?ge=$e:Me.sibling=$e,Me=$e,be=qt}if(we===H.length)return o(q,be),Ye&&ta(q,we),ge;if(be===null){for(;we<H.length;we++)be=se(q,H[we],re),be!==null&&(k=p(be,k,we),Me===null?ge=be:Me.sibling=be,Me=be);return Ye&&ta(q,we),ge}for(be=u(be);we<H.length;we++)qt=K(be,q,we,H[we],re),qt!==null&&(r&&qt.alternate!==null&&be.delete(qt.key===null?we:qt.key),k=p(qt,k,we),Me===null?ge=qt:Me.sibling=qt,Me=qt);return r&&be.forEach(function(ns){return s(q,ns)}),Ye&&ta(q,we),ge}function Te(q,k,H,re){if(H==null)throw Error(i(151));for(var ge=null,Me=null,be=k,we=k=0,qt=null,$e=H.next();be!==null&&!$e.done;we++,$e=H.next()){be.index>we?(qt=be,be=null):qt=be.sibling;var ns=$(q,be,$e.value,re);if(ns===null){be===null&&(be=qt);break}r&&be&&ns.alternate===null&&s(q,be),k=p(ns,k,we),Me===null?ge=ns:Me.sibling=ns,Me=ns,be=qt}if($e.done)return o(q,be),Ye&&ta(q,we),ge;if(be===null){for(;!$e.done;we++,$e=H.next())$e=se(q,$e.value,re),$e!==null&&(k=p($e,k,we),Me===null?ge=$e:Me.sibling=$e,Me=$e);return Ye&&ta(q,we),ge}for(be=u(be);!$e.done;we++,$e=H.next())$e=K(be,q,we,$e.value,re),$e!==null&&(r&&$e.alternate!==null&&be.delete($e.key===null?we:$e.key),k=p($e,k,we),Me===null?ge=$e:Me.sibling=$e,Me=$e);return r&&be.forEach(function(iS){return s(q,iS)}),Ye&&ta(q,we),ge}function rt(q,k,H,re){if(typeof H=="object"&&H!==null&&H.type===S&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case w:e:{for(var ge=H.key;k!==null;){if(k.key===ge){if(ge=H.type,ge===S){if(k.tag===7){o(q,k.sibling),re=h(k,H.props.children),re.return=q,q=re;break e}}else if(k.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===C&&Gv(ge)===k.type){o(q,k.sibling),re=h(k,H.props),$l(re,H),re.return=q,q=re;break e}o(q,k);break}else s(q,k);k=k.sibling}H.type===S?(re=Js(H.props.children,q.mode,re,H.key),re.return=q,q=re):(re=jc(H.type,H.key,H.props,null,q.mode,re),$l(re,H),re.return=q,q=re)}return T(q);case R:e:{for(ge=H.key;k!==null;){if(k.key===ge)if(k.tag===4&&k.stateNode.containerInfo===H.containerInfo&&k.stateNode.implementation===H.implementation){o(q,k.sibling),re=h(k,H.children||[]),re.return=q,q=re;break e}else{o(q,k);break}else s(q,k);k=k.sibling}re=Mf(H,q.mode,re),re.return=q,q=re}return T(q);case C:return ge=H._init,H=ge(H._payload),rt(q,k,H,re)}if(st(H))return Se(q,k,H,re);if(B(H)){if(ge=B(H),typeof ge!="function")throw Error(i(150));return H=ge.call(H),Te(q,k,H,re)}if(typeof H.then=="function")return rt(q,k,Zc(H),re);if(H.$$typeof===z)return rt(q,k,Uc(q,H),re);Jc(q,H)}return typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint"?(H=""+H,k!==null&&k.tag===6?(o(q,k.sibling),re=h(k,H),re.return=q,q=re):(o(q,k),re=Pf(H,q.mode,re),re.return=q,q=re),T(q)):o(q,k)}return function(q,k,H,re){try{Gl=0;var ge=rt(q,k,H,re);return lo=null,ge}catch(be){if(be===kl||be===Bc)throw be;var Me=In(29,be,null,q.mode);return Me.lanes=re,Me.return=q,Me}finally{}}}var uo=$v(!0),Yv=$v(!1),Yn=oe(null),Sr=null;function Bi(r){var s=r.alternate;ce(Mt,Mt.current&1),ce(Yn,r),Sr===null&&(s===null||io.current!==null||s.memoizedState!==null)&&(Sr=r)}function Kv(r){if(r.tag===22){if(ce(Mt,Mt.current),ce(Yn,r),Sr===null){var s=r.alternate;s!==null&&s.memoizedState!==null&&(Sr=r)}}else qi()}function qi(){ce(Mt,Mt.current),ce(Yn,Yn.current)}function ai(r){fe(Yn),Sr===r&&(Sr=null),fe(Mt)}var Mt=oe(0);function ed(r){for(var s=r;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||np(o)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function fm(r,s,o,u){s=r.memoizedState,o=o(u,s),o=o==null?s:v({},s,o),r.memoizedState=o,r.lanes===0&&(r.updateQueue.baseState=o)}var mm={enqueueSetState:function(r,s,o){r=r._reactInternals;var u=Mn(),h=Li(u);h.payload=s,o!=null&&(h.callback=o),s=Ui(r,h,u),s!==null&&(jn(s,r,u),Ll(s,r,u))},enqueueReplaceState:function(r,s,o){r=r._reactInternals;var u=Mn(),h=Li(u);h.tag=1,h.payload=s,o!=null&&(h.callback=o),s=Ui(r,h,u),s!==null&&(jn(s,r,u),Ll(s,r,u))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var o=Mn(),u=Li(o);u.tag=2,s!=null&&(u.callback=s),s=Ui(r,u,o),s!==null&&(jn(s,r,o),Ll(s,r,o))}};function Qv(r,s,o,u,h,p,T){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(u,p,T):s.prototype&&s.prototype.isPureReactComponent?!Cl(o,u)||!Cl(h,p):!0}function Wv(r,s,o,u){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,u),s.state!==r&&mm.enqueueReplaceState(s,s.state,null)}function la(r,s){var o=s;if("ref"in s){o={};for(var u in s)u!=="ref"&&(o[u]=s[u])}if(r=r.defaultProps){o===s&&(o=v({},o));for(var h in r)o[h]===void 0&&(o[h]=r[h])}return o}var td=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)};function Xv(r){td(r)}function Zv(r){console.error(r)}function Jv(r){td(r)}function nd(r,s){try{var o=r.onUncaughtError;o(s.value,{componentStack:s.stack})}catch(u){setTimeout(function(){throw u})}}function e0(r,s,o){try{var u=r.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function pm(r,s,o){return o=Li(o),o.tag=3,o.payload={element:null},o.callback=function(){nd(r,s)},o}function t0(r){return r=Li(r),r.tag=3,r}function n0(r,s,o,u){var h=o.type.getDerivedStateFromError;if(typeof h=="function"){var p=u.value;r.payload=function(){return h(p)},r.callback=function(){e0(s,o,u)}}var T=o.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(r.callback=function(){e0(s,o,u),typeof h!="function"&&(Ki===null?Ki=new Set([this]):Ki.add(this));var x=u.stack;this.componentDidCatch(u.value,{componentStack:x!==null?x:""})})}function iA(r,s,o,u,h){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(s=o.alternate,s!==null&&Pl(s,o,h,!0),o=Yn.current,o!==null){switch(o.tag){case 13:return Sr===null?Um():o.alternate===null&&yt===0&&(yt=3),o.flags&=-257,o.flags|=65536,o.lanes=h,u===Hf?o.flags|=16384:(s=o.updateQueue,s===null?o.updateQueue=new Set([u]):s.add(u),Bm(r,u,h)),!1;case 22:return o.flags|=65536,u===Hf?o.flags|=16384:(s=o.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=s):(o=s.retryQueue,o===null?s.retryQueue=new Set([u]):o.add(u)),Bm(r,u,h)),!1}throw Error(i(435,o.tag))}return Bm(r,u,h),Um(),!1}if(Ye)return s=Yn.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=h,u!==Vf&&(r=Error(i(422),{cause:u}),Ol(Fn(r,o)))):(u!==Vf&&(s=Error(i(423),{cause:u}),Ol(Fn(s,o))),r=r.current.alternate,r.flags|=65536,h&=-h,r.lanes|=h,u=Fn(u,o),h=pm(r.stateNode,u,h),Yf(r,h),yt!==4&&(yt=2)),!1;var p=Error(i(520),{cause:u});if(p=Fn(p,o),Jl===null?Jl=[p]:Jl.push(p),yt!==4&&(yt=2),s===null)return!0;u=Fn(u,o),o=s;do{switch(o.tag){case 3:return o.flags|=65536,r=h&-h,o.lanes|=r,r=pm(o.stateNode,u,r),Yf(o,r),!1;case 1:if(s=o.type,p=o.stateNode,(o.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(Ki===null||!Ki.has(p))))return o.flags|=65536,h&=-h,o.lanes|=h,h=t0(h),n0(h,r,o,u),Yf(o,h),!1}o=o.return}while(o!==null);return!1}var r0=Error(i(461)),zt=!1;function Qt(r,s,o,u){s.child=r===null?Yv(s,null,o,u):uo(s,r.child,o,u)}function i0(r,s,o,u,h){o=o.render;var p=s.ref;if("ref"in u){var T={};for(var x in u)x!=="ref"&&(T[x]=u[x])}else T=u;return sa(s),u=Zf(r,s,o,T,p,h),x=Jf(),r!==null&&!zt?(em(r,s,h),oi(r,s,h)):(Ye&&x&&jf(s),s.flags|=1,Qt(r,s,u,h),s.child)}function s0(r,s,o,u,h){if(r===null){var p=o.type;return typeof p=="function"&&!Of(p)&&p.defaultProps===void 0&&o.compare===null?(s.tag=15,s.type=p,a0(r,s,p,u,h)):(r=jc(o.type,null,u,s,s.mode,h),r.ref=s.ref,r.return=s,s.child=r)}if(p=r.child,!wm(r,h)){var T=p.memoizedProps;if(o=o.compare,o=o!==null?o:Cl,o(T,u)&&r.ref===s.ref)return oi(r,s,h)}return s.flags|=1,r=ei(p,u),r.ref=s.ref,r.return=s,s.child=r}function a0(r,s,o,u,h){if(r!==null){var p=r.memoizedProps;if(Cl(p,u)&&r.ref===s.ref)if(zt=!1,s.pendingProps=u=p,wm(r,h))(r.flags&131072)!==0&&(zt=!0);else return s.lanes=r.lanes,oi(r,s,h)}return gm(r,s,o,u,h)}function o0(r,s,o){var u=s.pendingProps,h=u.children,p=r!==null?r.memoizedState:null;if(u.mode==="hidden"){if((s.flags&128)!==0){if(u=p!==null?p.baseLanes|o:o,r!==null){for(h=s.child=r.child,p=0;h!==null;)p=p|h.lanes|h.childLanes,h=h.sibling;s.childLanes=p&~u}else s.childLanes=0,s.child=null;return l0(r,s,u,o)}if((o&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},r!==null&&zc(s,p!==null?p.cachePool:null),p!==null?av(s,p):Qf(),Kv(s);else return s.lanes=s.childLanes=536870912,l0(r,s,p!==null?p.baseLanes|o:o,o)}else p!==null?(zc(s,p.cachePool),av(s,p),qi(),s.memoizedState=null):(r!==null&&zc(s,null),Qf(),qi());return Qt(r,s,h,o),s.child}function l0(r,s,o,u){var h=Ff();return h=h===null?null:{parent:Pt._currentValue,pool:h},s.memoizedState={baseLanes:o,cachePool:h},r!==null&&zc(s,null),Qf(),Kv(s),r!==null&&Pl(r,s,u,!0),null}function rd(r,s){var o=s.ref;if(o===null)r!==null&&r.ref!==null&&(s.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(i(284));(r===null||r.ref!==o)&&(s.flags|=4194816)}}function gm(r,s,o,u,h){return sa(s),o=Zf(r,s,o,u,void 0,h),u=Jf(),r!==null&&!zt?(em(r,s,h),oi(r,s,h)):(Ye&&u&&jf(s),s.flags|=1,Qt(r,s,o,h),s.child)}function u0(r,s,o,u,h,p){return sa(s),s.updateQueue=null,o=lv(s,u,o,h),ov(r),u=Jf(),r!==null&&!zt?(em(r,s,p),oi(r,s,p)):(Ye&&u&&jf(s),s.flags|=1,Qt(r,s,o,p),s.child)}function c0(r,s,o,u,h){if(sa(s),s.stateNode===null){var p=Ja,T=o.contextType;typeof T=="object"&&T!==null&&(p=rn(T)),p=new o(u,p),s.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=mm,s.stateNode=p,p._reactInternals=s,p=s.stateNode,p.props=u,p.state=s.memoizedState,p.refs={},Gf(s),T=o.contextType,p.context=typeof T=="object"&&T!==null?rn(T):Ja,p.state=s.memoizedState,T=o.getDerivedStateFromProps,typeof T=="function"&&(fm(s,o,T,u),p.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(T=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),T!==p.state&&mm.enqueueReplaceState(p,p.state,null),zl(s,u,p,h),Ul(),p.state=s.memoizedState),typeof p.componentDidMount=="function"&&(s.flags|=4194308),u=!0}else if(r===null){p=s.stateNode;var x=s.memoizedProps,I=la(o,x);p.props=I;var G=p.context,te=o.contextType;T=Ja,typeof te=="object"&&te!==null&&(T=rn(te));var se=o.getDerivedStateFromProps;te=typeof se=="function"||typeof p.getSnapshotBeforeUpdate=="function",x=s.pendingProps!==x,te||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(x||G!==T)&&Wv(s,p,u,T),Vi=!1;var $=s.memoizedState;p.state=$,zl(s,u,p,h),Ul(),G=s.memoizedState,x||$!==G||Vi?(typeof se=="function"&&(fm(s,o,se,u),G=s.memoizedState),(I=Vi||Qv(s,o,I,u,$,G,T))?(te||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(s.flags|=4194308)):(typeof p.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=G),p.props=u,p.state=G,p.context=T,u=I):(typeof p.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{p=s.stateNode,$f(r,s),T=s.memoizedProps,te=la(o,T),p.props=te,se=s.pendingProps,$=p.context,G=o.contextType,I=Ja,typeof G=="object"&&G!==null&&(I=rn(G)),x=o.getDerivedStateFromProps,(G=typeof x=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(T!==se||$!==I)&&Wv(s,p,u,I),Vi=!1,$=s.memoizedState,p.state=$,zl(s,u,p,h),Ul();var K=s.memoizedState;T!==se||$!==K||Vi||r!==null&&r.dependencies!==null&&Lc(r.dependencies)?(typeof x=="function"&&(fm(s,o,x,u),K=s.memoizedState),(te=Vi||Qv(s,o,te,u,$,K,I)||r!==null&&r.dependencies!==null&&Lc(r.dependencies))?(G||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(u,K,I),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(u,K,I)),typeof p.componentDidUpdate=="function"&&(s.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof p.componentDidUpdate!="function"||T===r.memoizedProps&&$===r.memoizedState||(s.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||T===r.memoizedProps&&$===r.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=K),p.props=u,p.state=K,p.context=I,u=te):(typeof p.componentDidUpdate!="function"||T===r.memoizedProps&&$===r.memoizedState||(s.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||T===r.memoizedProps&&$===r.memoizedState||(s.flags|=1024),u=!1)}return p=u,rd(r,s),u=(s.flags&128)!==0,p||u?(p=s.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:p.render(),s.flags|=1,r!==null&&u?(s.child=uo(s,r.child,null,h),s.child=uo(s,null,o,h)):Qt(r,s,o,h),s.memoizedState=p.state,r=s.child):r=oi(r,s,h),r}function d0(r,s,o,u){return Dl(),s.flags|=256,Qt(r,s,o,u),s.child}var ym={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function vm(r){return{baseLanes:r,cachePool:Zy()}}function _m(r,s,o){return r=r!==null?r.childLanes&~o:0,s&&(r|=Kn),r}function h0(r,s,o){var u=s.pendingProps,h=!1,p=(s.flags&128)!==0,T;if((T=p)||(T=r!==null&&r.memoizedState===null?!1:(Mt.current&2)!==0),T&&(h=!0,s.flags&=-129),T=(s.flags&32)!==0,s.flags&=-33,r===null){if(Ye){if(h?Bi(s):qi(),Ye){var x=gt,I;if(I=x){e:{for(I=x,x=Ar;I.nodeType!==8;){if(!x){x=null;break e}if(I=sr(I.nextSibling),I===null){x=null;break e}}x=I}x!==null?(s.memoizedState={dehydrated:x,treeContext:ea!==null?{id:ti,overflow:ni}:null,retryLane:536870912,hydrationErrors:null},I=In(18,null,null,0),I.stateNode=x,I.return=s,s.child=I,mn=s,gt=null,I=!0):I=!1}I||ra(s)}if(x=s.memoizedState,x!==null&&(x=x.dehydrated,x!==null))return np(x)?s.lanes=32:s.lanes=536870912,null;ai(s)}return x=u.children,u=u.fallback,h?(qi(),h=s.mode,x=id({mode:"hidden",children:x},h),u=Js(u,h,o,null),x.return=s,u.return=s,x.sibling=u,s.child=x,h=s.child,h.memoizedState=vm(o),h.childLanes=_m(r,T,o),s.memoizedState=ym,u):(Bi(s),bm(s,x))}if(I=r.memoizedState,I!==null&&(x=I.dehydrated,x!==null)){if(p)s.flags&256?(Bi(s),s.flags&=-257,s=Em(r,s,o)):s.memoizedState!==null?(qi(),s.child=r.child,s.flags|=128,s=null):(qi(),h=u.fallback,x=s.mode,u=id({mode:"visible",children:u.children},x),h=Js(h,x,o,null),h.flags|=2,u.return=s,h.return=s,u.sibling=h,s.child=u,uo(s,r.child,null,o),u=s.child,u.memoizedState=vm(o),u.childLanes=_m(r,T,o),s.memoizedState=ym,s=h);else if(Bi(s),np(x)){if(T=x.nextSibling&&x.nextSibling.dataset,T)var G=T.dgst;T=G,u=Error(i(419)),u.stack="",u.digest=T,Ol({value:u,source:null,stack:null}),s=Em(r,s,o)}else if(zt||Pl(r,s,o,!1),T=(o&r.childLanes)!==0,zt||T){if(T=at,T!==null&&(u=o&-o,u=(u&42)!==0?1:Ni(u),u=(u&(T.suspendedLanes|o))!==0?0:u,u!==0&&u!==I.retryLane))throw I.retryLane=u,Za(r,u),jn(T,r,u),r0;x.data==="$?"||Um(),s=Em(r,s,o)}else x.data==="$?"?(s.flags|=192,s.child=r.child,s=null):(r=I.treeContext,gt=sr(x.nextSibling),mn=s,Ye=!0,na=null,Ar=!1,r!==null&&(Gn[$n++]=ti,Gn[$n++]=ni,Gn[$n++]=ea,ti=r.id,ni=r.overflow,ea=s),s=bm(s,u.children),s.flags|=4096);return s}return h?(qi(),h=u.fallback,x=s.mode,I=r.child,G=I.sibling,u=ei(I,{mode:"hidden",children:u.children}),u.subtreeFlags=I.subtreeFlags&65011712,G!==null?h=ei(G,h):(h=Js(h,x,o,null),h.flags|=2),h.return=s,u.return=s,u.sibling=h,s.child=u,u=h,h=s.child,x=r.child.memoizedState,x===null?x=vm(o):(I=x.cachePool,I!==null?(G=Pt._currentValue,I=I.parent!==G?{parent:G,pool:G}:I):I=Zy(),x={baseLanes:x.baseLanes|o,cachePool:I}),h.memoizedState=x,h.childLanes=_m(r,T,o),s.memoizedState=ym,u):(Bi(s),o=r.child,r=o.sibling,o=ei(o,{mode:"visible",children:u.children}),o.return=s,o.sibling=null,r!==null&&(T=s.deletions,T===null?(s.deletions=[r],s.flags|=16):T.push(r)),s.child=o,s.memoizedState=null,o)}function bm(r,s){return s=id({mode:"visible",children:s},r.mode),s.return=r,r.child=s}function id(r,s){return r=In(22,r,null,s),r.lanes=0,r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},r}function Em(r,s,o){return uo(s,r.child,null,o),r=bm(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function f0(r,s,o){r.lanes|=s;var u=r.alternate;u!==null&&(u.lanes|=s),Uf(r.return,s,o)}function Tm(r,s,o,u,h){var p=r.memoizedState;p===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:h}:(p.isBackwards=s,p.rendering=null,p.renderingStartTime=0,p.last=u,p.tail=o,p.tailMode=h)}function m0(r,s,o){var u=s.pendingProps,h=u.revealOrder,p=u.tail;if(Qt(r,s,u.children,o),u=Mt.current,(u&2)!==0)u=u&1|2,s.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&f0(r,o,s);else if(r.tag===19)f0(r,o,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}u&=1}switch(ce(Mt,u),h){case"forwards":for(o=s.child,h=null;o!==null;)r=o.alternate,r!==null&&ed(r)===null&&(h=o),o=o.sibling;o=h,o===null?(h=s.child,s.child=null):(h=o.sibling,o.sibling=null),Tm(s,!1,h,o,p);break;case"backwards":for(o=null,h=s.child,s.child=null;h!==null;){if(r=h.alternate,r!==null&&ed(r)===null){s.child=h;break}r=h.sibling,h.sibling=o,o=h,h=r}Tm(s,!0,o,null,p);break;case"together":Tm(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function oi(r,s,o){if(r!==null&&(s.dependencies=r.dependencies),Yi|=s.lanes,(o&s.childLanes)===0)if(r!==null){if(Pl(r,s,o,!1),(o&s.childLanes)===0)return null}else return null;if(r!==null&&s.child!==r.child)throw Error(i(153));if(s.child!==null){for(r=s.child,o=ei(r,r.pendingProps),s.child=o,o.return=s;r.sibling!==null;)r=r.sibling,o=o.sibling=ei(r,r.pendingProps),o.return=s;o.sibling=null}return s.child}function wm(r,s){return(r.lanes&s)!==0?!0:(r=r.dependencies,!!(r!==null&&Lc(r)))}function sA(r,s,o){switch(s.tag){case 3:Ge(s,s.stateNode.containerInfo),ki(s,Pt,r.memoizedState.cache),Dl();break;case 27:case 5:Ci(s);break;case 4:Ge(s,s.stateNode.containerInfo);break;case 10:ki(s,s.type,s.memoizedProps.value);break;case 13:var u=s.memoizedState;if(u!==null)return u.dehydrated!==null?(Bi(s),s.flags|=128,null):(o&s.child.childLanes)!==0?h0(r,s,o):(Bi(s),r=oi(r,s,o),r!==null?r.sibling:null);Bi(s);break;case 19:var h=(r.flags&128)!==0;if(u=(o&s.childLanes)!==0,u||(Pl(r,s,o,!1),u=(o&s.childLanes)!==0),h){if(u)return m0(r,s,o);s.flags|=128}if(h=s.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),ce(Mt,Mt.current),u)break;return null;case 22:case 23:return s.lanes=0,o0(r,s,o);case 24:ki(s,Pt,r.memoizedState.cache)}return oi(r,s,o)}function p0(r,s,o){if(r!==null)if(r.memoizedProps!==s.pendingProps)zt=!0;else{if(!wm(r,o)&&(s.flags&128)===0)return zt=!1,sA(r,s,o);zt=(r.flags&131072)!==0}else zt=!1,Ye&&(s.flags&1048576)!==0&&Gy(s,Vc,s.index);switch(s.lanes=0,s.tag){case 16:e:{r=s.pendingProps;var u=s.elementType,h=u._init;if(u=h(u._payload),s.type=u,typeof u=="function")Of(u)?(r=la(u,r),s.tag=1,s=c0(null,s,u,r,o)):(s.tag=0,s=gm(null,s,u,r,o));else{if(u!=null){if(h=u.$$typeof,h===ue){s.tag=11,s=i0(null,s,u,r,o);break e}else if(h===M){s.tag=14,s=s0(null,s,u,r,o);break e}}throw s=_t(u)||u,Error(i(306,s,""))}}return s;case 0:return gm(r,s,s.type,s.pendingProps,o);case 1:return u=s.type,h=la(u,s.pendingProps),c0(r,s,u,h,o);case 3:e:{if(Ge(s,s.stateNode.containerInfo),r===null)throw Error(i(387));u=s.pendingProps;var p=s.memoizedState;h=p.element,$f(r,s),zl(s,u,null,o);var T=s.memoizedState;if(u=T.cache,ki(s,Pt,u),u!==p.cache&&zf(s,[Pt],o,!0),Ul(),u=T.element,p.isDehydrated)if(p={element:u,isDehydrated:!1,cache:T.cache},s.updateQueue.baseState=p,s.memoizedState=p,s.flags&256){s=d0(r,s,u,o);break e}else if(u!==h){h=Fn(Error(i(424)),s),Ol(h),s=d0(r,s,u,o);break e}else{switch(r=s.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(gt=sr(r.firstChild),mn=s,Ye=!0,na=null,Ar=!0,o=Yv(s,null,u,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(Dl(),u===h){s=oi(r,s,o);break e}Qt(r,s,u,o)}s=s.child}return s;case 26:return rd(r,s),r===null?(o=__(s.type,null,s.pendingProps,null))?s.memoizedState=o:Ye||(o=s.type,r=s.pendingProps,u=vd(W.current).createElement(o),u[It]=s,u[xt]=r,Xt(u,o,r),bt(u),s.stateNode=u):s.memoizedState=__(s.type,r.memoizedProps,s.pendingProps,r.memoizedState),null;case 27:return Ci(s),r===null&&Ye&&(u=s.stateNode=g_(s.type,s.pendingProps,W.current),mn=s,Ar=!0,h=gt,Xi(s.type)?(rp=h,gt=sr(u.firstChild)):gt=h),Qt(r,s,s.pendingProps.children,o),rd(r,s),r===null&&(s.flags|=4194304),s.child;case 5:return r===null&&Ye&&((h=u=gt)&&(u=PA(u,s.type,s.pendingProps,Ar),u!==null?(s.stateNode=u,mn=s,gt=sr(u.firstChild),Ar=!1,h=!0):h=!1),h||ra(s)),Ci(s),h=s.type,p=s.pendingProps,T=r!==null?r.memoizedProps:null,u=p.children,Jm(h,p)?u=null:T!==null&&Jm(h,T)&&(s.flags|=32),s.memoizedState!==null&&(h=Zf(r,s,Xx,null,null,o),lu._currentValue=h),rd(r,s),Qt(r,s,u,o),s.child;case 6:return r===null&&Ye&&((r=o=gt)&&(o=MA(o,s.pendingProps,Ar),o!==null?(s.stateNode=o,mn=s,gt=null,r=!0):r=!1),r||ra(s)),null;case 13:return h0(r,s,o);case 4:return Ge(s,s.stateNode.containerInfo),u=s.pendingProps,r===null?s.child=uo(s,null,u,o):Qt(r,s,u,o),s.child;case 11:return i0(r,s,s.type,s.pendingProps,o);case 7:return Qt(r,s,s.pendingProps,o),s.child;case 8:return Qt(r,s,s.pendingProps.children,o),s.child;case 12:return Qt(r,s,s.pendingProps.children,o),s.child;case 10:return u=s.pendingProps,ki(s,s.type,u.value),Qt(r,s,u.children,o),s.child;case 9:return h=s.type._context,u=s.pendingProps.children,sa(s),h=rn(h),u=u(h),s.flags|=1,Qt(r,s,u,o),s.child;case 14:return s0(r,s,s.type,s.pendingProps,o);case 15:return a0(r,s,s.type,s.pendingProps,o);case 19:return m0(r,s,o);case 31:return u=s.pendingProps,o=s.mode,u={mode:u.mode,children:u.children},r===null?(o=id(u,o),o.ref=s.ref,s.child=o,o.return=s,s=o):(o=ei(r.child,u),o.ref=s.ref,s.child=o,o.return=s,s=o),s;case 22:return o0(r,s,o);case 24:return sa(s),u=rn(Pt),r===null?(h=Ff(),h===null&&(h=at,p=Bf(),h.pooledCache=p,p.refCount++,p!==null&&(h.pooledCacheLanes|=o),h=p),s.memoizedState={parent:u,cache:h},Gf(s),ki(s,Pt,h)):((r.lanes&o)!==0&&($f(r,s),zl(s,null,null,o),Ul()),h=r.memoizedState,p=s.memoizedState,h.parent!==u?(h={parent:u,cache:u},s.memoizedState=h,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=h),ki(s,Pt,u)):(u=p.cache,ki(s,Pt,u),u!==h.cache&&zf(s,[Pt],o,!0))),Qt(r,s,s.pendingProps.children,o),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function li(r){r.flags|=4}function g0(r,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!x_(s)){if(s=Yn.current,s!==null&&((qe&4194048)===qe?Sr!==null:(qe&62914560)!==qe&&(qe&536870912)===0||s!==Sr))throw Vl=Hf,Jy;r.flags|=8192}}function sd(r,s){s!==null&&(r.flags|=4),r.flags&16384&&(s=r.tag!==22?cl():536870912,r.lanes|=s,mo|=s)}function Yl(r,s){if(!Ye)switch(r.tailMode){case"hidden":s=r.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?r.tail=null:o.sibling=null;break;case"collapsed":o=r.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:u.sibling=null}}function ft(r){var s=r.alternate!==null&&r.alternate.child===r.child,o=0,u=0;if(s)for(var h=r.child;h!==null;)o|=h.lanes|h.childLanes,u|=h.subtreeFlags&65011712,u|=h.flags&65011712,h.return=r,h=h.sibling;else for(h=r.child;h!==null;)o|=h.lanes|h.childLanes,u|=h.subtreeFlags,u|=h.flags,h.return=r,h=h.sibling;return r.subtreeFlags|=u,r.childLanes=o,s}function aA(r,s,o){var u=s.pendingProps;switch(kf(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ft(s),null;case 1:return ft(s),null;case 3:return o=s.stateNode,u=null,r!==null&&(u=r.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),ii(Pt),fr(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(r===null||r.child===null)&&(Il(s)?li(s):r===null||r.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Ky())),ft(s),null;case 26:return o=s.memoizedState,r===null?(li(s),o!==null?(ft(s),g0(s,o)):(ft(s),s.flags&=-16777217)):o?o!==r.memoizedState?(li(s),ft(s),g0(s,o)):(ft(s),s.flags&=-16777217):(r.memoizedProps!==u&&li(s),ft(s),s.flags&=-16777217),null;case 27:Br(s),o=W.current;var h=s.type;if(r!==null&&s.stateNode!=null)r.memoizedProps!==u&&li(s);else{if(!u){if(s.stateNode===null)throw Error(i(166));return ft(s),null}r=ee.current,Il(s)?$y(s):(r=g_(h,u,o),s.stateNode=r,li(s))}return ft(s),null;case 5:if(Br(s),o=s.type,r!==null&&s.stateNode!=null)r.memoizedProps!==u&&li(s);else{if(!u){if(s.stateNode===null)throw Error(i(166));return ft(s),null}if(r=ee.current,Il(s))$y(s);else{switch(h=vd(W.current),r){case 1:r=h.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:r=h.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":r=h.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":r=h.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":r=h.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof u.is=="string"?h.createElement("select",{is:u.is}):h.createElement("select"),u.multiple?r.multiple=!0:u.size&&(r.size=u.size);break;default:r=typeof u.is=="string"?h.createElement(o,{is:u.is}):h.createElement(o)}}r[It]=s,r[xt]=u;e:for(h=s.child;h!==null;){if(h.tag===5||h.tag===6)r.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===s)break e;for(;h.sibling===null;){if(h.return===null||h.return===s)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}s.stateNode=r;e:switch(Xt(r,o,u),o){case"button":case"input":case"select":case"textarea":r=!!u.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&li(s)}}return ft(s),s.flags&=-16777217,null;case 6:if(r&&s.stateNode!=null)r.memoizedProps!==u&&li(s);else{if(typeof u!="string"&&s.stateNode===null)throw Error(i(166));if(r=W.current,Il(s)){if(r=s.stateNode,o=s.memoizedProps,u=null,h=mn,h!==null)switch(h.tag){case 27:case 5:u=h.memoizedProps}r[It]=s,r=!!(r.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||u_(r.nodeValue,o)),r||ra(s)}else r=vd(r).createTextNode(u),r[It]=s,s.stateNode=r}return ft(s),null;case 13:if(u=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(h=Il(s),u!==null&&u.dehydrated!==null){if(r===null){if(!h)throw Error(i(318));if(h=s.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(i(317));h[It]=s}else Dl(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;ft(s),h=!1}else h=Ky(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=h),h=!0;if(!h)return s.flags&256?(ai(s),s):(ai(s),null)}if(ai(s),(s.flags&128)!==0)return s.lanes=o,s;if(o=u!==null,r=r!==null&&r.memoizedState!==null,o){u=s.child,h=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(h=u.alternate.memoizedState.cachePool.pool);var p=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(p=u.memoizedState.cachePool.pool),p!==h&&(u.flags|=2048)}return o!==r&&o&&(s.child.flags|=8192),sd(s,s.updateQueue),ft(s),null;case 4:return fr(),r===null&&Km(s.stateNode.containerInfo),ft(s),null;case 10:return ii(s.type),ft(s),null;case 19:if(fe(Mt),h=s.memoizedState,h===null)return ft(s),null;if(u=(s.flags&128)!==0,p=h.rendering,p===null)if(u)Yl(h,!1);else{if(yt!==0||r!==null&&(r.flags&128)!==0)for(r=s.child;r!==null;){if(p=ed(r),p!==null){for(s.flags|=128,Yl(h,!1),r=p.updateQueue,s.updateQueue=r,sd(s,r),s.subtreeFlags=0,r=o,o=s.child;o!==null;)Hy(o,r),o=o.sibling;return ce(Mt,Mt.current&1|2),s.child}r=r.sibling}h.tail!==null&&Vn()>ld&&(s.flags|=128,u=!0,Yl(h,!1),s.lanes=4194304)}else{if(!u)if(r=ed(p),r!==null){if(s.flags|=128,u=!0,r=r.updateQueue,s.updateQueue=r,sd(s,r),Yl(h,!0),h.tail===null&&h.tailMode==="hidden"&&!p.alternate&&!Ye)return ft(s),null}else 2*Vn()-h.renderingStartTime>ld&&o!==536870912&&(s.flags|=128,u=!0,Yl(h,!1),s.lanes=4194304);h.isBackwards?(p.sibling=s.child,s.child=p):(r=h.last,r!==null?r.sibling=p:s.child=p,h.last=p)}return h.tail!==null?(s=h.tail,h.rendering=s,h.tail=s.sibling,h.renderingStartTime=Vn(),s.sibling=null,r=Mt.current,ce(Mt,u?r&1|2:r&1),s):(ft(s),null);case 22:case 23:return ai(s),Wf(),u=s.memoizedState!==null,r!==null?r.memoizedState!==null!==u&&(s.flags|=8192):u&&(s.flags|=8192),u?(o&536870912)!==0&&(s.flags&128)===0&&(ft(s),s.subtreeFlags&6&&(s.flags|=8192)):ft(s),o=s.updateQueue,o!==null&&sd(s,o.retryQueue),o=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==o&&(s.flags|=2048),r!==null&&fe(aa),null;case 24:return o=null,r!==null&&(o=r.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),ii(Pt),ft(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function oA(r,s){switch(kf(s),s.tag){case 1:return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return ii(Pt),fr(),r=s.flags,(r&65536)!==0&&(r&128)===0?(s.flags=r&-65537|128,s):null;case 26:case 27:case 5:return Br(s),null;case 13:if(ai(s),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(i(340));Dl()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return fe(Mt),null;case 4:return fr(),null;case 10:return ii(s.type),null;case 22:case 23:return ai(s),Wf(),r!==null&&fe(aa),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 24:return ii(Pt),null;case 25:return null;default:return null}}function y0(r,s){switch(kf(s),s.tag){case 3:ii(Pt),fr();break;case 26:case 27:case 5:Br(s);break;case 4:fr();break;case 13:ai(s);break;case 19:fe(Mt);break;case 10:ii(s.type);break;case 22:case 23:ai(s),Wf(),r!==null&&fe(aa);break;case 24:ii(Pt)}}function Kl(r,s){try{var o=s.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var h=u.next;o=h;do{if((o.tag&r)===r){u=void 0;var p=o.create,T=o.inst;u=p(),T.destroy=u}o=o.next}while(o!==h)}}catch(x){it(s,s.return,x)}}function Fi(r,s,o){try{var u=s.updateQueue,h=u!==null?u.lastEffect:null;if(h!==null){var p=h.next;u=p;do{if((u.tag&r)===r){var T=u.inst,x=T.destroy;if(x!==void 0){T.destroy=void 0,h=s;var I=o,G=x;try{G()}catch(te){it(h,I,te)}}}u=u.next}while(u!==p)}}catch(te){it(s,s.return,te)}}function v0(r){var s=r.updateQueue;if(s!==null){var o=r.stateNode;try{sv(s,o)}catch(u){it(r,r.return,u)}}}function _0(r,s,o){o.props=la(r.type,r.memoizedProps),o.state=r.memoizedState;try{o.componentWillUnmount()}catch(u){it(r,s,u)}}function Ql(r,s){try{var o=r.ref;if(o!==null){switch(r.tag){case 26:case 27:case 5:var u=r.stateNode;break;case 30:u=r.stateNode;break;default:u=r.stateNode}typeof o=="function"?r.refCleanup=o(u):o.current=u}}catch(h){it(r,s,h)}}function Rr(r,s){var o=r.ref,u=r.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(h){it(r,s,h)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(h){it(r,s,h)}else o.current=null}function b0(r){var s=r.type,o=r.memoizedProps,u=r.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(h){it(r,r.return,h)}}function xm(r,s,o){try{var u=r.stateNode;CA(u,r.type,o,s),u[xt]=s}catch(h){it(r,r.return,h)}}function E0(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&Xi(r.type)||r.tag===4}function Am(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||E0(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&Xi(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Sm(r,s,o){var u=r.tag;if(u===5||u===6)r=r.stateNode,s?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(r,s):(s=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,s.appendChild(r),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=yd));else if(u!==4&&(u===27&&Xi(r.type)&&(o=r.stateNode,s=null),r=r.child,r!==null))for(Sm(r,s,o),r=r.sibling;r!==null;)Sm(r,s,o),r=r.sibling}function ad(r,s,o){var u=r.tag;if(u===5||u===6)r=r.stateNode,s?o.insertBefore(r,s):o.appendChild(r);else if(u!==4&&(u===27&&Xi(r.type)&&(o=r.stateNode),r=r.child,r!==null))for(ad(r,s,o),r=r.sibling;r!==null;)ad(r,s,o),r=r.sibling}function T0(r){var s=r.stateNode,o=r.memoizedProps;try{for(var u=r.type,h=s.attributes;h.length;)s.removeAttributeNode(h[0]);Xt(s,u,o),s[It]=r,s[xt]=o}catch(p){it(r,r.return,p)}}var ui=!1,Tt=!1,Rm=!1,w0=typeof WeakSet=="function"?WeakSet:Set,Bt=null;function lA(r,s){if(r=r.containerInfo,Xm=xd,r=My(r),Af(r)){if("selectionStart"in r)var o={start:r.selectionStart,end:r.selectionEnd};else e:{o=(o=r.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var h=u.anchorOffset,p=u.focusNode;u=u.focusOffset;try{o.nodeType,p.nodeType}catch{o=null;break e}var T=0,x=-1,I=-1,G=0,te=0,se=r,$=null;t:for(;;){for(var K;se!==o||h!==0&&se.nodeType!==3||(x=T+h),se!==p||u!==0&&se.nodeType!==3||(I=T+u),se.nodeType===3&&(T+=se.nodeValue.length),(K=se.firstChild)!==null;)$=se,se=K;for(;;){if(se===r)break t;if($===o&&++G===h&&(x=T),$===p&&++te===u&&(I=T),(K=se.nextSibling)!==null)break;se=$,$=se.parentNode}se=K}o=x===-1||I===-1?null:{start:x,end:I}}else o=null}o=o||{start:0,end:0}}else o=null;for(Zm={focusedElem:r,selectionRange:o},xd=!1,Bt=s;Bt!==null;)if(s=Bt,r=s.child,(s.subtreeFlags&1024)!==0&&r!==null)r.return=s,Bt=r;else for(;Bt!==null;){switch(s=Bt,p=s.alternate,r=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((r&1024)!==0&&p!==null){r=void 0,o=s,h=p.memoizedProps,p=p.memoizedState,u=o.stateNode;try{var Se=la(o.type,h,o.elementType===o.type);r=u.getSnapshotBeforeUpdate(Se,p),u.__reactInternalSnapshotBeforeUpdate=r}catch(Te){it(o,o.return,Te)}}break;case 3:if((r&1024)!==0){if(r=s.stateNode.containerInfo,o=r.nodeType,o===9)tp(r);else if(o===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":tp(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=s.sibling,r!==null){r.return=s.return,Bt=r;break}Bt=s.return}}function x0(r,s,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:Hi(r,o),u&4&&Kl(5,o);break;case 1:if(Hi(r,o),u&4)if(r=o.stateNode,s===null)try{r.componentDidMount()}catch(T){it(o,o.return,T)}else{var h=la(o.type,s.memoizedProps);s=s.memoizedState;try{r.componentDidUpdate(h,s,r.__reactInternalSnapshotBeforeUpdate)}catch(T){it(o,o.return,T)}}u&64&&v0(o),u&512&&Ql(o,o.return);break;case 3:if(Hi(r,o),u&64&&(r=o.updateQueue,r!==null)){if(s=null,o.child!==null)switch(o.child.tag){case 27:case 5:s=o.child.stateNode;break;case 1:s=o.child.stateNode}try{sv(r,s)}catch(T){it(o,o.return,T)}}break;case 27:s===null&&u&4&&T0(o);case 26:case 5:Hi(r,o),s===null&&u&4&&b0(o),u&512&&Ql(o,o.return);break;case 12:Hi(r,o);break;case 13:Hi(r,o),u&4&&R0(r,o),u&64&&(r=o.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(o=yA.bind(null,o),jA(r,o))));break;case 22:if(u=o.memoizedState!==null||ui,!u){s=s!==null&&s.memoizedState!==null||Tt,h=ui;var p=Tt;ui=u,(Tt=s)&&!p?Gi(r,o,(o.subtreeFlags&8772)!==0):Hi(r,o),ui=h,Tt=p}break;case 30:break;default:Hi(r,o)}}function A0(r){var s=r.alternate;s!==null&&(r.alternate=null,A0(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&Oi(s)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var ct=null,bn=!1;function ci(r,s,o){for(o=o.child;o!==null;)S0(r,s,o),o=o.sibling}function S0(r,s,o){if(We&&typeof We.onCommitFiberUnmount=="function")try{We.onCommitFiberUnmount(pt,o)}catch{}switch(o.tag){case 26:Tt||Rr(o,s),ci(r,s,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:Tt||Rr(o,s);var u=ct,h=bn;Xi(o.type)&&(ct=o.stateNode,bn=!1),ci(r,s,o),iu(o.stateNode),ct=u,bn=h;break;case 5:Tt||Rr(o,s);case 6:if(u=ct,h=bn,ct=null,ci(r,s,o),ct=u,bn=h,ct!==null)if(bn)try{(ct.nodeType===9?ct.body:ct.nodeName==="HTML"?ct.ownerDocument.body:ct).removeChild(o.stateNode)}catch(p){it(o,s,p)}else try{ct.removeChild(o.stateNode)}catch(p){it(o,s,p)}break;case 18:ct!==null&&(bn?(r=ct,m_(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,o.stateNode),hu(r)):m_(ct,o.stateNode));break;case 4:u=ct,h=bn,ct=o.stateNode.containerInfo,bn=!0,ci(r,s,o),ct=u,bn=h;break;case 0:case 11:case 14:case 15:Tt||Fi(2,o,s),Tt||Fi(4,o,s),ci(r,s,o);break;case 1:Tt||(Rr(o,s),u=o.stateNode,typeof u.componentWillUnmount=="function"&&_0(o,s,u)),ci(r,s,o);break;case 21:ci(r,s,o);break;case 22:Tt=(u=Tt)||o.memoizedState!==null,ci(r,s,o),Tt=u;break;default:ci(r,s,o)}}function R0(r,s){if(s.memoizedState===null&&(r=s.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{hu(r)}catch(o){it(s,s.return,o)}}function uA(r){switch(r.tag){case 13:case 19:var s=r.stateNode;return s===null&&(s=r.stateNode=new w0),s;case 22:return r=r.stateNode,s=r._retryCache,s===null&&(s=r._retryCache=new w0),s;default:throw Error(i(435,r.tag))}}function Cm(r,s){var o=uA(r);s.forEach(function(u){var h=vA.bind(null,r,u);o.has(u)||(o.add(u),u.then(h,h))})}function Dn(r,s){var o=s.deletions;if(o!==null)for(var u=0;u<o.length;u++){var h=o[u],p=r,T=s,x=T;e:for(;x!==null;){switch(x.tag){case 27:if(Xi(x.type)){ct=x.stateNode,bn=!1;break e}break;case 5:ct=x.stateNode,bn=!1;break e;case 3:case 4:ct=x.stateNode.containerInfo,bn=!0;break e}x=x.return}if(ct===null)throw Error(i(160));S0(p,T,h),ct=null,bn=!1,p=h.alternate,p!==null&&(p.return=null),h.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)C0(s,r),s=s.sibling}var ir=null;function C0(r,s){var o=r.alternate,u=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:Dn(s,r),On(r),u&4&&(Fi(3,r,r.return),Kl(3,r),Fi(5,r,r.return));break;case 1:Dn(s,r),On(r),u&512&&(Tt||o===null||Rr(o,o.return)),u&64&&ui&&(r=r.updateQueue,r!==null&&(u=r.callbacks,u!==null&&(o=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var h=ir;if(Dn(s,r),On(r),u&512&&(Tt||o===null||Rr(o,o.return)),u&4){var p=o!==null?o.memoizedState:null;if(u=r.memoizedState,o===null)if(u===null)if(r.stateNode===null){e:{u=r.type,o=r.memoizedProps,h=h.ownerDocument||h;t:switch(u){case"title":p=h.getElementsByTagName("title")[0],(!p||p[Vs]||p[It]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=h.createElement(u),h.head.insertBefore(p,h.querySelector("head > title"))),Xt(p,u,o),p[It]=r,bt(p),u=p;break e;case"link":var T=T_("link","href",h).get(u+(o.href||""));if(T){for(var x=0;x<T.length;x++)if(p=T[x],p.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&p.getAttribute("rel")===(o.rel==null?null:o.rel)&&p.getAttribute("title")===(o.title==null?null:o.title)&&p.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){T.splice(x,1);break t}}p=h.createElement(u),Xt(p,u,o),h.head.appendChild(p);break;case"meta":if(T=T_("meta","content",h).get(u+(o.content||""))){for(x=0;x<T.length;x++)if(p=T[x],p.getAttribute("content")===(o.content==null?null:""+o.content)&&p.getAttribute("name")===(o.name==null?null:o.name)&&p.getAttribute("property")===(o.property==null?null:o.property)&&p.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&p.getAttribute("charset")===(o.charSet==null?null:o.charSet)){T.splice(x,1);break t}}p=h.createElement(u),Xt(p,u,o),h.head.appendChild(p);break;default:throw Error(i(468,u))}p[It]=r,bt(p),u=p}r.stateNode=u}else w_(h,r.type,r.stateNode);else r.stateNode=E_(h,u,r.memoizedProps);else p!==u?(p===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):p.count--,u===null?w_(h,r.type,r.stateNode):E_(h,u,r.memoizedProps)):u===null&&r.stateNode!==null&&xm(r,r.memoizedProps,o.memoizedProps)}break;case 27:Dn(s,r),On(r),u&512&&(Tt||o===null||Rr(o,o.return)),o!==null&&u&4&&xm(r,r.memoizedProps,o.memoizedProps);break;case 5:if(Dn(s,r),On(r),u&512&&(Tt||o===null||Rr(o,o.return)),r.flags&32){h=r.stateNode;try{Un(h,"")}catch(K){it(r,r.return,K)}}u&4&&r.stateNode!=null&&(h=r.memoizedProps,xm(r,h,o!==null?o.memoizedProps:h)),u&1024&&(Rm=!0);break;case 6:if(Dn(s,r),On(r),u&4){if(r.stateNode===null)throw Error(i(162));u=r.memoizedProps,o=r.stateNode;try{o.nodeValue=u}catch(K){it(r,r.return,K)}}break;case 3:if(Ed=null,h=ir,ir=_d(s.containerInfo),Dn(s,r),ir=h,On(r),u&4&&o!==null&&o.memoizedState.isDehydrated)try{hu(s.containerInfo)}catch(K){it(r,r.return,K)}Rm&&(Rm=!1,N0(r));break;case 4:u=ir,ir=_d(r.stateNode.containerInfo),Dn(s,r),On(r),ir=u;break;case 12:Dn(s,r),On(r);break;case 13:Dn(s,r),On(r),r.child.flags&8192&&r.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Mm=Vn()),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,Cm(r,u)));break;case 22:h=r.memoizedState!==null;var I=o!==null&&o.memoizedState!==null,G=ui,te=Tt;if(ui=G||h,Tt=te||I,Dn(s,r),Tt=te,ui=G,On(r),u&8192)e:for(s=r.stateNode,s._visibility=h?s._visibility&-2:s._visibility|1,h&&(o===null||I||ui||Tt||ua(r)),o=null,s=r;;){if(s.tag===5||s.tag===26){if(o===null){I=o=s;try{if(p=I.stateNode,h)T=p.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{x=I.stateNode;var se=I.memoizedProps.style,$=se!=null&&se.hasOwnProperty("display")?se.display:null;x.style.display=$==null||typeof $=="boolean"?"":(""+$).trim()}}catch(K){it(I,I.return,K)}}}else if(s.tag===6){if(o===null){I=s;try{I.stateNode.nodeValue=h?"":I.memoizedProps}catch(K){it(I,I.return,K)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===r)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break e;for(;s.sibling===null;){if(s.return===null||s.return===r)break e;o===s&&(o=null),s=s.return}o===s&&(o=null),s.sibling.return=s.return,s=s.sibling}u&4&&(u=r.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,Cm(r,o))));break;case 19:Dn(s,r),On(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,Cm(r,u)));break;case 30:break;case 21:break;default:Dn(s,r),On(r)}}function On(r){var s=r.flags;if(s&2){try{for(var o,u=r.return;u!==null;){if(E0(u)){o=u;break}u=u.return}if(o==null)throw Error(i(160));switch(o.tag){case 27:var h=o.stateNode,p=Am(r);ad(r,p,h);break;case 5:var T=o.stateNode;o.flags&32&&(Un(T,""),o.flags&=-33);var x=Am(r);ad(r,x,T);break;case 3:case 4:var I=o.stateNode.containerInfo,G=Am(r);Sm(r,G,I);break;default:throw Error(i(161))}}catch(te){it(r,r.return,te)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function N0(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var s=r;N0(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),r=r.sibling}}function Hi(r,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)x0(r,s.alternate,s),s=s.sibling}function ua(r){for(r=r.child;r!==null;){var s=r;switch(s.tag){case 0:case 11:case 14:case 15:Fi(4,s,s.return),ua(s);break;case 1:Rr(s,s.return);var o=s.stateNode;typeof o.componentWillUnmount=="function"&&_0(s,s.return,o),ua(s);break;case 27:iu(s.stateNode);case 26:case 5:Rr(s,s.return),ua(s);break;case 22:s.memoizedState===null&&ua(s);break;case 30:ua(s);break;default:ua(s)}r=r.sibling}}function Gi(r,s,o){for(o=o&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var u=s.alternate,h=r,p=s,T=p.flags;switch(p.tag){case 0:case 11:case 15:Gi(h,p,o),Kl(4,p);break;case 1:if(Gi(h,p,o),u=p,h=u.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(G){it(u,u.return,G)}if(u=p,h=u.updateQueue,h!==null){var x=u.stateNode;try{var I=h.shared.hiddenCallbacks;if(I!==null)for(h.shared.hiddenCallbacks=null,h=0;h<I.length;h++)iv(I[h],x)}catch(G){it(u,u.return,G)}}o&&T&64&&v0(p),Ql(p,p.return);break;case 27:T0(p);case 26:case 5:Gi(h,p,o),o&&u===null&&T&4&&b0(p),Ql(p,p.return);break;case 12:Gi(h,p,o);break;case 13:Gi(h,p,o),o&&T&4&&R0(h,p);break;case 22:p.memoizedState===null&&Gi(h,p,o),Ql(p,p.return);break;case 30:break;default:Gi(h,p,o)}s=s.sibling}}function Nm(r,s){var o=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),r=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(r=s.memoizedState.cachePool.pool),r!==o&&(r!=null&&r.refCount++,o!=null&&Ml(o))}function Im(r,s){r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&Ml(r))}function Cr(r,s,o,u){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)I0(r,s,o,u),s=s.sibling}function I0(r,s,o,u){var h=s.flags;switch(s.tag){case 0:case 11:case 15:Cr(r,s,o,u),h&2048&&Kl(9,s);break;case 1:Cr(r,s,o,u);break;case 3:Cr(r,s,o,u),h&2048&&(r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&Ml(r)));break;case 12:if(h&2048){Cr(r,s,o,u),r=s.stateNode;try{var p=s.memoizedProps,T=p.id,x=p.onPostCommit;typeof x=="function"&&x(T,s.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(I){it(s,s.return,I)}}else Cr(r,s,o,u);break;case 13:Cr(r,s,o,u);break;case 23:break;case 22:p=s.stateNode,T=s.alternate,s.memoizedState!==null?p._visibility&2?Cr(r,s,o,u):Wl(r,s):p._visibility&2?Cr(r,s,o,u):(p._visibility|=2,co(r,s,o,u,(s.subtreeFlags&10256)!==0)),h&2048&&Nm(T,s);break;case 24:Cr(r,s,o,u),h&2048&&Im(s.alternate,s);break;default:Cr(r,s,o,u)}}function co(r,s,o,u,h){for(h=h&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var p=r,T=s,x=o,I=u,G=T.flags;switch(T.tag){case 0:case 11:case 15:co(p,T,x,I,h),Kl(8,T);break;case 23:break;case 22:var te=T.stateNode;T.memoizedState!==null?te._visibility&2?co(p,T,x,I,h):Wl(p,T):(te._visibility|=2,co(p,T,x,I,h)),h&&G&2048&&Nm(T.alternate,T);break;case 24:co(p,T,x,I,h),h&&G&2048&&Im(T.alternate,T);break;default:co(p,T,x,I,h)}s=s.sibling}}function Wl(r,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var o=r,u=s,h=u.flags;switch(u.tag){case 22:Wl(o,u),h&2048&&Nm(u.alternate,u);break;case 24:Wl(o,u),h&2048&&Im(u.alternate,u);break;default:Wl(o,u)}s=s.sibling}}var Xl=8192;function ho(r){if(r.subtreeFlags&Xl)for(r=r.child;r!==null;)D0(r),r=r.sibling}function D0(r){switch(r.tag){case 26:ho(r),r.flags&Xl&&r.memoizedState!==null&&KA(ir,r.memoizedState,r.memoizedProps);break;case 5:ho(r);break;case 3:case 4:var s=ir;ir=_d(r.stateNode.containerInfo),ho(r),ir=s;break;case 22:r.memoizedState===null&&(s=r.alternate,s!==null&&s.memoizedState!==null?(s=Xl,Xl=16777216,ho(r),Xl=s):ho(r));break;default:ho(r)}}function O0(r){var s=r.alternate;if(s!==null&&(r=s.child,r!==null)){s.child=null;do s=r.sibling,r.sibling=null,r=s;while(r!==null)}}function Zl(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];Bt=u,M0(u,r)}O0(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)P0(r),r=r.sibling}function P0(r){switch(r.tag){case 0:case 11:case 15:Zl(r),r.flags&2048&&Fi(9,r,r.return);break;case 3:Zl(r);break;case 12:Zl(r);break;case 22:var s=r.stateNode;r.memoizedState!==null&&s._visibility&2&&(r.return===null||r.return.tag!==13)?(s._visibility&=-3,od(r)):Zl(r);break;default:Zl(r)}}function od(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];Bt=u,M0(u,r)}O0(r)}for(r=r.child;r!==null;){switch(s=r,s.tag){case 0:case 11:case 15:Fi(8,s,s.return),od(s);break;case 22:o=s.stateNode,o._visibility&2&&(o._visibility&=-3,od(s));break;default:od(s)}r=r.sibling}}function M0(r,s){for(;Bt!==null;){var o=Bt;switch(o.tag){case 0:case 11:case 15:Fi(8,o,s);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Ml(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,Bt=u;else e:for(o=r;Bt!==null;){u=Bt;var h=u.sibling,p=u.return;if(A0(u),u===o){Bt=null;break e}if(h!==null){h.return=p,Bt=h;break e}Bt=p}}}var cA={getCacheForType:function(r){var s=rn(Pt),o=s.data.get(r);return o===void 0&&(o=r(),s.data.set(r,o)),o}},dA=typeof WeakMap=="function"?WeakMap:Map,Xe=0,at=null,ke=null,qe=0,Ze=0,Pn=null,$i=!1,fo=!1,Dm=!1,di=0,yt=0,Yi=0,ca=0,Om=0,Kn=0,mo=0,Jl=null,En=null,Pm=!1,Mm=0,ld=1/0,ud=null,Ki=null,Wt=0,Qi=null,po=null,go=0,jm=0,km=null,j0=null,eu=0,Vm=null;function Mn(){if((Xe&2)!==0&&qe!==0)return qe&-qe;if(J.T!==null){var r=no;return r!==0?r:Hm()}return Ii()}function k0(){Kn===0&&(Kn=(qe&536870912)===0||Ye?ul():536870912);var r=Yn.current;return r!==null&&(r.flags|=32),Kn}function jn(r,s,o){(r===at&&(Ze===2||Ze===9)||r.cancelPendingCommit!==null)&&(yo(r,0),Wi(r,qe,Kn,!1)),Fr(r,o),((Xe&2)===0||r!==at)&&(r===at&&((Xe&2)===0&&(ca|=o),yt===4&&Wi(r,qe,Kn,!1)),Nr(r))}function V0(r,s,o){if((Xe&6)!==0)throw Error(i(327));var u=!o&&(s&124)===0&&(s&r.expiredLanes)===0||ks(r,s),h=u?mA(r,s):zm(r,s,!0),p=u;do{if(h===0){fo&&!u&&Wi(r,s,0,!1);break}else{if(o=r.current.alternate,p&&!hA(o)){h=zm(r,s,!1),p=!1;continue}if(h===2){if(p=s,r.errorRecoveryDisabledLanes&p)var T=0;else T=r.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){s=T;e:{var x=r;h=Jl;var I=x.current.memoizedState.isDehydrated;if(I&&(yo(x,T).flags|=256),T=zm(x,T,!1),T!==2){if(Dm&&!I){x.errorRecoveryDisabledLanes|=p,ca|=p,h=4;break e}p=En,En=h,p!==null&&(En===null?En=p:En.push.apply(En,p))}h=T}if(p=!1,h!==2)continue}}if(h===1){yo(r,0),Wi(r,s,0,!0);break}e:{switch(u=r,p=h,p){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:Wi(u,s,Kn,!$i);break e;case 2:En=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(h=Mm+300-Vn(),10<h)){if(Wi(u,s,Kn,!$i),Pa(u,0,!0)!==0)break e;u.timeoutHandle=h_(L0.bind(null,u,o,En,ud,Pm,s,Kn,ca,mo,$i,p,2,-0,0),h);break e}L0(u,o,En,ud,Pm,s,Kn,ca,mo,$i,p,0,-0,0)}}break}while(!0);Nr(r)}function L0(r,s,o,u,h,p,T,x,I,G,te,se,$,K){if(r.timeoutHandle=-1,se=s.subtreeFlags,(se&8192||(se&16785408)===16785408)&&(ou={stylesheets:null,count:0,unsuspend:YA},D0(s),se=QA(),se!==null)){r.cancelPendingCommit=se(G0.bind(null,r,s,p,o,u,h,T,x,I,te,1,$,K)),Wi(r,p,T,!G);return}G0(r,s,p,o,u,h,T,x,I)}function hA(r){for(var s=r;;){var o=s.tag;if((o===0||o===11||o===15)&&s.flags&16384&&(o=s.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var h=o[u],p=h.getSnapshot;h=h.value;try{if(!Nn(p(),h))return!1}catch{return!1}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Wi(r,s,o,u){s&=~Om,s&=~ca,r.suspendedLanes|=s,r.pingedLanes&=~s,u&&(r.warmLanes|=s),u=r.expirationTimes;for(var h=s;0<h;){var p=31-nn(h),T=1<<p;u[p]=-1,h&=~T}o!==0&&mr(r,o,s)}function cd(){return(Xe&6)===0?(tu(0),!1):!0}function Lm(){if(ke!==null){if(Ze===0)var r=ke.return;else r=ke,ri=ia=null,tm(r),lo=null,Gl=0,r=ke;for(;r!==null;)y0(r.alternate,r),r=r.return;ke=null}}function yo(r,s){var o=r.timeoutHandle;o!==-1&&(r.timeoutHandle=-1,IA(o)),o=r.cancelPendingCommit,o!==null&&(r.cancelPendingCommit=null,o()),Lm(),at=r,ke=o=ei(r.current,null),qe=s,Ze=0,Pn=null,$i=!1,fo=ks(r,s),Dm=!1,mo=Kn=Om=ca=Yi=yt=0,En=Jl=null,Pm=!1,(s&8)!==0&&(s|=s&32);var u=r.entangledLanes;if(u!==0)for(r=r.entanglements,u&=s;0<u;){var h=31-nn(u),p=1<<h;s|=r[h],u&=~p}return di=s,Oc(),o}function U0(r,s){Oe=null,J.H=Xc,s===kl||s===Bc?(s=nv(),Ze=3):s===Jy?(s=nv(),Ze=4):Ze=s===r0?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Pn=s,ke===null&&(yt=1,nd(r,Fn(s,r.current)))}function z0(){var r=J.H;return J.H=Xc,r===null?Xc:r}function B0(){var r=J.A;return J.A=cA,r}function Um(){yt=4,$i||(qe&4194048)!==qe&&Yn.current!==null||(fo=!0),(Yi&134217727)===0&&(ca&134217727)===0||at===null||Wi(at,qe,Kn,!1)}function zm(r,s,o){var u=Xe;Xe|=2;var h=z0(),p=B0();(at!==r||qe!==s)&&(ud=null,yo(r,s)),s=!1;var T=yt;e:do try{if(Ze!==0&&ke!==null){var x=ke,I=Pn;switch(Ze){case 8:Lm(),T=6;break e;case 3:case 2:case 9:case 6:Yn.current===null&&(s=!0);var G=Ze;if(Ze=0,Pn=null,vo(r,x,I,G),o&&fo){T=0;break e}break;default:G=Ze,Ze=0,Pn=null,vo(r,x,I,G)}}fA(),T=yt;break}catch(te){U0(r,te)}while(!0);return s&&r.shellSuspendCounter++,ri=ia=null,Xe=u,J.H=h,J.A=p,ke===null&&(at=null,qe=0,Oc()),T}function fA(){for(;ke!==null;)q0(ke)}function mA(r,s){var o=Xe;Xe|=2;var u=z0(),h=B0();at!==r||qe!==s?(ud=null,ld=Vn()+500,yo(r,s)):fo=ks(r,s);e:do try{if(Ze!==0&&ke!==null){s=ke;var p=Pn;t:switch(Ze){case 1:Ze=0,Pn=null,vo(r,s,p,1);break;case 2:case 9:if(ev(p)){Ze=0,Pn=null,F0(s);break}s=function(){Ze!==2&&Ze!==9||at!==r||(Ze=7),Nr(r)},p.then(s,s);break e;case 3:Ze=7;break e;case 4:Ze=5;break e;case 7:ev(p)?(Ze=0,Pn=null,F0(s)):(Ze=0,Pn=null,vo(r,s,p,7));break;case 5:var T=null;switch(ke.tag){case 26:T=ke.memoizedState;case 5:case 27:var x=ke;if(!T||x_(T)){Ze=0,Pn=null;var I=x.sibling;if(I!==null)ke=I;else{var G=x.return;G!==null?(ke=G,dd(G)):ke=null}break t}}Ze=0,Pn=null,vo(r,s,p,5);break;case 6:Ze=0,Pn=null,vo(r,s,p,6);break;case 8:Lm(),yt=6;break e;default:throw Error(i(462))}}pA();break}catch(te){U0(r,te)}while(!0);return ri=ia=null,J.H=u,J.A=h,Xe=o,ke!==null?0:(at=null,qe=0,Oc(),yt)}function pA(){for(;ke!==null&&!sl();)q0(ke)}function q0(r){var s=p0(r.alternate,r,di);r.memoizedProps=r.pendingProps,s===null?dd(r):ke=s}function F0(r){var s=r,o=s.alternate;switch(s.tag){case 15:case 0:s=u0(o,s,s.pendingProps,s.type,void 0,qe);break;case 11:s=u0(o,s,s.pendingProps,s.type.render,s.ref,qe);break;case 5:tm(s);default:y0(o,s),s=ke=Hy(s,di),s=p0(o,s,di)}r.memoizedProps=r.pendingProps,s===null?dd(r):ke=s}function vo(r,s,o,u){ri=ia=null,tm(s),lo=null,Gl=0;var h=s.return;try{if(iA(r,h,s,o,qe)){yt=1,nd(r,Fn(o,r.current)),ke=null;return}}catch(p){if(h!==null)throw ke=h,p;yt=1,nd(r,Fn(o,r.current)),ke=null;return}s.flags&32768?(Ye||u===1?r=!0:fo||(qe&536870912)!==0?r=!1:($i=r=!0,(u===2||u===9||u===3||u===6)&&(u=Yn.current,u!==null&&u.tag===13&&(u.flags|=16384))),H0(s,r)):dd(s)}function dd(r){var s=r;do{if((s.flags&32768)!==0){H0(s,$i);return}r=s.return;var o=aA(s.alternate,s,di);if(o!==null){ke=o;return}if(s=s.sibling,s!==null){ke=s;return}ke=s=r}while(s!==null);yt===0&&(yt=5)}function H0(r,s){do{var o=oA(r.alternate,r);if(o!==null){o.flags&=32767,ke=o;return}if(o=r.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!s&&(r=r.sibling,r!==null)){ke=r;return}ke=r=o}while(r!==null);yt=6,ke=null}function G0(r,s,o,u,h,p,T,x,I){r.cancelPendingCommit=null;do hd();while(Wt!==0);if((Xe&6)!==0)throw Error(i(327));if(s!==null){if(s===r.current)throw Error(i(177));if(p=s.lanes|s.childLanes,p|=If,dl(r,o,p,T,x,I),r===at&&(ke=at=null,qe=0),po=s,Qi=r,go=o,jm=p,km=h,j0=u,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,_A(Os,function(){return W0(),null})):(r.callbackNode=null,r.callbackPriority=0),u=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||u){u=J.T,J.T=null,h=he.p,he.p=2,T=Xe,Xe|=4;try{lA(r,s,o)}finally{Xe=T,he.p=h,J.T=u}}Wt=1,$0(),Y0(),K0()}}function $0(){if(Wt===1){Wt=0;var r=Qi,s=po,o=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||o){o=J.T,J.T=null;var u=he.p;he.p=2;var h=Xe;Xe|=4;try{C0(s,r);var p=Zm,T=My(r.containerInfo),x=p.focusedElem,I=p.selectionRange;if(T!==x&&x&&x.ownerDocument&&Py(x.ownerDocument.documentElement,x)){if(I!==null&&Af(x)){var G=I.start,te=I.end;if(te===void 0&&(te=G),"selectionStart"in x)x.selectionStart=G,x.selectionEnd=Math.min(te,x.value.length);else{var se=x.ownerDocument||document,$=se&&se.defaultView||window;if($.getSelection){var K=$.getSelection(),Se=x.textContent.length,Te=Math.min(I.start,Se),rt=I.end===void 0?Te:Math.min(I.end,Se);!K.extend&&Te>rt&&(T=rt,rt=Te,Te=T);var q=Oy(x,Te),k=Oy(x,rt);if(q&&k&&(K.rangeCount!==1||K.anchorNode!==q.node||K.anchorOffset!==q.offset||K.focusNode!==k.node||K.focusOffset!==k.offset)){var H=se.createRange();H.setStart(q.node,q.offset),K.removeAllRanges(),Te>rt?(K.addRange(H),K.extend(k.node,k.offset)):(H.setEnd(k.node,k.offset),K.addRange(H))}}}}for(se=[],K=x;K=K.parentNode;)K.nodeType===1&&se.push({element:K,left:K.scrollLeft,top:K.scrollTop});for(typeof x.focus=="function"&&x.focus(),x=0;x<se.length;x++){var re=se[x];re.element.scrollLeft=re.left,re.element.scrollTop=re.top}}xd=!!Xm,Zm=Xm=null}finally{Xe=h,he.p=u,J.T=o}}r.current=s,Wt=2}}function Y0(){if(Wt===2){Wt=0;var r=Qi,s=po,o=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||o){o=J.T,J.T=null;var u=he.p;he.p=2;var h=Xe;Xe|=4;try{x0(r,s.alternate,s)}finally{Xe=h,he.p=u,J.T=o}}Wt=3}}function K0(){if(Wt===4||Wt===3){Wt=0,oc();var r=Qi,s=po,o=go,u=j0;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Wt=5:(Wt=0,po=Qi=null,Q0(r,r.pendingLanes));var h=r.pendingLanes;if(h===0&&(Ki=null),Ma(o),s=s.stateNode,We&&typeof We.onCommitFiberRoot=="function")try{We.onCommitFiberRoot(pt,s,void 0,(s.current.flags&128)===128)}catch{}if(u!==null){s=J.T,h=he.p,he.p=2,J.T=null;try{for(var p=r.onRecoverableError,T=0;T<u.length;T++){var x=u[T];p(x.value,{componentStack:x.stack})}}finally{J.T=s,he.p=h}}(go&3)!==0&&hd(),Nr(r),h=r.pendingLanes,(o&4194090)!==0&&(h&42)!==0?r===Vm?eu++:(eu=0,Vm=r):eu=0,tu(0)}}function Q0(r,s){(r.pooledCacheLanes&=s)===0&&(s=r.pooledCache,s!=null&&(r.pooledCache=null,Ml(s)))}function hd(r){return $0(),Y0(),K0(),W0()}function W0(){if(Wt!==5)return!1;var r=Qi,s=jm;jm=0;var o=Ma(go),u=J.T,h=he.p;try{he.p=32>o?32:o,J.T=null,o=km,km=null;var p=Qi,T=go;if(Wt=0,po=Qi=null,go=0,(Xe&6)!==0)throw Error(i(331));var x=Xe;if(Xe|=4,P0(p.current),I0(p,p.current,T,o),Xe=x,tu(0,!1),We&&typeof We.onPostCommitFiberRoot=="function")try{We.onPostCommitFiberRoot(pt,p)}catch{}return!0}finally{he.p=h,J.T=u,Q0(r,s)}}function X0(r,s,o){s=Fn(o,s),s=pm(r.stateNode,s,2),r=Ui(r,s,2),r!==null&&(Fr(r,2),Nr(r))}function it(r,s,o){if(r.tag===3)X0(r,r,o);else for(;s!==null;){if(s.tag===3){X0(s,r,o);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Ki===null||!Ki.has(u))){r=Fn(o,r),o=t0(2),u=Ui(s,o,2),u!==null&&(n0(o,u,s,r),Fr(u,2),Nr(u));break}}s=s.return}}function Bm(r,s,o){var u=r.pingCache;if(u===null){u=r.pingCache=new dA;var h=new Set;u.set(s,h)}else h=u.get(s),h===void 0&&(h=new Set,u.set(s,h));h.has(o)||(Dm=!0,h.add(o),r=gA.bind(null,r,s,o),s.then(r,r))}function gA(r,s,o){var u=r.pingCache;u!==null&&u.delete(s),r.pingedLanes|=r.suspendedLanes&o,r.warmLanes&=~o,at===r&&(qe&o)===o&&(yt===4||yt===3&&(qe&62914560)===qe&&300>Vn()-Mm?(Xe&2)===0&&yo(r,0):Om|=o,mo===qe&&(mo=0)),Nr(r)}function Z0(r,s){s===0&&(s=cl()),r=Za(r,s),r!==null&&(Fr(r,s),Nr(r))}function yA(r){var s=r.memoizedState,o=0;s!==null&&(o=s.retryLane),Z0(r,o)}function vA(r,s){var o=0;switch(r.tag){case 13:var u=r.stateNode,h=r.memoizedState;h!==null&&(o=h.retryLane);break;case 19:u=r.stateNode;break;case 22:u=r.stateNode._retryCache;break;default:throw Error(i(314))}u!==null&&u.delete(s),Z0(r,o)}function _A(r,s){return Is(r,s)}var fd=null,_o=null,qm=!1,md=!1,Fm=!1,da=0;function Nr(r){r!==_o&&r.next===null&&(_o===null?fd=_o=r:_o=_o.next=r),md=!0,qm||(qm=!0,EA())}function tu(r,s){if(!Fm&&md){Fm=!0;do for(var o=!1,u=fd;u!==null;){if(r!==0){var h=u.pendingLanes;if(h===0)var p=0;else{var T=u.suspendedLanes,x=u.pingedLanes;p=(1<<31-nn(42|r)+1)-1,p&=h&~(T&~x),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(o=!0,n_(u,p))}else p=qe,p=Pa(u,u===at?p:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(p&3)===0||ks(u,p)||(o=!0,n_(u,p));u=u.next}while(o);Fm=!1}}function bA(){J0()}function J0(){md=qm=!1;var r=0;da!==0&&(NA()&&(r=da),da=0);for(var s=Vn(),o=null,u=fd;u!==null;){var h=u.next,p=e_(u,s);p===0?(u.next=null,o===null?fd=h:o.next=h,h===null&&(_o=o)):(o=u,(r!==0||(p&3)!==0)&&(md=!0)),u=h}tu(r)}function e_(r,s){for(var o=r.suspendedLanes,u=r.pingedLanes,h=r.expirationTimes,p=r.pendingLanes&-62914561;0<p;){var T=31-nn(p),x=1<<T,I=h[T];I===-1?((x&o)===0||(x&u)!==0)&&(h[T]=ll(x,s)):I<=s&&(r.expiredLanes|=x),p&=~x}if(s=at,o=qe,o=Pa(r,r===s?o:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u=r.callbackNode,o===0||r===s&&(Ze===2||Ze===9)||r.cancelPendingCommit!==null)return u!==null&&u!==null&&Ds(u),r.callbackNode=null,r.callbackPriority=0;if((o&3)===0||ks(r,o)){if(s=o&-o,s===r.callbackPriority)return s;switch(u!==null&&Ds(u),Ma(o)){case 2:case 8:o=Da;break;case 32:o=Os;break;case 268435456:o=Oa;break;default:o=Os}return u=t_.bind(null,r),o=Is(o,u),r.callbackPriority=s,r.callbackNode=o,s}return u!==null&&u!==null&&Ds(u),r.callbackPriority=2,r.callbackNode=null,2}function t_(r,s){if(Wt!==0&&Wt!==5)return r.callbackNode=null,r.callbackPriority=0,null;var o=r.callbackNode;if(hd()&&r.callbackNode!==o)return null;var u=qe;return u=Pa(r,r===at?u:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u===0?null:(V0(r,u,s),e_(r,Vn()),r.callbackNode!=null&&r.callbackNode===o?t_.bind(null,r):null)}function n_(r,s){if(hd())return null;V0(r,s,!0)}function EA(){DA(function(){(Xe&6)!==0?Is(al,bA):J0()})}function Hm(){return da===0&&(da=ul()),da}function r_(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:za(""+r)}function i_(r,s){var o=s.ownerDocument.createElement("input");return o.name=s.name,o.value=s.value,r.id&&o.setAttribute("form",r.id),s.parentNode.insertBefore(o,s),r=new FormData(r),o.parentNode.removeChild(o),r}function TA(r,s,o,u,h){if(s==="submit"&&o&&o.stateNode===h){var p=r_((h[xt]||null).action),T=u.submitter;T&&(s=(s=T[xt]||null)?r_(s.formAction):T.getAttribute("formAction"),s!==null&&(p=s,T=null));var x=new Ba("action","action",null,u,h);r.push({event:x,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(da!==0){var I=T?i_(h,T):new FormData(h);cm(o,{pending:!0,data:I,method:h.method,action:p},null,I)}}else typeof p=="function"&&(x.preventDefault(),I=T?i_(h,T):new FormData(h),cm(o,{pending:!0,data:I,method:h.method,action:p},p,I))},currentTarget:h}]})}}for(var Gm=0;Gm<Nf.length;Gm++){var $m=Nf[Gm],wA=$m.toLowerCase(),xA=$m[0].toUpperCase()+$m.slice(1);rr(wA,"on"+xA)}rr(Vy,"onAnimationEnd"),rr(Ly,"onAnimationIteration"),rr(Uy,"onAnimationStart"),rr("dblclick","onDoubleClick"),rr("focusin","onFocus"),rr("focusout","onBlur"),rr(Bx,"onTransitionRun"),rr(qx,"onTransitionStart"),rr(Fx,"onTransitionCancel"),rr(zy,"onTransitionEnd"),Gr("onMouseEnter",["mouseout","mouseover"]),Gr("onMouseLeave",["mouseout","mouseover"]),Gr("onPointerEnter",["pointerout","pointerover"]),Gr("onPointerLeave",["pointerout","pointerover"]),tr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),tr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),tr("onBeforeInput",["compositionend","keypress","textInput","paste"]),tr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),tr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),tr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var nu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),AA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(nu));function s_(r,s){s=(s&4)!==0;for(var o=0;o<r.length;o++){var u=r[o],h=u.event;u=u.listeners;e:{var p=void 0;if(s)for(var T=u.length-1;0<=T;T--){var x=u[T],I=x.instance,G=x.currentTarget;if(x=x.listener,I!==p&&h.isPropagationStopped())break e;p=x,h.currentTarget=G;try{p(h)}catch(te){td(te)}h.currentTarget=null,p=I}else for(T=0;T<u.length;T++){if(x=u[T],I=x.instance,G=x.currentTarget,x=x.listener,I!==p&&h.isPropagationStopped())break e;p=x,h.currentTarget=G;try{p(h)}catch(te){td(te)}h.currentTarget=null,p=I}}}}function Ve(r,s){var o=s[fl];o===void 0&&(o=s[fl]=new Set);var u=r+"__bubble";o.has(u)||(a_(s,r,2,!1),o.add(u))}function Ym(r,s,o){var u=0;s&&(u|=4),a_(o,r,u,s)}var pd="_reactListening"+Math.random().toString(36).slice(2);function Km(r){if(!r[pd]){r[pd]=!0,ml.forEach(function(o){o!=="selectionchange"&&(AA.has(o)||Ym(o,!1,r),Ym(o,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[pd]||(s[pd]=!0,Ym("selectionchange",!1,s))}}function a_(r,s,o,u){switch(I_(s)){case 2:var h=ZA;break;case 8:h=JA;break;default:h=lp}o=h.bind(null,s,o,r),h=void 0,!Bn||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(h=!0),u?h!==void 0?r.addEventListener(s,o,{capture:!0,passive:h}):r.addEventListener(s,o,!0):h!==void 0?r.addEventListener(s,o,{passive:h}):r.addEventListener(s,o,!1)}function Qm(r,s,o,u,h){var p=u;if((s&1)===0&&(s&2)===0&&u!==null)e:for(;;){if(u===null)return;var T=u.tag;if(T===3||T===4){var x=u.stateNode.containerInfo;if(x===h)break;if(T===4)for(T=u.return;T!==null;){var I=T.tag;if((I===3||I===4)&&T.stateNode.containerInfo===h)return;T=T.return}for(;x!==null;){if(T=Hr(x),T===null)return;if(I=T.tag,I===5||I===6||I===26||I===27){u=p=T;continue e}x=x.parentNode}}u=u.return}yc(function(){var G=p,te=zn(o),se=[];e:{var $=By.get(r);if($!==void 0){var K=Ba,Se=r;switch(r){case"keypress":if(br(o)===0)break e;case"keydown":case"keyup":K=Ya;break;case"focusin":Se="focus",K=Ha;break;case"focusout":Se="blur",K=Ha;break;case"beforeblur":case"afterblur":K=Ha;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":K=qn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":K=Ef;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":K=Ac;break;case Vy:case Ly:case Uy:K=Ga;break;case zy:K=Rc;break;case"scroll":case"scrollend":K=vc;break;case"wheel":K=Ka;break;case"copy":case"cut":case"paste":K=$a;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":K=Sl;break;case"toggle":case"beforetoggle":K=Nc}var Te=(s&4)!==0,rt=!Te&&(r==="scroll"||r==="scrollend"),q=Te?$!==null?$+"Capture":null:$;Te=[];for(var k=G,H;k!==null;){var re=k;if(H=re.stateNode,re=re.tag,re!==5&&re!==26&&re!==27||H===null||q===null||(re=Hs(k,q),re!=null&&Te.push(ru(k,re,H))),rt)break;k=k.return}0<Te.length&&($=new K($,Se,null,o,te),se.push({event:$,listeners:Te}))}}if((s&7)===0){e:{if($=r==="mouseover"||r==="pointerover",K=r==="mouseout"||r==="pointerout",$&&o!==Kr&&(Se=o.relatedTarget||o.fromElement)&&(Hr(Se)||Se[Ln]))break e;if((K||$)&&($=te.window===te?te:($=te.ownerDocument)?$.defaultView||$.parentWindow:window,K?(Se=o.relatedTarget||o.toElement,K=G,Se=Se?Hr(Se):null,Se!==null&&(rt=l(Se),Te=Se.tag,Se!==rt||Te!==5&&Te!==27&&Te!==6)&&(Se=null)):(K=null,Se=G),K!==Se)){if(Te=qn,re="onMouseLeave",q="onMouseEnter",k="mouse",(r==="pointerout"||r==="pointerover")&&(Te=Sl,re="onPointerLeave",q="onPointerEnter",k="pointer"),rt=K==null?$:gr(K),H=Se==null?$:gr(Se),$=new Te(re,k+"leave",K,o,te),$.target=rt,$.relatedTarget=H,re=null,Hr(te)===G&&(Te=new Te(q,k+"enter",Se,o,te),Te.target=H,Te.relatedTarget=rt,re=Te),rt=re,K&&Se)t:{for(Te=K,q=Se,k=0,H=Te;H;H=bo(H))k++;for(H=0,re=q;re;re=bo(re))H++;for(;0<k-H;)Te=bo(Te),k--;for(;0<H-k;)q=bo(q),H--;for(;k--;){if(Te===q||q!==null&&Te===q.alternate)break t;Te=bo(Te),q=bo(q)}Te=null}else Te=null;K!==null&&o_(se,$,K,Te,!1),Se!==null&&rt!==null&&o_(se,rt,Se,Te,!0)}}e:{if($=G?gr(G):window,K=$.nodeName&&$.nodeName.toLowerCase(),K==="select"||K==="input"&&$.type==="file")var ge=Sy;else if(Ot($))if(Ry)ge=Lx;else{ge=kx;var Me=jx}else K=$.nodeName,!K||K.toLowerCase()!=="input"||$.type!=="checkbox"&&$.type!=="radio"?G&&_l(G.elementType)&&(ge=Sy):ge=Vx;if(ge&&(ge=ge(r,G))){Jr(se,ge,o,te);break e}Me&&Me(r,$,G),r==="focusout"&&G&&$.type==="number"&&G.memoizedProps.value!=null&&Mi($,"number",$.value)}switch(Me=G?gr(G):window,r){case"focusin":(Ot(Me)||Me.contentEditable==="true")&&(Qa=Me,Sf=G,Nl=null);break;case"focusout":Nl=Sf=Qa=null;break;case"mousedown":Rf=!0;break;case"contextmenu":case"mouseup":case"dragend":Rf=!1,jy(se,o,te);break;case"selectionchange":if(zx)break;case"keydown":case"keyup":jy(se,o,te)}var be;if(wr)e:{switch(r){case"compositionstart":var we="onCompositionStart";break e;case"compositionend":we="onCompositionEnd";break e;case"compositionupdate":we="onCompositionUpdate";break e}we=void 0}else ze?X(r,o)&&(we="onCompositionEnd"):r==="keydown"&&o.keyCode===229&&(we="onCompositionStart");we&&(b&&o.locale!=="ko"&&(ze||we!=="onCompositionStart"?we==="onCompositionEnd"&&ze&&(be=El()):(_r=te,ji="value"in _r?_r.value:_r.textContent,ze=!0)),Me=gd(G,we),0<Me.length&&(we=new xl(we,r,null,o,te),se.push({event:we,listeners:Me}),be?we.data=be:(be=de(o),be!==null&&(we.data=be)))),(be=_?Dt(r,o):Be(r,o))&&(we=gd(G,"onBeforeInput"),0<we.length&&(Me=new xl("onBeforeInput","beforeinput",null,o,te),se.push({event:Me,listeners:we}),Me.data=be)),TA(se,r,G,o,te)}s_(se,s)})}function ru(r,s,o){return{instance:r,listener:s,currentTarget:o}}function gd(r,s){for(var o=s+"Capture",u=[];r!==null;){var h=r,p=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||p===null||(h=Hs(r,o),h!=null&&u.unshift(ru(r,h,p)),h=Hs(r,s),h!=null&&u.push(ru(r,h,p))),r.tag===3)return u;r=r.return}return[]}function bo(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function o_(r,s,o,u,h){for(var p=s._reactName,T=[];o!==null&&o!==u;){var x=o,I=x.alternate,G=x.stateNode;if(x=x.tag,I!==null&&I===u)break;x!==5&&x!==26&&x!==27||G===null||(I=G,h?(G=Hs(o,p),G!=null&&T.unshift(ru(o,G,I))):h||(G=Hs(o,p),G!=null&&T.push(ru(o,G,I)))),o=o.return}T.length!==0&&r.push({event:s,listeners:T})}var SA=/\r\n?/g,RA=/\u0000|\uFFFD/g;function l_(r){return(typeof r=="string"?r:""+r).replace(SA,`
`).replace(RA,"")}function u_(r,s){return s=l_(s),l_(r)===s}function yd(){}function nt(r,s,o,u,h,p){switch(o){case"children":typeof u=="string"?s==="body"||s==="textarea"&&u===""||Un(r,u):(typeof u=="number"||typeof u=="bigint")&&s!=="body"&&Un(r,""+u);break;case"className":yr(r,"class",u);break;case"tabIndex":yr(r,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":yr(r,o,u);break;case"style":vl(r,u,p);break;case"data":if(s!=="object"){yr(r,"data",u);break}case"src":case"href":if(u===""&&(s!=="a"||o!=="href")){r.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(o);break}u=za(""+u),r.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){r.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(o==="formAction"?(s!=="input"&&nt(r,s,"name",h.name,h,null),nt(r,s,"formEncType",h.formEncType,h,null),nt(r,s,"formMethod",h.formMethod,h,null),nt(r,s,"formTarget",h.formTarget,h,null)):(nt(r,s,"encType",h.encType,h,null),nt(r,s,"method",h.method,h,null),nt(r,s,"target",h.target,h,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(o);break}u=za(""+u),r.setAttribute(o,u);break;case"onClick":u!=null&&(r.onclick=yd);break;case"onScroll":u!=null&&Ve("scroll",r);break;case"onScrollEnd":u!=null&&Ve("scrollend",r);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(o=u.__html,o!=null){if(h.children!=null)throw Error(i(60));r.innerHTML=o}}break;case"multiple":r.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":r.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){r.removeAttribute("xlink:href");break}o=za(""+u),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,""+u):r.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,""):r.removeAttribute(o);break;case"capture":case"download":u===!0?r.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,u):r.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?r.setAttribute(o,u):r.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?r.removeAttribute(o):r.setAttribute(o,u);break;case"popover":Ve("beforetoggle",r),Ve("toggle",r),Pi(r,"popover",u);break;case"xlinkActuate":Yt(r,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Yt(r,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Yt(r,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Yt(r,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Yt(r,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Yt(r,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Yt(r,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Yt(r,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Yt(r,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Pi(r,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=_f.get(o)||o,Pi(r,o,u))}}function Wm(r,s,o,u,h,p){switch(o){case"style":vl(r,u,p);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(o=u.__html,o!=null){if(h.children!=null)throw Error(i(60));r.innerHTML=o}}break;case"children":typeof u=="string"?Un(r,u):(typeof u=="number"||typeof u=="bigint")&&Un(r,""+u);break;case"onScroll":u!=null&&Ve("scroll",r);break;case"onScrollEnd":u!=null&&Ve("scrollend",r);break;case"onClick":u!=null&&(r.onclick=yd);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ja.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(h=o.endsWith("Capture"),s=o.slice(2,h?o.length-7:void 0),p=r[xt]||null,p=p!=null?p[o]:null,typeof p=="function"&&r.removeEventListener(s,p,h),typeof u=="function")){typeof p!="function"&&p!==null&&(o in r?r[o]=null:r.hasAttribute(o)&&r.removeAttribute(o)),r.addEventListener(s,u,h);break e}o in r?r[o]=u:u===!0?r.setAttribute(o,""):Pi(r,o,u)}}}function Xt(r,s,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ve("error",r),Ve("load",r);var u=!1,h=!1,p;for(p in o)if(o.hasOwnProperty(p)){var T=o[p];if(T!=null)switch(p){case"src":u=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:nt(r,s,p,T,o,null)}}h&&nt(r,s,"srcSet",o.srcSet,o,null),u&&nt(r,s,"src",o.src,o,null);return;case"input":Ve("invalid",r);var x=p=T=h=null,I=null,G=null;for(u in o)if(o.hasOwnProperty(u)){var te=o[u];if(te!=null)switch(u){case"name":h=te;break;case"type":T=te;break;case"checked":I=te;break;case"defaultChecked":G=te;break;case"value":p=te;break;case"defaultValue":x=te;break;case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(i(137,s));break;default:nt(r,s,u,te,o,null)}}Bs(r,p,x,I,G,T,h,!1),Ua(r);return;case"select":Ve("invalid",r),u=T=p=null;for(h in o)if(o.hasOwnProperty(h)&&(x=o[h],x!=null))switch(h){case"value":p=x;break;case"defaultValue":T=x;break;case"multiple":u=x;default:nt(r,s,h,x,o,null)}s=p,o=T,r.multiple=!!u,s!=null?Yr(r,!!u,s,!1):o!=null&&Yr(r,!!u,o,!0);return;case"textarea":Ve("invalid",r),p=h=u=null;for(T in o)if(o.hasOwnProperty(T)&&(x=o[T],x!=null))switch(T){case"value":u=x;break;case"defaultValue":h=x;break;case"children":p=x;break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(i(91));break;default:nt(r,s,T,x,o,null)}qs(r,u,h,p),Ua(r);return;case"option":for(I in o)if(o.hasOwnProperty(I)&&(u=o[I],u!=null))switch(I){case"selected":r.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:nt(r,s,I,u,o,null)}return;case"dialog":Ve("beforetoggle",r),Ve("toggle",r),Ve("cancel",r),Ve("close",r);break;case"iframe":case"object":Ve("load",r);break;case"video":case"audio":for(u=0;u<nu.length;u++)Ve(nu[u],r);break;case"image":Ve("error",r),Ve("load",r);break;case"details":Ve("toggle",r);break;case"embed":case"source":case"link":Ve("error",r),Ve("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(G in o)if(o.hasOwnProperty(G)&&(u=o[G],u!=null))switch(G){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:nt(r,s,G,u,o,null)}return;default:if(_l(s)){for(te in o)o.hasOwnProperty(te)&&(u=o[te],u!==void 0&&Wm(r,s,te,u,o,void 0));return}}for(x in o)o.hasOwnProperty(x)&&(u=o[x],u!=null&&nt(r,s,x,u,o,null))}function CA(r,s,o,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,p=null,T=null,x=null,I=null,G=null,te=null;for(K in o){var se=o[K];if(o.hasOwnProperty(K)&&se!=null)switch(K){case"checked":break;case"value":break;case"defaultValue":I=se;default:u.hasOwnProperty(K)||nt(r,s,K,null,u,se)}}for(var $ in u){var K=u[$];if(se=o[$],u.hasOwnProperty($)&&(K!=null||se!=null))switch($){case"type":p=K;break;case"name":h=K;break;case"checked":G=K;break;case"defaultChecked":te=K;break;case"value":T=K;break;case"defaultValue":x=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(i(137,s));break;default:K!==se&&nt(r,s,$,K,u,se)}}Cn(r,T,x,I,G,te,p,h);return;case"select":K=T=x=$=null;for(p in o)if(I=o[p],o.hasOwnProperty(p)&&I!=null)switch(p){case"value":break;case"multiple":K=I;default:u.hasOwnProperty(p)||nt(r,s,p,null,u,I)}for(h in u)if(p=u[h],I=o[h],u.hasOwnProperty(h)&&(p!=null||I!=null))switch(h){case"value":$=p;break;case"defaultValue":x=p;break;case"multiple":T=p;default:p!==I&&nt(r,s,h,p,u,I)}s=x,o=T,u=K,$!=null?Yr(r,!!o,$,!1):!!u!=!!o&&(s!=null?Yr(r,!!o,s,!0):Yr(r,!!o,o?[]:"",!1));return;case"textarea":K=$=null;for(x in o)if(h=o[x],o.hasOwnProperty(x)&&h!=null&&!u.hasOwnProperty(x))switch(x){case"value":break;case"children":break;default:nt(r,s,x,null,u,h)}for(T in u)if(h=u[T],p=o[T],u.hasOwnProperty(T)&&(h!=null||p!=null))switch(T){case"value":$=h;break;case"defaultValue":K=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(i(91));break;default:h!==p&&nt(r,s,T,h,u,p)}et(r,$,K);return;case"option":for(var Se in o)if($=o[Se],o.hasOwnProperty(Se)&&$!=null&&!u.hasOwnProperty(Se))switch(Se){case"selected":r.selected=!1;break;default:nt(r,s,Se,null,u,$)}for(I in u)if($=u[I],K=o[I],u.hasOwnProperty(I)&&$!==K&&($!=null||K!=null))switch(I){case"selected":r.selected=$&&typeof $!="function"&&typeof $!="symbol";break;default:nt(r,s,I,$,u,K)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Te in o)$=o[Te],o.hasOwnProperty(Te)&&$!=null&&!u.hasOwnProperty(Te)&&nt(r,s,Te,null,u,$);for(G in u)if($=u[G],K=o[G],u.hasOwnProperty(G)&&$!==K&&($!=null||K!=null))switch(G){case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(i(137,s));break;default:nt(r,s,G,$,u,K)}return;default:if(_l(s)){for(var rt in o)$=o[rt],o.hasOwnProperty(rt)&&$!==void 0&&!u.hasOwnProperty(rt)&&Wm(r,s,rt,void 0,u,$);for(te in u)$=u[te],K=o[te],!u.hasOwnProperty(te)||$===K||$===void 0&&K===void 0||Wm(r,s,te,$,u,K);return}}for(var q in o)$=o[q],o.hasOwnProperty(q)&&$!=null&&!u.hasOwnProperty(q)&&nt(r,s,q,null,u,$);for(se in u)$=u[se],K=o[se],!u.hasOwnProperty(se)||$===K||$==null&&K==null||nt(r,s,se,$,u,K)}var Xm=null,Zm=null;function vd(r){return r.nodeType===9?r:r.ownerDocument}function c_(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function d_(r,s){if(r===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&s==="foreignObject"?0:r}function Jm(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var ep=null;function NA(){var r=window.event;return r&&r.type==="popstate"?r===ep?!1:(ep=r,!0):(ep=null,!1)}var h_=typeof setTimeout=="function"?setTimeout:void 0,IA=typeof clearTimeout=="function"?clearTimeout:void 0,f_=typeof Promise=="function"?Promise:void 0,DA=typeof queueMicrotask=="function"?queueMicrotask:typeof f_<"u"?function(r){return f_.resolve(null).then(r).catch(OA)}:h_;function OA(r){setTimeout(function(){throw r})}function Xi(r){return r==="head"}function m_(r,s){var o=s,u=0,h=0;do{var p=o.nextSibling;if(r.removeChild(o),p&&p.nodeType===8)if(o=p.data,o==="/$"){if(0<u&&8>u){o=u;var T=r.ownerDocument;if(o&1&&iu(T.documentElement),o&2&&iu(T.body),o&4)for(o=T.head,iu(o),T=o.firstChild;T;){var x=T.nextSibling,I=T.nodeName;T[Vs]||I==="SCRIPT"||I==="STYLE"||I==="LINK"&&T.rel.toLowerCase()==="stylesheet"||o.removeChild(T),T=x}}if(h===0){r.removeChild(p),hu(s);return}h--}else o==="$"||o==="$?"||o==="$!"?h++:u=o.charCodeAt(0)-48;else u=0;o=p}while(o);hu(s)}function tp(r){var s=r.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var o=s;switch(s=s.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":tp(o),Oi(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}r.removeChild(o)}}function PA(r,s,o,u){for(;r.nodeType===1;){var h=o;if(r.nodeName.toLowerCase()!==s.toLowerCase()){if(!u&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(u){if(!r[Vs])switch(s){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(p=r.getAttribute("rel"),p==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(p!==h.rel||r.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||r.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||r.getAttribute("title")!==(h.title==null?null:h.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(p=r.getAttribute("src"),(p!==(h.src==null?null:h.src)||r.getAttribute("type")!==(h.type==null?null:h.type)||r.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&p&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(s==="input"&&r.type==="hidden"){var p=h.name==null?null:""+h.name;if(h.type==="hidden"&&r.getAttribute("name")===p)return r}else return r;if(r=sr(r.nextSibling),r===null)break}return null}function MA(r,s,o){if(s==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!o||(r=sr(r.nextSibling),r===null))return null;return r}function np(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState==="complete"}function jA(r,s){var o=r.ownerDocument;if(r.data!=="$?"||o.readyState==="complete")s();else{var u=function(){s(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),r._reactRetry=u}}function sr(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return r}var rp=null;function p_(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var o=r.data;if(o==="$"||o==="$!"||o==="$?"){if(s===0)return r;s--}else o==="/$"&&s++}r=r.previousSibling}return null}function g_(r,s,o){switch(s=vd(o),r){case"html":if(r=s.documentElement,!r)throw Error(i(452));return r;case"head":if(r=s.head,!r)throw Error(i(453));return r;case"body":if(r=s.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}function iu(r){for(var s=r.attributes;s.length;)r.removeAttributeNode(s[0]);Oi(r)}var Qn=new Map,y_=new Set;function _d(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var hi=he.d;he.d={f:kA,r:VA,D:LA,C:UA,L:zA,m:BA,X:FA,S:qA,M:HA};function kA(){var r=hi.f(),s=cd();return r||s}function VA(r){var s=pr(r);s!==null&&s.tag===5&&s.type==="form"?Vv(s):hi.r(r)}var Eo=typeof document>"u"?null:document;function v_(r,s,o){var u=Eo;if(u&&typeof s=="string"&&s){var h=At(s);h='link[rel="'+r+'"][href="'+h+'"]',typeof o=="string"&&(h+='[crossorigin="'+o+'"]'),y_.has(h)||(y_.add(h),r={rel:r,crossOrigin:o,href:s},u.querySelector(h)===null&&(s=u.createElement("link"),Xt(s,"link",r),bt(s),u.head.appendChild(s)))}}function LA(r){hi.D(r),v_("dns-prefetch",r,null)}function UA(r,s){hi.C(r,s),v_("preconnect",r,s)}function zA(r,s,o){hi.L(r,s,o);var u=Eo;if(u&&r&&s){var h='link[rel="preload"][as="'+At(s)+'"]';s==="image"&&o&&o.imageSrcSet?(h+='[imagesrcset="'+At(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(h+='[imagesizes="'+At(o.imageSizes)+'"]')):h+='[href="'+At(r)+'"]';var p=h;switch(s){case"style":p=To(r);break;case"script":p=wo(r)}Qn.has(p)||(r=v({rel:"preload",href:s==="image"&&o&&o.imageSrcSet?void 0:r,as:s},o),Qn.set(p,r),u.querySelector(h)!==null||s==="style"&&u.querySelector(su(p))||s==="script"&&u.querySelector(au(p))||(s=u.createElement("link"),Xt(s,"link",r),bt(s),u.head.appendChild(s)))}}function BA(r,s){hi.m(r,s);var o=Eo;if(o&&r){var u=s&&typeof s.as=="string"?s.as:"script",h='link[rel="modulepreload"][as="'+At(u)+'"][href="'+At(r)+'"]',p=h;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=wo(r)}if(!Qn.has(p)&&(r=v({rel:"modulepreload",href:r},s),Qn.set(p,r),o.querySelector(h)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(au(p)))return}u=o.createElement("link"),Xt(u,"link",r),bt(u),o.head.appendChild(u)}}}function qA(r,s,o){hi.S(r,s,o);var u=Eo;if(u&&r){var h=dn(u).hoistableStyles,p=To(r);s=s||"default";var T=h.get(p);if(!T){var x={loading:0,preload:null};if(T=u.querySelector(su(p)))x.loading=5;else{r=v({rel:"stylesheet",href:r,"data-precedence":s},o),(o=Qn.get(p))&&ip(r,o);var I=T=u.createElement("link");bt(I),Xt(I,"link",r),I._p=new Promise(function(G,te){I.onload=G,I.onerror=te}),I.addEventListener("load",function(){x.loading|=1}),I.addEventListener("error",function(){x.loading|=2}),x.loading|=4,bd(T,s,u)}T={type:"stylesheet",instance:T,count:1,state:x},h.set(p,T)}}}function FA(r,s){hi.X(r,s);var o=Eo;if(o&&r){var u=dn(o).hoistableScripts,h=wo(r),p=u.get(h);p||(p=o.querySelector(au(h)),p||(r=v({src:r,async:!0},s),(s=Qn.get(h))&&sp(r,s),p=o.createElement("script"),bt(p),Xt(p,"link",r),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},u.set(h,p))}}function HA(r,s){hi.M(r,s);var o=Eo;if(o&&r){var u=dn(o).hoistableScripts,h=wo(r),p=u.get(h);p||(p=o.querySelector(au(h)),p||(r=v({src:r,async:!0,type:"module"},s),(s=Qn.get(h))&&sp(r,s),p=o.createElement("script"),bt(p),Xt(p,"link",r),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},u.set(h,p))}}function __(r,s,o,u){var h=(h=W.current)?_d(h):null;if(!h)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(s=To(o.href),o=dn(h).hoistableStyles,u=o.get(s),u||(u={type:"style",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){r=To(o.href);var p=dn(h).hoistableStyles,T=p.get(r);if(T||(h=h.ownerDocument||h,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(r,T),(p=h.querySelector(su(r)))&&!p._p&&(T.instance=p,T.state.loading=5),Qn.has(r)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Qn.set(r,o),p||GA(h,r,o,T.state))),s&&u===null)throw Error(i(528,""));return T}if(s&&u!==null)throw Error(i(529,""));return null;case"script":return s=o.async,o=o.src,typeof o=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=wo(o),o=dn(h).hoistableScripts,u=o.get(s),u||(u={type:"script",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function To(r){return'href="'+At(r)+'"'}function su(r){return'link[rel="stylesheet"]['+r+"]"}function b_(r){return v({},r,{"data-precedence":r.precedence,precedence:null})}function GA(r,s,o,u){r.querySelector('link[rel="preload"][as="style"]['+s+"]")?u.loading=1:(s=r.createElement("link"),u.preload=s,s.addEventListener("load",function(){return u.loading|=1}),s.addEventListener("error",function(){return u.loading|=2}),Xt(s,"link",o),bt(s),r.head.appendChild(s))}function wo(r){return'[src="'+At(r)+'"]'}function au(r){return"script[async]"+r}function E_(r,s,o){if(s.count++,s.instance===null)switch(s.type){case"style":var u=r.querySelector('style[data-href~="'+At(o.href)+'"]');if(u)return s.instance=u,bt(u),u;var h=v({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(r.ownerDocument||r).createElement("style"),bt(u),Xt(u,"style",h),bd(u,o.precedence,r),s.instance=u;case"stylesheet":h=To(o.href);var p=r.querySelector(su(h));if(p)return s.state.loading|=4,s.instance=p,bt(p),p;u=b_(o),(h=Qn.get(h))&&ip(u,h),p=(r.ownerDocument||r).createElement("link"),bt(p);var T=p;return T._p=new Promise(function(x,I){T.onload=x,T.onerror=I}),Xt(p,"link",u),s.state.loading|=4,bd(p,o.precedence,r),s.instance=p;case"script":return p=wo(o.src),(h=r.querySelector(au(p)))?(s.instance=h,bt(h),h):(u=o,(h=Qn.get(p))&&(u=v({},o),sp(u,h)),r=r.ownerDocument||r,h=r.createElement("script"),bt(h),Xt(h,"link",u),r.head.appendChild(h),s.instance=h);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(u=s.instance,s.state.loading|=4,bd(u,o.precedence,r));return s.instance}function bd(r,s,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=u.length?u[u.length-1]:null,p=h,T=0;T<u.length;T++){var x=u[T];if(x.dataset.precedence===s)p=x;else if(p!==h)break}p?p.parentNode.insertBefore(r,p.nextSibling):(s=o.nodeType===9?o.head:o,s.insertBefore(r,s.firstChild))}function ip(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.title==null&&(r.title=s.title)}function sp(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.integrity==null&&(r.integrity=s.integrity)}var Ed=null;function T_(r,s,o){if(Ed===null){var u=new Map,h=Ed=new Map;h.set(o,u)}else h=Ed,u=h.get(o),u||(u=new Map,h.set(o,u));if(u.has(r))return u;for(u.set(r,null),o=o.getElementsByTagName(r),h=0;h<o.length;h++){var p=o[h];if(!(p[Vs]||p[It]||r==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var T=p.getAttribute(s)||"";T=r+T;var x=u.get(T);x?x.push(p):u.set(T,[p])}}return u}function w_(r,s,o){r=r.ownerDocument||r,r.head.insertBefore(o,s==="title"?r.querySelector("head > title"):null)}function $A(r,s,o){if(o===1||s.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return r=s.disabled,typeof s.precedence=="string"&&r==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function x_(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}var ou=null;function YA(){}function KA(r,s,o){if(ou===null)throw Error(i(475));var u=ou;if(s.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var h=To(o.href),p=r.querySelector(su(h));if(p){r=p._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(u.count++,u=Td.bind(u),r.then(u,u)),s.state.loading|=4,s.instance=p,bt(p);return}p=r.ownerDocument||r,o=b_(o),(h=Qn.get(h))&&ip(o,h),p=p.createElement("link"),bt(p);var T=p;T._p=new Promise(function(x,I){T.onload=x,T.onerror=I}),Xt(p,"link",o),s.instance=p}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(s,r),(r=s.state.preload)&&(s.state.loading&3)===0&&(u.count++,s=Td.bind(u),r.addEventListener("load",s),r.addEventListener("error",s))}}function QA(){if(ou===null)throw Error(i(475));var r=ou;return r.stylesheets&&r.count===0&&ap(r,r.stylesheets),0<r.count?function(s){var o=setTimeout(function(){if(r.stylesheets&&ap(r,r.stylesheets),r.unsuspend){var u=r.unsuspend;r.unsuspend=null,u()}},6e4);return r.unsuspend=s,function(){r.unsuspend=null,clearTimeout(o)}}:null}function Td(){if(this.count--,this.count===0){if(this.stylesheets)ap(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var wd=null;function ap(r,s){r.stylesheets=null,r.unsuspend!==null&&(r.count++,wd=new Map,s.forEach(WA,r),wd=null,Td.call(r))}function WA(r,s){if(!(s.state.loading&4)){var o=wd.get(r);if(o)var u=o.get(null);else{o=new Map,wd.set(r,o);for(var h=r.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<h.length;p++){var T=h[p];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(o.set(T.dataset.precedence,T),u=T)}u&&o.set(null,u)}h=s.instance,T=h.getAttribute("data-precedence"),p=o.get(T)||u,p===u&&o.set(null,h),o.set(T,h),this.count++,u=Td.bind(this),h.addEventListener("load",u),h.addEventListener("error",u),p?p.parentNode.insertBefore(h,p.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(h,r.firstChild)),s.state.loading|=4}}var lu={$$typeof:z,Provider:null,Consumer:null,_currentValue:ve,_currentValue2:ve,_threadCount:0};function XA(r,s,o,u,h,p,T,x){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=qr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qr(0),this.hiddenUpdates=qr(null),this.identifierPrefix=u,this.onUncaughtError=h,this.onCaughtError=p,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=x,this.incompleteTransitions=new Map}function A_(r,s,o,u,h,p,T,x,I,G,te,se){return r=new XA(r,s,o,T,x,I,G,se),s=1,p===!0&&(s|=24),p=In(3,null,null,s),r.current=p,p.stateNode=r,s=Bf(),s.refCount++,r.pooledCache=s,s.refCount++,p.memoizedState={element:u,isDehydrated:o,cache:s},Gf(p),r}function S_(r){return r?(r=Ja,r):Ja}function R_(r,s,o,u,h,p){h=S_(h),u.context===null?u.context=h:u.pendingContext=h,u=Li(s),u.payload={element:o},p=p===void 0?null:p,p!==null&&(u.callback=p),o=Ui(r,u,s),o!==null&&(jn(o,r,s),Ll(o,r,s))}function C_(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var o=r.retryLane;r.retryLane=o!==0&&o<s?o:s}}function op(r,s){C_(r,s),(r=r.alternate)&&C_(r,s)}function N_(r){if(r.tag===13){var s=Za(r,67108864);s!==null&&jn(s,r,67108864),op(r,67108864)}}var xd=!0;function ZA(r,s,o,u){var h=J.T;J.T=null;var p=he.p;try{he.p=2,lp(r,s,o,u)}finally{he.p=p,J.T=h}}function JA(r,s,o,u){var h=J.T;J.T=null;var p=he.p;try{he.p=8,lp(r,s,o,u)}finally{he.p=p,J.T=h}}function lp(r,s,o,u){if(xd){var h=up(u);if(h===null)Qm(r,s,u,Ad,o),D_(r,u);else if(tS(h,r,s,o,u))u.stopPropagation();else if(D_(r,u),s&4&&-1<eS.indexOf(r)){for(;h!==null;){var p=pr(h);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var T=er(p.pendingLanes);if(T!==0){var x=p;for(x.pendingLanes|=2,x.entangledLanes|=2;T;){var I=1<<31-nn(T);x.entanglements[1]|=I,T&=~I}Nr(p),(Xe&6)===0&&(ld=Vn()+500,tu(0))}}break;case 13:x=Za(p,2),x!==null&&jn(x,p,2),cd(),op(p,2)}if(p=up(u),p===null&&Qm(r,s,u,Ad,o),p===h)break;h=p}h!==null&&u.stopPropagation()}else Qm(r,s,u,null,o)}}function up(r){return r=zn(r),cp(r)}var Ad=null;function cp(r){if(Ad=null,r=Hr(r),r!==null){var s=l(r);if(s===null)r=null;else{var o=s.tag;if(o===13){if(r=c(s),r!==null)return r;r=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null)}}return Ad=r,null}function I_(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ff()){case al:return 2;case Da:return 8;case Os:case mf:return 32;case Oa:return 268435456;default:return 32}default:return 32}}var dp=!1,Zi=null,Ji=null,es=null,uu=new Map,cu=new Map,ts=[],eS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function D_(r,s){switch(r){case"focusin":case"focusout":Zi=null;break;case"dragenter":case"dragleave":Ji=null;break;case"mouseover":case"mouseout":es=null;break;case"pointerover":case"pointerout":uu.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":cu.delete(s.pointerId)}}function du(r,s,o,u,h,p){return r===null||r.nativeEvent!==p?(r={blockedOn:s,domEventName:o,eventSystemFlags:u,nativeEvent:p,targetContainers:[h]},s!==null&&(s=pr(s),s!==null&&N_(s)),r):(r.eventSystemFlags|=u,s=r.targetContainers,h!==null&&s.indexOf(h)===-1&&s.push(h),r)}function tS(r,s,o,u,h){switch(s){case"focusin":return Zi=du(Zi,r,s,o,u,h),!0;case"dragenter":return Ji=du(Ji,r,s,o,u,h),!0;case"mouseover":return es=du(es,r,s,o,u,h),!0;case"pointerover":var p=h.pointerId;return uu.set(p,du(uu.get(p)||null,r,s,o,u,h)),!0;case"gotpointercapture":return p=h.pointerId,cu.set(p,du(cu.get(p)||null,r,s,o,u,h)),!0}return!1}function O_(r){var s=Hr(r.target);if(s!==null){var o=l(s);if(o!==null){if(s=o.tag,s===13){if(s=c(o),s!==null){r.blockedOn=s,cc(r.priority,function(){if(o.tag===13){var u=Mn();u=Ni(u);var h=Za(o,u);h!==null&&jn(h,o,u),op(o,u)}});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){r.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Sd(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var o=up(r.nativeEvent);if(o===null){o=r.nativeEvent;var u=new o.constructor(o.type,o);Kr=u,o.target.dispatchEvent(u),Kr=null}else return s=pr(o),s!==null&&N_(s),r.blockedOn=o,!1;s.shift()}return!0}function P_(r,s,o){Sd(r)&&o.delete(s)}function nS(){dp=!1,Zi!==null&&Sd(Zi)&&(Zi=null),Ji!==null&&Sd(Ji)&&(Ji=null),es!==null&&Sd(es)&&(es=null),uu.forEach(P_),cu.forEach(P_)}function Rd(r,s){r.blockedOn===s&&(r.blockedOn=null,dp||(dp=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,nS)))}var Cd=null;function M_(r){Cd!==r&&(Cd=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Cd===r&&(Cd=null);for(var s=0;s<r.length;s+=3){var o=r[s],u=r[s+1],h=r[s+2];if(typeof u!="function"){if(cp(u||o)===null)continue;break}var p=pr(o);p!==null&&(r.splice(s,3),s-=3,cm(p,{pending:!0,data:h,method:o.method,action:u},u,h))}}))}function hu(r){function s(I){return Rd(I,r)}Zi!==null&&Rd(Zi,r),Ji!==null&&Rd(Ji,r),es!==null&&Rd(es,r),uu.forEach(s),cu.forEach(s);for(var o=0;o<ts.length;o++){var u=ts[o];u.blockedOn===r&&(u.blockedOn=null)}for(;0<ts.length&&(o=ts[0],o.blockedOn===null);)O_(o),o.blockedOn===null&&ts.shift();if(o=(r.ownerDocument||r).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var h=o[u],p=o[u+1],T=h[xt]||null;if(typeof p=="function")T||M_(o);else if(T){var x=null;if(p&&p.hasAttribute("formAction")){if(h=p,T=p[xt]||null)x=T.formAction;else if(cp(h)!==null)continue}else x=T.action;typeof x=="function"?o[u+1]=x:(o.splice(u,3),u-=3),M_(o)}}}function hp(r){this._internalRoot=r}Nd.prototype.render=hp.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(i(409));var o=s.current,u=Mn();R_(o,u,r,s,null,null)},Nd.prototype.unmount=hp.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;R_(r.current,2,null,r,null,null),cd(),s[Ln]=null}};function Nd(r){this._internalRoot=r}Nd.prototype.unstable_scheduleHydration=function(r){if(r){var s=Ii();r={blockedOn:null,target:r,priority:s};for(var o=0;o<ts.length&&s!==0&&s<ts[o].priority;o++);ts.splice(o,0,r),o===0&&O_(r)}};var j_=e.version;if(j_!=="19.1.0")throw Error(i(527,j_,"19.1.0"));he.findDOMNode=function(r){var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=m(s),r=r!==null?y(r):null,r=r===null?null:r.stateNode,r};var rS={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:J,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Id=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Id.isDisabled&&Id.supportsFiber)try{pt=Id.inject(rS),We=Id}catch{}}return mu.createRoot=function(r,s){if(!a(r))throw Error(i(299));var o=!1,u="",h=Xv,p=Zv,T=Jv,x=null;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onUncaughtError!==void 0&&(h=s.onUncaughtError),s.onCaughtError!==void 0&&(p=s.onCaughtError),s.onRecoverableError!==void 0&&(T=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(x=s.unstable_transitionCallbacks)),s=A_(r,1,!1,null,null,o,u,h,p,T,x,null),r[Ln]=s.current,Km(r),new hp(s)},mu.hydrateRoot=function(r,s,o){if(!a(r))throw Error(i(299));var u=!1,h="",p=Xv,T=Zv,x=Jv,I=null,G=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(h=o.identifierPrefix),o.onUncaughtError!==void 0&&(p=o.onUncaughtError),o.onCaughtError!==void 0&&(T=o.onCaughtError),o.onRecoverableError!==void 0&&(x=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(I=o.unstable_transitionCallbacks),o.formState!==void 0&&(G=o.formState)),s=A_(r,1,!0,s,o??null,u,h,p,T,x,I,G),s.context=S_(null),o=s.current,u=Mn(),u=Ni(u),h=Li(u),h.callback=null,Ui(o,h,u),o=u,s.current.lanes=o,Fr(s,o),Nr(s),r[Ln]=s.current,Km(r),new Nd(s)},mu.version="19.1.0",mu}var G_;function mS(){if(G_)return pp.exports;G_=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),pp.exports=fS(),pp.exports}var pS=mS(),pu={},$_;function gS(){if($_)return pu;$_=1,Object.defineProperty(pu,"__esModule",{value:!0}),pu.parse=c,pu.serialize=y;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,i=/^[\u0020-\u003A\u003D-\u007E]*$/,a=Object.prototype.toString,l=(()=>{const w=function(){};return w.prototype=Object.create(null),w})();function c(w,R){const S=new l,U=w.length;if(U<2)return S;const O=(R==null?void 0:R.decode)||v;let Y=0;do{const Q=w.indexOf("=",Y);if(Q===-1)break;const z=w.indexOf(";",Y),ue=z===-1?U:z;if(Q>ue){Y=w.lastIndexOf(";",Q-1)+1;continue}const le=f(w,Y,Q),ye=m(w,Q,le),M=w.slice(le,ye);if(S[M]===void 0){let C=f(w,Q+1,ue),N=m(w,ue,C);const P=O(w.slice(C,N));S[M]=P}Y=ue+1}while(Y<U);return S}function f(w,R,S){do{const U=w.charCodeAt(R);if(U!==32&&U!==9)return R}while(++R<S);return S}function m(w,R,S){for(;R>S;){const U=w.charCodeAt(--R);if(U!==32&&U!==9)return R+1}return S}function y(w,R,S){const U=(S==null?void 0:S.encode)||encodeURIComponent;if(!n.test(w))throw new TypeError(`argument name is invalid: ${w}`);const O=U(R);if(!e.test(O))throw new TypeError(`argument val is invalid: ${R}`);let Y=w+"="+O;if(!S)return Y;if(S.maxAge!==void 0){if(!Number.isInteger(S.maxAge))throw new TypeError(`option maxAge is invalid: ${S.maxAge}`);Y+="; Max-Age="+S.maxAge}if(S.domain){if(!t.test(S.domain))throw new TypeError(`option domain is invalid: ${S.domain}`);Y+="; Domain="+S.domain}if(S.path){if(!i.test(S.path))throw new TypeError(`option path is invalid: ${S.path}`);Y+="; Path="+S.path}if(S.expires){if(!E(S.expires)||!Number.isFinite(S.expires.valueOf()))throw new TypeError(`option expires is invalid: ${S.expires}`);Y+="; Expires="+S.expires.toUTCString()}if(S.httpOnly&&(Y+="; HttpOnly"),S.secure&&(Y+="; Secure"),S.partitioned&&(Y+="; Partitioned"),S.priority)switch(typeof S.priority=="string"?S.priority.toLowerCase():void 0){case"low":Y+="; Priority=Low";break;case"medium":Y+="; Priority=Medium";break;case"high":Y+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${S.priority}`)}if(S.sameSite)switch(typeof S.sameSite=="string"?S.sameSite.toLowerCase():S.sameSite){case!0:case"strict":Y+="; SameSite=Strict";break;case"lax":Y+="; SameSite=Lax";break;case"none":Y+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${S.sameSite}`)}return Y}function v(w){if(w.indexOf("%")===-1)return w;try{return decodeURIComponent(w)}catch{return w}}function E(w){return a.call(w)==="[object Date]"}return pu}gS();var Y_="popstate";function yS(n={}){function e(a,l){let{pathname:c="/",search:f="",hash:m=""}=Sa(a.location.hash.substring(1));return!c.startsWith("/")&&!c.startsWith(".")&&(c="/"+c),Vp("",{pathname:c,search:f,hash:m},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function t(a,l){let c=a.document.querySelector("base"),f="";if(c&&c.getAttribute("href")){let m=a.location.href,y=m.indexOf("#");f=y===-1?m:m.slice(0,y)}return f+"#"+(typeof l=="string"?l:Iu(l))}function i(a,l){Zn(a.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(l)})`)}return _S(e,t,i,n)}function dt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Zn(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function vS(){return Math.random().toString(36).substring(2,10)}function K_(n,e){return{usr:n.state,key:n.key,idx:e}}function Vp(n,e,t=null,i){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Sa(e):e,state:t,key:e&&e.key||i||vS()}}function Iu({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Sa(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substring(i),n=n.substring(0,i)),n&&(e.pathname=n)}return e}function _S(n,e,t,i={}){let{window:a=document.defaultView,v5Compat:l=!1}=i,c=a.history,f="POP",m=null,y=v();y==null&&(y=0,c.replaceState({...c.state,idx:y},""));function v(){return(c.state||{idx:null}).idx}function E(){f="POP";let O=v(),Y=O==null?null:O-y;y=O,m&&m({action:f,location:U.location,delta:Y})}function w(O,Y){f="PUSH";let Q=Vp(U.location,O,Y);t&&t(Q,O),y=v()+1;let z=K_(Q,y),ue=U.createHref(Q);try{c.pushState(z,"",ue)}catch(le){if(le instanceof DOMException&&le.name==="DataCloneError")throw le;a.location.assign(ue)}l&&m&&m({action:f,location:U.location,delta:1})}function R(O,Y){f="REPLACE";let Q=Vp(U.location,O,Y);t&&t(Q,O),y=v();let z=K_(Q,y),ue=U.createHref(Q);c.replaceState(z,"",ue),l&&m&&m({action:f,location:U.location,delta:0})}function S(O){return bS(O)}let U={get action(){return f},get location(){return n(a,c)},listen(O){if(m)throw new Error("A history only accepts one active listener");return a.addEventListener(Y_,E),m=O,()=>{a.removeEventListener(Y_,E),m=null}},createHref(O){return e(a,O)},createURL:S,encodeLocation(O){let Y=S(O);return{pathname:Y.pathname,search:Y.search,hash:Y.hash}},push:w,replace:R,go(O){return c.go(O)}};return U}function bS(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),dt(t,"No window.location.(origin|href) available to create URL");let i=typeof n=="string"?n:Iu(n);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=t+i),new URL(i,t)}function nT(n,e,t="/"){return ES(n,e,t,!1)}function ES(n,e,t,i){let a=typeof e=="string"?Sa(e):e,l=_i(a.pathname||"/",t);if(l==null)return null;let c=rT(n);TS(c);let f=null;for(let m=0;f==null&&m<c.length;++m){let y=PS(l);f=DS(c[m],y,i)}return f}function rT(n,e=[],t=[],i=""){let a=(l,c,f)=>{let m={relativePath:f===void 0?l.path||"":f,caseSensitive:l.caseSensitive===!0,childrenIndex:c,route:l};m.relativePath.startsWith("/")&&(dt(m.relativePath.startsWith(i),`Absolute route path "${m.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),m.relativePath=m.relativePath.slice(i.length));let y=pi([i,m.relativePath]),v=t.concat(m);l.children&&l.children.length>0&&(dt(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${y}".`),rT(l.children,e,v,y)),!(l.path==null&&!l.index)&&e.push({path:y,score:NS(y,l.index),routesMeta:v})};return n.forEach((l,c)=>{var f;if(l.path===""||!((f=l.path)!=null&&f.includes("?")))a(l,c);else for(let m of iT(l.path))a(l,c,m)}),e}function iT(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,a=t.endsWith("?"),l=t.replace(/\?$/,"");if(i.length===0)return a?[l,""]:[l];let c=iT(i.join("/")),f=[];return f.push(...c.map(m=>m===""?l:[l,m].join("/"))),a&&f.push(...c),f.map(m=>n.startsWith("/")&&m===""?"/":m)}function TS(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:IS(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var wS=/^:[\w-]+$/,xS=3,AS=2,SS=1,RS=10,CS=-2,Q_=n=>n==="*";function NS(n,e){let t=n.split("/"),i=t.length;return t.some(Q_)&&(i+=CS),e&&(i+=AS),t.filter(a=>!Q_(a)).reduce((a,l)=>a+(wS.test(l)?xS:l===""?SS:RS),i)}function IS(n,e){return n.length===e.length&&n.slice(0,-1).every((i,a)=>i===e[a])?n[n.length-1]-e[e.length-1]:0}function DS(n,e,t=!1){let{routesMeta:i}=n,a={},l="/",c=[];for(let f=0;f<i.length;++f){let m=i[f],y=f===i.length-1,v=l==="/"?e:e.slice(l.length)||"/",E=nh({path:m.relativePath,caseSensitive:m.caseSensitive,end:y},v),w=m.route;if(!E&&y&&t&&!i[i.length-1].route.index&&(E=nh({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},v)),!E)return null;Object.assign(a,E.params),c.push({params:a,pathname:pi([l,E.pathname]),pathnameBase:VS(pi([l,E.pathnameBase])),route:w}),E.pathnameBase!=="/"&&(l=pi([l,E.pathnameBase]))}return c}function nh(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=OS(n.path,n.caseSensitive,n.end),a=e.match(t);if(!a)return null;let l=a[0],c=l.replace(/(.)\/+$/,"$1"),f=a.slice(1);return{params:i.reduce((y,{paramName:v,isOptional:E},w)=>{if(v==="*"){let S=f[w]||"";c=l.slice(0,l.length-S.length).replace(/(.)\/+$/,"$1")}const R=f[w];return E&&!R?y[v]=void 0:y[v]=(R||"").replace(/%2F/g,"/"),y},{}),pathname:l,pathnameBase:c,pattern:n}}function OS(n,e=!1,t=!0){Zn(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let i=[],a="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,f,m)=>(i.push({paramName:f,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(i.push({paramName:"*"}),a+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?a+="\\/*$":n!==""&&n!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),i]}function PS(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Zn(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function _i(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}function MS(n,e="/"){let{pathname:t,search:i="",hash:a=""}=typeof n=="string"?Sa(n):n;return{pathname:t?t.startsWith("/")?t:jS(t,e):e,search:LS(i),hash:US(a)}}function jS(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(a=>{a===".."?t.length>1&&t.pop():a!=="."&&t.push(a)}),t.length>1?t.join("/"):"/"}function _p(n,e,t,i){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function kS(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function vg(n){let e=kS(n);return e.map((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)}function _g(n,e,t,i=!1){let a;typeof n=="string"?a=Sa(n):(a={...n},dt(!a.pathname||!a.pathname.includes("?"),_p("?","pathname","search",a)),dt(!a.pathname||!a.pathname.includes("#"),_p("#","pathname","hash",a)),dt(!a.search||!a.search.includes("#"),_p("#","search","hash",a)));let l=n===""||a.pathname==="",c=l?"/":a.pathname,f;if(c==null)f=t;else{let E=e.length-1;if(!i&&c.startsWith("..")){let w=c.split("/");for(;w[0]==="..";)w.shift(),E-=1;a.pathname=w.join("/")}f=E>=0?e[E]:"/"}let m=MS(a,f),y=c&&c!=="/"&&c.endsWith("/"),v=(l||c===".")&&t.endsWith("/");return!m.pathname.endsWith("/")&&(y||v)&&(m.pathname+="/"),m}var pi=n=>n.join("/").replace(/\/\/+/g,"/"),VS=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),LS=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,US=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function zS(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var sT=["POST","PUT","PATCH","DELETE"];new Set(sT);var BS=["GET",...sT];new Set(BS);var Ko=V.createContext(null);Ko.displayName="DataRouter";var Ch=V.createContext(null);Ch.displayName="DataRouterState";var aT=V.createContext({isTransitioning:!1});aT.displayName="ViewTransition";var qS=V.createContext(new Map);qS.displayName="Fetchers";var FS=V.createContext(null);FS.displayName="Await";var dr=V.createContext(null);dr.displayName="Navigation";var Fu=V.createContext(null);Fu.displayName="Location";var Jn=V.createContext({outlet:null,matches:[],isDataRoute:!1});Jn.displayName="Route";var bg=V.createContext(null);bg.displayName="RouteError";function HS(n,{relative:e}={}){dt(Qo(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=V.useContext(dr),{hash:a,pathname:l,search:c}=Hu(n,{relative:e}),f=l;return t!=="/"&&(f=l==="/"?t:pi([t,l])),i.createHref({pathname:f,search:c,hash:a})}function Qo(){return V.useContext(Fu)!=null}function ws(){return dt(Qo(),"useLocation() may be used only in the context of a <Router> component."),V.useContext(Fu).location}var oT="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function lT(n){V.useContext(dr).static||V.useLayoutEffect(n)}function vn(){let{isDataRoute:n}=V.useContext(Jn);return n?sR():GS()}function GS(){dt(Qo(),"useNavigate() may be used only in the context of a <Router> component.");let n=V.useContext(Ko),{basename:e,navigator:t}=V.useContext(dr),{matches:i}=V.useContext(Jn),{pathname:a}=ws(),l=JSON.stringify(vg(i)),c=V.useRef(!1);return lT(()=>{c.current=!0}),V.useCallback((m,y={})=>{if(Zn(c.current,oT),!c.current)return;if(typeof m=="number"){t.go(m);return}let v=_g(m,JSON.parse(l),a,y.relative==="path");n==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:pi([e,v.pathname])),(y.replace?t.replace:t.push)(v,y.state,y)},[e,t,l,a,n])}var $S=V.createContext(null);function YS(n){let e=V.useContext(Jn).outlet;return e&&V.createElement($S.Provider,{value:n},e)}function Eg(){let{matches:n}=V.useContext(Jn),e=n[n.length-1];return e?e.params:{}}function Hu(n,{relative:e}={}){let{matches:t}=V.useContext(Jn),{pathname:i}=ws(),a=JSON.stringify(vg(t));return V.useMemo(()=>_g(n,JSON.parse(a),i,e==="path"),[n,a,i,e])}function KS(n,e){return uT(n,e)}function uT(n,e,t,i){var Q;dt(Qo(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a,static:l}=V.useContext(dr),{matches:c}=V.useContext(Jn),f=c[c.length-1],m=f?f.params:{},y=f?f.pathname:"/",v=f?f.pathnameBase:"/",E=f&&f.route;{let z=E&&E.path||"";cT(y,!E||z.endsWith("*")||z.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${y}" (under <Route path="${z}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${z}"> to <Route path="${z==="/"?"*":`${z}/*`}">.`)}let w=ws(),R;if(e){let z=typeof e=="string"?Sa(e):e;dt(v==="/"||((Q=z.pathname)==null?void 0:Q.startsWith(v)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${v}" but pathname "${z.pathname}" was given in the \`location\` prop.`),R=z}else R=w;let S=R.pathname||"/",U=S;if(v!=="/"){let z=v.replace(/^\//,"").split("/");U="/"+S.replace(/^\//,"").split("/").slice(z.length).join("/")}let O=!l&&t&&t.matches&&t.matches.length>0?t.matches:nT(n,{pathname:U});Zn(E||O!=null,`No routes matched location "${R.pathname}${R.search}${R.hash}" `),Zn(O==null||O[O.length-1].route.element!==void 0||O[O.length-1].route.Component!==void 0||O[O.length-1].route.lazy!==void 0,`Matched leaf route at location "${R.pathname}${R.search}${R.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let Y=JS(O&&O.map(z=>Object.assign({},z,{params:Object.assign({},m,z.params),pathname:pi([v,a.encodeLocation?a.encodeLocation(z.pathname).pathname:z.pathname]),pathnameBase:z.pathnameBase==="/"?v:pi([v,a.encodeLocation?a.encodeLocation(z.pathnameBase).pathname:z.pathnameBase])})),c,t,i);return e&&Y?V.createElement(Fu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...R},navigationType:"POP"}},Y):Y}function QS(){let n=iR(),e=zS(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i},l={padding:"2px 4px",backgroundColor:i},c=null;return console.error("Error handled by React Router default ErrorBoundary:",n),c=V.createElement(V.Fragment,null,V.createElement("p",null,"💿 Hey developer 👋"),V.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",V.createElement("code",{style:l},"ErrorBoundary")," or"," ",V.createElement("code",{style:l},"errorElement")," prop on your route.")),V.createElement(V.Fragment,null,V.createElement("h2",null,"Unexpected Application Error!"),V.createElement("h3",{style:{fontStyle:"italic"}},e),t?V.createElement("pre",{style:a},t):null,c)}var WS=V.createElement(QS,null),XS=class extends V.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?V.createElement(Jn.Provider,{value:this.props.routeContext},V.createElement(bg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function ZS({routeContext:n,match:e,children:t}){let i=V.useContext(Ko);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),V.createElement(Jn.Provider,{value:n},t)}function JS(n,e=[],t=null,i=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let a=n,l=t==null?void 0:t.errors;if(l!=null){let m=a.findIndex(y=>y.route.id&&(l==null?void 0:l[y.route.id])!==void 0);dt(m>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),a=a.slice(0,Math.min(a.length,m+1))}let c=!1,f=-1;if(t)for(let m=0;m<a.length;m++){let y=a[m];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(f=m),y.route.id){let{loaderData:v,errors:E}=t,w=y.route.loader&&!v.hasOwnProperty(y.route.id)&&(!E||E[y.route.id]===void 0);if(y.route.lazy||w){c=!0,f>=0?a=a.slice(0,f+1):a=[a[0]];break}}}return a.reduceRight((m,y,v)=>{let E,w=!1,R=null,S=null;t&&(E=l&&y.route.id?l[y.route.id]:void 0,R=y.route.errorElement||WS,c&&(f<0&&v===0?(cT("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),w=!0,S=null):f===v&&(w=!0,S=y.route.hydrateFallbackElement||null)));let U=e.concat(a.slice(0,v+1)),O=()=>{let Y;return E?Y=R:w?Y=S:y.route.Component?Y=V.createElement(y.route.Component,null):y.route.element?Y=y.route.element:Y=m,V.createElement(ZS,{match:y,routeContext:{outlet:m,matches:U,isDataRoute:t!=null},children:Y})};return t&&(y.route.ErrorBoundary||y.route.errorElement||v===0)?V.createElement(XS,{location:t.location,revalidation:t.revalidation,component:R,error:E,children:O(),routeContext:{outlet:null,matches:U,isDataRoute:!0}}):O()},null)}function Tg(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function eR(n){let e=V.useContext(Ko);return dt(e,Tg(n)),e}function tR(n){let e=V.useContext(Ch);return dt(e,Tg(n)),e}function nR(n){let e=V.useContext(Jn);return dt(e,Tg(n)),e}function wg(n){let e=nR(n),t=e.matches[e.matches.length-1];return dt(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function rR(){return wg("useRouteId")}function iR(){var i;let n=V.useContext(bg),e=tR("useRouteError"),t=wg("useRouteError");return n!==void 0?n:(i=e.errors)==null?void 0:i[t]}function sR(){let{router:n}=eR("useNavigate"),e=wg("useNavigate"),t=V.useRef(!1);return lT(()=>{t.current=!0}),V.useCallback(async(a,l={})=>{Zn(t.current,oT),t.current&&(typeof a=="number"?n.navigate(a):await n.navigate(a,{fromRouteId:e,...l}))},[n,e])}var W_={};function cT(n,e,t){!e&&!W_[n]&&(W_[n]=!0,Zn(!1,t))}V.memo(aR);function aR({routes:n,future:e,state:t}){return uT(n,void 0,t,e)}function dT({to:n,replace:e,state:t,relative:i}){dt(Qo(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=V.useContext(dr);Zn(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=V.useContext(Jn),{pathname:c}=ws(),f=vn(),m=_g(n,vg(l),c,i==="path"),y=JSON.stringify(m);return V.useEffect(()=>{f(JSON.parse(y),{replace:e,state:t,relative:i})},[f,y,i,e,t]),null}function oR(n){return YS(n.context)}function pn(n){dt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function lR({basename:n="/",children:e=null,location:t,navigationType:i="POP",navigator:a,static:l=!1}){dt(!Qo(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=n.replace(/^\/*/,"/"),f=V.useMemo(()=>({basename:c,navigator:a,static:l,future:{}}),[c,a,l]);typeof t=="string"&&(t=Sa(t));let{pathname:m="/",search:y="",hash:v="",state:E=null,key:w="default"}=t,R=V.useMemo(()=>{let S=_i(m,c);return S==null?null:{location:{pathname:S,search:y,hash:v,state:E,key:w},navigationType:i}},[c,m,y,v,E,w,i]);return Zn(R!=null,`<Router basename="${c}"> is not able to match the URL "${m}${y}${v}" because it does not start with the basename, so the <Router> won't render anything.`),R==null?null:V.createElement(dr.Provider,{value:f},V.createElement(Fu.Provider,{children:e,value:R}))}function uR({children:n,location:e}){return KS(Lp(n),e)}function Lp(n,e=[]){let t=[];return V.Children.forEach(n,(i,a)=>{if(!V.isValidElement(i))return;let l=[...e,a];if(i.type===V.Fragment){t.push.apply(t,Lp(i.props.children,l));return}dt(i.type===pn,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),dt(!i.props.index||!i.props.children,"An index route cannot have child routes.");let c={id:i.props.id||l.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(c.children=Lp(i.props.children,l)),t.push(c)}),t}var Ud="get",zd="application/x-www-form-urlencoded";function Nh(n){return n!=null&&typeof n.tagName=="string"}function cR(n){return Nh(n)&&n.tagName.toLowerCase()==="button"}function dR(n){return Nh(n)&&n.tagName.toLowerCase()==="form"}function hR(n){return Nh(n)&&n.tagName.toLowerCase()==="input"}function fR(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function mR(n,e){return n.button===0&&(!e||e==="_self")&&!fR(n)}var Dd=null;function pR(){if(Dd===null)try{new FormData(document.createElement("form"),0),Dd=!1}catch{Dd=!0}return Dd}var gR=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function bp(n){return n!=null&&!gR.has(n)?(Zn(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${zd}"`),null):n}function yR(n,e){let t,i,a,l,c;if(dR(n)){let f=n.getAttribute("action");i=f?_i(f,e):null,t=n.getAttribute("method")||Ud,a=bp(n.getAttribute("enctype"))||zd,l=new FormData(n)}else if(cR(n)||hR(n)&&(n.type==="submit"||n.type==="image")){let f=n.form;if(f==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=n.getAttribute("formaction")||f.getAttribute("action");if(i=m?_i(m,e):null,t=n.getAttribute("formmethod")||f.getAttribute("method")||Ud,a=bp(n.getAttribute("formenctype"))||bp(f.getAttribute("enctype"))||zd,l=new FormData(f,n),!pR()){let{name:y,type:v,value:E}=n;if(v==="image"){let w=y?`${y}.`:"";l.append(`${w}x`,"0"),l.append(`${w}y`,"0")}else y&&l.append(y,E)}}else{if(Nh(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Ud,i=null,a=zd,c=n}return l&&a==="text/plain"&&(c=l,l=void 0),{action:i,method:t.toLowerCase(),encType:a,formData:l,body:c}}function xg(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function vR(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function _R(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function bR(n,e,t){let i=await Promise.all(n.map(async a=>{let l=e.routes[a.route.id];if(l){let c=await vR(l,t);return c.links?c.links():[]}return[]}));return xR(i.flat(1).filter(_R).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function X_(n,e,t,i,a,l){let c=(m,y)=>t[y]?m.route.id!==t[y].route.id:!0,f=(m,y)=>{var v;return t[y].pathname!==m.pathname||((v=t[y].route.path)==null?void 0:v.endsWith("*"))&&t[y].params["*"]!==m.params["*"]};return l==="assets"?e.filter((m,y)=>c(m,y)||f(m,y)):l==="data"?e.filter((m,y)=>{var E;let v=i.routes[m.route.id];if(!v||!v.hasLoader)return!1;if(c(m,y)||f(m,y))return!0;if(m.route.shouldRevalidate){let w=m.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((E=t[0])==null?void 0:E.params)||{},nextUrl:new URL(n,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof w=="boolean")return w}return!0}):[]}function ER(n,e,{includeHydrateFallback:t}={}){return TR(n.map(i=>{let a=e.routes[i.route.id];if(!a)return[];let l=[a.module];return a.clientActionModule&&(l=l.concat(a.clientActionModule)),a.clientLoaderModule&&(l=l.concat(a.clientLoaderModule)),t&&a.hydrateFallbackModule&&(l=l.concat(a.hydrateFallbackModule)),a.imports&&(l=l.concat(a.imports)),l}).flat(1))}function TR(n){return[...new Set(n)]}function wR(n){let e={},t=Object.keys(n).sort();for(let i of t)e[i]=n[i];return e}function xR(n,e){let t=new Set;return new Set(e),n.reduce((i,a)=>{let l=JSON.stringify(wR(a));return t.has(l)||(t.add(l),i.push({key:l,link:a})),i},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var AR=new Set([100,101,204,205]);function SR(n,e){let t=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t.pathname==="/"?t.pathname="_root.data":e&&_i(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function hT(){let n=V.useContext(Ko);return xg(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function RR(){let n=V.useContext(Ch);return xg(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Ag=V.createContext(void 0);Ag.displayName="FrameworkContext";function fT(){let n=V.useContext(Ag);return xg(n,"You must render this element inside a <HydratedRouter> element"),n}function CR(n,e){let t=V.useContext(Ag),[i,a]=V.useState(!1),[l,c]=V.useState(!1),{onFocus:f,onBlur:m,onMouseEnter:y,onMouseLeave:v,onTouchStart:E}=e,w=V.useRef(null);V.useEffect(()=>{if(n==="render"&&c(!0),n==="viewport"){let U=Y=>{Y.forEach(Q=>{c(Q.isIntersecting)})},O=new IntersectionObserver(U,{threshold:.5});return w.current&&O.observe(w.current),()=>{O.disconnect()}}},[n]),V.useEffect(()=>{if(i){let U=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(U)}}},[i]);let R=()=>{a(!0)},S=()=>{a(!1),c(!1)};return t?n!=="intent"?[l,w,{}]:[l,w,{onFocus:gu(f,R),onBlur:gu(m,S),onMouseEnter:gu(y,R),onMouseLeave:gu(v,S),onTouchStart:gu(E,R)}]:[!1,w,{}]}function gu(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function NR({page:n,...e}){let{router:t}=hT(),i=V.useMemo(()=>nT(t.routes,n,t.basename),[t.routes,n,t.basename]);return i?V.createElement(DR,{page:n,matches:i,...e}):null}function IR(n){let{manifest:e,routeModules:t}=fT(),[i,a]=V.useState([]);return V.useEffect(()=>{let l=!1;return bR(n,e,t).then(c=>{l||a(c)}),()=>{l=!0}},[n,e,t]),i}function DR({page:n,matches:e,...t}){let i=ws(),{manifest:a,routeModules:l}=fT(),{basename:c}=hT(),{loaderData:f,matches:m}=RR(),y=V.useMemo(()=>X_(n,e,m,a,i,"data"),[n,e,m,a,i]),v=V.useMemo(()=>X_(n,e,m,a,i,"assets"),[n,e,m,a,i]),E=V.useMemo(()=>{if(n===i.pathname+i.search+i.hash)return[];let S=new Set,U=!1;if(e.forEach(Y=>{var z;let Q=a.routes[Y.route.id];!Q||!Q.hasLoader||(!y.some(ue=>ue.route.id===Y.route.id)&&Y.route.id in f&&((z=l[Y.route.id])!=null&&z.shouldRevalidate)||Q.hasClientLoader?U=!0:S.add(Y.route.id))}),S.size===0)return[];let O=SR(n,c);return U&&S.size>0&&O.searchParams.set("_routes",e.filter(Y=>S.has(Y.route.id)).map(Y=>Y.route.id).join(",")),[O.pathname+O.search]},[c,f,i,a,y,e,n,l]),w=V.useMemo(()=>ER(v,a),[v,a]),R=IR(v);return V.createElement(V.Fragment,null,E.map(S=>V.createElement("link",{key:S,rel:"prefetch",as:"fetch",href:S,...t})),w.map(S=>V.createElement("link",{key:S,rel:"modulepreload",href:S,...t})),R.map(({key:S,link:U})=>V.createElement("link",{key:S,...U})))}function OR(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var mT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{mT&&(window.__reactRouterVersion="7.6.0")}catch{}function PR({basename:n,children:e,window:t}){let i=V.useRef();i.current==null&&(i.current=yS({window:t,v5Compat:!0}));let a=i.current,[l,c]=V.useState({action:a.action,location:a.location}),f=V.useCallback(m=>{V.startTransition(()=>c(m))},[c]);return V.useLayoutEffect(()=>a.listen(f),[a,f]),V.createElement(lR,{basename:n,children:e,location:l.location,navigationType:l.action,navigator:a})}var pT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ih=V.forwardRef(function({onClick:e,discover:t="render",prefetch:i="none",relative:a,reloadDocument:l,replace:c,state:f,target:m,to:y,preventScrollReset:v,viewTransition:E,...w},R){let{basename:S}=V.useContext(dr),U=typeof y=="string"&&pT.test(y),O,Y=!1;if(typeof y=="string"&&U&&(O=y,mT))try{let N=new URL(window.location.href),P=y.startsWith("//")?new URL(N.protocol+y):new URL(y),L=_i(P.pathname,S);P.origin===N.origin&&L!=null?y=L+P.search+P.hash:Y=!0}catch{Zn(!1,`<Link to="${y}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let Q=HS(y,{relative:a}),[z,ue,le]=CR(i,w),ye=kR(y,{replace:c,state:f,target:m,preventScrollReset:v,relative:a,viewTransition:E});function M(N){e&&e(N),N.defaultPrevented||ye(N)}let C=V.createElement("a",{...w,...le,href:O||Q,onClick:Y||l?e:M,ref:OR(R,ue),target:m,"data-discover":!U&&t==="render"?"true":void 0});return z&&!U?V.createElement(V.Fragment,null,C,V.createElement(NR,{page:Q})):C});Ih.displayName="Link";var ha=V.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:i="",end:a=!1,style:l,to:c,viewTransition:f,children:m,...y},v){let E=Hu(c,{relative:y.relative}),w=ws(),R=V.useContext(Ch),{navigator:S,basename:U}=V.useContext(dr),O=R!=null&&BR(E)&&f===!0,Y=S.encodeLocation?S.encodeLocation(E).pathname:E.pathname,Q=w.pathname,z=R&&R.navigation&&R.navigation.location?R.navigation.location.pathname:null;t||(Q=Q.toLowerCase(),z=z?z.toLowerCase():null,Y=Y.toLowerCase()),z&&U&&(z=_i(z,U)||z);const ue=Y!=="/"&&Y.endsWith("/")?Y.length-1:Y.length;let le=Q===Y||!a&&Q.startsWith(Y)&&Q.charAt(ue)==="/",ye=z!=null&&(z===Y||!a&&z.startsWith(Y)&&z.charAt(Y.length)==="/"),M={isActive:le,isPending:ye,isTransitioning:O},C=le?e:void 0,N;typeof i=="function"?N=i(M):N=[i,le?"active":null,ye?"pending":null,O?"transitioning":null].filter(Boolean).join(" ");let P=typeof l=="function"?l(M):l;return V.createElement(Ih,{...y,"aria-current":C,className:N,ref:v,style:P,to:c,viewTransition:f},typeof m=="function"?m(M):m)});ha.displayName="NavLink";var MR=V.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:i,replace:a,state:l,method:c=Ud,action:f,onSubmit:m,relative:y,preventScrollReset:v,viewTransition:E,...w},R)=>{let S=UR(),U=zR(f,{relative:y}),O=c.toLowerCase()==="get"?"get":"post",Y=typeof f=="string"&&pT.test(f),Q=z=>{if(m&&m(z),z.defaultPrevented)return;z.preventDefault();let ue=z.nativeEvent.submitter,le=(ue==null?void 0:ue.getAttribute("formmethod"))||c;S(ue||z.currentTarget,{fetcherKey:e,method:le,navigate:t,replace:a,state:l,relative:y,preventScrollReset:v,viewTransition:E})};return V.createElement("form",{ref:R,method:O,action:U,onSubmit:i?m:Q,...w,"data-discover":!Y&&n==="render"?"true":void 0})});MR.displayName="Form";function jR(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function gT(n){let e=V.useContext(Ko);return dt(e,jR(n)),e}function kR(n,{target:e,replace:t,state:i,preventScrollReset:a,relative:l,viewTransition:c}={}){let f=vn(),m=ws(),y=Hu(n,{relative:l});return V.useCallback(v=>{if(mR(v,e)){v.preventDefault();let E=t!==void 0?t:Iu(m)===Iu(y);f(n,{replace:E,state:i,preventScrollReset:a,relative:l,viewTransition:c})}},[m,f,y,t,i,e,n,a,l,c])}var VR=0,LR=()=>`__${String(++VR)}__`;function UR(){let{router:n}=gT("useSubmit"),{basename:e}=V.useContext(dr),t=rR();return V.useCallback(async(i,a={})=>{let{action:l,method:c,encType:f,formData:m,body:y}=yR(i,e);if(a.navigate===!1){let v=a.fetcherKey||LR();await n.fetch(v,t,a.action||l,{preventScrollReset:a.preventScrollReset,formData:m,body:y,formMethod:a.method||c,formEncType:a.encType||f,flushSync:a.flushSync})}else await n.navigate(a.action||l,{preventScrollReset:a.preventScrollReset,formData:m,body:y,formMethod:a.method||c,formEncType:a.encType||f,replace:a.replace,state:a.state,fromRouteId:t,flushSync:a.flushSync,viewTransition:a.viewTransition})},[n,e,t])}function zR(n,{relative:e}={}){let{basename:t}=V.useContext(dr),i=V.useContext(Jn);dt(i,"useFormAction must be used inside a RouteContext");let[a]=i.matches.slice(-1),l={...Hu(n||".",{relative:e})},c=ws();if(n==null){l.search=c.search;let f=new URLSearchParams(l.search),m=f.getAll("index");if(m.some(v=>v==="")){f.delete("index"),m.filter(E=>E).forEach(E=>f.append("index",E));let v=f.toString();l.search=v?`?${v}`:""}}return(!n||n===".")&&a.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:pi([t,l.pathname])),Iu(l)}function BR(n,e={}){let t=V.useContext(aT);dt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=gT("useViewTransitionState"),a=Hu(n,{relative:e.relative});if(!t.isTransitioning)return!1;let l=_i(t.currentLocation.pathname,i)||t.currentLocation.pathname,c=_i(t.nextLocation.pathname,i)||t.nextLocation.pathname;return nh(a.pathname,c)!=null||nh(a.pathname,l)!=null}[...AR];const qR=()=>{};var Z_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yT=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let a=n.charCodeAt(i);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(a=65536+((a&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},FR=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const a=n[t++];if(a<128)e[i++]=String.fromCharCode(a);else if(a>191&&a<224){const l=n[t++];e[i++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=n[t++],c=n[t++],f=n[t++],m=((a&7)<<18|(l&63)<<12|(c&63)<<6|f&63)-65536;e[i++]=String.fromCharCode(55296+(m>>10)),e[i++]=String.fromCharCode(56320+(m&1023))}else{const l=n[t++],c=n[t++];e[i++]=String.fromCharCode((a&15)<<12|(l&63)<<6|c&63)}}return e.join("")},vT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let a=0;a<n.length;a+=3){const l=n[a],c=a+1<n.length,f=c?n[a+1]:0,m=a+2<n.length,y=m?n[a+2]:0,v=l>>2,E=(l&3)<<4|f>>4;let w=(f&15)<<2|y>>6,R=y&63;m||(R=64,c||(w=64)),i.push(t[v],t[E],t[w],t[R])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(yT(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):FR(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let a=0;a<n.length;){const l=t[n.charAt(a++)],f=a<n.length?t[n.charAt(a)]:0;++a;const y=a<n.length?t[n.charAt(a)]:64;++a;const E=a<n.length?t[n.charAt(a)]:64;if(++a,l==null||f==null||y==null||E==null)throw new HR;const w=l<<2|f>>4;if(i.push(w),y!==64){const R=f<<4&240|y>>2;if(i.push(R),E!==64){const S=y<<6&192|E;i.push(S)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class HR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const GR=function(n){const e=yT(n);return vT.encodeByteArray(e,!0)},rh=function(n){return GR(n).replace(/\./g,"")},_T=function(n){try{return vT.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $R(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YR=()=>$R().__FIREBASE_DEFAULTS__,KR=()=>{if(typeof process>"u"||typeof Z_>"u")return;const n=Z_.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},QR=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&_T(n[1]);return e&&JSON.parse(e)},Dh=()=>{try{return qR()||YR()||KR()||QR()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},bT=n=>{var e,t;return(t=(e=Dh())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},WR=n=>{const e=bT(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},ET=()=>{var n;return(n=Dh())===null||n===void 0?void 0:n.config},TT=n=>{var e;return(e=Dh())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gu(n){return n.endsWith(".cloudworkstations.dev")}async function wT(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZR(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",a=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},n);return[rh(JSON.stringify(t)),rh(JSON.stringify(c)),""].join(".")}const xu={};function JR(){const n={prod:[],emulator:[]};for(const e of Object.keys(xu))xu[e]?n.emulator.push(e):n.prod.push(e);return n}function eC(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let J_=!1;function Oh(n,e){if(typeof window>"u"||typeof document>"u"||!Gu(window.location.host)||xu[n]===e||xu[n]||J_)return;xu[n]=e;function t(w){return`__firebase__banner__${w}`}const i="__firebase__banner",l=JR().prod.length>0;function c(){const w=document.getElementById(i);w&&w.remove()}function f(w){w.style.display="flex",w.style.background="#7faaf0",w.style.position="fixed",w.style.bottom="5px",w.style.left="5px",w.style.padding=".5em",w.style.borderRadius="5px",w.style.alignItems="center"}function m(w,R){w.setAttribute("width","24"),w.setAttribute("id",R),w.setAttribute("height","24"),w.setAttribute("viewBox","0 0 24 24"),w.setAttribute("fill","none"),w.style.marginLeft="-6px"}function y(){const w=document.createElement("span");return w.style.cursor="pointer",w.style.marginLeft="16px",w.style.fontSize="24px",w.innerHTML=" &times;",w.onclick=()=>{J_=!0,c()},w}function v(w,R){w.setAttribute("id",R),w.innerText="Learn more",w.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",w.setAttribute("target","__blank"),w.style.paddingLeft="5px",w.style.textDecoration="underline"}function E(){const w=eC(i),R=t("text"),S=document.getElementById(R)||document.createElement("span"),U=t("learnmore"),O=document.getElementById(U)||document.createElement("a"),Y=t("preprendIcon"),Q=document.getElementById(Y)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(w.created){const z=w.element;f(z),v(O,U);const ue=y();m(Q,Y),z.append(Q,S,O,ue),document.body.appendChild(z)}l?(S.innerText="Preview backend disconnected.",Q.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Q.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,S.innerText="Preview backend running in this workspace."),S.setAttribute("id",R)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function tC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(cn())}function nC(){var n;const e=(n=Dh())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function rC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function iC(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function sC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function aC(){const n=cn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function oC(){return!nC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function lC(){try{return typeof indexedDB=="object"}catch{return!1}}function uC(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(i);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{var l;e(((l=a.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cC="FirebaseError";class Ai extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=cC,Object.setPrototypeOf(this,Ai.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,$u.prototype.create)}}class $u{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],c=l?dC(l,i):"Error",f=`${this.serviceName}: ${c} (${a}).`;return new Ai(a,f,i)}}function dC(n,e){return n.replace(hC,(t,i)=>{const a=e[i];return a!=null?String(a):`<${i}?>`})}const hC=/\{\$([^}]+)}/g;function fC(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function _a(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const a of t){if(!i.includes(a))return!1;const l=n[a],c=e[a];if(eb(l)&&eb(c)){if(!_a(l,c))return!1}else if(l!==c)return!1}for(const a of i)if(!t.includes(a))return!1;return!0}function eb(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yu(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function vu(n){const e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[a,l]=i.split("=");e[decodeURIComponent(a)]=decodeURIComponent(l)}}),e}function _u(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function mC(n,e){const t=new pC(n,e);return t.subscribe.bind(t)}class pC{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let a;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");gC(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:i},a.next===void 0&&(a.next=Ep),a.error===void 0&&(a.error=Ep),a.complete===void 0&&(a.complete=Ep);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function gC(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Ep(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vt(n){return n&&n._delegate?n._delegate:n}class ba{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yC{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new XR;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&i.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(l){if(a)return null;throw l}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(_C(e))try{this.getOrInitializeService({instanceIdentifier:fa})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});i.resolve(l)}catch{}}}}clearInstance(e=fa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=fa){return this.instances.has(e)}getOptions(e=fa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,c]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);i===f&&c.resolve(a)}return a}onInit(e,t){var i;const a=this.normalizeInstanceIdentifier(t),l=(i=this.onInitCallbacks.get(a))!==null&&i!==void 0?i:new Set;l.add(e),this.onInitCallbacks.set(a,l);const c=this.instances.get(a);return c&&e(c,a),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const a of i)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:vC(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=fa){return this.component?this.component.multipleInstances?e:fa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function vC(n){return n===fa?void 0:n}function _C(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new yC(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Le;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Le||(Le={}));const EC={debug:Le.DEBUG,verbose:Le.VERBOSE,info:Le.INFO,warn:Le.WARN,error:Le.ERROR,silent:Le.SILENT},TC=Le.INFO,wC={[Le.DEBUG]:"log",[Le.VERBOSE]:"log",[Le.INFO]:"info",[Le.WARN]:"warn",[Le.ERROR]:"error"},xC=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),a=wC[e];if(a)console[a](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Sg{constructor(e){this.name=e,this._logLevel=TC,this._logHandler=xC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?EC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Le.DEBUG,...e),this._logHandler(this,Le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Le.VERBOSE,...e),this._logHandler(this,Le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Le.INFO,...e),this._logHandler(this,Le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Le.WARN,...e),this._logHandler(this,Le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Le.ERROR,...e),this._logHandler(this,Le.ERROR,...e)}}const AC=(n,e)=>e.some(t=>n instanceof t);let tb,nb;function SC(){return tb||(tb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function RC(){return nb||(nb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const xT=new WeakMap,Up=new WeakMap,AT=new WeakMap,Tp=new WeakMap,Rg=new WeakMap;function CC(n){const e=new Promise((t,i)=>{const a=()=>{n.removeEventListener("success",l),n.removeEventListener("error",c)},l=()=>{t(cs(n.result)),a()},c=()=>{i(n.error),a()};n.addEventListener("success",l),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&xT.set(t,n)}).catch(()=>{}),Rg.set(e,n),e}function NC(n){if(Up.has(n))return;const e=new Promise((t,i)=>{const a=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",c),n.removeEventListener("abort",c)},l=()=>{t(),a()},c=()=>{i(n.error||new DOMException("AbortError","AbortError")),a()};n.addEventListener("complete",l),n.addEventListener("error",c),n.addEventListener("abort",c)});Up.set(n,e)}let zp={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Up.get(n);if(e==="objectStoreNames")return n.objectStoreNames||AT.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return cs(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function IC(n){zp=n(zp)}function DC(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(wp(this),e,...t);return AT.set(i,e.sort?e.sort():[e]),cs(i)}:RC().includes(n)?function(...e){return n.apply(wp(this),e),cs(xT.get(this))}:function(...e){return cs(n.apply(wp(this),e))}}function OC(n){return typeof n=="function"?DC(n):(n instanceof IDBTransaction&&NC(n),AC(n,SC())?new Proxy(n,zp):n)}function cs(n){if(n instanceof IDBRequest)return CC(n);if(Tp.has(n))return Tp.get(n);const e=OC(n);return e!==n&&(Tp.set(n,e),Rg.set(e,n)),e}const wp=n=>Rg.get(n);function PC(n,e,{blocked:t,upgrade:i,blocking:a,terminated:l}={}){const c=indexedDB.open(n,e),f=cs(c);return i&&c.addEventListener("upgradeneeded",m=>{i(cs(c.result),m.oldVersion,m.newVersion,cs(c.transaction),m)}),t&&c.addEventListener("blocked",m=>t(m.oldVersion,m.newVersion,m)),f.then(m=>{l&&m.addEventListener("close",()=>l()),a&&m.addEventListener("versionchange",y=>a(y.oldVersion,y.newVersion,y))}).catch(()=>{}),f}const MC=["get","getKey","getAll","getAllKeys","count"],jC=["put","add","delete","clear"],xp=new Map;function rb(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(xp.get(e))return xp.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,a=jC.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(a||MC.includes(t)))return;const l=async function(c,...f){const m=this.transaction(c,a?"readwrite":"readonly");let y=m.store;return i&&(y=y.index(f.shift())),(await Promise.all([y[t](...f),a&&m.done]))[0]};return xp.set(e,l),l}IC(n=>({...n,get:(e,t,i)=>rb(e,t)||n.get(e,t,i),has:(e,t)=>!!rb(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(VC(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function VC(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Bp="@firebase/app",ib="0.12.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bi=new Sg("@firebase/app"),LC="@firebase/app-compat",UC="@firebase/analytics-compat",zC="@firebase/analytics",BC="@firebase/app-check-compat",qC="@firebase/app-check",FC="@firebase/auth",HC="@firebase/auth-compat",GC="@firebase/database",$C="@firebase/data-connect",YC="@firebase/database-compat",KC="@firebase/functions",QC="@firebase/functions-compat",WC="@firebase/installations",XC="@firebase/installations-compat",ZC="@firebase/messaging",JC="@firebase/messaging-compat",eN="@firebase/performance",tN="@firebase/performance-compat",nN="@firebase/remote-config",rN="@firebase/remote-config-compat",iN="@firebase/storage",sN="@firebase/storage-compat",aN="@firebase/firestore",oN="@firebase/vertexai",lN="@firebase/firestore-compat",uN="firebase",cN="11.7.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qp="[DEFAULT]",dN={[Bp]:"fire-core",[LC]:"fire-core-compat",[zC]:"fire-analytics",[UC]:"fire-analytics-compat",[qC]:"fire-app-check",[BC]:"fire-app-check-compat",[FC]:"fire-auth",[HC]:"fire-auth-compat",[GC]:"fire-rtdb",[$C]:"fire-data-connect",[YC]:"fire-rtdb-compat",[KC]:"fire-fn",[QC]:"fire-fn-compat",[WC]:"fire-iid",[XC]:"fire-iid-compat",[ZC]:"fire-fcm",[JC]:"fire-fcm-compat",[eN]:"fire-perf",[tN]:"fire-perf-compat",[nN]:"fire-rc",[rN]:"fire-rc-compat",[iN]:"fire-gcs",[sN]:"fire-gcs-compat",[aN]:"fire-fst",[lN]:"fire-fst-compat",[oN]:"fire-vertex","fire-js":"fire-js",[uN]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ih=new Map,hN=new Map,Fp=new Map;function sb(n,e){try{n.container.addComponent(e)}catch(t){bi.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Vo(n){const e=n.name;if(Fp.has(e))return bi.debug(`There were multiple attempts to register component ${e}.`),!1;Fp.set(e,n);for(const t of ih.values())sb(t,n);for(const t of hN.values())sb(t,n);return!0}function Cg(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Wn(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ds=new $u("app","Firebase",fN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mN{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ba("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ds.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wo=cN;function ST(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i=Object.assign({name:qp,automaticDataCollectionEnabled:!1},e),a=i.name;if(typeof a!="string"||!a)throw ds.create("bad-app-name",{appName:String(a)});if(t||(t=ET()),!t)throw ds.create("no-options");const l=ih.get(a);if(l){if(_a(t,l.options)&&_a(i,l.config))return l;throw ds.create("duplicate-app",{appName:a})}const c=new bC(a);for(const m of Fp.values())c.addComponent(m);const f=new mN(t,i,c);return ih.set(a,f),f}function RT(n=qp){const e=ih.get(n);if(!e&&n===qp&&ET())return ST();if(!e)throw ds.create("no-app",{appName:n});return e}function hs(n,e,t){var i;let a=(i=dN[n])!==null&&i!==void 0?i:n;t&&(a+=`-${t}`);const l=a.match(/\s|\//),c=e.match(/\s|\//);if(l||c){const f=[`Unable to register library "${a}" with version "${e}":`];l&&f.push(`library name "${a}" contains illegal characters (whitespace or "/")`),l&&c&&f.push("and"),c&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),bi.warn(f.join(" "));return}Vo(new ba(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pN="firebase-heartbeat-database",gN=1,Du="firebase-heartbeat-store";let Ap=null;function CT(){return Ap||(Ap=PC(pN,gN,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Du)}catch(t){console.warn(t)}}}}).catch(n=>{throw ds.create("idb-open",{originalErrorMessage:n.message})})),Ap}async function yN(n){try{const t=(await CT()).transaction(Du),i=await t.objectStore(Du).get(NT(n));return await t.done,i}catch(e){if(e instanceof Ai)bi.warn(e.message);else{const t=ds.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});bi.warn(t.message)}}}async function ab(n,e){try{const i=(await CT()).transaction(Du,"readwrite");await i.objectStore(Du).put(e,NT(n)),await i.done}catch(t){if(t instanceof Ai)bi.warn(t.message);else{const i=ds.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});bi.warn(i.message)}}}function NT(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vN=1024,_N=30;class bN{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new TN(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=ob();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:a}),this._heartbeatsCache.heartbeats.length>_N){const c=wN(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){bi.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=ob(),{heartbeatsToSend:i,unsentEntries:a}=EN(this._heartbeatsCache.heartbeats),l=rh(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return bi.warn(t),""}}}function ob(){return new Date().toISOString().substring(0,10)}function EN(n,e=vN){const t=[];let i=n.slice();for(const a of n){const l=t.find(c=>c.agent===a.agent);if(l){if(l.dates.push(a.date),lb(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),lb(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class TN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return lC()?uC().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await yN(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const a=await this.read();return ab(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const a=await this.read();return ab(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function lb(n){return rh(JSON.stringify({version:2,heartbeats:n})).length}function wN(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xN(n){Vo(new ba("platform-logger",e=>new kC(e),"PRIVATE")),Vo(new ba("heartbeat",e=>new bN(e),"PRIVATE")),hs(Bp,ib,n),hs(Bp,ib,"esm2017"),hs("fire-js","")}xN("");function Ng(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(n);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(n,i[a])&&(t[i[a]]=n[i[a]]);return t}function IT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const AN=IT,DT=new $u("auth","Firebase",IT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sh=new Sg("@firebase/auth");function SN(n,...e){sh.logLevel<=Le.WARN&&sh.warn(`Auth (${Wo}): ${n}`,...e)}function Bd(n,...e){sh.logLevel<=Le.ERROR&&sh.error(`Auth (${Wo}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function or(n,...e){throw Ig(n,...e)}function Mr(n,...e){return Ig(n,...e)}function OT(n,e,t){const i=Object.assign(Object.assign({},AN()),{[e]:t});return new $u("auth","Firebase",i).create(e,{appName:n.name})}function gi(n){return OT(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ig(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return DT.create(n,...e)}function xe(n,e,...t){if(!n)throw Ig(e,...t)}function fi(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Bd(e),new Error(e)}function Ei(n,e){n||fi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hp(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function RN(){return ub()==="http:"||ub()==="https:"}function ub(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(RN()||iC()||"connection"in navigator)?navigator.onLine:!0}function NN(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ei(t>e,"Short delay should be less than long delay!"),this.isMobile=tC()||sC()}get(){return CN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dg(n,e){Ei(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PT{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;fi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;fi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;fi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DN=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],ON=new Ku(3e4,6e4);function xs(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Si(n,e,t,i,a={}){return MT(n,a,async()=>{let l={},c={};i&&(e==="GET"?c=i:l={body:JSON.stringify(i)});const f=Yu(Object.assign({key:n.config.apiKey},c)).slice(1),m=await n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);const y=Object.assign({method:e,headers:m},l);return rC()||(y.referrerPolicy="no-referrer"),n.emulatorConfig&&Gu(n.emulatorConfig.host)&&(y.credentials="include"),PT.fetch()(await jT(n,n.config.apiHost,t,f),y)})}async function MT(n,e,t){n._canInitEmulator=!1;const i=Object.assign(Object.assign({},IN),e);try{const a=new MN(n),l=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw Od(n,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const f=l.ok?c.errorMessage:c.error.message,[m,y]=f.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw Od(n,"credential-already-in-use",c);if(m==="EMAIL_EXISTS")throw Od(n,"email-already-in-use",c);if(m==="USER_DISABLED")throw Od(n,"user-disabled",c);const v=i[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw OT(n,v,y);or(n,v)}}catch(a){if(a instanceof Ai)throw a;or(n,"network-request-failed",{message:String(a)})}}async function Qu(n,e,t,i,a={}){const l=await Si(n,e,t,i,a);return"mfaPendingCredential"in l&&or(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function jT(n,e,t,i){const a=`${e}${t}?${i}`,l=n,c=l.config.emulator?Dg(n.config,a):`${n.config.apiScheme}://${a}`;return DN.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}function PN(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class MN{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Mr(this.auth,"network-request-failed")),ON.get())})}}function Od(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const a=Mr(n,e,i);return a.customData._tokenResponse=t,a}function cb(n){return n!==void 0&&n.enterprise!==void 0}class jN{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return PN(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function kN(n,e){return Si(n,"GET","/v2/recaptchaConfig",xs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VN(n,e){return Si(n,"POST","/v1/accounts:delete",e)}async function ah(n,e){return Si(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Au(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function LN(n,e=!1){const t=Vt(n),i=await t.getIdToken(e),a=Og(i);xe(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,c=l==null?void 0:l.sign_in_provider;return{claims:a,token:i,authTime:Au(Sp(a.auth_time)),issuedAtTime:Au(Sp(a.iat)),expirationTime:Au(Sp(a.exp)),signInProvider:c||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Sp(n){return Number(n)*1e3}function Og(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return Bd("JWT malformed, contained fewer than 3 sections"),null;try{const a=_T(t);return a?JSON.parse(a):(Bd("Failed to decode base64 JWT payload"),null)}catch(a){return Bd("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function db(n){const e=Og(n);return xe(e,"internal-error"),xe(typeof e.exp<"u","internal-error"),xe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lo(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Ai&&UN(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function UN({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const a=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Au(this.lastLoginAt),this.creationTime=Au(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oh(n){var e;const t=n.auth,i=await n.getIdToken(),a=await Lo(n,ah(t,{idToken:i}));xe(a==null?void 0:a.users.length,t,"internal-error");const l=a.users[0];n._notifyReloadListener(l);const c=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?kT(l.providerUserInfo):[],f=qN(n.providerData,c),m=n.isAnonymous,y=!(n.email&&l.passwordHash)&&!(f!=null&&f.length),v=m?y:!1,E={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:f,metadata:new Gp(l.createdAt,l.lastLoginAt),isAnonymous:v};Object.assign(n,E)}async function BN(n){const e=Vt(n);await oh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function qN(n,e){return[...n.filter(i=>!e.some(a=>a.providerId===i.providerId)),...e]}function kT(n){return n.map(e=>{var{providerId:t}=e,i=Ng(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FN(n,e){const t=await MT(n,{},async()=>{const i=Yu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=n.config,c=await jT(n,a,"/v1/token",`key=${l}`),f=await n._getAdditionalHeaders();return f["Content-Type"]="application/x-www-form-urlencoded",PT.fetch()(c,{method:"POST",headers:f,body:i})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function HN(n,e){return Si(n,"POST","/v2/accounts:revokeToken",xs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){xe(e.idToken,"internal-error"),xe(typeof e.idToken<"u","internal-error"),xe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):db(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){xe(e.length!==0,"internal-error");const t=db(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(xe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:a,expiresIn:l}=await FN(e,t);this.updateTokensAndExpiration(i,a,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:a,expirationTime:l}=t,c=new Do;return i&&(xe(typeof i=="string","internal-error",{appName:e}),c.refreshToken=i),a&&(xe(typeof a=="string","internal-error",{appName:e}),c.accessToken=a),l&&(xe(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Do,this.toJSON())}_performRefresh(){return fi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rs(n,e){xe(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class ar{constructor(e){var{uid:t,auth:i,stsTokenManager:a}=e,l=Ng(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new zN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Gp(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await Lo(this,this.stsTokenManager.getToken(this.auth,e));return xe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return LN(this,e)}reload(){return BN(this)}_assign(e){this!==e&&(xe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ar(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){xe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await oh(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Wn(this.auth.app))return Promise.reject(gi(this.auth));const e=await this.getIdToken();return await Lo(this,VN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,a,l,c,f,m,y,v;const E=(i=t.displayName)!==null&&i!==void 0?i:void 0,w=(a=t.email)!==null&&a!==void 0?a:void 0,R=(l=t.phoneNumber)!==null&&l!==void 0?l:void 0,S=(c=t.photoURL)!==null&&c!==void 0?c:void 0,U=(f=t.tenantId)!==null&&f!==void 0?f:void 0,O=(m=t._redirectEventId)!==null&&m!==void 0?m:void 0,Y=(y=t.createdAt)!==null&&y!==void 0?y:void 0,Q=(v=t.lastLoginAt)!==null&&v!==void 0?v:void 0,{uid:z,emailVerified:ue,isAnonymous:le,providerData:ye,stsTokenManager:M}=t;xe(z&&M,e,"internal-error");const C=Do.fromJSON(this.name,M);xe(typeof z=="string",e,"internal-error"),rs(E,e.name),rs(w,e.name),xe(typeof ue=="boolean",e,"internal-error"),xe(typeof le=="boolean",e,"internal-error"),rs(R,e.name),rs(S,e.name),rs(U,e.name),rs(O,e.name),rs(Y,e.name),rs(Q,e.name);const N=new ar({uid:z,auth:e,email:w,emailVerified:ue,displayName:E,isAnonymous:le,photoURL:S,phoneNumber:R,tenantId:U,stsTokenManager:C,createdAt:Y,lastLoginAt:Q});return ye&&Array.isArray(ye)&&(N.providerData=ye.map(P=>Object.assign({},P))),O&&(N._redirectEventId=O),N}static async _fromIdTokenResponse(e,t,i=!1){const a=new Do;a.updateFromServerResponse(t);const l=new ar({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:i});return await oh(l),l}static async _fromGetAccountInfoResponse(e,t,i){const a=t.users[0];xe(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?kT(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!(l!=null&&l.length),f=new Do;f.updateFromIdToken(i);const m=new ar({uid:a.localId,auth:e,stsTokenManager:f,isAnonymous:c}),y={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new Gp(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(l!=null&&l.length)};return Object.assign(m,y),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hb=new Map;function mi(n){Ei(n instanceof Function,"Expected a class definition");let e=hb.get(n);return e?(Ei(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,hb.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}VT.type="NONE";const fb=VT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qd(n,e,t){return`firebase:${n}:${e}:${t}`}class Oo{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:a,name:l}=this.auth;this.fullUserKey=qd(this.userKey,a.apiKey,l),this.fullPersistenceKey=qd("persistence",a.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await ah(this.auth,{idToken:e}).catch(()=>{});return t?ar._fromGetAccountInfoResponse(this.auth,t,e):null}return ar._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Oo(mi(fb),e,i);const a=(await Promise.all(t.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let l=a[0]||mi(fb);const c=qd(i,e.config.apiKey,e.name);let f=null;for(const y of t)try{const v=await y._get(c);if(v){let E;if(typeof v=="string"){const w=await ah(e,{idToken:v}).catch(()=>{});if(!w)break;E=await ar._fromGetAccountInfoResponse(e,w,v)}else E=ar._fromJSON(e,v);y!==l&&(f=E),l=y;break}}catch{}const m=a.filter(y=>y._shouldAllowMigration);return!l._shouldAllowMigration||!m.length?new Oo(l,e,i):(l=m[0],f&&await l._set(c,f.toJSON()),await Promise.all(t.map(async y=>{if(y!==l)try{await y._remove(c)}catch{}})),new Oo(l,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mb(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(BT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(LT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(FT(e))return"Blackberry";if(HT(e))return"Webos";if(UT(e))return"Safari";if((e.includes("chrome/")||zT(e))&&!e.includes("edge/"))return"Chrome";if(qT(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function LT(n=cn()){return/firefox\//i.test(n)}function UT(n=cn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function zT(n=cn()){return/crios\//i.test(n)}function BT(n=cn()){return/iemobile/i.test(n)}function qT(n=cn()){return/android/i.test(n)}function FT(n=cn()){return/blackberry/i.test(n)}function HT(n=cn()){return/webos/i.test(n)}function Pg(n=cn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function GN(n=cn()){var e;return Pg(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function $N(){return aC()&&document.documentMode===10}function GT(n=cn()){return Pg(n)||qT(n)||HT(n)||FT(n)||/windows phone/i.test(n)||BT(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $T(n,e=[]){let t;switch(n){case"Browser":t=mb(cn());break;case"Worker":t=`${mb(cn())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Wo}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((c,f)=>{try{const m=e(l);c(m)}catch(m){f(m)}});i.onAbort=t,this.queue.push(i);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KN(n,e={}){return Si(n,"GET","/v2/passwordPolicy",xs(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QN=6;class WN{constructor(e){var t,i,a,l;const c=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=c.minPasswordLength)!==null&&t!==void 0?t:QN,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(a=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&a!==void 0?a:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,a,l,c,f;const m={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,m),this.validatePasswordCharacterOptions(e,m),m.isValid&&(m.isValid=(t=m.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),m.isValid&&(m.isValid=(i=m.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),m.isValid&&(m.isValid=(a=m.containsLowercaseLetter)!==null&&a!==void 0?a:!0),m.isValid&&(m.isValid=(l=m.containsUppercaseLetter)!==null&&l!==void 0?l:!0),m.isValid&&(m.isValid=(c=m.containsNumericCharacter)!==null&&c!==void 0?c:!0),m.isValid&&(m.isValid=(f=m.containsNonAlphanumericCharacter)!==null&&f!==void 0?f:!0),m}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let a=0;a<e.length;a++)i=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XN{constructor(e,t,i,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new pb(this),this.idTokenSubscription=new pb(this),this.beforeStateQueue=new YN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=DT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=mi(t)),this._initializationPromise=this.queue(async()=>{var i,a,l;if(!this._deleted&&(this.persistenceManager=await Oo.create(this,e),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((a=this._popupRedirectResolver)===null||a===void 0)&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)===null||l===void 0?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await ah(this,{idToken:e}),i=await ar._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Wn(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(f,f))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let a=i,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,f=a==null?void 0:a._redirectEventId,m=await this.tryRedirectSignIn(e);(!c||c===f)&&(m!=null&&m.user)&&(a=m.user,l=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(a)}catch(c){a=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return xe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await oh(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=NN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Wn(this.app))return Promise.reject(gi(this));const t=e?Vt(e):null;return t&&xe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&xe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Wn(this.app)?Promise.reject(gi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Wn(this.app)?Promise.reject(gi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(mi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await KN(this),t=new WN(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new $u("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await HN(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&mi(e)||this._popupRedirectResolver;xe(t,this,"argument-error"),this.redirectPersistenceManager=await Oo.create(this,[mi(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,a){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(xe(f,this,"internal-error"),f.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const m=e.addObserver(t,i,a);return()=>{c=!0,m()}}else{const m=e.addObserver(t);return()=>{c=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return xe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=$T(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);const a=await this._getAppCheckToken();return a&&(t["X-Firebase-AppCheck"]=a),t}async _getAppCheckToken(){var e;if(Wn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&SN(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Ra(n){return Vt(n)}class pb{constructor(e){this.auth=e,this.observer=null,this.addObserver=mC(t=>this.observer=t)}get next(){return xe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ph={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ZN(n){Ph=n}function YT(n){return Ph.loadJS(n)}function JN(){return Ph.recaptchaEnterpriseScript}function e2(){return Ph.gapiScript}function t2(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class n2{constructor(){this.enterprise=new r2}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class r2{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const i2="recaptcha-enterprise",KT="NO_RECAPTCHA";class s2{constructor(e){this.type=i2,this.auth=Ra(e)}async verify(e="verify",t=!1){async function i(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(c,f)=>{kN(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(m=>{if(m.recaptchaKey===void 0)f(new Error("recaptcha Enterprise site key undefined"));else{const y=new jN(m);return l.tenantId==null?l._agentRecaptchaConfig=y:l._tenantRecaptchaConfigs[l.tenantId]=y,c(y.siteKey)}}).catch(m=>{f(m)})})}function a(l,c,f){const m=window.grecaptcha;cb(m)?m.enterprise.ready(()=>{m.enterprise.execute(l,{action:e}).then(y=>{c(y)}).catch(()=>{c(KT)})}):f(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new n2().execute("siteKey",{action:"verify"}):new Promise((l,c)=>{i(this.auth).then(f=>{if(!t&&cb(window.grecaptcha))a(f,l,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let m=JN();m.length!==0&&(m+=f),YT(m).then(()=>{a(f,l,c)}).catch(y=>{c(y)})}}).catch(f=>{c(f)})})}}async function gb(n,e,t,i=!1,a=!1){const l=new s2(n);let c;if(a)c=KT;else try{c=await l.verify(t)}catch{c=await l.verify(t,!0)}const f=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in f){const m=f.phoneEnrollmentInfo.phoneNumber,y=f.phoneEnrollmentInfo.recaptchaToken;Object.assign(f,{phoneEnrollmentInfo:{phoneNumber:m,recaptchaToken:y,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in f){const m=f.phoneSignInInfo.recaptchaToken;Object.assign(f,{phoneSignInInfo:{recaptchaToken:m,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return f}return i?Object.assign(f,{captchaResp:c}):Object.assign(f,{captchaResponse:c}),Object.assign(f,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(f,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),f}async function $p(n,e,t,i,a){var l;if(!((l=n._getRecaptchaConfig())===null||l===void 0)&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await gb(n,e,t,t==="getOobCode");return i(n,c)}else return i(n,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await gb(n,e,t,t==="getOobCode");return i(n,f)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a2(n,e){const t=Cg(n,"auth");if(t.isInitialized()){const a=t.getImmediate(),l=t.getOptions();if(_a(l,e??{}))return a;or(a,"already-initialized")}return t.initialize({options:e})}function o2(n,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(mi);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function l2(n,e,t){const i=Ra(n);xe(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const a=!1,l=QT(e),{host:c,port:f}=u2(e),m=f===null?"":`:${f}`,y={url:`${l}//${c}${m}/`},v=Object.freeze({host:c,port:f,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!i._canInitEmulator){xe(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),xe(_a(y,i.config.emulator)&&_a(v,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=y,i.emulatorConfig=v,i.settings.appVerificationDisabledForTesting=!0,Gu(c)?(Oh("Auth",!0),wT(`${l}//${c}${m}`)):c2()}function QT(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function u2(n){const e=QT(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(i);if(a){const l=a[1];return{host:l,port:yb(i.substr(l.length+1))}}else{const[l,c]=i.split(":");return{host:l,port:yb(c)}}}function yb(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function c2(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mg{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return fi("not implemented")}_getIdTokenResponse(e){return fi("not implemented")}_linkToIdToken(e,t){return fi("not implemented")}_getReauthenticationResolver(e){return fi("not implemented")}}async function d2(n,e){return Si(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function h2(n,e){return Qu(n,"POST","/v1/accounts:signInWithPassword",xs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f2(n,e){return Qu(n,"POST","/v1/accounts:signInWithEmailLink",xs(n,e))}async function m2(n,e){return Qu(n,"POST","/v1/accounts:signInWithEmailLink",xs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ou extends Mg{constructor(e,t,i,a=null){super("password",i),this._email=e,this._password=t,this._tenantId=a}static _fromEmailAndPassword(e,t){return new Ou(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new Ou(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return $p(e,t,"signInWithPassword",h2);case"emailLink":return f2(e,{email:this._email,oobCode:this._password});default:or(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return $p(e,i,"signUpPassword",d2);case"emailLink":return m2(e,{idToken:t,email:this._email,oobCode:this._password});default:or(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Po(n,e){return Qu(n,"POST","/v1/accounts:signInWithIdp",xs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p2="http://localhost";class Ea extends Mg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ea(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):or("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:a}=t,l=Ng(t,["providerId","signInMethod"]);if(!i||!a)return null;const c=new Ea(i,a);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return Po(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Po(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Po(e,t)}buildRequest(){const e={requestUri:p2,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Yu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g2(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function y2(n){const e=vu(_u(n)).link,t=e?vu(_u(e)).deep_link_id:null,i=vu(_u(n)).deep_link_id;return(i?vu(_u(i)).link:null)||i||t||e||n}class jg{constructor(e){var t,i,a,l,c,f;const m=vu(_u(e)),y=(t=m.apiKey)!==null&&t!==void 0?t:null,v=(i=m.oobCode)!==null&&i!==void 0?i:null,E=g2((a=m.mode)!==null&&a!==void 0?a:null);xe(y&&v&&E,"argument-error"),this.apiKey=y,this.operation=E,this.code=v,this.continueUrl=(l=m.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(c=m.lang)!==null&&c!==void 0?c:null,this.tenantId=(f=m.tenantId)!==null&&f!==void 0?f:null}static parseLink(e){const t=y2(e);try{return new jg(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(){this.providerId=Xo.PROVIDER_ID}static credential(e,t){return Ou._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=jg.parseLink(t);return xe(i,"argument-error"),Ou._fromEmailAndCode(e,i.code,i.tenantId)}}Xo.PROVIDER_ID="password";Xo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Xo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WT{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wu extends WT{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss extends Wu{constructor(){super("facebook.com")}static credential(e){return Ea._fromParams({providerId:ss.PROVIDER_ID,signInMethod:ss.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ss.credentialFromTaggedObject(e)}static credentialFromError(e){return ss.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ss.credential(e.oauthAccessToken)}catch{return null}}}ss.FACEBOOK_SIGN_IN_METHOD="facebook.com";ss.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as extends Wu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ea._fromParams({providerId:as.PROVIDER_ID,signInMethod:as.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return as.credentialFromTaggedObject(e)}static credentialFromError(e){return as.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return as.credential(t,i)}catch{return null}}}as.GOOGLE_SIGN_IN_METHOD="google.com";as.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os extends Wu{constructor(){super("github.com")}static credential(e){return Ea._fromParams({providerId:os.PROVIDER_ID,signInMethod:os.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return os.credentialFromTaggedObject(e)}static credentialFromError(e){return os.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return os.credential(e.oauthAccessToken)}catch{return null}}}os.GITHUB_SIGN_IN_METHOD="github.com";os.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls extends Wu{constructor(){super("twitter.com")}static credential(e,t){return Ea._fromParams({providerId:ls.PROVIDER_ID,signInMethod:ls.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ls.credentialFromTaggedObject(e)}static credentialFromError(e){return ls.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return ls.credential(t,i)}catch{return null}}}ls.TWITTER_SIGN_IN_METHOD="twitter.com";ls.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function v2(n,e){return Qu(n,"POST","/v1/accounts:signUp",xs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,a=!1){const l=await ar._fromIdTokenResponse(e,i,a),c=vb(i);return new Ta({user:l,providerId:c,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const a=vb(i);return new Ta({user:e,providerId:a,_tokenResponse:i,operationType:t})}}function vb(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lh extends Ai{constructor(e,t,i,a){var l;super(t.code,t.message),this.operationType=i,this.user=a,Object.setPrototypeOf(this,lh.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,a){return new lh(e,t,i,a)}}function XT(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?lh._fromErrorAndOperation(n,l,e,i):l})}async function _2(n,e,t=!1){const i=await Lo(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Ta._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function b2(n,e,t=!1){const{auth:i}=n;if(Wn(i.app))return Promise.reject(gi(i));const a="reauthenticate";try{const l=await Lo(n,XT(i,a,e,n),t);xe(l.idToken,i,"internal-error");const c=Og(l.idToken);xe(c,i,"internal-error");const{sub:f}=c;return xe(n.uid===f,i,"user-mismatch"),Ta._forOperation(n,a,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&or(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZT(n,e,t=!1){if(Wn(n.app))return Promise.reject(gi(n));const i="signIn",a=await XT(n,i,e),l=await Ta._fromIdTokenResponse(n,i,a);return t||await n._updateCurrentUser(l.user),l}async function E2(n,e){return ZT(Ra(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JT(n){const e=Ra(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function T2(n,e,t){if(Wn(n.app))return Promise.reject(gi(n));const i=Ra(n),c=await $p(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",v2).catch(m=>{throw m.code==="auth/password-does-not-meet-requirements"&&JT(n),m}),f=await Ta._fromIdTokenResponse(i,"signIn",c);return await i._updateCurrentUser(f.user),f}function w2(n,e,t){return Wn(n.app)?Promise.reject(gi(n)):E2(Vt(n),Xo.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&JT(n),i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x2(n,e){return Si(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A2(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const i=Vt(n),l={idToken:await i.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},c=await Lo(i,x2(i.auth,l));i.displayName=c.displayName||null,i.photoURL=c.photoUrl||null;const f=i.providerData.find(({providerId:m})=>m==="password");f&&(f.displayName=i.displayName,f.photoURL=i.photoURL),await i._updateTokensIfNecessary(c)}function S2(n,e,t,i){return Vt(n).onIdTokenChanged(e,t,i)}function R2(n,e,t){return Vt(n).beforeAuthStateChanged(e,t)}function C2(n,e,t,i){return Vt(n).onAuthStateChanged(e,t,i)}function N2(n){return Vt(n).signOut()}const uh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e1{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(uh,"1"),this.storage.removeItem(uh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I2=1e3,D2=10;class t1 extends e1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=GT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),a=this.localCache[t];i!==a&&e(t,a,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,f,m)=>{this.notifyListeners(c,m)});return}const i=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(i);!t&&this.localCache[i]===c||this.notifyListeners(i,c)},l=this.storage.getItem(i);$N()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,D2):a()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},I2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}t1.type="LOCAL";const O2=t1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n1 extends e1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}n1.type="SESSION";const r1=n1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P2(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const i=new Mh(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:a,data:l}=t.data,c=this.handlersMap[a];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:a});const f=Array.from(c).map(async y=>y(t.origin,l)),m=await P2(f);t.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:m})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Mh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kg(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M2{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,c;return new Promise((f,m)=>{const y=kg("",20);a.port1.start();const v=setTimeout(()=>{m(new Error("unsupported_event"))},i);c={messageChannel:a,onMessage(E){const w=E;if(w.data.eventId===y)switch(w.data.status){case"ack":clearTimeout(v),l=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),f(w.data.response);break;default:clearTimeout(v),clearTimeout(l),m(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:y,data:t},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jr(){return window}function j2(n){jr().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i1(){return typeof jr().WorkerGlobalScope<"u"&&typeof jr().importScripts=="function"}async function k2(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function V2(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function L2(){return i1()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s1="firebaseLocalStorageDb",U2=1,ch="firebaseLocalStorage",a1="fbase_key";class Xu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function jh(n,e){return n.transaction([ch],e?"readwrite":"readonly").objectStore(ch)}function z2(){const n=indexedDB.deleteDatabase(s1);return new Xu(n).toPromise()}function Yp(){const n=indexedDB.open(s1,U2);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(ch,{keyPath:a1})}catch(a){t(a)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(ch)?e(i):(i.close(),await z2(),e(await Yp()))})})}async function _b(n,e,t){const i=jh(n,!0).put({[a1]:e,value:t});return new Xu(i).toPromise()}async function B2(n,e){const t=jh(n,!1).get(e),i=await new Xu(t).toPromise();return i===void 0?null:i.value}function bb(n,e){const t=jh(n,!0).delete(e);return new Xu(t).toPromise()}const q2=800,F2=3;class o1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Yp(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>F2)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return i1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Mh._getInstance(L2()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await k2(),!this.activeServiceWorker)return;this.sender=new M2(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((t=i[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||V2()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Yp();return await _b(e,uh,"1"),await bb(e,uh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>_b(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>B2(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>bb(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=jh(a,!1).getAll();return new Xu(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)i.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!i.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),q2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}o1.type="LOCAL";const H2=o1;new Ku(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G2(n,e){return e?mi(e):(xe(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vg extends Mg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Po(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Po(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Po(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function $2(n){return ZT(n.auth,new Vg(n),n.bypassAuthState)}function Y2(n){const{auth:e,user:t}=n;return xe(t,e,"internal-error"),b2(t,new Vg(n),n.bypassAuthState)}async function K2(n){const{auth:e,user:t}=n;return xe(t,e,"internal-error"),_2(t,new Vg(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l1{constructor(e,t,i,a,l=!1){this.auth=e,this.resolver=i,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:a,tenantId:l,error:c,type:f}=e;if(c){this.reject(c);return}const m={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(m))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return $2;case"linkViaPopup":case"linkViaRedirect":return K2;case"reauthViaPopup":case"reauthViaRedirect":return Y2;default:or(this.auth,"internal-error")}}resolve(e){Ei(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ei(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q2=new Ku(2e3,1e4);class Io extends l1{constructor(e,t,i,a,l){super(e,t,a,l),this.provider=i,this.authWindow=null,this.pollId=null,Io.currentPopupAction&&Io.currentPopupAction.cancel(),Io.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return xe(e,this.auth,"internal-error"),e}async onExecution(){Ei(this.filter.length===1,"Popup operations only handle one event");const e=kg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Mr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Mr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Io.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if(!((i=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Mr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Q2.get())};e()}}Io.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W2="pendingRedirect",Fd=new Map;class X2 extends l1{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Fd.get(this.auth._key());if(!e){try{const i=await Z2(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Fd.set(this.auth._key(),e)}return this.bypassAuthState||Fd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Z2(n,e){const t=tI(e),i=eI(n);if(!await i._isAvailable())return!1;const a=await i._get(t)==="true";return await i._remove(t),a}function J2(n,e){Fd.set(n._key(),e)}function eI(n){return mi(n._redirectPersistence)}function tI(n){return qd(W2,n.config.apiKey,n.name)}async function nI(n,e,t=!1){if(Wn(n.app))return Promise.reject(gi(n));const i=Ra(n),a=G2(i,e),c=await new X2(i,a,t).execute();return c&&!t&&(delete c.user._redirectEventId,await i._persistUserIfCurrent(c.user),await i._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rI=10*60*1e3;class iI{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!sI(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!u1(e)){const a=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(Mr(this.auth,a))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=rI&&this.cachedEventUids.clear(),this.cachedEventUids.has(Eb(e))}saveEventToCache(e){this.cachedEventUids.add(Eb(e)),this.lastProcessedEventTime=Date.now()}}function Eb(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function u1({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function sI(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return u1(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aI(n,e={}){return Si(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oI=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,lI=/^https?/;async function uI(n){if(n.config.emulator)return;const{authorizedDomains:e}=await aI(n);for(const t of e)try{if(cI(t))return}catch{}or(n,"unauthorized-domain")}function cI(n){const e=Hp(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===i}if(!lI.test(t))return!1;if(oI.test(n))return i===n;const a=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dI=new Ku(3e4,6e4);function Tb(){const n=jr().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function hI(n){return new Promise((e,t)=>{var i,a,l;function c(){Tb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Tb(),t(Mr(n,"network-request-failed"))},timeout:dI.get()})}if(!((a=(i=jr().gapi)===null||i===void 0?void 0:i.iframes)===null||a===void 0)&&a.Iframe)e(gapi.iframes.getContext());else if(!((l=jr().gapi)===null||l===void 0)&&l.load)c();else{const f=t2("iframefcb");return jr()[f]=()=>{gapi.load?c():t(Mr(n,"network-request-failed"))},YT(`${e2()}?onload=${f}`).catch(m=>t(m))}}).catch(e=>{throw Hd=null,e})}let Hd=null;function fI(n){return Hd=Hd||hI(n),Hd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mI=new Ku(5e3,15e3),pI="__/auth/iframe",gI="emulator/auth/iframe",yI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},vI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function _I(n){const e=n.config;xe(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Dg(e,gI):`https://${n.config.authDomain}/${pI}`,i={apiKey:e.apiKey,appName:n.name,v:Wo},a=vI.get(n.config.apiHost);a&&(i.eid=a);const l=n._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${Yu(i).slice(1)}`}async function bI(n){const e=await fI(n),t=jr().gapi;return xe(t,n,"internal-error"),e.open({where:document.body,url:_I(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:yI,dontclear:!0},i=>new Promise(async(a,l)=>{await i.restyle({setHideOnLeave:!1});const c=Mr(n,"network-request-failed"),f=jr().setTimeout(()=>{l(c)},mI.get());function m(){jr().clearTimeout(f),a(i)}i.ping(m).then(m,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},TI=500,wI=600,xI="_blank",AI="http://localhost";class wb{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function SI(n,e,t,i=TI,a=wI){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-i)/2,0).toString();let f="";const m=Object.assign(Object.assign({},EI),{width:i.toString(),height:a.toString(),top:l,left:c}),y=cn().toLowerCase();t&&(f=zT(y)?xI:t),LT(y)&&(e=e||AI,m.scrollbars="yes");const v=Object.entries(m).reduce((w,[R,S])=>`${w}${R}=${S},`,"");if(GN(y)&&f!=="_self")return RI(e||"",f),new wb(null);const E=window.open(e||"",f,v);xe(E,n,"popup-blocked");try{E.focus()}catch{}return new wb(E)}function RI(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CI="__/auth/handler",NI="emulator/auth/handler",II=encodeURIComponent("fac");async function xb(n,e,t,i,a,l){xe(n.config.authDomain,n,"auth-domain-config-required"),xe(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:Wo,eventId:a};if(e instanceof WT){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",fC(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,E]of Object.entries({}))c[v]=E}if(e instanceof Wu){const v=e.getScopes().filter(E=>E!=="");v.length>0&&(c.scopes=v.join(","))}n.tenantId&&(c.tid=n.tenantId);const f=c;for(const v of Object.keys(f))f[v]===void 0&&delete f[v];const m=await n._getAppCheckToken(),y=m?`#${II}=${encodeURIComponent(m)}`:"";return`${DI(n)}?${Yu(f).slice(1)}${y}`}function DI({config:n}){return n.emulator?Dg(n,NI):`https://${n.authDomain}/${CI}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rp="webStorageSupport";class OI{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=r1,this._completeRedirectFn=nI,this._overrideRedirectResult=J2}async _openPopup(e,t,i,a){var l;Ei((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const c=await xb(e,t,i,Hp(),a);return SI(e,c,kg())}async _openRedirect(e,t,i,a){await this._originValidation(e);const l=await xb(e,t,i,Hp(),a);return j2(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:l}=this.eventManagers[t];return a?Promise.resolve(a):(Ei(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await bI(e),i=new iI(e);return t.register("authEvent",a=>(xe(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:i.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Rp,{type:Rp},a=>{var l;const c=(l=a==null?void 0:a[0])===null||l===void 0?void 0:l[Rp];c!==void 0&&t(!!c),or(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=uI(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return GT()||UT()||Pg()}}const PI=OI;var Ab="@firebase/auth",Sb="1.10.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MI{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){xe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jI(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function kI(n){Vo(new ba("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:f}=i.options;xe(c&&!c.includes(":"),"invalid-api-key",{appName:i.name});const m={apiKey:c,authDomain:f,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:$T(n)},y=new XN(i,a,l,m);return o2(y,t),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Vo(new ba("auth-internal",e=>{const t=Ra(e.getProvider("auth").getImmediate());return(i=>new MI(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),hs(Ab,Sb,jI(n)),hs(Ab,Sb,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VI=5*60,LI=TT("authIdTokenMaxAge")||VI;let Rb=null;const UI=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>LI)return;const a=t==null?void 0:t.token;Rb!==a&&(Rb=a,await fetch(n,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function zI(n=RT()){const e=Cg(n,"auth");if(e.isInitialized())return e.getImmediate();const t=a2(n,{popupRedirectResolver:PI,persistence:[H2,O2,r1]}),i=TT("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const c=UI(l.toString());R2(t,c,()=>c(t.currentUser)),S2(t,f=>c(f))}}const a=bT("auth");return a?l2(t,`http://${a}`):Oh("Auth",!1),t}function BI(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}ZN({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=a=>{const l=Mr("internal-error");l.customData=a,t(l)},i.type="text/javascript",i.charset="UTF-8",BI().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});kI("Browser");var qI="firebase",FI="11.7.3";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */hs(qI,FI,"app");var Cb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var fs,c1;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(M,C){function N(){}N.prototype=C.prototype,M.D=C.prototype,M.prototype=new N,M.prototype.constructor=M,M.C=function(P,L,B){for(var D=Array(arguments.length-2),_t=2;_t<arguments.length;_t++)D[_t-2]=arguments[_t];return C.prototype[L].apply(P,D)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(M,C,N){N||(N=0);var P=Array(16);if(typeof C=="string")for(var L=0;16>L;++L)P[L]=C.charCodeAt(N++)|C.charCodeAt(N++)<<8|C.charCodeAt(N++)<<16|C.charCodeAt(N++)<<24;else for(L=0;16>L;++L)P[L]=C[N++]|C[N++]<<8|C[N++]<<16|C[N++]<<24;C=M.g[0],N=M.g[1],L=M.g[2];var B=M.g[3],D=C+(B^N&(L^B))+P[0]+3614090360&4294967295;C=N+(D<<7&4294967295|D>>>25),D=B+(L^C&(N^L))+P[1]+3905402710&4294967295,B=C+(D<<12&4294967295|D>>>20),D=L+(N^B&(C^N))+P[2]+606105819&4294967295,L=B+(D<<17&4294967295|D>>>15),D=N+(C^L&(B^C))+P[3]+3250441966&4294967295,N=L+(D<<22&4294967295|D>>>10),D=C+(B^N&(L^B))+P[4]+4118548399&4294967295,C=N+(D<<7&4294967295|D>>>25),D=B+(L^C&(N^L))+P[5]+1200080426&4294967295,B=C+(D<<12&4294967295|D>>>20),D=L+(N^B&(C^N))+P[6]+2821735955&4294967295,L=B+(D<<17&4294967295|D>>>15),D=N+(C^L&(B^C))+P[7]+4249261313&4294967295,N=L+(D<<22&4294967295|D>>>10),D=C+(B^N&(L^B))+P[8]+1770035416&4294967295,C=N+(D<<7&4294967295|D>>>25),D=B+(L^C&(N^L))+P[9]+2336552879&4294967295,B=C+(D<<12&4294967295|D>>>20),D=L+(N^B&(C^N))+P[10]+4294925233&4294967295,L=B+(D<<17&4294967295|D>>>15),D=N+(C^L&(B^C))+P[11]+2304563134&4294967295,N=L+(D<<22&4294967295|D>>>10),D=C+(B^N&(L^B))+P[12]+1804603682&4294967295,C=N+(D<<7&4294967295|D>>>25),D=B+(L^C&(N^L))+P[13]+4254626195&4294967295,B=C+(D<<12&4294967295|D>>>20),D=L+(N^B&(C^N))+P[14]+2792965006&4294967295,L=B+(D<<17&4294967295|D>>>15),D=N+(C^L&(B^C))+P[15]+1236535329&4294967295,N=L+(D<<22&4294967295|D>>>10),D=C+(L^B&(N^L))+P[1]+4129170786&4294967295,C=N+(D<<5&4294967295|D>>>27),D=B+(N^L&(C^N))+P[6]+3225465664&4294967295,B=C+(D<<9&4294967295|D>>>23),D=L+(C^N&(B^C))+P[11]+643717713&4294967295,L=B+(D<<14&4294967295|D>>>18),D=N+(B^C&(L^B))+P[0]+3921069994&4294967295,N=L+(D<<20&4294967295|D>>>12),D=C+(L^B&(N^L))+P[5]+3593408605&4294967295,C=N+(D<<5&4294967295|D>>>27),D=B+(N^L&(C^N))+P[10]+38016083&4294967295,B=C+(D<<9&4294967295|D>>>23),D=L+(C^N&(B^C))+P[15]+3634488961&4294967295,L=B+(D<<14&4294967295|D>>>18),D=N+(B^C&(L^B))+P[4]+3889429448&4294967295,N=L+(D<<20&4294967295|D>>>12),D=C+(L^B&(N^L))+P[9]+568446438&4294967295,C=N+(D<<5&4294967295|D>>>27),D=B+(N^L&(C^N))+P[14]+3275163606&4294967295,B=C+(D<<9&4294967295|D>>>23),D=L+(C^N&(B^C))+P[3]+4107603335&4294967295,L=B+(D<<14&4294967295|D>>>18),D=N+(B^C&(L^B))+P[8]+1163531501&4294967295,N=L+(D<<20&4294967295|D>>>12),D=C+(L^B&(N^L))+P[13]+2850285829&4294967295,C=N+(D<<5&4294967295|D>>>27),D=B+(N^L&(C^N))+P[2]+4243563512&4294967295,B=C+(D<<9&4294967295|D>>>23),D=L+(C^N&(B^C))+P[7]+1735328473&4294967295,L=B+(D<<14&4294967295|D>>>18),D=N+(B^C&(L^B))+P[12]+2368359562&4294967295,N=L+(D<<20&4294967295|D>>>12),D=C+(N^L^B)+P[5]+4294588738&4294967295,C=N+(D<<4&4294967295|D>>>28),D=B+(C^N^L)+P[8]+2272392833&4294967295,B=C+(D<<11&4294967295|D>>>21),D=L+(B^C^N)+P[11]+1839030562&4294967295,L=B+(D<<16&4294967295|D>>>16),D=N+(L^B^C)+P[14]+4259657740&4294967295,N=L+(D<<23&4294967295|D>>>9),D=C+(N^L^B)+P[1]+2763975236&4294967295,C=N+(D<<4&4294967295|D>>>28),D=B+(C^N^L)+P[4]+1272893353&4294967295,B=C+(D<<11&4294967295|D>>>21),D=L+(B^C^N)+P[7]+4139469664&4294967295,L=B+(D<<16&4294967295|D>>>16),D=N+(L^B^C)+P[10]+3200236656&4294967295,N=L+(D<<23&4294967295|D>>>9),D=C+(N^L^B)+P[13]+681279174&4294967295,C=N+(D<<4&4294967295|D>>>28),D=B+(C^N^L)+P[0]+3936430074&4294967295,B=C+(D<<11&4294967295|D>>>21),D=L+(B^C^N)+P[3]+3572445317&4294967295,L=B+(D<<16&4294967295|D>>>16),D=N+(L^B^C)+P[6]+76029189&4294967295,N=L+(D<<23&4294967295|D>>>9),D=C+(N^L^B)+P[9]+3654602809&4294967295,C=N+(D<<4&4294967295|D>>>28),D=B+(C^N^L)+P[12]+3873151461&4294967295,B=C+(D<<11&4294967295|D>>>21),D=L+(B^C^N)+P[15]+530742520&4294967295,L=B+(D<<16&4294967295|D>>>16),D=N+(L^B^C)+P[2]+3299628645&4294967295,N=L+(D<<23&4294967295|D>>>9),D=C+(L^(N|~B))+P[0]+4096336452&4294967295,C=N+(D<<6&4294967295|D>>>26),D=B+(N^(C|~L))+P[7]+1126891415&4294967295,B=C+(D<<10&4294967295|D>>>22),D=L+(C^(B|~N))+P[14]+2878612391&4294967295,L=B+(D<<15&4294967295|D>>>17),D=N+(B^(L|~C))+P[5]+4237533241&4294967295,N=L+(D<<21&4294967295|D>>>11),D=C+(L^(N|~B))+P[12]+1700485571&4294967295,C=N+(D<<6&4294967295|D>>>26),D=B+(N^(C|~L))+P[3]+2399980690&4294967295,B=C+(D<<10&4294967295|D>>>22),D=L+(C^(B|~N))+P[10]+4293915773&4294967295,L=B+(D<<15&4294967295|D>>>17),D=N+(B^(L|~C))+P[1]+2240044497&4294967295,N=L+(D<<21&4294967295|D>>>11),D=C+(L^(N|~B))+P[8]+1873313359&4294967295,C=N+(D<<6&4294967295|D>>>26),D=B+(N^(C|~L))+P[15]+4264355552&4294967295,B=C+(D<<10&4294967295|D>>>22),D=L+(C^(B|~N))+P[6]+2734768916&4294967295,L=B+(D<<15&4294967295|D>>>17),D=N+(B^(L|~C))+P[13]+1309151649&4294967295,N=L+(D<<21&4294967295|D>>>11),D=C+(L^(N|~B))+P[4]+4149444226&4294967295,C=N+(D<<6&4294967295|D>>>26),D=B+(N^(C|~L))+P[11]+3174756917&4294967295,B=C+(D<<10&4294967295|D>>>22),D=L+(C^(B|~N))+P[2]+718787259&4294967295,L=B+(D<<15&4294967295|D>>>17),D=N+(B^(L|~C))+P[9]+3951481745&4294967295,M.g[0]=M.g[0]+C&4294967295,M.g[1]=M.g[1]+(L+(D<<21&4294967295|D>>>11))&4294967295,M.g[2]=M.g[2]+L&4294967295,M.g[3]=M.g[3]+B&4294967295}i.prototype.u=function(M,C){C===void 0&&(C=M.length);for(var N=C-this.blockSize,P=this.B,L=this.h,B=0;B<C;){if(L==0)for(;B<=N;)a(this,M,B),B+=this.blockSize;if(typeof M=="string"){for(;B<C;)if(P[L++]=M.charCodeAt(B++),L==this.blockSize){a(this,P),L=0;break}}else for(;B<C;)if(P[L++]=M[B++],L==this.blockSize){a(this,P),L=0;break}}this.h=L,this.o+=C},i.prototype.v=function(){var M=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);M[0]=128;for(var C=1;C<M.length-8;++C)M[C]=0;var N=8*this.o;for(C=M.length-8;C<M.length;++C)M[C]=N&255,N/=256;for(this.u(M),M=Array(16),C=N=0;4>C;++C)for(var P=0;32>P;P+=8)M[N++]=this.g[C]>>>P&255;return M};function l(M,C){var N=f;return Object.prototype.hasOwnProperty.call(N,M)?N[M]:N[M]=C(M)}function c(M,C){this.h=C;for(var N=[],P=!0,L=M.length-1;0<=L;L--){var B=M[L]|0;P&&B==C||(N[L]=B,P=!1)}this.g=N}var f={};function m(M){return-128<=M&&128>M?l(M,function(C){return new c([C|0],0>C?-1:0)}):new c([M|0],0>M?-1:0)}function y(M){if(isNaN(M)||!isFinite(M))return E;if(0>M)return O(y(-M));for(var C=[],N=1,P=0;M>=N;P++)C[P]=M/N|0,N*=4294967296;return new c(C,0)}function v(M,C){if(M.length==0)throw Error("number format error: empty string");if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(M.charAt(0)=="-")return O(v(M.substring(1),C));if(0<=M.indexOf("-"))throw Error('number format error: interior "-" character');for(var N=y(Math.pow(C,8)),P=E,L=0;L<M.length;L+=8){var B=Math.min(8,M.length-L),D=parseInt(M.substring(L,L+B),C);8>B?(B=y(Math.pow(C,B)),P=P.j(B).add(y(D))):(P=P.j(N),P=P.add(y(D)))}return P}var E=m(0),w=m(1),R=m(16777216);n=c.prototype,n.m=function(){if(U(this))return-O(this).m();for(var M=0,C=1,N=0;N<this.g.length;N++){var P=this.i(N);M+=(0<=P?P:4294967296+P)*C,C*=4294967296}return M},n.toString=function(M){if(M=M||10,2>M||36<M)throw Error("radix out of range: "+M);if(S(this))return"0";if(U(this))return"-"+O(this).toString(M);for(var C=y(Math.pow(M,6)),N=this,P="";;){var L=ue(N,C).g;N=Y(N,L.j(C));var B=((0<N.g.length?N.g[0]:N.h)>>>0).toString(M);if(N=L,S(N))return B+P;for(;6>B.length;)B="0"+B;P=B+P}},n.i=function(M){return 0>M?0:M<this.g.length?this.g[M]:this.h};function S(M){if(M.h!=0)return!1;for(var C=0;C<M.g.length;C++)if(M.g[C]!=0)return!1;return!0}function U(M){return M.h==-1}n.l=function(M){return M=Y(this,M),U(M)?-1:S(M)?0:1};function O(M){for(var C=M.g.length,N=[],P=0;P<C;P++)N[P]=~M.g[P];return new c(N,~M.h).add(w)}n.abs=function(){return U(this)?O(this):this},n.add=function(M){for(var C=Math.max(this.g.length,M.g.length),N=[],P=0,L=0;L<=C;L++){var B=P+(this.i(L)&65535)+(M.i(L)&65535),D=(B>>>16)+(this.i(L)>>>16)+(M.i(L)>>>16);P=D>>>16,B&=65535,D&=65535,N[L]=D<<16|B}return new c(N,N[N.length-1]&-2147483648?-1:0)};function Y(M,C){return M.add(O(C))}n.j=function(M){if(S(this)||S(M))return E;if(U(this))return U(M)?O(this).j(O(M)):O(O(this).j(M));if(U(M))return O(this.j(O(M)));if(0>this.l(R)&&0>M.l(R))return y(this.m()*M.m());for(var C=this.g.length+M.g.length,N=[],P=0;P<2*C;P++)N[P]=0;for(P=0;P<this.g.length;P++)for(var L=0;L<M.g.length;L++){var B=this.i(P)>>>16,D=this.i(P)&65535,_t=M.i(L)>>>16,st=M.i(L)&65535;N[2*P+2*L]+=D*st,Q(N,2*P+2*L),N[2*P+2*L+1]+=B*st,Q(N,2*P+2*L+1),N[2*P+2*L+1]+=D*_t,Q(N,2*P+2*L+1),N[2*P+2*L+2]+=B*_t,Q(N,2*P+2*L+2)}for(P=0;P<C;P++)N[P]=N[2*P+1]<<16|N[2*P];for(P=C;P<2*C;P++)N[P]=0;return new c(N,0)};function Q(M,C){for(;(M[C]&65535)!=M[C];)M[C+1]+=M[C]>>>16,M[C]&=65535,C++}function z(M,C){this.g=M,this.h=C}function ue(M,C){if(S(C))throw Error("division by zero");if(S(M))return new z(E,E);if(U(M))return C=ue(O(M),C),new z(O(C.g),O(C.h));if(U(C))return C=ue(M,O(C)),new z(O(C.g),C.h);if(30<M.g.length){if(U(M)||U(C))throw Error("slowDivide_ only works with positive integers.");for(var N=w,P=C;0>=P.l(M);)N=le(N),P=le(P);var L=ye(N,1),B=ye(P,1);for(P=ye(P,2),N=ye(N,2);!S(P);){var D=B.add(P);0>=D.l(M)&&(L=L.add(N),B=D),P=ye(P,1),N=ye(N,1)}return C=Y(M,L.j(C)),new z(L,C)}for(L=E;0<=M.l(C);){for(N=Math.max(1,Math.floor(M.m()/C.m())),P=Math.ceil(Math.log(N)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),B=y(N),D=B.j(C);U(D)||0<D.l(M);)N-=P,B=y(N),D=B.j(C);S(B)&&(B=w),L=L.add(B),M=Y(M,D)}return new z(L,M)}n.A=function(M){return ue(this,M).h},n.and=function(M){for(var C=Math.max(this.g.length,M.g.length),N=[],P=0;P<C;P++)N[P]=this.i(P)&M.i(P);return new c(N,this.h&M.h)},n.or=function(M){for(var C=Math.max(this.g.length,M.g.length),N=[],P=0;P<C;P++)N[P]=this.i(P)|M.i(P);return new c(N,this.h|M.h)},n.xor=function(M){for(var C=Math.max(this.g.length,M.g.length),N=[],P=0;P<C;P++)N[P]=this.i(P)^M.i(P);return new c(N,this.h^M.h)};function le(M){for(var C=M.g.length+1,N=[],P=0;P<C;P++)N[P]=M.i(P)<<1|M.i(P-1)>>>31;return new c(N,M.h)}function ye(M,C){var N=C>>5;C%=32;for(var P=M.g.length-N,L=[],B=0;B<P;B++)L[B]=0<C?M.i(B+N)>>>C|M.i(B+N+1)<<32-C:M.i(B+N);return new c(L,M.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,c1=i,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=y,c.fromString=v,fs=c}).apply(typeof Cb<"u"?Cb:typeof self<"u"?self:typeof window<"u"?window:{});var Pd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var d1,bu,h1,Gd,Kp,f1,m1,p1;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,_,b){return d==Array.prototype||d==Object.prototype||(d[_]=b.value),d};function t(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof Pd=="object"&&Pd];for(var _=0;_<d.length;++_){var b=d[_];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var i=t(this);function a(d,_){if(_)e:{var b=i;d=d.split(".");for(var A=0;A<d.length-1;A++){var F=d[A];if(!(F in b))break e;b=b[F]}d=d[d.length-1],A=b[d],_=_(A),_!=A&&_!=null&&e(b,d,{configurable:!0,writable:!0,value:_})}}function l(d,_){d instanceof String&&(d+="");var b=0,A=!1,F={next:function(){if(!A&&b<d.length){var X=b++;return{value:_(X,d[X]),done:!1}}return A=!0,{done:!0,value:void 0}}};return F[Symbol.iterator]=function(){return F},F}a("Array.prototype.values",function(d){return d||function(){return l(this,function(_,b){return b})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},f=this||self;function m(d){var _=typeof d;return _=_!="object"?_:d?Array.isArray(d)?"array":_:"null",_=="array"||_=="object"&&typeof d.length=="number"}function y(d){var _=typeof d;return _=="object"&&d!=null||_=="function"}function v(d,_,b){return d.call.apply(d.bind,arguments)}function E(d,_,b){if(!d)throw Error();if(2<arguments.length){var A=Array.prototype.slice.call(arguments,2);return function(){var F=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(F,A),d.apply(_,F)}}return function(){return d.apply(_,arguments)}}function w(d,_,b){return w=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?v:E,w.apply(null,arguments)}function R(d,_){var b=Array.prototype.slice.call(arguments,1);return function(){var A=b.slice();return A.push.apply(A,arguments),d.apply(this,A)}}function S(d,_){function b(){}b.prototype=_.prototype,d.aa=_.prototype,d.prototype=new b,d.prototype.constructor=d,d.Qb=function(A,F,X){for(var de=Array(arguments.length-2),ze=2;ze<arguments.length;ze++)de[ze-2]=arguments[ze];return _.prototype[F].apply(A,de)}}function U(d){const _=d.length;if(0<_){const b=Array(_);for(let A=0;A<_;A++)b[A]=d[A];return b}return[]}function O(d,_){for(let b=1;b<arguments.length;b++){const A=arguments[b];if(m(A)){const F=d.length||0,X=A.length||0;d.length=F+X;for(let de=0;de<X;de++)d[F+de]=A[de]}else d.push(A)}}class Y{constructor(_,b){this.i=_,this.j=b,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function Q(d){return/^[\s\xa0]*$/.test(d)}function z(){var d=f.navigator;return d&&(d=d.userAgent)?d:""}function ue(d){return ue[" "](d),d}ue[" "]=function(){};var le=z().indexOf("Gecko")!=-1&&!(z().toLowerCase().indexOf("webkit")!=-1&&z().indexOf("Edge")==-1)&&!(z().indexOf("Trident")!=-1||z().indexOf("MSIE")!=-1)&&z().indexOf("Edge")==-1;function ye(d,_,b){for(const A in d)_.call(b,d[A],A,d)}function M(d,_){for(const b in d)_.call(void 0,d[b],b,d)}function C(d){const _={};for(const b in d)_[b]=d[b];return _}const N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(d,_){let b,A;for(let F=1;F<arguments.length;F++){A=arguments[F];for(b in A)d[b]=A[b];for(let X=0;X<N.length;X++)b=N[X],Object.prototype.hasOwnProperty.call(A,b)&&(d[b]=A[b])}}function L(d){var _=1;d=d.split(":");const b=[];for(;0<_&&d.length;)b.push(d.shift()),_--;return d.length&&b.push(d.join(":")),b}function B(d){f.setTimeout(()=>{throw d},0)}function D(){var d=je;let _=null;return d.g&&(_=d.g,d.g=d.g.next,d.g||(d.h=null),_.next=null),_}class _t{constructor(){this.h=this.g=null}add(_,b){const A=st.get();A.set(_,b),this.h?this.h.next=A:this.g=A,this.h=A}}var st=new Y(()=>new J,d=>d.reset());class J{constructor(){this.next=this.g=this.h=null}set(_,b){this.h=_,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let he,ve=!1,je=new _t,j=()=>{const d=f.Promise.resolve(void 0);he=()=>{d.then(oe)}};var oe=()=>{for(var d;d=D();){try{d.h.call(d.g)}catch(b){B(b)}var _=st;_.j(d),100>_.h&&(_.h++,d.next=_.g,_.g=d)}ve=!1};function fe(){this.s=this.s,this.C=this.C}fe.prototype.s=!1,fe.prototype.ma=function(){this.s||(this.s=!0,this.N())},fe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ce(d,_){this.type=d,this.g=this.target=_,this.defaultPrevented=!1}ce.prototype.h=function(){this.defaultPrevented=!0};var ee=function(){if(!f.addEventListener||!Object.defineProperty)return!1;var d=!1,_=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const b=()=>{};f.addEventListener("test",b,_),f.removeEventListener("test",b,_)}catch{}return d}();function ne(d,_){if(ce.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var b=this.type=d.type,A=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=_,_=d.relatedTarget){if(le){e:{try{ue(_.nodeName);var F=!0;break e}catch{}F=!1}F||(_=null)}}else b=="mouseover"?_=d.fromElement:b=="mouseout"&&(_=d.toElement);this.relatedTarget=_,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:W[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&ne.aa.h.call(this)}}S(ne,ce);var W={2:"touch",3:"pen",4:"mouse"};ne.prototype.h=function(){ne.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var _e="closure_listenable_"+(1e6*Math.random()|0),Ge=0;function fr(d,_,b,A,F){this.listener=d,this.proxy=null,this.src=_,this.type=b,this.capture=!!A,this.ha=F,this.key=++Ge,this.da=this.fa=!1}function Ci(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function Br(d){this.src=d,this.g={},this.h=0}Br.prototype.add=function(d,_,b,A,F){var X=d.toString();d=this.g[X],d||(d=this.g[X]=[],this.h++);var de=Is(d,_,A,F);return-1<de?(_=d[de],b||(_.fa=!1)):(_=new fr(_,this.src,X,!!A,F),_.fa=b,d.push(_)),_};function Ns(d,_){var b=_.type;if(b in d.g){var A=d.g[b],F=Array.prototype.indexOf.call(A,_,void 0),X;(X=0<=F)&&Array.prototype.splice.call(A,F,1),X&&(Ci(_),d.g[b].length==0&&(delete d.g[b],d.h--))}}function Is(d,_,b,A){for(var F=0;F<d.length;++F){var X=d[F];if(!X.da&&X.listener==_&&X.capture==!!b&&X.ha==A)return F}return-1}var Ds="closure_lm_"+(1e6*Math.random()|0),sl={};function oc(d,_,b,A,F){if(Array.isArray(_)){for(var X=0;X<_.length;X++)oc(d,_[X],b,A,F);return null}return b=lc(b),d&&d[_e]?d.K(_,b,y(A)?!!A.capture:!1,F):Vn(d,_,b,!1,A,F)}function Vn(d,_,b,A,F,X){if(!_)throw Error("Invalid event type");var de=y(F)?!!F.capture:!!F,ze=Oa(d);if(ze||(d[Ds]=ze=new Br(d)),b=ze.add(_,b,A,de,X),b.proxy)return b;if(A=ff(),b.proxy=A,A.src=d,A.listener=b,d.addEventListener)ee||(F=de),F===void 0&&(F=!1),d.addEventListener(_.toString(),A,F);else if(d.attachEvent)d.attachEvent(Os(_.toString()),A);else if(d.addListener&&d.removeListener)d.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return b}function ff(){function d(b){return _.call(d.src,d.listener,b)}const _=mf;return d}function al(d,_,b,A,F){if(Array.isArray(_))for(var X=0;X<_.length;X++)al(d,_[X],b,A,F);else A=y(A)?!!A.capture:!!A,b=lc(b),d&&d[_e]?(d=d.i,_=String(_).toString(),_ in d.g&&(X=d.g[_],b=Is(X,b,A,F),-1<b&&(Ci(X[b]),Array.prototype.splice.call(X,b,1),X.length==0&&(delete d.g[_],d.h--)))):d&&(d=Oa(d))&&(_=d.g[_.toString()],d=-1,_&&(d=Is(_,b,A,F)),(b=-1<d?_[d]:null)&&Da(b))}function Da(d){if(typeof d!="number"&&d&&!d.da){var _=d.src;if(_&&_[_e])Ns(_.i,d);else{var b=d.type,A=d.proxy;_.removeEventListener?_.removeEventListener(b,A,d.capture):_.detachEvent?_.detachEvent(Os(b),A):_.addListener&&_.removeListener&&_.removeListener(A),(b=Oa(_))?(Ns(b,d),b.h==0&&(b.src=null,_[Ds]=null)):Ci(d)}}}function Os(d){return d in sl?sl[d]:sl[d]="on"+d}function mf(d,_){if(d.da)d=!0;else{_=new ne(_,this);var b=d.listener,A=d.ha||d.src;d.fa&&Da(d),d=b.call(A,_)}return d}function Oa(d){return d=d[Ds],d instanceof Br?d:null}var ol="__closure_events_fn_"+(1e9*Math.random()>>>0);function lc(d){return typeof d=="function"?d:(d[ol]||(d[ol]=function(_){return d.handleEvent(_)}),d[ol])}function pt(){fe.call(this),this.i=new Br(this),this.M=this,this.F=null}S(pt,fe),pt.prototype[_e]=!0,pt.prototype.removeEventListener=function(d,_,b,A){al(this,d,_,b,A)};function We(d,_){var b,A=d.F;if(A)for(b=[];A;A=A.F)b.push(A);if(d=d.M,A=_.type||_,typeof _=="string")_=new ce(_,d);else if(_ instanceof ce)_.target=_.target||d;else{var F=_;_=new ce(A,d),P(_,F)}if(F=!0,b)for(var X=b.length-1;0<=X;X--){var de=_.g=b[X];F=Rn(de,A,!0,_)&&F}if(de=_.g=d,F=Rn(de,A,!0,_)&&F,F=Rn(de,A,!1,_)&&F,b)for(X=0;X<b.length;X++)de=_.g=b[X],F=Rn(de,A,!1,_)&&F}pt.prototype.N=function(){if(pt.aa.N.call(this),this.i){var d=this.i,_;for(_ in d.g){for(var b=d.g[_],A=0;A<b.length;A++)Ci(b[A]);delete d.g[_],d.h--}}this.F=null},pt.prototype.K=function(d,_,b,A){return this.i.add(String(d),_,!1,b,A)},pt.prototype.L=function(d,_,b,A){return this.i.add(String(d),_,!0,b,A)};function Rn(d,_,b,A){if(_=d.i.g[String(_)],!_)return!0;_=_.concat();for(var F=!0,X=0;X<_.length;++X){var de=_[X];if(de&&!de.da&&de.capture==b){var ze=de.listener,Dt=de.ha||de.src;de.fa&&Ns(d.i,de),F=ze.call(Dt,A)!==!1&&F}}return F&&!A.defaultPrevented}function nn(d,_,b){if(typeof d=="function")b&&(d=w(d,b));else if(d&&typeof d.handleEvent=="function")d=w(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(_)?-1:f.setTimeout(d,_||0)}function uc(d){d.g=nn(()=>{d.g=null,d.i&&(d.i=!1,uc(d))},d.l);const _=d.h;d.h=null,d.m.apply(null,_)}class pf extends fe{constructor(_,b){super(),this.m=_,this.l=b,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:uc(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ps(d){fe.call(this),this.h=d,this.g={}}S(Ps,fe);var Ms=[];function js(d){ye(d.g,function(_,b){this.g.hasOwnProperty(b)&&Da(_)},d),d.g={}}Ps.prototype.N=function(){Ps.aa.N.call(this),js(this)},Ps.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var er=f.JSON.stringify,Pa=f.JSON.parse,ks=class{stringify(d){return f.JSON.stringify(d,void 0)}parse(d){return f.JSON.parse(d,void 0)}};function ll(){}ll.prototype.h=null;function ul(d){return d.h||(d.h=d.i())}function cl(){}var qr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Fr(){ce.call(this,"d")}S(Fr,ce);function dl(){ce.call(this,"c")}S(dl,ce);var mr={},hl=null;function Ni(){return hl=hl||new pt}mr.La="serverreachability";function Ma(d){ce.call(this,mr.La,d)}S(Ma,ce);function Ii(d){const _=Ni();We(_,new Ma(_))}mr.STAT_EVENT="statevent";function cc(d,_){ce.call(this,mr.STAT_EVENT,d),this.stat=_}S(cc,ce);function ut(d){const _=Ni();We(_,new cc(_,d))}mr.Ma="timingevent";function It(d,_){ce.call(this,mr.Ma,d),this.size=_}S(It,ce);function xt(d,_){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){d()},_)}function Ln(){this.g=!0}Ln.prototype.xa=function(){this.g=!1};function fl(d,_,b,A,F,X){d.info(function(){if(d.g)if(X)for(var de="",ze=X.split("&"),Dt=0;Dt<ze.length;Dt++){var Be=ze[Dt].split("=");if(1<Be.length){var Ut=Be[0];Be=Be[1];var Ot=Ut.split("_");de=2<=Ot.length&&Ot[1]=="type"?de+(Ut+"="+Be+"&"):de+(Ut+"=redacted&")}}else de=null;else de=X;return"XMLHTTP REQ ("+A+") [attempt "+F+"]: "+_+`
`+b+`
`+de})}function gf(d,_,b,A,F,X,de){d.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+F+"]: "+_+`
`+b+`
`+X+" "+de})}function Di(d,_,b,A){d.info(function(){return"XMLHTTP TEXT ("+_+"): "+Vs(d,b)+(A?" "+A:"")})}function dc(d,_){d.info(function(){return"TIMEOUT: "+_})}Ln.prototype.info=function(){};function Vs(d,_){if(!d.g)return _;if(!_)return null;try{var b=JSON.parse(_);if(b){for(d=0;d<b.length;d++)if(Array.isArray(b[d])){var A=b[d];if(!(2>A.length)){var F=A[1];if(Array.isArray(F)&&!(1>F.length)){var X=F[0];if(X!="noop"&&X!="stop"&&X!="close")for(var de=1;de<F.length;de++)F[de]=""}}}}return er(b)}catch{return _}}var Oi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Hr={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},pr;function gr(){}S(gr,ll),gr.prototype.g=function(){return new XMLHttpRequest},gr.prototype.i=function(){return{}},pr=new gr;function dn(d,_,b,A){this.j=d,this.i=_,this.l=b,this.R=A||1,this.U=new Ps(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new bt}function bt(){this.i=null,this.g="",this.h=!1}var ml={},ja={};function tr(d,_,b){d.L=1,d.v=qs(Cn(_)),d.m=b,d.P=!0,Gr(d,null)}function Gr(d,_){d.F=Date.now(),Ls(d),d.A=Cn(d.v);var b=d.A,A=d.R;Array.isArray(A)||(A=[String(A)]),bl(b.i,"t",A),d.C=0,b=d.j.J,d.h=new bt,d.g=Rc(d.j,b?_:null,!d.m),0<d.O&&(d.M=new pf(w(d.Y,d,d.g),d.O)),_=d.U,b=d.g,A=d.ca;var F="readystatechange";Array.isArray(F)||(F&&(Ms[0]=F.toString()),F=Ms);for(var X=0;X<F.length;X++){var de=oc(b,F[X],A||_.handleEvent,!1,_.h||_);if(!de)break;_.g[de.key]=de}_=d.H?C(d.H):{},d.m?(d.u||(d.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,_)):(d.u="GET",d.g.ea(d.A,d.u,null,_)),Ii(),fl(d.i,d.u,d.A,d.l,d.R,d.m)}dn.prototype.ca=function(d){d=d.target;const _=this.M;_&&qn(d)==3?_.j():this.Y(d)},dn.prototype.Y=function(d){try{if(d==this.g)e:{const Ot=qn(this.g);var _=this.g.Ba();const Jr=this.g.Z();if(!(3>Ot)&&(Ot!=3||this.g&&(this.h.h||this.g.oa()||_c(this.g)))){this.J||Ot!=4||_==7||(_==8||0>=Jr?Ii(3):Ii(2)),Pi(this);var b=this.g.Z();this.X=b;t:if(hc(this)){var A=_c(this.g);d="";var F=A.length,X=qn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Yt(this),yr(this);var de="";break t}this.h.i=new f.TextDecoder}for(_=0;_<F;_++)this.h.h=!0,d+=this.h.i.decode(A[_],{stream:!(X&&_==F-1)});A.length=0,this.h.g+=d,this.C=0,de=this.h.g}else de=this.g.oa();if(this.o=b==200,gf(this.i,this.u,this.A,this.l,this.R,Ot,b),this.o){if(this.T&&!this.K){t:{if(this.g){var ze,Dt=this.g;if((ze=Dt.g?Dt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Q(ze)){var Be=ze;break t}}Be=null}if(b=Be)Di(this.i,this.l,b,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Us(this,b);else{this.o=!1,this.s=3,ut(12),Yt(this),yr(this);break e}}if(this.P){b=!0;let Kt;for(;!this.J&&this.C<de.length;)if(Kt=fc(this,de),Kt==ja){Ot==4&&(this.s=4,ut(14),b=!1),Di(this.i,this.l,null,"[Incomplete Response]");break}else if(Kt==ml){this.s=4,ut(15),Di(this.i,this.l,de,"[Invalid Chunk]"),b=!1;break}else Di(this.i,this.l,Kt,null),Us(this,Kt);if(hc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ot!=4||de.length!=0||this.h.h||(this.s=1,ut(16),b=!1),this.o=this.o&&b,!b)Di(this.i,this.l,de,"[Invalid Chunked Response]"),Yt(this),yr(this);else if(0<de.length&&!this.W){this.W=!0;var Ut=this.j;Ut.g==this&&Ut.ba&&!Ut.M&&(Ut.j.info("Great, no buffering proxy detected. Bytes received: "+de.length),Ws(Ut),Ut.M=!0,ut(11))}}else Di(this.i,this.l,de,null),Us(this,de);Ot==4&&Yt(this),this.o&&!this.J&&(Ot==4?xc(this.j,this):(this.o=!1,Ls(this)))}else Ef(this.g),b==400&&0<de.indexOf("Unknown SID")?(this.s=3,ut(12)):(this.s=0,ut(13)),Yt(this),yr(this)}}}catch{}finally{}};function hc(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function fc(d,_){var b=d.C,A=_.indexOf(`
`,b);return A==-1?ja:(b=Number(_.substring(b,A)),isNaN(b)?ml:(A+=1,A+b>_.length?ja:(_=_.slice(A,A+b),d.C=A+b,_)))}dn.prototype.cancel=function(){this.J=!0,Yt(this)};function Ls(d){d.S=Date.now()+d.I,mc(d,d.I)}function mc(d,_){if(d.B!=null)throw Error("WatchDog timer not null");d.B=xt(w(d.ba,d),_)}function Pi(d){d.B&&(f.clearTimeout(d.B),d.B=null)}dn.prototype.ba=function(){this.B=null;const d=Date.now();0<=d-this.S?(dc(this.i,this.A),this.L!=2&&(Ii(),ut(17)),Yt(this),this.s=2,yr(this)):mc(this,this.S-d)};function yr(d){d.j.G==0||d.J||xc(d.j,d)}function Yt(d){Pi(d);var _=d.M;_&&typeof _.ma=="function"&&_.ma(),d.M=null,js(d.U),d.g&&(_=d.g,d.g=null,_.abort(),_.ma())}function Us(d,_){try{var b=d.j;if(b.G!=0&&(b.g==d||pl(b.h,d))){if(!d.K&&pl(b.h,d)&&b.G==3){try{var A=b.Da.g.parse(_)}catch{A=null}if(Array.isArray(A)&&A.length==3){var F=A;if(F[0]==0){e:if(!b.u){if(b.g)if(b.g.F+3e3<d.F)Ya(b),Ga(b);else break e;Al(b),ut(18)}}else b.za=F[1],0<b.za-b.T&&37500>F[2]&&b.F&&b.v==0&&!b.C&&(b.C=xt(w(b.Za,b),6e3));if(1>=Va(b.h)&&b.ca){try{b.ca()}catch{}b.ca=void 0}}else Zr(b,11)}else if((d.K||b.g==d)&&Ya(b),!Q(_))for(F=b.Da.g.parse(_),_=0;_<F.length;_++){let Be=F[_];if(b.T=Be[0],Be=Be[1],b.G==2)if(Be[0]=="c"){b.K=Be[1],b.ia=Be[2];const Ut=Be[3];Ut!=null&&(b.la=Ut,b.j.info("VER="+b.la));const Ot=Be[4];Ot!=null&&(b.Aa=Ot,b.j.info("SVER="+b.Aa));const Jr=Be[5];Jr!=null&&typeof Jr=="number"&&0<Jr&&(A=1.5*Jr,b.L=A,b.j.info("backChannelRequestTimeoutMs_="+A)),A=b;const Kt=d.g;if(Kt){const xr=Kt.g?Kt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(xr){var X=A.h;X.g||xr.indexOf("spdy")==-1&&xr.indexOf("quic")==-1&&xr.indexOf("h2")==-1||(X.j=X.l,X.g=new Set,X.h&&(La(X,X.h),X.h=null))}if(A.D){const Rl=Kt.g?Kt.g.getResponseHeader("X-HTTP-Session-Id"):null;Rl&&(A.ya=Rl,et(A.I,A.D,Rl))}}b.G=3,b.l&&b.l.ua(),b.ba&&(b.R=Date.now()-d.F,b.j.info("Handshake RTT: "+b.R+"ms")),A=b;var de=d;if(A.qa=Sc(A,A.J?A.ia:null,A.W),de.K){hn(A.h,de);var ze=de,Dt=A.L;Dt&&(ze.I=Dt),ze.B&&(Pi(ze),Ls(ze)),A.g=de}else Tc(A);0<b.i.length&&$a(b)}else Be[0]!="stop"&&Be[0]!="close"||Zr(b,7);else b.G==3&&(Be[0]=="stop"||Be[0]=="close"?Be[0]=="stop"?Zr(b,7):wl(b):Be[0]!="noop"&&b.l&&b.l.ta(Be),b.v=0)}}Ii(4)}catch{}}var pc=class{constructor(d,_){this.g=d,this.map=_}};function $r(d){this.l=d||10,f.PerformanceNavigationTiming?(d=f.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ka(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function Va(d){return d.h?1:d.g?d.g.size:0}function pl(d,_){return d.h?d.h==_:d.g?d.g.has(_):!1}function La(d,_){d.g?d.g.add(_):d.h=_}function hn(d,_){d.h&&d.h==_?d.h=null:d.g&&d.g.has(_)&&d.g.delete(_)}$r.prototype.cancel=function(){if(this.i=gl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function gl(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let _=d.i;for(const b of d.g.values())_=_.concat(b.D);return _}return U(d.i)}function yf(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(m(d)){for(var _=[],b=d.length,A=0;A<b;A++)_.push(d[A]);return _}_=[],b=0;for(A in d)_[b++]=d[A];return _}function Ua(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(m(d)||typeof d=="string"){var _=[];d=d.length;for(var b=0;b<d;b++)_.push(b);return _}_=[],b=0;for(const A in d)_[b++]=A;return _}}}function yl(d,_){if(d.forEach&&typeof d.forEach=="function")d.forEach(_,void 0);else if(m(d)||typeof d=="string")Array.prototype.forEach.call(d,_,void 0);else for(var b=Ua(d),A=yf(d),F=A.length,X=0;X<F;X++)_.call(void 0,A[X],b&&b[X],d)}var zs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function vf(d,_){if(d){d=d.split("&");for(var b=0;b<d.length;b++){var A=d[b].indexOf("="),F=null;if(0<=A){var X=d[b].substring(0,A);F=d[b].substring(A+1)}else X=d[b];_(X,F?decodeURIComponent(F.replace(/\+/g," ")):"")}}}function At(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof At){this.h=d.h,Bs(this,d.j),this.o=d.o,this.g=d.g,Mi(this,d.s),this.l=d.l;var _=d.i,b=new Kr;b.i=_.i,_.g&&(b.g=new Map(_.g),b.h=_.h),Yr(this,b),this.m=d.m}else d&&(_=String(d).match(zs))?(this.h=!1,Bs(this,_[1]||"",!0),this.o=Un(_[2]||""),this.g=Un(_[3]||"",!0),Mi(this,_[4]),this.l=Un(_[5]||"",!0),Yr(this,_[6]||"",!0),this.m=Un(_[7]||"")):(this.h=!1,this.i=new Kr(null,this.h))}At.prototype.toString=function(){var d=[],_=this.j;_&&d.push(Fs(_,vl,!0),":");var b=this.g;return(b||_=="file")&&(d.push("//"),(_=this.o)&&d.push(Fs(_,vl,!0),"@"),d.push(encodeURIComponent(String(b)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.s,b!=null&&d.push(":",String(b))),(b=this.l)&&(this.g&&b.charAt(0)!="/"&&d.push("/"),d.push(Fs(b,b.charAt(0)=="/"?_f:_l,!0))),(b=this.i.toString())&&d.push("?",b),(b=this.m)&&d.push("#",Fs(b,za)),d.join("")};function Cn(d){return new At(d)}function Bs(d,_,b){d.j=b?Un(_,!0):_,d.j&&(d.j=d.j.replace(/:$/,""))}function Mi(d,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);d.s=_}else d.s=null}function Yr(d,_,b){_ instanceof Kr?(d.i=_,yc(d.i,d.h)):(b||(_=Fs(_,bf)),d.i=new Kr(_,d.h))}function et(d,_,b){d.i.set(_,b)}function qs(d){return et(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function Un(d,_){return d?_?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Fs(d,_,b){return typeof d=="string"?(d=encodeURI(d).replace(_,gc),b&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function gc(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var vl=/[#\/\?@]/g,_l=/[#\?:]/g,_f=/[#\?]/g,bf=/[#\?@]/g,za=/#/g;function Kr(d,_){this.h=this.g=null,this.i=d||null,this.j=!!_}function zn(d){d.g||(d.g=new Map,d.h=0,d.i&&vf(d.i,function(_,b){d.add(decodeURIComponent(_.replace(/\+/g," ")),b)}))}n=Kr.prototype,n.add=function(d,_){zn(this),this.i=null,d=vr(this,d);var b=this.g.get(d);return b||this.g.set(d,b=[]),b.push(_),this.h+=1,this};function Qr(d,_){zn(d),_=vr(d,_),d.g.has(_)&&(d.i=null,d.h-=d.g.get(_).length,d.g.delete(_))}function Wr(d,_){return zn(d),_=vr(d,_),d.g.has(_)}n.forEach=function(d,_){zn(this),this.g.forEach(function(b,A){b.forEach(function(F){d.call(_,F,A,this)},this)},this)},n.na=function(){zn(this);const d=Array.from(this.g.values()),_=Array.from(this.g.keys()),b=[];for(let A=0;A<_.length;A++){const F=d[A];for(let X=0;X<F.length;X++)b.push(_[A])}return b},n.V=function(d){zn(this);let _=[];if(typeof d=="string")Wr(this,d)&&(_=_.concat(this.g.get(vr(this,d))));else{d=Array.from(this.g.values());for(let b=0;b<d.length;b++)_=_.concat(d[b])}return _},n.set=function(d,_){return zn(this),this.i=null,d=vr(this,d),Wr(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[_]),this.h+=1,this},n.get=function(d,_){return d?(d=this.V(d),0<d.length?String(d[0]):_):_};function bl(d,_,b){Qr(d,_),0<b.length&&(d.i=null,d.g.set(vr(d,_),U(b)),d.h+=b.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],_=Array.from(this.g.keys());for(var b=0;b<_.length;b++){var A=_[b];const X=encodeURIComponent(String(A)),de=this.V(A);for(A=0;A<de.length;A++){var F=X;de[A]!==""&&(F+="="+encodeURIComponent(String(de[A]))),d.push(F)}}return this.i=d.join("&")};function vr(d,_){return _=String(_),d.j&&(_=_.toLowerCase()),_}function yc(d,_){_&&!d.j&&(zn(d),d.i=null,d.g.forEach(function(b,A){var F=A.toLowerCase();A!=F&&(Qr(this,A),bl(this,F,b))},d)),d.j=_}function Hs(d,_){const b=new Ln;if(f.Image){const A=new Image;A.onload=R(Bn,b,"TestLoadImage: loaded",!0,_,A),A.onerror=R(Bn,b,"TestLoadImage: error",!1,_,A),A.onabort=R(Bn,b,"TestLoadImage: abort",!1,_,A),A.ontimeout=R(Bn,b,"TestLoadImage: timeout",!1,_,A),f.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=d}else _(!1)}function nr(d,_){const b=new Ln,A=new AbortController,F=setTimeout(()=>{A.abort(),Bn(b,"TestPingServer: timeout",!1,_)},1e4);fetch(d,{signal:A.signal}).then(X=>{clearTimeout(F),X.ok?Bn(b,"TestPingServer: ok",!0,_):Bn(b,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(F),Bn(b,"TestPingServer: error",!1,_)})}function Bn(d,_,b,A,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),A(b)}catch{}}function Gs(){this.g=new ks}function _r(d,_,b){const A=b||"";try{yl(d,function(F,X){let de=F;y(F)&&(de=er(F)),_.push(A+X+"="+encodeURIComponent(de))})}catch(F){throw _.push(A+"type="+encodeURIComponent("_badmap")),F}}function ji(d){this.l=d.Ub||null,this.j=d.eb||!1}S(ji,ll),ji.prototype.g=function(){return new Xr(this.l,this.j)},ji.prototype.i=function(d){return function(){return d}}({});function Xr(d,_){pt.call(this),this.D=d,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}S(Xr,pt),n=Xr.prototype,n.open=function(d,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=_,this.readyState=1,Er(this)},n.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(_.body=d),(this.D||f).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,br(this)),this.readyState=0},n.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,Er(this)),this.g&&(this.readyState=3,Er(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;El(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function El(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}n.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var _=d.value?d.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!d.done}))&&(this.response=this.responseText+=_)}d.done?br(this):Er(this),this.readyState==3&&El(this)}},n.Ra=function(d){this.g&&(this.response=this.responseText=d,br(this))},n.Qa=function(d){this.g&&(this.response=d,br(this))},n.ga=function(){this.g&&br(this)};function br(d){d.readyState=4,d.l=null,d.j=null,d.v=null,Er(d)}n.setRequestHeader=function(d,_){this.u.append(d,_)},n.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],_=this.h.entries();for(var b=_.next();!b.done;)b=b.value,d.push(b[0]+": "+b[1]),b=_.next();return d.join(`\r
`)};function Er(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Xr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function Tl(d){let _="";return ye(d,function(b,A){_+=A,_+=":",_+=b,_+=`\r
`}),_}function Lt(d,_,b){e:{for(A in b){var A=!1;break e}A=!0}A||(b=Tl(b),typeof d=="string"?b!=null&&encodeURIComponent(String(b)):et(d,_,b))}function Ke(d){pt.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}S(Ke,pt);var Ba=/^https?$/i,$s=["POST","PUT"];n=Ke.prototype,n.Ha=function(d){this.J=d},n.ea=function(d,_,b,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);_=_?_.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():pr.g(),this.v=this.o?ul(this.o):ul(pr),this.g.onreadystatechange=w(this.Ea,this);try{this.B=!0,this.g.open(_,String(d),!0),this.B=!1}catch(X){vc(this,X);return}if(d=b||"",b=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var F in A)b.set(F,A[F]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const X of A.keys())b.set(X,A.get(X));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(b.keys()).find(X=>X.toLowerCase()=="content-type"),F=f.FormData&&d instanceof f.FormData,!(0<=Array.prototype.indexOf.call($s,_,void 0))||A||F||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[X,de]of b)this.g.setRequestHeader(X,de);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ys(this),this.u=!0,this.g.send(d),this.u=!1}catch(X){vc(this,X)}};function vc(d,_){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=_,d.m=5,qa(d),Tr(d)}function qa(d){d.A||(d.A=!0,We(d,"complete"),We(d,"error"))}n.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,We(this,"complete"),We(this,"abort"),Tr(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Tr(this,!0)),Ke.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Fa(this):this.bb())},n.bb=function(){Fa(this)};function Fa(d){if(d.h&&typeof c<"u"&&(!d.v[1]||qn(d)!=4||d.Z()!=2)){if(d.u&&qn(d)==4)nn(d.Ea,0,d);else if(We(d,"readystatechange"),qn(d)==4){d.h=!1;try{const de=d.Z();e:switch(de){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var b;if(!(b=_)){var A;if(A=de===0){var F=String(d.D).match(zs)[1]||null;!F&&f.self&&f.self.location&&(F=f.self.location.protocol.slice(0,-1)),A=!Ba.test(F?F.toLowerCase():"")}b=A}if(b)We(d,"complete"),We(d,"success");else{d.m=6;try{var X=2<qn(d)?d.g.statusText:""}catch{X=""}d.l=X+" ["+d.Z()+"]",qa(d)}}finally{Tr(d)}}}}function Tr(d,_){if(d.g){Ys(d);const b=d.g,A=d.v[0]?()=>{}:null;d.g=null,d.v=null,_||We(d,"ready");try{b.onreadystatechange=A}catch{}}}function Ys(d){d.I&&(f.clearTimeout(d.I),d.I=null)}n.isActive=function(){return!!this.g};function qn(d){return d.g?d.g.readyState:0}n.Z=function(){try{return 2<qn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(d){if(this.g){var _=this.g.responseText;return d&&_.indexOf(d)==0&&(_=_.substring(d.length)),Pa(_)}};function _c(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function Ef(d){const _={};d=(d.g&&2<=qn(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<d.length;A++){if(Q(d[A]))continue;var b=L(d[A]);const F=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const X=_[F]||[];_[F]=X,X.push(b)}M(_,function(A){return A.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ks(d,_,b){return b&&b.internalChannelParams&&b.internalChannelParams[d]||_}function Ha(d){this.Aa=0,this.i=[],this.j=new Ln,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ks("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ks("baseRetryDelayMs",5e3,d),this.cb=Ks("retryDelaySeedMs",1e4,d),this.Wa=Ks("forwardChannelMaxRetries",2,d),this.wa=Ks("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new $r(d&&d.concurrentRequestLimit),this.Da=new Gs,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Ha.prototype,n.la=8,n.G=1,n.connect=function(d,_,b,A){ut(0),this.W=d,this.H=_||{},b&&A!==void 0&&(this.H.OSID=b,this.H.OAID=A),this.F=this.X,this.I=Sc(this,null,this.W),$a(this)};function wl(d){if(bc(d),d.G==3){var _=d.U++,b=Cn(d.I);if(et(b,"SID",d.K),et(b,"RID",_),et(b,"TYPE","terminate"),Qs(d,b),_=new dn(d,d.j,_),_.L=2,_.v=qs(Cn(b)),b=!1,f.navigator&&f.navigator.sendBeacon)try{b=f.navigator.sendBeacon(_.v.toString(),"")}catch{}!b&&f.Image&&(new Image().src=_.v,b=!0),b||(_.g=Rc(_.j,null),_.g.ea(_.v)),_.F=Date.now(),Ls(_)}Ac(d)}function Ga(d){d.g&&(Ws(d),d.g.cancel(),d.g=null)}function bc(d){Ga(d),d.u&&(f.clearTimeout(d.u),d.u=null),Ya(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&f.clearTimeout(d.s),d.s=null)}function $a(d){if(!ka(d.h)&&!d.s){d.s=!0;var _=d.Ga;he||j(),ve||(he(),ve=!0),je.add(_,d),d.B=0}}function Tf(d,_){return Va(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=_.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=xt(w(d.Ga,d,_),Sl(d,d.B)),d.B++,!0)}n.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;const F=new dn(this,this.j,d);let X=this.o;if(this.S&&(X?(X=C(X),P(X,this.S)):X=this.S),this.m!==null||this.O||(F.H=X,X=null),this.P)e:{for(var _=0,b=0;b<this.i.length;b++){t:{var A=this.i[b];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(_+=A,4096<_){_=b;break e}if(_===4096||b===this.i.length-1){_=b+1;break e}}_=1e3}else _=1e3;_=Ec(this,F,_),b=Cn(this.I),et(b,"RID",d),et(b,"CVER",22),this.D&&et(b,"X-HTTP-Session-Id",this.D),Qs(this,b),X&&(this.O?_="headers="+encodeURIComponent(String(Tl(X)))+"&"+_:this.m&&Lt(b,this.m,X)),La(this.h,F),this.Ua&&et(b,"TYPE","init"),this.P?(et(b,"$req",_),et(b,"SID","null"),F.T=!0,tr(F,b,null)):tr(F,b,_),this.G=2}}else this.G==3&&(d?xl(this,d):this.i.length==0||ka(this.h)||xl(this))};function xl(d,_){var b;_?b=_.l:b=d.U++;const A=Cn(d.I);et(A,"SID",d.K),et(A,"RID",b),et(A,"AID",d.T),Qs(d,A),d.m&&d.o&&Lt(A,d.m,d.o),b=new dn(d,d.j,b,d.B+1),d.m===null&&(b.H=d.o),_&&(d.i=_.D.concat(d.i)),_=Ec(d,b,1e3),b.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),La(d.h,b),tr(b,A,_)}function Qs(d,_){d.H&&ye(d.H,function(b,A){et(_,A,b)}),d.l&&yl({},function(b,A){et(_,A,b)})}function Ec(d,_,b){b=Math.min(d.i.length,b);var A=d.l?w(d.l.Na,d.l,d):null;e:{var F=d.i;let X=-1;for(;;){const de=["count="+b];X==-1?0<b?(X=F[0].g,de.push("ofs="+X)):X=0:de.push("ofs="+X);let ze=!0;for(let Dt=0;Dt<b;Dt++){let Be=F[Dt].g;const Ut=F[Dt].map;if(Be-=X,0>Be)X=Math.max(0,F[Dt].g-100),ze=!1;else try{_r(Ut,de,"req"+Be+"_")}catch{A&&A(Ut)}}if(ze){A=de.join("&");break e}}}return d=d.i.splice(0,b),_.D=d,A}function Tc(d){if(!d.g&&!d.u){d.Y=1;var _=d.Fa;he||j(),ve||(he(),ve=!0),je.add(_,d),d.v=0}}function Al(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=xt(w(d.Fa,d),Sl(d,d.v)),d.v++,!0)}n.Fa=function(){if(this.u=null,wc(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=xt(w(this.ab,this),d)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ut(10),Ga(this),wc(this))};function Ws(d){d.A!=null&&(f.clearTimeout(d.A),d.A=null)}function wc(d){d.g=new dn(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var _=Cn(d.qa);et(_,"RID","rpc"),et(_,"SID",d.K),et(_,"AID",d.T),et(_,"CI",d.F?"0":"1"),!d.F&&d.ja&&et(_,"TO",d.ja),et(_,"TYPE","xmlhttp"),Qs(d,_),d.m&&d.o&&Lt(_,d.m,d.o),d.L&&(d.g.I=d.L);var b=d.g;d=d.ia,b.L=1,b.v=qs(Cn(_)),b.m=null,b.P=!0,Gr(b,d)}n.Za=function(){this.C!=null&&(this.C=null,Ga(this),Al(this),ut(19))};function Ya(d){d.C!=null&&(f.clearTimeout(d.C),d.C=null)}function xc(d,_){var b=null;if(d.g==_){Ya(d),Ws(d),d.g=null;var A=2}else if(pl(d.h,_))b=_.D,hn(d.h,_),A=1;else return;if(d.G!=0){if(_.o)if(A==1){b=_.m?_.m.length:0,_=Date.now()-_.F;var F=d.B;A=Ni(),We(A,new It(A,b)),$a(d)}else Tc(d);else if(F=_.s,F==3||F==0&&0<_.X||!(A==1&&Tf(d,_)||A==2&&Al(d)))switch(b&&0<b.length&&(_=d.h,_.i=_.i.concat(b)),F){case 1:Zr(d,5);break;case 4:Zr(d,10);break;case 3:Zr(d,6);break;default:Zr(d,2)}}}function Sl(d,_){let b=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(b*=2),b*_}function Zr(d,_){if(d.j.info("Error code "+_),_==2){var b=w(d.fb,d),A=d.Xa;const F=!A;A=new At(A||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||Bs(A,"https"),qs(A),F?Hs(A.toString(),b):nr(A.toString(),b)}else ut(2);d.G=0,d.l&&d.l.sa(_),Ac(d),bc(d)}n.fb=function(d){d?(this.j.info("Successfully pinged google.com"),ut(2)):(this.j.info("Failed to ping google.com"),ut(1))};function Ac(d){if(d.G=0,d.ka=[],d.l){const _=gl(d.h);(_.length!=0||d.i.length!=0)&&(O(d.ka,_),O(d.ka,d.i),d.h.i.length=0,U(d.i),d.i.length=0),d.l.ra()}}function Sc(d,_,b){var A=b instanceof At?Cn(b):new At(b);if(A.g!="")_&&(A.g=_+"."+A.g),Mi(A,A.s);else{var F=f.location;A=F.protocol,_=_?_+"."+F.hostname:F.hostname,F=+F.port;var X=new At(null);A&&Bs(X,A),_&&(X.g=_),F&&Mi(X,F),b&&(X.l=b),A=X}return b=d.D,_=d.ya,b&&_&&et(A,b,_),et(A,"VER",d.la),Qs(d,A),A}function Rc(d,_,b){if(_&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return _=d.Ca&&!d.pa?new Ke(new ji({eb:b})):new Ke(d.pa),_.Ha(d.J),_}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Cc(){}n=Cc.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Ka(){}Ka.prototype.g=function(d,_){return new fn(d,_)};function fn(d,_){pt.call(this),this.g=new Ha(_),this.l=d,this.h=_&&_.messageUrlParams||null,d=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(d?d["X-WebChannel-Content-Type"]=_.messageContentType:d={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(d?d["X-WebChannel-Client-Profile"]=_.va:d={"X-WebChannel-Client-Profile":_.va}),this.g.S=d,(d=_&&_.Sb)&&!Q(d)&&(this.g.m=d),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!Q(_)&&(this.g.D=_,d=this.h,d!==null&&_ in d&&(d=this.h,_ in d&&delete d[_])),this.j=new wr(this)}S(fn,pt),fn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},fn.prototype.close=function(){wl(this.g)},fn.prototype.o=function(d){var _=this.g;if(typeof d=="string"){var b={};b.__data__=d,d=b}else this.u&&(b={},b.__data__=er(d),d=b);_.i.push(new pc(_.Ya++,d)),_.G==3&&$a(_)},fn.prototype.N=function(){this.g.l=null,delete this.j,wl(this.g),delete this.g,fn.aa.N.call(this)};function Nc(d){Fr.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var _=d.__sm__;if(_){e:{for(const b in _){d=b;break e}d=void 0}(this.i=d)&&(d=this.i,_=_!==null&&d in _?_[d]:void 0),this.data=_}else this.data=d}S(Nc,Fr);function Ic(){dl.call(this),this.status=1}S(Ic,dl);function wr(d){this.g=d}S(wr,Cc),wr.prototype.ua=function(){We(this.g,"a")},wr.prototype.ta=function(d){We(this.g,new Nc(d))},wr.prototype.sa=function(d){We(this.g,new Ic)},wr.prototype.ra=function(){We(this.g,"b")},Ka.prototype.createWebChannel=Ka.prototype.g,fn.prototype.send=fn.prototype.o,fn.prototype.open=fn.prototype.m,fn.prototype.close=fn.prototype.close,p1=function(){return new Ka},m1=function(){return Ni()},f1=mr,Kp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Oi.NO_ERROR=0,Oi.TIMEOUT=8,Oi.HTTP_ERROR=6,Gd=Oi,Hr.COMPLETE="complete",h1=Hr,cl.EventType=qr,qr.OPEN="a",qr.CLOSE="b",qr.ERROR="c",qr.MESSAGE="d",pt.prototype.listen=pt.prototype.K,bu=cl,Ke.prototype.listenOnce=Ke.prototype.L,Ke.prototype.getLastError=Ke.prototype.Ka,Ke.prototype.getLastErrorCode=Ke.prototype.Ba,Ke.prototype.getStatus=Ke.prototype.Z,Ke.prototype.getResponseJson=Ke.prototype.Oa,Ke.prototype.getResponseText=Ke.prototype.oa,Ke.prototype.send=Ke.prototype.ea,Ke.prototype.setWithCredentials=Ke.prototype.Ha,d1=Ke}).apply(typeof Pd<"u"?Pd:typeof self<"u"?self:typeof window<"u"?window:{});const Nb="@firebase/firestore",Ib="4.7.14";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}on.UNAUTHENTICATED=new on(null),on.GOOGLE_CREDENTIALS=new on("google-credentials-uid"),on.FIRST_PARTY=new on("first-party-uid"),on.MOCK_USER=new on("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zo="11.7.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wa=new Sg("@firebase/firestore");function So(){return wa.logLevel}function pe(n,...e){if(wa.logLevel<=Le.DEBUG){const t=e.map(Lg);wa.debug(`Firestore (${Zo}): ${n}`,...t)}}function Ti(n,...e){if(wa.logLevel<=Le.ERROR){const t=e.map(Lg);wa.error(`Firestore (${Zo}): ${n}`,...t)}}function Uo(n,...e){if(wa.logLevel<=Le.WARN){const t=e.map(Lg);wa.warn(`Firestore (${Zo}): ${n}`,...t)}}function Lg(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ae(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,g1(n,i,t)}function g1(n,e,t){let i=`FIRESTORE (${Zo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw Ti(i),new Error(i)}function Qe(n,e,t,i){let a="Unexpected state";typeof t=="string"?a=t:i=t,n||g1(e,a,i)}function Ne(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ie={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class me extends Ai{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y1{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class HI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(on.UNAUTHENTICATED))}shutdown(){}}class GI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class $I{constructor(e){this.t=e,this.currentUser=on.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Qe(this.o===void 0,42304);let i=this.i;const a=m=>this.i!==i?(i=this.i,t(m)):Promise.resolve();let l=new yi;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new yi,e.enqueueRetryable(()=>a(this.currentUser))};const c=()=>{const m=l;e.enqueueRetryable(async()=>{await m.promise,await a(this.currentUser)})},f=m=>{pe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(m=>f(m)),setTimeout(()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?f(m):(pe("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new yi)}},0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(pe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Qe(typeof i.accessToken=="string",31837,{l:i}),new y1(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Qe(e===null||typeof e=="string",2055,{h:e}),new on(e)}}class YI{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=on.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class KI{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new YI(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(on.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Db{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class QI{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Wn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Qe(this.o===void 0,3512);const i=l=>{l.error!=null&&pe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,pe("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>i(l))};const a=l=>{pe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(l=>a(l)),setTimeout(()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):pe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Db(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Qe(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Db(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WI(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v1(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _1{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const a=WI(40);for(let l=0;l<a.length;++l)i.length<20&&a[l]<t&&(i+=e.charAt(a[l]%62))}return i}}function Pe(n,e){return n<e?-1:n>e?1:0}function Qp(n,e){let t=0;for(;t<n.length&&t<e.length;){const i=n.codePointAt(t),a=e.codePointAt(t);if(i!==a){if(i<128&&a<128)return Pe(i,a);{const l=v1(),c=XI(l.encode(Ob(n,t)),l.encode(Ob(e,t)));return c!==0?c:Pe(i,a)}}t+=i>65535?2:1}return Pe(n.length,e.length)}function Ob(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function XI(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return Pe(n[t],e[t]);return Pe(n.length,e.length)}function zo(n,e,t){return n.length===e.length&&n.every((i,a)=>t(i,e[a]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pb=-62135596800,Mb=1e6;class jt{static now(){return jt.fromMillis(Date.now())}static fromDate(e){return jt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*Mb);return new jt(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new me(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new me(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Pb)throw new me(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new me(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Mb}_compareTo(e){return this.seconds===e.seconds?Pe(this.nanoseconds,e.nanoseconds):Pe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-Pb;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{static fromTimestamp(e){return new Re(e)}static min(){return new Re(new jt(0,0))}static max(){return new Re(new jt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jb="__name__";class Dr{constructor(e,t,i){t===void 0?t=0:t>e.length&&Ae(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&Ae(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Dr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Dr?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let a=0;a<i;a++){const l=Dr.compareSegments(e.get(a),t.get(a));if(l!==0)return l}return Pe(e.length,t.length)}static compareSegments(e,t){const i=Dr.isNumericId(e),a=Dr.isNumericId(t);return i&&!a?-1:!i&&a?1:i&&a?Dr.extractNumericId(e).compare(Dr.extractNumericId(t)):Qp(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return fs.fromString(e.substring(4,e.length-2))}}class ot extends Dr{construct(e,t,i){return new ot(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new me(ie.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(a=>a.length>0))}return new ot(t)}static emptyPath(){return new ot([])}}const ZI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class en extends Dr{construct(e,t,i){return new en(e,t,i)}static isValidIdentifier(e){return ZI.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),en.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===jb}static keyField(){return new en([jb])}static fromServerFormat(e){const t=[];let i="",a=0;const l=()=>{if(i.length===0)throw new me(ie.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let c=!1;for(;a<e.length;){const f=e[a];if(f==="\\"){if(a+1===e.length)throw new me(ie.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[a+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new me(ie.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=m,a+=2}else f==="`"?(c=!c,a++):f!=="."||c?(i+=f,a++):(l(),a++)}if(l(),c)throw new me(ie.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new en(t)}static emptyPath(){return new en([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(e){this.path=e}static fromPath(e){return new Ee(ot.fromString(e))}static fromName(e){return new Ee(ot.fromString(e).popFirst(5))}static empty(){return new Ee(ot.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ot.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ot.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ee(new ot(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pu=-1;function JI(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,a=Re.fromTimestamp(i===1e9?new jt(t+1,0):new jt(t,i));return new gs(a,Ee.empty(),e)}function eD(n){return new gs(n.readTime,n.key,Pu)}class gs{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new gs(Re.min(),Ee.empty(),Pu)}static max(){return new gs(Re.max(),Ee.empty(),Pu)}}function tD(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ee.comparator(n.documentKey,e.documentKey),t!==0?t:Pe(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nD="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class rD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jo(n){if(n.code!==ie.FAILED_PRECONDITION||n.message!==nD)throw n;pe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ae(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ae((i,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,a)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ae?t:ae.resolve(t)}catch(t){return ae.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ae.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ae.reject(t)}static resolve(e){return new ae((t,i)=>{t(e)})}static reject(e){return new ae((t,i)=>{i(e)})}static waitFor(e){return new ae((t,i)=>{let a=0,l=0,c=!1;e.forEach(f=>{++a,f.next(()=>{++l,c&&l===a&&t()},m=>i(m))}),c=!0,l===a&&t()})}static or(e){let t=ae.resolve(!1);for(const i of e)t=t.next(a=>a?ae.resolve(a):i());return t}static forEach(e,t){const i=[];return e.forEach((a,l)=>{i.push(t.call(this,a,l))}),this.waitFor(i)}static mapArray(e,t){return new ae((i,a)=>{const l=e.length,c=new Array(l);let f=0;for(let m=0;m<l;m++){const y=m;t(e[y]).next(v=>{c[y]=v,++f,f===l&&i(c)},v=>a(v))}})}static doWhile(e,t){return new ae((i,a)=>{const l=()=>{e()===!0?t().next(()=>{l()},a):i()};l()})}}function iD(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function el(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ue(i),this.ce=i=>t.writeSequenceNumber(i))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}kh.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ug=-1;function Vh(n){return n==null}function dh(n){return n===0&&1/n==-1/0}function sD(n){return typeof n=="number"&&Number.isInteger(n)&&!dh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b1="";function aD(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=kb(e)),e=oD(n.get(t),e);return kb(e)}function oD(n,e){let t=e;const i=n.length;for(let a=0;a<i;a++){const l=n.charAt(a);switch(l){case"\0":t+="";break;case b1:t+="";break;default:t+=l}}return t}function kb(n){return n+b1+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vb(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function As(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function E1(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e,t){this.comparator=e,this.root=t||Jt.EMPTY}insert(e,t){return new mt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Jt.BLACK,null,null))}remove(e){return new mt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Jt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const a=this.comparator(e,i.key);if(a===0)return t+i.left.size;a<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Md(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Md(this.root,e,this.comparator,!1)}getReverseIterator(){return new Md(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Md(this.root,e,this.comparator,!0)}}class Md{constructor(e,t,i,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Jt{constructor(e,t,i,a,l){this.key=e,this.value=t,this.color=i??Jt.RED,this.left=a??Jt.EMPTY,this.right=l??Jt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,a,l){return new Jt(e??this.key,t??this.value,i??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let a=this;const l=i(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,i),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,i)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Jt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return Jt.EMPTY;i=a.right.min(),a=a.copy(i.key,i.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Jt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Jt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ae(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ae(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ae(27949);return e+(this.isRed()?0:1)}}Jt.EMPTY=null,Jt.RED=!0,Jt.BLACK=!1;Jt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ae(57766)}get value(){throw Ae(16141)}get color(){throw Ae(16727)}get left(){throw Ae(29726)}get right(){throw Ae(36894)}copy(e,t,i,a,l){return this}insert(e,t,i){return new Jt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e){this.comparator=e,this.data=new mt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const a=i.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Lb(this.data.getIterator())}getIteratorFrom(e){return new Lb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof kt)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=i.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new kt(this.comparator);return t.data=e,t}}class Lb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(e){this.fields=e,e.sort(en.comparator)}static empty(){return new kn([])}unionWith(e){let t=new kt(en.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new kn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return zo(this.fields,e.fields,(t,i)=>t.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new T1("Invalid base64 string: "+l):l}}(e);return new tn(t)}static fromUint8Array(e){const t=function(a){let l="";for(let c=0;c<a.length;++c)l+=String.fromCharCode(a[c]);return l}(e);return new tn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const i=new Uint8Array(t.length);for(let a=0;a<t.length;a++)i[a]=t.charCodeAt(a);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Pe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}tn.EMPTY_BYTE_STRING=new tn("");const lD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ys(n){if(Qe(!!n,39018),typeof n=="string"){let e=0;const t=lD.exec(n);if(Qe(!!t,46558,{timestamp:n}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:wt(n.seconds),nanos:wt(n.nanos)}}function wt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function vs(n){return typeof n=="string"?tn.fromBase64String(n):tn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w1="server_timestamp",x1="__type__",A1="__previous_value__",S1="__local_write_time__";function zg(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[x1])===null||t===void 0?void 0:t.stringValue)===w1}function Lh(n){const e=n.mapValue.fields[A1];return zg(e)?Lh(e):e}function Mu(n){const e=ys(n.mapValue.fields[S1].timestampValue);return new jt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uD{constructor(e,t,i,a,l,c,f,m,y,v){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=a,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=f,this.longPollingOptions=m,this.useFetchStreams=y,this.isUsingEmulator=v}}const hh="(default)";class ju{constructor(e,t){this.projectId=e,this.database=t||hh}static empty(){return new ju("","")}get isDefaultDatabase(){return this.database===hh}isEqual(e){return e instanceof ju&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R1="__type__",cD="__max__",jd={mapValue:{}},C1="__vector__",fh="value";function _s(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?zg(n)?4:hD(n)?9007199254740991:dD(n)?10:11:Ae(28295,{value:n})}function Lr(n,e){if(n===e)return!0;const t=_s(n);if(t!==_s(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Mu(n).isEqual(Mu(e));case 3:return function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const c=ys(a.timestampValue),f=ys(l.timestampValue);return c.seconds===f.seconds&&c.nanos===f.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(a,l){return vs(a.bytesValue).isEqual(vs(l.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(a,l){return wt(a.geoPointValue.latitude)===wt(l.geoPointValue.latitude)&&wt(a.geoPointValue.longitude)===wt(l.geoPointValue.longitude)}(n,e);case 2:return function(a,l){if("integerValue"in a&&"integerValue"in l)return wt(a.integerValue)===wt(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const c=wt(a.doubleValue),f=wt(l.doubleValue);return c===f?dh(c)===dh(f):isNaN(c)&&isNaN(f)}return!1}(n,e);case 9:return zo(n.arrayValue.values||[],e.arrayValue.values||[],Lr);case 10:case 11:return function(a,l){const c=a.mapValue.fields||{},f=l.mapValue.fields||{};if(Vb(c)!==Vb(f))return!1;for(const m in c)if(c.hasOwnProperty(m)&&(f[m]===void 0||!Lr(c[m],f[m])))return!1;return!0}(n,e);default:return Ae(52216,{left:n})}}function ku(n,e){return(n.values||[]).find(t=>Lr(t,e))!==void 0}function Bo(n,e){if(n===e)return 0;const t=_s(n),i=_s(e);if(t!==i)return Pe(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Pe(n.booleanValue,e.booleanValue);case 2:return function(l,c){const f=wt(l.integerValue||l.doubleValue),m=wt(c.integerValue||c.doubleValue);return f<m?-1:f>m?1:f===m?0:isNaN(f)?isNaN(m)?0:-1:1}(n,e);case 3:return Ub(n.timestampValue,e.timestampValue);case 4:return Ub(Mu(n),Mu(e));case 5:return Qp(n.stringValue,e.stringValue);case 6:return function(l,c){const f=vs(l),m=vs(c);return f.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(l,c){const f=l.split("/"),m=c.split("/");for(let y=0;y<f.length&&y<m.length;y++){const v=Pe(f[y],m[y]);if(v!==0)return v}return Pe(f.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(l,c){const f=Pe(wt(l.latitude),wt(c.latitude));return f!==0?f:Pe(wt(l.longitude),wt(c.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return zb(n.arrayValue,e.arrayValue);case 10:return function(l,c){var f,m,y,v;const E=l.fields||{},w=c.fields||{},R=(f=E[fh])===null||f===void 0?void 0:f.arrayValue,S=(m=w[fh])===null||m===void 0?void 0:m.arrayValue,U=Pe(((y=R==null?void 0:R.values)===null||y===void 0?void 0:y.length)||0,((v=S==null?void 0:S.values)===null||v===void 0?void 0:v.length)||0);return U!==0?U:zb(R,S)}(n.mapValue,e.mapValue);case 11:return function(l,c){if(l===jd.mapValue&&c===jd.mapValue)return 0;if(l===jd.mapValue)return 1;if(c===jd.mapValue)return-1;const f=l.fields||{},m=Object.keys(f),y=c.fields||{},v=Object.keys(y);m.sort(),v.sort();for(let E=0;E<m.length&&E<v.length;++E){const w=Qp(m[E],v[E]);if(w!==0)return w;const R=Bo(f[m[E]],y[v[E]]);if(R!==0)return R}return Pe(m.length,v.length)}(n.mapValue,e.mapValue);default:throw Ae(23264,{Pe:t})}}function Ub(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Pe(n,e);const t=ys(n),i=ys(e),a=Pe(t.seconds,i.seconds);return a!==0?a:Pe(t.nanos,i.nanos)}function zb(n,e){const t=n.values||[],i=e.values||[];for(let a=0;a<t.length&&a<i.length;++a){const l=Bo(t[a],i[a]);if(l)return l}return Pe(t.length,i.length)}function qo(n){return Wp(n)}function Wp(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const i=ys(t);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return vs(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Ee.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let i="[",a=!0;for(const l of t.values||[])a?a=!1:i+=",",i+=Wp(l);return i+"]"}(n.arrayValue):"mapValue"in n?function(t){const i=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const c of i)l?l=!1:a+=",",a+=`${c}:${Wp(t.fields[c])}`;return a+"}"}(n.mapValue):Ae(61005,{value:n})}function $d(n){switch(_s(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Lh(n);return e?16+$d(e):16;case 5:return 2*n.stringValue.length;case 6:return vs(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((a,l)=>a+$d(l),0)}(n.arrayValue);case 10:case 11:return function(i){let a=0;return As(i.fields,(l,c)=>{a+=l.length+$d(c)}),a}(n.mapValue);default:throw Ae(13486,{value:n})}}function Bb(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Xp(n){return!!n&&"integerValue"in n}function Bg(n){return!!n&&"arrayValue"in n}function qb(n){return!!n&&"nullValue"in n}function Fb(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Yd(n){return!!n&&"mapValue"in n}function dD(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[R1])===null||t===void 0?void 0:t.stringValue)===C1}function Su(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return As(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=Su(i)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Su(n.arrayValue.values[t]);return e}return Object.assign({},n)}function hD(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===cD}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e){this.value=e}static empty(){return new wn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Yd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Su(t)}setAll(e){let t=en.emptyPath(),i={},a=[];e.forEach((c,f)=>{if(!t.isImmediateParentOf(f)){const m=this.getFieldsMap(t);this.applyChanges(m,i,a),i={},a=[],t=f.popLast()}c?i[f.lastSegment()]=Su(c):a.push(f.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,i,a)}delete(e){const t=this.field(e.popLast());Yd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Lr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let a=t.mapValue.fields[e.get(i)];Yd(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,i){As(t,(a,l)=>e[a]=l);for(const a of i)delete e[a]}clone(){return new wn(Su(this.value))}}function N1(n){const e=[];return As(n.fields,(t,i)=>{const a=new en([t]);if(Yd(i)){const l=N1(i.mapValue).fields;if(l.length===0)e.push(a);else for(const c of l)e.push(a.child(c))}else e.push(a)}),new kn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e,t,i,a,l,c,f){this.key=e,this.documentType=t,this.version=i,this.readTime=a,this.createTime=l,this.data=c,this.documentState=f}static newInvalidDocument(e){return new ln(e,0,Re.min(),Re.min(),Re.min(),wn.empty(),0)}static newFoundDocument(e,t,i,a){return new ln(e,1,t,Re.min(),i,a,0)}static newNoDocument(e,t){return new ln(e,2,t,Re.min(),Re.min(),wn.empty(),0)}static newUnknownDocument(e,t){return new ln(e,3,t,Re.min(),Re.min(),wn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=wn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=wn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ln&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ln(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mh{constructor(e,t){this.position=e,this.inclusive=t}}function Hb(n,e,t){let i=0;for(let a=0;a<n.position.length;a++){const l=e[a],c=n.position[a];if(l.field.isKeyField()?i=Ee.comparator(Ee.fromName(c.referenceValue),t.key):i=Bo(c,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function Gb(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Lr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vu{constructor(e,t="asc"){this.field=e,this.dir=t}}function fD(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I1{}class Nt extends I1{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new pD(e,t,i):t==="array-contains"?new vD(e,i):t==="in"?new _D(e,i):t==="not-in"?new bD(e,i):t==="array-contains-any"?new ED(e,i):new Nt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new gD(e,i):new yD(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Bo(t,this.value)):t!==null&&_s(this.value)===_s(t)&&this.matchesComparison(Bo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ae(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class lr extends I1{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new lr(e,t)}matches(e){return D1(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function D1(n){return n.op==="and"}function O1(n){return mD(n)&&D1(n)}function mD(n){for(const e of n.filters)if(e instanceof lr)return!1;return!0}function Zp(n){if(n instanceof Nt)return n.field.canonicalString()+n.op.toString()+qo(n.value);if(O1(n))return n.filters.map(e=>Zp(e)).join(",");{const e=n.filters.map(t=>Zp(t)).join(",");return`${n.op}(${e})`}}function P1(n,e){return n instanceof Nt?function(i,a){return a instanceof Nt&&i.op===a.op&&i.field.isEqual(a.field)&&Lr(i.value,a.value)}(n,e):n instanceof lr?function(i,a){return a instanceof lr&&i.op===a.op&&i.filters.length===a.filters.length?i.filters.reduce((l,c,f)=>l&&P1(c,a.filters[f]),!0):!1}(n,e):void Ae(19439)}function M1(n){return n instanceof Nt?function(t){return`${t.field.canonicalString()} ${t.op} ${qo(t.value)}`}(n):n instanceof lr?function(t){return t.op.toString()+" {"+t.getFilters().map(M1).join(" ,")+"}"}(n):"Filter"}class pD extends Nt{constructor(e,t,i){super(e,t,i),this.key=Ee.fromName(i.referenceValue)}matches(e){const t=Ee.comparator(e.key,this.key);return this.matchesComparison(t)}}class gD extends Nt{constructor(e,t){super(e,"in",t),this.keys=j1("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class yD extends Nt{constructor(e,t){super(e,"not-in",t),this.keys=j1("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function j1(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(i=>Ee.fromName(i.referenceValue))}class vD extends Nt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Bg(t)&&ku(t.arrayValue,this.value)}}class _D extends Nt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&ku(this.value.arrayValue,t)}}class bD extends Nt{constructor(e,t){super(e,"not-in",t)}matches(e){if(ku(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!ku(this.value.arrayValue,t)}}class ED extends Nt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Bg(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>ku(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TD{constructor(e,t=null,i=[],a=[],l=null,c=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=a,this.limit=l,this.startAt=c,this.endAt=f,this.Ie=null}}function $b(n,e=null,t=[],i=[],a=null,l=null,c=null){return new TD(n,e,t,i,a,l,c)}function qg(n){const e=Ne(n);if(e.Ie===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>Zp(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>function(l){return l.field.canonicalString()+l.dir}(i)).join(","),Vh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>qo(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>qo(i)).join(",")),e.Ie=t}return e.Ie}function Fg(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!fD(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!P1(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Gb(n.startAt,e.startAt)&&Gb(n.endAt,e.endAt)}function Jp(n){return Ee.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(e,t=null,i=[],a=[],l=null,c="F",f=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=a,this.limit=l,this.limitType=c,this.startAt=f,this.endAt=m,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function wD(n,e,t,i,a,l,c,f){return new tl(n,e,t,i,a,l,c,f)}function Hg(n){return new tl(n)}function Yb(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function k1(n){return n.collectionGroup!==null}function Ru(n){const e=Ne(n);if(e.Ee===null){e.Ee=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ee.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let f=new kt(en.comparator);return c.filters.forEach(m=>{m.getFlattenedFilters().forEach(y=>{y.isInequality()&&(f=f.add(y.field))})}),f})(e).forEach(l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ee.push(new Vu(l,i))}),t.has(en.keyField().canonicalString())||e.Ee.push(new Vu(en.keyField(),i))}return e.Ee}function kr(n){const e=Ne(n);return e.de||(e.de=xD(e,Ru(n))),e.de}function xD(n,e){if(n.limitType==="F")return $b(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(a=>{const l=a.dir==="desc"?"asc":"desc";return new Vu(a.field,l)});const t=n.endAt?new mh(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new mh(n.startAt.position,n.startAt.inclusive):null;return $b(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function eg(n,e){const t=n.filters.concat([e]);return new tl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function ph(n,e,t){return new tl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Uh(n,e){return Fg(kr(n),kr(e))&&n.limitType===e.limitType}function V1(n){return`${qg(kr(n))}|lt:${n.limitType}`}function Ro(n){return`Query(target=${function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map(a=>M1(a)).join(", ")}]`),Vh(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map(a=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(a)).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(a=>qo(a)).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(a=>qo(a)).join(",")),`Target(${i})`}(kr(n))}; limitType=${n.limitType})`}function zh(n,e){return e.isFoundDocument()&&function(i,a){const l=a.key.path;return i.collectionGroup!==null?a.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):Ee.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)}(n,e)&&function(i,a){for(const l of Ru(i))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0}(n,e)&&function(i,a){for(const l of i.filters)if(!l.matches(a))return!1;return!0}(n,e)&&function(i,a){return!(i.startAt&&!function(c,f,m){const y=Hb(c,f,m);return c.inclusive?y<=0:y<0}(i.startAt,Ru(i),a)||i.endAt&&!function(c,f,m){const y=Hb(c,f,m);return c.inclusive?y>=0:y>0}(i.endAt,Ru(i),a))}(n,e)}function AD(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function L1(n){return(e,t)=>{let i=!1;for(const a of Ru(n)){const l=SD(a,e,t);if(l!==0)return l;i=i||a.field.isKeyField()}return 0}}function SD(n,e,t){const i=n.field.isKeyField()?Ee.comparator(e.key,t.key):function(l,c,f){const m=c.data.field(l),y=f.data.field(l);return m!==null&&y!==null?Bo(m,y):Ae(42886)}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Ae(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[a,l]of i)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),a=this.inner[i];if(a===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return i.length===1?delete this.inner[t]:i.splice(a,1),this.innerSize--,!0;return!1}forEach(e){As(this.inner,(t,i)=>{for(const[a,l]of i)e(a,l)})}isEmpty(){return E1(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RD=new mt(Ee.comparator);function wi(){return RD}const U1=new mt(Ee.comparator);function Eu(...n){let e=U1;for(const t of n)e=e.insert(t.key,t);return e}function z1(n){let e=U1;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function pa(){return Cu()}function B1(){return Cu()}function Cu(){return new Ca(n=>n.toString(),(n,e)=>n.isEqual(e))}const CD=new mt(Ee.comparator),ND=new kt(Ee.comparator);function Ue(...n){let e=ND;for(const t of n)e=e.add(t);return e}const ID=new kt(Pe);function DD(){return ID}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gg(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:dh(e)?"-0":e}}function q1(n){return{integerValue:""+n}}function OD(n,e){return sD(e)?q1(e):Gg(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh{constructor(){this._=void 0}}function PD(n,e,t){return n instanceof Lu?function(a,l){const c={fields:{[x1]:{stringValue:w1},[S1]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&zg(l)&&(l=Lh(l)),l&&(c.fields[A1]=l),{mapValue:c}}(t,e):n instanceof Uu?H1(n,e):n instanceof zu?G1(n,e):function(a,l){const c=F1(a,l),f=Kb(c)+Kb(a.Re);return Xp(c)&&Xp(a.Re)?q1(f):Gg(a.serializer,f)}(n,e)}function MD(n,e,t){return n instanceof Uu?H1(n,e):n instanceof zu?G1(n,e):t}function F1(n,e){return n instanceof gh?function(i){return Xp(i)||function(l){return!!l&&"doubleValue"in l}(i)}(e)?e:{integerValue:0}:null}class Lu extends Bh{}class Uu extends Bh{constructor(e){super(),this.elements=e}}function H1(n,e){const t=$1(e);for(const i of n.elements)t.some(a=>Lr(a,i))||t.push(i);return{arrayValue:{values:t}}}class zu extends Bh{constructor(e){super(),this.elements=e}}function G1(n,e){let t=$1(e);for(const i of n.elements)t=t.filter(a=>!Lr(a,i));return{arrayValue:{values:t}}}class gh extends Bh{constructor(e,t){super(),this.serializer=e,this.Re=t}}function Kb(n){return wt(n.integerValue||n.doubleValue)}function $1(n){return Bg(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jD{constructor(e,t){this.field=e,this.transform=t}}function kD(n,e){return n.field.isEqual(e.field)&&function(i,a){return i instanceof Uu&&a instanceof Uu||i instanceof zu&&a instanceof zu?zo(i.elements,a.elements,Lr):i instanceof gh&&a instanceof gh?Lr(i.Re,a.Re):i instanceof Lu&&a instanceof Lu}(n.transform,e.transform)}class VD{constructor(e,t){this.version=e,this.transformResults=t}}class Xn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Xn}static exists(e){return new Xn(void 0,e)}static updateTime(e){return new Xn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Kd(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class qh{}function Y1(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new $g(n.key,Xn.none()):new Zu(n.key,n.data,Xn.none());{const t=n.data,i=wn.empty();let a=new kt(en.comparator);for(let l of e.fields)if(!a.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?i.delete(l):i.set(l,c),a=a.add(l)}return new Ss(n.key,i,new kn(a.toArray()),Xn.none())}}function LD(n,e,t){n instanceof Zu?function(a,l,c){const f=a.value.clone(),m=Wb(a.fieldTransforms,l,c.transformResults);f.setAll(m),l.convertToFoundDocument(c.version,f).setHasCommittedMutations()}(n,e,t):n instanceof Ss?function(a,l,c){if(!Kd(a.precondition,l))return void l.convertToUnknownDocument(c.version);const f=Wb(a.fieldTransforms,l,c.transformResults),m=l.data;m.setAll(K1(a)),m.setAll(f),l.convertToFoundDocument(c.version,m).setHasCommittedMutations()}(n,e,t):function(a,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()}(0,e,t)}function Nu(n,e,t,i){return n instanceof Zu?function(l,c,f,m){if(!Kd(l.precondition,c))return f;const y=l.value.clone(),v=Xb(l.fieldTransforms,m,c);return y.setAll(v),c.convertToFoundDocument(c.version,y).setHasLocalMutations(),null}(n,e,t,i):n instanceof Ss?function(l,c,f,m){if(!Kd(l.precondition,c))return f;const y=Xb(l.fieldTransforms,m,c),v=c.data;return v.setAll(K1(l)),v.setAll(y),c.convertToFoundDocument(c.version,v).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(E=>E.field))}(n,e,t,i):function(l,c,f){return Kd(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):f}(n,e,t)}function UD(n,e){let t=null;for(const i of n.fieldTransforms){const a=e.data.field(i.field),l=F1(i.transform,a||null);l!=null&&(t===null&&(t=wn.empty()),t.set(i.field,l))}return t||null}function Qb(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(i,a){return i===void 0&&a===void 0||!(!i||!a)&&zo(i,a,(l,c)=>kD(l,c))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Zu extends qh{constructor(e,t,i,a=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Ss extends qh{constructor(e,t,i,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function K1(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}}),e}function Wb(n,e,t){const i=new Map;Qe(n.length===t.length,32656,{Ve:t.length,me:n.length});for(let a=0;a<t.length;a++){const l=n[a],c=l.transform,f=e.data.field(l.field);i.set(l.field,MD(c,f,t[a]))}return i}function Xb(n,e,t){const i=new Map;for(const a of n){const l=a.transform,c=t.data.field(a.field);i.set(a.field,PD(l,c,e))}return i}class $g extends qh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class zD extends qh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BD{constructor(e,t,i,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=a}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&LD(l,e,i[a])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=Nu(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=Nu(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=B1();return this.mutations.forEach(a=>{const l=e.get(a.key),c=l.overlayedDocument;let f=this.applyToLocalView(c,l.mutatedFields);f=t.has(a.key)?null:f;const m=Y1(c,f);m!==null&&i.set(a.key,m),c.isValidDocument()||c.convertToNoDocument(Re.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ue())}isEqual(e){return this.batchId===e.batchId&&zo(this.mutations,e.mutations,(t,i)=>Qb(t,i))&&zo(this.baseMutations,e.baseMutations,(t,i)=>Qb(t,i))}}class Yg{constructor(e,t,i,a){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=a}static from(e,t,i){Qe(e.mutations.length===i.length,58842,{fe:e.mutations.length,ge:i.length});let a=function(){return CD}();const l=e.mutations;for(let c=0;c<l.length;c++)a=a.insert(l[c].key,i[c].version);return new Yg(e,t,i,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qD{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FD{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ct,Fe;function HD(n){switch(n){case ie.OK:return Ae(64938);case ie.CANCELLED:case ie.UNKNOWN:case ie.DEADLINE_EXCEEDED:case ie.RESOURCE_EXHAUSTED:case ie.INTERNAL:case ie.UNAVAILABLE:case ie.UNAUTHENTICATED:return!1;case ie.INVALID_ARGUMENT:case ie.NOT_FOUND:case ie.ALREADY_EXISTS:case ie.PERMISSION_DENIED:case ie.FAILED_PRECONDITION:case ie.ABORTED:case ie.OUT_OF_RANGE:case ie.UNIMPLEMENTED:case ie.DATA_LOSS:return!0;default:return Ae(15467,{code:n})}}function Q1(n){if(n===void 0)return Ti("GRPC error has no .code"),ie.UNKNOWN;switch(n){case Ct.OK:return ie.OK;case Ct.CANCELLED:return ie.CANCELLED;case Ct.UNKNOWN:return ie.UNKNOWN;case Ct.DEADLINE_EXCEEDED:return ie.DEADLINE_EXCEEDED;case Ct.RESOURCE_EXHAUSTED:return ie.RESOURCE_EXHAUSTED;case Ct.INTERNAL:return ie.INTERNAL;case Ct.UNAVAILABLE:return ie.UNAVAILABLE;case Ct.UNAUTHENTICATED:return ie.UNAUTHENTICATED;case Ct.INVALID_ARGUMENT:return ie.INVALID_ARGUMENT;case Ct.NOT_FOUND:return ie.NOT_FOUND;case Ct.ALREADY_EXISTS:return ie.ALREADY_EXISTS;case Ct.PERMISSION_DENIED:return ie.PERMISSION_DENIED;case Ct.FAILED_PRECONDITION:return ie.FAILED_PRECONDITION;case Ct.ABORTED:return ie.ABORTED;case Ct.OUT_OF_RANGE:return ie.OUT_OF_RANGE;case Ct.UNIMPLEMENTED:return ie.UNIMPLEMENTED;case Ct.DATA_LOSS:return ie.DATA_LOSS;default:return Ae(39323,{code:n})}}(Fe=Ct||(Ct={}))[Fe.OK=0]="OK",Fe[Fe.CANCELLED=1]="CANCELLED",Fe[Fe.UNKNOWN=2]="UNKNOWN",Fe[Fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Fe[Fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Fe[Fe.NOT_FOUND=5]="NOT_FOUND",Fe[Fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Fe[Fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Fe[Fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Fe[Fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Fe[Fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Fe[Fe.ABORTED=10]="ABORTED",Fe[Fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Fe[Fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Fe[Fe.INTERNAL=13]="INTERNAL",Fe[Fe.UNAVAILABLE=14]="UNAVAILABLE",Fe[Fe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GD=new fs([4294967295,4294967295],0);function Zb(n){const e=v1().encode(n),t=new c1;return t.update(e),new Uint8Array(t.digest())}function Jb(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new fs([t,i],0),new fs([a,l],0)]}class Kg{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Tu(`Invalid padding: ${t}`);if(i<0)throw new Tu(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Tu(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Tu(`Invalid padding when bitmap length is 0: ${t}`);this.pe=8*e.length-t,this.ye=fs.fromNumber(this.pe)}we(e,t,i){let a=e.add(t.multiply(fs.fromNumber(i)));return a.compare(GD)===1&&(a=new fs([a.getBits(0),a.getBits(1)],0)),a.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const t=Zb(e),[i,a]=Jb(t);for(let l=0;l<this.hashCount;l++){const c=this.we(i,a,l);if(!this.be(c))return!1}return!0}static create(e,t,i){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new Kg(l,a,t);return i.forEach(f=>c.insert(f)),c}insert(e){if(this.pe===0)return;const t=Zb(e),[i,a]=Jb(t);for(let l=0;l<this.hashCount;l++){const c=this.we(i,a,l);this.Se(c)}}Se(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Tu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fh{constructor(e,t,i,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const a=new Map;return a.set(e,Ju.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Fh(Re.min(),a,new mt(Pe),wi(),Ue())}}class Ju{constructor(e,t,i,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Ju(i,t,Ue(),Ue(),Ue())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qd{constructor(e,t,i,a){this.De=e,this.removedTargetIds=t,this.key=i,this.ve=a}}class W1{constructor(e,t){this.targetId=e,this.Ce=t}}class X1{constructor(e,t,i=tn.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=a}}class eE{constructor(){this.Fe=0,this.Me=tE(),this.xe=tn.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=Ue(),t=Ue(),i=Ue();return this.Me.forEach((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:i=i.add(a);break;default:Ae(38017,{changeType:l})}}),new Ju(this.xe,this.Oe,e,t,i)}Qe(){this.Ne=!1,this.Me=tE()}$e(e,t){this.Ne=!0,this.Me=this.Me.insert(e,t)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,Qe(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class $D{constructor(e){this.ze=e,this.je=new Map,this.He=wi(),this.Je=kd(),this.Ye=kd(),this.Ze=new mt(Pe)}Xe(e){for(const t of e.De)e.ve&&e.ve.isFoundDocument()?this.et(t,e.ve):this.tt(t,e.key,e.ve);for(const t of e.removedTargetIds)this.tt(t,e.key,e.ve)}nt(e){this.forEachTarget(e,t=>{const i=this.rt(t);switch(e.state){case 0:this.it(t)&&i.ke(e.resumeToken);break;case 1:i.We(),i.Be||i.Qe(),i.ke(e.resumeToken);break;case 2:i.We(),i.Be||this.removeTarget(t);break;case 3:this.it(t)&&(i.Ge(),i.ke(e.resumeToken));break;case 4:this.it(t)&&(this.st(t),i.ke(e.resumeToken));break;default:Ae(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.je.forEach((i,a)=>{this.it(a)&&t(a)})}ot(e){const t=e.targetId,i=e.Ce.count,a=this._t(t);if(a){const l=a.target;if(Jp(l))if(i===0){const c=new Ee(l.path);this.tt(t,c,ln.newNoDocument(c,Re.min()))}else Qe(i===1,20013,{expectedCount:i});else{const c=this.ut(t);if(c!==i){const f=this.ct(e),m=f?this.lt(f,e,c):1;if(m!==0){this.st(t);const y=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,y)}}}}}ct(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:a=0},hashCount:l=0}=t;let c,f;try{c=vs(i).toUint8Array()}catch(m){if(m instanceof T1)return Uo("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{f=new Kg(c,a,l)}catch(m){return Uo(m instanceof Tu?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return f.pe===0?null:f}lt(e,t,i){return t.Ce.count===i-this.Tt(e,t.targetId)?0:2}Tt(e,t){const i=this.ze.getRemoteKeysForTarget(t);let a=0;return i.forEach(l=>{const c=this.ze.Pt(),f=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(f)||(this.tt(t,l,null),a++)}),a}It(e){const t=new Map;this.je.forEach((l,c)=>{const f=this._t(c);if(f){if(l.current&&Jp(f.target)){const m=new Ee(f.target.path);this.Et(m).has(c)||this.dt(c,m)||this.tt(c,m,ln.newNoDocument(m,e))}l.Le&&(t.set(c,l.qe()),l.Qe())}});let i=Ue();this.Ye.forEach((l,c)=>{let f=!0;c.forEachWhile(m=>{const y=this._t(m);return!y||y.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)}),f&&(i=i.add(l))}),this.He.forEach((l,c)=>c.setReadTime(e));const a=new Fh(e,t,this.Ze,this.He,i);return this.He=wi(),this.Je=kd(),this.Ye=kd(),this.Ze=new mt(Pe),a}et(e,t){if(!this.it(e))return;const i=this.dt(e,t.key)?2:0;this.rt(e).$e(t.key,i),this.He=this.He.insert(t.key,t),this.Je=this.Je.insert(t.key,this.Et(t.key).add(e)),this.Ye=this.Ye.insert(t.key,this.At(t.key).add(e))}tt(e,t,i){if(!this.it(e))return;const a=this.rt(e);this.dt(e,t)?a.$e(t,1):a.Ue(t),this.Ye=this.Ye.insert(t,this.At(t).delete(e)),this.Ye=this.Ye.insert(t,this.At(t).add(e)),i&&(this.He=this.He.insert(t,i))}removeTarget(e){this.je.delete(e)}ut(e){const t=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let t=this.je.get(e);return t||(t=new eE,this.je.set(e,t)),t}At(e){let t=this.Ye.get(e);return t||(t=new kt(Pe),this.Ye=this.Ye.insert(e,t)),t}Et(e){let t=this.Je.get(e);return t||(t=new kt(Pe),this.Je=this.Je.insert(e,t)),t}it(e){const t=this._t(e)!==null;return t||pe("WatchChangeAggregator","Detected inactive target",e),t}_t(e){const t=this.je.get(e);return t&&t.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new eE),this.ze.getRemoteKeysForTarget(e).forEach(t=>{this.tt(e,t,null)})}dt(e,t){return this.ze.getRemoteKeysForTarget(e).has(t)}}function kd(){return new mt(Ee.comparator)}function tE(){return new mt(Ee.comparator)}const YD={asc:"ASCENDING",desc:"DESCENDING"},KD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},QD={and:"AND",or:"OR"};class WD{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function tg(n,e){return n.useProto3Json||Vh(e)?e:{value:e}}function yh(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Z1(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function XD(n,e){return yh(n,e.toTimestamp())}function Vr(n){return Qe(!!n,49232),Re.fromTimestamp(function(t){const i=ys(t);return new jt(i.seconds,i.nanos)}(n))}function Qg(n,e){return ng(n,e).canonicalString()}function ng(n,e){const t=function(a){return new ot(["projects",a.projectId,"databases",a.database])}(n).child("documents");return e===void 0?t:t.child(e)}function J1(n){const e=ot.fromString(n);return Qe(iw(e),10190,{key:e.toString()}),e}function rg(n,e){return Qg(n.databaseId,e.path)}function Cp(n,e){const t=J1(e);if(t.get(1)!==n.databaseId.projectId)throw new me(ie.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new me(ie.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ee(tw(t))}function ew(n,e){return Qg(n.databaseId,e)}function ZD(n){const e=J1(n);return e.length===4?ot.emptyPath():tw(e)}function ig(n){return new ot(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function tw(n){return Qe(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function nE(n,e,t){return{name:rg(n,e),fields:t.value.mapValue.fields}}function JD(n,e){let t;if("targetChange"in e){e.targetChange;const i=function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Ae(39313,{state:y})}(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=function(y,v){return y.useProto3Json?(Qe(v===void 0||typeof v=="string",58123),tn.fromBase64String(v||"")):(Qe(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),tn.fromUint8Array(v||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,f=c&&function(y){const v=y.code===void 0?ie.UNKNOWN:Q1(y.code);return new me(v,y.message||"")}(c);t=new X1(i,a,l,f||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const a=Cp(n,i.document.name),l=Vr(i.document.updateTime),c=i.document.createTime?Vr(i.document.createTime):Re.min(),f=new wn({mapValue:{fields:i.document.fields}}),m=ln.newFoundDocument(a,l,c,f),y=i.targetIds||[],v=i.removedTargetIds||[];t=new Qd(y,v,m.key,m)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const a=Cp(n,i.document),l=i.readTime?Vr(i.readTime):Re.min(),c=ln.newNoDocument(a,l),f=i.removedTargetIds||[];t=new Qd([],f,c.key,c)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const a=Cp(n,i.document),l=i.removedTargetIds||[];t=new Qd([],l,a,null)}else{if(!("filter"in e))return Ae(11601,{Vt:e});{e.filter;const i=e.filter;i.targetId;const{count:a=0,unchangedNames:l}=i,c=new FD(a,l),f=i.targetId;t=new W1(f,c)}}return t}function eO(n,e){let t;if(e instanceof Zu)t={update:nE(n,e.key,e.value)};else if(e instanceof $g)t={delete:rg(n,e.key)};else if(e instanceof Ss)t={update:nE(n,e.key,e.data),updateMask:uO(e.fieldMask)};else{if(!(e instanceof zD))return Ae(16599,{ft:e.type});t={verify:rg(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(l,c){const f=c.transform;if(f instanceof Lu)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof Uu)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof zu)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof gh)return{fieldPath:c.field.canonicalString(),increment:f.Re};throw Ae(20930,{transform:c.transform})}(0,i))),e.precondition.isNone||(t.currentDocument=function(a,l){return l.updateTime!==void 0?{updateTime:XD(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Ae(27497)}(n,e.precondition)),t}function tO(n,e){return n&&n.length>0?(Qe(e!==void 0,14353),n.map(t=>function(a,l){let c=a.updateTime?Vr(a.updateTime):Vr(l);return c.isEqual(Re.min())&&(c=Vr(l)),new VD(c,a.transformResults||[])}(t,e))):[]}function nO(n,e){return{documents:[ew(n,e.path)]}}function rO(n,e){const t={structuredQuery:{}},i=e.path;let a;e.collectionGroup!==null?(a=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=ew(n,a);const l=function(y){if(y.length!==0)return rw(lr.create(y,"and"))}(e.filters);l&&(t.structuredQuery.where=l);const c=function(y){if(y.length!==0)return y.map(v=>function(w){return{field:Co(w.field),direction:aO(w.dir)}}(v))}(e.orderBy);c&&(t.structuredQuery.orderBy=c);const f=tg(n,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=function(y){return{before:y.inclusive,values:y.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(y){return{before:!y.inclusive,values:y.position}}(e.endAt)),{gt:t,parent:a}}function iO(n){let e=ZD(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let a=null;if(i>0){Qe(i===1,65062);const v=t.from[0];v.allDescendants?a=v.collectionId:e=e.child(v.collectionId)}let l=[];t.where&&(l=function(E){const w=nw(E);return w instanceof lr&&O1(w)?w.getFilters():[w]}(t.where));let c=[];t.orderBy&&(c=function(E){return E.map(w=>function(S){return new Vu(No(S.field),function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction))}(w))}(t.orderBy));let f=null;t.limit&&(f=function(E){let w;return w=typeof E=="object"?E.value:E,Vh(w)?null:w}(t.limit));let m=null;t.startAt&&(m=function(E){const w=!!E.before,R=E.values||[];return new mh(R,w)}(t.startAt));let y=null;return t.endAt&&(y=function(E){const w=!E.before,R=E.values||[];return new mh(R,w)}(t.endAt)),wD(e,a,c,l,f,"F",m,y)}function sO(n,e){const t=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ae(28987,{purpose:a})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function nw(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=No(t.unaryFilter.field);return Nt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const a=No(t.unaryFilter.field);return Nt.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=No(t.unaryFilter.field);return Nt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=No(t.unaryFilter.field);return Nt.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ae(61313);default:return Ae(60726)}}(n):n.fieldFilter!==void 0?function(t){return Nt.create(No(t.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ae(58110);default:return Ae(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return lr.create(t.compositeFilter.filters.map(i=>nw(i)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Ae(1026)}}(t.compositeFilter.op))}(n):Ae(30097,{filter:n})}function aO(n){return YD[n]}function oO(n){return KD[n]}function lO(n){return QD[n]}function Co(n){return{fieldPath:n.canonicalString()}}function No(n){return en.fromServerFormat(n.fieldPath)}function rw(n){return n instanceof Nt?function(t){if(t.op==="=="){if(Fb(t.value))return{unaryFilter:{field:Co(t.field),op:"IS_NAN"}};if(qb(t.value))return{unaryFilter:{field:Co(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Fb(t.value))return{unaryFilter:{field:Co(t.field),op:"IS_NOT_NAN"}};if(qb(t.value))return{unaryFilter:{field:Co(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Co(t.field),op:oO(t.op),value:t.value}}}(n):n instanceof lr?function(t){const i=t.getFilters().map(a=>rw(a));return i.length===1?i[0]:{compositeFilter:{op:lO(t.op),filters:i}}}(n):Ae(54877,{filter:n})}function uO(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function iw(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us{constructor(e,t,i,a,l=Re.min(),c=Re.min(),f=tn.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=f,this.expectedCount=m}withSequenceNumber(e){return new us(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new us(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new us(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new us(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cO{constructor(e){this.wt=e}}function dO(n){const e=iO({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?ph(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hO{constructor(){this.yn=new fO}addToCollectionParentIndex(e,t){return this.yn.add(t),ae.resolve()}getCollectionParents(e,t){return ae.resolve(this.yn.getEntries(t))}addFieldIndex(e,t){return ae.resolve()}deleteFieldIndex(e,t){return ae.resolve()}deleteAllFieldIndexes(e){return ae.resolve()}createTargetIndexes(e,t){return ae.resolve()}getDocumentsMatchingTarget(e,t){return ae.resolve(null)}getIndexType(e,t){return ae.resolve(0)}getFieldIndexes(e,t){return ae.resolve([])}getNextCollectionGroupToUpdate(e){return ae.resolve(null)}getMinOffset(e,t){return ae.resolve(gs.min())}getMinOffsetFromCollectionGroup(e,t){return ae.resolve(gs.min())}updateCollectionGroup(e,t,i){return ae.resolve()}updateIndexEntries(e,t){return ae.resolve()}}class fO{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t]||new kt(ot.comparator),l=!a.has(i);return this.index[t]=a.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t];return a&&a.has(i)}getEntries(e){return(this.index[e]||new kt(ot.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},sw=41943040;class Tn{static withCacheSize(e){return new Tn(e,Tn.DEFAULT_COLLECTION_PERCENTILE,Tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Tn.DEFAULT_COLLECTION_PERCENTILE=10,Tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Tn.DEFAULT=new Tn(sw,Tn.DEFAULT_COLLECTION_PERCENTILE,Tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Tn.DISABLED=new Tn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(e){this.nr=e}next(){return this.nr+=2,this.nr}static rr(){return new Fo(0)}static ir(){return new Fo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iE="LruGarbageCollector",mO=1048576;function sE([n,e],[t,i]){const a=Pe(n,t);return a===0?Pe(e,i):a}class pO{constructor(e){this.cr=e,this.buffer=new kt(sE),this.lr=0}hr(){return++this.lr}Pr(e){const t=[e,this.hr()];if(this.buffer.size<this.cr)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();sE(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class gO{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Tr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ir(6e4)}stop(){this.Tr&&(this.Tr.cancel(),this.Tr=null)}get started(){return this.Tr!==null}Ir(e){pe(iE,`Garbage collection scheduled in ${e}ms`),this.Tr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Tr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){el(t)?pe(iE,"Ignoring IndexedDB error during garbage collection: ",t):await Jo(t)}await this.Ir(3e5)})}}class yO{constructor(e,t){this.Er=e,this.params=t}calculateTargetCount(e,t){return this.Er.dr(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(t===0)return ae.resolve(kh.le);const i=new pO(t);return this.Er.forEachTarget(e,a=>i.Pr(a.sequenceNumber)).next(()=>this.Er.Ar(e,a=>i.Pr(a))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.Er.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Er.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(pe("LruGarbageCollector","Garbage collection skipped; disabled"),ae.resolve(rE)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(pe("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),rE):this.Rr(e,t))}getCacheSize(e){return this.Er.getCacheSize(e)}Rr(e,t){let i,a,l,c,f,m,y;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(E=>(E>this.params.maximumSequenceNumbersToCollect?(pe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),a=this.params.maximumSequenceNumbersToCollect):a=E,c=Date.now(),this.nthSequenceNumber(e,a))).next(E=>(i=E,f=Date.now(),this.removeTargets(e,i,t))).next(E=>(l=E,m=Date.now(),this.removeOrphanedDocuments(e,i))).next(E=>(y=Date.now(),So()<=Le.DEBUG&&pe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-v}ms
	Determined least recently used ${a} in `+(f-c)+`ms
	Removed ${l} targets in `+(m-f)+`ms
	Removed ${E} documents in `+(y-m)+`ms
Total Duration: ${y-v}ms`),ae.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:E})))}}function vO(n,e){return new yO(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _O{constructor(){this.changes=new Ca(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ln.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?ae.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bO{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EO{constructor(e,t,i,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=a}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(a=>(i=a,this.remoteDocumentCache.getEntry(e,t))).next(a=>(i!==null&&Nu(i.mutation,a,kn.empty(),jt.now()),a))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,Ue()).next(()=>i))}getLocalViewOfDocuments(e,t,i=Ue()){const a=pa();return this.populateOverlays(e,a,t).next(()=>this.computeViews(e,t,a,i).next(l=>{let c=Eu();return l.forEach((f,m)=>{c=c.insert(f,m.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const i=pa();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,Ue()))}populateOverlays(e,t,i){const a=[];return i.forEach(l=>{t.has(l)||a.push(l)}),this.documentOverlayCache.getOverlays(e,a).next(l=>{l.forEach((c,f)=>{t.set(c,f)})})}computeViews(e,t,i,a){let l=wi();const c=Cu(),f=function(){return Cu()}();return t.forEach((m,y)=>{const v=i.get(y.key);a.has(y.key)&&(v===void 0||v.mutation instanceof Ss)?l=l.insert(y.key,y):v!==void 0?(c.set(y.key,v.mutation.getFieldMask()),Nu(v.mutation,y,v.mutation.getFieldMask(),jt.now())):c.set(y.key,kn.empty())}),this.recalculateAndSaveOverlays(e,l).next(m=>(m.forEach((y,v)=>c.set(y,v)),t.forEach((y,v)=>{var E;return f.set(y,new bO(v,(E=c.get(y))!==null&&E!==void 0?E:null))}),f))}recalculateAndSaveOverlays(e,t){const i=Cu();let a=new mt((c,f)=>c-f),l=Ue();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const f of c)f.keys().forEach(m=>{const y=t.get(m);if(y===null)return;let v=i.get(m)||kn.empty();v=f.applyToLocalView(y,v),i.set(m,v);const E=(a.get(f.batchId)||Ue()).add(m);a=a.insert(f.batchId,E)})}).next(()=>{const c=[],f=a.getReverseIterator();for(;f.hasNext();){const m=f.getNext(),y=m.key,v=m.value,E=B1();v.forEach(w=>{if(!l.has(w)){const R=Y1(t.get(w),i.get(w));R!==null&&E.set(w,R),l=l.add(w)}}),c.push(this.documentOverlayCache.saveOverlays(e,y,E))}return ae.waitFor(c)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i,a){return function(c){return Ee.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):k1(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,a):this.getDocumentsMatchingCollectionQuery(e,t,i,a)}getNextDocuments(e,t,i,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,a).next(l=>{const c=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,a-l.size):ae.resolve(pa());let f=Pu,m=l;return c.next(y=>ae.forEach(y,(v,E)=>(f<E.largestBatchId&&(f=E.largestBatchId),l.get(v)?ae.resolve():this.remoteDocumentCache.getEntry(e,v).next(w=>{m=m.insert(v,w)}))).next(()=>this.populateOverlays(e,y,l)).next(()=>this.computeViews(e,m,y,Ue())).next(v=>({batchId:f,changes:z1(v)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ee(t)).next(i=>{let a=Eu();return i.isFoundDocument()&&(a=a.insert(i.key,i)),a})}getDocumentsMatchingCollectionGroupQuery(e,t,i,a){const l=t.collectionGroup;let c=Eu();return this.indexManager.getCollectionParents(e,l).next(f=>ae.forEach(f,m=>{const y=function(E,w){return new tl(w,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)}(t,m.child(l));return this.getDocumentsMatchingCollectionQuery(e,y,i,a).next(v=>{v.forEach((E,w)=>{c=c.insert(E,w)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,t,i,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,a))).next(c=>{l.forEach((m,y)=>{const v=y.getKey();c.get(v)===null&&(c=c.insert(v,ln.newInvalidDocument(v)))});let f=Eu();return c.forEach((m,y)=>{const v=l.get(m);v!==void 0&&Nu(v.mutation,y,kn.empty(),jt.now()),zh(t,y)&&(f=f.insert(m,y))}),f})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TO{constructor(e){this.serializer=e,this.Fr=new Map,this.Mr=new Map}getBundleMetadata(e,t){return ae.resolve(this.Fr.get(t))}saveBundleMetadata(e,t){return this.Fr.set(t.id,function(a){return{id:a.id,version:a.version,createTime:Vr(a.createTime)}}(t)),ae.resolve()}getNamedQuery(e,t){return ae.resolve(this.Mr.get(t))}saveNamedQuery(e,t){return this.Mr.set(t.name,function(a){return{name:a.name,query:dO(a.bundledQuery),readTime:Vr(a.readTime)}}(t)),ae.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wO{constructor(){this.overlays=new mt(Ee.comparator),this.Or=new Map}getOverlay(e,t){return ae.resolve(this.overlays.get(t))}getOverlays(e,t){const i=pa();return ae.forEach(t,a=>this.getOverlay(e,a).next(l=>{l!==null&&i.set(a,l)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((a,l)=>{this.St(e,t,l)}),ae.resolve()}removeOverlaysForBatchId(e,t,i){const a=this.Or.get(i);return a!==void 0&&(a.forEach(l=>this.overlays=this.overlays.remove(l)),this.Or.delete(i)),ae.resolve()}getOverlaysForCollection(e,t,i){const a=pa(),l=t.length+1,c=new Ee(t.child("")),f=this.overlays.getIteratorFrom(c);for(;f.hasNext();){const m=f.getNext().value,y=m.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===l&&m.largestBatchId>i&&a.set(m.getKey(),m)}return ae.resolve(a)}getOverlaysForCollectionGroup(e,t,i,a){let l=new mt((y,v)=>y-v);const c=this.overlays.getIterator();for(;c.hasNext();){const y=c.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>i){let v=l.get(y.largestBatchId);v===null&&(v=pa(),l=l.insert(y.largestBatchId,v)),v.set(y.getKey(),y)}}const f=pa(),m=l.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach((y,v)=>f.set(y,v)),!(f.size()>=a)););return ae.resolve(f)}St(e,t,i){const a=this.overlays.get(i.key);if(a!==null){const c=this.Or.get(a.largestBatchId).delete(i.key);this.Or.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new qD(t,i));let l=this.Or.get(t);l===void 0&&(l=Ue(),this.Or.set(t,l)),this.Or.set(t,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xO{constructor(){this.sessionToken=tn.EMPTY_BYTE_STRING}getSessionToken(e){return ae.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ae.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wg{constructor(){this.Nr=new kt(Ft.Br),this.Lr=new kt(Ft.kr)}isEmpty(){return this.Nr.isEmpty()}addReference(e,t){const i=new Ft(e,t);this.Nr=this.Nr.add(i),this.Lr=this.Lr.add(i)}qr(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.Qr(new Ft(e,t))}$r(e,t){e.forEach(i=>this.removeReference(i,t))}Ur(e){const t=new Ee(new ot([])),i=new Ft(t,e),a=new Ft(t,e+1),l=[];return this.Lr.forEachInRange([i,a],c=>{this.Qr(c),l.push(c.key)}),l}Kr(){this.Nr.forEach(e=>this.Qr(e))}Qr(e){this.Nr=this.Nr.delete(e),this.Lr=this.Lr.delete(e)}Wr(e){const t=new Ee(new ot([])),i=new Ft(t,e),a=new Ft(t,e+1);let l=Ue();return this.Lr.forEachInRange([i,a],c=>{l=l.add(c.key)}),l}containsKey(e){const t=new Ft(e,0),i=this.Nr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Ft{constructor(e,t){this.key=e,this.Gr=t}static Br(e,t){return Ee.comparator(e.key,t.key)||Pe(e.Gr,t.Gr)}static kr(e,t){return Pe(e.Gr,t.Gr)||Ee.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AO{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Jn=1,this.zr=new kt(Ft.Br)}checkEmpty(e){return ae.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,a){const l=this.Jn;this.Jn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new BD(l,t,i,a);this.mutationQueue.push(c);for(const f of a)this.zr=this.zr.add(new Ft(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return ae.resolve(c)}lookupMutationBatch(e,t){return ae.resolve(this.jr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,a=this.Hr(i),l=a<0?0:a;return ae.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return ae.resolve(this.mutationQueue.length===0?Ug:this.Jn-1)}getAllMutationBatches(e){return ae.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Ft(t,0),a=new Ft(t,Number.POSITIVE_INFINITY),l=[];return this.zr.forEachInRange([i,a],c=>{const f=this.jr(c.Gr);l.push(f)}),ae.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new kt(Pe);return t.forEach(a=>{const l=new Ft(a,0),c=new Ft(a,Number.POSITIVE_INFINITY);this.zr.forEachInRange([l,c],f=>{i=i.add(f.Gr)})}),ae.resolve(this.Jr(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,a=i.length+1;let l=i;Ee.isDocumentKey(l)||(l=l.child(""));const c=new Ft(new Ee(l),0);let f=new kt(Pe);return this.zr.forEachWhile(m=>{const y=m.key.path;return!!i.isPrefixOf(y)&&(y.length===a&&(f=f.add(m.Gr)),!0)},c),ae.resolve(this.Jr(f))}Jr(e){const t=[];return e.forEach(i=>{const a=this.jr(i);a!==null&&t.push(a)}),t}removeMutationBatch(e,t){Qe(this.Yr(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.zr;return ae.forEach(t.mutations,a=>{const l=new Ft(a.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.zr=i})}Xn(e){}containsKey(e,t){const i=new Ft(t,0),a=this.zr.firstAfterOrEqual(i);return ae.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,ae.resolve()}Yr(e,t){return this.Hr(e)}Hr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}jr(e){const t=this.Hr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SO{constructor(e){this.Zr=e,this.docs=function(){return new mt(Ee.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,a=this.docs.get(i),l=a?a.size:0,c=this.Zr(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return ae.resolve(i?i.document.mutableCopy():ln.newInvalidDocument(t))}getEntries(e,t){let i=wi();return t.forEach(a=>{const l=this.docs.get(a);i=i.insert(a,l?l.document.mutableCopy():ln.newInvalidDocument(a))}),ae.resolve(i)}getDocumentsMatchingQuery(e,t,i,a){let l=wi();const c=t.path,f=new Ee(c.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(f);for(;m.hasNext();){const{key:y,value:{document:v}}=m.getNext();if(!c.isPrefixOf(y.path))break;y.path.length>c.length+1||tD(eD(v),i)<=0||(a.has(v.key)||zh(t,v))&&(l=l.insert(v.key,v.mutableCopy()))}return ae.resolve(l)}getAllFromCollectionGroup(e,t,i,a){Ae(9500)}Xr(e,t){return ae.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new RO(this)}getSize(e){return ae.resolve(this.size)}}class RO extends _O{constructor(e){super(),this.vr=e}applyChanges(e){const t=[];return this.changes.forEach((i,a)=>{a.isValidDocument()?t.push(this.vr.addEntry(e,a)):this.vr.removeEntry(i)}),ae.waitFor(t)}getFromCache(e,t){return this.vr.getEntry(e,t)}getAllFromCache(e,t){return this.vr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CO{constructor(e){this.persistence=e,this.ei=new Ca(t=>qg(t),Fg),this.lastRemoteSnapshotVersion=Re.min(),this.highestTargetId=0,this.ti=0,this.ni=new Wg,this.targetCount=0,this.ri=Fo.rr()}forEachTarget(e,t){return this.ei.forEach((i,a)=>t(a)),ae.resolve()}getLastRemoteSnapshotVersion(e){return ae.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ae.resolve(this.ti)}allocateTargetId(e){return this.highestTargetId=this.ri.next(),ae.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.ti&&(this.ti=t),ae.resolve()}ar(e){this.ei.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ri=new Fo(t),this.highestTargetId=t),e.sequenceNumber>this.ti&&(this.ti=e.sequenceNumber)}addTargetData(e,t){return this.ar(t),this.targetCount+=1,ae.resolve()}updateTargetData(e,t){return this.ar(t),ae.resolve()}removeTargetData(e,t){return this.ei.delete(t.target),this.ni.Ur(t.targetId),this.targetCount-=1,ae.resolve()}removeTargets(e,t,i){let a=0;const l=[];return this.ei.forEach((c,f)=>{f.sequenceNumber<=t&&i.get(f.targetId)===null&&(this.ei.delete(c),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),a++)}),ae.waitFor(l).next(()=>a)}getTargetCount(e){return ae.resolve(this.targetCount)}getTargetData(e,t){const i=this.ei.get(t)||null;return ae.resolve(i)}addMatchingKeys(e,t,i){return this.ni.qr(t,i),ae.resolve()}removeMatchingKeys(e,t,i){this.ni.$r(t,i);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach(c=>{l.push(a.markPotentiallyOrphaned(e,c))}),ae.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.ni.Ur(t),ae.resolve()}getMatchingKeysForTargetId(e,t){const i=this.ni.Wr(t);return ae.resolve(i)}containsKey(e,t){return ae.resolve(this.ni.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aw{constructor(e,t){this.ii={},this.overlays={},this.si=new kh(0),this.oi=!1,this.oi=!0,this._i=new xO,this.referenceDelegate=e(this),this.ai=new CO(this),this.indexManager=new hO,this.remoteDocumentCache=function(a){return new SO(a)}(i=>this.referenceDelegate.ui(i)),this.serializer=new cO(t),this.ci=new TO(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.oi=!1,Promise.resolve()}get started(){return this.oi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new wO,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ii[e.toKey()];return i||(i=new AO(t,this.referenceDelegate),this.ii[e.toKey()]=i),i}getGlobalsCache(){return this._i}getTargetCache(){return this.ai}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.ci}runTransaction(e,t,i){pe("MemoryPersistence","Starting transaction:",e);const a=new NO(this.si.next());return this.referenceDelegate.li(),i(a).next(l=>this.referenceDelegate.hi(a).next(()=>l)).toPromise().then(l=>(a.raiseOnCommittedEvent(),l))}Pi(e,t){return ae.or(Object.values(this.ii).map(i=>()=>i.containsKey(e,t)))}}class NO extends rD{constructor(e){super(),this.currentSequenceNumber=e}}class Xg{constructor(e){this.persistence=e,this.Ti=new Wg,this.Ii=null}static Ei(e){return new Xg(e)}get di(){if(this.Ii)return this.Ii;throw Ae(60996)}addReference(e,t,i){return this.Ti.addReference(i,t),this.di.delete(i.toString()),ae.resolve()}removeReference(e,t,i){return this.Ti.removeReference(i,t),this.di.add(i.toString()),ae.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),ae.resolve()}removeTarget(e,t){this.Ti.Ur(t.targetId).forEach(a=>this.di.add(a.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(a=>{a.forEach(l=>this.di.add(l.toString()))}).next(()=>i.removeTargetData(e,t))}li(){this.Ii=new Set}hi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ae.forEach(this.di,i=>{const a=Ee.fromPath(i);return this.Ai(e,a).next(l=>{l||t.removeEntry(a,Re.min())})}).next(()=>(this.Ii=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ai(e,t).next(i=>{i?this.di.delete(t.toString()):this.di.add(t.toString())})}ui(e){return 0}Ai(e,t){return ae.or([()=>ae.resolve(this.Ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Pi(e,t)])}}class vh{constructor(e,t){this.persistence=e,this.Ri=new Ca(i=>aD(i.path),(i,a)=>i.isEqual(a)),this.garbageCollector=vO(this,t)}static Ei(e,t){return new vh(e,t)}li(){}hi(e){return ae.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.Vr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>t.next(a=>i+a))}Vr(e){let t=0;return this.Ar(e,i=>{t++}).next(()=>t)}Ar(e,t){return ae.forEach(this.Ri,(i,a)=>this.gr(e,i,a).next(l=>l?ae.resolve():t(a)))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.Xr(e,c=>this.gr(e,c,t).next(f=>{f||(i++,l.removeEntry(c,Re.min()))})).next(()=>l.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,t){return this.Ri.set(t,e.currentSequenceNumber),ae.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.Ri.set(i,e.currentSequenceNumber),ae.resolve()}removeReference(e,t,i){return this.Ri.set(i,e.currentSequenceNumber),ae.resolve()}updateLimboDocument(e,t){return this.Ri.set(t,e.currentSequenceNumber),ae.resolve()}ui(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=$d(e.data.value)),t}gr(e,t,i){return ae.or([()=>this.persistence.Pi(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.Ri.get(t);return ae.resolve(a!==void 0&&a>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zg{constructor(e,t,i,a){this.targetId=e,this.fromCache=t,this.ls=i,this.hs=a}static Ps(e,t){let i=Ue(),a=Ue();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new Zg(e,t.fromCache,i,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IO{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DO{constructor(){this.Ts=!1,this.Is=!1,this.Es=100,this.ds=function(){return oC()?8:iD(cn())>0?6:4}()}initialize(e,t){this.As=e,this.indexManager=t,this.Ts=!0}getDocumentsMatchingQuery(e,t,i,a){const l={result:null};return this.Rs(e,t).next(c=>{l.result=c}).next(()=>{if(!l.result)return this.Vs(e,t,a,i).next(c=>{l.result=c})}).next(()=>{if(l.result)return;const c=new IO;return this.fs(e,t,c).next(f=>{if(l.result=f,this.Is)return this.gs(e,t,c,f.size)})}).next(()=>l.result)}gs(e,t,i,a){return i.documentReadCount<this.Es?(So()<=Le.DEBUG&&pe("QueryEngine","SDK will not create cache indexes for query:",Ro(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Es,"documents"),ae.resolve()):(So()<=Le.DEBUG&&pe("QueryEngine","Query:",Ro(t),"scans",i.documentReadCount,"local documents and returns",a,"documents as results."),i.documentReadCount>this.ds*a?(So()<=Le.DEBUG&&pe("QueryEngine","The SDK decides to create cache indexes for query:",Ro(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,kr(t))):ae.resolve())}Rs(e,t){if(Yb(t))return ae.resolve(null);let i=kr(t);return this.indexManager.getIndexType(e,i).next(a=>a===0?null:(t.limit!==null&&a===1&&(t=ph(t,null,"F"),i=kr(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(l=>{const c=Ue(...l);return this.As.getDocuments(e,c).next(f=>this.indexManager.getMinOffset(e,i).next(m=>{const y=this.ps(t,f);return this.ys(t,y,c,m.readTime)?this.Rs(e,ph(t,null,"F")):this.ws(e,y,t,m)}))})))}Vs(e,t,i,a){return Yb(t)||a.isEqual(Re.min())?ae.resolve(null):this.As.getDocuments(e,i).next(l=>{const c=this.ps(t,l);return this.ys(t,c,i,a)?ae.resolve(null):(So()<=Le.DEBUG&&pe("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Ro(t)),this.ws(e,c,t,JI(a,Pu)).next(f=>f))})}ps(e,t){let i=new kt(L1(e));return t.forEach((a,l)=>{zh(e,l)&&(i=i.add(l))}),i}ys(e,t,i,a){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}fs(e,t,i){return So()<=Le.DEBUG&&pe("QueryEngine","Using full collection scan to execute query:",Ro(t)),this.As.getDocumentsMatchingQuery(e,t,gs.min(),i)}ws(e,t,i,a){return this.As.getDocumentsMatchingQuery(e,i,a).next(l=>(t.forEach(c=>{l=l.insert(c.key,c)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jg="LocalStore",OO=3e8;class PO{constructor(e,t,i,a){this.persistence=e,this.bs=t,this.serializer=a,this.Ss=new mt(Pe),this.Ds=new Ca(l=>qg(l),Fg),this.vs=new Map,this.Cs=e.getRemoteDocumentCache(),this.ai=e.getTargetCache(),this.ci=e.getBundleCache(),this.Fs(i)}Fs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new EO(this.Cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Cs.setIndexManager(this.indexManager),this.bs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ss))}}function MO(n,e,t,i){return new PO(n,e,t,i)}async function ow(n,e){const t=Ne(n);return await t.persistence.runTransaction("Handle user change","readonly",i=>{let a;return t.mutationQueue.getAllMutationBatches(i).next(l=>(a=l,t.Fs(e),t.mutationQueue.getAllMutationBatches(i))).next(l=>{const c=[],f=[];let m=Ue();for(const y of a){c.push(y.batchId);for(const v of y.mutations)m=m.add(v.key)}for(const y of l){f.push(y.batchId);for(const v of y.mutations)m=m.add(v.key)}return t.localDocuments.getDocuments(i,m).next(y=>({Ms:y,removedBatchIds:c,addedBatchIds:f}))})})}function jO(n,e){const t=Ne(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const a=e.batch.keys(),l=t.Cs.newChangeBuffer({trackRemovals:!0});return function(f,m,y,v){const E=y.batch,w=E.keys();let R=ae.resolve();return w.forEach(S=>{R=R.next(()=>v.getEntry(m,S)).next(U=>{const O=y.docVersions.get(S);Qe(O!==null,48541),U.version.compareTo(O)<0&&(E.applyToRemoteDocument(U,y),U.isValidDocument()&&(U.setReadTime(y.commitVersion),v.addEntry(U)))})}),R.next(()=>f.mutationQueue.removeMutationBatch(m,E))}(t,i,e,l).next(()=>l.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,a,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(f){let m=Ue();for(let y=0;y<f.mutationResults.length;++y)f.mutationResults[y].transformResults.length>0&&(m=m.add(f.batch.mutations[y].key));return m}(e))).next(()=>t.localDocuments.getDocuments(i,a))})}function lw(n){const e=Ne(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.ai.getLastRemoteSnapshotVersion(t))}function kO(n,e){const t=Ne(n),i=e.snapshotVersion;let a=t.Ss;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const c=t.Cs.newChangeBuffer({trackRemovals:!0});a=t.Ss;const f=[];e.targetChanges.forEach((v,E)=>{const w=a.get(E);if(!w)return;f.push(t.ai.removeMatchingKeys(l,v.removedDocuments,E).next(()=>t.ai.addMatchingKeys(l,v.addedDocuments,E)));let R=w.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(E)!==null?R=R.withResumeToken(tn.EMPTY_BYTE_STRING,Re.min()).withLastLimboFreeSnapshotVersion(Re.min()):v.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(v.resumeToken,i)),a=a.insert(E,R),function(U,O,Y){return U.resumeToken.approximateByteSize()===0||O.snapshotVersion.toMicroseconds()-U.snapshotVersion.toMicroseconds()>=OO?!0:Y.addedDocuments.size+Y.modifiedDocuments.size+Y.removedDocuments.size>0}(w,R,v)&&f.push(t.ai.updateTargetData(l,R))});let m=wi(),y=Ue();if(e.documentUpdates.forEach(v=>{e.resolvedLimboDocuments.has(v)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(l,v))}),f.push(VO(l,c,e.documentUpdates).next(v=>{m=v.xs,y=v.Os})),!i.isEqual(Re.min())){const v=t.ai.getLastRemoteSnapshotVersion(l).next(E=>t.ai.setTargetsMetadata(l,l.currentSequenceNumber,i));f.push(v)}return ae.waitFor(f).next(()=>c.apply(l)).next(()=>t.localDocuments.getLocalViewOfDocuments(l,m,y)).next(()=>m)}).then(l=>(t.Ss=a,l))}function VO(n,e,t){let i=Ue(),a=Ue();return t.forEach(l=>i=i.add(l)),e.getEntries(n,i).next(l=>{let c=wi();return t.forEach((f,m)=>{const y=l.get(f);m.isFoundDocument()!==y.isFoundDocument()&&(a=a.add(f)),m.isNoDocument()&&m.version.isEqual(Re.min())?(e.removeEntry(f,m.readTime),c=c.insert(f,m)):!y.isValidDocument()||m.version.compareTo(y.version)>0||m.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(m),c=c.insert(f,m)):pe(Jg,"Ignoring outdated watch update for ",f,". Current version:",y.version," Watch version:",m.version)}),{xs:c,Os:a}})}function LO(n,e){const t=Ne(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=Ug),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function UO(n,e){const t=Ne(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let a;return t.ai.getTargetData(i,e).next(l=>l?(a=l,ae.resolve(a)):t.ai.allocateTargetId(i).next(c=>(a=new us(e,c,"TargetPurposeListen",i.currentSequenceNumber),t.ai.addTargetData(i,a).next(()=>a))))}).then(i=>{const a=t.Ss.get(i.targetId);return(a===null||i.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ss=t.Ss.insert(i.targetId,i),t.Ds.set(e,i.targetId)),i})}async function sg(n,e,t){const i=Ne(n),a=i.Ss.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,c=>i.persistence.referenceDelegate.removeTarget(c,a))}catch(c){if(!el(c))throw c;pe(Jg,`Failed to update sequence numbers for target ${e}: ${c}`)}i.Ss=i.Ss.remove(e),i.Ds.delete(a.target)}function aE(n,e,t){const i=Ne(n);let a=Re.min(),l=Ue();return i.persistence.runTransaction("Execute query","readwrite",c=>function(m,y,v){const E=Ne(m),w=E.Ds.get(v);return w!==void 0?ae.resolve(E.Ss.get(w)):E.ai.getTargetData(y,v)}(i,c,kr(e)).next(f=>{if(f)return a=f.lastLimboFreeSnapshotVersion,i.ai.getMatchingKeysForTargetId(c,f.targetId).next(m=>{l=m})}).next(()=>i.bs.getDocumentsMatchingQuery(c,e,t?a:Re.min(),t?l:Ue())).next(f=>(zO(i,AD(e),f),{documents:f,Ns:l})))}function zO(n,e,t){let i=n.vs.get(e)||Re.min();t.forEach((a,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)}),n.vs.set(e,i)}class oE{constructor(){this.activeTargetIds=DD()}$s(e){this.activeTargetIds=this.activeTargetIds.add(e)}Us(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Qs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class BO{constructor(){this.So=new oE,this.Do={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.So.$s(e),this.Do[e]||"not-current"}updateQueryState(e,t,i){this.Do[e]=t}removeLocalQueryTarget(e){this.So.Us(e)}isLocalQueryTarget(e){return this.So.activeTargetIds.has(e)}clearQueryState(e){delete this.Do[e]}getAllActiveQueryTargets(){return this.So.activeTargetIds}isActiveQueryTarget(e){return this.So.activeTargetIds.has(e)}start(){return this.So=new oE,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qO{vo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lE="ConnectivityMonitor";class uE{constructor(){this.Co=()=>this.Fo(),this.Mo=()=>this.xo(),this.Oo=[],this.No()}vo(e){this.Oo.push(e)}shutdown(){window.removeEventListener("online",this.Co),window.removeEventListener("offline",this.Mo)}No(){window.addEventListener("online",this.Co),window.addEventListener("offline",this.Mo)}Fo(){pe(lE,"Network connectivity changed: AVAILABLE");for(const e of this.Oo)e(0)}xo(){pe(lE,"Network connectivity changed: UNAVAILABLE");for(const e of this.Oo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vd=null;function ag(){return Vd===null?Vd=function(){return 268435456+Math.round(2147483648*Math.random())}():Vd++,"0x"+Vd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Np="RestConnection",FO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class HO{get Bo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Lo=t+"://"+e.host,this.ko=`projects/${i}/databases/${a}`,this.qo=this.databaseId.database===hh?`project_id=${i}`:`project_id=${i}&database_id=${a}`}Qo(e,t,i,a,l){const c=ag(),f=this.$o(e,t.toUriEncodedString());pe(Np,`Sending RPC '${e}' ${c}:`,f,i);const m={"google-cloud-resource-prefix":this.ko,"x-goog-request-params":this.qo};this.Uo(m,a,l);const{host:y}=new URL(f),v=Gu(y);return this.Ko(e,f,m,i,v).then(E=>(pe(Np,`Received RPC '${e}' ${c}: `,E),E),E=>{throw Uo(Np,`RPC '${e}' ${c} failed with error: `,E,"url: ",f,"request:",i),E})}Wo(e,t,i,a,l,c){return this.Qo(e,t,i,a,l)}Uo(e,t,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Zo}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((a,l)=>e[l]=a),i&&i.headers.forEach((a,l)=>e[l]=a)}$o(e,t){const i=FO[e];return`${this.Lo}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GO{constructor(e){this.Go=e.Go,this.zo=e.zo}jo(e){this.Ho=e}Jo(e){this.Yo=e}Zo(e){this.Xo=e}onMessage(e){this.e_=e}close(){this.zo()}send(e){this.Go(e)}t_(){this.Ho()}n_(){this.Yo()}r_(e){this.Xo(e)}i_(e){this.e_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const an="WebChannelConnection";class $O extends HO{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ko(e,t,i,a,l){const c=ag();return new Promise((f,m)=>{const y=new d1;y.setWithCredentials(!0),y.listenOnce(h1.COMPLETE,()=>{try{switch(y.getLastErrorCode()){case Gd.NO_ERROR:const E=y.getResponseJson();pe(an,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(E)),f(E);break;case Gd.TIMEOUT:pe(an,`RPC '${e}' ${c} timed out`),m(new me(ie.DEADLINE_EXCEEDED,"Request time out"));break;case Gd.HTTP_ERROR:const w=y.getStatus();if(pe(an,`RPC '${e}' ${c} failed with status:`,w,"response text:",y.getResponseText()),w>0){let R=y.getResponseJson();Array.isArray(R)&&(R=R[0]);const S=R==null?void 0:R.error;if(S&&S.status&&S.message){const U=function(Y){const Q=Y.toLowerCase().replace(/_/g,"-");return Object.values(ie).indexOf(Q)>=0?Q:ie.UNKNOWN}(S.status);m(new me(U,S.message))}else m(new me(ie.UNKNOWN,"Server responded with status "+y.getStatus()))}else m(new me(ie.UNAVAILABLE,"Connection failed."));break;default:Ae(9055,{s_:e,streamId:c,o_:y.getLastErrorCode(),__:y.getLastError()})}}finally{pe(an,`RPC '${e}' ${c} completed.`)}});const v=JSON.stringify(a);pe(an,`RPC '${e}' ${c} sending request:`,a),y.send(t,"POST",v,i,15)})}a_(e,t,i){const a=ag(),l=[this.Lo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=p1(),f=m1(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(m.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(m.useFetchStreams=!0),this.Uo(m.initMessageHeaders,t,i),m.encodeInitMessageHeaders=!0;const v=l.join("");pe(an,`Creating RPC '${e}' stream ${a}: ${v}`,m);const E=c.createWebChannel(v,m);let w=!1,R=!1;const S=new GO({Go:O=>{R?pe(an,`Not sending because RPC '${e}' stream ${a} is closed:`,O):(w||(pe(an,`Opening RPC '${e}' stream ${a} transport.`),E.open(),w=!0),pe(an,`RPC '${e}' stream ${a} sending:`,O),E.send(O))},zo:()=>E.close()}),U=(O,Y,Q)=>{O.listen(Y,z=>{try{Q(z)}catch(ue){setTimeout(()=>{throw ue},0)}})};return U(E,bu.EventType.OPEN,()=>{R||(pe(an,`RPC '${e}' stream ${a} transport opened.`),S.t_())}),U(E,bu.EventType.CLOSE,()=>{R||(R=!0,pe(an,`RPC '${e}' stream ${a} transport closed`),S.r_())}),U(E,bu.EventType.ERROR,O=>{R||(R=!0,Uo(an,`RPC '${e}' stream ${a} transport errored. Name:`,O.name,"Message:",O.message),S.r_(new me(ie.UNAVAILABLE,"The operation could not be completed")))}),U(E,bu.EventType.MESSAGE,O=>{var Y;if(!R){const Q=O.data[0];Qe(!!Q,16349);const z=Q,ue=(z==null?void 0:z.error)||((Y=z[0])===null||Y===void 0?void 0:Y.error);if(ue){pe(an,`RPC '${e}' stream ${a} received error:`,ue);const le=ue.status;let ye=function(N){const P=Ct[N];if(P!==void 0)return Q1(P)}(le),M=ue.message;ye===void 0&&(ye=ie.INTERNAL,M="Unknown error status: "+le+" with message "+ue.message),R=!0,S.r_(new me(ye,M)),E.close()}else pe(an,`RPC '${e}' stream ${a} received:`,Q),S.i_(Q)}}),U(f,f1.STAT_EVENT,O=>{O.stat===Kp.PROXY?pe(an,`RPC '${e}' stream ${a} detected buffering proxy`):O.stat===Kp.NOPROXY&&pe(an,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{S.n_()},0),S}}function Ip(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hh(n){return new WD(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uw{constructor(e,t,i=1e3,a=1.5,l=6e4){this.bi=e,this.timerId=t,this.u_=i,this.c_=a,this.l_=l,this.h_=0,this.P_=null,this.T_=Date.now(),this.reset()}reset(){this.h_=0}I_(){this.h_=this.l_}E_(e){this.cancel();const t=Math.floor(this.h_+this.d_()),i=Math.max(0,Date.now()-this.T_),a=Math.max(0,t-i);a>0&&pe("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.h_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.P_=this.bi.enqueueAfterDelay(this.timerId,a,()=>(this.T_=Date.now(),e())),this.h_*=this.c_,this.h_<this.u_&&(this.h_=this.u_),this.h_>this.l_&&(this.h_=this.l_)}A_(){this.P_!==null&&(this.P_.skipDelay(),this.P_=null)}cancel(){this.P_!==null&&(this.P_.cancel(),this.P_=null)}d_(){return(Math.random()-.5)*this.h_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cE="PersistentStream";class cw{constructor(e,t,i,a,l,c,f,m){this.bi=e,this.R_=i,this.V_=a,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=f,this.listener=m,this.state=0,this.m_=0,this.f_=null,this.g_=null,this.stream=null,this.p_=0,this.y_=new uw(e,t)}w_(){return this.state===1||this.state===5||this.b_()}b_(){return this.state===2||this.state===3}start(){this.p_=0,this.state!==4?this.auth():this.S_()}async stop(){this.w_()&&await this.close(0)}D_(){this.state=0,this.y_.reset()}v_(){this.b_()&&this.f_===null&&(this.f_=this.bi.enqueueAfterDelay(this.R_,6e4,()=>this.C_()))}F_(e){this.M_(),this.stream.send(e)}async C_(){if(this.b_())return this.close(0)}M_(){this.f_&&(this.f_.cancel(),this.f_=null)}x_(){this.g_&&(this.g_.cancel(),this.g_=null)}async close(e,t){this.M_(),this.x_(),this.y_.cancel(),this.m_++,e!==4?this.y_.reset():t&&t.code===ie.RESOURCE_EXHAUSTED?(Ti(t.toString()),Ti("Using maximum backoff delay to prevent overloading the backend."),this.y_.I_()):t&&t.code===ie.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.O_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Zo(t)}O_(){}auth(){this.state=1;const e=this.N_(this.m_),t=this.m_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,a])=>{this.m_===t&&this.B_(i,a)},i=>{e(()=>{const a=new me(ie.UNKNOWN,"Fetching auth token failed: "+i.message);return this.L_(a)})})}B_(e,t){const i=this.N_(this.m_);this.stream=this.k_(e,t),this.stream.jo(()=>{i(()=>this.listener.jo())}),this.stream.Jo(()=>{i(()=>(this.state=2,this.g_=this.bi.enqueueAfterDelay(this.V_,1e4,()=>(this.b_()&&(this.state=3),Promise.resolve())),this.listener.Jo()))}),this.stream.Zo(a=>{i(()=>this.L_(a))}),this.stream.onMessage(a=>{i(()=>++this.p_==1?this.q_(a):this.onNext(a))})}S_(){this.state=5,this.y_.E_(async()=>{this.state=0,this.start()})}L_(e){return pe(cE,`close with error: ${e}`),this.stream=null,this.close(4,e)}N_(e){return t=>{this.bi.enqueueAndForget(()=>this.m_===e?t():(pe(cE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class YO extends cw{constructor(e,t,i,a,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,a,c),this.serializer=l}k_(e,t){return this.connection.a_("Listen",e,t)}q_(e){return this.onNext(e)}onNext(e){this.y_.reset();const t=JD(this.serializer,e),i=function(l){if(!("targetChange"in l))return Re.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Re.min():c.readTime?Vr(c.readTime):Re.min()}(e);return this.listener.Q_(t,i)}U_(e){const t={};t.database=ig(this.serializer),t.addTarget=function(l,c){let f;const m=c.target;if(f=Jp(m)?{documents:nO(l,m)}:{query:rO(l,m).gt},f.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){f.resumeToken=Z1(l,c.resumeToken);const y=tg(l,c.expectedCount);y!==null&&(f.expectedCount=y)}else if(c.snapshotVersion.compareTo(Re.min())>0){f.readTime=yh(l,c.snapshotVersion.toTimestamp());const y=tg(l,c.expectedCount);y!==null&&(f.expectedCount=y)}return f}(this.serializer,e);const i=sO(this.serializer,e);i&&(t.labels=i),this.F_(t)}K_(e){const t={};t.database=ig(this.serializer),t.removeTarget=e,this.F_(t)}}class KO extends cw{constructor(e,t,i,a,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,a,c),this.serializer=l}get W_(){return this.p_>0}start(){this.lastStreamToken=void 0,super.start()}O_(){this.W_&&this.G_([])}k_(e,t){return this.connection.a_("Write",e,t)}q_(e){return Qe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Qe(!e.writeResults||e.writeResults.length===0,55816),this.listener.z_()}onNext(e){Qe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.y_.reset();const t=tO(e.writeResults,e.commitTime),i=Vr(e.commitTime);return this.listener.j_(i,t)}H_(){const e={};e.database=ig(this.serializer),this.F_(e)}G_(e){const t={streamToken:this.lastStreamToken,writes:e.map(i=>eO(this.serializer,i))};this.F_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QO{}class WO extends QO{constructor(e,t,i,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=a,this.J_=!1}Y_(){if(this.J_)throw new me(ie.FAILED_PRECONDITION,"The client has already been terminated.")}Qo(e,t,i,a){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,c])=>this.connection.Qo(e,ng(t,i),a,l,c)).catch(l=>{throw l.name==="FirebaseError"?(l.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new me(ie.UNKNOWN,l.toString())})}Wo(e,t,i,a,l){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,f])=>this.connection.Wo(e,ng(t,i),a,c,f,l)).catch(c=>{throw c.name==="FirebaseError"?(c.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new me(ie.UNKNOWN,c.toString())})}terminate(){this.J_=!0,this.connection.terminate()}}class XO{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.Z_=0,this.X_=null,this.ea=!0}ta(){this.Z_===0&&(this.na("Unknown"),this.X_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.X_=null,this.ra("Backend didn't respond within 10 seconds."),this.na("Offline"),Promise.resolve())))}ia(e){this.state==="Online"?this.na("Unknown"):(this.Z_++,this.Z_>=1&&(this.sa(),this.ra(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.na("Offline")))}set(e){this.sa(),this.Z_=0,e==="Online"&&(this.ea=!1),this.na(e)}na(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ra(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ea?(Ti(t),this.ea=!1):pe("OnlineStateTracker",t)}sa(){this.X_!==null&&(this.X_.cancel(),this.X_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xa="RemoteStore";class ZO{constructor(e,t,i,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.oa=[],this._a=new Map,this.aa=new Set,this.ua=[],this.ca=l,this.ca.vo(c=>{i.enqueueAndForget(async()=>{Na(this)&&(pe(xa,"Restarting streams for network reachability change."),await async function(m){const y=Ne(m);y.aa.add(4),await ec(y),y.la.set("Unknown"),y.aa.delete(4),await Gh(y)}(this))})}),this.la=new XO(i,a)}}async function Gh(n){if(Na(n))for(const e of n.ua)await e(!0)}async function ec(n){for(const e of n.ua)await e(!1)}function dw(n,e){const t=Ne(n);t._a.has(e.targetId)||(t._a.set(e.targetId,e),ry(t)?ny(t):nl(t).b_()&&ty(t,e))}function ey(n,e){const t=Ne(n),i=nl(t);t._a.delete(e),i.b_()&&hw(t,e),t._a.size===0&&(i.b_()?i.v_():Na(t)&&t.la.set("Unknown"))}function ty(n,e){if(n.ha.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Re.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}nl(n).U_(e)}function hw(n,e){n.ha.Ke(e),nl(n).K_(e)}function ny(n){n.ha=new $D({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>n._a.get(e)||null,Pt:()=>n.datastore.serializer.databaseId}),nl(n).start(),n.la.ta()}function ry(n){return Na(n)&&!nl(n).w_()&&n._a.size>0}function Na(n){return Ne(n).aa.size===0}function fw(n){n.ha=void 0}async function JO(n){n.la.set("Online")}async function e4(n){n._a.forEach((e,t)=>{ty(n,e)})}async function t4(n,e){fw(n),ry(n)?(n.la.ia(e),ny(n)):n.la.set("Unknown")}async function n4(n,e,t){if(n.la.set("Online"),e instanceof X1&&e.state===2&&e.cause)try{await async function(a,l){const c=l.cause;for(const f of l.targetIds)a._a.has(f)&&(await a.remoteSyncer.rejectListen(f,c),a._a.delete(f),a.ha.removeTarget(f))}(n,e)}catch(i){pe(xa,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await _h(n,i)}else if(e instanceof Qd?n.ha.Xe(e):e instanceof W1?n.ha.ot(e):n.ha.nt(e),!t.isEqual(Re.min()))try{const i=await lw(n.localStore);t.compareTo(i)>=0&&await function(l,c){const f=l.ha.It(c);return f.targetChanges.forEach((m,y)=>{if(m.resumeToken.approximateByteSize()>0){const v=l._a.get(y);v&&l._a.set(y,v.withResumeToken(m.resumeToken,c))}}),f.targetMismatches.forEach((m,y)=>{const v=l._a.get(m);if(!v)return;l._a.set(m,v.withResumeToken(tn.EMPTY_BYTE_STRING,v.snapshotVersion)),hw(l,m);const E=new us(v.target,m,y,v.sequenceNumber);ty(l,E)}),l.remoteSyncer.applyRemoteEvent(f)}(n,t)}catch(i){pe(xa,"Failed to raise snapshot:",i),await _h(n,i)}}async function _h(n,e,t){if(!el(e))throw e;n.aa.add(1),await ec(n),n.la.set("Offline"),t||(t=()=>lw(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{pe(xa,"Retrying IndexedDB access"),await t(),n.aa.delete(1),await Gh(n)})}function mw(n,e){return e().catch(t=>_h(n,t,e))}async function $h(n){const e=Ne(n),t=bs(e);let i=e.oa.length>0?e.oa[e.oa.length-1].batchId:Ug;for(;r4(e);)try{const a=await LO(e.localStore,i);if(a===null){e.oa.length===0&&t.v_();break}i=a.batchId,i4(e,a)}catch(a){await _h(e,a)}pw(e)&&gw(e)}function r4(n){return Na(n)&&n.oa.length<10}function i4(n,e){n.oa.push(e);const t=bs(n);t.b_()&&t.W_&&t.G_(e.mutations)}function pw(n){return Na(n)&&!bs(n).w_()&&n.oa.length>0}function gw(n){bs(n).start()}async function s4(n){bs(n).H_()}async function a4(n){const e=bs(n);for(const t of n.oa)e.G_(t.mutations)}async function o4(n,e,t){const i=n.oa.shift(),a=Yg.from(i,e,t);await mw(n,()=>n.remoteSyncer.applySuccessfulWrite(a)),await $h(n)}async function l4(n,e){e&&bs(n).W_&&await async function(i,a){if(function(c){return HD(c)&&c!==ie.ABORTED}(a.code)){const l=i.oa.shift();bs(i).D_(),await mw(i,()=>i.remoteSyncer.rejectFailedWrite(l.batchId,a)),await $h(i)}}(n,e),pw(n)&&gw(n)}async function dE(n,e){const t=Ne(n);t.asyncQueue.verifyOperationInProgress(),pe(xa,"RemoteStore received new credentials");const i=Na(t);t.aa.add(3),await ec(t),i&&t.la.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.aa.delete(3),await Gh(t)}async function u4(n,e){const t=Ne(n);e?(t.aa.delete(2),await Gh(t)):e||(t.aa.add(2),await ec(t),t.la.set("Unknown"))}function nl(n){return n.Pa||(n.Pa=function(t,i,a){const l=Ne(t);return l.Y_(),new YO(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)}(n.datastore,n.asyncQueue,{jo:JO.bind(null,n),Jo:e4.bind(null,n),Zo:t4.bind(null,n),Q_:n4.bind(null,n)}),n.ua.push(async e=>{e?(n.Pa.D_(),ry(n)?ny(n):n.la.set("Unknown")):(await n.Pa.stop(),fw(n))})),n.Pa}function bs(n){return n.Ta||(n.Ta=function(t,i,a){const l=Ne(t);return l.Y_(),new KO(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)}(n.datastore,n.asyncQueue,{jo:()=>Promise.resolve(),Jo:s4.bind(null,n),Zo:l4.bind(null,n),z_:a4.bind(null,n),j_:o4.bind(null,n)}),n.ua.push(async e=>{e?(n.Ta.D_(),await $h(n)):(await n.Ta.stop(),n.oa.length>0&&(pe(xa,`Stopping write stream with ${n.oa.length} pending writes`),n.oa=[]))})),n.Ta}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iy{constructor(e,t,i,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=a,this.removalCallback=l,this.deferred=new yi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,a,l){const c=Date.now()+i,f=new iy(e,t,c,a,l);return f.start(i),f}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new me(ie.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function sy(n,e){if(Ti("AsyncQueue",`${e}: ${n}`),el(n))return new me(ie.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{static emptySet(e){return new Mo(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||Ee.comparator(t.key,i.key):(t,i)=>Ee.comparator(t.key,i.key),this.keyedMap=Eu(),this.sortedSet=new mt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Mo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=i.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Mo;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hE{constructor(){this.Ia=new mt(Ee.comparator)}track(e){const t=e.doc.key,i=this.Ia.get(t);i?e.type!==0&&i.type===3?this.Ia=this.Ia.insert(t,e):e.type===3&&i.type!==1?this.Ia=this.Ia.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.Ia=this.Ia.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.Ia=this.Ia.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.Ia=this.Ia.remove(t):e.type===1&&i.type===2?this.Ia=this.Ia.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.Ia=this.Ia.insert(t,{type:2,doc:e.doc}):Ae(63341,{Vt:e,Ea:i}):this.Ia=this.Ia.insert(t,e)}da(){const e=[];return this.Ia.inorderTraversal((t,i)=>{e.push(i)}),e}}class Ho{constructor(e,t,i,a,l,c,f,m,y){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=a,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=f,this.excludesMetadataChanges=m,this.hasCachedResults=y}static fromInitialDocuments(e,t,i,a,l){const c=[];return t.forEach(f=>{c.push({type:0,doc:f})}),new Ho(e,t,Mo.emptySet(t),c,i,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Uh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==i[a].type||!t[a].doc.isEqual(i[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c4{constructor(){this.Aa=void 0,this.Ra=[]}Va(){return this.Ra.some(e=>e.ma())}}class d4{constructor(){this.queries=fE(),this.onlineState="Unknown",this.fa=new Set}terminate(){(function(t,i){const a=Ne(t),l=a.queries;a.queries=fE(),l.forEach((c,f)=>{for(const m of f.Ra)m.onError(i)})})(this,new me(ie.ABORTED,"Firestore shutting down"))}}function fE(){return new Ca(n=>V1(n),Uh)}async function yw(n,e){const t=Ne(n);let i=3;const a=e.query;let l=t.queries.get(a);l?!l.Va()&&e.ma()&&(i=2):(l=new c4,i=e.ma()?0:1);try{switch(i){case 0:l.Aa=await t.onListen(a,!0);break;case 1:l.Aa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(c){const f=sy(c,`Initialization of query '${Ro(e.query)}' failed`);return void e.onError(f)}t.queries.set(a,l),l.Ra.push(e),e.ga(t.onlineState),l.Aa&&e.pa(l.Aa)&&ay(t)}async function vw(n,e){const t=Ne(n),i=e.query;let a=3;const l=t.queries.get(i);if(l){const c=l.Ra.indexOf(e);c>=0&&(l.Ra.splice(c,1),l.Ra.length===0?a=e.ma()?0:1:!l.Va()&&e.ma()&&(a=2))}switch(a){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function h4(n,e){const t=Ne(n);let i=!1;for(const a of e){const l=a.query,c=t.queries.get(l);if(c){for(const f of c.Ra)f.pa(a)&&(i=!0);c.Aa=a}}i&&ay(t)}function f4(n,e,t){const i=Ne(n),a=i.queries.get(e);if(a)for(const l of a.Ra)l.onError(t);i.queries.delete(e)}function ay(n){n.fa.forEach(e=>{e.next()})}var og,mE;(mE=og||(og={})).ya="default",mE.Cache="cache";class _w{constructor(e,t,i){this.query=e,this.wa=t,this.ba=!1,this.Sa=null,this.onlineState="Unknown",this.options=i||{}}pa(e){if(!this.options.includeMetadataChanges){const i=[];for(const a of e.docChanges)a.type!==3&&i.push(a);e=new Ho(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ba?this.Da(e)&&(this.wa.next(e),t=!0):this.va(e,this.onlineState)&&(this.Ca(e),t=!0),this.Sa=e,t}onError(e){this.wa.error(e)}ga(e){this.onlineState=e;let t=!1;return this.Sa&&!this.ba&&this.va(this.Sa,e)&&(this.Ca(this.Sa),t=!0),t}va(e,t){if(!e.fromCache||!this.ma())return!0;const i=t!=="Offline";return(!this.options.Fa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Da(e){if(e.docChanges.length>0)return!0;const t=this.Sa&&this.Sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Ca(e){e=Ho.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ba=!0,this.wa.next(e)}ma(){return this.options.source!==og.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bw{constructor(e){this.key=e}}class Ew{constructor(e){this.key=e}}class m4{constructor(e,t){this.query=e,this.qa=t,this.Qa=null,this.hasCachedResults=!1,this.current=!1,this.$a=Ue(),this.mutatedKeys=Ue(),this.Ua=L1(e),this.Ka=new Mo(this.Ua)}get Wa(){return this.qa}Ga(e,t){const i=t?t.za:new hE,a=t?t.Ka:this.Ka;let l=t?t.mutatedKeys:this.mutatedKeys,c=a,f=!1;const m=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,y=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((v,E)=>{const w=a.get(v),R=zh(this.query,E)?E:null,S=!!w&&this.mutatedKeys.has(w.key),U=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations);let O=!1;w&&R?w.data.isEqual(R.data)?S!==U&&(i.track({type:3,doc:R}),O=!0):this.ja(w,R)||(i.track({type:2,doc:R}),O=!0,(m&&this.Ua(R,m)>0||y&&this.Ua(R,y)<0)&&(f=!0)):!w&&R?(i.track({type:0,doc:R}),O=!0):w&&!R&&(i.track({type:1,doc:w}),O=!0,(m||y)&&(f=!0)),O&&(R?(c=c.add(R),l=U?l.add(v):l.delete(v)):(c=c.delete(v),l=l.delete(v)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const v=this.query.limitType==="F"?c.last():c.first();c=c.delete(v.key),l=l.delete(v.key),i.track({type:1,doc:v})}return{Ka:c,za:i,ys:f,mutatedKeys:l}}ja(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,a){const l=this.Ka;this.Ka=e.Ka,this.mutatedKeys=e.mutatedKeys;const c=e.za.da();c.sort((v,E)=>function(R,S){const U=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ae(20277,{Vt:O})}};return U(R)-U(S)}(v.type,E.type)||this.Ua(v.doc,E.doc)),this.Ha(i),a=a!=null&&a;const f=t&&!a?this.Ja():[],m=this.$a.size===0&&this.current&&!a?1:0,y=m!==this.Qa;return this.Qa=m,c.length!==0||y?{snapshot:new Ho(this.query,e.Ka,l,c,e.mutatedKeys,m===0,y,!1,!!i&&i.resumeToken.approximateByteSize()>0),Ya:f}:{Ya:f}}ga(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ka:this.Ka,za:new hE,mutatedKeys:this.mutatedKeys,ys:!1},!1)):{Ya:[]}}Za(e){return!this.qa.has(e)&&!!this.Ka.has(e)&&!this.Ka.get(e).hasLocalMutations}Ha(e){e&&(e.addedDocuments.forEach(t=>this.qa=this.qa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.qa=this.qa.delete(t)),this.current=e.current)}Ja(){if(!this.current)return[];const e=this.$a;this.$a=Ue(),this.Ka.forEach(i=>{this.Za(i.key)&&(this.$a=this.$a.add(i.key))});const t=[];return e.forEach(i=>{this.$a.has(i)||t.push(new Ew(i))}),this.$a.forEach(i=>{e.has(i)||t.push(new bw(i))}),t}Xa(e){this.qa=e.Ns,this.$a=Ue();const t=this.Ga(e.documents);return this.applyChanges(t,!0)}eu(){return Ho.fromInitialDocuments(this.query,this.Ka,this.mutatedKeys,this.Qa===0,this.hasCachedResults)}}const oy="SyncEngine";class p4{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class g4{constructor(e){this.key=e,this.tu=!1}}class y4{constructor(e,t,i,a,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.nu={},this.ru=new Ca(f=>V1(f),Uh),this.iu=new Map,this.su=new Set,this.ou=new mt(Ee.comparator),this._u=new Map,this.au=new Wg,this.uu={},this.cu=new Map,this.lu=Fo.ir(),this.onlineState="Unknown",this.hu=void 0}get isPrimaryClient(){return this.hu===!0}}async function v4(n,e,t=!0){const i=Rw(n);let a;const l=i.ru.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.eu()):a=await Tw(i,e,t,!0),a}async function _4(n,e){const t=Rw(n);await Tw(t,e,!0,!1)}async function Tw(n,e,t,i){const a=await UO(n.localStore,kr(e)),l=a.targetId,c=n.sharedClientState.addLocalQueryTarget(l,t);let f;return i&&(f=await b4(n,e,l,c==="current",a.resumeToken)),n.isPrimaryClient&&t&&dw(n.remoteStore,a),f}async function b4(n,e,t,i,a){n.Pu=(E,w,R)=>async function(U,O,Y,Q){let z=O.view.Ga(Y);z.ys&&(z=await aE(U.localStore,O.query,!1).then(({documents:M})=>O.view.Ga(M,z)));const ue=Q&&Q.targetChanges.get(O.targetId),le=Q&&Q.targetMismatches.get(O.targetId)!=null,ye=O.view.applyChanges(z,U.isPrimaryClient,ue,le);return gE(U,O.targetId,ye.Ya),ye.snapshot}(n,E,w,R);const l=await aE(n.localStore,e,!0),c=new m4(e,l.Ns),f=c.Ga(l.documents),m=Ju.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",a),y=c.applyChanges(f,n.isPrimaryClient,m);gE(n,t,y.Ya);const v=new p4(e,t,c);return n.ru.set(e,v),n.iu.has(t)?n.iu.get(t).push(e):n.iu.set(t,[e]),y.snapshot}async function E4(n,e,t){const i=Ne(n),a=i.ru.get(e),l=i.iu.get(a.targetId);if(l.length>1)return i.iu.set(a.targetId,l.filter(c=>!Uh(c,e))),void i.ru.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(a.targetId),i.sharedClientState.isActiveQueryTarget(a.targetId)||await sg(i.localStore,a.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(a.targetId),t&&ey(i.remoteStore,a.targetId),lg(i,a.targetId)}).catch(Jo)):(lg(i,a.targetId),await sg(i.localStore,a.targetId,!0))}async function T4(n,e){const t=Ne(n),i=t.ru.get(e),a=t.iu.get(i.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),ey(t.remoteStore,i.targetId))}async function w4(n,e,t){const i=I4(n);try{const a=await function(c,f){const m=Ne(c),y=jt.now(),v=f.reduce((R,S)=>R.add(S.key),Ue());let E,w;return m.persistence.runTransaction("Locally write mutations","readwrite",R=>{let S=wi(),U=Ue();return m.Cs.getEntries(R,v).next(O=>{S=O,S.forEach((Y,Q)=>{Q.isValidDocument()||(U=U.add(Y))})}).next(()=>m.localDocuments.getOverlayedDocuments(R,S)).next(O=>{E=O;const Y=[];for(const Q of f){const z=UD(Q,E.get(Q.key).overlayedDocument);z!=null&&Y.push(new Ss(Q.key,z,N1(z.value.mapValue),Xn.exists(!0)))}return m.mutationQueue.addMutationBatch(R,y,Y,f)}).next(O=>{w=O;const Y=O.applyToLocalDocumentSet(E,U);return m.documentOverlayCache.saveOverlays(R,O.batchId,Y)})}).then(()=>({batchId:w.batchId,changes:z1(E)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(a.batchId),function(c,f,m){let y=c.uu[c.currentUser.toKey()];y||(y=new mt(Pe)),y=y.insert(f,m),c.uu[c.currentUser.toKey()]=y}(i,a.batchId,t),await tc(i,a.changes),await $h(i.remoteStore)}catch(a){const l=sy(a,"Failed to persist write");t.reject(l)}}async function ww(n,e){const t=Ne(n);try{const i=await kO(t.localStore,e);e.targetChanges.forEach((a,l)=>{const c=t._u.get(l);c&&(Qe(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?c.tu=!0:a.modifiedDocuments.size>0?Qe(c.tu,14607):a.removedDocuments.size>0&&(Qe(c.tu,42227),c.tu=!1))}),await tc(t,i,e)}catch(i){await Jo(i)}}function pE(n,e,t){const i=Ne(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const a=[];i.ru.forEach((l,c)=>{const f=c.view.ga(e);f.snapshot&&a.push(f.snapshot)}),function(c,f){const m=Ne(c);m.onlineState=f;let y=!1;m.queries.forEach((v,E)=>{for(const w of E.Ra)w.ga(f)&&(y=!0)}),y&&ay(m)}(i.eventManager,e),a.length&&i.nu.Q_(a),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function x4(n,e,t){const i=Ne(n);i.sharedClientState.updateQueryState(e,"rejected",t);const a=i._u.get(e),l=a&&a.key;if(l){let c=new mt(Ee.comparator);c=c.insert(l,ln.newNoDocument(l,Re.min()));const f=Ue().add(l),m=new Fh(Re.min(),new Map,new mt(Pe),c,f);await ww(i,m),i.ou=i.ou.remove(l),i._u.delete(e),ly(i)}else await sg(i.localStore,e,!1).then(()=>lg(i,e,t)).catch(Jo)}async function A4(n,e){const t=Ne(n),i=e.batch.batchId;try{const a=await jO(t.localStore,e);Aw(t,i,null),xw(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await tc(t,a)}catch(a){await Jo(a)}}async function S4(n,e,t){const i=Ne(n);try{const a=await function(c,f){const m=Ne(c);return m.persistence.runTransaction("Reject batch","readwrite-primary",y=>{let v;return m.mutationQueue.lookupMutationBatch(y,f).next(E=>(Qe(E!==null,37113),v=E.keys(),m.mutationQueue.removeMutationBatch(y,E))).next(()=>m.mutationQueue.performConsistencyCheck(y)).next(()=>m.documentOverlayCache.removeOverlaysForBatchId(y,v,f)).next(()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,v)).next(()=>m.localDocuments.getDocuments(y,v))})}(i.localStore,e);Aw(i,e,t),xw(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await tc(i,a)}catch(a){await Jo(a)}}function xw(n,e){(n.cu.get(e)||[]).forEach(t=>{t.resolve()}),n.cu.delete(e)}function Aw(n,e,t){const i=Ne(n);let a=i.uu[i.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),i.uu[i.currentUser.toKey()]=a}}function lg(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.iu.get(e))n.ru.delete(i),t&&n.nu.Tu(i,t);n.iu.delete(e),n.isPrimaryClient&&n.au.Ur(e).forEach(i=>{n.au.containsKey(i)||Sw(n,i)})}function Sw(n,e){n.su.delete(e.path.canonicalString());const t=n.ou.get(e);t!==null&&(ey(n.remoteStore,t),n.ou=n.ou.remove(e),n._u.delete(t),ly(n))}function gE(n,e,t){for(const i of t)i instanceof bw?(n.au.addReference(i.key,e),R4(n,i)):i instanceof Ew?(pe(oy,"Document no longer in limbo: "+i.key),n.au.removeReference(i.key,e),n.au.containsKey(i.key)||Sw(n,i.key)):Ae(19791,{Iu:i})}function R4(n,e){const t=e.key,i=t.path.canonicalString();n.ou.get(t)||n.su.has(i)||(pe(oy,"New document in limbo: "+t),n.su.add(i),ly(n))}function ly(n){for(;n.su.size>0&&n.ou.size<n.maxConcurrentLimboResolutions;){const e=n.su.values().next().value;n.su.delete(e);const t=new Ee(ot.fromString(e)),i=n.lu.next();n._u.set(i,new g4(t)),n.ou=n.ou.insert(t,i),dw(n.remoteStore,new us(kr(Hg(t.path)),i,"TargetPurposeLimboResolution",kh.le))}}async function tc(n,e,t){const i=Ne(n),a=[],l=[],c=[];i.ru.isEmpty()||(i.ru.forEach((f,m)=>{c.push(i.Pu(m,e,t).then(y=>{var v;if((y||t)&&i.isPrimaryClient){const E=y?!y.fromCache:(v=t==null?void 0:t.targetChanges.get(m.targetId))===null||v===void 0?void 0:v.current;i.sharedClientState.updateQueryState(m.targetId,E?"current":"not-current")}if(y){a.push(y);const E=Zg.Ps(m.targetId,y);l.push(E)}}))}),await Promise.all(c),i.nu.Q_(a),await async function(m,y){const v=Ne(m);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",E=>ae.forEach(y,w=>ae.forEach(w.ls,R=>v.persistence.referenceDelegate.addReference(E,w.targetId,R)).next(()=>ae.forEach(w.hs,R=>v.persistence.referenceDelegate.removeReference(E,w.targetId,R)))))}catch(E){if(!el(E))throw E;pe(Jg,"Failed to update sequence numbers: "+E)}for(const E of y){const w=E.targetId;if(!E.fromCache){const R=v.Ss.get(w),S=R.snapshotVersion,U=R.withLastLimboFreeSnapshotVersion(S);v.Ss=v.Ss.insert(w,U)}}}(i.localStore,l))}async function C4(n,e){const t=Ne(n);if(!t.currentUser.isEqual(e)){pe(oy,"User change. New user:",e.toKey());const i=await ow(t.localStore,e);t.currentUser=e,function(l,c){l.cu.forEach(f=>{f.forEach(m=>{m.reject(new me(ie.CANCELLED,c))})}),l.cu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await tc(t,i.Ms)}}function N4(n,e){const t=Ne(n),i=t._u.get(e);if(i&&i.tu)return Ue().add(i.key);{let a=Ue();const l=t.iu.get(e);if(!l)return a;for(const c of l){const f=t.ru.get(c);a=a.unionWith(f.view.Wa)}return a}}function Rw(n){const e=Ne(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=ww.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=N4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=x4.bind(null,e),e.nu.Q_=h4.bind(null,e.eventManager),e.nu.Tu=f4.bind(null,e.eventManager),e}function I4(n){const e=Ne(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=A4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=S4.bind(null,e),e}class bh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Hh(e.databaseInfo.databaseId),this.sharedClientState=this.Au(e),this.persistence=this.Ru(e),await this.persistence.start(),this.localStore=this.Vu(e),this.gcScheduler=this.mu(e,this.localStore),this.indexBackfillerScheduler=this.fu(e,this.localStore)}mu(e,t){return null}fu(e,t){return null}Vu(e){return MO(this.persistence,new DO,e.initialUser,this.serializer)}Ru(e){return new aw(Xg.Ei,this.serializer)}Au(e){return new BO}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}bh.provider={build:()=>new bh};class D4 extends bh{constructor(e){super(),this.cacheSizeBytes=e}mu(e,t){Qe(this.persistence.referenceDelegate instanceof vh,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new gO(i,e.asyncQueue,t)}Ru(e){const t=this.cacheSizeBytes!==void 0?Tn.withCacheSize(this.cacheSizeBytes):Tn.DEFAULT;return new aw(i=>vh.Ei(i,t),this.serializer)}}class ug{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>pE(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=C4.bind(null,this.syncEngine),await u4(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new d4}()}createDatastore(e){const t=Hh(e.databaseInfo.databaseId),i=function(l){return new $O(l)}(e.databaseInfo);return function(l,c,f,m){return new WO(l,c,f,m)}(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return function(i,a,l,c,f){return new ZO(i,a,l,c,f)}(this.localStore,this.datastore,e.asyncQueue,t=>pE(this.syncEngine,t,0),function(){return uE.C()?new uE:new qO}())}createSyncEngine(e,t){return function(a,l,c,f,m,y,v){const E=new y4(a,l,c,f,m,y);return v&&(E.hu=!0),E}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(a){const l=Ne(a);pe(xa,"RemoteStore shutting down."),l.aa.add(5),await ec(l),l.ca.shutdown(),l.la.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}ug.provider={build:()=>new ug};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cw{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.pu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.pu(this.observer.error,e):Ti("Uncaught Error in snapshot listener:",e.toString()))}yu(){this.muted=!0}pu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Es="FirestoreClient";class O4{constructor(e,t,i,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=a,this.user=on.UNAUTHENTICATED,this.clientId=_1.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,async c=>{pe(Es,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(i,c=>(pe(Es,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new yi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=sy(t,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function Dp(n,e){n.asyncQueue.verifyOperationInProgress(),pe(Es,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(async a=>{i.isEqual(a)||(await ow(e.localStore,a),i=a)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function yE(n,e){n.asyncQueue.verifyOperationInProgress();const t=await P4(n);pe(Es,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(i=>dE(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>dE(e.remoteStore,a)),n._onlineComponents=e}async function P4(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){pe(Es,"Using user provided OfflineComponentProvider");try{await Dp(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(a){return a.name==="FirebaseError"?a.code===ie.FAILED_PRECONDITION||a.code===ie.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(t))throw t;Uo("Error using user provided cache. Falling back to memory cache: "+t),await Dp(n,new bh)}}else pe(Es,"Using default OfflineComponentProvider"),await Dp(n,new D4(void 0));return n._offlineComponents}async function Nw(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(pe(Es,"Using user provided OnlineComponentProvider"),await yE(n,n._uninitializedComponentsProvider._online)):(pe(Es,"Using default OnlineComponentProvider"),await yE(n,new ug))),n._onlineComponents}function M4(n){return Nw(n).then(e=>e.syncEngine)}async function Iw(n){const e=await Nw(n),t=e.eventManager;return t.onListen=v4.bind(null,e.syncEngine),t.onUnlisten=E4.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=_4.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=T4.bind(null,e.syncEngine),t}function j4(n,e,t={}){const i=new yi;return n.asyncQueue.enqueueAndForget(async()=>function(l,c,f,m,y){const v=new Cw({next:w=>{v.yu(),c.enqueueAndForget(()=>vw(l,E));const R=w.docs.has(f);!R&&w.fromCache?y.reject(new me(ie.UNAVAILABLE,"Failed to get document because the client is offline.")):R&&w.fromCache&&m&&m.source==="server"?y.reject(new me(ie.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(w)},error:w=>y.reject(w)}),E=new _w(Hg(f.path),v,{includeMetadataChanges:!0,Fa:!0});return yw(l,E)}(await Iw(n),n.asyncQueue,e,t,i)),i.promise}function k4(n,e,t={}){const i=new yi;return n.asyncQueue.enqueueAndForget(async()=>function(l,c,f,m,y){const v=new Cw({next:w=>{v.yu(),c.enqueueAndForget(()=>vw(l,E)),w.fromCache&&m.source==="server"?y.reject(new me(ie.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(w)},error:w=>y.reject(w)}),E=new _w(f,v,{includeMetadataChanges:!0,Fa:!0});return yw(l,E)}(await Iw(n),n.asyncQueue,e,t,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dw(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vE=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ow(n,e,t){if(!t)throw new me(ie.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function V4(n,e,t,i){if(e===!0&&i===!0)throw new me(ie.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function _E(n){if(!Ee.isDocumentKey(n))throw new me(ie.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function bE(n){if(Ee.isDocumentKey(n))throw new me(ie.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Yh(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ae(12329,{type:typeof n})}function ur(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new me(ie.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Yh(n);throw new me(ie.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function L4(n,e){if(e<=0)throw new me(ie.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pw="firestore.googleapis.com",EE=!0;class TE{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new me(ie.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Pw,this.ssl=EE}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:EE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=sw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<mO)throw new me(ie.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}V4("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Dw((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new me(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new me(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new me(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,a){return i.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Kh{constructor(e,t,i,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new TE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new me(ie.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new me(ie.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new TE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new HI;switch(i.type){case"firstParty":return new KI(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new me(ie.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,Oh("Firestore",this._settings.isUsingEmulator),this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const i=vE.get(t);i&&(pe("ComponentProvider","Removing Datastore"),vE.delete(t),i.terminate())}(this),Promise.resolve()}}function U4(n,e,t,i={}){var a;n=ur(n,Kh);const l=Gu(e),c=n._getSettings(),f=Object.assign(Object.assign({},c),{emulatorOptions:n._getEmulatorOptions()}),m=`${e}:${t}`;c.host!==Pw&&c.host!==m&&Uo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const y=Object.assign(Object.assign({},c),{host:m,ssl:l,emulatorOptions:i});if(!_a(y,f)&&(n._setSettings(y),l&&(wT(`https://${m}`),Oh("Firestore",!0)),i.mockUserToken)){let v,E;if(typeof i.mockUserToken=="string")v=i.mockUserToken,E=on.MOCK_USER;else{v=ZR(i.mockUserToken,(a=n._app)===null||a===void 0?void 0:a.options.projectId);const w=i.mockUserToken.sub||i.mockUserToken.user_id;if(!w)throw new me(ie.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new on(w)}n._authCredentials=new GI(new y1(v,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Rs(this.firestore,e,this._query)}}class gn{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ms(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new gn(this.firestore,e,this._key)}}class ms extends Rs{constructor(e,t,i){super(e,t,Hg(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new gn(this.firestore,null,new Ee(e))}withConverter(e){return new ms(this.firestore,e,this._path)}}function cr(n,e,...t){if(n=Vt(n),Ow("collection","path",e),n instanceof Kh){const i=ot.fromString(e,...t);return bE(i),new ms(n,null,i)}{if(!(n instanceof gn||n instanceof ms))throw new me(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(ot.fromString(e,...t));return bE(i),new ms(n.firestore,null,i)}}function ht(n,e,...t){if(n=Vt(n),arguments.length===1&&(e=_1.newId()),Ow("doc","path",e),n instanceof Kh){const i=ot.fromString(e,...t);return _E(i),new gn(n,null,new Ee(i))}{if(!(n instanceof gn||n instanceof ms))throw new me(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(ot.fromString(e,...t));return _E(i),new gn(n.firestore,n instanceof ms?n.converter:null,new Ee(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wE="AsyncQueue";class xE{constructor(e=Promise.resolve()){this.Qu=[],this.$u=!1,this.Uu=[],this.Ku=null,this.Wu=!1,this.Gu=!1,this.zu=[],this.y_=new uw(this,"async_queue_retry"),this.ju=()=>{const i=Ip();i&&pe(wE,"Visibility state changed to "+i.visibilityState),this.y_.A_()},this.Hu=e;const t=Ip();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.ju)}get isShuttingDown(){return this.$u}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ju(),this.Yu(e)}enterRestrictedMode(e){if(!this.$u){this.$u=!0,this.Gu=e||!1;const t=Ip();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.ju)}}enqueue(e){if(this.Ju(),this.$u)return new Promise(()=>{});const t=new yi;return this.Yu(()=>this.$u&&this.Gu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qu.push(e),this.Zu()))}async Zu(){if(this.Qu.length!==0){try{await this.Qu[0](),this.Qu.shift(),this.y_.reset()}catch(e){if(!el(e))throw e;pe(wE,"Operation failed with retryable error: "+e)}this.Qu.length>0&&this.y_.E_(()=>this.Zu())}}Yu(e){const t=this.Hu.then(()=>(this.Wu=!0,e().catch(i=>{throw this.Ku=i,this.Wu=!1,Ti("INTERNAL UNHANDLED ERROR: ",AE(i)),i}).then(i=>(this.Wu=!1,i))));return this.Hu=t,t}enqueueAfterDelay(e,t,i){this.Ju(),this.zu.indexOf(e)>-1&&(t=0);const a=iy.createAndSchedule(this,e,t,i,l=>this.Xu(l));return this.Uu.push(a),a}Ju(){this.Ku&&Ae(47125,{ec:AE(this.Ku)})}verifyOperationInProgress(){}async tc(){let e;do e=this.Hu,await e;while(e!==this.Hu)}nc(e){for(const t of this.Uu)if(t.timerId===e)return!0;return!1}rc(e){return this.tc().then(()=>{this.Uu.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this.Uu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.tc()})}sc(e){this.zu.push(e)}Xu(e){const t=this.Uu.indexOf(e);this.Uu.splice(t,1)}}function AE(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Ia extends Kh{constructor(e,t,i,a){super(e,t,i,a),this.type="firestore",this._queue=new xE,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new xE(e),this._firestoreClient=void 0,await e}}}function z4(n,e){const t=typeof n=="object"?n:RT(),i=typeof n=="string"?n:hh,a=Cg(t,"firestore").getImmediate({identifier:i});if(!a._initialized){const l=WR("firestore");l&&U4(a,...l)}return a}function uy(n){if(n._terminated)throw new me(ie.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||B4(n),n._firestoreClient}function B4(n){var e,t,i;const a=n._freezeSettings(),l=function(f,m,y,v){return new uD(f,m,y,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,Dw(v.experimentalLongPollingOptions),v.useFetchStreams,v.isUsingEmulator)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,a);n._componentsProvider||!((t=a.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=a.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),n._firestoreClient=new O4(n._authCredentials,n._appCheckCredentials,n._queue,l,n._componentsProvider&&function(f){const m=f==null?void 0:f._online.build();return{_offline:f==null?void 0:f._offline.build(m),_online:m}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Go(tn.fromBase64String(e))}catch(t){throw new me(ie.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Go(tn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new me(ie.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new en(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wh{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cy{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new me(ie.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new me(ie.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Pe(this._lat,e._lat)||Pe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dy{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,a){if(i.length!==a.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==a[l])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q4=/^__.*__$/;class F4{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Ss(e,this.data,this.fieldMask,t,this.fieldTransforms):new Zu(e,this.data,t,this.fieldTransforms)}}class Mw{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Ss(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function jw(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ae(40011,{oc:n})}}class hy{constructor(e,t,i,a,l,c){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=a,l===void 0&&this._c(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get oc(){return this.settings.oc}ac(e){return new hy(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}uc(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),a=this.ac({path:i,cc:!1});return a.lc(e),a}hc(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),a=this.ac({path:i,cc:!1});return a._c(),a}Pc(e){return this.ac({path:void 0,cc:!0})}Tc(e){return Eh(e,this.settings.methodName,this.settings.Ic||!1,this.path,this.settings.Ec)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}_c(){if(this.path)for(let e=0;e<this.path.length;e++)this.lc(this.path.get(e))}lc(e){if(e.length===0)throw this.Tc("Document fields must not be empty");if(jw(this.oc)&&q4.test(e))throw this.Tc('Document fields cannot begin and end with "__"')}}class H4{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Hh(e)}dc(e,t,i,a=!1){return new hy({oc:e,methodName:t,Ec:i,path:en.emptyPath(),cc:!1,Ic:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Xh(n){const e=n._freezeSettings(),t=Hh(n._databaseId);return new H4(n._databaseId,!!e.ignoreUndefinedProperties,t)}function kw(n,e,t,i,a,l={}){const c=n.dc(l.merge||l.mergeFields?2:0,e,t,a);my("Data must be an object, but it was:",c,i);const f=Vw(i,c);let m,y;if(l.merge)m=new kn(c.fieldMask),y=c.fieldTransforms;else if(l.mergeFields){const v=[];for(const E of l.mergeFields){const w=cg(e,E,t);if(!c.contains(w))throw new me(ie.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);Uw(v,w)||v.push(w)}m=new kn(v),y=c.fieldTransforms.filter(E=>m.covers(E.field))}else m=null,y=c.fieldTransforms;return new F4(new wn(f),m,y)}class Zh extends Wh{_toFieldTransform(e){if(e.oc!==2)throw e.oc===1?e.Tc(`${this._methodName}() can only appear at the top level of your update data`):e.Tc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Zh}}class fy extends Wh{_toFieldTransform(e){return new jD(e.path,new Lu)}isEqual(e){return e instanceof fy}}function G4(n,e,t,i){const a=n.dc(1,e,t);my("Data must be an object, but it was:",a,i);const l=[],c=wn.empty();As(i,(m,y)=>{const v=py(e,m,t);y=Vt(y);const E=a.hc(v);if(y instanceof Zh)l.push(v);else{const w=nc(y,E);w!=null&&(l.push(v),c.set(v,w))}});const f=new kn(l);return new Mw(c,f,a.fieldTransforms)}function $4(n,e,t,i,a,l){const c=n.dc(1,e,t),f=[cg(e,i,t)],m=[a];if(l.length%2!=0)throw new me(ie.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<l.length;w+=2)f.push(cg(e,l[w])),m.push(l[w+1]);const y=[],v=wn.empty();for(let w=f.length-1;w>=0;--w)if(!Uw(y,f[w])){const R=f[w];let S=m[w];S=Vt(S);const U=c.hc(R);if(S instanceof Zh)y.push(R);else{const O=nc(S,U);O!=null&&(y.push(R),v.set(R,O))}}const E=new kn(y);return new Mw(v,E,c.fieldTransforms)}function Y4(n,e,t,i=!1){return nc(t,n.dc(i?4:3,e))}function nc(n,e){if(Lw(n=Vt(n)))return my("Unsupported field value:",e,n),Vw(n,e);if(n instanceof Wh)return function(i,a){if(!jw(a.oc))throw a.Tc(`${i._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Tc(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(a);l&&a.fieldTransforms.push(l)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.cc&&e.oc!==4)throw e.Tc("Nested arrays are not supported");return function(i,a){const l=[];let c=0;for(const f of i){let m=nc(f,a.Pc(c));m==null&&(m={nullValue:"NULL_VALUE"}),l.push(m),c++}return{arrayValue:{values:l}}}(n,e)}return function(i,a){if((i=Vt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return OD(a.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=jt.fromDate(i);return{timestampValue:yh(a.serializer,l)}}if(i instanceof jt){const l=new jt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:yh(a.serializer,l)}}if(i instanceof cy)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Go)return{bytesValue:Z1(a.serializer,i._byteString)};if(i instanceof gn){const l=a.databaseId,c=i.firestore._databaseId;if(!c.isEqual(l))throw a.Tc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Qg(i.firestore._databaseId||a.databaseId,i._key.path)}}if(i instanceof dy)return function(c,f){return{mapValue:{fields:{[R1]:{stringValue:C1},[fh]:{arrayValue:{values:c.toArray().map(y=>{if(typeof y!="number")throw f.Tc("VectorValues must only contain numeric values.");return Gg(f.serializer,y)})}}}}}}(i,a);throw a.Tc(`Unsupported field value: ${Yh(i)}`)}(n,e)}function Vw(n,e){const t={};return E1(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):As(n,(i,a)=>{const l=nc(a,e.uc(i));l!=null&&(t[i]=l)}),{mapValue:{fields:t}}}function Lw(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof jt||n instanceof cy||n instanceof Go||n instanceof gn||n instanceof Wh||n instanceof dy)}function my(n,e,t){if(!Lw(t)||!function(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)}(t)){const i=Yh(t);throw i==="an object"?e.Tc(n+" a custom object"):e.Tc(n+" "+i)}}function cg(n,e,t){if((e=Vt(e))instanceof Qh)return e._internalPath;if(typeof e=="string")return py(n,e);throw Eh("Field path arguments must be of type string or ",n,!1,void 0,t)}const K4=new RegExp("[~\\*/\\[\\]]");function py(n,e,t){if(e.search(K4)>=0)throw Eh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Qh(...e.split("."))._internalPath}catch{throw Eh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Eh(n,e,t,i,a){const l=i&&!i.isEmpty(),c=a!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let m="";return(l||c)&&(m+=" (found",l&&(m+=` in field ${i}`),c&&(m+=` in document ${a}`),m+=")"),new me(ie.INVALID_ARGUMENT,f+n+m)}function Uw(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zw{constructor(e,t,i,a,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new gn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Q4(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Jh("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class Q4 extends zw{data(){return super.data()}}function Jh(n,e){return typeof e=="string"?py(n,e):e instanceof Qh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W4(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new me(ie.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class gy{}class yy extends gy{}function Ur(n,e,...t){let i=[];e instanceof gy&&i.push(e),i=i.concat(t),function(l){const c=l.filter(m=>m instanceof vy).length,f=l.filter(m=>m instanceof ef).length;if(c>1||c>0&&f>0)throw new me(ie.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const a of i)n=a._apply(n);return n}class ef extends yy{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new ef(e,t,i)}_apply(e){const t=this._parse(e);return Bw(e._query,t),new Rs(e.firestore,e.converter,eg(e._query,t))}_parse(e){const t=Xh(e.firestore);return function(l,c,f,m,y,v,E){let w;if(y.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new me(ie.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){RE(E,v);const S=[];for(const U of E)S.push(SE(m,l,U));w={arrayValue:{values:S}}}else w=SE(m,l,E)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||RE(E,v),w=Y4(f,c,E,v==="in"||v==="not-in");return Nt.create(y,v,w)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Ht(n,e,t){const i=e,a=Jh("where",n);return ef._create(a,i,t)}class vy extends gy{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new vy(e,t)}_parse(e){const t=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return t.length===1?t[0]:lr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(a,l){let c=a;const f=l.getFlattenedFilters();for(const m of f)Bw(c,m),c=eg(c,m)}(e._query,t),new Rs(e.firestore,e.converter,eg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class _y extends yy{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new _y(e,t)}_apply(e){const t=function(a,l,c){if(a.startAt!==null)throw new me(ie.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new me(ie.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Vu(l,c)}(e._query,this._field,this._direction);return new Rs(e.firestore,e.converter,function(a,l){const c=a.explicitOrderBy.concat([l]);return new tl(a.path,a.collectionGroup,c,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(e._query,t))}}function zr(n,e="asc"){const t=e,i=Jh("orderBy",n);return _y._create(i,t)}class by extends yy{constructor(e,t,i){super(),this.type=e,this._limit=t,this._limitType=i}static _create(e,t,i){return new by(e,t,i)}_apply(e){return new Rs(e.firestore,e.converter,ph(e._query,this._limit,this._limitType))}}function Ts(n){return L4("limit",n),by._create("limit",n,"F")}function SE(n,e,t){if(typeof(t=Vt(t))=="string"){if(t==="")throw new me(ie.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!k1(e)&&t.indexOf("/")!==-1)throw new me(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(ot.fromString(t));if(!Ee.isDocumentKey(i))throw new me(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Bb(n,new Ee(i))}if(t instanceof gn)return Bb(n,t._key);throw new me(ie.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Yh(t)}.`)}function RE(n,e){if(!Array.isArray(n)||n.length===0)throw new me(ie.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Bw(n,e){const t=function(a,l){for(const c of a)for(const f of c.getFlattenedFilters())if(l.indexOf(f.op)>=0)return f.op;return null}(n.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new me(ie.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new me(ie.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class X4{convertValue(e,t="none"){switch(_s(e)){case 0:return null;case 1:return e.booleanValue;case 2:return wt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(vs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ae(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return As(e,(a,l)=>{i[a]=this.convertValue(l,t)}),i}convertVectorValue(e){var t,i,a;const l=(a=(i=(t=e.fields)===null||t===void 0?void 0:t[fh].arrayValue)===null||i===void 0?void 0:i.values)===null||a===void 0?void 0:a.map(c=>wt(c.doubleValue));return new dy(l)}convertGeoPoint(e){return new cy(wt(e.latitude),wt(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Lh(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Mu(e));default:return null}}convertTimestamp(e){const t=ys(e);return new jt(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=ot.fromString(e);Qe(iw(i),9688,{name:e});const a=new ju(i.get(1),i.get(3)),l=new Ee(i.popFirst(5));return a.isEqual(t)||Ti(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qw(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Fw extends zw{constructor(e,t,i,a,l,c){super(e,t,i,a,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Wd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(Jh("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class Wd extends Fw{data(e={}){return super.data(e)}}class Z4{constructor(e,t,i,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new wu(a.hasPendingWrites,a.fromCache),this.query=i}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new Wd(this._firestore,this._userDataWriter,i.key,i,new wu(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new me(ie.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(a,l){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map(f=>{const m=new Wd(a._firestore,a._userDataWriter,f.doc.key,f.doc,new wu(a._snapshot.mutatedKeys.has(f.doc.key),a._snapshot.fromCache),a.query.converter);return f.doc,{type:"added",doc:m,oldIndex:-1,newIndex:c++}})}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(f=>l||f.type!==3).map(f=>{const m=new Wd(a._firestore,a._userDataWriter,f.doc.key,f.doc,new wu(a._snapshot.mutatedKeys.has(f.doc.key),a._snapshot.fromCache),a.query.converter);let y=-1,v=-1;return f.type!==0&&(y=c.indexOf(f.doc.key),c=c.delete(f.doc.key)),f.type!==1&&(c=c.add(f.doc),v=c.indexOf(f.doc.key)),{type:J4(f.type),doc:m,oldIndex:y,newIndex:v}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function J4(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ae(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yn(n){n=ur(n,gn);const e=ur(n.firestore,Ia);return j4(uy(e),n._key).then(t=>n6(e,n,t))}class Hw extends X4{constructor(e){super(),this.firestore=e}convertBytes(e){return new Go(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new gn(this.firestore,null,t)}}function Cs(n){n=ur(n,Rs);const e=ur(n.firestore,Ia),t=uy(e),i=new Hw(e);return W4(n._query),k4(t,n._query).then(a=>new Z4(e,i,n,a))}function Ey(n,e,t){n=ur(n,gn);const i=ur(n.firestore,Ia),a=qw(n.converter,e,t);return tf(i,[kw(Xh(i),"setDoc",n._key,a,n.converter!==null,t).toMutation(n._key,Xn.none())])}function Sn(n,e,t,...i){n=ur(n,gn);const a=ur(n.firestore,Ia),l=Xh(a);let c;return c=typeof(e=Vt(e))=="string"||e instanceof Qh?$4(l,"updateDoc",n._key,e,t,i):G4(l,"updateDoc",n._key,e),tf(a,[c.toMutation(n._key,Xn.exists(!0))])}function e6(n){return tf(ur(n.firestore,Ia),[new $g(n._key,Xn.none())])}function t6(n,e){const t=ur(n.firestore,Ia),i=ht(n),a=qw(n.converter,e);return tf(t,[kw(Xh(n.firestore),"addDoc",i._key,a,n.converter!==null,{}).toMutation(i._key,Xn.exists(!1))]).then(()=>i)}function tf(n,e){return function(i,a){const l=new yi;return i.asyncQueue.enqueueAndForget(async()=>w4(await M4(i),a,l)),l.promise}(uy(n),e)}function n6(n,e,t){const i=t.docs.get(e._key),a=new Hw(n);return new Fw(n,a,e._key,i,new wu(t.hasPendingWrites,t.fromCache),e.converter)}function lt(){return new fy("serverTimestamp")}(function(e,t=!0){(function(a){Zo=a})(Wo),Vo(new ba("firestore",(i,{instanceIdentifier:a,options:l})=>{const c=i.getProvider("app").getImmediate(),f=new Ia(new $I(i.getProvider("auth-internal")),new QI(c,i.getProvider("app-check-internal")),function(y,v){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new me(ie.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ju(y.options.projectId,v)}(c,a),c);return l=Object.assign({useFetchStreams:t},l),f._setSettings(l),f},"PUBLIC").setMultipleInstances(!0)),hs(Nb,Ib,e),hs(Nb,Ib,"esm2017")})();const r6={apiKey:"AIzaSyApEi7CgbADU0urEtkdRBheJubnyEA-qnw",authDomain:"acriventas-poc.firebaseapp.com",databaseURL:"https://acriventas-poc-default-rtdb.firebaseio.com",projectId:"acriventas-poc",storageBucket:"acriventas-poc.firebasestorage.app",messagingSenderId:"718850780341",appId:"1:718850780341:web:aec07ccdad37235dece2fc",measurementId:"G-0DGH1RQX2G"},Gw=ST(r6),nf=zI(Gw),He=z4(Gw),i6=async(n,e,t,i="agent")=>{try{const l=(await T2(nf,n,e)).user;return await A2(l,{displayName:t}),await Ey(ht(He,"users",l.uid),{uid:l.uid,email:n,displayName:t,role:i,createdAt:lt(),lastLogin:lt()}),l}catch(a){throw console.error("Error al registrar usuario:",a),a}},s6=async(n,e)=>{try{const t=await w2(nf,n,e);return await Ey(ht(He,"users",t.user.uid),{lastLogin:lt()},{merge:!0}),t.user}catch(t){throw console.error("Error al iniciar sesión:",t),t}},a6=async()=>N2(nf),o6=async n=>{try{const e=await yn(ht(He,"users",n));return e.exists()?e.data():null}catch(e){throw console.error("Error al obtener datos del usuario:",e),e}},$w=V.createContext(),rc=()=>V.useContext($w),l6=({children:n})=>{const[e,t]=V.useState(null),[i,a]=V.useState(null),[l,c]=V.useState(!0);V.useEffect(()=>C2(nf,async y=>{if(t(y),y)try{const v=await o6(y.uid);a(v)}catch(v){console.error("Error al cargar detalles del usuario:",v)}else a(null);c(!1)}),[]);const f={currentUser:e,userDetails:i,isAdmin:(i==null?void 0:i.role)==="admin",isAgent:(i==null?void 0:i.role)==="agent",loading:l};return g.jsx($w.Provider,{value:f,children:!l&&n})},u6=()=>{const[n,e]=V.useState(""),[t,i]=V.useState(""),[a,l]=V.useState(""),[c,f]=V.useState(!1),m=vn(),y=async v=>{v.preventDefault();try{l(""),f(!0),await s6(n,t),m("/")}catch(E){l("Credenciales incorrectas. Intente nuevamente."),console.error(E)}finally{f(!1)}};return g.jsx("div",{className:"min-h-screen bg-gradient-to-b from-gray-800 to-gray-900 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:g.jsxs("div",{className:"max-w-md w-full space-y-8 bg-white p-10 rounded-xl shadow-2xl",children:[g.jsxs("div",{children:[g.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Sistema de Cobranza Adaptativa"}),g.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Inicie sesión para continuar"})]}),a&&g.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-md",role:"alert",children:g.jsx("span",{className:"block sm:inline",children:a})}),g.jsxs("form",{className:"mt-8 space-y-6",onSubmit:y,children:[g.jsxs("div",{className:"rounded-md space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{htmlFor:"email-address",className:"block text-sm font-medium text-gray-700",children:"Email"}),g.jsx("input",{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,className:"appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Correo electrónico",value:n,onChange:v=>e(v.target.value)})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Contraseña"}),g.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,className:"appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Contraseña",value:t,onChange:v=>i(v.target.value)})]})]}),g.jsx("div",{children:g.jsx("button",{type:"submit",disabled:c,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:c?"Iniciando sesión...":"Iniciar sesión"})}),g.jsx("div",{className:"text-center text-sm",children:g.jsx(Ih,{to:"/register",className:"font-medium text-primary-600 hover:text-primary-500",children:"¿No tiene cuenta? Regístrese aquí"})})]})]})})},c6=()=>{const[n,e]=V.useState({displayName:"",email:"",password:"",passwordConfirm:""}),[t,i]=V.useState(""),[a,l]=V.useState(!1),c=vn(),f=y=>{const{name:v,value:E}=y.target;e(w=>({...w,[v]:E}))},m=async y=>{if(y.preventDefault(),n.password!==n.passwordConfirm)return i("Las contraseñas no coinciden");if(n.password.length<6)return i("La contraseña debe tener al menos 6 caracteres");try{i(""),l(!0),await i6(n.email,n.password,n.displayName),c("/")}catch(v){console.error("Error al registrar:",v),i(v.code==="auth/email-already-in-use"?"Este correo ya está registrado":"Error al crear la cuenta. Intente nuevamente.")}finally{l(!1)}};return g.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:g.jsxs("div",{className:"max-w-md w-full space-y-8 bg-white p-10 rounded-lg shadow-md",children:[g.jsxs("div",{children:[g.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Crear nueva cuenta"}),g.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Complete el formulario para registrarse"})]}),t&&g.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:g.jsx("span",{className:"block sm:inline",children:t})}),g.jsxs("form",{className:"mt-8 space-y-6",onSubmit:m,children:[g.jsxs("div",{className:"rounded-md shadow-sm space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{htmlFor:"displayName",className:"sr-only",children:"Nombre completo"}),g.jsx("input",{id:"displayName",name:"displayName",type:"text",required:!0,className:"appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-primary-500 focus:border-primary-500 focus:z-10 sm:text-sm",placeholder:"Nombre completo",value:n.displayName,onChange:f})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"email-address",className:"sr-only",children:"Email"}),g.jsx("input",{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,className:"appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-primary-500 focus:border-primary-500 focus:z-10 sm:text-sm",placeholder:"Correo electrónico",value:n.email,onChange:f})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"password",className:"sr-only",children:"Contraseña"}),g.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"new-password",required:!0,className:"appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-primary-500 focus:border-primary-500 focus:z-10 sm:text-sm",placeholder:"Contraseña",value:n.password,onChange:f})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"passwordConfirm",className:"sr-only",children:"Confirmar contraseña"}),g.jsx("input",{id:"passwordConfirm",name:"passwordConfirm",type:"password",autoComplete:"new-password",required:!0,className:"appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-primary-500 focus:border-primary-500 focus:z-10 sm:text-sm",placeholder:"Confirmar contraseña",value:n.passwordConfirm,onChange:f})]})]}),g.jsx("div",{children:g.jsx("button",{type:"submit",disabled:a,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:a?"Creando cuenta...":"Registrarse"})}),g.jsx("div",{className:"text-center",children:g.jsx(Ih,{to:"/login",className:"text-sm text-primary-600 hover:text-primary-500",children:"¿Ya tiene una cuenta? Inicie sesión"})})]})]})})};var Yw={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},CE=ya.createContext&&ya.createContext(Yw),d6=["attr","size","title"];function h6(n,e){if(n==null)return{};var t=f6(n,e),i,a;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(n);for(a=0;a<l.length;a++)i=l[a],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}function f6(n,e){if(n==null)return{};var t={};for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)){if(e.indexOf(i)>=0)continue;t[i]=n[i]}return t}function Th(){return Th=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Th.apply(this,arguments)}function NE(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),t.push.apply(t,i)}return t}function wh(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?NE(Object(t),!0).forEach(function(i){m6(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):NE(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function m6(n,e,t){return e=p6(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function p6(n){var e=g6(n,"string");return typeof e=="symbol"?e:e+""}function g6(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Kw(n){return n&&n.map((e,t)=>ya.createElement(e.tag,wh({key:t},e.attr),Kw(e.child)))}function Ri(n){return e=>ya.createElement(y6,Th({attr:wh({},n.attr)},e),Kw(n.child))}function y6(n){var e=t=>{var{attr:i,size:a,title:l}=n,c=h6(n,d6),f=a||t.size||"1em",m;return t.className&&(m=t.className),n.className&&(m=(m?m+" ":"")+n.className),ya.createElement("svg",Th({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,i,c,{className:m,style:wh(wh({color:n.color||t.color},t.style),n.style),height:f,width:f,xmlns:"http://www.w3.org/2000/svg"}),l&&ya.createElement("title",null,l),n.children)};return CE!==void 0?ya.createElement(CE.Consumer,null,t=>e(t)):e(Yw)}function v6(n){return Ri({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M496 384H64V80c0-8.84-7.16-16-16-16H16C7.16 64 0 71.16 0 80v336c0 17.67 14.33 32 32 32h464c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16zM464 96H345.94c-21.38 0-32.09 25.85-16.97 40.97l32.4 32.4L288 242.75l-73.37-73.37c-12.5-12.5-32.76-12.5-45.25 0l-68.69 68.69c-6.25 6.25-6.25 16.38 0 22.63l22.62 22.62c6.25 6.25 16.38 6.25 22.63 0L192 237.25l73.37 73.37c12.5 12.5 32.76 12.5 45.25 0l96-96 32.4 32.4c15.12 15.12 40.97 4.41 40.97-16.97V112c.01-8.84-7.15-16-15.99-16z"},child:[]}]})(n)}function _6(n){return Ri({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14-11.1-35.6-30-67.8-54.7-94.6-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7-36.7-8.2-74.3-7.8-109.2 0-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3-24.7 26.7-43.6 58.9-54.7 94.6-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14 11.1 35.6 30 67.8 54.7 94.6 3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7 36.7 8.2 74.3 7.8 109.2 0 5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3 24.7-26.7 43.6-58.9 54.7-94.6 1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z"},child:[]}]})(n)}function b6(n){return Ri({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M416 192c0-88.4-93.1-160-208-160S0 103.6 0 192c0 34.3 14.1 65.9 38 92-13.4 30.2-35.5 54.2-35.8 54.5-2.2 2.3-2.8 5.7-1.5 8.7S4.8 352 8 352c36.6 0 66.9-12.3 88.7-25 32.2 15.7 70.3 25 111.3 25 114.9 0 208-71.6 208-160zm122 220c23.9-26 38-57.7 38-92 0-66.9-53.5-124.2-129.3-148.1.9 6.6 1.3 13.3 1.3 20.1 0 105.9-107.7 192-240 192-10.8 0-21.3-.8-31.7-1.9C207.8 439.6 281.8 480 368 480c41 0 79.1-9.2 111.3-25 21.8 12.7 52.1 25 88.7 25 3.2 0 6.1-1.9 7.3-4.8 1.3-2.9.7-6.3-1.5-8.7-.3-.3-22.4-24.2-35.8-54.5z"},child:[]}]})(n)}function E6(n){return Ri({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"},child:[]}]})(n)}function Qw(n){return Ri({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(n)}function T6(n){return Ri({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M32,224H64V416H32A31.96166,31.96166,0,0,1,0,384V256A31.96166,31.96166,0,0,1,32,224Zm512-48V448a64.06328,64.06328,0,0,1-64,64H160a64.06328,64.06328,0,0,1-64-64V176a79.974,79.974,0,0,1,80-80H288V32a32,32,0,0,1,64,0V96H464A79.974,79.974,0,0,1,544,176ZM264,256a40,40,0,1,0-40,40A39.997,39.997,0,0,0,264,256Zm-8,128H192v32h64Zm96,0H288v32h64ZM456,256a40,40,0,1,0-40,40A39.997,39.997,0,0,0,456,256Zm-8,128H384v32h64ZM640,256V384a31.96166,31.96166,0,0,1-32,32H576V224h32A31.96166,31.96166,0,0,1,640,256Z"},child:[]}]})(n)}function Ww(n){return Ri({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"},child:[]}]})(n)}function w6(n){return Ri({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M192 256c61.9 0 112-50.1 112-112S253.9 32 192 32 80 82.1 80 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C51.6 288 0 339.6 0 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zM480 256c53 0 96-43 96-96s-43-96-96-96-96 43-96 96 43 96 96 96zm48 32h-3.8c-13.9 4.8-28.6 8-44.2 8s-30.3-3.2-44.2-8H432c-20.4 0-39.2 5.9-55.7 15.4 24.4 26.3 39.7 61.2 39.7 99.8v38.4c0 2.2-.5 4.3-.6 6.4H592c26.5 0 48-21.5 48-48 0-61.9-50.1-112-112-112z"},child:[]}]})(n)}function x6(n){return Ri({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M624 208h-64v-64c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v64h-64c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h64v64c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-64h64c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zm-400 48c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(n)}const A6=()=>{const n=vn();return g.jsxs("div",{className:"flex flex-wrap gap-4 mb-8",children:[g.jsxs("button",{onClick:()=>n("/conversation/new"),className:"btn-primary flex items-center gap-2",children:[g.jsx(Qw,{})," Iniciar Conversación"]}),g.jsxs("button",{onClick:()=>n("/clients/search"),className:"btn-secondary flex items-center gap-2",children:[g.jsx(Ww,{})," Buscar Cliente"]}),g.jsxs("button",{onClick:()=>n("/clients/new"),className:"btn-secondary flex items-center gap-2",children:[g.jsx(x6,{})," Agregar Cliente"]})]})},Xw=6048e5,S6=864e5,Ld=43200,IE=1440,DE=Symbol.for("constructDateFrom");function xi(n,e){return typeof n=="function"?n(e):n&&typeof n=="object"&&DE in n?n[DE](e):n instanceof Date?new n.constructor(e):new Date(e)}function $t(n,e){return xi(e||n,n)}let R6={};function ic(){return R6}function Bu(n,e){var f,m,y,v;const t=ic(),i=(e==null?void 0:e.weekStartsOn)??((m=(f=e==null?void 0:e.locale)==null?void 0:f.options)==null?void 0:m.weekStartsOn)??t.weekStartsOn??((v=(y=t.locale)==null?void 0:y.options)==null?void 0:v.weekStartsOn)??0,a=$t(n,e==null?void 0:e.in),l=a.getDay(),c=(l<i?7:0)+l-i;return a.setDate(a.getDate()-c),a.setHours(0,0,0,0),a}function xh(n,e){return Bu(n,{...e,weekStartsOn:1})}function Zw(n,e){const t=$t(n,e==null?void 0:e.in),i=t.getFullYear(),a=xi(t,0);a.setFullYear(i+1,0,4),a.setHours(0,0,0,0);const l=xh(a),c=xi(t,0);c.setFullYear(i,0,4),c.setHours(0,0,0,0);const f=xh(c);return t.getTime()>=l.getTime()?i+1:t.getTime()>=f.getTime()?i:i-1}function Ah(n){const e=$t(n),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+n-+t}function rf(n,...e){const t=xi.bind(null,n||e.find(i=>typeof i=="object"));return e.map(t)}function OE(n,e){const t=$t(n,e==null?void 0:e.in);return t.setHours(0,0,0,0),t}function C6(n,e,t){const[i,a]=rf(t==null?void 0:t.in,n,e),l=OE(i),c=OE(a),f=+l-Ah(l),m=+c-Ah(c);return Math.round((f-m)/S6)}function N6(n,e){const t=Zw(n,e),i=xi(n,0);return i.setFullYear(t,0,4),i.setHours(0,0,0,0),xh(i)}function Xd(n,e){const t=+$t(n)-+$t(e);return t<0?-1:t>0?1:t}function I6(n){return xi(n,Date.now())}function D6(n){return n instanceof Date||typeof n=="object"&&Object.prototype.toString.call(n)==="[object Date]"}function O6(n){return!(!D6(n)&&typeof n!="number"||isNaN(+$t(n)))}function P6(n,e,t){const[i,a]=rf(t==null?void 0:t.in,n,e),l=i.getFullYear()-a.getFullYear(),c=i.getMonth()-a.getMonth();return l*12+c}function M6(n){return e=>{const i=(n?Math[n]:Math.trunc)(e);return i===0?0:i}}function j6(n,e){return+$t(n)-+$t(e)}function k6(n,e){const t=$t(n,e==null?void 0:e.in);return t.setHours(23,59,59,999),t}function V6(n,e){const t=$t(n,e==null?void 0:e.in),i=t.getMonth();return t.setFullYear(t.getFullYear(),i+1,0),t.setHours(23,59,59,999),t}function L6(n,e){const t=$t(n,e==null?void 0:e.in);return+k6(t,e)==+V6(t,e)}function U6(n,e,t){const[i,a,l]=rf(t==null?void 0:t.in,n,n,e),c=Xd(a,l),f=Math.abs(P6(a,l));if(f<1)return 0;a.getMonth()===1&&a.getDate()>27&&a.setDate(30),a.setMonth(a.getMonth()-c*f);let m=Xd(a,l)===-c;L6(i)&&f===1&&Xd(i,l)===1&&(m=!1);const y=c*(f-+m);return y===0?0:y}function z6(n,e,t){const i=j6(n,e)/1e3;return M6(t==null?void 0:t.roundingMethod)(i)}function B6(n,e){const t=$t(n,e==null?void 0:e.in);return t.setFullYear(t.getFullYear(),0,1),t.setHours(0,0,0,0),t}const q6={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},F6=(n,e,t)=>{let i;const a=q6[n];return typeof a=="string"?i=a:e===1?i=a.one:i=a.other.replace("{{count}}",e.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+i:i+" ago":i};function jo(n){return(e={})=>{const t=e.width?String(e.width):n.defaultWidth;return n.formats[t]||n.formats[n.defaultWidth]}}const H6={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},G6={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},$6={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Y6={date:jo({formats:H6,defaultWidth:"full"}),time:jo({formats:G6,defaultWidth:"full"}),dateTime:jo({formats:$6,defaultWidth:"full"})},K6={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Q6=(n,e,t,i)=>K6[n];function Or(n){return(e,t)=>{const i=t!=null&&t.context?String(t.context):"standalone";let a;if(i==="formatting"&&n.formattingValues){const c=n.defaultFormattingWidth||n.defaultWidth,f=t!=null&&t.width?String(t.width):c;a=n.formattingValues[f]||n.formattingValues[c]}else{const c=n.defaultWidth,f=t!=null&&t.width?String(t.width):n.defaultWidth;a=n.values[f]||n.values[c]}const l=n.argumentCallback?n.argumentCallback(e):e;return a[l]}}const W6={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},X6={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Z6={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},J6={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},eP={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},tP={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},nP=(n,e)=>{const t=Number(n),i=t%100;if(i>20||i<10)switch(i%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},rP={ordinalNumber:nP,era:Or({values:W6,defaultWidth:"wide"}),quarter:Or({values:X6,defaultWidth:"wide",argumentCallback:n=>n-1}),month:Or({values:Z6,defaultWidth:"wide"}),day:Or({values:J6,defaultWidth:"wide"}),dayPeriod:Or({values:eP,defaultWidth:"wide",formattingValues:tP,defaultFormattingWidth:"wide"})};function Pr(n){return(e,t={})=>{const i=t.width,a=i&&n.matchPatterns[i]||n.matchPatterns[n.defaultMatchWidth],l=e.match(a);if(!l)return null;const c=l[0],f=i&&n.parsePatterns[i]||n.parsePatterns[n.defaultParseWidth],m=Array.isArray(f)?sP(f,E=>E.test(c)):iP(f,E=>E.test(c));let y;y=n.valueCallback?n.valueCallback(m):m,y=t.valueCallback?t.valueCallback(y):y;const v=e.slice(c.length);return{value:y,rest:v}}}function iP(n,e){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&e(n[t]))return t}function sP(n,e){for(let t=0;t<n.length;t++)if(e(n[t]))return t}function Jw(n){return(e,t={})=>{const i=e.match(n.matchPattern);if(!i)return null;const a=i[0],l=e.match(n.parsePattern);if(!l)return null;let c=n.valueCallback?n.valueCallback(l[0]):l[0];c=t.valueCallback?t.valueCallback(c):c;const f=e.slice(a.length);return{value:c,rest:f}}}const aP=/^(\d+)(th|st|nd|rd)?/i,oP=/\d+/i,lP={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},uP={any:[/^b/i,/^(a|c)/i]},cP={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},dP={any:[/1/i,/2/i,/3/i,/4/i]},hP={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},fP={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},mP={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},pP={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},gP={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},yP={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},vP={ordinalNumber:Jw({matchPattern:aP,parsePattern:oP,valueCallback:n=>parseInt(n,10)}),era:Pr({matchPatterns:lP,defaultMatchWidth:"wide",parsePatterns:uP,defaultParseWidth:"any"}),quarter:Pr({matchPatterns:cP,defaultMatchWidth:"wide",parsePatterns:dP,defaultParseWidth:"any",valueCallback:n=>n+1}),month:Pr({matchPatterns:hP,defaultMatchWidth:"wide",parsePatterns:fP,defaultParseWidth:"any"}),day:Pr({matchPatterns:mP,defaultMatchWidth:"wide",parsePatterns:pP,defaultParseWidth:"any"}),dayPeriod:Pr({matchPatterns:gP,defaultMatchWidth:"any",parsePatterns:yP,defaultParseWidth:"any"})},ex={code:"en-US",formatDistance:F6,formatLong:Y6,formatRelative:Q6,localize:rP,match:vP,options:{weekStartsOn:0,firstWeekContainsDate:1}};function _P(n,e){const t=$t(n,e==null?void 0:e.in);return C6(t,B6(t))+1}function bP(n,e){const t=$t(n,e==null?void 0:e.in),i=+xh(t)-+N6(t);return Math.round(i/Xw)+1}function tx(n,e){var v,E,w,R;const t=$t(n,e==null?void 0:e.in),i=t.getFullYear(),a=ic(),l=(e==null?void 0:e.firstWeekContainsDate)??((E=(v=e==null?void 0:e.locale)==null?void 0:v.options)==null?void 0:E.firstWeekContainsDate)??a.firstWeekContainsDate??((R=(w=a.locale)==null?void 0:w.options)==null?void 0:R.firstWeekContainsDate)??1,c=xi((e==null?void 0:e.in)||n,0);c.setFullYear(i+1,0,l),c.setHours(0,0,0,0);const f=Bu(c,e),m=xi((e==null?void 0:e.in)||n,0);m.setFullYear(i,0,l),m.setHours(0,0,0,0);const y=Bu(m,e);return+t>=+f?i+1:+t>=+y?i:i-1}function EP(n,e){var f,m,y,v;const t=ic(),i=(e==null?void 0:e.firstWeekContainsDate)??((m=(f=e==null?void 0:e.locale)==null?void 0:f.options)==null?void 0:m.firstWeekContainsDate)??t.firstWeekContainsDate??((v=(y=t.locale)==null?void 0:y.options)==null?void 0:v.firstWeekContainsDate)??1,a=tx(n,e),l=xi((e==null?void 0:e.in)||n,0);return l.setFullYear(a,0,i),l.setHours(0,0,0,0),Bu(l,e)}function TP(n,e){const t=$t(n,e==null?void 0:e.in),i=+Bu(t,e)-+EP(t,e);return Math.round(i/Xw)+1}function Je(n,e){const t=n<0?"-":"",i=Math.abs(n).toString().padStart(e,"0");return t+i}const is={y(n,e){const t=n.getFullYear(),i=t>0?t:1-t;return Je(e==="yy"?i%100:i,e.length)},M(n,e){const t=n.getMonth();return e==="M"?String(t+1):Je(t+1,2)},d(n,e){return Je(n.getDate(),e.length)},a(n,e){const t=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(n,e){return Je(n.getHours()%12||12,e.length)},H(n,e){return Je(n.getHours(),e.length)},m(n,e){return Je(n.getMinutes(),e.length)},s(n,e){return Je(n.getSeconds(),e.length)},S(n,e){const t=e.length,i=n.getMilliseconds(),a=Math.trunc(i*Math.pow(10,t-3));return Je(a,e.length)}},xo={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},PE={G:function(n,e,t){const i=n.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(i,{width:"abbreviated"});case"GGGGG":return t.era(i,{width:"narrow"});case"GGGG":default:return t.era(i,{width:"wide"})}},y:function(n,e,t){if(e==="yo"){const i=n.getFullYear(),a=i>0?i:1-i;return t.ordinalNumber(a,{unit:"year"})}return is.y(n,e)},Y:function(n,e,t,i){const a=tx(n,i),l=a>0?a:1-a;if(e==="YY"){const c=l%100;return Je(c,2)}return e==="Yo"?t.ordinalNumber(l,{unit:"year"}):Je(l,e.length)},R:function(n,e){const t=Zw(n);return Je(t,e.length)},u:function(n,e){const t=n.getFullYear();return Je(t,e.length)},Q:function(n,e,t){const i=Math.ceil((n.getMonth()+1)/3);switch(e){case"Q":return String(i);case"QQ":return Je(i,2);case"Qo":return t.ordinalNumber(i,{unit:"quarter"});case"QQQ":return t.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(i,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(i,{width:"wide",context:"formatting"})}},q:function(n,e,t){const i=Math.ceil((n.getMonth()+1)/3);switch(e){case"q":return String(i);case"qq":return Je(i,2);case"qo":return t.ordinalNumber(i,{unit:"quarter"});case"qqq":return t.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(i,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(i,{width:"wide",context:"standalone"})}},M:function(n,e,t){const i=n.getMonth();switch(e){case"M":case"MM":return is.M(n,e);case"Mo":return t.ordinalNumber(i+1,{unit:"month"});case"MMM":return t.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(i,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(i,{width:"wide",context:"formatting"})}},L:function(n,e,t){const i=n.getMonth();switch(e){case"L":return String(i+1);case"LL":return Je(i+1,2);case"Lo":return t.ordinalNumber(i+1,{unit:"month"});case"LLL":return t.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(i,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(i,{width:"wide",context:"standalone"})}},w:function(n,e,t,i){const a=TP(n,i);return e==="wo"?t.ordinalNumber(a,{unit:"week"}):Je(a,e.length)},I:function(n,e,t){const i=bP(n);return e==="Io"?t.ordinalNumber(i,{unit:"week"}):Je(i,e.length)},d:function(n,e,t){return e==="do"?t.ordinalNumber(n.getDate(),{unit:"date"}):is.d(n,e)},D:function(n,e,t){const i=_P(n);return e==="Do"?t.ordinalNumber(i,{unit:"dayOfYear"}):Je(i,e.length)},E:function(n,e,t){const i=n.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(i,{width:"short",context:"formatting"});case"EEEE":default:return t.day(i,{width:"wide",context:"formatting"})}},e:function(n,e,t,i){const a=n.getDay(),l=(a-i.weekStartsOn+8)%7||7;switch(e){case"e":return String(l);case"ee":return Je(l,2);case"eo":return t.ordinalNumber(l,{unit:"day"});case"eee":return t.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(a,{width:"short",context:"formatting"});case"eeee":default:return t.day(a,{width:"wide",context:"formatting"})}},c:function(n,e,t,i){const a=n.getDay(),l=(a-i.weekStartsOn+8)%7||7;switch(e){case"c":return String(l);case"cc":return Je(l,e.length);case"co":return t.ordinalNumber(l,{unit:"day"});case"ccc":return t.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(a,{width:"narrow",context:"standalone"});case"cccccc":return t.day(a,{width:"short",context:"standalone"});case"cccc":default:return t.day(a,{width:"wide",context:"standalone"})}},i:function(n,e,t){const i=n.getDay(),a=i===0?7:i;switch(e){case"i":return String(a);case"ii":return Je(a,e.length);case"io":return t.ordinalNumber(a,{unit:"day"});case"iii":return t.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(i,{width:"short",context:"formatting"});case"iiii":default:return t.day(i,{width:"wide",context:"formatting"})}},a:function(n,e,t){const a=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(n,e,t){const i=n.getHours();let a;switch(i===12?a=xo.noon:i===0?a=xo.midnight:a=i/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(n,e,t){const i=n.getHours();let a;switch(i>=17?a=xo.evening:i>=12?a=xo.afternoon:i>=4?a=xo.morning:a=xo.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(n,e,t){if(e==="ho"){let i=n.getHours()%12;return i===0&&(i=12),t.ordinalNumber(i,{unit:"hour"})}return is.h(n,e)},H:function(n,e,t){return e==="Ho"?t.ordinalNumber(n.getHours(),{unit:"hour"}):is.H(n,e)},K:function(n,e,t){const i=n.getHours()%12;return e==="Ko"?t.ordinalNumber(i,{unit:"hour"}):Je(i,e.length)},k:function(n,e,t){let i=n.getHours();return i===0&&(i=24),e==="ko"?t.ordinalNumber(i,{unit:"hour"}):Je(i,e.length)},m:function(n,e,t){return e==="mo"?t.ordinalNumber(n.getMinutes(),{unit:"minute"}):is.m(n,e)},s:function(n,e,t){return e==="so"?t.ordinalNumber(n.getSeconds(),{unit:"second"}):is.s(n,e)},S:function(n,e){return is.S(n,e)},X:function(n,e,t){const i=n.getTimezoneOffset();if(i===0)return"Z";switch(e){case"X":return jE(i);case"XXXX":case"XX":return ma(i);case"XXXXX":case"XXX":default:return ma(i,":")}},x:function(n,e,t){const i=n.getTimezoneOffset();switch(e){case"x":return jE(i);case"xxxx":case"xx":return ma(i);case"xxxxx":case"xxx":default:return ma(i,":")}},O:function(n,e,t){const i=n.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+ME(i,":");case"OOOO":default:return"GMT"+ma(i,":")}},z:function(n,e,t){const i=n.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+ME(i,":");case"zzzz":default:return"GMT"+ma(i,":")}},t:function(n,e,t){const i=Math.trunc(+n/1e3);return Je(i,e.length)},T:function(n,e,t){return Je(+n,e.length)}};function ME(n,e=""){const t=n>0?"-":"+",i=Math.abs(n),a=Math.trunc(i/60),l=i%60;return l===0?t+String(a):t+String(a)+e+Je(l,2)}function jE(n,e){return n%60===0?(n>0?"-":"+")+Je(Math.abs(n)/60,2):ma(n,e)}function ma(n,e=""){const t=n>0?"-":"+",i=Math.abs(n),a=Je(Math.trunc(i/60),2),l=Je(i%60,2);return t+a+e+l}const kE=(n,e)=>{switch(n){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},nx=(n,e)=>{switch(n){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},wP=(n,e)=>{const t=n.match(/(P+)(p+)?/)||[],i=t[1],a=t[2];if(!a)return kE(n,e);let l;switch(i){case"P":l=e.dateTime({width:"short"});break;case"PP":l=e.dateTime({width:"medium"});break;case"PPP":l=e.dateTime({width:"long"});break;case"PPPP":default:l=e.dateTime({width:"full"});break}return l.replace("{{date}}",kE(i,e)).replace("{{time}}",nx(a,e))},xP={p:nx,P:wP},AP=/^D+$/,SP=/^Y+$/,RP=["D","DD","YY","YYYY"];function CP(n){return AP.test(n)}function NP(n){return SP.test(n)}function IP(n,e,t){const i=DP(n,e,t);if(console.warn(i),RP.includes(n))throw new RangeError(i)}function DP(n,e,t){const i=n[0]==="Y"?"years":"days of the month";return`Use \`${n.toLowerCase()}\` instead of \`${n}\` (in \`${e}\`) for formatting ${i} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const OP=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,PP=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,MP=/^'([^]*?)'?$/,jP=/''/g,kP=/[a-zA-Z]/;function ko(n,e,t){var v,E,w,R,S,U,O,Y;const i=ic(),a=(t==null?void 0:t.locale)??i.locale??ex,l=(t==null?void 0:t.firstWeekContainsDate)??((E=(v=t==null?void 0:t.locale)==null?void 0:v.options)==null?void 0:E.firstWeekContainsDate)??i.firstWeekContainsDate??((R=(w=i.locale)==null?void 0:w.options)==null?void 0:R.firstWeekContainsDate)??1,c=(t==null?void 0:t.weekStartsOn)??((U=(S=t==null?void 0:t.locale)==null?void 0:S.options)==null?void 0:U.weekStartsOn)??i.weekStartsOn??((Y=(O=i.locale)==null?void 0:O.options)==null?void 0:Y.weekStartsOn)??0,f=$t(n,t==null?void 0:t.in);if(!O6(f))throw new RangeError("Invalid time value");let m=e.match(PP).map(Q=>{const z=Q[0];if(z==="p"||z==="P"){const ue=xP[z];return ue(Q,a.formatLong)}return Q}).join("").match(OP).map(Q=>{if(Q==="''")return{isToken:!1,value:"'"};const z=Q[0];if(z==="'")return{isToken:!1,value:VP(Q)};if(PE[z])return{isToken:!0,value:Q};if(z.match(kP))throw new RangeError("Format string contains an unescaped latin alphabet character `"+z+"`");return{isToken:!1,value:Q}});a.localize.preprocessor&&(m=a.localize.preprocessor(f,m));const y={firstWeekContainsDate:l,weekStartsOn:c,locale:a};return m.map(Q=>{if(!Q.isToken)return Q.value;const z=Q.value;(!(t!=null&&t.useAdditionalWeekYearTokens)&&NP(z)||!(t!=null&&t.useAdditionalDayOfYearTokens)&&CP(z))&&IP(z,e,String(n));const ue=PE[z[0]];return ue(f,z,a.localize,y)}).join("")}function VP(n){const e=n.match(MP);return e?e[1].replace(jP,"'"):n}function LP(n,e,t){const i=ic(),a=(t==null?void 0:t.locale)??i.locale??ex,l=2520,c=Xd(n,e);if(isNaN(c))throw new RangeError("Invalid time value");const f=Object.assign({},t,{addSuffix:t==null?void 0:t.addSuffix,comparison:c}),[m,y]=rf(t==null?void 0:t.in,...c>0?[e,n]:[n,e]),v=z6(y,m),E=(Ah(y)-Ah(m))/1e3,w=Math.round((v-E)/60);let R;if(w<2)return t!=null&&t.includeSeconds?v<5?a.formatDistance("lessThanXSeconds",5,f):v<10?a.formatDistance("lessThanXSeconds",10,f):v<20?a.formatDistance("lessThanXSeconds",20,f):v<40?a.formatDistance("halfAMinute",0,f):v<60?a.formatDistance("lessThanXMinutes",1,f):a.formatDistance("xMinutes",1,f):w===0?a.formatDistance("lessThanXMinutes",1,f):a.formatDistance("xMinutes",w,f);if(w<45)return a.formatDistance("xMinutes",w,f);if(w<90)return a.formatDistance("aboutXHours",1,f);if(w<IE){const S=Math.round(w/60);return a.formatDistance("aboutXHours",S,f)}else{if(w<l)return a.formatDistance("xDays",1,f);if(w<Ld){const S=Math.round(w/IE);return a.formatDistance("xDays",S,f)}else if(w<Ld*2)return R=Math.round(w/Ld),a.formatDistance("aboutXMonths",R,f)}if(R=U6(y,m),R<12){const S=Math.round(w/Ld);return a.formatDistance("xMonths",S,f)}else{const S=R%12,U=Math.trunc(R/12);return S<3?a.formatDistance("aboutXYears",U,f):S<9?a.formatDistance("overXYears",U,f):a.formatDistance("almostXYears",U+1,f)}}function VE(n,e){return LP(n,I6(n),e)}const UP={lessThanXSeconds:{one:"menos de un segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"medio minuto",lessThanXMinutes:{one:"menos de un minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"alrededor de 1 hora",other:"alrededor de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 día",other:"{{count}} días"},aboutXWeeks:{one:"alrededor de 1 semana",other:"alrededor de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"alrededor de 1 mes",other:"alrededor de {{count}} meses"},xMonths:{one:"1 mes",other:"{{count}} meses"},aboutXYears:{one:"alrededor de 1 año",other:"alrededor de {{count}} años"},xYears:{one:"1 año",other:"{{count}} años"},overXYears:{one:"más de 1 año",other:"más de {{count}} años"},almostXYears:{one:"casi 1 año",other:"casi {{count}} años"}},zP=(n,e,t)=>{let i;const a=UP[n];return typeof a=="string"?i=a:e===1?i=a.one:i=a.other.replace("{{count}}",e.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"en "+i:"hace "+i:i},BP={full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/y"},qP={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},FP={full:"{{date}} 'a las' {{time}}",long:"{{date}} 'a las' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},HP={date:jo({formats:BP,defaultWidth:"full"}),time:jo({formats:qP,defaultWidth:"full"}),dateTime:jo({formats:FP,defaultWidth:"full"})},GP={lastWeek:"'el' eeee 'pasado a la' p",yesterday:"'ayer a la' p",today:"'hoy a la' p",tomorrow:"'mañana a la' p",nextWeek:"eeee 'a la' p",other:"P"},$P={lastWeek:"'el' eeee 'pasado a las' p",yesterday:"'ayer a las' p",today:"'hoy a las' p",tomorrow:"'mañana a las' p",nextWeek:"eeee 'a las' p",other:"P"},YP=(n,e,t,i)=>e.getHours()!==1?$P[n]:GP[n],KP={narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","después de cristo"]},QP={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1º trimestre","2º trimestre","3º trimestre","4º trimestre"]},WP={narrow:["e","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],wide:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]},XP={narrow:["d","l","m","m","j","v","s"],short:["do","lu","ma","mi","ju","vi","sá"],abbreviated:["dom","lun","mar","mié","jue","vie","sáb"],wide:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"]},ZP={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"}},JP={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"}},eM=(n,e)=>Number(n)+"º",tM={ordinalNumber:eM,era:Or({values:KP,defaultWidth:"wide"}),quarter:Or({values:QP,defaultWidth:"wide",argumentCallback:n=>Number(n)-1}),month:Or({values:WP,defaultWidth:"wide"}),day:Or({values:XP,defaultWidth:"wide"}),dayPeriod:Or({values:ZP,defaultWidth:"wide",formattingValues:JP,defaultFormattingWidth:"wide"})},nM=/^(\d+)(º)?/i,rM=/\d+/i,iM={narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|a\.?\s?e\.?\s?c\.?|d\.?\s?c\.?|e\.?\s?c\.?)/i,wide:/^(antes de cristo|antes de la era com[uú]n|despu[eé]s de cristo|era com[uú]n)/i},sM={any:[/^ac/i,/^dc/i],wide:[/^(antes de cristo|antes de la era com[uú]n)/i,/^(despu[eé]s de cristo|era com[uú]n)/i]},aM={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234](º)? trimestre/i},oM={any:[/1/i,/2/i,/3/i,/4/i]},lM={narrow:/^[efmajsond]/i,abbreviated:/^(ene|feb|mar|abr|may|jun|jul|ago|sep|oct|nov|dic)/i,wide:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i},uM={narrow:[/^e/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^en/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i]},cM={narrow:/^[dlmjvs]/i,short:/^(do|lu|ma|mi|ju|vi|s[áa])/i,abbreviated:/^(dom|lun|mar|mi[ée]|jue|vie|s[áa]b)/i,wide:/^(domingo|lunes|martes|mi[ée]rcoles|jueves|viernes|s[áa]bado)/i},dM={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^do/i,/^lu/i,/^ma/i,/^mi/i,/^ju/i,/^vi/i,/^sa/i]},hM={narrow:/^(a|p|mn|md|(de la|a las) (mañana|tarde|noche))/i,any:/^([ap]\.?\s?m\.?|medianoche|mediodia|(de la|a las) (mañana|tarde|noche))/i},fM={any:{am:/^a/i,pm:/^p/i,midnight:/^mn/i,noon:/^md/i,morning:/mañana/i,afternoon:/tarde/i,evening:/tarde/i,night:/noche/i}},mM={ordinalNumber:Jw({matchPattern:nM,parsePattern:rM,valueCallback:function(n){return parseInt(n,10)}}),era:Pr({matchPatterns:iM,defaultMatchWidth:"wide",parsePatterns:sM,defaultParseWidth:"any"}),quarter:Pr({matchPatterns:aM,defaultMatchWidth:"wide",parsePatterns:oM,defaultParseWidth:"any",valueCallback:n=>n+1}),month:Pr({matchPatterns:lM,defaultMatchWidth:"wide",parsePatterns:uM,defaultParseWidth:"any"}),day:Pr({matchPatterns:cM,defaultMatchWidth:"wide",parsePatterns:dM,defaultParseWidth:"any"}),dayPeriod:Pr({matchPatterns:hM,defaultMatchWidth:"any",parsePatterns:fM,defaultParseWidth:"any"})},ps={code:"es",formatDistance:zP,formatLong:HP,formatRelative:YP,localize:tM,match:mM,options:{weekStartsOn:1,firstWeekContainsDate:1}},Zt=[];for(let n=0;n<256;++n)Zt.push((n+256).toString(16).slice(1));function pM(n,e=0){return(Zt[n[e+0]]+Zt[n[e+1]]+Zt[n[e+2]]+Zt[n[e+3]]+"-"+Zt[n[e+4]]+Zt[n[e+5]]+"-"+Zt[n[e+6]]+Zt[n[e+7]]+"-"+Zt[n[e+8]]+Zt[n[e+9]]+"-"+Zt[n[e+10]]+Zt[n[e+11]]+Zt[n[e+12]]+Zt[n[e+13]]+Zt[n[e+14]]+Zt[n[e+15]]).toLowerCase()}let Op;const gM=new Uint8Array(16);function yM(){if(!Op){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Op=crypto.getRandomValues.bind(crypto)}return Op(gM)}const vM=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),LE={randomUUID:vM};function Ty(n,e,t){var a;if(LE.randomUUID&&!n)return LE.randomUUID();n=n||{};const i=n.random??((a=n.rng)==null?void 0:a.call(n))??yM();if(i.length<16)throw new Error("Random bytes length must be >= 16");return i[6]=i[6]&15|64,i[8]=i[8]&63|128,pM(i)}const rx=cr(He,"clients"),_M=async n=>{const e=Ty(),t=ht(He,"clients",e),i={relationship:n.relationship||50,history:n.history||50,attitude:n.attitude||50,sensitivity:n.sensitivity||50,probability:n.probability||50};return await Ey(t,{id:e,name:n.name,email:n.email||"",phone:n.phone||"",debt:Number(n.debt)||0,createdAt:lt(),updatedAt:lt(),soul:i,status:"active",tags:n.tags||[],notes:n.notes||"",lastContact:null,paymentHistory:[]}),e},ix=async n=>{const e=await yn(ht(He,"clients",n));return e.exists()?{id:e.id,...e.data()}:null},sf=async()=>(await Cs(Ur(rx,zr("name","asc")))).docs.map(e=>({id:e.id,...e.data()})),bM=async n=>{if(!n||n.trim()==="")return sf();const e=n.toLowerCase().trim();return(await Cs(rx)).docs.map(a=>({id:a.id,...a.data()})).filter(a=>a.name.toLowerCase().includes(e)||a.email&&a.email.toLowerCase().includes(e)||a.phone&&a.phone.includes(e))},EM=async(n,e)=>{const t=ht(He,"clients",n);if(!(await yn(t)).exists())throw new Error("Cliente no encontrado");return delete e.id,delete e.createdAt,await Sn(t,{...e,updatedAt:lt()}),n},TM=async(n,e,t=null)=>{const i=ht(He,"clients",n),a=await yn(i);if(!a.exists())throw new Error("Cliente no encontrado");const l=a.data(),c={debt:Number(e),updatedAt:lt()};return t&&(c.paymentHistory=[...l.paymentHistory||[],{date:lt(),amount:t.amount,type:t.type||"payment",notes:t.notes||""}]),await Sn(i,c),n},wM=async n=>{const e=ht(He,"clients",n);await Sn(e,{lastContact:lt(),updatedAt:lt()})},Ce={GREETING:"greeting",DEBT_NOTIFICATION:"debt_notification",NEGOTIATION:"negotiation",PAYMENT_CONFIRMATION:"payment_confirmation",FAREWELL:"farewell"},Gt={NEW:"new",ACTIVE:"active",INACTIVE:"inactive",CLOSED:"closed"},xM={neutral:{relationship:0,history:0,attitude:0,sensitivity:0,probability:0},accepts_payment:{relationship:5,history:10,attitude:10,sensitivity:-5,probability:20},offers_partial:{relationship:5,history:5,attitude:10,sensitivity:-5,probability:15},reschedule:{relationship:2,history:-5,attitude:5,sensitivity:0,probability:-5},evades:{relationship:-5,history:-5,attitude:-10,sensitivity:5,probability:-10},annoyed:{relationship:-10,history:-5,attitude:-15,sensitivity:10,probability:-15},refuses:{relationship:-20,history:-20,attitude:-20,sensitivity:20,probability:-30},thanks:{relationship:5,history:0,attitude:10,sensitivity:-5,probability:10},no_answer:{relationship:-5,history:-10,attitude:-5,sensitivity:0,probability:-10},confirms_payment:{relationship:10,history:20,attitude:20,sensitivity:-10,probability:30}},AM=async(n,e,t)=>{const i=ht(He,"clients",n),a=await yn(i);if(!a.exists())throw new Error("Cliente no encontrado");const l=a.data();await wM(n);const c={clientId:n,clientName:l.name,agentId:e,startedAt:lt(),updatedAt:lt(),status:Gt.NEW,isActive:!0,initialSoul:t||l.soul,currentSoul:t||l.soul,turns:[],nextActionDate:null,summary:null};return(await t6(cr(He,"conversations"),c)).id},UE=async(n,e)=>{const t=ht(He,"conversations",n),i=await yn(t);if(!i.exists())throw new Error("Conversación no encontrada");const a=i.data();let l={...a.currentSoul},c={relationship:0,history:0,attitude:0,sensitivity:0,probability:0};if(e.event&&e.event!=="neutral"){c=xM[e.event]||c;const E=w=>Math.min(Math.max(w,0),100);l={relationship:E(l.relationship+(c.relationship||0)),history:E(l.history+(c.history||0)),attitude:E(l.attitude+(c.attitude||0)),sensitivity:E(l.sensitivity+(c.sensitivity||0)),probability:E(l.probability+(c.probability||0))}}const f=new Date,m={id:Ty(),timestamp:f,timestampMillis:f.getTime(),...e,phase:e.phase||Ce.NEGOTIATION,deltas:c,currentSoul:l},y=[...a.turns,m],v=a.status===Gt.NEW?Gt.ACTIVE:a.status;if(await Sn(t,{turns:y,currentSoul:l,status:v,isActive:!0,updatedAt:lt()}),e.sender==="client"&&e.event!=="neutral"){const E=ht(He,"clients",a.clientId);await Sn(E,{soul:l,updatedAt:lt()})}return{turns:y,currentSoul:l}},Ao=async n=>{const e=await yn(ht(He,"conversations",n));if(!e.exists())return null;const t={id:e.id,...e.data()};if(t.clientId)try{const i=await yn(ht(He,"clients",t.clientId));i.exists()&&(t.client={id:i.id,...i.data()})}catch(i){console.error("Error al cargar datos del cliente:",i)}return t},SM=async(n,e=5)=>{const t=Ur(cr(He,"conversations"),Ht("clientId","==",n),zr("startedAt","desc"),Ts(e));return(await Cs(t)).docs.map(a=>({id:a.id,...a.data()}))},RM=async(n,e)=>{const t=ht(He,"conversations",n),i=await yn(t);if(!i.exists())throw new Error("Conversación no encontrada");const a=i.data();if(await Sn(t,{status:Gt.CLOSED,isActive:!1,closedAt:lt(),updatedAt:lt(),summary:{...e,createdAt:lt()}}),a.clientId){const l=ht(He,"clients",a.clientId);await Sn(l,{soul:a.currentSoul,updatedAt:lt()})}return n},CM=async(n=null,e=10)=>{let t;return n?t=Ur(cr(He,"conversations"),Ht("status","==",Gt.NEW),Ht("agentId","==",n),zr("startedAt","desc"),Ts(e)):t=Ur(cr(He,"conversations"),Ht("status","==",Gt.NEW),zr("startedAt","desc"),Ts(e)),(await Cs(t)).docs.map(a=>({id:a.id,...a.data()}))},sx=async(n=null,e=10)=>{let t;return n?t=Ur(cr(He,"conversations"),Ht("status","==",Gt.ACTIVE),Ht("isActive","==",!0),Ht("agentId","==",n),zr("startedAt","desc"),Ts(e)):t=Ur(cr(He,"conversations"),Ht("status","==",Gt.ACTIVE),Ht("isActive","==",!0),zr("startedAt","desc"),Ts(e)),(await Cs(t)).docs.map(a=>({id:a.id,...a.data()}))},NM=async n=>{const e=Ur(cr(He,"conversations"),Ht("clientId","==",n),Ht("isActive","==",!0),Ht("status","in",[Gt.NEW,Gt.ACTIVE]),zr("updatedAt","desc"));return(await Cs(e)).docs.map(i=>({id:i.id,...i.data()}))},ax=async(n=null,e=100)=>{let t;return n?t=Ur(cr(He,"conversations"),Ht("status","==",Gt.CLOSED),Ht("agentId","==",n),zr("closedAt","desc"),Ts(e)):t=Ur(cr(He,"conversations"),Ht("status","==",Gt.CLOSED),zr("closedAt","desc"),Ts(e)),(await Cs(t)).docs.map(a=>({id:a.id,...a.data()}))},IM=async(n=10)=>{const e=new Date,t=Ur(cr(He,"conversations"),Ht("status","==",Gt.ACTIVE),Ht("isActive","==",!0),Ht("nextActionDate",">=",e),zr("nextActionDate","asc"),Ts(n));return(await Cs(t)).docs.map(a=>({id:a.id,...a.data()}))},DM=async(n,e)=>{try{const t=ht(He,"conversations",n),i=await yn(t);if(!i.exists())throw new Error("Conversación no encontrada");const a=i.data();if(await Sn(t,{currentSoul:e,updatedAt:lt()}),a.clientId){const l=ht(He,"clients",a.clientId);await Sn(l,{soul:e,updatedAt:lt()})}return e}catch(t){throw console.error("Error al actualizar valores del alma:",t),t}},ox=async n=>{const e=ht(He,"conversations",n);if(!(await yn(e)).exists())throw new Error("Conversación no encontrada");return await e6(e),n},zE=async(n,e,t=!0)=>{const i=ht(He,"conversations",n);if(!(await yn(i)).exists())throw new Error("Conversación no encontrada");if(!Object.values(Gt).includes(e))throw new Error("Estado de conversación no válido");return await Sn(i,{status:e,isActive:t,updatedAt:lt()}),n},OM=async(n,e,t)=>{const i=ht(He,"conversations",n),a=await yn(i);if(!a.exists())throw new Error("Conversación no encontrada");const c=a.data().turns.map(f=>f.id===e?{...f,...t,phase:t.phase||f.phase,isEdited:!0,editedAt:new Date}:f);return await Sn(i,{turns:c,updatedAt:lt()}),c},PM=async(n,e)=>{const t=ht(He,"conversations",n),i=await yn(t);if(!i.exists())throw new Error("Conversación no encontrada");const l=i.data().turns.filter(c=>c.id!==e);return await Sn(t,{turns:l,updatedAt:lt()}),l},MM=async(n,e)=>{const t=ht(He,"conversations",n),i=await yn(t);if(!i.exists())throw new Error("Conversación no encontrada");const a=i.data(),l=e.deltas||{relationship:0,history:0,attitude:0,sensitivity:0,probability:0};let c={...a.currentSoul};if(e.event&&e.event!=="neutral"&&e.deltas){const v=E=>Math.min(Math.max(E,0),100);c={relationship:v(c.relationship+(l.relationship||0)),history:v(c.history+(l.history||0)),attitude:v(c.attitude+(l.attitude||0)),sensitivity:v(c.sensitivity+(l.sensitivity||0)),probability:v(c.probability+(l.probability||0))}}const f=new Date,m={id:Ty(),timestamp:f,timestampMillis:f.getTime(),...e,phase:e.phase||Ce.NEGOTIATION,deltas:l,currentSoul:c,isManual:!0},y=[...a.turns,m];if(await Sn(t,{turns:y,currentSoul:c,updatedAt:lt()}),e.updateClientSoul&&e.sender==="client"&&e.event!=="neutral"){const v=ht(He,"clients",a.clientId);await Sn(v,{soul:c,updatedAt:lt()})}return{turns:y,currentSoul:c}},Pp=({title:n,conversations:e,isLoading:t,emptyMessage:i="No hay conversaciones disponibles",showClientInfo:a=!0,onConversationDeleted:l=null})=>{const c=vn(),[f,m]=V.useState(e),y=async(E,w)=>{if(w.stopPropagation(),window.confirm("¿Está seguro que desea eliminar esta conversación? Esta acción es permanente y no se puede deshacer."))try{await ox(E),l?l(E):m(R=>R.filter(S=>S.id!==E))}catch(R){console.error("Error al eliminar conversación:",R),alert("Error al eliminar la conversación: "+R.message)}};if(t)return g.jsxs("div",{className:"bg-white p-4 rounded-lg shadow mb-6",children:[g.jsx("h2",{className:"text-lg font-semibold mb-4",children:n}),g.jsx("div",{className:"animate-pulse flex space-x-4",children:g.jsxs("div",{className:"flex-1 space-y-4 py-1",children:[g.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),g.jsxs("div",{className:"space-y-2",children:[g.jsx("div",{className:"h-4 bg-gray-200 rounded"}),g.jsx("div",{className:"h-4 bg-gray-200 rounded w-5/6"})]})]})})]});const v=l?e:f;return g.jsxs("div",{className:"bg-white p-4 rounded-lg shadow mb-6",children:[g.jsx("h2",{className:"text-lg font-semibold mb-4",children:n}),v.length===0?g.jsx("p",{className:"text-gray-500 text-center py-4",children:i}):g.jsx("ul",{className:"divide-y divide-gray-200",children:v.map(E=>{const R=(E.turns&&E.turns.length>0?E.turns[E.turns.length-1].sender:null)==="client"?"border-l-4 border-green-500":"border-l-4 border-gray-300",S=E.startedAt?VE(new Date(E.startedAt.seconds*1e3),{addSuffix:!0,locale:ps}):"Fecha desconocida";return g.jsxs("li",{className:`p-3 hover:bg-gray-50 cursor-pointer ${R}`,onClick:()=>c(`/conversation/${E.id}`),children:[g.jsxs("div",{className:"flex justify-between",children:[g.jsxs("span",{className:"font-medium",children:[a?E.clientName||"Cliente":"",E.isActive&&g.jsx("span",{className:"ml-2 px-1.5 py-0.5 bg-green-100 text-green-800 text-xs rounded-full",children:"Activa"})]}),g.jsxs("div",{className:"flex items-center space-x-2",children:[g.jsx("span",{className:"text-sm text-gray-500",children:S}),g.jsx("button",{className:"text-red-500 hover:text-red-700",onClick:U=>y(E.id,U),title:"Eliminar conversación",children:g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),E.turns&&E.turns.length>0&&g.jsx("p",{className:"text-sm text-gray-600 mt-1 truncate",children:E.turns[E.turns.length-1].message}),E.nextActionDate&&g.jsxs("div",{className:"mt-2 text-xs text-blue-600",children:["Próxima acción: ",VE(new Date(E.nextActionDate.seconds*1e3),{addSuffix:!0,locale:ps})]})]},E.id)})})]})},jM=({onFilterChange:n})=>{const[e,t]=V.useState("newest"),i=a=>{t(a),n(a)};return g.jsxs("div",{className:"flex space-x-2 mb-4",children:[g.jsx("button",{className:`px-3 py-1 text-sm rounded-full ${e==="newest"?"bg-primary-100 text-primary-800":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,onClick:()=>i("newest"),children:"Más recientes"}),g.jsx("button",{className:`px-3 py-1 text-sm rounded-full ${e==="upcoming"?"bg-primary-100 text-primary-800":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,onClick:()=>i("upcoming"),children:"Próxima fecha"})]})},kM=()=>{const{currentUser:n}=rc(),[e,t]=V.useState([]),[i,a]=V.useState([]),[l,c]=V.useState([]),[f,m]=V.useState(!0),[y,v]=V.useState("newest");V.useEffect(()=>{(async()=>{m(!0);try{let S;y==="newest"?S=await CM(n.uid):S=await IM();const U=await sx(n.uid),O=await ax(n.uid);t(S),a(U),c(O)}catch(S){console.error("Error al cargar conversaciones:",S)}finally{m(!1)}})()},[n,y]);const E=R=>{v(R)},w=R=>{t(S=>S.filter(U=>U.id!==R)),a(S=>S.filter(U=>U.id!==R)),c(S=>S.filter(U=>U.id!==R))};return g.jsxs("div",{className:"container mx-auto px-4 py-6",children:[g.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Dashboard"}),g.jsx(A6,{}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[g.jsxs("div",{children:[g.jsxs("div",{className:"mb-2",children:[g.jsx("h2",{className:"text-lg font-semibold",children:"Nuevas Conversaciones"}),g.jsx(jM,{onFilterChange:E})]}),g.jsx(Pp,{title:"",conversations:e,isLoading:f,emptyMessage:"No hay nuevas conversaciones",onConversationDeleted:w}),g.jsx(Pp,{title:"Conversaciones Activas",conversations:i,isLoading:f,emptyMessage:"No hay conversaciones activas",onConversationDeleted:w})]}),g.jsx("div",{children:g.jsx(Pp,{title:"Historial de Conversaciones",conversations:l,isLoading:f,emptyMessage:"No hay conversaciones en el historial",onConversationDeleted:w})})]})]})},$o=({initialValues:n,onChange:e,readOnly:t=!1})=>{const[i,a]=V.useState({relationship:50,history:50,attitude:50,sensitivity:50,probability:50,...n});V.useEffect(()=>{n&&a({relationship:50,history:50,attitude:50,sensitivity:50,probability:50,...n})},[n]);const l=(m,y)=>{const v={...i,[m]:parseInt(y,10)};a(v),e&&e(v)},c=m=>m<30?"bg-red-500":m<50?"bg-orange-500":m<70?"bg-yellow-500":"bg-green-500",f=(m,y,v)=>g.jsxs("div",{className:"mb-6",children:[g.jsxs("div",{className:"flex justify-between items-center mb-2",children:[g.jsx("label",{className:"text-sm font-medium text-gray-700",children:m}),g.jsx("span",{className:`px-2 py-1 rounded-full text-white text-xs font-medium ${c(i[y])}`,children:i[y]})]}),g.jsx("input",{type:"range",min:"0",max:"100",step:"1",value:i[y],onChange:E=>l(y,E.target.value),disabled:t,className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"}),g.jsx("p",{className:"mt-1 text-sm text-gray-500",children:v})]});return g.jsxs("div",{className:"space-y-2",children:[f("Relación/Cercanía","relationship","Indica cuán cercana es la relación con el cliente."),f("Historial de Pago","history","Nivel de cumplimiento de pagos en el pasado."),f("Actitud en la Llamada","attitude","Disposición emocional del cliente en la conversación."),f("Sensibilidad a Presión","sensitivity","Nivel de reacción negativa a la insistencia o tono de urgencia."),f("Probabilidad de Pago","probability","Estimación de si pagará pronto.")]})},VM=()=>{const{clientId:n}=Eg(),e=vn(),[t,i]=V.useState(null),[a,l]=V.useState([]),[c,f]=V.useState([]),[m,y]=V.useState(!0),[v,E]=V.useState(!1),[w,R]=V.useState(null);V.useEffect(()=>{(async()=>{try{y(!0);const ue=await ix(n);i(ue),R(ue);const le=await NM(n),ye=await SM(n,10);l(le);const M=ye.filter(C=>!C.isActive);f(M)}catch(ue){console.error("Error al cargar datos del cliente:",ue)}finally{y(!1)}})()},[n]);const S=z=>{const{name:ue,value:le}=z.target;R(ye=>({...ye,[ue]:ue==="debt"?parseFloat(le)||0:le}))},U=z=>{R(ue=>({...ue,soul:z}))},O=async z=>{z.preventDefault();try{y(!0),await EM(n,{name:w.name,email:w.email,phone:w.phone,notes:w.notes,soul:w.soul}),t.debt!==w.debt&&await TM(n,w.debt),i(w),E(!1)}catch(ue){console.error("Error al actualizar cliente:",ue)}finally{y(!1)}},Y=()=>{e(`/conversation/new/${n}`)},Q=z=>{if(!z)return"N/A";const ue=new Date(z.seconds*1e3);return ko(ue,"PPP",{locale:ps})};return m&&!t?g.jsx("div",{className:"container mx-auto px-4 py-6",children:g.jsxs("div",{className:"animate-pulse",children:[g.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-6"}),g.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-4"}),g.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-4"}),g.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/3 mb-4"})]})}):t?g.jsxs("div",{className:"container mx-auto px-4 py-6",children:[g.jsxs("div",{className:"flex justify-between items-center mb-6",children:[g.jsx("h1",{className:"text-2xl font-bold",children:t.name}),g.jsx("div",{className:"flex gap-2",children:v?g.jsx("button",{className:"btn-secondary",onClick:()=>{R(t),E(!1)},children:"Cancelar Edición"}):g.jsxs(g.Fragment,{children:[g.jsx("button",{className:"btn-secondary",onClick:()=>E(!0),children:"Editar"}),g.jsx("button",{className:"btn-primary",onClick:Y,children:"Nueva Conversación"})]})})]}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[g.jsxs("div",{className:"md:col-span-2",children:[v?g.jsxs("form",{onSubmit:O,className:"bg-white rounded-lg shadow p-6",children:[g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"name",className:"label",children:"Nombre completo"}),g.jsx("input",{type:"text",id:"name",name:"name",className:"input",value:w.name,onChange:S,required:!0})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"email",className:"label",children:"Email"}),g.jsx("input",{type:"email",id:"email",name:"email",className:"input",value:w.email,onChange:S})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"phone",className:"label",children:"Teléfono"}),g.jsx("input",{type:"text",id:"phone",name:"phone",className:"input",value:w.phone,onChange:S,required:!0})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"debt",className:"label",children:"Monto de deuda"}),g.jsx("input",{type:"number",id:"debt",name:"debt",className:"input",value:w.debt,onChange:S,required:!0})]}),g.jsxs("div",{className:"form-group md:col-span-2",children:[g.jsx("label",{htmlFor:"notes",className:"label",children:"Notas"}),g.jsx("textarea",{id:"notes",name:"notes",rows:"3",className:"input",value:w.notes,onChange:S})]})]}),g.jsxs("div",{className:"mt-6",children:[g.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Variables del Alma"}),g.jsx($o,{initialValues:w.soul,onChange:U,readOnly:!1}),g.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Ajuste las variables de relación con el cliente según su conocimiento actual."})]}),g.jsx("div",{className:"flex justify-end mt-6",children:g.jsx("button",{type:"submit",className:"btn-primary",disabled:m,children:m?"Guardando...":"Guardar Cambios"})})]}):g.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-y-4",children:[g.jsxs("div",{children:[g.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Email"}),g.jsx("p",{children:t.email||"No disponible"})]}),g.jsxs("div",{children:[g.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Teléfono"}),g.jsx("p",{children:t.phone||"No disponible"})]}),g.jsxs("div",{children:[g.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Monto de deuda"}),g.jsxs("p",{className:"text-xl font-semibold text-red-600",children:["$",t.debt.toLocaleString("es-CO")]})]}),g.jsxs("div",{children:[g.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Último contacto"}),g.jsx("p",{children:t.lastContact?Q(t.lastContact):"Sin contacto reciente"})]}),t.notes&&g.jsxs("div",{className:"md:col-span-2 mt-4",children:[g.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"Notas"}),g.jsx("p",{className:"text-gray-700 whitespace-pre-line",children:t.notes})]})]})}),g.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mt-6",children:[g.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Conversaciones Activas"}),a.length===0?g.jsx("p",{className:"text-gray-500 text-center py-4",children:"No hay conversaciones activas con este cliente."}):g.jsx("ul",{className:"divide-y divide-gray-200",children:a.map(z=>{const ue=z.startedAt?ko(new Date(z.startedAt.seconds*1e3),"PPp",{locale:ps}):"Fecha desconocida",le=z.turns&&z.turns.length>0?z.turns[z.turns.length-1]:null;return g.jsxs("li",{className:"py-3 cursor-pointer hover:bg-gray-50",onClick:()=>e(`/conversation/${z.id}`),children:[g.jsxs("div",{className:"flex justify-between",children:[g.jsxs("span",{className:"font-medium",children:["Conversación del ",ue]}),g.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Activa"})]}),le&&g.jsxs("p",{className:"text-sm text-gray-600 mt-1 truncate",children:[g.jsx("span",{className:"font-medium",children:le.sender==="agent"?"Agente: ":"Cliente: "}),le.message]})]},z.id)})}),g.jsx("div",{className:"mt-4",children:g.jsx("button",{className:"btn-primary",onClick:Y,children:"Iniciar Nueva Conversación"})})]}),g.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mt-6",children:[g.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Historial de Conversaciones"}),c.length===0?g.jsx("p",{className:"text-gray-500 text-center py-4",children:"No hay conversaciones en el historial."}):g.jsx("ul",{className:"divide-y divide-gray-200",children:c.map(z=>{const ue=z.startedAt?ko(new Date(z.startedAt.seconds*1e3),"PPp",{locale:ps}):"Fecha desconocida",le=z.turns&&z.turns.length>0?z.turns[z.turns.length-1]:null;return g.jsxs("li",{className:"py-3 cursor-pointer hover:bg-gray-50",onClick:()=>e(`/conversation/${z.id}`),children:[g.jsxs("div",{className:"flex justify-between",children:[g.jsxs("span",{className:"font-medium",children:["Conversación del ",ue]}),g.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${z.status==="closed"?"bg-gray-100 text-gray-800":"bg-blue-100 text-blue-800"}`,children:z.status==="closed"?"Finalizada":"Inactiva"})]}),le&&g.jsxs("p",{className:"text-sm text-gray-600 mt-1 truncate",children:[g.jsx("span",{className:"font-medium",children:le.sender==="agent"?"Agente: ":"Cliente: "}),le.message]}),z.summary&&g.jsxs("div",{className:"mt-1 text-xs",children:[g.jsx("span",{className:"text-gray-500",children:"Resultado: "}),g.jsx("span",{className:"font-medium",children:z.summary.result})]})]},z.id)})})]})]}),g.jsx("div",{children:g.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[g.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Variables del Alma"}),g.jsx($o,{initialValues:v?w.soul:t.soul,onChange:v?U:null,readOnly:!v}),g.jsxs("div",{className:"mt-4 text-sm text-gray-500",children:[g.jsx("p",{children:"Estas variables representan la disposición y relación del cliente, y se ajustan automáticamente durante las conversaciones."}),g.jsx("p",{className:"mt-2",children:'Para modificar estos valores, utilice el botón "Editar" en la parte superior.'})]})]})})]})]}):g.jsxs("div",{className:"container mx-auto px-4 py-6",children:[g.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:[g.jsx("strong",{className:"font-bold",children:"Error:"}),g.jsx("span",{className:"block sm:inline",children:" No se pudo encontrar el cliente."})]}),g.jsx("button",{className:"btn-secondary mt-4",onClick:()=>e(-1),children:"Volver"})]})},LM=()=>{const n=vn(),[e,t]=V.useState(""),[i,a]=V.useState([]),[l,c]=V.useState(!1),[f,m]=V.useState(!1),y=async v=>{if(v.preventDefault(),!!e.trim()){c(!0),m(!0);try{const E=await bM(e);a(E)}catch(E){console.error("Error al buscar clientes:",E)}finally{c(!1)}}};return g.jsxs("div",{className:"container mx-auto px-4 py-6",children:[g.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Buscar Cliente"}),g.jsx("form",{onSubmit:y,className:"mb-6",children:g.jsxs("div",{className:"flex gap-2",children:[g.jsx("input",{type:"text",className:"input flex-grow",placeholder:"Nombre, teléfono o email del cliente",value:e,onChange:v=>t(v.target.value)}),g.jsx("button",{type:"submit",className:"btn-primary",disabled:l,children:l?"Buscando...":"Buscar"})]})}),g.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[g.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Resultados"}),l?g.jsxs("div",{className:"animate-pulse space-y-4 py-4",children:[g.jsx("div",{className:"h-5 bg-gray-200 rounded w-3/4"}),g.jsx("div",{className:"h-5 bg-gray-200 rounded w-1/2"}),g.jsx("div",{className:"h-5 bg-gray-200 rounded w-5/6"})]}):i.length===0?g.jsx("p",{className:"text-gray-500 text-center py-4",children:f?"No se encontraron resultados. Intente con otros términos de búsqueda.":"Ingrese un término de búsqueda para encontrar clientes."}):g.jsx("ul",{className:"divide-y divide-gray-200",children:i.map(v=>g.jsxs("li",{className:"py-3 hover:bg-gray-50 cursor-pointer",onClick:()=>n(`/clients/${v.id}`),children:[g.jsxs("div",{className:"flex justify-between",children:[g.jsx("span",{className:"font-medium",children:v.name}),g.jsxs("span",{className:"text-red-600 font-medium",children:["$",v.debt.toLocaleString("es-CO")]})]}),g.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:[v.phone," ",v.email&&`| ${v.email}`]}),g.jsxs("div",{className:"flex mt-2 space-x-2",children:[g.jsx("button",{className:"text-sm text-primary-600 hover:text-primary-800",onClick:E=>{E.stopPropagation(),n(`/clients/${v.id}`)},children:"Ver detalles"}),g.jsx("button",{className:"text-sm text-primary-600 hover:text-primary-800",onClick:E=>{E.stopPropagation(),n(`/conversation/new/${v.id}`)},children:"Iniciar conversación"})]})]},v.id))})]}),g.jsx("div",{className:"mt-6",children:g.jsx("button",{className:"btn-secondary",onClick:()=>n(-1),children:"Volver"})})]})},UM=()=>{const n=vn(),[e,t]=V.useState({name:"",email:"",phone:"",debt:"",notes:""}),[i,a]=V.useState({relationship:50,history:50,attitude:50,sensitivity:50,probability:50}),[l,c]=V.useState(!1),[f,m]=V.useState(""),y=E=>{const{name:w,value:R}=E.target;t(S=>({...S,[w]:w==="debt"?parseFloat(R)||"":R}))},v=async E=>{if(E.preventDefault(),m(""),!e.name.trim()){m("El nombre del cliente es obligatorio");return}if(!e.phone.trim()){m("El teléfono es obligatorio");return}if(isNaN(e.debt)||e.debt===""){m("Debe ingresar un monto de deuda válido");return}try{c(!0);const w={...e,...i},R=await _M(w);console.log("Cliente creado con ID:",R),n(`/clients/${R}`)}catch(w){console.error("Error al crear el cliente:",w),m("Ocurrió un error al crear el cliente. Por favor, intente nuevamente.")}finally{c(!1)}};return g.jsxs("div",{className:"container mx-auto px-4 py-6",children:[g.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Agregar Nuevo Cliente"}),f&&g.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-6",role:"alert",children:g.jsx("span",{className:"block sm:inline",children:f})}),g.jsxs("form",{onSubmit:v,className:"bg-white rounded-lg shadow p-6",children:[g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"name",className:"label",children:"Nombre completo *"}),g.jsx("input",{type:"text",id:"name",name:"name",className:"input",value:e.name,onChange:y,required:!0})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"email",className:"label",children:"Email"}),g.jsx("input",{type:"email",id:"email",name:"email",className:"input",value:e.email,onChange:y})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"phone",className:"label",children:"Teléfono *"}),g.jsx("input",{type:"text",id:"phone",name:"phone",className:"input",value:e.phone,onChange:y,required:!0})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"debt",className:"label",children:"Monto de deuda *"}),g.jsx("input",{type:"number",id:"debt",name:"debt",className:"input",value:e.debt,onChange:y,required:!0})]}),g.jsxs("div",{className:"form-group md:col-span-2",children:[g.jsx("label",{htmlFor:"notes",className:"label",children:"Notas"}),g.jsx("textarea",{id:"notes",name:"notes",rows:"3",className:"input",value:e.notes,onChange:y})]})]}),g.jsx("h3",{className:"text-lg font-semibold mt-8 mb-4",children:"Variables del Alma del Cliente"}),g.jsx($o,{initialValues:i,onChange:a}),g.jsxs("div",{className:"flex justify-end gap-4 mt-8",children:[g.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>n(-1),disabled:l,children:"Cancelar"}),g.jsx("button",{type:"submit",className:"btn-primary",disabled:l,children:l?"Guardando...":"Guardar Cliente"})]})]})]})},zM=()=>{const n=vn(),[e,t]=V.useState([]),[i,a]=V.useState(!0),[l,c]=V.useState("");V.useEffect(()=>{(async()=>{try{const y=await sf();t(y)}catch(y){console.error("Error al cargar clientes:",y)}finally{a(!1)}})()},[]);const f=e.filter(m=>m.name.toLowerCase().includes(l.toLowerCase())||m.email.toLowerCase().includes(l.toLowerCase())||m.phone.includes(l));return g.jsxs("div",{className:"container mx-auto px-4 py-6",children:[g.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Seleccionar Cliente para Conversación"}),g.jsx("div",{className:"mb-6",children:g.jsx("input",{type:"text",className:"input",placeholder:"Buscar cliente...",value:l,onChange:m=>c(m.target.value)})}),g.jsx("div",{className:"bg-white rounded-lg shadow",children:i?g.jsx("div",{className:"p-4",children:"Cargando clientes..."}):f.length===0?g.jsxs("div",{className:"p-4 text-center",children:[g.jsx("p",{className:"text-gray-500",children:"No se encontraron clientes."}),g.jsx("button",{className:"btn-primary mt-4",onClick:()=>n("/clients/new"),children:"Agregar Nuevo Cliente"})]}):g.jsx("ul",{className:"divide-y divide-gray-200",children:f.map(m=>g.jsxs("li",{className:"p-4 hover:bg-gray-50 cursor-pointer",onClick:()=>n(`/conversation/new/${m.id}`),children:[g.jsxs("div",{className:"flex justify-between",children:[g.jsx("span",{className:"font-medium",children:m.name}),g.jsxs("span",{className:"text-primary-600 font-semibold",children:["$",m.debt.toLocaleString()]})]}),g.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:[m.phone," | ",m.email]})]},m.id))})}),g.jsx("div",{className:"mt-6",children:g.jsx("button",{className:"btn-secondary",onClick:()=>n(-1),children:"Volver"})})]})},BM=()=>{const n=vn(),[e,t]=V.useState([]),[i,a]=V.useState(!0),[l,c]=V.useState("");V.useEffect(()=>{(async()=>{try{a(!0);const y=await sf();t(y)}catch(y){console.error("Error al cargar clientes:",y)}finally{a(!1)}})()},[]);const f=e.filter(m=>m.name.toLowerCase().includes(l.toLowerCase())||m.email&&m.email.toLowerCase().includes(l.toLowerCase())||m.phone&&m.phone.includes(l));return g.jsxs("div",{className:"container mx-auto px-4 py-6",children:[g.jsxs("div",{className:"flex justify-between items-center mb-6",children:[g.jsx("h1",{className:"text-2xl font-bold",children:"Clientes"}),g.jsxs("div",{className:"flex space-x-2",children:[g.jsxs("button",{className:"btn-primary flex items-center gap-2",onClick:()=>n("/clients/new"),children:[g.jsx(Qw,{})," Agregar Cliente"]}),g.jsxs("button",{className:"btn-secondary flex items-center gap-2",onClick:()=>n("/clients/search"),children:[g.jsx(Ww,{})," Búsqueda Avanzada"]})]})]}),g.jsx("div",{className:"mb-6",children:g.jsx("input",{type:"text",className:"input",placeholder:"Buscar cliente por nombre, email o teléfono...",value:l,onChange:m=>c(m.target.value)})}),g.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:i?g.jsx("div",{className:"p-4",children:g.jsxs("div",{className:"animate-pulse space-y-4",children:[g.jsx("div",{className:"h-5 bg-gray-200 rounded"}),g.jsx("div",{className:"h-5 bg-gray-200 rounded"}),g.jsx("div",{className:"h-5 bg-gray-200 rounded"})]})}):f.length===0?g.jsxs("div",{className:"p-8 text-center",children:[g.jsx("p",{className:"text-gray-500 mb-4",children:"No se encontraron clientes."}),g.jsx("button",{className:"btn-primary",onClick:()=>n("/clients/new"),children:"Agregar Nuevo Cliente"})]}):g.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[g.jsx("thead",{className:"bg-gray-50",children:g.jsxs("tr",{children:[g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nombre"}),g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contacto"}),g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Deuda"}),g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado del Alma"}),g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),g.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:f.map(m=>g.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>n(`/clients/${m.id}`),children:[g.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:g.jsx("div",{className:"font-medium text-gray-900",children:m.name})}),g.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[g.jsx("div",{className:"text-sm text-gray-500",children:m.phone}),g.jsx("div",{className:"text-sm text-gray-500",children:m.email})]}),g.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:g.jsxs("div",{className:"text-sm font-medium text-red-600",children:["$",m.debt.toLocaleString("es-CO")]})}),g.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:g.jsx("div",{className:"flex space-x-1",children:m.soul&&g.jsxs(g.Fragment,{children:[g.jsxs("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${m.soul.relationship>70?"bg-green-100 text-green-800":m.soul.relationship>40?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:["R:",m.soul.relationship]}),g.jsxs("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${m.soul.probability>70?"bg-green-100 text-green-800":m.soul.probability>40?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:["P:",m.soul.probability]})]})})}),g.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:g.jsx("button",{className:"text-primary-600 hover:text-primary-900 mr-3",onClick:y=>{y.stopPropagation(),n(`/conversation/new/${m.id}`)},children:"Iniciar Conversación"})})]},m.id))})]})})]})},qM=async(n,e,t)=>{const i=n.toLowerCase();let a="neutral";i.includes("pagar")||i.includes("transferir")||i.includes("depositar")?i.includes("completo")||i.includes("todo")?a="accepts_payment":i.includes("parte")||i.includes("parcial")||i.includes("algo")?a="offers_partial":(i.includes("próxima")||i.includes("después")||i.includes("luego"))&&(a="reschedule"):i.includes("gracias")||i.includes("agradezco")?a="thanks":i.includes("ya pagué")||i.includes("realicé el pago")||i.includes("transferí")?a="confirms_payment":i.includes("no puedo")||i.includes("imposible")?a="evades":i.includes("molesto")||i.includes("harto")||i.includes("fastidio")?a="annoyed":(i.includes("no voy a pagar")||i.includes("no pagaré")||i.includes("olvídate"))&&(a="refuses");const l={neutral:{relationship:0,history:0,attitude:0,sensitivity:0,probability:0},accepts_payment:{relationship:5,history:10,attitude:10,sensitivity:-5,probability:20},offers_partial:{relationship:5,history:5,attitude:10,sensitivity:-5,probability:15},reschedule:{relationship:2,history:-5,attitude:5,sensitivity:0,probability:-5},evades:{relationship:-5,history:-5,attitude:-10,sensitivity:5,probability:-10},annoyed:{relationship:-10,history:-5,attitude:-15,sensitivity:10,probability:-15},refuses:{relationship:-20,history:-20,attitude:-20,sensitivity:20,probability:-30},thanks:{relationship:5,history:0,attitude:10,sensitivity:-5,probability:10},no_answer:{relationship:-5,history:-10,attitude:-5,sensitivity:0,probability:-10},confirms_payment:{relationship:10,history:20,attitude:20,sensitivity:-10,probability:30}},c=l[a]||l.neutral;return{eventType:a,deltas:c,explanation:`Evento detectado "${a}" basado en palabras clave como "${i.split(" ").slice(0,3).join(" ")}..."`,confidence:.7}},FM=async(n,e,t,i)=>{let a="neutral";e.relationship>70?e.sensitivity>70?a="friendly_no_pressure":a="friendly":e.relationship<40&&(e.sensitivity<40?a="formal_direct":a="formal_soft");const l={accepts_payment:{friendly_no_pressure:"¡Excelente noticia! Gracias por tu disposición. Cuando puedas hacer el pago, solo avísame.",friendly:"¡Perfecto! Muchas gracias por tu colaboración. ¿Te envío los datos para el pago?",formal_direct:"Muy bien. Le agradecemos su decisión. Necesitamos que realice el pago antes del fin de semana.",formal_soft:"Gracias por su confirmación. ¿Prefiere que le enviemos los datos bancarios por este medio?",neutral:"Entendido. ¿Desea que le enviemos la información para realizar el pago?"},offers_partial:{friendly_no_pressure:"Agradezco mucho tu esfuerzo por pagar una parte. Cualquier aporte es bienvenido.",friendly:"Gracias por tu disposición. Un pago parcial nos ayuda mucho. ¿Cuándo podrías realizar este abono?",formal_direct:"Tomamos nota de su oferta de pago parcial. ¿Cuándo podríamos esperar el resto del monto?",formal_soft:"Entendemos su situación. El pago parcial es un buen primer paso. ¿Cuándo sería posible?",neutral:"De acuerdo con el pago parcial. ¿Qué monto podría transferir y cuándo?"},default:{friendly_no_pressure:"Entiendo perfectamente. No te preocupes, cuando puedas realizar el pago me avisas.",friendly:"Agradezco que estemos en contacto. ¿Hay algo en lo que pueda ayudarte para facilitar el proceso?",formal_direct:"Necesitamos regularizar su situación. ¿Podría por favor indicarnos una fecha concreta de pago?",formal_soft:"Entendemos que pueden surgir contratiempos. ¿Podría comentarnos cuándo le sería posible realizar el pago?",neutral:"¿Podría por favor indicarnos cuándo podríamos esperar el pago?"}},c=l[i]||l.default;return{responseText:c[a]||c.neutral,explanation:`Respuesta generada usando tono "${a}" basado en Relación: ${e.relationship}, Sensibilidad: ${e.sensitivity}`,confidence:.8}};function lx(n,e){return function(){return n.apply(e,arguments)}}const{toString:HM}=Object.prototype,{getPrototypeOf:wy}=Object,{iterator:af,toStringTag:ux}=Symbol,of=(n=>e=>{const t=HM.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),hr=n=>(n=n.toLowerCase(),e=>of(e)===n),lf=n=>e=>typeof e===n,{isArray:rl}=Array,qu=lf("undefined");function GM(n){return n!==null&&!qu(n)&&n.constructor!==null&&!qu(n.constructor)&&xn(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const cx=hr("ArrayBuffer");function $M(n){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&cx(n.buffer),e}const YM=lf("string"),xn=lf("function"),dx=lf("number"),uf=n=>n!==null&&typeof n=="object",KM=n=>n===!0||n===!1,Zd=n=>{if(of(n)!=="object")return!1;const e=wy(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(ux in n)&&!(af in n)},QM=hr("Date"),WM=hr("File"),XM=hr("Blob"),ZM=hr("FileList"),JM=n=>uf(n)&&xn(n.pipe),ej=n=>{let e;return n&&(typeof FormData=="function"&&n instanceof FormData||xn(n.append)&&((e=of(n))==="formdata"||e==="object"&&xn(n.toString)&&n.toString()==="[object FormData]"))},tj=hr("URLSearchParams"),[nj,rj,ij,sj]=["ReadableStream","Request","Response","Headers"].map(hr),aj=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function sc(n,e,{allOwnKeys:t=!1}={}){if(n===null||typeof n>"u")return;let i,a;if(typeof n!="object"&&(n=[n]),rl(n))for(i=0,a=n.length;i<a;i++)e.call(null,n[i],i,n);else{const l=t?Object.getOwnPropertyNames(n):Object.keys(n),c=l.length;let f;for(i=0;i<c;i++)f=l[i],e.call(null,n[f],f,n)}}function hx(n,e){e=e.toLowerCase();const t=Object.keys(n);let i=t.length,a;for(;i-- >0;)if(a=t[i],e===a.toLowerCase())return a;return null}const ga=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,fx=n=>!qu(n)&&n!==ga;function dg(){const{caseless:n}=fx(this)&&this||{},e={},t=(i,a)=>{const l=n&&hx(e,a)||a;Zd(e[l])&&Zd(i)?e[l]=dg(e[l],i):Zd(i)?e[l]=dg({},i):rl(i)?e[l]=i.slice():e[l]=i};for(let i=0,a=arguments.length;i<a;i++)arguments[i]&&sc(arguments[i],t);return e}const oj=(n,e,t,{allOwnKeys:i}={})=>(sc(e,(a,l)=>{t&&xn(a)?n[l]=lx(a,t):n[l]=a},{allOwnKeys:i}),n),lj=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),uj=(n,e,t,i)=>{n.prototype=Object.create(e.prototype,i),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:e.prototype}),t&&Object.assign(n.prototype,t)},cj=(n,e,t,i)=>{let a,l,c;const f={};if(e=e||{},n==null)return e;do{for(a=Object.getOwnPropertyNames(n),l=a.length;l-- >0;)c=a[l],(!i||i(c,n,e))&&!f[c]&&(e[c]=n[c],f[c]=!0);n=t!==!1&&wy(n)}while(n&&(!t||t(n,e))&&n!==Object.prototype);return e},dj=(n,e,t)=>{n=String(n),(t===void 0||t>n.length)&&(t=n.length),t-=e.length;const i=n.indexOf(e,t);return i!==-1&&i===t},hj=n=>{if(!n)return null;if(rl(n))return n;let e=n.length;if(!dx(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=n[e];return t},fj=(n=>e=>n&&e instanceof n)(typeof Uint8Array<"u"&&wy(Uint8Array)),mj=(n,e)=>{const i=(n&&n[af]).call(n);let a;for(;(a=i.next())&&!a.done;){const l=a.value;e.call(n,l[0],l[1])}},pj=(n,e)=>{let t;const i=[];for(;(t=n.exec(e))!==null;)i.push(t);return i},gj=hr("HTMLFormElement"),yj=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,i,a){return i.toUpperCase()+a}),BE=(({hasOwnProperty:n})=>(e,t)=>n.call(e,t))(Object.prototype),vj=hr("RegExp"),mx=(n,e)=>{const t=Object.getOwnPropertyDescriptors(n),i={};sc(t,(a,l)=>{let c;(c=e(a,l,n))!==!1&&(i[l]=c||a)}),Object.defineProperties(n,i)},_j=n=>{mx(n,(e,t)=>{if(xn(n)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const i=n[t];if(xn(i)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},bj=(n,e)=>{const t={},i=a=>{a.forEach(l=>{t[l]=!0})};return rl(n)?i(n):i(String(n).split(e)),t},Ej=()=>{},Tj=(n,e)=>n!=null&&Number.isFinite(n=+n)?n:e;function wj(n){return!!(n&&xn(n.append)&&n[ux]==="FormData"&&n[af])}const xj=n=>{const e=new Array(10),t=(i,a)=>{if(uf(i)){if(e.indexOf(i)>=0)return;if(!("toJSON"in i)){e[a]=i;const l=rl(i)?[]:{};return sc(i,(c,f)=>{const m=t(c,a+1);!qu(m)&&(l[f]=m)}),e[a]=void 0,l}}return i};return t(n,0)},Aj=hr("AsyncFunction"),Sj=n=>n&&(uf(n)||xn(n))&&xn(n.then)&&xn(n.catch),px=((n,e)=>n?setImmediate:e?((t,i)=>(ga.addEventListener("message",({source:a,data:l})=>{a===ga&&l===t&&i.length&&i.shift()()},!1),a=>{i.push(a),ga.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",xn(ga.postMessage)),Rj=typeof queueMicrotask<"u"?queueMicrotask.bind(ga):typeof process<"u"&&process.nextTick||px,Cj=n=>n!=null&&xn(n[af]),Z={isArray:rl,isArrayBuffer:cx,isBuffer:GM,isFormData:ej,isArrayBufferView:$M,isString:YM,isNumber:dx,isBoolean:KM,isObject:uf,isPlainObject:Zd,isReadableStream:nj,isRequest:rj,isResponse:ij,isHeaders:sj,isUndefined:qu,isDate:QM,isFile:WM,isBlob:XM,isRegExp:vj,isFunction:xn,isStream:JM,isURLSearchParams:tj,isTypedArray:fj,isFileList:ZM,forEach:sc,merge:dg,extend:oj,trim:aj,stripBOM:lj,inherits:uj,toFlatObject:cj,kindOf:of,kindOfTest:hr,endsWith:dj,toArray:hj,forEachEntry:mj,matchAll:pj,isHTMLForm:gj,hasOwnProperty:BE,hasOwnProp:BE,reduceDescriptors:mx,freezeMethods:_j,toObjectSet:bj,toCamelCase:yj,noop:Ej,toFiniteNumber:Tj,findKey:hx,global:ga,isContextDefined:fx,isSpecCompliantForm:wj,toJSONObject:xj,isAsyncFn:Aj,isThenable:Sj,setImmediate:px,asap:Rj,isIterable:Cj};function Ie(n,e,t,i,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),i&&(this.request=i),a&&(this.response=a,this.status=a.status?a.status:null)}Z.inherits(Ie,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Z.toJSONObject(this.config),code:this.code,status:this.status}}});const gx=Ie.prototype,yx={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{yx[n]={value:n}});Object.defineProperties(Ie,yx);Object.defineProperty(gx,"isAxiosError",{value:!0});Ie.from=(n,e,t,i,a,l)=>{const c=Object.create(gx);return Z.toFlatObject(n,c,function(m){return m!==Error.prototype},f=>f!=="isAxiosError"),Ie.call(c,n.message,e,t,i,a),c.cause=n,c.name=n.name,l&&Object.assign(c,l),c};const Nj=null;function hg(n){return Z.isPlainObject(n)||Z.isArray(n)}function vx(n){return Z.endsWith(n,"[]")?n.slice(0,-2):n}function qE(n,e,t){return n?n.concat(e).map(function(a,l){return a=vx(a),!t&&l?"["+a+"]":a}).join(t?".":""):e}function Ij(n){return Z.isArray(n)&&!n.some(hg)}const Dj=Z.toFlatObject(Z,{},null,function(e){return/^is[A-Z]/.test(e)});function cf(n,e,t){if(!Z.isObject(n))throw new TypeError("target must be an object");e=e||new FormData,t=Z.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(U,O){return!Z.isUndefined(O[U])});const i=t.metaTokens,a=t.visitor||v,l=t.dots,c=t.indexes,m=(t.Blob||typeof Blob<"u"&&Blob)&&Z.isSpecCompliantForm(e);if(!Z.isFunction(a))throw new TypeError("visitor must be a function");function y(S){if(S===null)return"";if(Z.isDate(S))return S.toISOString();if(!m&&Z.isBlob(S))throw new Ie("Blob is not supported. Use a Buffer instead.");return Z.isArrayBuffer(S)||Z.isTypedArray(S)?m&&typeof Blob=="function"?new Blob([S]):Buffer.from(S):S}function v(S,U,O){let Y=S;if(S&&!O&&typeof S=="object"){if(Z.endsWith(U,"{}"))U=i?U:U.slice(0,-2),S=JSON.stringify(S);else if(Z.isArray(S)&&Ij(S)||(Z.isFileList(S)||Z.endsWith(U,"[]"))&&(Y=Z.toArray(S)))return U=vx(U),Y.forEach(function(z,ue){!(Z.isUndefined(z)||z===null)&&e.append(c===!0?qE([U],ue,l):c===null?U:U+"[]",y(z))}),!1}return hg(S)?!0:(e.append(qE(O,U,l),y(S)),!1)}const E=[],w=Object.assign(Dj,{defaultVisitor:v,convertValue:y,isVisitable:hg});function R(S,U){if(!Z.isUndefined(S)){if(E.indexOf(S)!==-1)throw Error("Circular reference detected in "+U.join("."));E.push(S),Z.forEach(S,function(Y,Q){(!(Z.isUndefined(Y)||Y===null)&&a.call(e,Y,Z.isString(Q)?Q.trim():Q,U,w))===!0&&R(Y,U?U.concat(Q):[Q])}),E.pop()}}if(!Z.isObject(n))throw new TypeError("data must be an object");return R(n),e}function FE(n){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(i){return e[i]})}function xy(n,e){this._pairs=[],n&&cf(n,this,e)}const _x=xy.prototype;_x.append=function(e,t){this._pairs.push([e,t])};_x.toString=function(e){const t=e?function(i){return e.call(this,i,FE)}:FE;return this._pairs.map(function(a){return t(a[0])+"="+t(a[1])},"").join("&")};function Oj(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function bx(n,e,t){if(!e)return n;const i=t&&t.encode||Oj;Z.isFunction(t)&&(t={serialize:t});const a=t&&t.serialize;let l;if(a?l=a(e,t):l=Z.isURLSearchParams(e)?e.toString():new xy(e,t).toString(i),l){const c=n.indexOf("#");c!==-1&&(n=n.slice(0,c)),n+=(n.indexOf("?")===-1?"?":"&")+l}return n}class HE{constructor(){this.handlers=[]}use(e,t,i){return this.handlers.push({fulfilled:e,rejected:t,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Z.forEach(this.handlers,function(i){i!==null&&e(i)})}}const Ex={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Pj=typeof URLSearchParams<"u"?URLSearchParams:xy,Mj=typeof FormData<"u"?FormData:null,jj=typeof Blob<"u"?Blob:null,kj={isBrowser:!0,classes:{URLSearchParams:Pj,FormData:Mj,Blob:jj},protocols:["http","https","file","blob","url","data"]},Ay=typeof window<"u"&&typeof document<"u",fg=typeof navigator=="object"&&navigator||void 0,Vj=Ay&&(!fg||["ReactNative","NativeScript","NS"].indexOf(fg.product)<0),Lj=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Uj=Ay&&window.location.href||"http://localhost",zj=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Ay,hasStandardBrowserEnv:Vj,hasStandardBrowserWebWorkerEnv:Lj,navigator:fg,origin:Uj},Symbol.toStringTag,{value:"Module"})),un={...zj,...kj};function Bj(n,e){return cf(n,new un.classes.URLSearchParams,Object.assign({visitor:function(t,i,a,l){return un.isNode&&Z.isBuffer(t)?(this.append(i,t.toString("base64")),!1):l.defaultVisitor.apply(this,arguments)}},e))}function qj(n){return Z.matchAll(/\w+|\[(\w*)]/g,n).map(e=>e[0]==="[]"?"":e[1]||e[0])}function Fj(n){const e={},t=Object.keys(n);let i;const a=t.length;let l;for(i=0;i<a;i++)l=t[i],e[l]=n[l];return e}function Tx(n){function e(t,i,a,l){let c=t[l++];if(c==="__proto__")return!0;const f=Number.isFinite(+c),m=l>=t.length;return c=!c&&Z.isArray(a)?a.length:c,m?(Z.hasOwnProp(a,c)?a[c]=[a[c],i]:a[c]=i,!f):((!a[c]||!Z.isObject(a[c]))&&(a[c]=[]),e(t,i,a[c],l)&&Z.isArray(a[c])&&(a[c]=Fj(a[c])),!f)}if(Z.isFormData(n)&&Z.isFunction(n.entries)){const t={};return Z.forEachEntry(n,(i,a)=>{e(qj(i),a,t,0)}),t}return null}function Hj(n,e,t){if(Z.isString(n))try{return(e||JSON.parse)(n),Z.trim(n)}catch(i){if(i.name!=="SyntaxError")throw i}return(t||JSON.stringify)(n)}const ac={transitional:Ex,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const i=t.getContentType()||"",a=i.indexOf("application/json")>-1,l=Z.isObject(e);if(l&&Z.isHTMLForm(e)&&(e=new FormData(e)),Z.isFormData(e))return a?JSON.stringify(Tx(e)):e;if(Z.isArrayBuffer(e)||Z.isBuffer(e)||Z.isStream(e)||Z.isFile(e)||Z.isBlob(e)||Z.isReadableStream(e))return e;if(Z.isArrayBufferView(e))return e.buffer;if(Z.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let f;if(l){if(i.indexOf("application/x-www-form-urlencoded")>-1)return Bj(e,this.formSerializer).toString();if((f=Z.isFileList(e))||i.indexOf("multipart/form-data")>-1){const m=this.env&&this.env.FormData;return cf(f?{"files[]":e}:e,m&&new m,this.formSerializer)}}return l||a?(t.setContentType("application/json",!1),Hj(e)):e}],transformResponse:[function(e){const t=this.transitional||ac.transitional,i=t&&t.forcedJSONParsing,a=this.responseType==="json";if(Z.isResponse(e)||Z.isReadableStream(e))return e;if(e&&Z.isString(e)&&(i&&!this.responseType||a)){const c=!(t&&t.silentJSONParsing)&&a;try{return JSON.parse(e)}catch(f){if(c)throw f.name==="SyntaxError"?Ie.from(f,Ie.ERR_BAD_RESPONSE,this,null,this.response):f}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:un.classes.FormData,Blob:un.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Z.forEach(["delete","get","head","post","put","patch"],n=>{ac.headers[n]={}});const Gj=Z.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),$j=n=>{const e={};let t,i,a;return n&&n.split(`
`).forEach(function(c){a=c.indexOf(":"),t=c.substring(0,a).trim().toLowerCase(),i=c.substring(a+1).trim(),!(!t||e[t]&&Gj[t])&&(t==="set-cookie"?e[t]?e[t].push(i):e[t]=[i]:e[t]=e[t]?e[t]+", "+i:i)}),e},GE=Symbol("internals");function yu(n){return n&&String(n).trim().toLowerCase()}function Jd(n){return n===!1||n==null?n:Z.isArray(n)?n.map(Jd):String(n)}function Yj(n){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=t.exec(n);)e[i[1]]=i[2];return e}const Kj=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function Mp(n,e,t,i,a){if(Z.isFunction(i))return i.call(this,e,t);if(a&&(e=t),!!Z.isString(e)){if(Z.isString(i))return e.indexOf(i)!==-1;if(Z.isRegExp(i))return i.test(e)}}function Qj(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,i)=>t.toUpperCase()+i)}function Wj(n,e){const t=Z.toCamelCase(" "+e);["get","set","has"].forEach(i=>{Object.defineProperty(n,i+t,{value:function(a,l,c){return this[i].call(this,e,a,l,c)},configurable:!0})})}let An=class{constructor(e){e&&this.set(e)}set(e,t,i){const a=this;function l(f,m,y){const v=yu(m);if(!v)throw new Error("header name must be a non-empty string");const E=Z.findKey(a,v);(!E||a[E]===void 0||y===!0||y===void 0&&a[E]!==!1)&&(a[E||m]=Jd(f))}const c=(f,m)=>Z.forEach(f,(y,v)=>l(y,v,m));if(Z.isPlainObject(e)||e instanceof this.constructor)c(e,t);else if(Z.isString(e)&&(e=e.trim())&&!Kj(e))c($j(e),t);else if(Z.isObject(e)&&Z.isIterable(e)){let f={},m,y;for(const v of e){if(!Z.isArray(v))throw TypeError("Object iterator must return a key-value pair");f[y=v[0]]=(m=f[y])?Z.isArray(m)?[...m,v[1]]:[m,v[1]]:v[1]}c(f,t)}else e!=null&&l(t,e,i);return this}get(e,t){if(e=yu(e),e){const i=Z.findKey(this,e);if(i){const a=this[i];if(!t)return a;if(t===!0)return Yj(a);if(Z.isFunction(t))return t.call(this,a,i);if(Z.isRegExp(t))return t.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=yu(e),e){const i=Z.findKey(this,e);return!!(i&&this[i]!==void 0&&(!t||Mp(this,this[i],i,t)))}return!1}delete(e,t){const i=this;let a=!1;function l(c){if(c=yu(c),c){const f=Z.findKey(i,c);f&&(!t||Mp(i,i[f],f,t))&&(delete i[f],a=!0)}}return Z.isArray(e)?e.forEach(l):l(e),a}clear(e){const t=Object.keys(this);let i=t.length,a=!1;for(;i--;){const l=t[i];(!e||Mp(this,this[l],l,e,!0))&&(delete this[l],a=!0)}return a}normalize(e){const t=this,i={};return Z.forEach(this,(a,l)=>{const c=Z.findKey(i,l);if(c){t[c]=Jd(a),delete t[l];return}const f=e?Qj(l):String(l).trim();f!==l&&delete t[l],t[f]=Jd(a),i[f]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return Z.forEach(this,(i,a)=>{i!=null&&i!==!1&&(t[a]=e&&Z.isArray(i)?i.join(", "):i)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const i=new this(e);return t.forEach(a=>i.set(a)),i}static accessor(e){const i=(this[GE]=this[GE]={accessors:{}}).accessors,a=this.prototype;function l(c){const f=yu(c);i[f]||(Wj(a,c),i[f]=!0)}return Z.isArray(e)?e.forEach(l):l(e),this}};An.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Z.reduceDescriptors(An.prototype,({value:n},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(i){this[t]=i}}});Z.freezeMethods(An);function jp(n,e){const t=this||ac,i=e||t,a=An.from(i.headers);let l=i.data;return Z.forEach(n,function(f){l=f.call(t,l,a.normalize(),e?e.status:void 0)}),a.normalize(),l}function wx(n){return!!(n&&n.__CANCEL__)}function il(n,e,t){Ie.call(this,n??"canceled",Ie.ERR_CANCELED,e,t),this.name="CanceledError"}Z.inherits(il,Ie,{__CANCEL__:!0});function xx(n,e,t){const i=t.config.validateStatus;!t.status||!i||i(t.status)?n(t):e(new Ie("Request failed with status code "+t.status,[Ie.ERR_BAD_REQUEST,Ie.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function Xj(n){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return e&&e[1]||""}function Zj(n,e){n=n||10;const t=new Array(n),i=new Array(n);let a=0,l=0,c;return e=e!==void 0?e:1e3,function(m){const y=Date.now(),v=i[l];c||(c=y),t[a]=m,i[a]=y;let E=l,w=0;for(;E!==a;)w+=t[E++],E=E%n;if(a=(a+1)%n,a===l&&(l=(l+1)%n),y-c<e)return;const R=v&&y-v;return R?Math.round(w*1e3/R):void 0}}function Jj(n,e){let t=0,i=1e3/e,a,l;const c=(y,v=Date.now())=>{t=v,a=null,l&&(clearTimeout(l),l=null),n.apply(null,y)};return[(...y)=>{const v=Date.now(),E=v-t;E>=i?c(y,v):(a=y,l||(l=setTimeout(()=>{l=null,c(a)},i-E)))},()=>a&&c(a)]}const Sh=(n,e,t=3)=>{let i=0;const a=Zj(50,250);return Jj(l=>{const c=l.loaded,f=l.lengthComputable?l.total:void 0,m=c-i,y=a(m),v=c<=f;i=c;const E={loaded:c,total:f,progress:f?c/f:void 0,bytes:m,rate:y||void 0,estimated:y&&f&&v?(f-c)/y:void 0,event:l,lengthComputable:f!=null,[e?"download":"upload"]:!0};n(E)},t)},$E=(n,e)=>{const t=n!=null;return[i=>e[0]({lengthComputable:t,total:n,loaded:i}),e[1]]},YE=n=>(...e)=>Z.asap(()=>n(...e)),e3=un.hasStandardBrowserEnv?((n,e)=>t=>(t=new URL(t,un.origin),n.protocol===t.protocol&&n.host===t.host&&(e||n.port===t.port)))(new URL(un.origin),un.navigator&&/(msie|trident)/i.test(un.navigator.userAgent)):()=>!0,t3=un.hasStandardBrowserEnv?{write(n,e,t,i,a,l){const c=[n+"="+encodeURIComponent(e)];Z.isNumber(t)&&c.push("expires="+new Date(t).toGMTString()),Z.isString(i)&&c.push("path="+i),Z.isString(a)&&c.push("domain="+a),l===!0&&c.push("secure"),document.cookie=c.join("; ")},read(n){const e=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(n){this.write(n,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function n3(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function r3(n,e){return e?n.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):n}function Ax(n,e,t){let i=!n3(e);return n&&(i||t==!1)?r3(n,e):e}const KE=n=>n instanceof An?{...n}:n;function Aa(n,e){e=e||{};const t={};function i(y,v,E,w){return Z.isPlainObject(y)&&Z.isPlainObject(v)?Z.merge.call({caseless:w},y,v):Z.isPlainObject(v)?Z.merge({},v):Z.isArray(v)?v.slice():v}function a(y,v,E,w){if(Z.isUndefined(v)){if(!Z.isUndefined(y))return i(void 0,y,E,w)}else return i(y,v,E,w)}function l(y,v){if(!Z.isUndefined(v))return i(void 0,v)}function c(y,v){if(Z.isUndefined(v)){if(!Z.isUndefined(y))return i(void 0,y)}else return i(void 0,v)}function f(y,v,E){if(E in e)return i(y,v);if(E in n)return i(void 0,y)}const m={url:l,method:l,data:l,baseURL:c,transformRequest:c,transformResponse:c,paramsSerializer:c,timeout:c,timeoutMessage:c,withCredentials:c,withXSRFToken:c,adapter:c,responseType:c,xsrfCookieName:c,xsrfHeaderName:c,onUploadProgress:c,onDownloadProgress:c,decompress:c,maxContentLength:c,maxBodyLength:c,beforeRedirect:c,transport:c,httpAgent:c,httpsAgent:c,cancelToken:c,socketPath:c,responseEncoding:c,validateStatus:f,headers:(y,v,E)=>a(KE(y),KE(v),E,!0)};return Z.forEach(Object.keys(Object.assign({},n,e)),function(v){const E=m[v]||a,w=E(n[v],e[v],v);Z.isUndefined(w)&&E!==f||(t[v]=w)}),t}const Sx=n=>{const e=Aa({},n);let{data:t,withXSRFToken:i,xsrfHeaderName:a,xsrfCookieName:l,headers:c,auth:f}=e;e.headers=c=An.from(c),e.url=bx(Ax(e.baseURL,e.url,e.allowAbsoluteUrls),n.params,n.paramsSerializer),f&&c.set("Authorization","Basic "+btoa((f.username||"")+":"+(f.password?unescape(encodeURIComponent(f.password)):"")));let m;if(Z.isFormData(t)){if(un.hasStandardBrowserEnv||un.hasStandardBrowserWebWorkerEnv)c.setContentType(void 0);else if((m=c.getContentType())!==!1){const[y,...v]=m?m.split(";").map(E=>E.trim()).filter(Boolean):[];c.setContentType([y||"multipart/form-data",...v].join("; "))}}if(un.hasStandardBrowserEnv&&(i&&Z.isFunction(i)&&(i=i(e)),i||i!==!1&&e3(e.url))){const y=a&&l&&t3.read(l);y&&c.set(a,y)}return e},i3=typeof XMLHttpRequest<"u",s3=i3&&function(n){return new Promise(function(t,i){const a=Sx(n);let l=a.data;const c=An.from(a.headers).normalize();let{responseType:f,onUploadProgress:m,onDownloadProgress:y}=a,v,E,w,R,S;function U(){R&&R(),S&&S(),a.cancelToken&&a.cancelToken.unsubscribe(v),a.signal&&a.signal.removeEventListener("abort",v)}let O=new XMLHttpRequest;O.open(a.method.toUpperCase(),a.url,!0),O.timeout=a.timeout;function Y(){if(!O)return;const z=An.from("getAllResponseHeaders"in O&&O.getAllResponseHeaders()),le={data:!f||f==="text"||f==="json"?O.responseText:O.response,status:O.status,statusText:O.statusText,headers:z,config:n,request:O};xx(function(M){t(M),U()},function(M){i(M),U()},le),O=null}"onloadend"in O?O.onloadend=Y:O.onreadystatechange=function(){!O||O.readyState!==4||O.status===0&&!(O.responseURL&&O.responseURL.indexOf("file:")===0)||setTimeout(Y)},O.onabort=function(){O&&(i(new Ie("Request aborted",Ie.ECONNABORTED,n,O)),O=null)},O.onerror=function(){i(new Ie("Network Error",Ie.ERR_NETWORK,n,O)),O=null},O.ontimeout=function(){let ue=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const le=a.transitional||Ex;a.timeoutErrorMessage&&(ue=a.timeoutErrorMessage),i(new Ie(ue,le.clarifyTimeoutError?Ie.ETIMEDOUT:Ie.ECONNABORTED,n,O)),O=null},l===void 0&&c.setContentType(null),"setRequestHeader"in O&&Z.forEach(c.toJSON(),function(ue,le){O.setRequestHeader(le,ue)}),Z.isUndefined(a.withCredentials)||(O.withCredentials=!!a.withCredentials),f&&f!=="json"&&(O.responseType=a.responseType),y&&([w,S]=Sh(y,!0),O.addEventListener("progress",w)),m&&O.upload&&([E,R]=Sh(m),O.upload.addEventListener("progress",E),O.upload.addEventListener("loadend",R)),(a.cancelToken||a.signal)&&(v=z=>{O&&(i(!z||z.type?new il(null,n,O):z),O.abort(),O=null)},a.cancelToken&&a.cancelToken.subscribe(v),a.signal&&(a.signal.aborted?v():a.signal.addEventListener("abort",v)));const Q=Xj(a.url);if(Q&&un.protocols.indexOf(Q)===-1){i(new Ie("Unsupported protocol "+Q+":",Ie.ERR_BAD_REQUEST,n));return}O.send(l||null)})},a3=(n,e)=>{const{length:t}=n=n?n.filter(Boolean):[];if(e||t){let i=new AbortController,a;const l=function(y){if(!a){a=!0,f();const v=y instanceof Error?y:this.reason;i.abort(v instanceof Ie?v:new il(v instanceof Error?v.message:v))}};let c=e&&setTimeout(()=>{c=null,l(new Ie(`timeout ${e} of ms exceeded`,Ie.ETIMEDOUT))},e);const f=()=>{n&&(c&&clearTimeout(c),c=null,n.forEach(y=>{y.unsubscribe?y.unsubscribe(l):y.removeEventListener("abort",l)}),n=null)};n.forEach(y=>y.addEventListener("abort",l));const{signal:m}=i;return m.unsubscribe=()=>Z.asap(f),m}},o3=function*(n,e){let t=n.byteLength;if(t<e){yield n;return}let i=0,a;for(;i<t;)a=i+e,yield n.slice(i,a),i=a},l3=async function*(n,e){for await(const t of u3(n))yield*o3(t,e)},u3=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const e=n.getReader();try{for(;;){const{done:t,value:i}=await e.read();if(t)break;yield i}}finally{await e.cancel()}},QE=(n,e,t,i)=>{const a=l3(n,e);let l=0,c,f=m=>{c||(c=!0,i&&i(m))};return new ReadableStream({async pull(m){try{const{done:y,value:v}=await a.next();if(y){f(),m.close();return}let E=v.byteLength;if(t){let w=l+=E;t(w)}m.enqueue(new Uint8Array(v))}catch(y){throw f(y),y}},cancel(m){return f(m),a.return()}},{highWaterMark:2})},df=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Rx=df&&typeof ReadableStream=="function",c3=df&&(typeof TextEncoder=="function"?(n=>e=>n.encode(e))(new TextEncoder):async n=>new Uint8Array(await new Response(n).arrayBuffer())),Cx=(n,...e)=>{try{return!!n(...e)}catch{return!1}},d3=Rx&&Cx(()=>{let n=!1;const e=new Request(un.origin,{body:new ReadableStream,method:"POST",get duplex(){return n=!0,"half"}}).headers.has("Content-Type");return n&&!e}),WE=64*1024,mg=Rx&&Cx(()=>Z.isReadableStream(new Response("").body)),Rh={stream:mg&&(n=>n.body)};df&&(n=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Rh[e]&&(Rh[e]=Z.isFunction(n[e])?t=>t[e]():(t,i)=>{throw new Ie(`Response type '${e}' is not supported`,Ie.ERR_NOT_SUPPORT,i)})})})(new Response);const h3=async n=>{if(n==null)return 0;if(Z.isBlob(n))return n.size;if(Z.isSpecCompliantForm(n))return(await new Request(un.origin,{method:"POST",body:n}).arrayBuffer()).byteLength;if(Z.isArrayBufferView(n)||Z.isArrayBuffer(n))return n.byteLength;if(Z.isURLSearchParams(n)&&(n=n+""),Z.isString(n))return(await c3(n)).byteLength},f3=async(n,e)=>{const t=Z.toFiniteNumber(n.getContentLength());return t??h3(e)},m3=df&&(async n=>{let{url:e,method:t,data:i,signal:a,cancelToken:l,timeout:c,onDownloadProgress:f,onUploadProgress:m,responseType:y,headers:v,withCredentials:E="same-origin",fetchOptions:w}=Sx(n);y=y?(y+"").toLowerCase():"text";let R=a3([a,l&&l.toAbortSignal()],c),S;const U=R&&R.unsubscribe&&(()=>{R.unsubscribe()});let O;try{if(m&&d3&&t!=="get"&&t!=="head"&&(O=await f3(v,i))!==0){let le=new Request(e,{method:"POST",body:i,duplex:"half"}),ye;if(Z.isFormData(i)&&(ye=le.headers.get("content-type"))&&v.setContentType(ye),le.body){const[M,C]=$E(O,Sh(YE(m)));i=QE(le.body,WE,M,C)}}Z.isString(E)||(E=E?"include":"omit");const Y="credentials"in Request.prototype;S=new Request(e,{...w,signal:R,method:t.toUpperCase(),headers:v.normalize().toJSON(),body:i,duplex:"half",credentials:Y?E:void 0});let Q=await fetch(S);const z=mg&&(y==="stream"||y==="response");if(mg&&(f||z&&U)){const le={};["status","statusText","headers"].forEach(N=>{le[N]=Q[N]});const ye=Z.toFiniteNumber(Q.headers.get("content-length")),[M,C]=f&&$E(ye,Sh(YE(f),!0))||[];Q=new Response(QE(Q.body,WE,M,()=>{C&&C(),U&&U()}),le)}y=y||"text";let ue=await Rh[Z.findKey(Rh,y)||"text"](Q,n);return!z&&U&&U(),await new Promise((le,ye)=>{xx(le,ye,{data:ue,headers:An.from(Q.headers),status:Q.status,statusText:Q.statusText,config:n,request:S})})}catch(Y){throw U&&U(),Y&&Y.name==="TypeError"&&/Load failed|fetch/i.test(Y.message)?Object.assign(new Ie("Network Error",Ie.ERR_NETWORK,n,S),{cause:Y.cause||Y}):Ie.from(Y,Y&&Y.code,n,S)}}),pg={http:Nj,xhr:s3,fetch:m3};Z.forEach(pg,(n,e)=>{if(n){try{Object.defineProperty(n,"name",{value:e})}catch{}Object.defineProperty(n,"adapterName",{value:e})}});const XE=n=>`- ${n}`,p3=n=>Z.isFunction(n)||n===null||n===!1,Nx={getAdapter:n=>{n=Z.isArray(n)?n:[n];const{length:e}=n;let t,i;const a={};for(let l=0;l<e;l++){t=n[l];let c;if(i=t,!p3(t)&&(i=pg[(c=String(t)).toLowerCase()],i===void 0))throw new Ie(`Unknown adapter '${c}'`);if(i)break;a[c||"#"+l]=i}if(!i){const l=Object.entries(a).map(([f,m])=>`adapter ${f} `+(m===!1?"is not supported by the environment":"is not available in the build"));let c=e?l.length>1?`since :
`+l.map(XE).join(`
`):" "+XE(l[0]):"as no adapter specified";throw new Ie("There is no suitable adapter to dispatch the request "+c,"ERR_NOT_SUPPORT")}return i},adapters:pg};function kp(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new il(null,n)}function ZE(n){return kp(n),n.headers=An.from(n.headers),n.data=jp.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),Nx.getAdapter(n.adapter||ac.adapter)(n).then(function(i){return kp(n),i.data=jp.call(n,n.transformResponse,i),i.headers=An.from(i.headers),i},function(i){return wx(i)||(kp(n),i&&i.response&&(i.response.data=jp.call(n,n.transformResponse,i.response),i.response.headers=An.from(i.response.headers))),Promise.reject(i)})}const Ix="1.9.0",hf={};["object","boolean","number","function","string","symbol"].forEach((n,e)=>{hf[n]=function(i){return typeof i===n||"a"+(e<1?"n ":" ")+n}});const JE={};hf.transitional=function(e,t,i){function a(l,c){return"[Axios v"+Ix+"] Transitional option '"+l+"'"+c+(i?". "+i:"")}return(l,c,f)=>{if(e===!1)throw new Ie(a(c," has been removed"+(t?" in "+t:"")),Ie.ERR_DEPRECATED);return t&&!JE[c]&&(JE[c]=!0,console.warn(a(c," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(l,c,f):!0}};hf.spelling=function(e){return(t,i)=>(console.warn(`${i} is likely a misspelling of ${e}`),!0)};function g3(n,e,t){if(typeof n!="object")throw new Ie("options must be an object",Ie.ERR_BAD_OPTION_VALUE);const i=Object.keys(n);let a=i.length;for(;a-- >0;){const l=i[a],c=e[l];if(c){const f=n[l],m=f===void 0||c(f,l,n);if(m!==!0)throw new Ie("option "+l+" must be "+m,Ie.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new Ie("Unknown option "+l,Ie.ERR_BAD_OPTION)}}const eh={assertOptions:g3,validators:hf},Ir=eh.validators;let va=class{constructor(e){this.defaults=e||{},this.interceptors={request:new HE,response:new HE}}async request(e,t){try{return await this._request(e,t)}catch(i){if(i instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const l=a.stack?a.stack.replace(/^.+\n/,""):"";try{i.stack?l&&!String(i.stack).endsWith(l.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+l):i.stack=l}catch{}}throw i}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=Aa(this.defaults,t);const{transitional:i,paramsSerializer:a,headers:l}=t;i!==void 0&&eh.assertOptions(i,{silentJSONParsing:Ir.transitional(Ir.boolean),forcedJSONParsing:Ir.transitional(Ir.boolean),clarifyTimeoutError:Ir.transitional(Ir.boolean)},!1),a!=null&&(Z.isFunction(a)?t.paramsSerializer={serialize:a}:eh.assertOptions(a,{encode:Ir.function,serialize:Ir.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),eh.assertOptions(t,{baseUrl:Ir.spelling("baseURL"),withXsrfToken:Ir.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let c=l&&Z.merge(l.common,l[t.method]);l&&Z.forEach(["delete","get","head","post","put","patch","common"],S=>{delete l[S]}),t.headers=An.concat(c,l);const f=[];let m=!0;this.interceptors.request.forEach(function(U){typeof U.runWhen=="function"&&U.runWhen(t)===!1||(m=m&&U.synchronous,f.unshift(U.fulfilled,U.rejected))});const y=[];this.interceptors.response.forEach(function(U){y.push(U.fulfilled,U.rejected)});let v,E=0,w;if(!m){const S=[ZE.bind(this),void 0];for(S.unshift.apply(S,f),S.push.apply(S,y),w=S.length,v=Promise.resolve(t);E<w;)v=v.then(S[E++],S[E++]);return v}w=f.length;let R=t;for(E=0;E<w;){const S=f[E++],U=f[E++];try{R=S(R)}catch(O){U.call(this,O);break}}try{v=ZE.call(this,R)}catch(S){return Promise.reject(S)}for(E=0,w=y.length;E<w;)v=v.then(y[E++],y[E++]);return v}getUri(e){e=Aa(this.defaults,e);const t=Ax(e.baseURL,e.url,e.allowAbsoluteUrls);return bx(t,e.params,e.paramsSerializer)}};Z.forEach(["delete","get","head","options"],function(e){va.prototype[e]=function(t,i){return this.request(Aa(i||{},{method:e,url:t,data:(i||{}).data}))}});Z.forEach(["post","put","patch"],function(e){function t(i){return function(l,c,f){return this.request(Aa(f||{},{method:e,headers:i?{"Content-Type":"multipart/form-data"}:{},url:l,data:c}))}}va.prototype[e]=t(),va.prototype[e+"Form"]=t(!0)});let y3=class Dx{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(l){t=l});const i=this;this.promise.then(a=>{if(!i._listeners)return;let l=i._listeners.length;for(;l-- >0;)i._listeners[l](a);i._listeners=null}),this.promise.then=a=>{let l;const c=new Promise(f=>{i.subscribe(f),l=f}).then(a);return c.cancel=function(){i.unsubscribe(l)},c},e(function(l,c,f){i.reason||(i.reason=new il(l,c,f),t(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=i=>{e.abort(i)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new Dx(function(a){e=a}),cancel:e}}};function v3(n){return function(t){return n.apply(null,t)}}function _3(n){return Z.isObject(n)&&n.isAxiosError===!0}const gg={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(gg).forEach(([n,e])=>{gg[e]=n});function Ox(n){const e=new va(n),t=lx(va.prototype.request,e);return Z.extend(t,va.prototype,e,{allOwnKeys:!0}),Z.extend(t,e,null,{allOwnKeys:!0}),t.create=function(a){return Ox(Aa(n,a))},t}const vt=Ox(ac);vt.Axios=va;vt.CanceledError=il;vt.CancelToken=y3;vt.isCancel=wx;vt.VERSION=Ix;vt.toFormData=cf;vt.AxiosError=Ie;vt.Cancel=vt.CanceledError;vt.all=function(e){return Promise.all(e)};vt.spread=v3;vt.isAxiosError=_3;vt.mergeConfig=Aa;vt.AxiosHeaders=An;vt.formToJSON=n=>Tx(Z.isHTMLForm(n)?new FormData(n):n);vt.getAdapter=Nx.getAdapter;vt.HttpStatusCode=gg;vt.default=vt;const{Axios:L3,AxiosError:U3,CanceledError:z3,isCancel:B3,CancelToken:q3,VERSION:F3,all:H3,Cancel:G3,isAxiosError:$3,spread:Y3,toFormData:K3,AxiosHeaders:Q3,HttpStatusCode:W3,formToJSON:X3,getAdapter:Z3,mergeConfig:J3}=vt,Px=()=>localStorage.getItem("huggingface_api_key")||".",b3=async(n,e,t)=>{var i;try{const a=Px();if(!a||a.trim()==="")return console.log("No hay API key configurada para Hugging Face, usando fallback local"),eT(n,e,t);const c=vt.create({baseURL:"https://api-inference.huggingface.co/models/HuggingFaceH4/zephyr-7b-beta",headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}});let f="";const m=e.slice(-5);for(const O of m)O.sender==="agent"?f+=`Agente: ${O.message}
`:f+=`Cliente: ${O.message}
`;const y=`<|system|>
Eres un asistente especializado en analizar mensajes en un contexto de cobranza. Tu tarea es categorizar la respuesta del cliente.

IMPORTANTE: NUNCA debes mencionar montos específicos de deuda. Habla siempre en términos de "deuda pendiente" o porcentajes, nunca valores monetarios exactos.

El cliente tiene las siguientes características:
- Relación/Cercanía: ${t.relationship}/100
- Historial de Pago: ${t.history}/100
- Actitud: ${t.attitude}/100
- Sensibilidad a Presión: ${t.sensitivity}/100
- Probabilidad de Pago: ${t.probability}/100

Historial reciente de la conversación: 
${f}
<|user|>
Clasifica este mensaje del cliente: "${n}"

Elige UNA de estas categorías EXACTAS sin explicación:
- neutral
- accepts_payment
- offers_partial
- reschedule
- evades
- annoyed
- refuses
- thanks
- no_answer
- confirms_payment
<|assistant|>`;console.log("Enviando solicitud a Hugging Face API para análisis...");const v=await c.post("",{inputs:y,parameters:{max_new_tokens:20,temperature:.1,top_p:.95,do_sample:!0,return_full_text:!1}});console.log("Respuesta de Hugging Face:",v.data);let E="";Array.isArray(v.data)?E=((i=v.data[0])==null?void 0:i.generated_text)||"":E=v.data.generated_text||"";let w="neutral";const R=["neutral","accepts_payment","offers_partial","reschedule","evades","annoyed","refuses","thanks","no_answer","confirms_payment"];for(const O of R)if(E.toLowerCase().includes(O)){w=O;break}const S={neutral:{relationship:0,history:0,attitude:0,sensitivity:0,probability:0},accepts_payment:{relationship:5,history:10,attitude:10,sensitivity:-5,probability:20},offers_partial:{relationship:5,history:5,attitude:10,sensitivity:-5,probability:15},reschedule:{relationship:2,history:-5,attitude:5,sensitivity:0,probability:-5},evades:{relationship:-5,history:-5,attitude:-10,sensitivity:5,probability:-10},annoyed:{relationship:-10,history:-5,attitude:-15,sensitivity:10,probability:-15},refuses:{relationship:-20,history:-20,attitude:-20,sensitivity:20,probability:-30},thanks:{relationship:5,history:0,attitude:10,sensitivity:-5,probability:10},no_answer:{relationship:-5,history:-10,attitude:-5,sensitivity:0,probability:-10},confirms_payment:{relationship:10,history:20,attitude:20,sensitivity:-10,probability:30}},U=S[w]||S.neutral;return console.log(`Evento detectado por Zephyr: "${w}" con deltas:`,U),{eventType:w,deltas:U,explanation:`Evento detectado por Zephyr: "${w}"`,confidence:.8}}catch(a){return console.error("Error al analizar mensaje con Zephyr:",a),console.log("Usando fallback local debido al error"),eT(n)}},E3=async(n,e,t,i)=>{var a;try{const l=Px();if(!l||l.trim()==="")return console.log("No hay API key configurada para Hugging Face, usando fallback local"),tT(n,e,t,i);const f=vt.create({baseURL:"https://api-inference.huggingface.co/models/HuggingFaceH4/zephyr-7b-beta",headers:{Authorization:`Bearer ${l}`,"Content-Type":"application/json"}});let m="";const y=n.slice(-6);for(const S of y)S.sender==="agent"?m+=`Agente: ${S.message}
`:m+=`Cliente: ${S.message}
`;let v="neutral";e.relationship>70?v=e.sensitivity>70?"amistoso sin presión":"amistoso directo":e.relationship<40&&(v=e.sensitivity<40?"formal directo":"formal suave");const E=`<|system|>
Eres un agente de cobranza de la empresa Acriventas. Tu objetivo es obtener el pago de una deuda pendiente mientras mantienes una buena relación con el cliente.

INSTRUCCIONES IMPORTANTES: 
1. NUNCA menciones montos específicos de dinero o deuda en tus respuestas.
2. Siempre habla en términos de "deuda pendiente" o usando porcentajes, no valores exactos.
3. No repitas los montos que el cliente mencione en sus mensajes.
4. Sé siempre respetuoso y profesional.

Debes usar un tono "${v}" basado en el perfil del cliente:
- Relación/Cercanía: ${e.relationship}/100
- Historial de Pago: ${e.history}/100
- Actitud: ${e.attitude}/100
- Sensibilidad a Presión: ${e.sensitivity}/100
- Probabilidad de Pago: ${e.probability}/100

Historial reciente de la conversación:
${m}

El último mensaje del cliente fue: "${t}"
El tipo de evento detectado es: "${i}"
<|user|>
Genera una respuesta empática y efectiva como agente de cobranza. La respuesta debe ser concisa (máximo 2 frases), adaptada al perfil del cliente, enfocada en lograr el pago de la deuda, y NUNCA debe mencionar montos específicos de dinero.
<|assistant|>`;console.log("Enviando solicitud para generar respuesta a Hugging Face API...");const w=await f.post("",{inputs:E,parameters:{max_new_tokens:100,temperature:.7,top_p:.95,do_sample:!0,return_full_text:!1}});console.log("Respuesta de Hugging Face para generación:",w.data);let R="";return Array.isArray(w.data)?R=((a=w.data[0])==null?void 0:a.generated_text)||"":R=w.data.generated_text||"",R=R.trim(),R||(R="Entiendo. ¿Podría por favor indicarnos cuándo podríamos esperar el pago de su deuda pendiente?"),console.log(`Respuesta generada por Zephyr usando tono "${v}": ${R}`),{responseText:R,explanation:`Respuesta generada por Zephyr usando tono "${v}"`,confidence:.8}}catch(l){return console.error("Error al generar respuesta con Zephyr:",l),console.log("Usando fallback local para respuesta debido al error"),tT(n,e,t,i)}},eT=(n,e,t)=>{const i=n.toLowerCase();let a="neutral";i.includes("pagar")||i.includes("transferir")||i.includes("depositar")?i.includes("completo")||i.includes("todo")?a="accepts_payment":i.includes("parte")||i.includes("parcial")||i.includes("algo")?a="offers_partial":(i.includes("próxima")||i.includes("después")||i.includes("luego"))&&(a="reschedule"):i.includes("gracias")||i.includes("agradezco")?a="thanks":i.includes("ya pagué")||i.includes("realicé el pago")||i.includes("transferí")?a="confirms_payment":i.includes("no puedo")||i.includes("imposible")?a="evades":i.includes("molesto")||i.includes("harto")||i.includes("fastidio")?a="annoyed":(i.includes("no voy a pagar")||i.includes("no pagaré")||i.includes("olvídate"))&&(a="refuses");const l={neutral:{relationship:0,history:0,attitude:0,sensitivity:0,probability:0},accepts_payment:{relationship:5,history:10,attitude:10,sensitivity:-5,probability:20},offers_partial:{relationship:5,history:5,attitude:10,sensitivity:-5,probability:15},reschedule:{relationship:2,history:-5,attitude:5,sensitivity:0,probability:-5},evades:{relationship:-5,history:-5,attitude:-10,sensitivity:5,probability:-10},annoyed:{relationship:-10,history:-5,attitude:-15,sensitivity:10,probability:-15},refuses:{relationship:-20,history:-20,attitude:-20,sensitivity:20,probability:-30},thanks:{relationship:5,history:0,attitude:10,sensitivity:-5,probability:10},no_answer:{relationship:-5,history:-10,attitude:-5,sensitivity:0,probability:-10},confirms_payment:{relationship:10,history:20,attitude:20,sensitivity:-10,probability:30}},c=l[a]||l.neutral;return console.log(`Evento detectado por fallback: "${a}" con deltas:`,c),{eventType:a,deltas:c,explanation:`Evento detectado por fallback: "${a}" basado en palabras clave.`,confidence:.6}},tT=(n,e,t,i)=>{let a="neutral";e.relationship>70?e.sensitivity>70?a="friendly_no_pressure":a="friendly":e.relationship<40&&(e.sensitivity<40?a="formal_direct":a="formal_soft");const l={accepts_payment:{friendly_no_pressure:"¡Excelente noticia! Gracias por tu disposición. Cuando puedas hacer el pago, solo avísame.",friendly:"¡Perfecto! Muchas gracias por tu colaboración. ¿Te envío los datos para el pago?",formal_direct:"Muy bien. Le agradecemos su decisión. Necesitamos que realice el pago antes del fin de semana.",formal_soft:"Gracias por su confirmación. ¿Prefiere que le enviemos los datos bancarios por este medio?",neutral:"Entendido. ¿Desea que le enviemos la información para realizar el pago?"},offers_partial:{friendly_no_pressure:"Agradezco mucho tu esfuerzo por pagar una parte. Cualquier aporte es bienvenido.",friendly:"Gracias por tu disposición. Un pago parcial nos ayuda mucho. ¿Cuándo podrías realizar este abono?",formal_direct:"Tomamos nota de su oferta de pago parcial. ¿Cuándo podríamos esperar el resto del monto pendiente?",formal_soft:"Entendemos su situación. El pago parcial es un buen primer paso. ¿Cuándo sería posible?",neutral:"De acuerdo con el pago parcial. ¿Qué porcentaje de la deuda podría transferir y cuándo?"},reschedule:{friendly_no_pressure:"No hay problema, entiendo que necesitas reprogramar. ¿Qué fecha te resultaría más conveniente?",friendly:"Claro que podemos ajustar la fecha. ¿Cuál sería el mejor momento para ti?",formal_direct:"Podemos considerar una nueva fecha. ¿Cuál es su propuesta concreta para el pago?",formal_soft:"Entendemos la necesidad de reprogramar. ¿Qué fecha le resultaría adecuada para realizar el pago?",neutral:"De acuerdo. ¿Cuál sería la nueva fecha propuesta para el pago?"},evades:{friendly_no_pressure:"Entiendo que quizás no es el mejor momento para hablar de esto. ¿Te parece si retomamos la conversación en otro momento?",friendly:"Noto que es un tema delicado. ¿Hay algo específico que podamos resolver para facilitar el pago?",formal_direct:"Necesitamos una respuesta concreta respecto al pago pendiente. ¿Podría indicarnos su plan de acción?",formal_soft:"Entendemos que pueda ser un tema complicado. ¿Podríamos concretar cuándo sería posible abordar el pago?",neutral:"¿Podría por favor indicarnos cuál es su situación respecto al pago pendiente?"},annoyed:{friendly_no_pressure:"Lamento si te he incomodado. No es mi intención molestar, solo buscamos encontrar una solución que funcione para ambos.",friendly:"Disculpa si te he molestado. ¿Qué podríamos hacer para resolver esta situación de la mejor manera?",formal_direct:"Entendemos su molestia. Sin embargo, necesitamos resolver el tema del pago pendiente. ¿Qué solución propone?",formal_soft:"Lamentamos si esta comunicación le resulta incómoda. ¿Habría un mejor momento o forma para abordar el tema?",neutral:"Entiendo. ¿Cómo preferiría que manejemos esta situación para llegar a una solución?"},refuses:{friendly_no_pressure:"Entiendo tu posición. Quizás podríamos explorar algunas alternativas que se ajusten mejor a tu situación actual.",friendly:"Comprendo que sea difícil en este momento. ¿Podríamos considerar opciones de pago más flexibles?",formal_direct:"Tomamos nota de su negativa. Sin embargo, la deuda permanece vigente. ¿Podríamos discutir alternativas de pago?",formal_soft:"Entendemos que pueda tener dificultades. ¿Le interesaría conocer otras opciones disponibles para resolver esta situación?",neutral:"¿Podríamos explorar alternativas que faciliten el pago de la deuda pendiente?"},thanks:{friendly_no_pressure:"¡No hay de qué! Estamos aquí para ayudarte. Si necesitas cualquier cosa, no dudes en hacérmelo saber.",friendly:"Es un placer poder ser de ayuda. ¿Hay algo más en lo que pueda asistirte?",formal_direct:"De nada. ¿Podríamos entonces confirmar cuándo realizará el pago?",formal_soft:"Nos alegra poder serle de utilidad. ¿Necesita alguna otra información para proceder?",neutral:"De nada. ¿Tiene alguna otra consulta respecto al pago?"},confirms_payment:{friendly_no_pressure:"¡Excelente noticia! Muchas gracias por tu pago. Verificaremos y te confirmaremos en cuanto se refleje en nuestro sistema.",friendly:"¡Genial! Gracias por confirmar tu pago. Lo verificaremos a la brevedad y te daremos el comprobante.",formal_direct:"Gracias por su confirmación. Procederemos a verificar el pago y le notificaremos cuando esté procesado.",formal_soft:"Agradecemos su pago. Realizaremos la verificación correspondiente y le informaremos una vez completado el proceso.",neutral:"Gracias por informarnos. Verificaremos el pago y actualizaremos el estado de su cuenta."},default:{friendly_no_pressure:"Entiendo perfectamente. No te preocupes, cuando puedas realizar el pago me avisas.",friendly:"Agradezco que estemos en contacto. ¿Hay algo en lo que pueda ayudarte para facilitar el proceso?",formal_direct:"Necesitamos regularizar su situación. ¿Podría por favor indicarnos una fecha concreta de pago?",formal_soft:"Entendemos que pueden surgir contratiempos. ¿Podría comentarnos cuándo le sería posible realizar el pago?",neutral:"¿Podría por favor indicarnos cuándo podríamos esperar el pago de la deuda pendiente?"}},c=l[i]||l.default,f=c[a]||c.neutral;return console.log(`Respuesta generada por fallback usando tono "${a}": ${f}`),{responseText:f,explanation:`Respuesta generada por fallback usando tono "${a}"`,confidence:.7}},vi={GEMINI:"gemini",ZEPHYR:"zephyr"};let Yo=vi.ZEPHYR;const T3=n=>Object.values(vi).includes(n)?(Yo=n,!0):!1,w3=()=>Yo,x3=async(n,e,t)=>{switch(Yo){case vi.GEMINI:return qM(n);case vi.ZEPHYR:return b3(n,e,t);default:throw new Error(`Servicio de IA no reconocido: ${Yo}`)}},th=async(n,e,t,i)=>{switch(Yo){case vi.GEMINI:return FM(n,e,t,i);case vi.ZEPHYR:return E3(n,e,t,i);default:throw new Error(`Servicio de IA no reconocido: ${Yo}`)}},Mx=({phase:n,onChange:e})=>{const t=i=>{e(i.target.value)};return g.jsxs("div",{className:"form-group",children:[g.jsx("label",{className:"label",children:"Fase de la conversación"}),g.jsxs("select",{className:"input w-full",value:n,onChange:t,children:[g.jsx("option",{value:Ce.GREETING,children:"Fase 1: Saludo"}),g.jsx("option",{value:Ce.DEBT_NOTIFICATION,children:"Fase 2: Comunicación de deuda"}),g.jsx("option",{value:Ce.NEGOTIATION,children:"Fase 3: Negociación"}),g.jsx("option",{value:Ce.PAYMENT_CONFIRMATION,children:"Fase 4: Concretar pago"}),g.jsx("option",{value:Ce.FAREWELL,children:"Fase 5: Despedida"})]})]})},A3=()=>{const{clientId:n}=Eg(),{currentUser:e}=rc(),t=vn(),[i,a]=V.useState(null),[l,c]=V.useState(null),[f,m]=V.useState(null),[y,v]=V.useState([]),[E,w]=V.useState(""),[R,S]=V.useState(!0),[U,O]=V.useState(!1),[Y,Q]=V.useState(""),[z,ue]=V.useState(""),[le,ye]=V.useState("neutral"),[M,C]=V.useState(""),[N,P]=V.useState(Ce.GREETING),[L,B]=V.useState({relationship:0,history:0,attitude:0,sensitivity:0,probability:0}),D=V.useRef(null);V.useEffect(()=>{(async()=>{try{S(!0);const W=await ix(n);a(W),m(W.soul);const _e=await AM(n,e.uid,W.soul);c(_e);const Ge=`Hola ${W.name}, le saluda ${e.displayName} de Acriventas. Me comunico con usted respecto a su deuda pendiente.`;C(Ge),Q(Ge)}catch(W){console.error("Error al iniciar conversación:",W)}finally{S(!1)}})()},[n,e]),V.useEffect(()=>{var ne;(ne=D.current)==null||ne.scrollIntoView({behavior:"smooth"})},[y]);const _t=async()=>{if(!(!E.trim()||U))try{O(!0);const ne={id:`agent-${Date.now()}`,sender:"agent",message:E,phase:N,timestamp:new Date};v(W=>[...W,ne]),await UE(l,{sender:"agent",message:E,phase:N,event:"neutral"}),w(""),N===Ce.GREETING&&P(Ce.DEBT_NOTIFICATION)}catch(ne){console.error("Error al enviar mensaje:",ne)}finally{O(!1)}},st=async ne=>{const W=ne.target.value;if(ue(W),W.trim().split(/\s+/).length>3)try{const _e=await x3(W,y,f);ye(_e.eventType),B(_e.deltas)}catch(_e){console.error("Error al analizar mensaje:",_e)}},J=async()=>{if(!(!z.trim()||U))try{O(!0);const ne={id:`client-${Date.now()}`,sender:"client",message:z,phase:N,timestamp:new Date,event:le};v(Ge=>[...Ge,ne]);const W=await UE(l,{sender:"client",message:z,phase:N,event:le});m(W.currentSoul);const _e=await th(y,W.currentSoul,z,le);Q(_e.responseText),ue(""),ye("neutral"),B({relationship:0,history:0,attitude:0,sensitivity:0,probability:0}),le==="accepts_payment"&&N===Ce.NEGOTIATION&&P(Ce.PAYMENT_CONFIRMATION),le==="confirms_payment"&&N===Ce.PAYMENT_CONFIRMATION&&P(Ce.FAREWELL)}catch(ne){console.error("Error al agregar mensaje del cliente:",ne)}finally{O(!1)}},he=ne=>{const W=ne.target.value;ye(W);const _e={neutral:{relationship:0,history:0,attitude:0,sensitivity:0,probability:0},accepts_payment:{relationship:5,history:10,attitude:10,sensitivity:-5,probability:20},offers_partial:{relationship:5,history:5,attitude:10,sensitivity:-5,probability:15},reschedule:{relationship:2,history:-5,attitude:5,sensitivity:0,probability:-5},evades:{relationship:-5,history:-5,attitude:-10,sensitivity:5,probability:-10},annoyed:{relationship:-10,history:-5,attitude:-15,sensitivity:10,probability:-15},refuses:{relationship:-20,history:-20,attitude:-20,sensitivity:20,probability:-30},thanks:{relationship:5,history:0,attitude:10,sensitivity:-5,probability:10},no_answer:{relationship:-5,history:-10,attitude:-5,sensitivity:0,probability:-10},confirms_payment:{relationship:10,history:20,attitude:20,sensitivity:-10,probability:30}};B(_e[W]||_e.neutral)},ve=ne=>{P(ne)},je=()=>{Y&&(w(Y),Q(""))},j=async ne=>{m(ne);try{await DM(l,ne)}catch(W){console.error("Error al actualizar valores del alma:",W)}},oe=()=>{t(`/conversation/${l}`)};if(R)return g.jsx("div",{className:"container mx-auto px-4 py-6",children:g.jsxs("div",{className:"animate-pulse space-y-4",children:[g.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4"}),g.jsx("div",{className:"h-64 bg-gray-200 rounded"}),g.jsx("div",{className:"h-10 bg-gray-200 rounded"})]})});if(!i)return g.jsxs("div",{className:"container mx-auto px-4 py-6",children:[g.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:[g.jsx("strong",{className:"font-bold",children:"Error:"}),g.jsx("span",{className:"block sm:inline",children:" No se pudo encontrar el cliente."})]}),g.jsx("button",{className:"btn-secondary mt-4",onClick:()=>t(-1),children:"Volver"})]});const fe=y.reduce((ne,W)=>{const _e=W.phase||Ce.NEGOTIATION;return ne[_e]||(ne[_e]=[]),ne[_e].push(W),ne},{}),ce=[Ce.GREETING,Ce.DEBT_NOTIFICATION,Ce.NEGOTIATION,Ce.PAYMENT_CONFIRMATION,Ce.FAREWELL],ee=ne=>{switch(ne){case Ce.GREETING:return"Fase 1: Saludo";case Ce.DEBT_NOTIFICATION:return"Fase 2: Comunicación de deuda";case Ce.NEGOTIATION:return"Fase 3: Negociación";case Ce.PAYMENT_CONFIRMATION:return"Fase 4: Concretar pago";case Ce.FAREWELL:return"Fase 5: Despedida";default:return"Fase desconocida"}};return g.jsxs("div",{className:"container mx-auto px-4 py-6",children:[g.jsxs("div",{className:"mb-6 flex justify-between items-center",children:[g.jsxs("h1",{className:"text-2xl font-bold",children:["Conversación con ",i.name]}),g.jsx("div",{children:g.jsx("button",{className:"btn-primary",onClick:oe,children:"Finalizar Conversación"})})]}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[g.jsx("div",{className:"md:col-span-2",children:g.jsxs("div",{className:"bg-white rounded-lg shadow p-4 mb-4",children:[g.jsxs("div",{className:"h-96 overflow-y-auto mb-4",children:[ce.map(ne=>{const W=fe[ne]||[];return W.length===0?null:g.jsxs("div",{className:"mb-6",children:[g.jsx("h3",{className:"text-md font-semibold mb-2 bg-gray-100 p-2 rounded",children:ee(ne)}),g.jsx("div",{className:"space-y-4",children:W.map(_e=>g.jsxs("div",{className:`mb-4 ${_e.sender==="agent"?"text-right":"text-left"}`,children:[g.jsxs("div",{className:`inline-block rounded-lg px-4 py-2 max-w-[80%] ${_e.sender==="agent"?"bg-primary-100 text-primary-800":"bg-gray-100 text-gray-800"}`,children:[g.jsx("p",{children:_e.message}),g.jsx("p",{className:"text-xs text-gray-500 mt-1",children:_e.timestamp.toLocaleTimeString()})]}),_e.event&&_e.event!=="neutral"&&g.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Evento: ",_e.event]})]},_e.id))})]},ne)}),y.length===0&&g.jsx("div",{className:"text-center p-4",children:g.jsx("p",{className:"text-gray-500",children:"No hay mensajes aún. Comience la conversación."})}),g.jsx("div",{ref:D})]}),g.jsxs("div",{className:"mb-4",children:[g.jsx(Mx,{phase:N,onChange:ve}),g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1 mt-4",children:"Mensaje del Agente"}),g.jsxs("div",{className:"flex",children:[g.jsx("input",{type:"text",className:"input flex-grow",placeholder:"Escriba su mensaje...",value:E,onChange:ne=>w(ne.target.value)}),g.jsx("button",{className:"btn-primary ml-2",onClick:_t,disabled:U||!E.trim(),children:"Enviar"})]}),Y&&g.jsxs("div",{className:"mt-2 p-2 bg-blue-50 rounded-md",children:[g.jsx("p",{className:"text-sm text-blue-600 mb-1",children:"Respuesta sugerida:"}),g.jsx("p",{className:"text-sm",children:Y}),g.jsx("button",{className:"text-xs text-blue-600 mt-1 underline",onClick:je,children:"Usar esta respuesta"})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mensaje del Cliente"}),g.jsx("textarea",{className:"input w-full mb-2",rows:"3",placeholder:"Escriba lo que dijo el cliente...",value:z,onChange:st}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-2",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de Evento"}),g.jsxs("select",{className:"input w-full",value:le,onChange:he,children:[g.jsx("option",{value:"neutral",children:"Evento Neutro"}),g.jsx("option",{value:"accepts_payment",children:"Acepta pagar en fecha acordada"}),g.jsx("option",{value:"offers_partial",children:"Ofrece pago parcial"}),g.jsx("option",{value:"reschedule",children:"Propone nueva fecha"}),g.jsx("option",{value:"evades",children:"Evade o no da respuesta clara"}),g.jsx("option",{value:"annoyed",children:"Se muestra molesto"}),g.jsx("option",{value:"refuses",children:"Se niega a pagar"}),g.jsx("option",{value:"thanks",children:"Agradece recordatorio"}),g.jsx("option",{value:"no_answer",children:"No contesta la llamada"}),g.jsx("option",{value:"confirms_payment",children:"Confirma pago realizado"})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Modificaciones Sugeridas"}),g.jsxs("div",{className:"text-sm",children:[g.jsxs("p",{children:["Relación: ",L.relationship>0?"+":"",L.relationship]}),g.jsxs("p",{children:["Historial: ",L.history>0?"+":"",L.history]}),g.jsxs("p",{children:["Actitud: ",L.attitude>0?"+":"",L.attitude]}),g.jsxs("p",{children:["Sensibilidad: ",L.sensitivity>0?"+":"",L.sensitivity]}),g.jsxs("p",{children:["Probabilidad: ",L.probability>0?"+":"",L.probability]})]})]})]}),g.jsx("button",{className:"btn-secondary w-full",onClick:J,disabled:U||!z.trim(),children:"Agregar Mensaje del Cliente"})]})]})}),g.jsxs("div",{children:[g.jsxs("div",{className:"bg-white rounded-lg shadow p-4 mb-4",children:[g.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Información del Cliente"}),g.jsxs("div",{className:"space-y-2",children:[g.jsxs("p",{children:[g.jsx("span",{className:"font-medium",children:"Teléfono:"})," ",i.phone]}),g.jsxs("p",{children:[g.jsx("span",{className:"font-medium",children:"Email:"})," ",i.email||"No disponible"]}),g.jsxs("p",{children:[g.jsx("span",{className:"font-medium",children:"Estado de deuda:"})," Deuda pendiente"]}),g.jsx("p",{className:"text-sm text-gray-500 mt-2 italic",children:"Nota: Por razones de privacidad, no se muestran montos específicos en este módulo."})]})]}),g.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[g.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Variables del Alma"}),g.jsx($o,{initialValues:f,readOnly:!1,onChange:j}),g.jsx("p",{className:"mt-3 text-xs text-gray-500",children:"Puede ajustar manualmente las variables según su percepción de la conversación."})]})]})]})]})},S3=()=>{const{conversationId:n}=Eg(),e=vn(),[t,i]=V.useState(null),[a,l]=V.useState(!0),[c,f]=V.useState(!1),[m,y]=V.useState(!1),[v,E]=V.useState(null),[w,R]=V.useState(""),[S,U]=V.useState(!1),[O,Y]=V.useState(Ce.NEGOTIATION),[Q,z]=V.useState({sender:"agent",message:"",event:"neutral",phase:Ce.NEGOTIATION,deltas:{relationship:0,history:0,attitude:0,sensitivity:0,probability:0},updateClientSoul:!1}),[ue,le]=V.useState({result:"pending",notes:"",nextActionDate:""});V.useEffect(()=>{(async()=>{try{l(!0);const ne=await Ao(n);if(i(ne),ne.summary&&le(ne.summary),ne.turns&&ne.turns.length>0){const W=ne.turns[ne.turns.length-1];W.phase&&(Y(W.phase),z(_e=>({..._e,phase:W.phase})))}}catch(ne){console.error("Error al cargar conversación:",ne)}finally{l(!1)}})()},[n]);const ye=ee=>{const{name:ne,value:W}=ee.target;le(_e=>({..._e,[ne]:W}))},M=async()=>{try{f(!0),await RM(n,ue);const ee=await Ao(n);i(ee),f(!1)}catch(ee){console.error("Error al cerrar conversación:",ee),f(!1)}},C=ee=>{const{name:ne,value:W}=ee.target;z(_e=>({..._e,[ne]:W}))},N=ee=>{Y(ee),z(ne=>({...ne,phase:ee}))},P=(ee,ne)=>{z(W=>({...W,deltas:{...W.deltas,[ee]:parseInt(ne,10)||0}}))},L=async()=>{if(Q.message.trim())try{const ee={sender:Q.sender,message:Q.message,event:Q.event,phase:Q.phase||O,deltas:Q.deltas,updateClientSoul:Q.updateClientSoul};await MM(n,ee);const ne=await Ao(n);if(i(ne),z({sender:"agent",message:"",event:"neutral",phase:O,deltas:{relationship:0,history:0,attitude:0,sensitivity:0,probability:0},updateClientSoul:!1}),ee.sender==="client"&&ne.isActive)try{const W=await th(ne.turns,ne.currentSoul,ee.message,ee.event);R(W.responseText),U(!0)}catch(W){console.error("Error al generar sugerencia de respuesta:",W)}}catch(ee){console.error("Error al agregar mensaje:",ee)}},B=async ee=>{var ne;if(t&&t.isActive)try{const W=v?v.message:((ne=t.turns.find(Ge=>Ge.sender==="client"))==null?void 0:ne.message)||"Mensaje del cliente",_e=await th(t.turns,t.currentSoul,W,ee);R(_e.responseText),U(!0)}catch(W){console.error("Error al generar sugerencia:",W)}},D=async(ee,ne)=>{try{await OM(n,ee,ne);const W=await Ao(n);if(i(W),v.sender==="client"&&t.isActive)try{const _e=await th(W.turns,W.currentSoul,ne.message,ne.event);R(_e.responseText),U(!0)}catch(_e){console.error("Error al generar sugerencia de respuesta:",_e)}E(null)}catch(W){console.error("Error al editar mensaje:",W)}},_t=async ee=>{if(window.confirm("¿Está seguro de que desea eliminar este mensaje?"))try{await PM(n,ee);const ne=await Ao(n);i(ne)}catch(ne){console.error("Error al eliminar mensaje:",ne)}},st=async()=>{if(window.confirm("¿Está seguro que desea eliminar permanentemente esta conversación? Esta acción no se puede deshacer."))try{await ox(n),e("/")}catch(ee){console.error("Error al eliminar conversación:",ee),alert("Error al eliminar la conversación: "+ee.message)}},J=async()=>{try{t.isActive?await zE(n,Gt.INACTIVE,!1):await zE(n,Gt.ACTIVE,!0);const ee=await Ao(n);i(ee)}catch(ee){console.error("Error al cambiar estado de actividad:",ee)}},he=()=>{w&&(z(ee=>({...ee,message:w,sender:"agent"})),R(""),U(!1))},ve=()=>{var ee;t&&!t.isActive&&J(),(ee=document.getElementById("message-input"))==null||ee.focus()},je=ee=>{if(!ee)return"N/A";if(ee.seconds){const ne=new Date(ee.seconds*1e3);return ko(ne,"PPp",{locale:ps})}else{if(ee instanceof Date)return ko(ee,"PPp",{locale:ps});{const ne=new Date(ee);return ko(ne,"PPp",{locale:ps})}}},j=()=>!t||!t.turns?{}:t.turns.reduce((ee,ne)=>{const W=ne.phase||Ce.NEGOTIATION;return ee[W]||(ee[W]=[]),ee[W].push(ne),ee},{}),oe=[Ce.GREETING,Ce.DEBT_NOTIFICATION,Ce.NEGOTIATION,Ce.PAYMENT_CONFIRMATION,Ce.FAREWELL],fe=ee=>{switch(ee){case Ce.GREETING:return"Fase 1: Saludo";case Ce.DEBT_NOTIFICATION:return"Fase 2: Comunicación de deuda";case Ce.NEGOTIATION:return"Fase 3: Negociación";case Ce.PAYMENT_CONFIRMATION:return"Fase 4: Concretar pago";case Ce.FAREWELL:return"Fase 5: Despedida";default:return"Fase desconocida"}};if(a)return g.jsx("div",{className:"container mx-auto px-4 py-6",children:g.jsxs("div",{className:"animate-pulse space-y-4",children:[g.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-6"}),g.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-4"}),g.jsx("div",{className:"h-64 bg-gray-200 rounded mb-4"}),g.jsx("div",{className:"h-24 bg-gray-200 rounded"})]})});if(!t)return g.jsxs("div",{className:"container mx-auto px-4 py-6",children:[g.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:[g.jsx("strong",{className:"font-bold",children:"Error:"}),g.jsx("span",{className:"block sm:inline",children:" No se pudo encontrar la conversación."})]}),g.jsx("button",{className:"btn-secondary mt-4",onClick:()=>e(-1),children:"Volver"})]});const ce=j();return g.jsxs("div",{className:"container mx-auto px-4 py-6",children:[g.jsxs("div",{className:"flex justify-between items-center mb-6",children:[g.jsxs("div",{children:[g.jsxs("h1",{className:"text-2xl font-bold",children:["Conversación con ",t.clientName]}),g.jsxs("p",{className:"text-gray-500",children:["Iniciada el ",je(t.startedAt),g.jsx("span",{className:`ml-2 px-2 py-1 rounded-full text-xs ${t.isActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:t.isActive?"Activa":"Inactiva"})]})]}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx("button",{className:`btn-secondary ${m?"bg-blue-100 border-blue-300":""}`,onClick:()=>y(!m),children:m?"Salir de Edición":"Editar Conversación"}),g.jsx("button",{className:`btn-secondary ${t.isActive?"bg-amber-100 text-amber-800":"bg-green-100 text-green-800"}`,onClick:J,children:t.isActive?"Desactivar":"Activar"}),!t.isActive&&g.jsx("button",{className:"btn-secondary",onClick:ve,children:"Continuar Conversación"}),t.status!==Gt.CLOSED&&g.jsx("button",{className:"btn-primary",onClick:()=>f(!0),children:"Finalizar Conversación"}),g.jsx("button",{className:"btn-secondary bg-red-600 text-white hover:bg-red-700",onClick:st,children:"Eliminar"}),g.jsx("button",{className:"btn-secondary",onClick:()=>e(-1),children:"Volver"})]})]}),m&&g.jsxs("div",{className:"bg-amber-50 border border-amber-200 text-amber-800 p-4 rounded mb-6",children:[g.jsx("h3",{className:"font-semibold mb-2",children:"Nota sobre edición de conversaciones"}),g.jsx("p",{children:"En este modo de edición puede modificar mensajes y eventos. Si la conversación está activa, se generarán sugerencias de respuesta basadas en los cambios realizados. Estas sugerencias se generan automáticamente al cambiar un tipo de evento o editar un mensaje del cliente."})]}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[g.jsxs("div",{className:"md:col-span-2",children:[g.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[g.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Mensajes por Fases"}),oe.map(ee=>{const ne=ce[ee]||[];return ne.length===0?null:g.jsxs("div",{className:"mb-6",children:[g.jsx("h3",{className:"text-md font-semibold mb-2 bg-gray-100 p-2 rounded",children:fe(ee)}),g.jsx("div",{className:"space-y-4",children:ne.map(W=>g.jsx("div",{className:`flex ${W.sender==="agent"?"justify-end":"justify-start"}`,children:g.jsxs("div",{className:`rounded-lg px-4 py-2 max-w-[80%] relative ${W.sender==="agent"?"bg-primary-100 text-primary-800":"bg-gray-100 text-gray-800"}`,children:[m&&g.jsxs("div",{className:"absolute top-1 right-1 flex gap-1",children:[g.jsx("button",{className:"text-xs text-blue-600 hover:text-blue-800",onClick:()=>E(W),children:"✏️"}),g.jsx("button",{className:"text-xs text-red-600 hover:text-red-800",onClick:()=>_t(W.id),children:"🗑️"})]}),v&&v.id===W.id?g.jsx(R3,{turn:W,onSave:_e=>D(W.id,_e),onCancel:()=>E(null),onEventChange:B}):g.jsxs(g.Fragment,{children:[g.jsx("p",{children:W.message}),g.jsxs("div",{className:"text-xs text-gray-500 mt-1 flex justify-between",children:[g.jsx("span",{children:je(W.timestamp)}),W.isManual&&g.jsx("span",{className:"text-blue-500",children:"Manual"}),W.isEdited&&g.jsx("span",{className:"text-orange-500",children:"Editado"})]}),W.event&&W.event!=="neutral"&&g.jsxs("div",{className:"mt-2 text-xs",children:[g.jsx("span",{className:"font-medium",children:"Evento: "}),g.jsx("span",{children:W.event}),W.deltas&&g.jsxs("div",{className:"mt-1 grid grid-cols-5 gap-1",children:[g.jsxs("span",{className:`${W.deltas.relationship>0?"text-green-600":W.deltas.relationship<0?"text-red-600":"text-gray-500"}`,children:["R: ",W.deltas.relationship>0?"+":"",W.deltas.relationship]}),g.jsxs("span",{className:`${W.deltas.history>0?"text-green-600":W.deltas.history<0?"text-red-600":"text-gray-500"}`,children:["H: ",W.deltas.history>0?"+":"",W.deltas.history]}),g.jsxs("span",{className:`${W.deltas.attitude>0?"text-green-600":W.deltas.attitude<0?"text-red-600":"text-gray-500"}`,children:["A: ",W.deltas.attitude>0?"+":"",W.deltas.attitude]}),g.jsxs("span",{className:`${W.deltas.sensitivity>0?"text-green-600":W.deltas.sensitivity<0?"text-red-600":"text-gray-500"}`,children:["S: ",W.deltas.sensitivity>0?"+":"",W.deltas.sensitivity]}),g.jsxs("span",{className:`${W.deltas.probability>0?"text-green-600":W.deltas.probability<0?"text-red-600":"text-gray-500"}`,children:["P: ",W.deltas.probability>0?"+":"",W.deltas.probability]})]})]})]})]})},W.id))})]},ee)}),(!t.turns||t.turns.length===0)&&g.jsx("p",{className:"text-gray-500 text-center py-4",children:"No hay mensajes en esta conversación."}),w&&g.jsxs("div",{className:`mt-4 p-3 bg-blue-50 border border-blue-100 rounded-md transition-all duration-300 ${S?"opacity-100":"opacity-0"}`,children:[g.jsxs("div",{className:"flex justify-between items-start",children:[g.jsxs("div",{children:[g.jsx("p",{className:"text-sm font-medium text-blue-700 mb-1",children:"Sugerencia de respuesta:"}),g.jsx("p",{className:"text-sm text-blue-800",children:w})]}),g.jsx("button",{className:"text-xs bg-blue-600 text-white px-2 py-1 rounded hover:bg-blue-700",onClick:he,children:"Usar esta respuesta"})]}),g.jsx("p",{className:"text-xs text-blue-600 mt-2",children:"Esta sugerencia se generó automáticamente basada en el contexto y los cambios realizados."})]}),t.isActive&&g.jsxs("div",{className:"mt-6 p-4 border-t border-gray-200",children:[g.jsx("h3",{className:"text-md font-semibold mb-3",children:"Agregar Nuevo Mensaje"}),g.jsxs("div",{className:"space-y-4",children:[g.jsx(Mx,{phase:O,onChange:N}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Emisor"}),g.jsxs("select",{name:"sender",className:"input w-full",value:Q.sender,onChange:C,children:[g.jsx("option",{value:"agent",children:"Agente"}),g.jsx("option",{value:"client",children:"Cliente"})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de Evento"}),g.jsxs("select",{name:"event",className:"input w-full",value:Q.event,onChange:C,children:[g.jsx("option",{value:"neutral",children:"Evento Neutro"}),g.jsx("option",{value:"accepts_payment",children:"Acepta pagar"}),g.jsx("option",{value:"offers_partial",children:"Ofrece pago parcial"}),g.jsx("option",{value:"reschedule",children:"Propone nueva fecha"}),g.jsx("option",{value:"evades",children:"Evade"}),g.jsx("option",{value:"annoyed",children:"Se muestra molesto"}),g.jsx("option",{value:"refuses",children:"Se niega a pagar"}),g.jsx("option",{value:"thanks",children:"Agradece"}),g.jsx("option",{value:"no_answer",children:"No contesta"}),g.jsx("option",{value:"confirms_payment",children:"Confirma pago"})]})]})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"message-input",className:"block text-sm font-medium text-gray-700 mb-1",children:"Mensaje"}),g.jsx("textarea",{id:"message-input",name:"message",rows:"3",className:"input w-full",value:Q.message,onChange:C,placeholder:"Escriba el mensaje..."})]}),Q.event!=="neutral"&&g.jsxs(g.Fragment,{children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Deltas para Variables del Alma"}),g.jsxs("div",{className:"grid grid-cols-5 gap-2",children:[g.jsxs("div",{children:[g.jsx("label",{className:"text-xs text-gray-500",children:"Relación"}),g.jsx("input",{type:"number",min:"-100",max:"100",className:"input w-full text-sm",value:Q.deltas.relationship,onChange:ee=>P("relationship",ee.target.value)})]}),g.jsxs("div",{children:[g.jsx("label",{className:"text-xs text-gray-500",children:"Historial"}),g.jsx("input",{type:"number",min:"-100",max:"100",className:"input w-full text-sm",value:Q.deltas.history,onChange:ee=>P("history",ee.target.value)})]}),g.jsxs("div",{children:[g.jsx("label",{className:"text-xs text-gray-500",children:"Actitud"}),g.jsx("input",{type:"number",min:"-100",max:"100",className:"input w-full text-sm",value:Q.deltas.attitude,onChange:ee=>P("attitude",ee.target.value)})]}),g.jsxs("div",{children:[g.jsx("label",{className:"text-xs text-gray-500",children:"Sensibilidad"}),g.jsx("input",{type:"number",min:"-100",max:"100",className:"input w-full text-sm",value:Q.deltas.sensitivity,onChange:ee=>P("sensitivity",ee.target.value)})]}),g.jsxs("div",{children:[g.jsx("label",{className:"text-xs text-gray-500",children:"Probabilidad"}),g.jsx("input",{type:"number",min:"-100",max:"100",className:"input w-full text-sm",value:Q.deltas.probability,onChange:ee=>P("probability",ee.target.value)})]})]})]}),g.jsxs("div",{className:"flex items-center",children:[g.jsx("input",{type:"checkbox",id:"updateClientSoul",checked:Q.updateClientSoul,onChange:ee=>z(ne=>({...ne,updateClientSoul:ee.target.checked})),className:"mr-2"}),g.jsx("label",{htmlFor:"updateClientSoul",className:"text-sm text-gray-700",children:"Actualizar alma del cliente en la base de datos"})]})]}),g.jsx("button",{className:"btn-primary",onClick:L,disabled:!Q.message.trim(),children:"Agregar Mensaje"})]})]}),!t.isActive&&g.jsx("div",{className:"mt-6 p-4 border-t border-gray-200",children:g.jsx("div",{className:"bg-gray-50 p-4 rounded-md text-center",children:g.jsx("p",{className:"text-gray-600",children:'Esta conversación no está activa. Pulse "Activar" si desea añadir más mensajes.'})})})]}),t.status===Gt.CLOSED&&t.summary&&g.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[g.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Resumen de la Conversación"}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[g.jsxs("div",{children:[g.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Resultado"}),g.jsxs("p",{className:"font-medium",children:[t.summary.result==="payment"&&"Pago realizado",t.summary.result==="partial_payment"&&"Pago parcial",t.summary.result==="promise"&&"Promesa de pago",t.summary.result==="no_payment"&&"Sin pago",t.summary.result==="pending"&&"Pendiente"]})]}),t.summary.nextActionDate&&g.jsxs("div",{children:[g.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Próxima acción"}),g.jsx("p",{children:je(t.summary.nextActionDate)})]}),t.summary.notes&&g.jsxs("div",{className:"md:col-span-2",children:[g.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Notas"}),g.jsx("p",{className:"whitespace-pre-line",children:t.summary.notes})]})]})]}),c&&g.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:g.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-lg w-full mx-4",children:[g.jsx("h2",{className:"text-xl font-bold mb-4",children:"Cerrar Conversación"}),g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Resultado"}),g.jsxs("select",{name:"result",className:"input w-full",value:ue.result,onChange:ye,children:[g.jsx("option",{value:"payment",children:"Pago realizado"}),g.jsx("option",{value:"partial_payment",children:"Pago parcial"}),g.jsx("option",{value:"promise",children:"Promesa de pago"}),g.jsx("option",{value:"no_payment",children:"Sin pago"}),g.jsx("option",{value:"pending",children:"Pendiente"})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha de próxima acción"}),g.jsx("input",{type:"date",name:"nextActionDate",className:"input w-full",value:ue.nextActionDate,onChange:ye})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notas"}),g.jsx("textarea",{name:"notes",rows:"4",className:"input w-full",value:ue.notes,onChange:ye,placeholder:"Resumen de la conversación, acuerdos, observaciones..."})]})]}),g.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[g.jsx("button",{className:"btn-secondary",onClick:()=>f(!1),children:"Cancelar"}),g.jsx("button",{className:"btn-primary",onClick:M,children:"Cerrar Conversación"})]})]})})]}),g.jsxs("div",{children:[g.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[g.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Información del Cliente"}),g.jsxs("p",{className:"mb-2",children:[g.jsx("span",{className:"font-medium",children:"Nombre:"})," ",t.clientName]}),t.client&&g.jsxs(g.Fragment,{children:[g.jsxs("p",{className:"mb-2",children:[g.jsx("span",{className:"font-medium",children:"Teléfono:"})," ",t.client.phone]}),g.jsxs("p",{className:"mb-2",children:[g.jsx("span",{className:"font-medium",children:"Email:"})," ",t.client.email||"No disponible"]}),g.jsxs("p",{className:"mb-2",children:[g.jsx("span",{className:"font-medium",children:"Estado:"})," Deuda pendiente"]}),g.jsx("p",{className:"text-sm text-gray-500 italic",children:"Nota: Por privacidad, no se muestran montos específicos."}),g.jsx("div",{className:"mt-4",children:g.jsx("button",{className:"text-primary-600 text-sm font-medium hover:text-primary-800",onClick:()=>e(`/clients/${t.clientId}`),children:"Ver perfil completo"})})]})]}),g.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[g.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Variables del Alma"}),t.initialSoul&&t.currentSoul&&g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-2",children:"Inicial"}),g.jsx($o,{initialValues:t.initialSoul,readOnly:!0})]}),g.jsxs("div",{children:[g.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-2",children:"Actual"}),g.jsx($o,{initialValues:t.currentSoul,readOnly:!0})]}),g.jsxs("div",{className:"mt-4 p-3 bg-gray-50 rounded-md",children:[g.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Cambios"}),g.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[g.jsxs("div",{children:[g.jsx("span",{className:"font-medium",children:"Relación:"})," ",g.jsxs("span",{className:t.currentSoul.relationship>t.initialSoul.relationship?"text-green-600":t.currentSoul.relationship<t.initialSoul.relationship?"text-red-600":"text-gray-500",children:[t.currentSoul.relationship-t.initialSoul.relationship>0?"+":"",t.currentSoul.relationship-t.initialSoul.relationship]})]}),g.jsxs("div",{children:[g.jsx("span",{className:"font-medium",children:"Historial:"})," ",g.jsxs("span",{className:t.currentSoul.history>t.initialSoul.history?"text-green-600":t.currentSoul.history<t.initialSoul.history?"text-red-600":"text-gray-500",children:[t.currentSoul.history-t.initialSoul.history>0?"+":"",t.currentSoul.history-t.initialSoul.history]})]}),g.jsxs("div",{children:[g.jsx("span",{className:"font-medium",children:"Actitud:"})," ",g.jsxs("span",{className:t.currentSoul.attitude>t.initialSoul.attitude?"text-green-600":t.currentSoul.attitude<t.initialSoul.attitude?"text-red-600":"text-gray-500",children:[t.currentSoul.attitude-t.initialSoul.attitude>0?"+":"",t.currentSoul.attitude-t.initialSoul.attitude]})]}),g.jsxs("div",{children:[g.jsx("span",{className:"font-medium",children:"Sensibilidad:"})," ",g.jsxs("span",{className:t.currentSoul.sensitivity<t.initialSoul.sensitivity?"text-green-600":t.currentSoul.sensitivity>t.initialSoul.sensitivity?"text-red-600":"text-gray-500",children:[t.currentSoul.sensitivity-t.initialSoul.sensitivity>0?"+":"",t.currentSoul.sensitivity-t.initialSoul.sensitivity]})]}),g.jsxs("div",{className:"col-span-2",children:[g.jsx("span",{className:"font-medium",children:"Probabilidad de pago:"})," ",g.jsxs("span",{className:t.currentSoul.probability>t.initialSoul.probability?"text-green-600":t.currentSoul.probability<t.initialSoul.probability?"text-red-600":"text-gray-500",children:[t.currentSoul.probability-t.initialSoul.probability>0?"+":"",t.currentSoul.probability-t.initialSoul.probability]})]})]})]})]})]})]})]})]})},R3=({turn:n,onSave:e,onCancel:t,onEventChange:i})=>{const[a,l]=V.useState({message:n.message,event:n.event||"neutral",phase:n.phase||Ce.NEGOTIATION,deltas:n.deltas||{relationship:0,history:0,attitude:0,sensitivity:0,probability:0}}),c=v=>{const{name:E,value:w}=v.target;E==="event"&&w!==a.event&&i&&i(w),l(R=>({...R,[E]:w}))},f=v=>{l(E=>({...E,phase:v}))},m=(v,E)=>{l(w=>({...w,deltas:{...w.deltas,[v]:parseInt(E,10)||0}}))},y=v=>{v.preventDefault(),e(a)};return g.jsxs("form",{onSubmit:y,className:"space-y-3",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Mensaje"}),g.jsx("textarea",{name:"message",rows:"2",className:"w-full text-sm border border-gray-300 rounded px-2 py-1",value:a.message,onChange:c})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Fase"}),g.jsxs("select",{name:"phase",className:"w-full text-sm border border-gray-300 rounded px-2 py-1",value:a.phase,onChange:v=>f(v.target.value),children:[g.jsx("option",{value:Ce.GREETING,children:"Fase 1: Saludo"}),g.jsx("option",{value:Ce.DEBT_NOTIFICATION,children:"Fase 2: Comunicación de deuda"}),g.jsx("option",{value:Ce.NEGOTIATION,children:"Fase 3: Negociación"}),g.jsx("option",{value:Ce.PAYMENT_CONFIRMATION,children:"Fase 4: Concretar pago"}),g.jsx("option",{value:Ce.FAREWELL,children:"Fase 5: Despedida"})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Evento"}),g.jsxs("select",{name:"event",className:"w-full text-sm border border-gray-300 rounded px-2 py-1",value:a.event,onChange:c,children:[g.jsx("option",{value:"neutral",children:"Neutral"}),g.jsx("option",{value:"accepts_payment",children:"Acepta pagar"}),g.jsx("option",{value:"offers_partial",children:"Pago parcial"}),g.jsx("option",{value:"reschedule",children:"Nueva fecha"}),g.jsx("option",{value:"evades",children:"Evade"}),g.jsx("option",{value:"annoyed",children:"Molesto"}),g.jsx("option",{value:"refuses",children:"Se niega"}),g.jsx("option",{value:"thanks",children:"Agradece"}),g.jsx("option",{value:"no_answer",children:"No contesta"}),g.jsx("option",{value:"confirms_payment",children:"Confirma pago"})]})]}),a.event!=="neutral"&&g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Deltas"}),g.jsxs("div",{className:"grid grid-cols-5 gap-1",children:[g.jsx("input",{type:"number",min:"-100",max:"100",className:"w-full text-xs border border-gray-300 rounded px-1 py-1",value:a.deltas.relationship,onChange:v=>m("relationship",v.target.value),placeholder:"R"}),g.jsx("input",{type:"number",min:"-100",max:"100",className:"w-full text-xs border border-gray-300 rounded px-1 py-1",value:a.deltas.history,onChange:v=>m("history",v.target.value),placeholder:"H"}),g.jsx("input",{type:"number",min:"-100",max:"100",className:"w-full text-xs border border-gray-300 rounded px-1 py-1",value:a.deltas.attitude,onChange:v=>m("attitude",v.target.value),placeholder:"A"}),g.jsx("input",{type:"number",min:"-100",max:"100",className:"w-full text-xs border border-gray-300 rounded px-1 py-1",value:a.deltas.sensitivity,onChange:v=>m("sensitivity",v.target.value),placeholder:"S"}),g.jsx("input",{type:"number",min:"-100",max:"100",className:"w-full text-xs border border-gray-300 rounded px-1 py-1",value:a.deltas.probability,onChange:v=>m("probability",v.target.value),placeholder:"P"})]})]}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx("button",{type:"submit",className:"text-xs bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600",children:"Guardar"}),g.jsx("button",{type:"button",onClick:t,className:"text-xs bg-gray-500 text-white px-2 py-1 rounded hover:bg-gray-600",children:"Cancelar"})]})]})},C3=()=>{const[n,e]=V.useState(""),[t,i]=V.useState(""),[a,l]=V.useState(!1),[c,f]=V.useState(""),m=vn();V.useEffect(()=>{e(w3());const v=localStorage.getItem("huggingface_api_key")||"";i(v)},[]);const y=async()=>{l(!0),f("");try{T3(n),localStorage.setItem("huggingface_api_key",t),f("Configuración guardada correctamente"),setTimeout(()=>m("/"),1500)}catch(v){console.error("Error al guardar configuración:",v),f("Error al guardar la configuración")}finally{l(!1)}};return g.jsxs("div",{className:"container mx-auto px-4 py-6",children:[g.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Configuración de IA"}),g.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[g.jsxs("div",{className:"form-group mb-4",children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Servicio de IA"}),g.jsxs("select",{className:"input w-full",value:n,onChange:v=>e(v.target.value),children:[g.jsx("option",{value:vi.GEMINI,children:"Gemini (Predeterminado)"}),g.jsx("option",{value:vi.ZEPHYR,children:"Zephyr 7B Alpha (Hugging Face)"})]}),g.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Selecciona el servicio de IA que se utilizará para procesar las conversaciones."})]}),n===vi.ZEPHYR&&g.jsxs("div",{className:"form-group mb-4",children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"API Key de Hugging Face"}),g.jsx("input",{type:"password",className:"input w-full",value:t,onChange:v=>i(v.target.value),placeholder:"Ingresa tu API Key de Hugging Face"}),g.jsxs("p",{className:"mt-1 text-sm text-gray-500",children:["Puedes obtener una API Key desde tu cuenta de ",g.jsx("a",{href:"https://huggingface.co/settings/tokens",target:"_blank",rel:"noopener noreferrer",className:"text-primary-600 hover:text-primary-800",children:"Hugging Face"}),"."]})]}),c&&g.jsx("div",{className:`p-3 rounded mb-4 ${c.includes("Error")?"bg-red-100 text-red-800":"bg-green-100 text-green-800"}`,children:c}),g.jsxs("div",{className:"flex justify-end gap-2",children:[g.jsx("button",{className:"btn-secondary",onClick:()=>m(-1),disabled:a,children:"Cancelar"}),g.jsx("button",{className:"btn-primary",onClick:y,disabled:a,children:a?"Guardando...":"Guardar configuración"})]})]})]})},N3=()=>{const[n,e]=V.useState([]),[t,i]=V.useState([]),[a,l]=V.useState([]),[c,f]=V.useState(!0);V.useEffect(()=>{(async()=>{try{f(!0);const[w,R,S]=await Promise.all([sx(null,100),ax(null,100),sf()]);e(w),i(R),l(S)}catch(w){console.error("Error al cargar datos para reportes:",w)}finally{f(!1)}})()},[]);const m=n.length+t.length,y={active:n.length,closed:t.length,payment:t.filter(E=>{var w;return((w=E.summary)==null?void 0:w.result)==="payment"}).length,partialPayment:t.filter(E=>{var w;return((w=E.summary)==null?void 0:w.result)==="partial_payment"}).length,promise:t.filter(E=>{var w;return((w=E.summary)==null?void 0:w.result)==="promise"}).length,noPayment:t.filter(E=>{var w;return((w=E.summary)==null?void 0:w.result)==="no_payment"}).length},v={total:a.length,withDebt:a.filter(E=>E.debt>0).length,totalDebt:a.reduce((E,w)=>E+(w.debt||0),0),highProbability:a.filter(E=>{var w;return((w=E.soul)==null?void 0:w.probability)>=70}).length,mediumProbability:a.filter(E=>{var w,R;return((w=E.soul)==null?void 0:w.probability)>=40&&((R=E.soul)==null?void 0:R.probability)<70}).length,lowProbability:a.filter(E=>{var w;return((w=E.soul)==null?void 0:w.probability)<40}).length};return c?g.jsxs("div",{className:"container mx-auto px-4 py-6",children:[g.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Reportes"}),g.jsxs("div",{className:"animate-pulse space-y-6",children:[g.jsx("div",{className:"h-40 bg-gray-200 rounded"}),g.jsx("div",{className:"h-40 bg-gray-200 rounded"}),g.jsx("div",{className:"h-60 bg-gray-200 rounded"})]})]}):g.jsxs("div",{className:"container mx-auto px-4 py-6",children:[g.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Reportes"}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[g.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[g.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Estadísticas de Conversaciones"}),g.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[g.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[g.jsx("h3",{className:"text-sm font-medium text-blue-800 mb-1",children:"Activas"}),g.jsx("p",{className:"text-2xl font-bold text-blue-600",children:y.active})]}),g.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[g.jsx("h3",{className:"text-sm font-medium text-green-800 mb-1",children:"Cerradas"}),g.jsx("p",{className:"text-2xl font-bold text-green-600",children:y.closed})]}),g.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[g.jsx("h3",{className:"text-sm font-medium text-green-800 mb-1",children:"Pagos completos"}),g.jsx("p",{className:"text-2xl font-bold text-green-600",children:y.payment}),g.jsxs("p",{className:"text-xs text-green-600",children:[m>0?Math.round(y.payment/m*100):0,"% del total"]})]}),g.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[g.jsx("h3",{className:"text-sm font-medium text-yellow-800 mb-1",children:"Pagos parciales"}),g.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:y.partialPayment}),g.jsxs("p",{className:"text-xs text-yellow-600",children:[m>0?Math.round(y.partialPayment/m*100):0,"% del total"]})]}),g.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[g.jsx("h3",{className:"text-sm font-medium text-yellow-800 mb-1",children:"Promesas de pago"}),g.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:y.promise}),g.jsxs("p",{className:"text-xs text-yellow-600",children:[m>0?Math.round(y.promise/m*100):0,"% del total"]})]}),g.jsxs("div",{className:"bg-red-50 p-4 rounded-lg",children:[g.jsx("h3",{className:"text-sm font-medium text-red-800 mb-1",children:"Sin pago"}),g.jsx("p",{className:"text-2xl font-bold text-red-600",children:y.noPayment}),g.jsxs("p",{className:"text-xs text-red-600",children:[m>0?Math.round(y.noPayment/m*100):0,"% del total"]})]})]})]}),g.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[g.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Estadísticas de Clientes"}),g.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[g.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[g.jsx("h3",{className:"text-sm font-medium text-blue-800 mb-1",children:"Total de clientes"}),g.jsx("p",{className:"text-2xl font-bold text-blue-600",children:v.total})]}),g.jsxs("div",{className:"bg-red-50 p-4 rounded-lg",children:[g.jsx("h3",{className:"text-sm font-medium text-red-800 mb-1",children:"Con deuda"}),g.jsx("p",{className:"text-2xl font-bold text-red-600",children:v.withDebt}),g.jsxs("p",{className:"text-xs text-red-600",children:[v.total>0?Math.round(v.withDebt/v.total*100):0,"% del total"]})]}),g.jsxs("div",{className:"bg-red-50 p-4 rounded-lg col-span-2",children:[g.jsx("h3",{className:"text-sm font-medium text-red-800 mb-1",children:"Deuda total"}),g.jsxs("p",{className:"text-2xl font-bold text-red-600",children:["$",v.totalDebt.toLocaleString("es-CO")]})]}),g.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[g.jsx("h3",{className:"text-sm font-medium text-green-800 mb-1",children:"Alta probabilidad de pago"}),g.jsx("p",{className:"text-2xl font-bold text-green-600",children:v.highProbability}),g.jsxs("p",{className:"text-xs text-green-600",children:[v.total>0?Math.round(v.highProbability/v.total*100):0,"% del total"]})]}),g.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[g.jsx("h3",{className:"text-sm font-medium text-yellow-800 mb-1",children:"Media probabilidad"}),g.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:v.mediumProbability}),g.jsxs("p",{className:"text-xs text-yellow-600",children:[v.total>0?Math.round(v.mediumProbability/v.total*100):0,"% del total"]})]})]})]})]}),g.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-8",children:[g.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Top 10 Clientes con Mayor Deuda"}),g.jsx("div",{className:"overflow-x-auto",children:g.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[g.jsx("thead",{className:"bg-gray-50",children:g.jsxs("tr",{children:[g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nombre"}),g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Deuda"}),g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Probabilidad de Pago"}),g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Última Conversación"})]})}),g.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a.sort((E,w)=>w.debt-E.debt).slice(0,10).map(E=>{var w,R,S;return g.jsxs("tr",{children:[g.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:g.jsx("div",{className:"font-medium text-gray-900",children:E.name})}),g.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:g.jsxs("div",{className:"text-sm font-medium text-red-600",children:["$",E.debt.toLocaleString("es-CO")]})}),g.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:g.jsxs("div",{className:`text-sm font-medium ${((w=E.soul)==null?void 0:w.probability)>=70?"text-green-600":((R=E.soul)==null?void 0:R.probability)>=40?"text-yellow-600":"text-red-600"}`,children:[((S=E.soul)==null?void 0:S.probability)||0,"%"]})}),g.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:g.jsx("div",{className:"text-sm text-gray-500",children:E.lastContact?new Date(E.lastContact.seconds*1e3).toLocaleDateString():"Sin contacto"})})]},E.id)})})]})})]})]})},I3=()=>{const{currentUser:n,userDetails:e}=rc(),t=vn(),i=async()=>{try{await a6(),t("/login")}catch(a){console.error("Error al cerrar sesión:",a)}};return g.jsx("nav",{className:"bg-white p-4 shadow",children:g.jsxs("div",{className:"container mx-auto flex justify-between items-center",children:[g.jsx("div",{className:"flex items-center",children:g.jsx("span",{className:"text-lg font-semibold text-gray-700",children:"Sistema de Cobranza Adaptativa"})}),g.jsx("div",{className:"flex items-center space-x-4",children:n&&g.jsxs(g.Fragment,{children:[g.jsx("span",{className:"text-sm text-gray-600",children:(e==null?void 0:e.displayName)||n.email}),g.jsx("button",{className:"text-sm text-gray-600 hover:text-gray-900",onClick:i,children:"Cerrar sesión"})]})})]})})},D3=()=>{const{isAdmin:n}=rc();return g.jsxs("div",{className:"bg-gray-800 text-white w-64 flex-shrink-0 hidden md:block",children:[g.jsx("div",{className:"p-4",children:g.jsx("h2",{className:"text-xl font-bold",children:"Acriventas"})}),g.jsxs("nav",{className:"mt-8",children:[g.jsxs(ha,{to:"/",className:({isActive:e})=>`flex items-center py-2 px-4 ${e?"bg-gray-700":"hover:bg-gray-700"}`,end:!0,children:[g.jsx(E6,{className:"mr-3"}),"Dashboard"]}),g.jsxs(ha,{to:"/clients",className:({isActive:e})=>`flex items-center py-2 px-4 ${e?"bg-gray-700":"hover:bg-gray-700"}`,children:[g.jsx(w6,{className:"mr-3"}),"Clientes"]}),g.jsxs(ha,{to:"/conversations",className:({isActive:e})=>`flex items-center py-2 px-4 ${e?"bg-gray-700":"hover:bg-gray-700"}`,children:[g.jsx(b6,{className:"mr-3"}),"Conversaciones"]}),g.jsxs(ha,{to:"/reports",className:({isActive:e})=>`flex items-center py-2 px-4 ${e?"bg-gray-700":"hover:bg-gray-700"}`,children:[g.jsx(v6,{className:"mr-3"}),"Reportes"]}),g.jsxs(ha,{to:"/settings/ai",className:({isActive:e})=>`flex items-center py-2 px-4 ${e?"bg-gray-700":"hover:bg-gray-700"}`,children:[g.jsx(T6,{className:"mr-3"}),"Configuración IA"]}),n&&g.jsxs(ha,{to:"/settings",className:({isActive:e})=>`flex items-center py-2 px-4 ${e?"bg-gray-700":"hover:bg-gray-700"}`,children:[g.jsx(_6,{className:"mr-3"}),"Configuración"]})]})]})},O3=()=>g.jsxs("div",{className:"flex h-screen bg-gray-100",children:[g.jsx(D3,{}),g.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[g.jsx(I3,{}),g.jsx("main",{className:"flex-1 overflow-y-auto p-4",children:g.jsx(oR,{})})]})]}),P3=({children:n})=>{const{currentUser:e,loading:t}=rc();return t?g.jsx("div",{className:"flex h-screen items-center justify-center",children:"Cargando..."}):e?n:g.jsx(dT,{to:"/login"})};function M3(){return g.jsx(PR,{children:g.jsx(l6,{children:g.jsxs(uR,{children:[g.jsx(pn,{path:"/login",element:g.jsx(u6,{})}),g.jsx(pn,{path:"/register",element:g.jsx(c6,{})}),g.jsxs(pn,{path:"/",element:g.jsx(P3,{children:g.jsx(O3,{})}),children:[g.jsx(pn,{index:!0,element:g.jsx(kM,{})}),g.jsx(pn,{path:"clients",element:g.jsx(BM,{})}),g.jsx(pn,{path:"clients/:clientId",element:g.jsx(VM,{})}),g.jsx(pn,{path:"clients/search",element:g.jsx(LM,{})}),g.jsx(pn,{path:"clients/new",element:g.jsx(UM,{})}),g.jsx(pn,{path:"conversation/new",element:g.jsx(zM,{})}),g.jsx(pn,{path:"conversation/new/:clientId",element:g.jsx(A3,{})}),g.jsx(pn,{path:"conversation/:conversationId",element:g.jsx(S3,{})}),g.jsx(pn,{path:"reports",element:g.jsx(N3,{})}),g.jsx(pn,{path:"settings/ai",element:g.jsx(C3,{})})]}),g.jsx(pn,{path:"*",element:g.jsx(dT,{to:"/",replace:!0})})]})})})}pS.createRoot(document.getElementById("root")).render(g.jsx(V.StrictMode,{children:g.jsx(M3,{})}));
