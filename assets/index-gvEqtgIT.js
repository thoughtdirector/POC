(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))a(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&a(u)}).observe(document,{childList:!0,subtree:!0});function t(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerPolicy&&(l.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?l.credentials="include":i.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function a(i){if(i.ep)return;i.ep=!0;const l=t(i);fetch(i.href,l)}})();function gS(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var pp={exports:{}},gc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var B_;function yS(){if(B_)return gc;B_=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(a,i,l){var u=null;if(l!==void 0&&(u=""+l),i.key!==void 0&&(u=""+i.key),"key"in i){l={};for(var m in i)m!=="key"&&(l[m]=i[m])}else l=i;return i=l.ref,{$$typeof:n,type:a,key:u,ref:i!==void 0?i:null,props:l}}return gc.Fragment=e,gc.jsx=t,gc.jsxs=t,gc}var q_;function vS(){return q_||(q_=1,pp.exports=yS()),pp.exports}var f=vS(),gp={exports:{}},ke={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F_;function _S(){if(F_)return ke;F_=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),b=Symbol.iterator;function T(L){return L===null||typeof L!="object"?null:(L=b&&L[b]||L["@@iterator"],typeof L=="function"?L:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,M={};function I(L,se,he){this.props=L,this.context=se,this.refs=M,this.updater=he||C}I.prototype.isReactComponent={},I.prototype.setState=function(L,se){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,se,"setState")},I.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function H(){}H.prototype=I.prototype;function W(L,se,he){this.props=L,this.context=se,this.refs=M,this.updater=he||C}var q=W.prototype=new H;q.constructor=W,A(q,I.prototype),q.isPureReactComponent=!0;var ie=Array.isArray,le={H:null,A:null,T:null,S:null,V:null},pe=Object.prototype.hasOwnProperty;function k(L,se,he,oe,be,je){return he=je.ref,{$$typeof:n,type:L,key:se,ref:he!==void 0?he:null,props:je}}function R(L,se){return k(L.type,se,void 0,void 0,void 0,L.props)}function N(L){return typeof L=="object"&&L!==null&&L.$$typeof===n}function j(L){var se={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(he){return se[he]})}var V=/\/+/g;function z(L,se){return typeof L=="object"&&L!==null&&L.key!=null?j(""+L.key):se.toString(36)}function O(){}function dt(L){switch(L.status){case"fulfilled":return L.value;case"rejected":throw L.reason;default:switch(typeof L.status=="string"?L.then(O,O):(L.status="pending",L.then(function(se){L.status==="pending"&&(L.status="fulfilled",L.value=se)},function(se){L.status==="pending"&&(L.status="rejected",L.reason=se)})),L.status){case"fulfilled":return L.value;case"rejected":throw L.reason}}throw L}function Me(L,se,he,oe,be){var je=typeof L;(je==="undefined"||je==="boolean")&&(L=null);var Te=!1;if(L===null)Te=!0;else switch(je){case"bigint":case"string":case"number":Te=!0;break;case"object":switch(L.$$typeof){case n:case e:Te=!0;break;case v:return Te=L._init,Me(Te(L._payload),se,he,oe,be)}}if(Te)return be=be(L),Te=oe===""?"."+z(L,0):oe,ie(be)?(he="",Te!=null&&(he=Te.replace(V,"$&/")+"/"),Me(be,se,he,"",function(Sn){return Sn})):be!=null&&(N(be)&&(be=R(be,he+(be.key==null||L&&L.key===be.key?"":(""+be.key).replace(V,"$&/")+"/")+Te)),se.push(be)),1;Te=0;var xt=oe===""?".":oe+":";if(ie(L))for(var Ze=0;Ze<L.length;Ze++)oe=L[Ze],je=xt+z(oe,Ze),Te+=Me(oe,se,he,je,be);else if(Ze=T(L),typeof Ze=="function")for(L=Ze.call(L),Ze=0;!(oe=L.next()).done;)oe=oe.value,je=xt+z(oe,Ze++),Te+=Me(oe,se,he,je,be);else if(je==="object"){if(typeof L.then=="function")return Me(dt(L),se,he,oe,be);throw se=String(L),Error("Objects are not valid as a React child (found: "+(se==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":se)+"). If you meant to render a collection of children, use an array instead.")}return Te}function J(L,se,he){if(L==null)return L;var oe=[],be=0;return Me(L,oe,"","",function(je){return se.call(he,je,be++)}),oe}function ue(L){if(L._status===-1){var se=L._result;se=se(),se.then(function(he){(L._status===0||L._status===-1)&&(L._status=1,L._result=he)},function(he){(L._status===0||L._status===-1)&&(L._status=2,L._result=he)}),L._status===-1&&(L._status=0,L._result=se)}if(L._status===1)return L._result.default;throw L._result}var ve=typeof reportError=="function"?reportError:function(L){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var se=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof L=="object"&&L!==null&&typeof L.message=="string"?String(L.message):String(L),error:L});if(!window.dispatchEvent(se))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",L);return}console.error(L)};function Fe(){}return ke.Children={map:J,forEach:function(L,se,he){J(L,function(){se.apply(this,arguments)},he)},count:function(L){var se=0;return J(L,function(){se++}),se},toArray:function(L){return J(L,function(se){return se})||[]},only:function(L){if(!N(L))throw Error("React.Children.only expected to receive a single React element child.");return L}},ke.Component=I,ke.Fragment=t,ke.Profiler=i,ke.PureComponent=W,ke.StrictMode=a,ke.Suspense=p,ke.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=le,ke.__COMPILER_RUNTIME={__proto__:null,c:function(L){return le.H.useMemoCache(L)}},ke.cache=function(L){return function(){return L.apply(null,arguments)}},ke.cloneElement=function(L,se,he){if(L==null)throw Error("The argument must be a React element, but you passed "+L+".");var oe=A({},L.props),be=L.key,je=void 0;if(se!=null)for(Te in se.ref!==void 0&&(je=void 0),se.key!==void 0&&(be=""+se.key),se)!pe.call(se,Te)||Te==="key"||Te==="__self"||Te==="__source"||Te==="ref"&&se.ref===void 0||(oe[Te]=se[Te]);var Te=arguments.length-2;if(Te===1)oe.children=he;else if(1<Te){for(var xt=Array(Te),Ze=0;Ze<Te;Ze++)xt[Ze]=arguments[Ze+2];oe.children=xt}return k(L.type,be,void 0,void 0,je,oe)},ke.createContext=function(L){return L={$$typeof:u,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null},L.Provider=L,L.Consumer={$$typeof:l,_context:L},L},ke.createElement=function(L,se,he){var oe,be={},je=null;if(se!=null)for(oe in se.key!==void 0&&(je=""+se.key),se)pe.call(se,oe)&&oe!=="key"&&oe!=="__self"&&oe!=="__source"&&(be[oe]=se[oe]);var Te=arguments.length-2;if(Te===1)be.children=he;else if(1<Te){for(var xt=Array(Te),Ze=0;Ze<Te;Ze++)xt[Ze]=arguments[Ze+2];be.children=xt}if(L&&L.defaultProps)for(oe in Te=L.defaultProps,Te)be[oe]===void 0&&(be[oe]=Te[oe]);return k(L,je,void 0,void 0,null,be)},ke.createRef=function(){return{current:null}},ke.forwardRef=function(L){return{$$typeof:m,render:L}},ke.isValidElement=N,ke.lazy=function(L){return{$$typeof:v,_payload:{_status:-1,_result:L},_init:ue}},ke.memo=function(L,se){return{$$typeof:y,type:L,compare:se===void 0?null:se}},ke.startTransition=function(L){var se=le.T,he={};le.T=he;try{var oe=L(),be=le.S;be!==null&&be(he,oe),typeof oe=="object"&&oe!==null&&typeof oe.then=="function"&&oe.then(Fe,ve)}catch(je){ve(je)}finally{le.T=se}},ke.unstable_useCacheRefresh=function(){return le.H.useCacheRefresh()},ke.use=function(L){return le.H.use(L)},ke.useActionState=function(L,se,he){return le.H.useActionState(L,se,he)},ke.useCallback=function(L,se){return le.H.useCallback(L,se)},ke.useContext=function(L){return le.H.useContext(L)},ke.useDebugValue=function(){},ke.useDeferredValue=function(L,se){return le.H.useDeferredValue(L,se)},ke.useEffect=function(L,se,he){var oe=le.H;if(typeof he=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return oe.useEffect(L,se)},ke.useId=function(){return le.H.useId()},ke.useImperativeHandle=function(L,se,he){return le.H.useImperativeHandle(L,se,he)},ke.useInsertionEffect=function(L,se){return le.H.useInsertionEffect(L,se)},ke.useLayoutEffect=function(L,se){return le.H.useLayoutEffect(L,se)},ke.useMemo=function(L,se){return le.H.useMemo(L,se)},ke.useOptimistic=function(L,se){return le.H.useOptimistic(L,se)},ke.useReducer=function(L,se,he){return le.H.useReducer(L,se,he)},ke.useRef=function(L){return le.H.useRef(L)},ke.useState=function(L){return le.H.useState(L)},ke.useSyncExternalStore=function(L,se,he){return le.H.useSyncExternalStore(L,se,he)},ke.useTransition=function(){return le.H.useTransition()},ke.version="19.1.0",ke}var H_;function Eg(){return H_||(H_=1,gp.exports=_S()),gp.exports}var P=Eg();const Ti=gS(P);var yp={exports:{}},yc={},vp={exports:{}},_p={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $_;function bS(){return $_||($_=1,function(n){function e(J,ue){var ve=J.length;J.push(ue);e:for(;0<ve;){var Fe=ve-1>>>1,L=J[Fe];if(0<i(L,ue))J[Fe]=ue,J[ve]=L,ve=Fe;else break e}}function t(J){return J.length===0?null:J[0]}function a(J){if(J.length===0)return null;var ue=J[0],ve=J.pop();if(ve!==ue){J[0]=ve;e:for(var Fe=0,L=J.length,se=L>>>1;Fe<se;){var he=2*(Fe+1)-1,oe=J[he],be=he+1,je=J[be];if(0>i(oe,ve))be<L&&0>i(je,oe)?(J[Fe]=je,J[be]=ve,Fe=be):(J[Fe]=oe,J[he]=ve,Fe=he);else if(be<L&&0>i(je,ve))J[Fe]=je,J[be]=ve,Fe=be;else break e}}return ue}function i(J,ue){var ve=J.sortIndex-ue.sortIndex;return ve!==0?ve:J.id-ue.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var u=Date,m=u.now();n.unstable_now=function(){return u.now()-m}}var p=[],y=[],v=1,b=null,T=3,C=!1,A=!1,M=!1,I=!1,H=typeof setTimeout=="function"?setTimeout:null,W=typeof clearTimeout=="function"?clearTimeout:null,q=typeof setImmediate<"u"?setImmediate:null;function ie(J){for(var ue=t(y);ue!==null;){if(ue.callback===null)a(y);else if(ue.startTime<=J)a(y),ue.sortIndex=ue.expirationTime,e(p,ue);else break;ue=t(y)}}function le(J){if(M=!1,ie(J),!A)if(t(p)!==null)A=!0,pe||(pe=!0,z());else{var ue=t(y);ue!==null&&Me(le,ue.startTime-J)}}var pe=!1,k=-1,R=5,N=-1;function j(){return I?!0:!(n.unstable_now()-N<R)}function V(){if(I=!1,pe){var J=n.unstable_now();N=J;var ue=!0;try{e:{A=!1,M&&(M=!1,W(k),k=-1),C=!0;var ve=T;try{t:{for(ie(J),b=t(p);b!==null&&!(b.expirationTime>J&&j());){var Fe=b.callback;if(typeof Fe=="function"){b.callback=null,T=b.priorityLevel;var L=Fe(b.expirationTime<=J);if(J=n.unstable_now(),typeof L=="function"){b.callback=L,ie(J),ue=!0;break t}b===t(p)&&a(p),ie(J)}else a(p);b=t(p)}if(b!==null)ue=!0;else{var se=t(y);se!==null&&Me(le,se.startTime-J),ue=!1}}break e}finally{b=null,T=ve,C=!1}ue=void 0}}finally{ue?z():pe=!1}}}var z;if(typeof q=="function")z=function(){q(V)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,dt=O.port2;O.port1.onmessage=V,z=function(){dt.postMessage(null)}}else z=function(){H(V,0)};function Me(J,ue){k=H(function(){J(n.unstable_now())},ue)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(J){J.callback=null},n.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<J?Math.floor(1e3/J):5},n.unstable_getCurrentPriorityLevel=function(){return T},n.unstable_next=function(J){switch(T){case 1:case 2:case 3:var ue=3;break;default:ue=T}var ve=T;T=ue;try{return J()}finally{T=ve}},n.unstable_requestPaint=function(){I=!0},n.unstable_runWithPriority=function(J,ue){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var ve=T;T=J;try{return ue()}finally{T=ve}},n.unstable_scheduleCallback=function(J,ue,ve){var Fe=n.unstable_now();switch(typeof ve=="object"&&ve!==null?(ve=ve.delay,ve=typeof ve=="number"&&0<ve?Fe+ve:Fe):ve=Fe,J){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=ve+L,J={id:v++,callback:ue,priorityLevel:J,startTime:ve,expirationTime:L,sortIndex:-1},ve>Fe?(J.sortIndex=ve,e(y,J),t(p)===null&&J===t(y)&&(M?(W(k),k=-1):M=!0,Me(le,ve-Fe))):(J.sortIndex=L,e(p,J),A||C||(A=!0,pe||(pe=!0,z()))),J},n.unstable_shouldYield=j,n.unstable_wrapCallback=function(J){var ue=T;return function(){var ve=T;T=ue;try{return J.apply(this,arguments)}finally{T=ve}}}}(_p)),_p}var G_;function ES(){return G_||(G_=1,vp.exports=bS()),vp.exports}var bp={exports:{}},fn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Y_;function xS(){if(Y_)return fn;Y_=1;var n=Eg();function e(p){var y="https://react.dev/errors/"+p;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)y+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+p+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var a={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},i=Symbol.for("react.portal");function l(p,y,v){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:b==null?null:""+b,children:p,containerInfo:y,implementation:v}}var u=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(p,y){if(p==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return fn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,fn.createPortal=function(p,y){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return l(p,y,null,v)},fn.flushSync=function(p){var y=u.T,v=a.p;try{if(u.T=null,a.p=2,p)return p()}finally{u.T=y,a.p=v,a.d.f()}},fn.preconnect=function(p,y){typeof p=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,a.d.C(p,y))},fn.prefetchDNS=function(p){typeof p=="string"&&a.d.D(p)},fn.preinit=function(p,y){if(typeof p=="string"&&y&&typeof y.as=="string"){var v=y.as,b=m(v,y.crossOrigin),T=typeof y.integrity=="string"?y.integrity:void 0,C=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;v==="style"?a.d.S(p,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:b,integrity:T,fetchPriority:C}):v==="script"&&a.d.X(p,{crossOrigin:b,integrity:T,fetchPriority:C,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},fn.preinitModule=function(p,y){if(typeof p=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var v=m(y.as,y.crossOrigin);a.d.M(p,{crossOrigin:v,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&a.d.M(p)},fn.preload=function(p,y){if(typeof p=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var v=y.as,b=m(v,y.crossOrigin);a.d.L(p,v,{crossOrigin:b,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},fn.preloadModule=function(p,y){if(typeof p=="string")if(y){var v=m(y.as,y.crossOrigin);a.d.m(p,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:v,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else a.d.m(p)},fn.requestFormReset=function(p){a.d.r(p)},fn.unstable_batchedUpdates=function(p,y){return p(y)},fn.useFormState=function(p,y,v){return u.H.useFormState(p,y,v)},fn.useFormStatus=function(){return u.H.useHostTransitionStatus()},fn.version="19.1.0",fn}var K_;function TS(){if(K_)return bp.exports;K_=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),bp.exports=xS(),bp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Q_;function wS(){if(Q_)return yc;Q_=1;var n=ES(),e=Eg(),t=TS();function a(r){var s="https://react.dev/errors/"+r;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function l(r){var s=r,o=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,(s.flags&4098)!==0&&(o=s.return),r=s.return;while(r)}return s.tag===3?o:null}function u(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function m(r){if(l(r)!==r)throw Error(a(188))}function p(r){var s=r.alternate;if(!s){if(s=l(r),s===null)throw Error(a(188));return s!==r?null:r}for(var o=r,c=s;;){var h=o.return;if(h===null)break;var g=h.alternate;if(g===null){if(c=h.return,c!==null){o=c;continue}break}if(h.child===g.child){for(g=h.child;g;){if(g===o)return m(h),r;if(g===c)return m(h),s;g=g.sibling}throw Error(a(188))}if(o.return!==c.return)o=h,c=g;else{for(var x=!1,w=h.child;w;){if(w===o){x=!0,o=h,c=g;break}if(w===c){x=!0,c=h,o=g;break}w=w.sibling}if(!x){for(w=g.child;w;){if(w===o){x=!0,o=g,c=h;break}if(w===c){x=!0,c=g,o=h;break}w=w.sibling}if(!x)throw Error(a(189))}}if(o.alternate!==c)throw Error(a(190))}if(o.tag!==3)throw Error(a(188));return o.stateNode.current===o?r:s}function y(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r;for(r=r.child;r!==null;){if(s=y(r),s!==null)return s;r=r.sibling}return null}var v=Object.assign,b=Symbol.for("react.element"),T=Symbol.for("react.transitional.element"),C=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),H=Symbol.for("react.provider"),W=Symbol.for("react.consumer"),q=Symbol.for("react.context"),ie=Symbol.for("react.forward_ref"),le=Symbol.for("react.suspense"),pe=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),j=Symbol.for("react.memo_cache_sentinel"),V=Symbol.iterator;function z(r){return r===null||typeof r!="object"?null:(r=V&&r[V]||r["@@iterator"],typeof r=="function"?r:null)}var O=Symbol.for("react.client.reference");function dt(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===O?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case A:return"Fragment";case I:return"Profiler";case M:return"StrictMode";case le:return"Suspense";case pe:return"SuspenseList";case N:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case C:return"Portal";case q:return(r.displayName||"Context")+".Provider";case W:return(r._context.displayName||"Context")+".Consumer";case ie:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case k:return s=r.displayName||null,s!==null?s:dt(r.type)||"Memo";case R:s=r._payload,r=r._init;try{return dt(r(s))}catch{}}return null}var Me=Array.isArray,J=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ue=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ve={pending:!1,data:null,method:null,action:null},Fe=[],L=-1;function se(r){return{current:r}}function he(r){0>L||(r.current=Fe[L],Fe[L]=null,L--)}function oe(r,s){L++,Fe[L]=r.current,r.current=s}var be=se(null),je=se(null),Te=se(null),xt=se(null);function Ze(r,s){switch(oe(Te,s),oe(je,r),oe(be,null),s.nodeType){case 9:case 11:r=(r=s.documentElement)&&(r=r.namespaceURI)?p_(r):0;break;default:if(r=s.tagName,s=s.namespaceURI)s=p_(s),r=g_(s,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}he(be),oe(be,r)}function Sn(){he(be),he(je),he(Te)}function Yn(r){r.memoizedState!==null&&oe(xt,r);var s=be.current,o=g_(s,r.type);s!==o&&(oe(je,r),oe(be,o))}function Nn(r){je.current===r&&(he(be),he(je)),xt.current===r&&(he(xt),dc._currentValue=ve)}var Kn=Object.prototype.hasOwnProperty,ce=n.unstable_scheduleCallback,we=n.unstable_cancelCallback,Q=n.unstable_shouldYield,_e=n.unstable_requestPaint,ye=n.unstable_now,kn=n.unstable_getCurrentPriorityLevel,Qn=n.unstable_ImmediatePriority,Tt=n.unstable_UserBlockingPriority,Zr=n.unstable_NormalPriority,cl=n.unstable_LowPriority,Li=n.unstable_IdlePriority,ul=n.log,hu=n.unstable_setDisableYieldValue,wt=null,tt=null;function Ln(r){if(typeof ul=="function"&&hu(r),tt&&typeof tt.setStrictMode=="function")try{tt.setStrictMode(wt,r)}catch{}}var dn=Math.clz32?Math.clz32:Vs,fu=Math.log,yf=Math.LN2;function Vs(r){return r>>>=0,r===0?32:31-(fu(r)/yf|0)|0}var Us=256,zs=4194304;function fr(r){var s=r&42;if(s!==0)return s;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function Vi(r,s,o){var c=r.pendingLanes;if(c===0)return 0;var h=0,g=r.suspendedLanes,x=r.pingedLanes;r=r.warmLanes;var w=c&134217727;return w!==0?(c=w&~g,c!==0?h=fr(c):(x&=w,x!==0?h=fr(x):o||(o=w&~r,o!==0&&(h=fr(o))))):(w=c&~g,w!==0?h=fr(w):x!==0?h=fr(x):o||(o=c&~r,o!==0&&(h=fr(o)))),h===0?0:s!==0&&s!==h&&(s&g)===0&&(g=h&-h,o=s&-s,g>=o||g===32&&(o&4194048)!==0)?s:h}function Bs(r,s){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&s)===0}function dl(r,s){switch(r){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function hl(){var r=Us;return Us<<=1,(Us&4194048)===0&&(Us=256),r}function fl(){var r=zs;return zs<<=1,(zs&62914560)===0&&(zs=4194304),r}function Jr(r){for(var s=[],o=0;31>o;o++)s.push(r);return s}function ea(r,s){r.pendingLanes|=s,s!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function ml(r,s,o,c,h,g){var x=r.pendingLanes;r.pendingLanes=o,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=o,r.entangledLanes&=o,r.errorRecoveryDisabledLanes&=o,r.shellSuspendCounter=0;var w=r.entanglements,D=r.expirationTimes,G=r.hiddenUpdates;for(o=x&~o;0<o;){var ee=31-dn(o),re=1<<ee;w[ee]=0,D[ee]=-1;var Y=G[ee];if(Y!==null)for(G[ee]=null,ee=0;ee<Y.length;ee++){var K=Y[ee];K!==null&&(K.lane&=-536870913)}o&=~re}c!==0&&Nr(r,c,0),g!==0&&h===0&&r.tag!==0&&(r.suspendedLanes|=g&~(x&~s))}function Nr(r,s,o){r.pendingLanes|=s,r.suspendedLanes&=~s;var c=31-dn(s);r.entangledLanes|=s,r.entanglements[c]=r.entanglements[c]|1073741824|o&4194090}function pl(r,s){var o=r.entangledLanes|=s;for(r=r.entanglements;o;){var c=31-dn(o),h=1<<c;h&s|r[c]&s&&(r[c]|=s),o&=~h}}function Ua(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function Ui(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function za(){var r=ue.p;return r!==0?r:(r=window.event,r===void 0?32:M_(r.type))}function mu(r,s){var o=ue.p;try{return ue.p=r,s()}finally{ue.p=o}}var pt=Math.random().toString(36).slice(2),Lt="__reactFiber$"+pt,Ot="__reactProps$"+pt,Wn="__reactContainer$"+pt,gl="__reactEvents$"+pt,vf="__reactListeners$"+pt,Ba="__reactHandles$"+pt,pu="__reactResources$"+pt,qs="__reactMarker$"+pt;function qa(r){delete r[Lt],delete r[Ot],delete r[gl],delete r[vf],delete r[Ba]}function ta(r){var s=r[Lt];if(s)return s;for(var o=r.parentNode;o;){if(s=o[Wn]||o[Lt]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(r=b_(r);r!==null;){if(o=r[Lt])return o;r=b_(r)}return s}r=o,o=r.parentNode}return null}function Cr(r){if(r=r[Lt]||r[Wn]){var s=r.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return r}return null}function Rr(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r.stateNode;throw Error(a(33))}function _n(r){var s=r[pu];return s||(s=r[pu]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Nt(r){r[qs]=!0}var yl=new Set,zi={};function mr(r,s){na(r,s),na(r+"Capture",s)}function na(r,s){for(zi[r]=s,r=0;r<s.length;r++)yl.add(s[r])}var gu=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),yu={},Fs={};function vu(r){return Kn.call(Fs,r)?!0:Kn.call(yu,r)?!1:gu.test(r)?Fs[r]=!0:(yu[r]=!0,!1)}function Fa(r,s,o){if(vu(s))if(o===null)r.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":r.removeAttribute(s);return;case"boolean":var c=s.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){r.removeAttribute(s);return}}r.setAttribute(s,""+o)}}function Ir(r,s,o){if(o===null)r.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(s);return}r.setAttribute(s,""+o)}}function en(r,s,o,c){if(c===null)r.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(o);return}r.setAttributeNS(s,o,""+c)}}var Hs,_u;function ra(r){if(Hs===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);Hs=s&&s[1]||"",_u=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Hs+r+_u}var Bi=!1;function qi(r,s){if(!r||Bi)return"";Bi=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(s){var re=function(){throw Error()};if(Object.defineProperty(re.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(re,[])}catch(K){var Y=K}Reflect.construct(r,[],re)}else{try{re.call()}catch(K){Y=K}r.call(re.prototype)}}else{try{throw Error()}catch(K){Y=K}(re=r())&&typeof re.catch=="function"&&re.catch(function(){})}}catch(K){if(K&&Y&&typeof K.stack=="string")return[K.stack,Y.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=c.DetermineComponentFrameRoot(),x=g[0],w=g[1];if(x&&w){var D=x.split(`
`),G=w.split(`
`);for(h=c=0;c<D.length&&!D[c].includes("DetermineComponentFrameRoot");)c++;for(;h<G.length&&!G[h].includes("DetermineComponentFrameRoot");)h++;if(c===D.length||h===G.length)for(c=D.length-1,h=G.length-1;1<=c&&0<=h&&D[c]!==G[h];)h--;for(;1<=c&&0<=h;c--,h--)if(D[c]!==G[h]){if(c!==1||h!==1)do if(c--,h--,0>h||D[c]!==G[h]){var ee=`
`+D[c].replace(" at new "," at ");return r.displayName&&ee.includes("<anonymous>")&&(ee=ee.replace("<anonymous>",r.displayName)),ee}while(1<=c&&0<=h);break}}}finally{Bi=!1,Error.prepareStackTrace=o}return(o=r?r.displayName||r.name:"")?ra(o):""}function vl(r){switch(r.tag){case 26:case 27:case 5:return ra(r.type);case 16:return ra("Lazy");case 13:return ra("Suspense");case 19:return ra("SuspenseList");case 0:case 15:return qi(r.type,!1);case 11:return qi(r.type.render,!1);case 1:return qi(r.type,!0);case 31:return ra("Activity");default:return""}}function Fi(r){try{var s="";do s+=vl(r),r=r.return;while(r);return s}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function bn(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function _l(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function _f(r){var s=_l(r)?"checked":"value",o=Object.getOwnPropertyDescriptor(r.constructor.prototype,s),c=""+r[s];if(!r.hasOwnProperty(s)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var h=o.get,g=o.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return h.call(this)},set:function(x){c=""+x,g.call(this,x)}}),Object.defineProperty(r,s,{enumerable:o.enumerable}),{getValue:function(){return c},setValue:function(x){c=""+x},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function Hi(r){r._valueTracker||(r._valueTracker=_f(r))}function bl(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var o=s.getValue(),c="";return r&&(c=_l(r)?r.checked?"true":"false":r.value),r=c,r!==o?(s.setValue(r),!0):!1}function $s(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var bf=/[\n"\\]/g;function Dt(r){return r.replace(bf,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Vn(r,s,o,c,h,g,x,w){r.name="",x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?r.type=x:r.removeAttribute("type"),s!=null?x==="number"?(s===0&&r.value===""||r.value!=s)&&(r.value=""+bn(s)):r.value!==""+bn(s)&&(r.value=""+bn(s)):x!=="submit"&&x!=="reset"||r.removeAttribute("value"),s!=null?Ha(r,x,bn(s)):o!=null?Ha(r,x,bn(o)):c!=null&&r.removeAttribute("value"),h==null&&g!=null&&(r.defaultChecked=!!g),h!=null&&(r.checked=h&&typeof h!="function"&&typeof h!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?r.name=""+bn(w):r.removeAttribute("name")}function Gs(r,s,o,c,h,g,x,w){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(r.type=g),s!=null||o!=null){if(!(g!=="submit"&&g!=="reset"||s!=null))return;o=o!=null?""+bn(o):"",s=s!=null?""+bn(s):o,w||s===r.value||(r.value=s),r.defaultValue=s}c=c??h,c=typeof c!="function"&&typeof c!="symbol"&&!!c,r.checked=w?r.checked:!!c,r.defaultChecked=!!c,x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(r.name=x)}function Ha(r,s,o){s==="number"&&$s(r.ownerDocument)===r||r.defaultValue===""+o||(r.defaultValue=""+o)}function aa(r,s,o,c){if(r=r.options,s){s={};for(var h=0;h<o.length;h++)s["$"+o[h]]=!0;for(o=0;o<r.length;o++)h=s.hasOwnProperty("$"+r[o].value),r[o].selected!==h&&(r[o].selected=h),h&&c&&(r[o].defaultSelected=!0)}else{for(o=""+bn(o),s=null,h=0;h<r.length;h++){if(r[h].value===o){r[h].selected=!0,c&&(r[h].defaultSelected=!0);return}s!==null||r[h].disabled||(s=r[h])}s!==null&&(s.selected=!0)}}function st(r,s,o){if(s!=null&&(s=""+bn(s),s!==r.value&&(r.value=s),o==null)){r.defaultValue!==s&&(r.defaultValue=s);return}r.defaultValue=o!=null?""+bn(o):""}function Ys(r,s,o,c){if(s==null){if(c!=null){if(o!=null)throw Error(a(92));if(Me(c)){if(1<c.length)throw Error(a(93));c=c[0]}o=c}o==null&&(o=""),s=o}o=bn(s),r.defaultValue=o,c=r.textContent,c===o&&c!==""&&c!==null&&(r.value=c)}function Xn(r,s){if(s){var o=r.firstChild;if(o&&o===r.lastChild&&o.nodeType===3){o.nodeValue=s;return}}r.textContent=s}var Ks=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function bu(r,s,o){var c=s.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?c?r.setProperty(s,""):s==="float"?r.cssFloat="":r[s]="":c?r.setProperty(s,o):typeof o!="number"||o===0||Ks.has(s)?s==="float"?r.cssFloat=o:r[s]=(""+o).trim():r[s]=o+"px"}function El(r,s,o){if(s!=null&&typeof s!="object")throw Error(a(62));if(r=r.style,o!=null){for(var c in o)!o.hasOwnProperty(c)||s!=null&&s.hasOwnProperty(c)||(c.indexOf("--")===0?r.setProperty(c,""):c==="float"?r.cssFloat="":r[c]="");for(var h in s)c=s[h],s.hasOwnProperty(h)&&o[h]!==c&&bu(r,h,c)}else for(var g in s)s.hasOwnProperty(g)&&bu(r,g,s[g])}function xl(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ef=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),xf=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function $i(r){return xf.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}var sa=null;function Zn(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var ia=null,oa=null;function Tl(r){var s=Cr(r);if(s&&(r=s.stateNode)){var o=r[Ot]||null;e:switch(r=s.stateNode,s.type){case"input":if(Vn(r,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),s=o.name,o.type==="radio"&&s!=null){for(o=r;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Dt(""+s)+'"][type="radio"]'),s=0;s<o.length;s++){var c=o[s];if(c!==r&&c.form===r.form){var h=c[Ot]||null;if(!h)throw Error(a(90));Vn(c,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(s=0;s<o.length;s++)c=o[s],c.form===r.form&&bl(c)}break e;case"textarea":st(r,o.value,o.defaultValue);break e;case"select":s=o.value,s!=null&&aa(r,!!o.multiple,s,!1)}}}var Or=!1;function Eu(r,s,o){if(Or)return r(s,o);Or=!0;try{var c=r(s);return c}finally{if(Or=!1,(ia!==null||oa!==null)&&(md(),ia&&(s=ia,r=oa,oa=ia=null,Tl(s),r)))for(s=0;s<r.length;s++)Tl(r[s])}}function Qs(r,s){var o=r.stateNode;if(o===null)return null;var c=o[Ot]||null;if(c===null)return null;o=c[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(r=r.type,c=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!c;break e;default:r=!1}if(r)return null;if(o&&typeof o!="function")throw Error(a(231,s,typeof o));return o}var pr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Jn=!1;if(pr)try{var Ws={};Object.defineProperty(Ws,"passive",{get:function(){Jn=!0}}),window.addEventListener("test",Ws,Ws),window.removeEventListener("test",Ws,Ws)}catch{Jn=!1}var Dr=null,$a=null,la=null;function wl(){if(la)return la;var r,s=$a,o=s.length,c,h="value"in Dr?Dr.value:Dr.textContent,g=h.length;for(r=0;r<o&&s[r]===h[r];r++);var x=o-r;for(c=1;c<=x&&s[o-c]===h[g-c];c++);return la=h.slice(r,1<c?1-c:void 0)}function jr(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function Pr(){return!0}function Al(){return!1}function $t(r){function s(o,c,h,g,x){this._reactName=o,this._targetInst=h,this.type=c,this.nativeEvent=g,this.target=x,this.currentTarget=null;for(var w in r)r.hasOwnProperty(w)&&(o=r[w],this[w]=o?o(g):g[w]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Pr:Al,this.isPropagationStopped=Al,this}return v(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Pr)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Pr)},persist:function(){},isPersistent:Pr}),s}var Je={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Gi=$t(Je),Xs=v({},Je,{view:0,detail:0}),xu=$t(Xs),Yi,Ki,Mr,Zs=v({},Xs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ti,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Mr&&(Mr&&r.type==="mousemove"?(Yi=r.screenX-Mr.screenX,Ki=r.screenY-Mr.screenY):Ki=Yi=0,Mr=r),Yi)},movementY:function(r){return"movementY"in r?r.movementY:Ki}}),er=$t(Zs),Tu=v({},Zs,{dataTransfer:0}),Tf=$t(Tu),Js=v({},Xs,{relatedTarget:0}),Qi=$t(Js),Sl=v({},Je,{animationName:0,elapsedTime:0,pseudoElement:0}),Wi=$t(Sl),wu=v({},Je,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Xi=$t(wu),wf=v({},Je,{data:0}),Nl=$t(wf),ei={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Au={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Su={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cl(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=Su[r])?!!s[r]:!1}function ti(){return Cl}var Nu=v({},Xs,{key:function(r){if(r.key){var s=ei[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=jr(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Au[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ti,charCode:function(r){return r.type==="keypress"?jr(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?jr(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Zi=$t(Nu),Cu=v({},Zs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Rl=$t(Cu),ca=v({},Xs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ti}),Ru=$t(ca),Iu=v({},Je,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ou=$t(Iu),Du=v({},Zs,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Ji=$t(Du),En=v({},Je,{newState:0,oldState:0}),ju=$t(En),Pu=[9,13,27,32],kr=pr&&"CompositionEvent"in window,d=null;pr&&"documentMode"in document&&(d=document.documentMode);var _=pr&&"TextEvent"in window&&!d,E=pr&&(!kr||d&&8<d&&11>=d),S=" ",F=!1;function X(r,s){switch(r){case"keyup":return Pu.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function de(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Ge=!1;function Vt(r,s){switch(r){case"compositionend":return de(s);case"keypress":return s.which!==32?null:(F=!0,S);case"textInput":return r=s.data,r===S&&F?null:r;default:return null}}function Ye(r,s){if(Ge)return r==="compositionend"||!kr&&X(r,s)?(r=wl(),la=$a=Dr=null,Ge=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return E&&s.locale!=="ko"?null:s.data;default:return null}}var Gt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ut(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!Gt[r.type]:s==="textarea"}function ua(r,s,o,c){ia?oa?oa.push(c):oa=[c]:ia=c,s=bd(s,"onChange"),0<s.length&&(o=new Gi("onChange","change",null,o,c),r.push({event:o,listeners:s}))}var tn=null,Lr=null;function Il(r){u_(r,0)}function Mu(r){var s=Rr(r);if(bl(s))return r}function Oy(r,s){if(r==="change")return s}var Dy=!1;if(pr){var Af;if(pr){var Sf="oninput"in document;if(!Sf){var jy=document.createElement("div");jy.setAttribute("oninput","return;"),Sf=typeof jy.oninput=="function"}Af=Sf}else Af=!1;Dy=Af&&(!document.documentMode||9<document.documentMode)}function Py(){tn&&(tn.detachEvent("onpropertychange",My),Lr=tn=null)}function My(r){if(r.propertyName==="value"&&Mu(Lr)){var s=[];ua(s,Lr,r,Zn(r)),Eu(Il,s)}}function Gw(r,s,o){r==="focusin"?(Py(),tn=s,Lr=o,tn.attachEvent("onpropertychange",My)):r==="focusout"&&Py()}function Yw(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Mu(Lr)}function Kw(r,s){if(r==="click")return Mu(s)}function Qw(r,s){if(r==="input"||r==="change")return Mu(s)}function Ww(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var Un=typeof Object.is=="function"?Object.is:Ww;function Ol(r,s){if(Un(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var o=Object.keys(r),c=Object.keys(s);if(o.length!==c.length)return!1;for(c=0;c<o.length;c++){var h=o[c];if(!Kn.call(s,h)||!Un(r[h],s[h]))return!1}return!0}function ky(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Ly(r,s){var o=ky(r);r=0;for(var c;o;){if(o.nodeType===3){if(c=r+o.textContent.length,r<=s&&c>=s)return{node:o,offset:s-r};r=c}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=ky(o)}}function Vy(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?Vy(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function Uy(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var s=$s(r.document);s instanceof r.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)r=s.contentWindow;else break;s=$s(r.document)}return s}function Nf(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}var Xw=pr&&"documentMode"in document&&11>=document.documentMode,eo=null,Cf=null,Dl=null,Rf=!1;function zy(r,s,o){var c=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Rf||eo==null||eo!==$s(c)||(c=eo,"selectionStart"in c&&Nf(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Dl&&Ol(Dl,c)||(Dl=c,c=bd(Cf,"onSelect"),0<c.length&&(s=new Gi("onSelect","select",null,s,o),r.push({event:s,listeners:c}),s.target=eo)))}function ni(r,s){var o={};return o[r.toLowerCase()]=s.toLowerCase(),o["Webkit"+r]="webkit"+s,o["Moz"+r]="moz"+s,o}var to={animationend:ni("Animation","AnimationEnd"),animationiteration:ni("Animation","AnimationIteration"),animationstart:ni("Animation","AnimationStart"),transitionrun:ni("Transition","TransitionRun"),transitionstart:ni("Transition","TransitionStart"),transitioncancel:ni("Transition","TransitionCancel"),transitionend:ni("Transition","TransitionEnd")},If={},By={};pr&&(By=document.createElement("div").style,"AnimationEvent"in window||(delete to.animationend.animation,delete to.animationiteration.animation,delete to.animationstart.animation),"TransitionEvent"in window||delete to.transitionend.transition);function ri(r){if(If[r])return If[r];if(!to[r])return r;var s=to[r],o;for(o in s)if(s.hasOwnProperty(o)&&o in By)return If[r]=s[o];return r}var qy=ri("animationend"),Fy=ri("animationiteration"),Hy=ri("animationstart"),Zw=ri("transitionrun"),Jw=ri("transitionstart"),eA=ri("transitioncancel"),$y=ri("transitionend"),Gy=new Map,Of="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Of.push("scrollEnd");function gr(r,s){Gy.set(r,s),mr(s,[r])}var Yy=new WeakMap;function tr(r,s){if(typeof r=="object"&&r!==null){var o=Yy.get(r);return o!==void 0?o:(s={value:r,source:s,stack:Fi(s)},Yy.set(r,s),s)}return{value:r,source:s,stack:Fi(s)}}var nr=[],no=0,Df=0;function ku(){for(var r=no,s=Df=no=0;s<r;){var o=nr[s];nr[s++]=null;var c=nr[s];nr[s++]=null;var h=nr[s];nr[s++]=null;var g=nr[s];if(nr[s++]=null,c!==null&&h!==null){var x=c.pending;x===null?h.next=h:(h.next=x.next,x.next=h),c.pending=h}g!==0&&Ky(o,h,g)}}function Lu(r,s,o,c){nr[no++]=r,nr[no++]=s,nr[no++]=o,nr[no++]=c,Df|=c,r.lanes|=c,r=r.alternate,r!==null&&(r.lanes|=c)}function jf(r,s,o,c){return Lu(r,s,o,c),Vu(r)}function ro(r,s){return Lu(r,null,null,s),Vu(r)}function Ky(r,s,o){r.lanes|=o;var c=r.alternate;c!==null&&(c.lanes|=o);for(var h=!1,g=r.return;g!==null;)g.childLanes|=o,c=g.alternate,c!==null&&(c.childLanes|=o),g.tag===22&&(r=g.stateNode,r===null||r._visibility&1||(h=!0)),r=g,g=g.return;return r.tag===3?(g=r.stateNode,h&&s!==null&&(h=31-dn(o),r=g.hiddenUpdates,c=r[h],c===null?r[h]=[s]:c.push(s),s.lane=o|536870912),g):null}function Vu(r){if(50<rc)throw rc=0,Um=null,Error(a(185));for(var s=r.return;s!==null;)r=s,s=r.return;return r.tag===3?r.stateNode:null}var ao={};function tA(r,s,o,c){this.tag=r,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zn(r,s,o,c){return new tA(r,s,o,c)}function Pf(r){return r=r.prototype,!(!r||!r.isReactComponent)}function da(r,s){var o=r.alternate;return o===null?(o=zn(r.tag,s,r.key,r.mode),o.elementType=r.elementType,o.type=r.type,o.stateNode=r.stateNode,o.alternate=r,r.alternate=o):(o.pendingProps=s,o.type=r.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=r.flags&65011712,o.childLanes=r.childLanes,o.lanes=r.lanes,o.child=r.child,o.memoizedProps=r.memoizedProps,o.memoizedState=r.memoizedState,o.updateQueue=r.updateQueue,s=r.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=r.sibling,o.index=r.index,o.ref=r.ref,o.refCleanup=r.refCleanup,o}function Qy(r,s){r.flags&=65011714;var o=r.alternate;return o===null?(r.childLanes=0,r.lanes=s,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,s=o.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),r}function Uu(r,s,o,c,h,g){var x=0;if(c=r,typeof r=="function")Pf(r)&&(x=1);else if(typeof r=="string")x=rS(r,o,be.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case N:return r=zn(31,o,s,h),r.elementType=N,r.lanes=g,r;case A:return ai(o.children,h,g,s);case M:x=8,h|=24;break;case I:return r=zn(12,o,s,h|2),r.elementType=I,r.lanes=g,r;case le:return r=zn(13,o,s,h),r.elementType=le,r.lanes=g,r;case pe:return r=zn(19,o,s,h),r.elementType=pe,r.lanes=g,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case H:case q:x=10;break e;case W:x=9;break e;case ie:x=11;break e;case k:x=14;break e;case R:x=16,c=null;break e}x=29,o=Error(a(130,r===null?"null":typeof r,"")),c=null}return s=zn(x,o,s,h),s.elementType=r,s.type=c,s.lanes=g,s}function ai(r,s,o,c){return r=zn(7,r,c,s),r.lanes=o,r}function Mf(r,s,o){return r=zn(6,r,null,s),r.lanes=o,r}function kf(r,s,o){return s=zn(4,r.children!==null?r.children:[],r.key,s),s.lanes=o,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}var so=[],io=0,zu=null,Bu=0,rr=[],ar=0,si=null,ha=1,fa="";function ii(r,s){so[io++]=Bu,so[io++]=zu,zu=r,Bu=s}function Wy(r,s,o){rr[ar++]=ha,rr[ar++]=fa,rr[ar++]=si,si=r;var c=ha;r=fa;var h=32-dn(c)-1;c&=~(1<<h),o+=1;var g=32-dn(s)+h;if(30<g){var x=h-h%5;g=(c&(1<<x)-1).toString(32),c>>=x,h-=x,ha=1<<32-dn(s)+h|o<<h|c,fa=g+r}else ha=1<<g|o<<h|c,fa=r}function Lf(r){r.return!==null&&(ii(r,1),Wy(r,1,0))}function Vf(r){for(;r===zu;)zu=so[--io],so[io]=null,Bu=so[--io],so[io]=null;for(;r===si;)si=rr[--ar],rr[ar]=null,fa=rr[--ar],rr[ar]=null,ha=rr[--ar],rr[ar]=null}var xn=null,At=null,Xe=!1,oi=null,Vr=!1,Uf=Error(a(519));function li(r){var s=Error(a(418,""));throw Ml(tr(s,r)),Uf}function Xy(r){var s=r.stateNode,o=r.type,c=r.memoizedProps;switch(s[Lt]=r,s[Ot]=c,o){case"dialog":Be("cancel",s),Be("close",s);break;case"iframe":case"object":case"embed":Be("load",s);break;case"video":case"audio":for(o=0;o<sc.length;o++)Be(sc[o],s);break;case"source":Be("error",s);break;case"img":case"image":case"link":Be("error",s),Be("load",s);break;case"details":Be("toggle",s);break;case"input":Be("invalid",s),Gs(s,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0),Hi(s);break;case"select":Be("invalid",s);break;case"textarea":Be("invalid",s),Ys(s,c.value,c.defaultValue,c.children),Hi(s)}o=c.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||s.textContent===""+o||c.suppressHydrationWarning===!0||m_(s.textContent,o)?(c.popover!=null&&(Be("beforetoggle",s),Be("toggle",s)),c.onScroll!=null&&Be("scroll",s),c.onScrollEnd!=null&&Be("scrollend",s),c.onClick!=null&&(s.onclick=Ed),s=!0):s=!1,s||li(r)}function Zy(r){for(xn=r.return;xn;)switch(xn.tag){case 5:case 13:Vr=!1;return;case 27:case 3:Vr=!0;return;default:xn=xn.return}}function jl(r){if(r!==xn)return!1;if(!Xe)return Zy(r),Xe=!0,!1;var s=r.tag,o;if((o=s!==3&&s!==27)&&((o=s===5)&&(o=r.type,o=!(o!=="form"&&o!=="button")||tp(r.type,r.memoizedProps)),o=!o),o&&At&&li(r),Zy(r),s===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(a(317));e:{for(r=r.nextSibling,s=0;r;){if(r.nodeType===8)if(o=r.data,o==="/$"){if(s===0){At=vr(r.nextSibling);break e}s--}else o!=="$"&&o!=="$!"&&o!=="$?"||s++;r=r.nextSibling}At=null}}else s===27?(s=At,os(r.type)?(r=sp,sp=null,At=r):At=s):At=xn?vr(r.stateNode.nextSibling):null;return!0}function Pl(){At=xn=null,Xe=!1}function Jy(){var r=oi;return r!==null&&(In===null?In=r:In.push.apply(In,r),oi=null),r}function Ml(r){oi===null?oi=[r]:oi.push(r)}var zf=se(null),ci=null,ma=null;function Ga(r,s,o){oe(zf,s._currentValue),s._currentValue=o}function pa(r){r._currentValue=zf.current,he(zf)}function Bf(r,s,o){for(;r!==null;){var c=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),r===o)break;r=r.return}}function qf(r,s,o,c){var h=r.child;for(h!==null&&(h.return=r);h!==null;){var g=h.dependencies;if(g!==null){var x=h.child;g=g.firstContext;e:for(;g!==null;){var w=g;g=h;for(var D=0;D<s.length;D++)if(w.context===s[D]){g.lanes|=o,w=g.alternate,w!==null&&(w.lanes|=o),Bf(g.return,o,r),c||(x=null);break e}g=w.next}}else if(h.tag===18){if(x=h.return,x===null)throw Error(a(341));x.lanes|=o,g=x.alternate,g!==null&&(g.lanes|=o),Bf(x,o,r),x=null}else x=h.child;if(x!==null)x.return=h;else for(x=h;x!==null;){if(x===r){x=null;break}if(h=x.sibling,h!==null){h.return=x.return,x=h;break}x=x.return}h=x}}function kl(r,s,o,c){r=null;for(var h=s,g=!1;h!==null;){if(!g){if((h.flags&524288)!==0)g=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var x=h.alternate;if(x===null)throw Error(a(387));if(x=x.memoizedProps,x!==null){var w=h.type;Un(h.pendingProps.value,x.value)||(r!==null?r.push(w):r=[w])}}else if(h===xt.current){if(x=h.alternate,x===null)throw Error(a(387));x.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(r!==null?r.push(dc):r=[dc])}h=h.return}r!==null&&qf(s,r,o,c),s.flags|=262144}function qu(r){for(r=r.firstContext;r!==null;){if(!Un(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function ui(r){ci=r,ma=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function hn(r){return e0(ci,r)}function Fu(r,s){return ci===null&&ui(r),e0(r,s)}function e0(r,s){var o=s._currentValue;if(s={context:s,memoizedValue:o,next:null},ma===null){if(r===null)throw Error(a(308));ma=s,r.dependencies={lanes:0,firstContext:s},r.flags|=524288}else ma=ma.next=s;return o}var nA=typeof AbortController<"u"?AbortController:function(){var r=[],s=this.signal={aborted:!1,addEventListener:function(o,c){r.push(c)}};this.abort=function(){s.aborted=!0,r.forEach(function(o){return o()})}},rA=n.unstable_scheduleCallback,aA=n.unstable_NormalPriority,zt={$$typeof:q,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ff(){return{controller:new nA,data:new Map,refCount:0}}function Ll(r){r.refCount--,r.refCount===0&&rA(aA,function(){r.controller.abort()})}var Vl=null,Hf=0,oo=0,lo=null;function sA(r,s){if(Vl===null){var o=Vl=[];Hf=0,oo=Gm(),lo={status:"pending",value:void 0,then:function(c){o.push(c)}}}return Hf++,s.then(t0,t0),s}function t0(){if(--Hf===0&&Vl!==null){lo!==null&&(lo.status="fulfilled");var r=Vl;Vl=null,oo=0,lo=null;for(var s=0;s<r.length;s++)(0,r[s])()}}function iA(r,s){var o=[],c={status:"pending",value:null,reason:null,then:function(h){o.push(h)}};return r.then(function(){c.status="fulfilled",c.value=s;for(var h=0;h<o.length;h++)(0,o[h])(s)},function(h){for(c.status="rejected",c.reason=h,h=0;h<o.length;h++)(0,o[h])(void 0)}),c}var n0=J.S;J.S=function(r,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&sA(r,s),n0!==null&&n0(r,s)};var di=se(null);function $f(){var r=di.current;return r!==null?r:ht.pooledCache}function Hu(r,s){s===null?oe(di,di.current):oe(di,s.pool)}function r0(){var r=$f();return r===null?null:{parent:zt._currentValue,pool:r}}var Ul=Error(a(460)),a0=Error(a(474)),$u=Error(a(542)),Gf={then:function(){}};function s0(r){return r=r.status,r==="fulfilled"||r==="rejected"}function Gu(){}function i0(r,s,o){switch(o=r[o],o===void 0?r.push(s):o!==s&&(s.then(Gu,Gu),s=o),s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,l0(r),r;default:if(typeof s.status=="string")s.then(Gu,Gu);else{if(r=ht,r!==null&&100<r.shellSuspendCounter)throw Error(a(482));r=s,r.status="pending",r.then(function(c){if(s.status==="pending"){var h=s;h.status="fulfilled",h.value=c}},function(c){if(s.status==="pending"){var h=s;h.status="rejected",h.reason=c}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,l0(r),r}throw zl=s,Ul}}var zl=null;function o0(){if(zl===null)throw Error(a(459));var r=zl;return zl=null,r}function l0(r){if(r===Ul||r===$u)throw Error(a(483))}var Ya=!1;function Yf(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Kf(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Ka(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function Qa(r,s,o){var c=r.updateQueue;if(c===null)return null;if(c=c.shared,(nt&2)!==0){var h=c.pending;return h===null?s.next=s:(s.next=h.next,h.next=s),c.pending=s,s=Vu(r),Ky(r,null,o),s}return Lu(r,c,s,o),Vu(r)}function Bl(r,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194048)!==0)){var c=s.lanes;c&=r.pendingLanes,o|=c,s.lanes=o,pl(r,o)}}function Qf(r,s){var o=r.updateQueue,c=r.alternate;if(c!==null&&(c=c.updateQueue,o===c)){var h=null,g=null;if(o=o.firstBaseUpdate,o!==null){do{var x={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};g===null?h=g=x:g=g.next=x,o=o.next}while(o!==null);g===null?h=g=s:g=g.next=s}else h=g=s;o={baseState:c.baseState,firstBaseUpdate:h,lastBaseUpdate:g,shared:c.shared,callbacks:c.callbacks},r.updateQueue=o;return}r=o.lastBaseUpdate,r===null?o.firstBaseUpdate=s:r.next=s,o.lastBaseUpdate=s}var Wf=!1;function ql(){if(Wf){var r=lo;if(r!==null)throw r}}function Fl(r,s,o,c){Wf=!1;var h=r.updateQueue;Ya=!1;var g=h.firstBaseUpdate,x=h.lastBaseUpdate,w=h.shared.pending;if(w!==null){h.shared.pending=null;var D=w,G=D.next;D.next=null,x===null?g=G:x.next=G,x=D;var ee=r.alternate;ee!==null&&(ee=ee.updateQueue,w=ee.lastBaseUpdate,w!==x&&(w===null?ee.firstBaseUpdate=G:w.next=G,ee.lastBaseUpdate=D))}if(g!==null){var re=h.baseState;x=0,ee=G=D=null,w=g;do{var Y=w.lane&-536870913,K=Y!==w.lane;if(K?(Ke&Y)===Y:(c&Y)===Y){Y!==0&&Y===oo&&(Wf=!0),ee!==null&&(ee=ee.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var Re=r,Ae=w;Y=s;var lt=o;switch(Ae.tag){case 1:if(Re=Ae.payload,typeof Re=="function"){re=Re.call(lt,re,Y);break e}re=Re;break e;case 3:Re.flags=Re.flags&-65537|128;case 0:if(Re=Ae.payload,Y=typeof Re=="function"?Re.call(lt,re,Y):Re,Y==null)break e;re=v({},re,Y);break e;case 2:Ya=!0}}Y=w.callback,Y!==null&&(r.flags|=64,K&&(r.flags|=8192),K=h.callbacks,K===null?h.callbacks=[Y]:K.push(Y))}else K={lane:Y,tag:w.tag,payload:w.payload,callback:w.callback,next:null},ee===null?(G=ee=K,D=re):ee=ee.next=K,x|=Y;if(w=w.next,w===null){if(w=h.shared.pending,w===null)break;K=w,w=K.next,K.next=null,h.lastBaseUpdate=K,h.shared.pending=null}}while(!0);ee===null&&(D=re),h.baseState=D,h.firstBaseUpdate=G,h.lastBaseUpdate=ee,g===null&&(h.shared.lanes=0),rs|=x,r.lanes=x,r.memoizedState=re}}function c0(r,s){if(typeof r!="function")throw Error(a(191,r));r.call(s)}function u0(r,s){var o=r.callbacks;if(o!==null)for(r.callbacks=null,r=0;r<o.length;r++)c0(o[r],s)}var co=se(null),Yu=se(0);function d0(r,s){r=xa,oe(Yu,r),oe(co,s),xa=r|s.baseLanes}function Xf(){oe(Yu,xa),oe(co,co.current)}function Zf(){xa=Yu.current,he(co),he(Yu)}var Wa=0,Le=null,it=null,jt=null,Ku=!1,uo=!1,hi=!1,Qu=0,Hl=0,ho=null,oA=0;function Ct(){throw Error(a(321))}function Jf(r,s){if(s===null)return!1;for(var o=0;o<s.length&&o<r.length;o++)if(!Un(r[o],s[o]))return!1;return!0}function em(r,s,o,c,h,g){return Wa=g,Le=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,J.H=r===null||r.memoizedState===null?K0:Q0,hi=!1,g=o(c,h),hi=!1,uo&&(g=f0(s,o,c,h)),h0(r),g}function h0(r){J.H=td;var s=it!==null&&it.next!==null;if(Wa=0,jt=it=Le=null,Ku=!1,Hl=0,ho=null,s)throw Error(a(300));r===null||Yt||(r=r.dependencies,r!==null&&qu(r)&&(Yt=!0))}function f0(r,s,o,c){Le=r;var h=0;do{if(uo&&(ho=null),Hl=0,uo=!1,25<=h)throw Error(a(301));if(h+=1,jt=it=null,r.updateQueue!=null){var g=r.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}J.H=mA,g=s(o,c)}while(uo);return g}function lA(){var r=J.H,s=r.useState()[0];return s=typeof s.then=="function"?$l(s):s,r=r.useState()[0],(it!==null?it.memoizedState:null)!==r&&(Le.flags|=1024),s}function tm(){var r=Qu!==0;return Qu=0,r}function nm(r,s,o){s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~o}function rm(r){if(Ku){for(r=r.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Ku=!1}Wa=0,jt=it=Le=null,uo=!1,Hl=Qu=0,ho=null}function Cn(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return jt===null?Le.memoizedState=jt=r:jt=jt.next=r,jt}function Pt(){if(it===null){var r=Le.alternate;r=r!==null?r.memoizedState:null}else r=it.next;var s=jt===null?Le.memoizedState:jt.next;if(s!==null)jt=s,it=r;else{if(r===null)throw Le.alternate===null?Error(a(467)):Error(a(310));it=r,r={memoizedState:it.memoizedState,baseState:it.baseState,baseQueue:it.baseQueue,queue:it.queue,next:null},jt===null?Le.memoizedState=jt=r:jt=jt.next=r}return jt}function am(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function $l(r){var s=Hl;return Hl+=1,ho===null&&(ho=[]),r=i0(ho,r,s),s=Le,(jt===null?s.memoizedState:jt.next)===null&&(s=s.alternate,J.H=s===null||s.memoizedState===null?K0:Q0),r}function Wu(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return $l(r);if(r.$$typeof===q)return hn(r)}throw Error(a(438,String(r)))}function sm(r){var s=null,o=Le.updateQueue;if(o!==null&&(s=o.memoCache),s==null){var c=Le.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(s={data:c.data.map(function(h){return h.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),o===null&&(o=am(),Le.updateQueue=o),o.memoCache=s,o=s.data[s.index],o===void 0)for(o=s.data[s.index]=Array(r),c=0;c<r;c++)o[c]=j;return s.index++,o}function ga(r,s){return typeof s=="function"?s(r):s}function Xu(r){var s=Pt();return im(s,it,r)}function im(r,s,o){var c=r.queue;if(c===null)throw Error(a(311));c.lastRenderedReducer=o;var h=r.baseQueue,g=c.pending;if(g!==null){if(h!==null){var x=h.next;h.next=g.next,g.next=x}s.baseQueue=h=g,c.pending=null}if(g=r.baseState,h===null)r.memoizedState=g;else{s=h.next;var w=x=null,D=null,G=s,ee=!1;do{var re=G.lane&-536870913;if(re!==G.lane?(Ke&re)===re:(Wa&re)===re){var Y=G.revertLane;if(Y===0)D!==null&&(D=D.next={lane:0,revertLane:0,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),re===oo&&(ee=!0);else if((Wa&Y)===Y){G=G.next,Y===oo&&(ee=!0);continue}else re={lane:0,revertLane:G.revertLane,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},D===null?(w=D=re,x=g):D=D.next=re,Le.lanes|=Y,rs|=Y;re=G.action,hi&&o(g,re),g=G.hasEagerState?G.eagerState:o(g,re)}else Y={lane:re,revertLane:G.revertLane,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},D===null?(w=D=Y,x=g):D=D.next=Y,Le.lanes|=re,rs|=re;G=G.next}while(G!==null&&G!==s);if(D===null?x=g:D.next=w,!Un(g,r.memoizedState)&&(Yt=!0,ee&&(o=lo,o!==null)))throw o;r.memoizedState=g,r.baseState=x,r.baseQueue=D,c.lastRenderedState=g}return h===null&&(c.lanes=0),[r.memoizedState,c.dispatch]}function om(r){var s=Pt(),o=s.queue;if(o===null)throw Error(a(311));o.lastRenderedReducer=r;var c=o.dispatch,h=o.pending,g=s.memoizedState;if(h!==null){o.pending=null;var x=h=h.next;do g=r(g,x.action),x=x.next;while(x!==h);Un(g,s.memoizedState)||(Yt=!0),s.memoizedState=g,s.baseQueue===null&&(s.baseState=g),o.lastRenderedState=g}return[g,c]}function m0(r,s,o){var c=Le,h=Pt(),g=Xe;if(g){if(o===void 0)throw Error(a(407));o=o()}else o=s();var x=!Un((it||h).memoizedState,o);x&&(h.memoizedState=o,Yt=!0),h=h.queue;var w=y0.bind(null,c,h,r);if(Gl(2048,8,w,[r]),h.getSnapshot!==s||x||jt!==null&&jt.memoizedState.tag&1){if(c.flags|=2048,fo(9,Zu(),g0.bind(null,c,h,o,s),null),ht===null)throw Error(a(349));g||(Wa&124)!==0||p0(c,s,o)}return o}function p0(r,s,o){r.flags|=16384,r={getSnapshot:s,value:o},s=Le.updateQueue,s===null?(s=am(),Le.updateQueue=s,s.stores=[r]):(o=s.stores,o===null?s.stores=[r]:o.push(r))}function g0(r,s,o,c){s.value=o,s.getSnapshot=c,v0(s)&&_0(r)}function y0(r,s,o){return o(function(){v0(s)&&_0(r)})}function v0(r){var s=r.getSnapshot;r=r.value;try{var o=s();return!Un(r,o)}catch{return!0}}function _0(r){var s=ro(r,2);s!==null&&$n(s,r,2)}function lm(r){var s=Cn();if(typeof r=="function"){var o=r;if(r=o(),hi){Ln(!0);try{o()}finally{Ln(!1)}}}return s.memoizedState=s.baseState=r,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ga,lastRenderedState:r},s}function b0(r,s,o,c){return r.baseState=o,im(r,it,typeof c=="function"?c:ga)}function cA(r,s,o,c,h){if(ed(r))throw Error(a(485));if(r=s.action,r!==null){var g={payload:h,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(x){g.listeners.push(x)}};J.T!==null?o(!0):g.isTransition=!1,c(g),o=s.pending,o===null?(g.next=s.pending=g,E0(s,g)):(g.next=o.next,s.pending=o.next=g)}}function E0(r,s){var o=s.action,c=s.payload,h=r.state;if(s.isTransition){var g=J.T,x={};J.T=x;try{var w=o(h,c),D=J.S;D!==null&&D(x,w),x0(r,s,w)}catch(G){cm(r,s,G)}finally{J.T=g}}else try{g=o(h,c),x0(r,s,g)}catch(G){cm(r,s,G)}}function x0(r,s,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(c){T0(r,s,c)},function(c){return cm(r,s,c)}):T0(r,s,o)}function T0(r,s,o){s.status="fulfilled",s.value=o,w0(s),r.state=o,s=r.pending,s!==null&&(o=s.next,o===s?r.pending=null:(o=o.next,s.next=o,E0(r,o)))}function cm(r,s,o){var c=r.pending;if(r.pending=null,c!==null){c=c.next;do s.status="rejected",s.reason=o,w0(s),s=s.next;while(s!==c)}r.action=null}function w0(r){r=r.listeners;for(var s=0;s<r.length;s++)(0,r[s])()}function A0(r,s){return s}function S0(r,s){if(Xe){var o=ht.formState;if(o!==null){e:{var c=Le;if(Xe){if(At){t:{for(var h=At,g=Vr;h.nodeType!==8;){if(!g){h=null;break t}if(h=vr(h.nextSibling),h===null){h=null;break t}}g=h.data,h=g==="F!"||g==="F"?h:null}if(h){At=vr(h.nextSibling),c=h.data==="F!";break e}}li(c)}c=!1}c&&(s=o[0])}}return o=Cn(),o.memoizedState=o.baseState=s,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:A0,lastRenderedState:s},o.queue=c,o=$0.bind(null,Le,c),c.dispatch=o,c=lm(!1),g=mm.bind(null,Le,!1,c.queue),c=Cn(),h={state:s,dispatch:null,action:r,pending:null},c.queue=h,o=cA.bind(null,Le,h,g,o),h.dispatch=o,c.memoizedState=r,[s,o,!1]}function N0(r){var s=Pt();return C0(s,it,r)}function C0(r,s,o){if(s=im(r,s,A0)[0],r=Xu(ga)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var c=$l(s)}catch(x){throw x===Ul?$u:x}else c=s;s=Pt();var h=s.queue,g=h.dispatch;return o!==s.memoizedState&&(Le.flags|=2048,fo(9,Zu(),uA.bind(null,h,o),null)),[c,g,r]}function uA(r,s){r.action=s}function R0(r){var s=Pt(),o=it;if(o!==null)return C0(s,o,r);Pt(),s=s.memoizedState,o=Pt();var c=o.queue.dispatch;return o.memoizedState=r,[s,c,!1]}function fo(r,s,o,c){return r={tag:r,create:o,deps:c,inst:s,next:null},s=Le.updateQueue,s===null&&(s=am(),Le.updateQueue=s),o=s.lastEffect,o===null?s.lastEffect=r.next=r:(c=o.next,o.next=r,r.next=c,s.lastEffect=r),r}function Zu(){return{destroy:void 0,resource:void 0}}function I0(){return Pt().memoizedState}function Ju(r,s,o,c){var h=Cn();c=c===void 0?null:c,Le.flags|=r,h.memoizedState=fo(1|s,Zu(),o,c)}function Gl(r,s,o,c){var h=Pt();c=c===void 0?null:c;var g=h.memoizedState.inst;it!==null&&c!==null&&Jf(c,it.memoizedState.deps)?h.memoizedState=fo(s,g,o,c):(Le.flags|=r,h.memoizedState=fo(1|s,g,o,c))}function O0(r,s){Ju(8390656,8,r,s)}function D0(r,s){Gl(2048,8,r,s)}function j0(r,s){return Gl(4,2,r,s)}function P0(r,s){return Gl(4,4,r,s)}function M0(r,s){if(typeof s=="function"){r=r();var o=s(r);return function(){typeof o=="function"?o():s(null)}}if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function k0(r,s,o){o=o!=null?o.concat([r]):null,Gl(4,4,M0.bind(null,s,r),o)}function um(){}function L0(r,s){var o=Pt();s=s===void 0?null:s;var c=o.memoizedState;return s!==null&&Jf(s,c[1])?c[0]:(o.memoizedState=[r,s],r)}function V0(r,s){var o=Pt();s=s===void 0?null:s;var c=o.memoizedState;if(s!==null&&Jf(s,c[1]))return c[0];if(c=r(),hi){Ln(!0);try{r()}finally{Ln(!1)}}return o.memoizedState=[c,s],c}function dm(r,s,o){return o===void 0||(Wa&1073741824)!==0?r.memoizedState=s:(r.memoizedState=o,r=Bv(),Le.lanes|=r,rs|=r,o)}function U0(r,s,o,c){return Un(o,s)?o:co.current!==null?(r=dm(r,o,c),Un(r,s)||(Yt=!0),r):(Wa&42)===0?(Yt=!0,r.memoizedState=o):(r=Bv(),Le.lanes|=r,rs|=r,s)}function z0(r,s,o,c,h){var g=ue.p;ue.p=g!==0&&8>g?g:8;var x=J.T,w={};J.T=w,mm(r,!1,s,o);try{var D=h(),G=J.S;if(G!==null&&G(w,D),D!==null&&typeof D=="object"&&typeof D.then=="function"){var ee=iA(D,c);Yl(r,s,ee,Hn(r))}else Yl(r,s,c,Hn(r))}catch(re){Yl(r,s,{then:function(){},status:"rejected",reason:re},Hn())}finally{ue.p=g,J.T=x}}function dA(){}function hm(r,s,o,c){if(r.tag!==5)throw Error(a(476));var h=B0(r).queue;z0(r,h,s,ve,o===null?dA:function(){return q0(r),o(c)})}function B0(r){var s=r.memoizedState;if(s!==null)return s;s={memoizedState:ve,baseState:ve,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ga,lastRenderedState:ve},next:null};var o={};return s.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ga,lastRenderedState:o},next:null},r.memoizedState=s,r=r.alternate,r!==null&&(r.memoizedState=s),s}function q0(r){var s=B0(r).next.queue;Yl(r,s,{},Hn())}function fm(){return hn(dc)}function F0(){return Pt().memoizedState}function H0(){return Pt().memoizedState}function hA(r){for(var s=r.return;s!==null;){switch(s.tag){case 24:case 3:var o=Hn();r=Ka(o);var c=Qa(s,r,o);c!==null&&($n(c,s,o),Bl(c,s,o)),s={cache:Ff()},r.payload=s;return}s=s.return}}function fA(r,s,o){var c=Hn();o={lane:c,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},ed(r)?G0(s,o):(o=jf(r,s,o,c),o!==null&&($n(o,r,c),Y0(o,s,c)))}function $0(r,s,o){var c=Hn();Yl(r,s,o,c)}function Yl(r,s,o,c){var h={lane:c,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(ed(r))G0(s,h);else{var g=r.alternate;if(r.lanes===0&&(g===null||g.lanes===0)&&(g=s.lastRenderedReducer,g!==null))try{var x=s.lastRenderedState,w=g(x,o);if(h.hasEagerState=!0,h.eagerState=w,Un(w,x))return Lu(r,s,h,0),ht===null&&ku(),!1}catch{}finally{}if(o=jf(r,s,h,c),o!==null)return $n(o,r,c),Y0(o,s,c),!0}return!1}function mm(r,s,o,c){if(c={lane:2,revertLane:Gm(),action:c,hasEagerState:!1,eagerState:null,next:null},ed(r)){if(s)throw Error(a(479))}else s=jf(r,o,c,2),s!==null&&$n(s,r,2)}function ed(r){var s=r.alternate;return r===Le||s!==null&&s===Le}function G0(r,s){uo=Ku=!0;var o=r.pending;o===null?s.next=s:(s.next=o.next,o.next=s),r.pending=s}function Y0(r,s,o){if((o&4194048)!==0){var c=s.lanes;c&=r.pendingLanes,o|=c,s.lanes=o,pl(r,o)}}var td={readContext:hn,use:Wu,useCallback:Ct,useContext:Ct,useEffect:Ct,useImperativeHandle:Ct,useLayoutEffect:Ct,useInsertionEffect:Ct,useMemo:Ct,useReducer:Ct,useRef:Ct,useState:Ct,useDebugValue:Ct,useDeferredValue:Ct,useTransition:Ct,useSyncExternalStore:Ct,useId:Ct,useHostTransitionStatus:Ct,useFormState:Ct,useActionState:Ct,useOptimistic:Ct,useMemoCache:Ct,useCacheRefresh:Ct},K0={readContext:hn,use:Wu,useCallback:function(r,s){return Cn().memoizedState=[r,s===void 0?null:s],r},useContext:hn,useEffect:O0,useImperativeHandle:function(r,s,o){o=o!=null?o.concat([r]):null,Ju(4194308,4,M0.bind(null,s,r),o)},useLayoutEffect:function(r,s){return Ju(4194308,4,r,s)},useInsertionEffect:function(r,s){Ju(4,2,r,s)},useMemo:function(r,s){var o=Cn();s=s===void 0?null:s;var c=r();if(hi){Ln(!0);try{r()}finally{Ln(!1)}}return o.memoizedState=[c,s],c},useReducer:function(r,s,o){var c=Cn();if(o!==void 0){var h=o(s);if(hi){Ln(!0);try{o(s)}finally{Ln(!1)}}}else h=s;return c.memoizedState=c.baseState=h,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:h},c.queue=r,r=r.dispatch=fA.bind(null,Le,r),[c.memoizedState,r]},useRef:function(r){var s=Cn();return r={current:r},s.memoizedState=r},useState:function(r){r=lm(r);var s=r.queue,o=$0.bind(null,Le,s);return s.dispatch=o,[r.memoizedState,o]},useDebugValue:um,useDeferredValue:function(r,s){var o=Cn();return dm(o,r,s)},useTransition:function(){var r=lm(!1);return r=z0.bind(null,Le,r.queue,!0,!1),Cn().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,s,o){var c=Le,h=Cn();if(Xe){if(o===void 0)throw Error(a(407));o=o()}else{if(o=s(),ht===null)throw Error(a(349));(Ke&124)!==0||p0(c,s,o)}h.memoizedState=o;var g={value:o,getSnapshot:s};return h.queue=g,O0(y0.bind(null,c,g,r),[r]),c.flags|=2048,fo(9,Zu(),g0.bind(null,c,g,o,s),null),o},useId:function(){var r=Cn(),s=ht.identifierPrefix;if(Xe){var o=fa,c=ha;o=(c&~(1<<32-dn(c)-1)).toString(32)+o,s="«"+s+"R"+o,o=Qu++,0<o&&(s+="H"+o.toString(32)),s+="»"}else o=oA++,s="«"+s+"r"+o.toString(32)+"»";return r.memoizedState=s},useHostTransitionStatus:fm,useFormState:S0,useActionState:S0,useOptimistic:function(r){var s=Cn();s.memoizedState=s.baseState=r;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=o,s=mm.bind(null,Le,!0,o),o.dispatch=s,[r,s]},useMemoCache:sm,useCacheRefresh:function(){return Cn().memoizedState=hA.bind(null,Le)}},Q0={readContext:hn,use:Wu,useCallback:L0,useContext:hn,useEffect:D0,useImperativeHandle:k0,useInsertionEffect:j0,useLayoutEffect:P0,useMemo:V0,useReducer:Xu,useRef:I0,useState:function(){return Xu(ga)},useDebugValue:um,useDeferredValue:function(r,s){var o=Pt();return U0(o,it.memoizedState,r,s)},useTransition:function(){var r=Xu(ga)[0],s=Pt().memoizedState;return[typeof r=="boolean"?r:$l(r),s]},useSyncExternalStore:m0,useId:F0,useHostTransitionStatus:fm,useFormState:N0,useActionState:N0,useOptimistic:function(r,s){var o=Pt();return b0(o,it,r,s)},useMemoCache:sm,useCacheRefresh:H0},mA={readContext:hn,use:Wu,useCallback:L0,useContext:hn,useEffect:D0,useImperativeHandle:k0,useInsertionEffect:j0,useLayoutEffect:P0,useMemo:V0,useReducer:om,useRef:I0,useState:function(){return om(ga)},useDebugValue:um,useDeferredValue:function(r,s){var o=Pt();return it===null?dm(o,r,s):U0(o,it.memoizedState,r,s)},useTransition:function(){var r=om(ga)[0],s=Pt().memoizedState;return[typeof r=="boolean"?r:$l(r),s]},useSyncExternalStore:m0,useId:F0,useHostTransitionStatus:fm,useFormState:R0,useActionState:R0,useOptimistic:function(r,s){var o=Pt();return it!==null?b0(o,it,r,s):(o.baseState=r,[r,o.queue.dispatch])},useMemoCache:sm,useCacheRefresh:H0},mo=null,Kl=0;function nd(r){var s=Kl;return Kl+=1,mo===null&&(mo=[]),i0(mo,r,s)}function Ql(r,s){s=s.props.ref,r.ref=s!==void 0?s:null}function rd(r,s){throw s.$$typeof===b?Error(a(525)):(r=Object.prototype.toString.call(s),Error(a(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r)))}function W0(r){var s=r._init;return s(r._payload)}function X0(r){function s(B,U){if(r){var $=B.deletions;$===null?(B.deletions=[U],B.flags|=16):$.push(U)}}function o(B,U){if(!r)return null;for(;U!==null;)s(B,U),U=U.sibling;return null}function c(B){for(var U=new Map;B!==null;)B.key!==null?U.set(B.key,B):U.set(B.index,B),B=B.sibling;return U}function h(B,U){return B=da(B,U),B.index=0,B.sibling=null,B}function g(B,U,$){return B.index=$,r?($=B.alternate,$!==null?($=$.index,$<U?(B.flags|=67108866,U):$):(B.flags|=67108866,U)):(B.flags|=1048576,U)}function x(B){return r&&B.alternate===null&&(B.flags|=67108866),B}function w(B,U,$,te){return U===null||U.tag!==6?(U=Mf($,B.mode,te),U.return=B,U):(U=h(U,$),U.return=B,U)}function D(B,U,$,te){var ge=$.type;return ge===A?ee(B,U,$.props.children,te,$.key):U!==null&&(U.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===R&&W0(ge)===U.type)?(U=h(U,$.props),Ql(U,$),U.return=B,U):(U=Uu($.type,$.key,$.props,null,B.mode,te),Ql(U,$),U.return=B,U)}function G(B,U,$,te){return U===null||U.tag!==4||U.stateNode.containerInfo!==$.containerInfo||U.stateNode.implementation!==$.implementation?(U=kf($,B.mode,te),U.return=B,U):(U=h(U,$.children||[]),U.return=B,U)}function ee(B,U,$,te,ge){return U===null||U.tag!==7?(U=ai($,B.mode,te,ge),U.return=B,U):(U=h(U,$),U.return=B,U)}function re(B,U,$){if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return U=Mf(""+U,B.mode,$),U.return=B,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case T:return $=Uu(U.type,U.key,U.props,null,B.mode,$),Ql($,U),$.return=B,$;case C:return U=kf(U,B.mode,$),U.return=B,U;case R:var te=U._init;return U=te(U._payload),re(B,U,$)}if(Me(U)||z(U))return U=ai(U,B.mode,$,null),U.return=B,U;if(typeof U.then=="function")return re(B,nd(U),$);if(U.$$typeof===q)return re(B,Fu(B,U),$);rd(B,U)}return null}function Y(B,U,$,te){var ge=U!==null?U.key:null;if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return ge!==null?null:w(B,U,""+$,te);if(typeof $=="object"&&$!==null){switch($.$$typeof){case T:return $.key===ge?D(B,U,$,te):null;case C:return $.key===ge?G(B,U,$,te):null;case R:return ge=$._init,$=ge($._payload),Y(B,U,$,te)}if(Me($)||z($))return ge!==null?null:ee(B,U,$,te,null);if(typeof $.then=="function")return Y(B,U,nd($),te);if($.$$typeof===q)return Y(B,U,Fu(B,$),te);rd(B,$)}return null}function K(B,U,$,te,ge){if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return B=B.get($)||null,w(U,B,""+te,ge);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case T:return B=B.get(te.key===null?$:te.key)||null,D(U,B,te,ge);case C:return B=B.get(te.key===null?$:te.key)||null,G(U,B,te,ge);case R:var Ue=te._init;return te=Ue(te._payload),K(B,U,$,te,ge)}if(Me(te)||z(te))return B=B.get($)||null,ee(U,B,te,ge,null);if(typeof te.then=="function")return K(B,U,$,nd(te),ge);if(te.$$typeof===q)return K(B,U,$,Fu(U,te),ge);rd(U,te)}return null}function Re(B,U,$,te){for(var ge=null,Ue=null,Ee=U,Se=U=0,Qt=null;Ee!==null&&Se<$.length;Se++){Ee.index>Se?(Qt=Ee,Ee=null):Qt=Ee.sibling;var We=Y(B,Ee,$[Se],te);if(We===null){Ee===null&&(Ee=Qt);break}r&&Ee&&We.alternate===null&&s(B,Ee),U=g(We,U,Se),Ue===null?ge=We:Ue.sibling=We,Ue=We,Ee=Qt}if(Se===$.length)return o(B,Ee),Xe&&ii(B,Se),ge;if(Ee===null){for(;Se<$.length;Se++)Ee=re(B,$[Se],te),Ee!==null&&(U=g(Ee,U,Se),Ue===null?ge=Ee:Ue.sibling=Ee,Ue=Ee);return Xe&&ii(B,Se),ge}for(Ee=c(Ee);Se<$.length;Se++)Qt=K(Ee,B,Se,$[Se],te),Qt!==null&&(r&&Qt.alternate!==null&&Ee.delete(Qt.key===null?Se:Qt.key),U=g(Qt,U,Se),Ue===null?ge=Qt:Ue.sibling=Qt,Ue=Qt);return r&&Ee.forEach(function(hs){return s(B,hs)}),Xe&&ii(B,Se),ge}function Ae(B,U,$,te){if($==null)throw Error(a(151));for(var ge=null,Ue=null,Ee=U,Se=U=0,Qt=null,We=$.next();Ee!==null&&!We.done;Se++,We=$.next()){Ee.index>Se?(Qt=Ee,Ee=null):Qt=Ee.sibling;var hs=Y(B,Ee,We.value,te);if(hs===null){Ee===null&&(Ee=Qt);break}r&&Ee&&hs.alternate===null&&s(B,Ee),U=g(hs,U,Se),Ue===null?ge=hs:Ue.sibling=hs,Ue=hs,Ee=Qt}if(We.done)return o(B,Ee),Xe&&ii(B,Se),ge;if(Ee===null){for(;!We.done;Se++,We=$.next())We=re(B,We.value,te),We!==null&&(U=g(We,U,Se),Ue===null?ge=We:Ue.sibling=We,Ue=We);return Xe&&ii(B,Se),ge}for(Ee=c(Ee);!We.done;Se++,We=$.next())We=K(Ee,B,Se,We.value,te),We!==null&&(r&&We.alternate!==null&&Ee.delete(We.key===null?Se:We.key),U=g(We,U,Se),Ue===null?ge=We:Ue.sibling=We,Ue=We);return r&&Ee.forEach(function(pS){return s(B,pS)}),Xe&&ii(B,Se),ge}function lt(B,U,$,te){if(typeof $=="object"&&$!==null&&$.type===A&&$.key===null&&($=$.props.children),typeof $=="object"&&$!==null){switch($.$$typeof){case T:e:{for(var ge=$.key;U!==null;){if(U.key===ge){if(ge=$.type,ge===A){if(U.tag===7){o(B,U.sibling),te=h(U,$.props.children),te.return=B,B=te;break e}}else if(U.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===R&&W0(ge)===U.type){o(B,U.sibling),te=h(U,$.props),Ql(te,$),te.return=B,B=te;break e}o(B,U);break}else s(B,U);U=U.sibling}$.type===A?(te=ai($.props.children,B.mode,te,$.key),te.return=B,B=te):(te=Uu($.type,$.key,$.props,null,B.mode,te),Ql(te,$),te.return=B,B=te)}return x(B);case C:e:{for(ge=$.key;U!==null;){if(U.key===ge)if(U.tag===4&&U.stateNode.containerInfo===$.containerInfo&&U.stateNode.implementation===$.implementation){o(B,U.sibling),te=h(U,$.children||[]),te.return=B,B=te;break e}else{o(B,U);break}else s(B,U);U=U.sibling}te=kf($,B.mode,te),te.return=B,B=te}return x(B);case R:return ge=$._init,$=ge($._payload),lt(B,U,$,te)}if(Me($))return Re(B,U,$,te);if(z($)){if(ge=z($),typeof ge!="function")throw Error(a(150));return $=ge.call($),Ae(B,U,$,te)}if(typeof $.then=="function")return lt(B,U,nd($),te);if($.$$typeof===q)return lt(B,U,Fu(B,$),te);rd(B,$)}return typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint"?($=""+$,U!==null&&U.tag===6?(o(B,U.sibling),te=h(U,$),te.return=B,B=te):(o(B,U),te=Mf($,B.mode,te),te.return=B,B=te),x(B)):o(B,U)}return function(B,U,$,te){try{Kl=0;var ge=lt(B,U,$,te);return mo=null,ge}catch(Ee){if(Ee===Ul||Ee===$u)throw Ee;var Ue=zn(29,Ee,null,B.mode);return Ue.lanes=te,Ue.return=B,Ue}finally{}}}var po=X0(!0),Z0=X0(!1),sr=se(null),Ur=null;function Xa(r){var s=r.alternate;oe(Bt,Bt.current&1),oe(sr,r),Ur===null&&(s===null||co.current!==null||s.memoizedState!==null)&&(Ur=r)}function J0(r){if(r.tag===22){if(oe(Bt,Bt.current),oe(sr,r),Ur===null){var s=r.alternate;s!==null&&s.memoizedState!==null&&(Ur=r)}}else Za()}function Za(){oe(Bt,Bt.current),oe(sr,sr.current)}function ya(r){he(sr),Ur===r&&(Ur=null),he(Bt)}var Bt=se(0);function ad(r){for(var s=r;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||ap(o)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function pm(r,s,o,c){s=r.memoizedState,o=o(c,s),o=o==null?s:v({},s,o),r.memoizedState=o,r.lanes===0&&(r.updateQueue.baseState=o)}var gm={enqueueSetState:function(r,s,o){r=r._reactInternals;var c=Hn(),h=Ka(c);h.payload=s,o!=null&&(h.callback=o),s=Qa(r,h,c),s!==null&&($n(s,r,c),Bl(s,r,c))},enqueueReplaceState:function(r,s,o){r=r._reactInternals;var c=Hn(),h=Ka(c);h.tag=1,h.payload=s,o!=null&&(h.callback=o),s=Qa(r,h,c),s!==null&&($n(s,r,c),Bl(s,r,c))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var o=Hn(),c=Ka(o);c.tag=2,s!=null&&(c.callback=s),s=Qa(r,c,o),s!==null&&($n(s,r,o),Bl(s,r,o))}};function ev(r,s,o,c,h,g,x){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(c,g,x):s.prototype&&s.prototype.isPureReactComponent?!Ol(o,c)||!Ol(h,g):!0}function tv(r,s,o,c){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,c),s.state!==r&&gm.enqueueReplaceState(s,s.state,null)}function fi(r,s){var o=s;if("ref"in s){o={};for(var c in s)c!=="ref"&&(o[c]=s[c])}if(r=r.defaultProps){o===s&&(o=v({},o));for(var h in r)o[h]===void 0&&(o[h]=r[h])}return o}var sd=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)};function nv(r){sd(r)}function rv(r){console.error(r)}function av(r){sd(r)}function id(r,s){try{var o=r.onUncaughtError;o(s.value,{componentStack:s.stack})}catch(c){setTimeout(function(){throw c})}}function sv(r,s,o){try{var c=r.onCaughtError;c(o.value,{componentStack:o.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function ym(r,s,o){return o=Ka(o),o.tag=3,o.payload={element:null},o.callback=function(){id(r,s)},o}function iv(r){return r=Ka(r),r.tag=3,r}function ov(r,s,o,c){var h=o.type.getDerivedStateFromError;if(typeof h=="function"){var g=c.value;r.payload=function(){return h(g)},r.callback=function(){sv(s,o,c)}}var x=o.stateNode;x!==null&&typeof x.componentDidCatch=="function"&&(r.callback=function(){sv(s,o,c),typeof h!="function"&&(as===null?as=new Set([this]):as.add(this));var w=c.stack;this.componentDidCatch(c.value,{componentStack:w!==null?w:""})})}function pA(r,s,o,c,h){if(o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(s=o.alternate,s!==null&&kl(s,o,h,!0),o=sr.current,o!==null){switch(o.tag){case 13:return Ur===null?Bm():o.alternate===null&&St===0&&(St=3),o.flags&=-257,o.flags|=65536,o.lanes=h,c===Gf?o.flags|=16384:(s=o.updateQueue,s===null?o.updateQueue=new Set([c]):s.add(c),Fm(r,c,h)),!1;case 22:return o.flags|=65536,c===Gf?o.flags|=16384:(s=o.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([c])},o.updateQueue=s):(o=s.retryQueue,o===null?s.retryQueue=new Set([c]):o.add(c)),Fm(r,c,h)),!1}throw Error(a(435,o.tag))}return Fm(r,c,h),Bm(),!1}if(Xe)return s=sr.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=h,c!==Uf&&(r=Error(a(422),{cause:c}),Ml(tr(r,o)))):(c!==Uf&&(s=Error(a(423),{cause:c}),Ml(tr(s,o))),r=r.current.alternate,r.flags|=65536,h&=-h,r.lanes|=h,c=tr(c,o),h=ym(r.stateNode,c,h),Qf(r,h),St!==4&&(St=2)),!1;var g=Error(a(520),{cause:c});if(g=tr(g,o),nc===null?nc=[g]:nc.push(g),St!==4&&(St=2),s===null)return!0;c=tr(c,o),o=s;do{switch(o.tag){case 3:return o.flags|=65536,r=h&-h,o.lanes|=r,r=ym(o.stateNode,c,r),Qf(o,r),!1;case 1:if(s=o.type,g=o.stateNode,(o.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(as===null||!as.has(g))))return o.flags|=65536,h&=-h,o.lanes|=h,h=iv(h),ov(h,r,o,c),Qf(o,h),!1}o=o.return}while(o!==null);return!1}var lv=Error(a(461)),Yt=!1;function nn(r,s,o,c){s.child=r===null?Z0(s,null,o,c):po(s,r.child,o,c)}function cv(r,s,o,c,h){o=o.render;var g=s.ref;if("ref"in c){var x={};for(var w in c)w!=="ref"&&(x[w]=c[w])}else x=c;return ui(s),c=em(r,s,o,x,g,h),w=tm(),r!==null&&!Yt?(nm(r,s,h),va(r,s,h)):(Xe&&w&&Lf(s),s.flags|=1,nn(r,s,c,h),s.child)}function uv(r,s,o,c,h){if(r===null){var g=o.type;return typeof g=="function"&&!Pf(g)&&g.defaultProps===void 0&&o.compare===null?(s.tag=15,s.type=g,dv(r,s,g,c,h)):(r=Uu(o.type,null,c,s,s.mode,h),r.ref=s.ref,r.return=s,s.child=r)}if(g=r.child,!Am(r,h)){var x=g.memoizedProps;if(o=o.compare,o=o!==null?o:Ol,o(x,c)&&r.ref===s.ref)return va(r,s,h)}return s.flags|=1,r=da(g,c),r.ref=s.ref,r.return=s,s.child=r}function dv(r,s,o,c,h){if(r!==null){var g=r.memoizedProps;if(Ol(g,c)&&r.ref===s.ref)if(Yt=!1,s.pendingProps=c=g,Am(r,h))(r.flags&131072)!==0&&(Yt=!0);else return s.lanes=r.lanes,va(r,s,h)}return vm(r,s,o,c,h)}function hv(r,s,o){var c=s.pendingProps,h=c.children,g=r!==null?r.memoizedState:null;if(c.mode==="hidden"){if((s.flags&128)!==0){if(c=g!==null?g.baseLanes|o:o,r!==null){for(h=s.child=r.child,g=0;h!==null;)g=g|h.lanes|h.childLanes,h=h.sibling;s.childLanes=g&~c}else s.childLanes=0,s.child=null;return fv(r,s,c,o)}if((o&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},r!==null&&Hu(s,g!==null?g.cachePool:null),g!==null?d0(s,g):Xf(),J0(s);else return s.lanes=s.childLanes=536870912,fv(r,s,g!==null?g.baseLanes|o:o,o)}else g!==null?(Hu(s,g.cachePool),d0(s,g),Za(),s.memoizedState=null):(r!==null&&Hu(s,null),Xf(),Za());return nn(r,s,h,o),s.child}function fv(r,s,o,c){var h=$f();return h=h===null?null:{parent:zt._currentValue,pool:h},s.memoizedState={baseLanes:o,cachePool:h},r!==null&&Hu(s,null),Xf(),J0(s),r!==null&&kl(r,s,c,!0),null}function od(r,s){var o=s.ref;if(o===null)r!==null&&r.ref!==null&&(s.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(a(284));(r===null||r.ref!==o)&&(s.flags|=4194816)}}function vm(r,s,o,c,h){return ui(s),o=em(r,s,o,c,void 0,h),c=tm(),r!==null&&!Yt?(nm(r,s,h),va(r,s,h)):(Xe&&c&&Lf(s),s.flags|=1,nn(r,s,o,h),s.child)}function mv(r,s,o,c,h,g){return ui(s),s.updateQueue=null,o=f0(s,c,o,h),h0(r),c=tm(),r!==null&&!Yt?(nm(r,s,g),va(r,s,g)):(Xe&&c&&Lf(s),s.flags|=1,nn(r,s,o,g),s.child)}function pv(r,s,o,c,h){if(ui(s),s.stateNode===null){var g=ao,x=o.contextType;typeof x=="object"&&x!==null&&(g=hn(x)),g=new o(c,g),s.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=gm,s.stateNode=g,g._reactInternals=s,g=s.stateNode,g.props=c,g.state=s.memoizedState,g.refs={},Yf(s),x=o.contextType,g.context=typeof x=="object"&&x!==null?hn(x):ao,g.state=s.memoizedState,x=o.getDerivedStateFromProps,typeof x=="function"&&(pm(s,o,x,c),g.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(x=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),x!==g.state&&gm.enqueueReplaceState(g,g.state,null),Fl(s,c,g,h),ql(),g.state=s.memoizedState),typeof g.componentDidMount=="function"&&(s.flags|=4194308),c=!0}else if(r===null){g=s.stateNode;var w=s.memoizedProps,D=fi(o,w);g.props=D;var G=g.context,ee=o.contextType;x=ao,typeof ee=="object"&&ee!==null&&(x=hn(ee));var re=o.getDerivedStateFromProps;ee=typeof re=="function"||typeof g.getSnapshotBeforeUpdate=="function",w=s.pendingProps!==w,ee||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(w||G!==x)&&tv(s,g,c,x),Ya=!1;var Y=s.memoizedState;g.state=Y,Fl(s,c,g,h),ql(),G=s.memoizedState,w||Y!==G||Ya?(typeof re=="function"&&(pm(s,o,re,c),G=s.memoizedState),(D=Ya||ev(s,o,D,c,Y,G,x))?(ee||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(s.flags|=4194308)):(typeof g.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=G),g.props=c,g.state=G,g.context=x,c=D):(typeof g.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{g=s.stateNode,Kf(r,s),x=s.memoizedProps,ee=fi(o,x),g.props=ee,re=s.pendingProps,Y=g.context,G=o.contextType,D=ao,typeof G=="object"&&G!==null&&(D=hn(G)),w=o.getDerivedStateFromProps,(G=typeof w=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(x!==re||Y!==D)&&tv(s,g,c,D),Ya=!1,Y=s.memoizedState,g.state=Y,Fl(s,c,g,h),ql();var K=s.memoizedState;x!==re||Y!==K||Ya||r!==null&&r.dependencies!==null&&qu(r.dependencies)?(typeof w=="function"&&(pm(s,o,w,c),K=s.memoizedState),(ee=Ya||ev(s,o,ee,c,Y,K,D)||r!==null&&r.dependencies!==null&&qu(r.dependencies))?(G||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(c,K,D),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(c,K,D)),typeof g.componentDidUpdate=="function"&&(s.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof g.componentDidUpdate!="function"||x===r.memoizedProps&&Y===r.memoizedState||(s.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||x===r.memoizedProps&&Y===r.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=K),g.props=c,g.state=K,g.context=D,c=ee):(typeof g.componentDidUpdate!="function"||x===r.memoizedProps&&Y===r.memoizedState||(s.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||x===r.memoizedProps&&Y===r.memoizedState||(s.flags|=1024),c=!1)}return g=c,od(r,s),c=(s.flags&128)!==0,g||c?(g=s.stateNode,o=c&&typeof o.getDerivedStateFromError!="function"?null:g.render(),s.flags|=1,r!==null&&c?(s.child=po(s,r.child,null,h),s.child=po(s,null,o,h)):nn(r,s,o,h),s.memoizedState=g.state,r=s.child):r=va(r,s,h),r}function gv(r,s,o,c){return Pl(),s.flags|=256,nn(r,s,o,c),s.child}var _m={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function bm(r){return{baseLanes:r,cachePool:r0()}}function Em(r,s,o){return r=r!==null?r.childLanes&~o:0,s&&(r|=ir),r}function yv(r,s,o){var c=s.pendingProps,h=!1,g=(s.flags&128)!==0,x;if((x=g)||(x=r!==null&&r.memoizedState===null?!1:(Bt.current&2)!==0),x&&(h=!0,s.flags&=-129),x=(s.flags&32)!==0,s.flags&=-33,r===null){if(Xe){if(h?Xa(s):Za(),Xe){var w=At,D;if(D=w){e:{for(D=w,w=Vr;D.nodeType!==8;){if(!w){w=null;break e}if(D=vr(D.nextSibling),D===null){w=null;break e}}w=D}w!==null?(s.memoizedState={dehydrated:w,treeContext:si!==null?{id:ha,overflow:fa}:null,retryLane:536870912,hydrationErrors:null},D=zn(18,null,null,0),D.stateNode=w,D.return=s,s.child=D,xn=s,At=null,D=!0):D=!1}D||li(s)}if(w=s.memoizedState,w!==null&&(w=w.dehydrated,w!==null))return ap(w)?s.lanes=32:s.lanes=536870912,null;ya(s)}return w=c.children,c=c.fallback,h?(Za(),h=s.mode,w=ld({mode:"hidden",children:w},h),c=ai(c,h,o,null),w.return=s,c.return=s,w.sibling=c,s.child=w,h=s.child,h.memoizedState=bm(o),h.childLanes=Em(r,x,o),s.memoizedState=_m,c):(Xa(s),xm(s,w))}if(D=r.memoizedState,D!==null&&(w=D.dehydrated,w!==null)){if(g)s.flags&256?(Xa(s),s.flags&=-257,s=Tm(r,s,o)):s.memoizedState!==null?(Za(),s.child=r.child,s.flags|=128,s=null):(Za(),h=c.fallback,w=s.mode,c=ld({mode:"visible",children:c.children},w),h=ai(h,w,o,null),h.flags|=2,c.return=s,h.return=s,c.sibling=h,s.child=c,po(s,r.child,null,o),c=s.child,c.memoizedState=bm(o),c.childLanes=Em(r,x,o),s.memoizedState=_m,s=h);else if(Xa(s),ap(w)){if(x=w.nextSibling&&w.nextSibling.dataset,x)var G=x.dgst;x=G,c=Error(a(419)),c.stack="",c.digest=x,Ml({value:c,source:null,stack:null}),s=Tm(r,s,o)}else if(Yt||kl(r,s,o,!1),x=(o&r.childLanes)!==0,Yt||x){if(x=ht,x!==null&&(c=o&-o,c=(c&42)!==0?1:Ua(c),c=(c&(x.suspendedLanes|o))!==0?0:c,c!==0&&c!==D.retryLane))throw D.retryLane=c,ro(r,c),$n(x,r,c),lv;w.data==="$?"||Bm(),s=Tm(r,s,o)}else w.data==="$?"?(s.flags|=192,s.child=r.child,s=null):(r=D.treeContext,At=vr(w.nextSibling),xn=s,Xe=!0,oi=null,Vr=!1,r!==null&&(rr[ar++]=ha,rr[ar++]=fa,rr[ar++]=si,ha=r.id,fa=r.overflow,si=s),s=xm(s,c.children),s.flags|=4096);return s}return h?(Za(),h=c.fallback,w=s.mode,D=r.child,G=D.sibling,c=da(D,{mode:"hidden",children:c.children}),c.subtreeFlags=D.subtreeFlags&65011712,G!==null?h=da(G,h):(h=ai(h,w,o,null),h.flags|=2),h.return=s,c.return=s,c.sibling=h,s.child=c,c=h,h=s.child,w=r.child.memoizedState,w===null?w=bm(o):(D=w.cachePool,D!==null?(G=zt._currentValue,D=D.parent!==G?{parent:G,pool:G}:D):D=r0(),w={baseLanes:w.baseLanes|o,cachePool:D}),h.memoizedState=w,h.childLanes=Em(r,x,o),s.memoizedState=_m,c):(Xa(s),o=r.child,r=o.sibling,o=da(o,{mode:"visible",children:c.children}),o.return=s,o.sibling=null,r!==null&&(x=s.deletions,x===null?(s.deletions=[r],s.flags|=16):x.push(r)),s.child=o,s.memoizedState=null,o)}function xm(r,s){return s=ld({mode:"visible",children:s},r.mode),s.return=r,r.child=s}function ld(r,s){return r=zn(22,r,null,s),r.lanes=0,r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},r}function Tm(r,s,o){return po(s,r.child,null,o),r=xm(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function vv(r,s,o){r.lanes|=s;var c=r.alternate;c!==null&&(c.lanes|=s),Bf(r.return,s,o)}function wm(r,s,o,c,h){var g=r.memoizedState;g===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:o,tailMode:h}:(g.isBackwards=s,g.rendering=null,g.renderingStartTime=0,g.last=c,g.tail=o,g.tailMode=h)}function _v(r,s,o){var c=s.pendingProps,h=c.revealOrder,g=c.tail;if(nn(r,s,c.children,o),c=Bt.current,(c&2)!==0)c=c&1|2,s.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&vv(r,o,s);else if(r.tag===19)vv(r,o,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}c&=1}switch(oe(Bt,c),h){case"forwards":for(o=s.child,h=null;o!==null;)r=o.alternate,r!==null&&ad(r)===null&&(h=o),o=o.sibling;o=h,o===null?(h=s.child,s.child=null):(h=o.sibling,o.sibling=null),wm(s,!1,h,o,g);break;case"backwards":for(o=null,h=s.child,s.child=null;h!==null;){if(r=h.alternate,r!==null&&ad(r)===null){s.child=h;break}r=h.sibling,h.sibling=o,o=h,h=r}wm(s,!0,o,null,g);break;case"together":wm(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function va(r,s,o){if(r!==null&&(s.dependencies=r.dependencies),rs|=s.lanes,(o&s.childLanes)===0)if(r!==null){if(kl(r,s,o,!1),(o&s.childLanes)===0)return null}else return null;if(r!==null&&s.child!==r.child)throw Error(a(153));if(s.child!==null){for(r=s.child,o=da(r,r.pendingProps),s.child=o,o.return=s;r.sibling!==null;)r=r.sibling,o=o.sibling=da(r,r.pendingProps),o.return=s;o.sibling=null}return s.child}function Am(r,s){return(r.lanes&s)!==0?!0:(r=r.dependencies,!!(r!==null&&qu(r)))}function gA(r,s,o){switch(s.tag){case 3:Ze(s,s.stateNode.containerInfo),Ga(s,zt,r.memoizedState.cache),Pl();break;case 27:case 5:Yn(s);break;case 4:Ze(s,s.stateNode.containerInfo);break;case 10:Ga(s,s.type,s.memoizedProps.value);break;case 13:var c=s.memoizedState;if(c!==null)return c.dehydrated!==null?(Xa(s),s.flags|=128,null):(o&s.child.childLanes)!==0?yv(r,s,o):(Xa(s),r=va(r,s,o),r!==null?r.sibling:null);Xa(s);break;case 19:var h=(r.flags&128)!==0;if(c=(o&s.childLanes)!==0,c||(kl(r,s,o,!1),c=(o&s.childLanes)!==0),h){if(c)return _v(r,s,o);s.flags|=128}if(h=s.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),oe(Bt,Bt.current),c)break;return null;case 22:case 23:return s.lanes=0,hv(r,s,o);case 24:Ga(s,zt,r.memoizedState.cache)}return va(r,s,o)}function bv(r,s,o){if(r!==null)if(r.memoizedProps!==s.pendingProps)Yt=!0;else{if(!Am(r,o)&&(s.flags&128)===0)return Yt=!1,gA(r,s,o);Yt=(r.flags&131072)!==0}else Yt=!1,Xe&&(s.flags&1048576)!==0&&Wy(s,Bu,s.index);switch(s.lanes=0,s.tag){case 16:e:{r=s.pendingProps;var c=s.elementType,h=c._init;if(c=h(c._payload),s.type=c,typeof c=="function")Pf(c)?(r=fi(c,r),s.tag=1,s=pv(null,s,c,r,o)):(s.tag=0,s=vm(null,s,c,r,o));else{if(c!=null){if(h=c.$$typeof,h===ie){s.tag=11,s=cv(null,s,c,r,o);break e}else if(h===k){s.tag=14,s=uv(null,s,c,r,o);break e}}throw s=dt(c)||c,Error(a(306,s,""))}}return s;case 0:return vm(r,s,s.type,s.pendingProps,o);case 1:return c=s.type,h=fi(c,s.pendingProps),pv(r,s,c,h,o);case 3:e:{if(Ze(s,s.stateNode.containerInfo),r===null)throw Error(a(387));c=s.pendingProps;var g=s.memoizedState;h=g.element,Kf(r,s),Fl(s,c,null,o);var x=s.memoizedState;if(c=x.cache,Ga(s,zt,c),c!==g.cache&&qf(s,[zt],o,!0),ql(),c=x.element,g.isDehydrated)if(g={element:c,isDehydrated:!1,cache:x.cache},s.updateQueue.baseState=g,s.memoizedState=g,s.flags&256){s=gv(r,s,c,o);break e}else if(c!==h){h=tr(Error(a(424)),s),Ml(h),s=gv(r,s,c,o);break e}else{switch(r=s.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(At=vr(r.firstChild),xn=s,Xe=!0,oi=null,Vr=!0,o=Z0(s,null,c,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(Pl(),c===h){s=va(r,s,o);break e}nn(r,s,c,o)}s=s.child}return s;case 26:return od(r,s),r===null?(o=w_(s.type,null,s.pendingProps,null))?s.memoizedState=o:Xe||(o=s.type,r=s.pendingProps,c=xd(Te.current).createElement(o),c[Lt]=s,c[Ot]=r,an(c,o,r),Nt(c),s.stateNode=c):s.memoizedState=w_(s.type,r.memoizedProps,s.pendingProps,r.memoizedState),null;case 27:return Yn(s),r===null&&Xe&&(c=s.stateNode=E_(s.type,s.pendingProps,Te.current),xn=s,Vr=!0,h=At,os(s.type)?(sp=h,At=vr(c.firstChild)):At=h),nn(r,s,s.pendingProps.children,o),od(r,s),r===null&&(s.flags|=4194304),s.child;case 5:return r===null&&Xe&&((h=c=At)&&(c=HA(c,s.type,s.pendingProps,Vr),c!==null?(s.stateNode=c,xn=s,At=vr(c.firstChild),Vr=!1,h=!0):h=!1),h||li(s)),Yn(s),h=s.type,g=s.pendingProps,x=r!==null?r.memoizedProps:null,c=g.children,tp(h,g)?c=null:x!==null&&tp(h,x)&&(s.flags|=32),s.memoizedState!==null&&(h=em(r,s,lA,null,null,o),dc._currentValue=h),od(r,s),nn(r,s,c,o),s.child;case 6:return r===null&&Xe&&((r=o=At)&&(o=$A(o,s.pendingProps,Vr),o!==null?(s.stateNode=o,xn=s,At=null,r=!0):r=!1),r||li(s)),null;case 13:return yv(r,s,o);case 4:return Ze(s,s.stateNode.containerInfo),c=s.pendingProps,r===null?s.child=po(s,null,c,o):nn(r,s,c,o),s.child;case 11:return cv(r,s,s.type,s.pendingProps,o);case 7:return nn(r,s,s.pendingProps,o),s.child;case 8:return nn(r,s,s.pendingProps.children,o),s.child;case 12:return nn(r,s,s.pendingProps.children,o),s.child;case 10:return c=s.pendingProps,Ga(s,s.type,c.value),nn(r,s,c.children,o),s.child;case 9:return h=s.type._context,c=s.pendingProps.children,ui(s),h=hn(h),c=c(h),s.flags|=1,nn(r,s,c,o),s.child;case 14:return uv(r,s,s.type,s.pendingProps,o);case 15:return dv(r,s,s.type,s.pendingProps,o);case 19:return _v(r,s,o);case 31:return c=s.pendingProps,o=s.mode,c={mode:c.mode,children:c.children},r===null?(o=ld(c,o),o.ref=s.ref,s.child=o,o.return=s,s=o):(o=da(r.child,c),o.ref=s.ref,s.child=o,o.return=s,s=o),s;case 22:return hv(r,s,o);case 24:return ui(s),c=hn(zt),r===null?(h=$f(),h===null&&(h=ht,g=Ff(),h.pooledCache=g,g.refCount++,g!==null&&(h.pooledCacheLanes|=o),h=g),s.memoizedState={parent:c,cache:h},Yf(s),Ga(s,zt,h)):((r.lanes&o)!==0&&(Kf(r,s),Fl(s,null,null,o),ql()),h=r.memoizedState,g=s.memoizedState,h.parent!==c?(h={parent:c,cache:c},s.memoizedState=h,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=h),Ga(s,zt,c)):(c=g.cache,Ga(s,zt,c),c!==h.cache&&qf(s,[zt],o,!0))),nn(r,s,s.pendingProps.children,o),s.child;case 29:throw s.pendingProps}throw Error(a(156,s.tag))}function _a(r){r.flags|=4}function Ev(r,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!R_(s)){if(s=sr.current,s!==null&&((Ke&4194048)===Ke?Ur!==null:(Ke&62914560)!==Ke&&(Ke&536870912)===0||s!==Ur))throw zl=Gf,a0;r.flags|=8192}}function cd(r,s){s!==null&&(r.flags|=4),r.flags&16384&&(s=r.tag!==22?fl():536870912,r.lanes|=s,_o|=s)}function Wl(r,s){if(!Xe)switch(r.tailMode){case"hidden":s=r.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?r.tail=null:o.sibling=null;break;case"collapsed":o=r.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:c.sibling=null}}function bt(r){var s=r.alternate!==null&&r.alternate.child===r.child,o=0,c=0;if(s)for(var h=r.child;h!==null;)o|=h.lanes|h.childLanes,c|=h.subtreeFlags&65011712,c|=h.flags&65011712,h.return=r,h=h.sibling;else for(h=r.child;h!==null;)o|=h.lanes|h.childLanes,c|=h.subtreeFlags,c|=h.flags,h.return=r,h=h.sibling;return r.subtreeFlags|=c,r.childLanes=o,s}function yA(r,s,o){var c=s.pendingProps;switch(Vf(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bt(s),null;case 1:return bt(s),null;case 3:return o=s.stateNode,c=null,r!==null&&(c=r.memoizedState.cache),s.memoizedState.cache!==c&&(s.flags|=2048),pa(zt),Sn(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(r===null||r.child===null)&&(jl(s)?_a(s):r===null||r.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Jy())),bt(s),null;case 26:return o=s.memoizedState,r===null?(_a(s),o!==null?(bt(s),Ev(s,o)):(bt(s),s.flags&=-16777217)):o?o!==r.memoizedState?(_a(s),bt(s),Ev(s,o)):(bt(s),s.flags&=-16777217):(r.memoizedProps!==c&&_a(s),bt(s),s.flags&=-16777217),null;case 27:Nn(s),o=Te.current;var h=s.type;if(r!==null&&s.stateNode!=null)r.memoizedProps!==c&&_a(s);else{if(!c){if(s.stateNode===null)throw Error(a(166));return bt(s),null}r=be.current,jl(s)?Xy(s):(r=E_(h,c,o),s.stateNode=r,_a(s))}return bt(s),null;case 5:if(Nn(s),o=s.type,r!==null&&s.stateNode!=null)r.memoizedProps!==c&&_a(s);else{if(!c){if(s.stateNode===null)throw Error(a(166));return bt(s),null}if(r=be.current,jl(s))Xy(s);else{switch(h=xd(Te.current),r){case 1:r=h.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:r=h.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":r=h.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":r=h.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":r=h.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof c.is=="string"?h.createElement("select",{is:c.is}):h.createElement("select"),c.multiple?r.multiple=!0:c.size&&(r.size=c.size);break;default:r=typeof c.is=="string"?h.createElement(o,{is:c.is}):h.createElement(o)}}r[Lt]=s,r[Ot]=c;e:for(h=s.child;h!==null;){if(h.tag===5||h.tag===6)r.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===s)break e;for(;h.sibling===null;){if(h.return===null||h.return===s)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}s.stateNode=r;e:switch(an(r,o,c),o){case"button":case"input":case"select":case"textarea":r=!!c.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&_a(s)}}return bt(s),s.flags&=-16777217,null;case 6:if(r&&s.stateNode!=null)r.memoizedProps!==c&&_a(s);else{if(typeof c!="string"&&s.stateNode===null)throw Error(a(166));if(r=Te.current,jl(s)){if(r=s.stateNode,o=s.memoizedProps,c=null,h=xn,h!==null)switch(h.tag){case 27:case 5:c=h.memoizedProps}r[Lt]=s,r=!!(r.nodeValue===o||c!==null&&c.suppressHydrationWarning===!0||m_(r.nodeValue,o)),r||li(s)}else r=xd(r).createTextNode(c),r[Lt]=s,s.stateNode=r}return bt(s),null;case 13:if(c=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(h=jl(s),c!==null&&c.dehydrated!==null){if(r===null){if(!h)throw Error(a(318));if(h=s.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(a(317));h[Lt]=s}else Pl(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;bt(s),h=!1}else h=Jy(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=h),h=!0;if(!h)return s.flags&256?(ya(s),s):(ya(s),null)}if(ya(s),(s.flags&128)!==0)return s.lanes=o,s;if(o=c!==null,r=r!==null&&r.memoizedState!==null,o){c=s.child,h=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(h=c.alternate.memoizedState.cachePool.pool);var g=null;c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(g=c.memoizedState.cachePool.pool),g!==h&&(c.flags|=2048)}return o!==r&&o&&(s.child.flags|=8192),cd(s,s.updateQueue),bt(s),null;case 4:return Sn(),r===null&&Wm(s.stateNode.containerInfo),bt(s),null;case 10:return pa(s.type),bt(s),null;case 19:if(he(Bt),h=s.memoizedState,h===null)return bt(s),null;if(c=(s.flags&128)!==0,g=h.rendering,g===null)if(c)Wl(h,!1);else{if(St!==0||r!==null&&(r.flags&128)!==0)for(r=s.child;r!==null;){if(g=ad(r),g!==null){for(s.flags|=128,Wl(h,!1),r=g.updateQueue,s.updateQueue=r,cd(s,r),s.subtreeFlags=0,r=o,o=s.child;o!==null;)Qy(o,r),o=o.sibling;return oe(Bt,Bt.current&1|2),s.child}r=r.sibling}h.tail!==null&&ye()>hd&&(s.flags|=128,c=!0,Wl(h,!1),s.lanes=4194304)}else{if(!c)if(r=ad(g),r!==null){if(s.flags|=128,c=!0,r=r.updateQueue,s.updateQueue=r,cd(s,r),Wl(h,!0),h.tail===null&&h.tailMode==="hidden"&&!g.alternate&&!Xe)return bt(s),null}else 2*ye()-h.renderingStartTime>hd&&o!==536870912&&(s.flags|=128,c=!0,Wl(h,!1),s.lanes=4194304);h.isBackwards?(g.sibling=s.child,s.child=g):(r=h.last,r!==null?r.sibling=g:s.child=g,h.last=g)}return h.tail!==null?(s=h.tail,h.rendering=s,h.tail=s.sibling,h.renderingStartTime=ye(),s.sibling=null,r=Bt.current,oe(Bt,c?r&1|2:r&1),s):(bt(s),null);case 22:case 23:return ya(s),Zf(),c=s.memoizedState!==null,r!==null?r.memoizedState!==null!==c&&(s.flags|=8192):c&&(s.flags|=8192),c?(o&536870912)!==0&&(s.flags&128)===0&&(bt(s),s.subtreeFlags&6&&(s.flags|=8192)):bt(s),o=s.updateQueue,o!==null&&cd(s,o.retryQueue),o=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),c=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),c!==o&&(s.flags|=2048),r!==null&&he(di),null;case 24:return o=null,r!==null&&(o=r.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),pa(zt),bt(s),null;case 25:return null;case 30:return null}throw Error(a(156,s.tag))}function vA(r,s){switch(Vf(s),s.tag){case 1:return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return pa(zt),Sn(),r=s.flags,(r&65536)!==0&&(r&128)===0?(s.flags=r&-65537|128,s):null;case 26:case 27:case 5:return Nn(s),null;case 13:if(ya(s),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(a(340));Pl()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return he(Bt),null;case 4:return Sn(),null;case 10:return pa(s.type),null;case 22:case 23:return ya(s),Zf(),r!==null&&he(di),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 24:return pa(zt),null;case 25:return null;default:return null}}function xv(r,s){switch(Vf(s),s.tag){case 3:pa(zt),Sn();break;case 26:case 27:case 5:Nn(s);break;case 4:Sn();break;case 13:ya(s);break;case 19:he(Bt);break;case 10:pa(s.type);break;case 22:case 23:ya(s),Zf(),r!==null&&he(di);break;case 24:pa(zt)}}function Xl(r,s){try{var o=s.updateQueue,c=o!==null?o.lastEffect:null;if(c!==null){var h=c.next;o=h;do{if((o.tag&r)===r){c=void 0;var g=o.create,x=o.inst;c=g(),x.destroy=c}o=o.next}while(o!==h)}}catch(w){ut(s,s.return,w)}}function Ja(r,s,o){try{var c=s.updateQueue,h=c!==null?c.lastEffect:null;if(h!==null){var g=h.next;c=g;do{if((c.tag&r)===r){var x=c.inst,w=x.destroy;if(w!==void 0){x.destroy=void 0,h=s;var D=o,G=w;try{G()}catch(ee){ut(h,D,ee)}}}c=c.next}while(c!==g)}}catch(ee){ut(s,s.return,ee)}}function Tv(r){var s=r.updateQueue;if(s!==null){var o=r.stateNode;try{u0(s,o)}catch(c){ut(r,r.return,c)}}}function wv(r,s,o){o.props=fi(r.type,r.memoizedProps),o.state=r.memoizedState;try{o.componentWillUnmount()}catch(c){ut(r,s,c)}}function Zl(r,s){try{var o=r.ref;if(o!==null){switch(r.tag){case 26:case 27:case 5:var c=r.stateNode;break;case 30:c=r.stateNode;break;default:c=r.stateNode}typeof o=="function"?r.refCleanup=o(c):o.current=c}}catch(h){ut(r,s,h)}}function zr(r,s){var o=r.ref,c=r.refCleanup;if(o!==null)if(typeof c=="function")try{c()}catch(h){ut(r,s,h)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(h){ut(r,s,h)}else o.current=null}function Av(r){var s=r.type,o=r.memoizedProps,c=r.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":o.autoFocus&&c.focus();break e;case"img":o.src?c.src=o.src:o.srcSet&&(c.srcset=o.srcSet)}}catch(h){ut(r,r.return,h)}}function Sm(r,s,o){try{var c=r.stateNode;UA(c,r.type,o,s),c[Ot]=s}catch(h){ut(r,r.return,h)}}function Sv(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&os(r.type)||r.tag===4}function Nm(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||Sv(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&os(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Cm(r,s,o){var c=r.tag;if(c===5||c===6)r=r.stateNode,s?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(r,s):(s=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,s.appendChild(r),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=Ed));else if(c!==4&&(c===27&&os(r.type)&&(o=r.stateNode,s=null),r=r.child,r!==null))for(Cm(r,s,o),r=r.sibling;r!==null;)Cm(r,s,o),r=r.sibling}function ud(r,s,o){var c=r.tag;if(c===5||c===6)r=r.stateNode,s?o.insertBefore(r,s):o.appendChild(r);else if(c!==4&&(c===27&&os(r.type)&&(o=r.stateNode),r=r.child,r!==null))for(ud(r,s,o),r=r.sibling;r!==null;)ud(r,s,o),r=r.sibling}function Nv(r){var s=r.stateNode,o=r.memoizedProps;try{for(var c=r.type,h=s.attributes;h.length;)s.removeAttributeNode(h[0]);an(s,c,o),s[Lt]=r,s[Ot]=o}catch(g){ut(r,r.return,g)}}var ba=!1,Rt=!1,Rm=!1,Cv=typeof WeakSet=="function"?WeakSet:Set,Kt=null;function _A(r,s){if(r=r.containerInfo,Jm=Cd,r=Uy(r),Nf(r)){if("selectionStart"in r)var o={start:r.selectionStart,end:r.selectionEnd};else e:{o=(o=r.ownerDocument)&&o.defaultView||window;var c=o.getSelection&&o.getSelection();if(c&&c.rangeCount!==0){o=c.anchorNode;var h=c.anchorOffset,g=c.focusNode;c=c.focusOffset;try{o.nodeType,g.nodeType}catch{o=null;break e}var x=0,w=-1,D=-1,G=0,ee=0,re=r,Y=null;t:for(;;){for(var K;re!==o||h!==0&&re.nodeType!==3||(w=x+h),re!==g||c!==0&&re.nodeType!==3||(D=x+c),re.nodeType===3&&(x+=re.nodeValue.length),(K=re.firstChild)!==null;)Y=re,re=K;for(;;){if(re===r)break t;if(Y===o&&++G===h&&(w=x),Y===g&&++ee===c&&(D=x),(K=re.nextSibling)!==null)break;re=Y,Y=re.parentNode}re=K}o=w===-1||D===-1?null:{start:w,end:D}}else o=null}o=o||{start:0,end:0}}else o=null;for(ep={focusedElem:r,selectionRange:o},Cd=!1,Kt=s;Kt!==null;)if(s=Kt,r=s.child,(s.subtreeFlags&1024)!==0&&r!==null)r.return=s,Kt=r;else for(;Kt!==null;){switch(s=Kt,g=s.alternate,r=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((r&1024)!==0&&g!==null){r=void 0,o=s,h=g.memoizedProps,g=g.memoizedState,c=o.stateNode;try{var Re=fi(o.type,h,o.elementType===o.type);r=c.getSnapshotBeforeUpdate(Re,g),c.__reactInternalSnapshotBeforeUpdate=r}catch(Ae){ut(o,o.return,Ae)}}break;case 3:if((r&1024)!==0){if(r=s.stateNode.containerInfo,o=r.nodeType,o===9)rp(r);else if(o===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":rp(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(a(163))}if(r=s.sibling,r!==null){r.return=s.return,Kt=r;break}Kt=s.return}}function Rv(r,s,o){var c=o.flags;switch(o.tag){case 0:case 11:case 15:es(r,o),c&4&&Xl(5,o);break;case 1:if(es(r,o),c&4)if(r=o.stateNode,s===null)try{r.componentDidMount()}catch(x){ut(o,o.return,x)}else{var h=fi(o.type,s.memoizedProps);s=s.memoizedState;try{r.componentDidUpdate(h,s,r.__reactInternalSnapshotBeforeUpdate)}catch(x){ut(o,o.return,x)}}c&64&&Tv(o),c&512&&Zl(o,o.return);break;case 3:if(es(r,o),c&64&&(r=o.updateQueue,r!==null)){if(s=null,o.child!==null)switch(o.child.tag){case 27:case 5:s=o.child.stateNode;break;case 1:s=o.child.stateNode}try{u0(r,s)}catch(x){ut(o,o.return,x)}}break;case 27:s===null&&c&4&&Nv(o);case 26:case 5:es(r,o),s===null&&c&4&&Av(o),c&512&&Zl(o,o.return);break;case 12:es(r,o);break;case 13:es(r,o),c&4&&Dv(r,o),c&64&&(r=o.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(o=CA.bind(null,o),GA(r,o))));break;case 22:if(c=o.memoizedState!==null||ba,!c){s=s!==null&&s.memoizedState!==null||Rt,h=ba;var g=Rt;ba=c,(Rt=s)&&!g?ts(r,o,(o.subtreeFlags&8772)!==0):es(r,o),ba=h,Rt=g}break;case 30:break;default:es(r,o)}}function Iv(r){var s=r.alternate;s!==null&&(r.alternate=null,Iv(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&qa(s)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var gt=null,Rn=!1;function Ea(r,s,o){for(o=o.child;o!==null;)Ov(r,s,o),o=o.sibling}function Ov(r,s,o){if(tt&&typeof tt.onCommitFiberUnmount=="function")try{tt.onCommitFiberUnmount(wt,o)}catch{}switch(o.tag){case 26:Rt||zr(o,s),Ea(r,s,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:Rt||zr(o,s);var c=gt,h=Rn;os(o.type)&&(gt=o.stateNode,Rn=!1),Ea(r,s,o),oc(o.stateNode),gt=c,Rn=h;break;case 5:Rt||zr(o,s);case 6:if(c=gt,h=Rn,gt=null,Ea(r,s,o),gt=c,Rn=h,gt!==null)if(Rn)try{(gt.nodeType===9?gt.body:gt.nodeName==="HTML"?gt.ownerDocument.body:gt).removeChild(o.stateNode)}catch(g){ut(o,s,g)}else try{gt.removeChild(o.stateNode)}catch(g){ut(o,s,g)}break;case 18:gt!==null&&(Rn?(r=gt,__(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,o.stateNode),pc(r)):__(gt,o.stateNode));break;case 4:c=gt,h=Rn,gt=o.stateNode.containerInfo,Rn=!0,Ea(r,s,o),gt=c,Rn=h;break;case 0:case 11:case 14:case 15:Rt||Ja(2,o,s),Rt||Ja(4,o,s),Ea(r,s,o);break;case 1:Rt||(zr(o,s),c=o.stateNode,typeof c.componentWillUnmount=="function"&&wv(o,s,c)),Ea(r,s,o);break;case 21:Ea(r,s,o);break;case 22:Rt=(c=Rt)||o.memoizedState!==null,Ea(r,s,o),Rt=c;break;default:Ea(r,s,o)}}function Dv(r,s){if(s.memoizedState===null&&(r=s.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{pc(r)}catch(o){ut(s,s.return,o)}}function bA(r){switch(r.tag){case 13:case 19:var s=r.stateNode;return s===null&&(s=r.stateNode=new Cv),s;case 22:return r=r.stateNode,s=r._retryCache,s===null&&(s=r._retryCache=new Cv),s;default:throw Error(a(435,r.tag))}}function Im(r,s){var o=bA(r);s.forEach(function(c){var h=RA.bind(null,r,c);o.has(c)||(o.add(c),c.then(h,h))})}function Bn(r,s){var o=s.deletions;if(o!==null)for(var c=0;c<o.length;c++){var h=o[c],g=r,x=s,w=x;e:for(;w!==null;){switch(w.tag){case 27:if(os(w.type)){gt=w.stateNode,Rn=!1;break e}break;case 5:gt=w.stateNode,Rn=!1;break e;case 3:case 4:gt=w.stateNode.containerInfo,Rn=!0;break e}w=w.return}if(gt===null)throw Error(a(160));Ov(g,x,h),gt=null,Rn=!1,g=h.alternate,g!==null&&(g.return=null),h.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)jv(s,r),s=s.sibling}var yr=null;function jv(r,s){var o=r.alternate,c=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:Bn(s,r),qn(r),c&4&&(Ja(3,r,r.return),Xl(3,r),Ja(5,r,r.return));break;case 1:Bn(s,r),qn(r),c&512&&(Rt||o===null||zr(o,o.return)),c&64&&ba&&(r=r.updateQueue,r!==null&&(c=r.callbacks,c!==null&&(o=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=o===null?c:o.concat(c))));break;case 26:var h=yr;if(Bn(s,r),qn(r),c&512&&(Rt||o===null||zr(o,o.return)),c&4){var g=o!==null?o.memoizedState:null;if(c=r.memoizedState,o===null)if(c===null)if(r.stateNode===null){e:{c=r.type,o=r.memoizedProps,h=h.ownerDocument||h;t:switch(c){case"title":g=h.getElementsByTagName("title")[0],(!g||g[qs]||g[Lt]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=h.createElement(c),h.head.insertBefore(g,h.querySelector("head > title"))),an(g,c,o),g[Lt]=r,Nt(g),c=g;break e;case"link":var x=N_("link","href",h).get(c+(o.href||""));if(x){for(var w=0;w<x.length;w++)if(g=x[w],g.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&g.getAttribute("rel")===(o.rel==null?null:o.rel)&&g.getAttribute("title")===(o.title==null?null:o.title)&&g.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){x.splice(w,1);break t}}g=h.createElement(c),an(g,c,o),h.head.appendChild(g);break;case"meta":if(x=N_("meta","content",h).get(c+(o.content||""))){for(w=0;w<x.length;w++)if(g=x[w],g.getAttribute("content")===(o.content==null?null:""+o.content)&&g.getAttribute("name")===(o.name==null?null:o.name)&&g.getAttribute("property")===(o.property==null?null:o.property)&&g.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&g.getAttribute("charset")===(o.charSet==null?null:o.charSet)){x.splice(w,1);break t}}g=h.createElement(c),an(g,c,o),h.head.appendChild(g);break;default:throw Error(a(468,c))}g[Lt]=r,Nt(g),c=g}r.stateNode=c}else C_(h,r.type,r.stateNode);else r.stateNode=S_(h,c,r.memoizedProps);else g!==c?(g===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):g.count--,c===null?C_(h,r.type,r.stateNode):S_(h,c,r.memoizedProps)):c===null&&r.stateNode!==null&&Sm(r,r.memoizedProps,o.memoizedProps)}break;case 27:Bn(s,r),qn(r),c&512&&(Rt||o===null||zr(o,o.return)),o!==null&&c&4&&Sm(r,r.memoizedProps,o.memoizedProps);break;case 5:if(Bn(s,r),qn(r),c&512&&(Rt||o===null||zr(o,o.return)),r.flags&32){h=r.stateNode;try{Xn(h,"")}catch(K){ut(r,r.return,K)}}c&4&&r.stateNode!=null&&(h=r.memoizedProps,Sm(r,h,o!==null?o.memoizedProps:h)),c&1024&&(Rm=!0);break;case 6:if(Bn(s,r),qn(r),c&4){if(r.stateNode===null)throw Error(a(162));c=r.memoizedProps,o=r.stateNode;try{o.nodeValue=c}catch(K){ut(r,r.return,K)}}break;case 3:if(Ad=null,h=yr,yr=Td(s.containerInfo),Bn(s,r),yr=h,qn(r),c&4&&o!==null&&o.memoizedState.isDehydrated)try{pc(s.containerInfo)}catch(K){ut(r,r.return,K)}Rm&&(Rm=!1,Pv(r));break;case 4:c=yr,yr=Td(r.stateNode.containerInfo),Bn(s,r),qn(r),yr=c;break;case 12:Bn(s,r),qn(r);break;case 13:Bn(s,r),qn(r),r.child.flags&8192&&r.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(km=ye()),c&4&&(c=r.updateQueue,c!==null&&(r.updateQueue=null,Im(r,c)));break;case 22:h=r.memoizedState!==null;var D=o!==null&&o.memoizedState!==null,G=ba,ee=Rt;if(ba=G||h,Rt=ee||D,Bn(s,r),Rt=ee,ba=G,qn(r),c&8192)e:for(s=r.stateNode,s._visibility=h?s._visibility&-2:s._visibility|1,h&&(o===null||D||ba||Rt||mi(r)),o=null,s=r;;){if(s.tag===5||s.tag===26){if(o===null){D=o=s;try{if(g=D.stateNode,h)x=g.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none";else{w=D.stateNode;var re=D.memoizedProps.style,Y=re!=null&&re.hasOwnProperty("display")?re.display:null;w.style.display=Y==null||typeof Y=="boolean"?"":(""+Y).trim()}}catch(K){ut(D,D.return,K)}}}else if(s.tag===6){if(o===null){D=s;try{D.stateNode.nodeValue=h?"":D.memoizedProps}catch(K){ut(D,D.return,K)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===r)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break e;for(;s.sibling===null;){if(s.return===null||s.return===r)break e;o===s&&(o=null),s=s.return}o===s&&(o=null),s.sibling.return=s.return,s=s.sibling}c&4&&(c=r.updateQueue,c!==null&&(o=c.retryQueue,o!==null&&(c.retryQueue=null,Im(r,o))));break;case 19:Bn(s,r),qn(r),c&4&&(c=r.updateQueue,c!==null&&(r.updateQueue=null,Im(r,c)));break;case 30:break;case 21:break;default:Bn(s,r),qn(r)}}function qn(r){var s=r.flags;if(s&2){try{for(var o,c=r.return;c!==null;){if(Sv(c)){o=c;break}c=c.return}if(o==null)throw Error(a(160));switch(o.tag){case 27:var h=o.stateNode,g=Nm(r);ud(r,g,h);break;case 5:var x=o.stateNode;o.flags&32&&(Xn(x,""),o.flags&=-33);var w=Nm(r);ud(r,w,x);break;case 3:case 4:var D=o.stateNode.containerInfo,G=Nm(r);Cm(r,G,D);break;default:throw Error(a(161))}}catch(ee){ut(r,r.return,ee)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function Pv(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var s=r;Pv(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),r=r.sibling}}function es(r,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)Rv(r,s.alternate,s),s=s.sibling}function mi(r){for(r=r.child;r!==null;){var s=r;switch(s.tag){case 0:case 11:case 14:case 15:Ja(4,s,s.return),mi(s);break;case 1:zr(s,s.return);var o=s.stateNode;typeof o.componentWillUnmount=="function"&&wv(s,s.return,o),mi(s);break;case 27:oc(s.stateNode);case 26:case 5:zr(s,s.return),mi(s);break;case 22:s.memoizedState===null&&mi(s);break;case 30:mi(s);break;default:mi(s)}r=r.sibling}}function ts(r,s,o){for(o=o&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var c=s.alternate,h=r,g=s,x=g.flags;switch(g.tag){case 0:case 11:case 15:ts(h,g,o),Xl(4,g);break;case 1:if(ts(h,g,o),c=g,h=c.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(G){ut(c,c.return,G)}if(c=g,h=c.updateQueue,h!==null){var w=c.stateNode;try{var D=h.shared.hiddenCallbacks;if(D!==null)for(h.shared.hiddenCallbacks=null,h=0;h<D.length;h++)c0(D[h],w)}catch(G){ut(c,c.return,G)}}o&&x&64&&Tv(g),Zl(g,g.return);break;case 27:Nv(g);case 26:case 5:ts(h,g,o),o&&c===null&&x&4&&Av(g),Zl(g,g.return);break;case 12:ts(h,g,o);break;case 13:ts(h,g,o),o&&x&4&&Dv(h,g);break;case 22:g.memoizedState===null&&ts(h,g,o),Zl(g,g.return);break;case 30:break;default:ts(h,g,o)}s=s.sibling}}function Om(r,s){var o=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),r=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(r=s.memoizedState.cachePool.pool),r!==o&&(r!=null&&r.refCount++,o!=null&&Ll(o))}function Dm(r,s){r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&Ll(r))}function Br(r,s,o,c){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Mv(r,s,o,c),s=s.sibling}function Mv(r,s,o,c){var h=s.flags;switch(s.tag){case 0:case 11:case 15:Br(r,s,o,c),h&2048&&Xl(9,s);break;case 1:Br(r,s,o,c);break;case 3:Br(r,s,o,c),h&2048&&(r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&Ll(r)));break;case 12:if(h&2048){Br(r,s,o,c),r=s.stateNode;try{var g=s.memoizedProps,x=g.id,w=g.onPostCommit;typeof w=="function"&&w(x,s.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(D){ut(s,s.return,D)}}else Br(r,s,o,c);break;case 13:Br(r,s,o,c);break;case 23:break;case 22:g=s.stateNode,x=s.alternate,s.memoizedState!==null?g._visibility&2?Br(r,s,o,c):Jl(r,s):g._visibility&2?Br(r,s,o,c):(g._visibility|=2,go(r,s,o,c,(s.subtreeFlags&10256)!==0)),h&2048&&Om(x,s);break;case 24:Br(r,s,o,c),h&2048&&Dm(s.alternate,s);break;default:Br(r,s,o,c)}}function go(r,s,o,c,h){for(h=h&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var g=r,x=s,w=o,D=c,G=x.flags;switch(x.tag){case 0:case 11:case 15:go(g,x,w,D,h),Xl(8,x);break;case 23:break;case 22:var ee=x.stateNode;x.memoizedState!==null?ee._visibility&2?go(g,x,w,D,h):Jl(g,x):(ee._visibility|=2,go(g,x,w,D,h)),h&&G&2048&&Om(x.alternate,x);break;case 24:go(g,x,w,D,h),h&&G&2048&&Dm(x.alternate,x);break;default:go(g,x,w,D,h)}s=s.sibling}}function Jl(r,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var o=r,c=s,h=c.flags;switch(c.tag){case 22:Jl(o,c),h&2048&&Om(c.alternate,c);break;case 24:Jl(o,c),h&2048&&Dm(c.alternate,c);break;default:Jl(o,c)}s=s.sibling}}var ec=8192;function yo(r){if(r.subtreeFlags&ec)for(r=r.child;r!==null;)kv(r),r=r.sibling}function kv(r){switch(r.tag){case 26:yo(r),r.flags&ec&&r.memoizedState!==null&&sS(yr,r.memoizedState,r.memoizedProps);break;case 5:yo(r);break;case 3:case 4:var s=yr;yr=Td(r.stateNode.containerInfo),yo(r),yr=s;break;case 22:r.memoizedState===null&&(s=r.alternate,s!==null&&s.memoizedState!==null?(s=ec,ec=16777216,yo(r),ec=s):yo(r));break;default:yo(r)}}function Lv(r){var s=r.alternate;if(s!==null&&(r=s.child,r!==null)){s.child=null;do s=r.sibling,r.sibling=null,r=s;while(r!==null)}}function tc(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var c=s[o];Kt=c,Uv(c,r)}Lv(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Vv(r),r=r.sibling}function Vv(r){switch(r.tag){case 0:case 11:case 15:tc(r),r.flags&2048&&Ja(9,r,r.return);break;case 3:tc(r);break;case 12:tc(r);break;case 22:var s=r.stateNode;r.memoizedState!==null&&s._visibility&2&&(r.return===null||r.return.tag!==13)?(s._visibility&=-3,dd(r)):tc(r);break;default:tc(r)}}function dd(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var c=s[o];Kt=c,Uv(c,r)}Lv(r)}for(r=r.child;r!==null;){switch(s=r,s.tag){case 0:case 11:case 15:Ja(8,s,s.return),dd(s);break;case 22:o=s.stateNode,o._visibility&2&&(o._visibility&=-3,dd(s));break;default:dd(s)}r=r.sibling}}function Uv(r,s){for(;Kt!==null;){var o=Kt;switch(o.tag){case 0:case 11:case 15:Ja(8,o,s);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var c=o.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Ll(o.memoizedState.cache)}if(c=o.child,c!==null)c.return=o,Kt=c;else e:for(o=r;Kt!==null;){c=Kt;var h=c.sibling,g=c.return;if(Iv(c),c===o){Kt=null;break e}if(h!==null){h.return=g,Kt=h;break e}Kt=g}}}var EA={getCacheForType:function(r){var s=hn(zt),o=s.data.get(r);return o===void 0&&(o=r(),s.data.set(r,o)),o}},xA=typeof WeakMap=="function"?WeakMap:Map,nt=0,ht=null,ze=null,Ke=0,rt=0,Fn=null,ns=!1,vo=!1,jm=!1,xa=0,St=0,rs=0,pi=0,Pm=0,ir=0,_o=0,nc=null,In=null,Mm=!1,km=0,hd=1/0,fd=null,as=null,rn=0,ss=null,bo=null,Eo=0,Lm=0,Vm=null,zv=null,rc=0,Um=null;function Hn(){if((nt&2)!==0&&Ke!==0)return Ke&-Ke;if(J.T!==null){var r=oo;return r!==0?r:Gm()}return za()}function Bv(){ir===0&&(ir=(Ke&536870912)===0||Xe?hl():536870912);var r=sr.current;return r!==null&&(r.flags|=32),ir}function $n(r,s,o){(r===ht&&(rt===2||rt===9)||r.cancelPendingCommit!==null)&&(xo(r,0),is(r,Ke,ir,!1)),ea(r,o),((nt&2)===0||r!==ht)&&(r===ht&&((nt&2)===0&&(pi|=o),St===4&&is(r,Ke,ir,!1)),qr(r))}function qv(r,s,o){if((nt&6)!==0)throw Error(a(327));var c=!o&&(s&124)===0&&(s&r.expiredLanes)===0||Bs(r,s),h=c?AA(r,s):qm(r,s,!0),g=c;do{if(h===0){vo&&!c&&is(r,s,0,!1);break}else{if(o=r.current.alternate,g&&!TA(o)){h=qm(r,s,!1),g=!1;continue}if(h===2){if(g=s,r.errorRecoveryDisabledLanes&g)var x=0;else x=r.pendingLanes&-536870913,x=x!==0?x:x&536870912?536870912:0;if(x!==0){s=x;e:{var w=r;h=nc;var D=w.current.memoizedState.isDehydrated;if(D&&(xo(w,x).flags|=256),x=qm(w,x,!1),x!==2){if(jm&&!D){w.errorRecoveryDisabledLanes|=g,pi|=g,h=4;break e}g=In,In=h,g!==null&&(In===null?In=g:In.push.apply(In,g))}h=x}if(g=!1,h!==2)continue}}if(h===1){xo(r,0),is(r,s,0,!0);break}e:{switch(c=r,g=h,g){case 0:case 1:throw Error(a(345));case 4:if((s&4194048)!==s)break;case 6:is(c,s,ir,!ns);break e;case 2:In=null;break;case 3:case 5:break;default:throw Error(a(329))}if((s&62914560)===s&&(h=km+300-ye(),10<h)){if(is(c,s,ir,!ns),Vi(c,0,!0)!==0)break e;c.timeoutHandle=y_(Fv.bind(null,c,o,In,fd,Mm,s,ir,pi,_o,ns,g,2,-0,0),h);break e}Fv(c,o,In,fd,Mm,s,ir,pi,_o,ns,g,0,-0,0)}}break}while(!0);qr(r)}function Fv(r,s,o,c,h,g,x,w,D,G,ee,re,Y,K){if(r.timeoutHandle=-1,re=s.subtreeFlags,(re&8192||(re&16785408)===16785408)&&(uc={stylesheets:null,count:0,unsuspend:aS},kv(s),re=iS(),re!==null)){r.cancelPendingCommit=re(Wv.bind(null,r,s,g,o,c,h,x,w,D,ee,1,Y,K)),is(r,g,x,!G);return}Wv(r,s,g,o,c,h,x,w,D)}function TA(r){for(var s=r;;){var o=s.tag;if((o===0||o===11||o===15)&&s.flags&16384&&(o=s.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var c=0;c<o.length;c++){var h=o[c],g=h.getSnapshot;h=h.value;try{if(!Un(g(),h))return!1}catch{return!1}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function is(r,s,o,c){s&=~Pm,s&=~pi,r.suspendedLanes|=s,r.pingedLanes&=~s,c&&(r.warmLanes|=s),c=r.expirationTimes;for(var h=s;0<h;){var g=31-dn(h),x=1<<g;c[g]=-1,h&=~x}o!==0&&Nr(r,o,s)}function md(){return(nt&6)===0?(ac(0),!1):!0}function zm(){if(ze!==null){if(rt===0)var r=ze.return;else r=ze,ma=ci=null,rm(r),mo=null,Kl=0,r=ze;for(;r!==null;)xv(r.alternate,r),r=r.return;ze=null}}function xo(r,s){var o=r.timeoutHandle;o!==-1&&(r.timeoutHandle=-1,BA(o)),o=r.cancelPendingCommit,o!==null&&(r.cancelPendingCommit=null,o()),zm(),ht=r,ze=o=da(r.current,null),Ke=s,rt=0,Fn=null,ns=!1,vo=Bs(r,s),jm=!1,_o=ir=Pm=pi=rs=St=0,In=nc=null,Mm=!1,(s&8)!==0&&(s|=s&32);var c=r.entangledLanes;if(c!==0)for(r=r.entanglements,c&=s;0<c;){var h=31-dn(c),g=1<<h;s|=r[h],c&=~g}return xa=s,ku(),o}function Hv(r,s){Le=null,J.H=td,s===Ul||s===$u?(s=o0(),rt=3):s===a0?(s=o0(),rt=4):rt=s===lv?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Fn=s,ze===null&&(St=1,id(r,tr(s,r.current)))}function $v(){var r=J.H;return J.H=td,r===null?td:r}function Gv(){var r=J.A;return J.A=EA,r}function Bm(){St=4,ns||(Ke&4194048)!==Ke&&sr.current!==null||(vo=!0),(rs&134217727)===0&&(pi&134217727)===0||ht===null||is(ht,Ke,ir,!1)}function qm(r,s,o){var c=nt;nt|=2;var h=$v(),g=Gv();(ht!==r||Ke!==s)&&(fd=null,xo(r,s)),s=!1;var x=St;e:do try{if(rt!==0&&ze!==null){var w=ze,D=Fn;switch(rt){case 8:zm(),x=6;break e;case 3:case 2:case 9:case 6:sr.current===null&&(s=!0);var G=rt;if(rt=0,Fn=null,To(r,w,D,G),o&&vo){x=0;break e}break;default:G=rt,rt=0,Fn=null,To(r,w,D,G)}}wA(),x=St;break}catch(ee){Hv(r,ee)}while(!0);return s&&r.shellSuspendCounter++,ma=ci=null,nt=c,J.H=h,J.A=g,ze===null&&(ht=null,Ke=0,ku()),x}function wA(){for(;ze!==null;)Yv(ze)}function AA(r,s){var o=nt;nt|=2;var c=$v(),h=Gv();ht!==r||Ke!==s?(fd=null,hd=ye()+500,xo(r,s)):vo=Bs(r,s);e:do try{if(rt!==0&&ze!==null){s=ze;var g=Fn;t:switch(rt){case 1:rt=0,Fn=null,To(r,s,g,1);break;case 2:case 9:if(s0(g)){rt=0,Fn=null,Kv(s);break}s=function(){rt!==2&&rt!==9||ht!==r||(rt=7),qr(r)},g.then(s,s);break e;case 3:rt=7;break e;case 4:rt=5;break e;case 7:s0(g)?(rt=0,Fn=null,Kv(s)):(rt=0,Fn=null,To(r,s,g,7));break;case 5:var x=null;switch(ze.tag){case 26:x=ze.memoizedState;case 5:case 27:var w=ze;if(!x||R_(x)){rt=0,Fn=null;var D=w.sibling;if(D!==null)ze=D;else{var G=w.return;G!==null?(ze=G,pd(G)):ze=null}break t}}rt=0,Fn=null,To(r,s,g,5);break;case 6:rt=0,Fn=null,To(r,s,g,6);break;case 8:zm(),St=6;break e;default:throw Error(a(462))}}SA();break}catch(ee){Hv(r,ee)}while(!0);return ma=ci=null,J.H=c,J.A=h,nt=o,ze!==null?0:(ht=null,Ke=0,ku(),St)}function SA(){for(;ze!==null&&!Q();)Yv(ze)}function Yv(r){var s=bv(r.alternate,r,xa);r.memoizedProps=r.pendingProps,s===null?pd(r):ze=s}function Kv(r){var s=r,o=s.alternate;switch(s.tag){case 15:case 0:s=mv(o,s,s.pendingProps,s.type,void 0,Ke);break;case 11:s=mv(o,s,s.pendingProps,s.type.render,s.ref,Ke);break;case 5:rm(s);default:xv(o,s),s=ze=Qy(s,xa),s=bv(o,s,xa)}r.memoizedProps=r.pendingProps,s===null?pd(r):ze=s}function To(r,s,o,c){ma=ci=null,rm(s),mo=null,Kl=0;var h=s.return;try{if(pA(r,h,s,o,Ke)){St=1,id(r,tr(o,r.current)),ze=null;return}}catch(g){if(h!==null)throw ze=h,g;St=1,id(r,tr(o,r.current)),ze=null;return}s.flags&32768?(Xe||c===1?r=!0:vo||(Ke&536870912)!==0?r=!1:(ns=r=!0,(c===2||c===9||c===3||c===6)&&(c=sr.current,c!==null&&c.tag===13&&(c.flags|=16384))),Qv(s,r)):pd(s)}function pd(r){var s=r;do{if((s.flags&32768)!==0){Qv(s,ns);return}r=s.return;var o=yA(s.alternate,s,xa);if(o!==null){ze=o;return}if(s=s.sibling,s!==null){ze=s;return}ze=s=r}while(s!==null);St===0&&(St=5)}function Qv(r,s){do{var o=vA(r.alternate,r);if(o!==null){o.flags&=32767,ze=o;return}if(o=r.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!s&&(r=r.sibling,r!==null)){ze=r;return}ze=r=o}while(r!==null);St=6,ze=null}function Wv(r,s,o,c,h,g,x,w,D){r.cancelPendingCommit=null;do gd();while(rn!==0);if((nt&6)!==0)throw Error(a(327));if(s!==null){if(s===r.current)throw Error(a(177));if(g=s.lanes|s.childLanes,g|=Df,ml(r,o,g,x,w,D),r===ht&&(ze=ht=null,Ke=0),bo=s,ss=r,Eo=o,Lm=g,Vm=h,zv=c,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,IA(Zr,function(){return t_(),null})):(r.callbackNode=null,r.callbackPriority=0),c=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||c){c=J.T,J.T=null,h=ue.p,ue.p=2,x=nt,nt|=4;try{_A(r,s,o)}finally{nt=x,ue.p=h,J.T=c}}rn=1,Xv(),Zv(),Jv()}}function Xv(){if(rn===1){rn=0;var r=ss,s=bo,o=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||o){o=J.T,J.T=null;var c=ue.p;ue.p=2;var h=nt;nt|=4;try{jv(s,r);var g=ep,x=Uy(r.containerInfo),w=g.focusedElem,D=g.selectionRange;if(x!==w&&w&&w.ownerDocument&&Vy(w.ownerDocument.documentElement,w)){if(D!==null&&Nf(w)){var G=D.start,ee=D.end;if(ee===void 0&&(ee=G),"selectionStart"in w)w.selectionStart=G,w.selectionEnd=Math.min(ee,w.value.length);else{var re=w.ownerDocument||document,Y=re&&re.defaultView||window;if(Y.getSelection){var K=Y.getSelection(),Re=w.textContent.length,Ae=Math.min(D.start,Re),lt=D.end===void 0?Ae:Math.min(D.end,Re);!K.extend&&Ae>lt&&(x=lt,lt=Ae,Ae=x);var B=Ly(w,Ae),U=Ly(w,lt);if(B&&U&&(K.rangeCount!==1||K.anchorNode!==B.node||K.anchorOffset!==B.offset||K.focusNode!==U.node||K.focusOffset!==U.offset)){var $=re.createRange();$.setStart(B.node,B.offset),K.removeAllRanges(),Ae>lt?(K.addRange($),K.extend(U.node,U.offset)):($.setEnd(U.node,U.offset),K.addRange($))}}}}for(re=[],K=w;K=K.parentNode;)K.nodeType===1&&re.push({element:K,left:K.scrollLeft,top:K.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<re.length;w++){var te=re[w];te.element.scrollLeft=te.left,te.element.scrollTop=te.top}}Cd=!!Jm,ep=Jm=null}finally{nt=h,ue.p=c,J.T=o}}r.current=s,rn=2}}function Zv(){if(rn===2){rn=0;var r=ss,s=bo,o=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||o){o=J.T,J.T=null;var c=ue.p;ue.p=2;var h=nt;nt|=4;try{Rv(r,s.alternate,s)}finally{nt=h,ue.p=c,J.T=o}}rn=3}}function Jv(){if(rn===4||rn===3){rn=0,_e();var r=ss,s=bo,o=Eo,c=zv;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?rn=5:(rn=0,bo=ss=null,e_(r,r.pendingLanes));var h=r.pendingLanes;if(h===0&&(as=null),Ui(o),s=s.stateNode,tt&&typeof tt.onCommitFiberRoot=="function")try{tt.onCommitFiberRoot(wt,s,void 0,(s.current.flags&128)===128)}catch{}if(c!==null){s=J.T,h=ue.p,ue.p=2,J.T=null;try{for(var g=r.onRecoverableError,x=0;x<c.length;x++){var w=c[x];g(w.value,{componentStack:w.stack})}}finally{J.T=s,ue.p=h}}(Eo&3)!==0&&gd(),qr(r),h=r.pendingLanes,(o&4194090)!==0&&(h&42)!==0?r===Um?rc++:(rc=0,Um=r):rc=0,ac(0)}}function e_(r,s){(r.pooledCacheLanes&=s)===0&&(s=r.pooledCache,s!=null&&(r.pooledCache=null,Ll(s)))}function gd(r){return Xv(),Zv(),Jv(),t_()}function t_(){if(rn!==5)return!1;var r=ss,s=Lm;Lm=0;var o=Ui(Eo),c=J.T,h=ue.p;try{ue.p=32>o?32:o,J.T=null,o=Vm,Vm=null;var g=ss,x=Eo;if(rn=0,bo=ss=null,Eo=0,(nt&6)!==0)throw Error(a(331));var w=nt;if(nt|=4,Vv(g.current),Mv(g,g.current,x,o),nt=w,ac(0,!1),tt&&typeof tt.onPostCommitFiberRoot=="function")try{tt.onPostCommitFiberRoot(wt,g)}catch{}return!0}finally{ue.p=h,J.T=c,e_(r,s)}}function n_(r,s,o){s=tr(o,s),s=ym(r.stateNode,s,2),r=Qa(r,s,2),r!==null&&(ea(r,2),qr(r))}function ut(r,s,o){if(r.tag===3)n_(r,r,o);else for(;s!==null;){if(s.tag===3){n_(s,r,o);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(as===null||!as.has(c))){r=tr(o,r),o=iv(2),c=Qa(s,o,2),c!==null&&(ov(o,c,s,r),ea(c,2),qr(c));break}}s=s.return}}function Fm(r,s,o){var c=r.pingCache;if(c===null){c=r.pingCache=new xA;var h=new Set;c.set(s,h)}else h=c.get(s),h===void 0&&(h=new Set,c.set(s,h));h.has(o)||(jm=!0,h.add(o),r=NA.bind(null,r,s,o),s.then(r,r))}function NA(r,s,o){var c=r.pingCache;c!==null&&c.delete(s),r.pingedLanes|=r.suspendedLanes&o,r.warmLanes&=~o,ht===r&&(Ke&o)===o&&(St===4||St===3&&(Ke&62914560)===Ke&&300>ye()-km?(nt&2)===0&&xo(r,0):Pm|=o,_o===Ke&&(_o=0)),qr(r)}function r_(r,s){s===0&&(s=fl()),r=ro(r,s),r!==null&&(ea(r,s),qr(r))}function CA(r){var s=r.memoizedState,o=0;s!==null&&(o=s.retryLane),r_(r,o)}function RA(r,s){var o=0;switch(r.tag){case 13:var c=r.stateNode,h=r.memoizedState;h!==null&&(o=h.retryLane);break;case 19:c=r.stateNode;break;case 22:c=r.stateNode._retryCache;break;default:throw Error(a(314))}c!==null&&c.delete(s),r_(r,o)}function IA(r,s){return ce(r,s)}var yd=null,wo=null,Hm=!1,vd=!1,$m=!1,gi=0;function qr(r){r!==wo&&r.next===null&&(wo===null?yd=wo=r:wo=wo.next=r),vd=!0,Hm||(Hm=!0,DA())}function ac(r,s){if(!$m&&vd){$m=!0;do for(var o=!1,c=yd;c!==null;){if(r!==0){var h=c.pendingLanes;if(h===0)var g=0;else{var x=c.suspendedLanes,w=c.pingedLanes;g=(1<<31-dn(42|r)+1)-1,g&=h&~(x&~w),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(o=!0,o_(c,g))}else g=Ke,g=Vi(c,c===ht?g:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(g&3)===0||Bs(c,g)||(o=!0,o_(c,g));c=c.next}while(o);$m=!1}}function OA(){a_()}function a_(){vd=Hm=!1;var r=0;gi!==0&&(zA()&&(r=gi),gi=0);for(var s=ye(),o=null,c=yd;c!==null;){var h=c.next,g=s_(c,s);g===0?(c.next=null,o===null?yd=h:o.next=h,h===null&&(wo=o)):(o=c,(r!==0||(g&3)!==0)&&(vd=!0)),c=h}ac(r)}function s_(r,s){for(var o=r.suspendedLanes,c=r.pingedLanes,h=r.expirationTimes,g=r.pendingLanes&-62914561;0<g;){var x=31-dn(g),w=1<<x,D=h[x];D===-1?((w&o)===0||(w&c)!==0)&&(h[x]=dl(w,s)):D<=s&&(r.expiredLanes|=w),g&=~w}if(s=ht,o=Ke,o=Vi(r,r===s?o:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),c=r.callbackNode,o===0||r===s&&(rt===2||rt===9)||r.cancelPendingCommit!==null)return c!==null&&c!==null&&we(c),r.callbackNode=null,r.callbackPriority=0;if((o&3)===0||Bs(r,o)){if(s=o&-o,s===r.callbackPriority)return s;switch(c!==null&&we(c),Ui(o)){case 2:case 8:o=Tt;break;case 32:o=Zr;break;case 268435456:o=Li;break;default:o=Zr}return c=i_.bind(null,r),o=ce(o,c),r.callbackPriority=s,r.callbackNode=o,s}return c!==null&&c!==null&&we(c),r.callbackPriority=2,r.callbackNode=null,2}function i_(r,s){if(rn!==0&&rn!==5)return r.callbackNode=null,r.callbackPriority=0,null;var o=r.callbackNode;if(gd()&&r.callbackNode!==o)return null;var c=Ke;return c=Vi(r,r===ht?c:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),c===0?null:(qv(r,c,s),s_(r,ye()),r.callbackNode!=null&&r.callbackNode===o?i_.bind(null,r):null)}function o_(r,s){if(gd())return null;qv(r,s,!0)}function DA(){qA(function(){(nt&6)!==0?ce(Qn,OA):a_()})}function Gm(){return gi===0&&(gi=hl()),gi}function l_(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:$i(""+r)}function c_(r,s){var o=s.ownerDocument.createElement("input");return o.name=s.name,o.value=s.value,r.id&&o.setAttribute("form",r.id),s.parentNode.insertBefore(o,s),r=new FormData(r),o.parentNode.removeChild(o),r}function jA(r,s,o,c,h){if(s==="submit"&&o&&o.stateNode===h){var g=l_((h[Ot]||null).action),x=c.submitter;x&&(s=(s=x[Ot]||null)?l_(s.formAction):x.getAttribute("formAction"),s!==null&&(g=s,x=null));var w=new Gi("action","action",null,c,h);r.push({event:w,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(gi!==0){var D=x?c_(h,x):new FormData(h);hm(o,{pending:!0,data:D,method:h.method,action:g},null,D)}}else typeof g=="function"&&(w.preventDefault(),D=x?c_(h,x):new FormData(h),hm(o,{pending:!0,data:D,method:h.method,action:g},g,D))},currentTarget:h}]})}}for(var Ym=0;Ym<Of.length;Ym++){var Km=Of[Ym],PA=Km.toLowerCase(),MA=Km[0].toUpperCase()+Km.slice(1);gr(PA,"on"+MA)}gr(qy,"onAnimationEnd"),gr(Fy,"onAnimationIteration"),gr(Hy,"onAnimationStart"),gr("dblclick","onDoubleClick"),gr("focusin","onFocus"),gr("focusout","onBlur"),gr(Zw,"onTransitionRun"),gr(Jw,"onTransitionStart"),gr(eA,"onTransitionCancel"),gr($y,"onTransitionEnd"),na("onMouseEnter",["mouseout","mouseover"]),na("onMouseLeave",["mouseout","mouseover"]),na("onPointerEnter",["pointerout","pointerover"]),na("onPointerLeave",["pointerout","pointerover"]),mr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),mr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),mr("onBeforeInput",["compositionend","keypress","textInput","paste"]),mr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),mr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),mr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var sc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),kA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(sc));function u_(r,s){s=(s&4)!==0;for(var o=0;o<r.length;o++){var c=r[o],h=c.event;c=c.listeners;e:{var g=void 0;if(s)for(var x=c.length-1;0<=x;x--){var w=c[x],D=w.instance,G=w.currentTarget;if(w=w.listener,D!==g&&h.isPropagationStopped())break e;g=w,h.currentTarget=G;try{g(h)}catch(ee){sd(ee)}h.currentTarget=null,g=D}else for(x=0;x<c.length;x++){if(w=c[x],D=w.instance,G=w.currentTarget,w=w.listener,D!==g&&h.isPropagationStopped())break e;g=w,h.currentTarget=G;try{g(h)}catch(ee){sd(ee)}h.currentTarget=null,g=D}}}}function Be(r,s){var o=s[gl];o===void 0&&(o=s[gl]=new Set);var c=r+"__bubble";o.has(c)||(d_(s,r,2,!1),o.add(c))}function Qm(r,s,o){var c=0;s&&(c|=4),d_(o,r,c,s)}var _d="_reactListening"+Math.random().toString(36).slice(2);function Wm(r){if(!r[_d]){r[_d]=!0,yl.forEach(function(o){o!=="selectionchange"&&(kA.has(o)||Qm(o,!1,r),Qm(o,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[_d]||(s[_d]=!0,Qm("selectionchange",!1,s))}}function d_(r,s,o,c){switch(M_(s)){case 2:var h=cS;break;case 8:h=uS;break;default:h=up}o=h.bind(null,s,o,r),h=void 0,!Jn||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(h=!0),c?h!==void 0?r.addEventListener(s,o,{capture:!0,passive:h}):r.addEventListener(s,o,!0):h!==void 0?r.addEventListener(s,o,{passive:h}):r.addEventListener(s,o,!1)}function Xm(r,s,o,c,h){var g=c;if((s&1)===0&&(s&2)===0&&c!==null)e:for(;;){if(c===null)return;var x=c.tag;if(x===3||x===4){var w=c.stateNode.containerInfo;if(w===h)break;if(x===4)for(x=c.return;x!==null;){var D=x.tag;if((D===3||D===4)&&x.stateNode.containerInfo===h)return;x=x.return}for(;w!==null;){if(x=ta(w),x===null)return;if(D=x.tag,D===5||D===6||D===26||D===27){c=g=x;continue e}w=w.parentNode}}c=c.return}Eu(function(){var G=g,ee=Zn(o),re=[];e:{var Y=Gy.get(r);if(Y!==void 0){var K=Gi,Re=r;switch(r){case"keypress":if(jr(o)===0)break e;case"keydown":case"keyup":K=Zi;break;case"focusin":Re="focus",K=Qi;break;case"focusout":Re="blur",K=Qi;break;case"beforeblur":case"afterblur":K=Qi;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":K=er;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":K=Tf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":K=Ru;break;case qy:case Fy:case Hy:K=Wi;break;case $y:K=Ou;break;case"scroll":case"scrollend":K=xu;break;case"wheel":K=Ji;break;case"copy":case"cut":case"paste":K=Xi;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":K=Rl;break;case"toggle":case"beforetoggle":K=ju}var Ae=(s&4)!==0,lt=!Ae&&(r==="scroll"||r==="scrollend"),B=Ae?Y!==null?Y+"Capture":null:Y;Ae=[];for(var U=G,$;U!==null;){var te=U;if($=te.stateNode,te=te.tag,te!==5&&te!==26&&te!==27||$===null||B===null||(te=Qs(U,B),te!=null&&Ae.push(ic(U,te,$))),lt)break;U=U.return}0<Ae.length&&(Y=new K(Y,Re,null,o,ee),re.push({event:Y,listeners:Ae}))}}if((s&7)===0){e:{if(Y=r==="mouseover"||r==="pointerover",K=r==="mouseout"||r==="pointerout",Y&&o!==sa&&(Re=o.relatedTarget||o.fromElement)&&(ta(Re)||Re[Wn]))break e;if((K||Y)&&(Y=ee.window===ee?ee:(Y=ee.ownerDocument)?Y.defaultView||Y.parentWindow:window,K?(Re=o.relatedTarget||o.toElement,K=G,Re=Re?ta(Re):null,Re!==null&&(lt=l(Re),Ae=Re.tag,Re!==lt||Ae!==5&&Ae!==27&&Ae!==6)&&(Re=null)):(K=null,Re=G),K!==Re)){if(Ae=er,te="onMouseLeave",B="onMouseEnter",U="mouse",(r==="pointerout"||r==="pointerover")&&(Ae=Rl,te="onPointerLeave",B="onPointerEnter",U="pointer"),lt=K==null?Y:Rr(K),$=Re==null?Y:Rr(Re),Y=new Ae(te,U+"leave",K,o,ee),Y.target=lt,Y.relatedTarget=$,te=null,ta(ee)===G&&(Ae=new Ae(B,U+"enter",Re,o,ee),Ae.target=$,Ae.relatedTarget=lt,te=Ae),lt=te,K&&Re)t:{for(Ae=K,B=Re,U=0,$=Ae;$;$=Ao($))U++;for($=0,te=B;te;te=Ao(te))$++;for(;0<U-$;)Ae=Ao(Ae),U--;for(;0<$-U;)B=Ao(B),$--;for(;U--;){if(Ae===B||B!==null&&Ae===B.alternate)break t;Ae=Ao(Ae),B=Ao(B)}Ae=null}else Ae=null;K!==null&&h_(re,Y,K,Ae,!1),Re!==null&&lt!==null&&h_(re,lt,Re,Ae,!0)}}e:{if(Y=G?Rr(G):window,K=Y.nodeName&&Y.nodeName.toLowerCase(),K==="select"||K==="input"&&Y.type==="file")var ge=Oy;else if(Ut(Y))if(Dy)ge=Qw;else{ge=Yw;var Ue=Gw}else K=Y.nodeName,!K||K.toLowerCase()!=="input"||Y.type!=="checkbox"&&Y.type!=="radio"?G&&xl(G.elementType)&&(ge=Oy):ge=Kw;if(ge&&(ge=ge(r,G))){ua(re,ge,o,ee);break e}Ue&&Ue(r,Y,G),r==="focusout"&&G&&Y.type==="number"&&G.memoizedProps.value!=null&&Ha(Y,"number",Y.value)}switch(Ue=G?Rr(G):window,r){case"focusin":(Ut(Ue)||Ue.contentEditable==="true")&&(eo=Ue,Cf=G,Dl=null);break;case"focusout":Dl=Cf=eo=null;break;case"mousedown":Rf=!0;break;case"contextmenu":case"mouseup":case"dragend":Rf=!1,zy(re,o,ee);break;case"selectionchange":if(Xw)break;case"keydown":case"keyup":zy(re,o,ee)}var Ee;if(kr)e:{switch(r){case"compositionstart":var Se="onCompositionStart";break e;case"compositionend":Se="onCompositionEnd";break e;case"compositionupdate":Se="onCompositionUpdate";break e}Se=void 0}else Ge?X(r,o)&&(Se="onCompositionEnd"):r==="keydown"&&o.keyCode===229&&(Se="onCompositionStart");Se&&(E&&o.locale!=="ko"&&(Ge||Se!=="onCompositionStart"?Se==="onCompositionEnd"&&Ge&&(Ee=wl()):(Dr=ee,$a="value"in Dr?Dr.value:Dr.textContent,Ge=!0)),Ue=bd(G,Se),0<Ue.length&&(Se=new Nl(Se,r,null,o,ee),re.push({event:Se,listeners:Ue}),Ee?Se.data=Ee:(Ee=de(o),Ee!==null&&(Se.data=Ee)))),(Ee=_?Vt(r,o):Ye(r,o))&&(Se=bd(G,"onBeforeInput"),0<Se.length&&(Ue=new Nl("onBeforeInput","beforeinput",null,o,ee),re.push({event:Ue,listeners:Se}),Ue.data=Ee)),jA(re,r,G,o,ee)}u_(re,s)})}function ic(r,s,o){return{instance:r,listener:s,currentTarget:o}}function bd(r,s){for(var o=s+"Capture",c=[];r!==null;){var h=r,g=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||g===null||(h=Qs(r,o),h!=null&&c.unshift(ic(r,h,g)),h=Qs(r,s),h!=null&&c.push(ic(r,h,g))),r.tag===3)return c;r=r.return}return[]}function Ao(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function h_(r,s,o,c,h){for(var g=s._reactName,x=[];o!==null&&o!==c;){var w=o,D=w.alternate,G=w.stateNode;if(w=w.tag,D!==null&&D===c)break;w!==5&&w!==26&&w!==27||G===null||(D=G,h?(G=Qs(o,g),G!=null&&x.unshift(ic(o,G,D))):h||(G=Qs(o,g),G!=null&&x.push(ic(o,G,D)))),o=o.return}x.length!==0&&r.push({event:s,listeners:x})}var LA=/\r\n?/g,VA=/\u0000|\uFFFD/g;function f_(r){return(typeof r=="string"?r:""+r).replace(LA,`
`).replace(VA,"")}function m_(r,s){return s=f_(s),f_(r)===s}function Ed(){}function ot(r,s,o,c,h,g){switch(o){case"children":typeof c=="string"?s==="body"||s==="textarea"&&c===""||Xn(r,c):(typeof c=="number"||typeof c=="bigint")&&s!=="body"&&Xn(r,""+c);break;case"className":Ir(r,"class",c);break;case"tabIndex":Ir(r,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Ir(r,o,c);break;case"style":El(r,c,g);break;case"data":if(s!=="object"){Ir(r,"data",c);break}case"src":case"href":if(c===""&&(s!=="a"||o!=="href")){r.removeAttribute(o);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){r.removeAttribute(o);break}c=$i(""+c),r.setAttribute(o,c);break;case"action":case"formAction":if(typeof c=="function"){r.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(o==="formAction"?(s!=="input"&&ot(r,s,"name",h.name,h,null),ot(r,s,"formEncType",h.formEncType,h,null),ot(r,s,"formMethod",h.formMethod,h,null),ot(r,s,"formTarget",h.formTarget,h,null)):(ot(r,s,"encType",h.encType,h,null),ot(r,s,"method",h.method,h,null),ot(r,s,"target",h.target,h,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){r.removeAttribute(o);break}c=$i(""+c),r.setAttribute(o,c);break;case"onClick":c!=null&&(r.onclick=Ed);break;case"onScroll":c!=null&&Be("scroll",r);break;case"onScrollEnd":c!=null&&Be("scrollend",r);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(a(61));if(o=c.__html,o!=null){if(h.children!=null)throw Error(a(60));r.innerHTML=o}}break;case"multiple":r.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":r.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){r.removeAttribute("xlink:href");break}o=$i(""+c),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?r.setAttribute(o,""+c):r.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?r.setAttribute(o,""):r.removeAttribute(o);break;case"capture":case"download":c===!0?r.setAttribute(o,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?r.setAttribute(o,c):r.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?r.setAttribute(o,c):r.removeAttribute(o);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?r.removeAttribute(o):r.setAttribute(o,c);break;case"popover":Be("beforetoggle",r),Be("toggle",r),Fa(r,"popover",c);break;case"xlinkActuate":en(r,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":en(r,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":en(r,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":en(r,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":en(r,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":en(r,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":en(r,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":en(r,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":en(r,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Fa(r,"is",c);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=Ef.get(o)||o,Fa(r,o,c))}}function Zm(r,s,o,c,h,g){switch(o){case"style":El(r,c,g);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(a(61));if(o=c.__html,o!=null){if(h.children!=null)throw Error(a(60));r.innerHTML=o}}break;case"children":typeof c=="string"?Xn(r,c):(typeof c=="number"||typeof c=="bigint")&&Xn(r,""+c);break;case"onScroll":c!=null&&Be("scroll",r);break;case"onScrollEnd":c!=null&&Be("scrollend",r);break;case"onClick":c!=null&&(r.onclick=Ed);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!zi.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(h=o.endsWith("Capture"),s=o.slice(2,h?o.length-7:void 0),g=r[Ot]||null,g=g!=null?g[o]:null,typeof g=="function"&&r.removeEventListener(s,g,h),typeof c=="function")){typeof g!="function"&&g!==null&&(o in r?r[o]=null:r.hasAttribute(o)&&r.removeAttribute(o)),r.addEventListener(s,c,h);break e}o in r?r[o]=c:c===!0?r.setAttribute(o,""):Fa(r,o,c)}}}function an(r,s,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Be("error",r),Be("load",r);var c=!1,h=!1,g;for(g in o)if(o.hasOwnProperty(g)){var x=o[g];if(x!=null)switch(g){case"src":c=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,s));default:ot(r,s,g,x,o,null)}}h&&ot(r,s,"srcSet",o.srcSet,o,null),c&&ot(r,s,"src",o.src,o,null);return;case"input":Be("invalid",r);var w=g=x=h=null,D=null,G=null;for(c in o)if(o.hasOwnProperty(c)){var ee=o[c];if(ee!=null)switch(c){case"name":h=ee;break;case"type":x=ee;break;case"checked":D=ee;break;case"defaultChecked":G=ee;break;case"value":g=ee;break;case"defaultValue":w=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(a(137,s));break;default:ot(r,s,c,ee,o,null)}}Gs(r,g,w,D,G,x,h,!1),Hi(r);return;case"select":Be("invalid",r),c=x=g=null;for(h in o)if(o.hasOwnProperty(h)&&(w=o[h],w!=null))switch(h){case"value":g=w;break;case"defaultValue":x=w;break;case"multiple":c=w;default:ot(r,s,h,w,o,null)}s=g,o=x,r.multiple=!!c,s!=null?aa(r,!!c,s,!1):o!=null&&aa(r,!!c,o,!0);return;case"textarea":Be("invalid",r),g=h=c=null;for(x in o)if(o.hasOwnProperty(x)&&(w=o[x],w!=null))switch(x){case"value":c=w;break;case"defaultValue":h=w;break;case"children":g=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(a(91));break;default:ot(r,s,x,w,o,null)}Ys(r,c,h,g),Hi(r);return;case"option":for(D in o)if(o.hasOwnProperty(D)&&(c=o[D],c!=null))switch(D){case"selected":r.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:ot(r,s,D,c,o,null)}return;case"dialog":Be("beforetoggle",r),Be("toggle",r),Be("cancel",r),Be("close",r);break;case"iframe":case"object":Be("load",r);break;case"video":case"audio":for(c=0;c<sc.length;c++)Be(sc[c],r);break;case"image":Be("error",r),Be("load",r);break;case"details":Be("toggle",r);break;case"embed":case"source":case"link":Be("error",r),Be("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(G in o)if(o.hasOwnProperty(G)&&(c=o[G],c!=null))switch(G){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,s));default:ot(r,s,G,c,o,null)}return;default:if(xl(s)){for(ee in o)o.hasOwnProperty(ee)&&(c=o[ee],c!==void 0&&Zm(r,s,ee,c,o,void 0));return}}for(w in o)o.hasOwnProperty(w)&&(c=o[w],c!=null&&ot(r,s,w,c,o,null))}function UA(r,s,o,c){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,g=null,x=null,w=null,D=null,G=null,ee=null;for(K in o){var re=o[K];if(o.hasOwnProperty(K)&&re!=null)switch(K){case"checked":break;case"value":break;case"defaultValue":D=re;default:c.hasOwnProperty(K)||ot(r,s,K,null,c,re)}}for(var Y in c){var K=c[Y];if(re=o[Y],c.hasOwnProperty(Y)&&(K!=null||re!=null))switch(Y){case"type":g=K;break;case"name":h=K;break;case"checked":G=K;break;case"defaultChecked":ee=K;break;case"value":x=K;break;case"defaultValue":w=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(a(137,s));break;default:K!==re&&ot(r,s,Y,K,c,re)}}Vn(r,x,w,D,G,ee,g,h);return;case"select":K=x=w=Y=null;for(g in o)if(D=o[g],o.hasOwnProperty(g)&&D!=null)switch(g){case"value":break;case"multiple":K=D;default:c.hasOwnProperty(g)||ot(r,s,g,null,c,D)}for(h in c)if(g=c[h],D=o[h],c.hasOwnProperty(h)&&(g!=null||D!=null))switch(h){case"value":Y=g;break;case"defaultValue":w=g;break;case"multiple":x=g;default:g!==D&&ot(r,s,h,g,c,D)}s=w,o=x,c=K,Y!=null?aa(r,!!o,Y,!1):!!c!=!!o&&(s!=null?aa(r,!!o,s,!0):aa(r,!!o,o?[]:"",!1));return;case"textarea":K=Y=null;for(w in o)if(h=o[w],o.hasOwnProperty(w)&&h!=null&&!c.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:ot(r,s,w,null,c,h)}for(x in c)if(h=c[x],g=o[x],c.hasOwnProperty(x)&&(h!=null||g!=null))switch(x){case"value":Y=h;break;case"defaultValue":K=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(a(91));break;default:h!==g&&ot(r,s,x,h,c,g)}st(r,Y,K);return;case"option":for(var Re in o)if(Y=o[Re],o.hasOwnProperty(Re)&&Y!=null&&!c.hasOwnProperty(Re))switch(Re){case"selected":r.selected=!1;break;default:ot(r,s,Re,null,c,Y)}for(D in c)if(Y=c[D],K=o[D],c.hasOwnProperty(D)&&Y!==K&&(Y!=null||K!=null))switch(D){case"selected":r.selected=Y&&typeof Y!="function"&&typeof Y!="symbol";break;default:ot(r,s,D,Y,c,K)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ae in o)Y=o[Ae],o.hasOwnProperty(Ae)&&Y!=null&&!c.hasOwnProperty(Ae)&&ot(r,s,Ae,null,c,Y);for(G in c)if(Y=c[G],K=o[G],c.hasOwnProperty(G)&&Y!==K&&(Y!=null||K!=null))switch(G){case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(a(137,s));break;default:ot(r,s,G,Y,c,K)}return;default:if(xl(s)){for(var lt in o)Y=o[lt],o.hasOwnProperty(lt)&&Y!==void 0&&!c.hasOwnProperty(lt)&&Zm(r,s,lt,void 0,c,Y);for(ee in c)Y=c[ee],K=o[ee],!c.hasOwnProperty(ee)||Y===K||Y===void 0&&K===void 0||Zm(r,s,ee,Y,c,K);return}}for(var B in o)Y=o[B],o.hasOwnProperty(B)&&Y!=null&&!c.hasOwnProperty(B)&&ot(r,s,B,null,c,Y);for(re in c)Y=c[re],K=o[re],!c.hasOwnProperty(re)||Y===K||Y==null&&K==null||ot(r,s,re,Y,c,K)}var Jm=null,ep=null;function xd(r){return r.nodeType===9?r:r.ownerDocument}function p_(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function g_(r,s){if(r===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&s==="foreignObject"?0:r}function tp(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var np=null;function zA(){var r=window.event;return r&&r.type==="popstate"?r===np?!1:(np=r,!0):(np=null,!1)}var y_=typeof setTimeout=="function"?setTimeout:void 0,BA=typeof clearTimeout=="function"?clearTimeout:void 0,v_=typeof Promise=="function"?Promise:void 0,qA=typeof queueMicrotask=="function"?queueMicrotask:typeof v_<"u"?function(r){return v_.resolve(null).then(r).catch(FA)}:y_;function FA(r){setTimeout(function(){throw r})}function os(r){return r==="head"}function __(r,s){var o=s,c=0,h=0;do{var g=o.nextSibling;if(r.removeChild(o),g&&g.nodeType===8)if(o=g.data,o==="/$"){if(0<c&&8>c){o=c;var x=r.ownerDocument;if(o&1&&oc(x.documentElement),o&2&&oc(x.body),o&4)for(o=x.head,oc(o),x=o.firstChild;x;){var w=x.nextSibling,D=x.nodeName;x[qs]||D==="SCRIPT"||D==="STYLE"||D==="LINK"&&x.rel.toLowerCase()==="stylesheet"||o.removeChild(x),x=w}}if(h===0){r.removeChild(g),pc(s);return}h--}else o==="$"||o==="$?"||o==="$!"?h++:c=o.charCodeAt(0)-48;else c=0;o=g}while(o);pc(s)}function rp(r){var s=r.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var o=s;switch(s=s.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":rp(o),qa(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}r.removeChild(o)}}function HA(r,s,o,c){for(;r.nodeType===1;){var h=o;if(r.nodeName.toLowerCase()!==s.toLowerCase()){if(!c&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(c){if(!r[qs])switch(s){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(g=r.getAttribute("rel"),g==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(g!==h.rel||r.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||r.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||r.getAttribute("title")!==(h.title==null?null:h.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(g=r.getAttribute("src"),(g!==(h.src==null?null:h.src)||r.getAttribute("type")!==(h.type==null?null:h.type)||r.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&g&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(s==="input"&&r.type==="hidden"){var g=h.name==null?null:""+h.name;if(h.type==="hidden"&&r.getAttribute("name")===g)return r}else return r;if(r=vr(r.nextSibling),r===null)break}return null}function $A(r,s,o){if(s==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!o||(r=vr(r.nextSibling),r===null))return null;return r}function ap(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState==="complete"}function GA(r,s){var o=r.ownerDocument;if(r.data!=="$?"||o.readyState==="complete")s();else{var c=function(){s(),o.removeEventListener("DOMContentLoaded",c)};o.addEventListener("DOMContentLoaded",c),r._reactRetry=c}}function vr(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return r}var sp=null;function b_(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var o=r.data;if(o==="$"||o==="$!"||o==="$?"){if(s===0)return r;s--}else o==="/$"&&s++}r=r.previousSibling}return null}function E_(r,s,o){switch(s=xd(o),r){case"html":if(r=s.documentElement,!r)throw Error(a(452));return r;case"head":if(r=s.head,!r)throw Error(a(453));return r;case"body":if(r=s.body,!r)throw Error(a(454));return r;default:throw Error(a(451))}}function oc(r){for(var s=r.attributes;s.length;)r.removeAttributeNode(s[0]);qa(r)}var or=new Map,x_=new Set;function Td(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var Ta=ue.d;ue.d={f:YA,r:KA,D:QA,C:WA,L:XA,m:ZA,X:eS,S:JA,M:tS};function YA(){var r=Ta.f(),s=md();return r||s}function KA(r){var s=Cr(r);s!==null&&s.tag===5&&s.type==="form"?q0(s):Ta.r(r)}var So=typeof document>"u"?null:document;function T_(r,s,o){var c=So;if(c&&typeof s=="string"&&s){var h=Dt(s);h='link[rel="'+r+'"][href="'+h+'"]',typeof o=="string"&&(h+='[crossorigin="'+o+'"]'),x_.has(h)||(x_.add(h),r={rel:r,crossOrigin:o,href:s},c.querySelector(h)===null&&(s=c.createElement("link"),an(s,"link",r),Nt(s),c.head.appendChild(s)))}}function QA(r){Ta.D(r),T_("dns-prefetch",r,null)}function WA(r,s){Ta.C(r,s),T_("preconnect",r,s)}function XA(r,s,o){Ta.L(r,s,o);var c=So;if(c&&r&&s){var h='link[rel="preload"][as="'+Dt(s)+'"]';s==="image"&&o&&o.imageSrcSet?(h+='[imagesrcset="'+Dt(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(h+='[imagesizes="'+Dt(o.imageSizes)+'"]')):h+='[href="'+Dt(r)+'"]';var g=h;switch(s){case"style":g=No(r);break;case"script":g=Co(r)}or.has(g)||(r=v({rel:"preload",href:s==="image"&&o&&o.imageSrcSet?void 0:r,as:s},o),or.set(g,r),c.querySelector(h)!==null||s==="style"&&c.querySelector(lc(g))||s==="script"&&c.querySelector(cc(g))||(s=c.createElement("link"),an(s,"link",r),Nt(s),c.head.appendChild(s)))}}function ZA(r,s){Ta.m(r,s);var o=So;if(o&&r){var c=s&&typeof s.as=="string"?s.as:"script",h='link[rel="modulepreload"][as="'+Dt(c)+'"][href="'+Dt(r)+'"]',g=h;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=Co(r)}if(!or.has(g)&&(r=v({rel:"modulepreload",href:r},s),or.set(g,r),o.querySelector(h)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(cc(g)))return}c=o.createElement("link"),an(c,"link",r),Nt(c),o.head.appendChild(c)}}}function JA(r,s,o){Ta.S(r,s,o);var c=So;if(c&&r){var h=_n(c).hoistableStyles,g=No(r);s=s||"default";var x=h.get(g);if(!x){var w={loading:0,preload:null};if(x=c.querySelector(lc(g)))w.loading=5;else{r=v({rel:"stylesheet",href:r,"data-precedence":s},o),(o=or.get(g))&&ip(r,o);var D=x=c.createElement("link");Nt(D),an(D,"link",r),D._p=new Promise(function(G,ee){D.onload=G,D.onerror=ee}),D.addEventListener("load",function(){w.loading|=1}),D.addEventListener("error",function(){w.loading|=2}),w.loading|=4,wd(x,s,c)}x={type:"stylesheet",instance:x,count:1,state:w},h.set(g,x)}}}function eS(r,s){Ta.X(r,s);var o=So;if(o&&r){var c=_n(o).hoistableScripts,h=Co(r),g=c.get(h);g||(g=o.querySelector(cc(h)),g||(r=v({src:r,async:!0},s),(s=or.get(h))&&op(r,s),g=o.createElement("script"),Nt(g),an(g,"link",r),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},c.set(h,g))}}function tS(r,s){Ta.M(r,s);var o=So;if(o&&r){var c=_n(o).hoistableScripts,h=Co(r),g=c.get(h);g||(g=o.querySelector(cc(h)),g||(r=v({src:r,async:!0,type:"module"},s),(s=or.get(h))&&op(r,s),g=o.createElement("script"),Nt(g),an(g,"link",r),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},c.set(h,g))}}function w_(r,s,o,c){var h=(h=Te.current)?Td(h):null;if(!h)throw Error(a(446));switch(r){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(s=No(o.href),o=_n(h).hoistableStyles,c=o.get(s),c||(c={type:"style",instance:null,count:0,state:null},o.set(s,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){r=No(o.href);var g=_n(h).hoistableStyles,x=g.get(r);if(x||(h=h.ownerDocument||h,x={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(r,x),(g=h.querySelector(lc(r)))&&!g._p&&(x.instance=g,x.state.loading=5),or.has(r)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},or.set(r,o),g||nS(h,r,o,x.state))),s&&c===null)throw Error(a(528,""));return x}if(s&&c!==null)throw Error(a(529,""));return null;case"script":return s=o.async,o=o.src,typeof o=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Co(o),o=_n(h).hoistableScripts,c=o.get(s),c||(c={type:"script",instance:null,count:0,state:null},o.set(s,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,r))}}function No(r){return'href="'+Dt(r)+'"'}function lc(r){return'link[rel="stylesheet"]['+r+"]"}function A_(r){return v({},r,{"data-precedence":r.precedence,precedence:null})}function nS(r,s,o,c){r.querySelector('link[rel="preload"][as="style"]['+s+"]")?c.loading=1:(s=r.createElement("link"),c.preload=s,s.addEventListener("load",function(){return c.loading|=1}),s.addEventListener("error",function(){return c.loading|=2}),an(s,"link",o),Nt(s),r.head.appendChild(s))}function Co(r){return'[src="'+Dt(r)+'"]'}function cc(r){return"script[async]"+r}function S_(r,s,o){if(s.count++,s.instance===null)switch(s.type){case"style":var c=r.querySelector('style[data-href~="'+Dt(o.href)+'"]');if(c)return s.instance=c,Nt(c),c;var h=v({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return c=(r.ownerDocument||r).createElement("style"),Nt(c),an(c,"style",h),wd(c,o.precedence,r),s.instance=c;case"stylesheet":h=No(o.href);var g=r.querySelector(lc(h));if(g)return s.state.loading|=4,s.instance=g,Nt(g),g;c=A_(o),(h=or.get(h))&&ip(c,h),g=(r.ownerDocument||r).createElement("link"),Nt(g);var x=g;return x._p=new Promise(function(w,D){x.onload=w,x.onerror=D}),an(g,"link",c),s.state.loading|=4,wd(g,o.precedence,r),s.instance=g;case"script":return g=Co(o.src),(h=r.querySelector(cc(g)))?(s.instance=h,Nt(h),h):(c=o,(h=or.get(g))&&(c=v({},o),op(c,h)),r=r.ownerDocument||r,h=r.createElement("script"),Nt(h),an(h,"link",c),r.head.appendChild(h),s.instance=h);case"void":return null;default:throw Error(a(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(c=s.instance,s.state.loading|=4,wd(c,o.precedence,r));return s.instance}function wd(r,s,o){for(var c=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=c.length?c[c.length-1]:null,g=h,x=0;x<c.length;x++){var w=c[x];if(w.dataset.precedence===s)g=w;else if(g!==h)break}g?g.parentNode.insertBefore(r,g.nextSibling):(s=o.nodeType===9?o.head:o,s.insertBefore(r,s.firstChild))}function ip(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.title==null&&(r.title=s.title)}function op(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.integrity==null&&(r.integrity=s.integrity)}var Ad=null;function N_(r,s,o){if(Ad===null){var c=new Map,h=Ad=new Map;h.set(o,c)}else h=Ad,c=h.get(o),c||(c=new Map,h.set(o,c));if(c.has(r))return c;for(c.set(r,null),o=o.getElementsByTagName(r),h=0;h<o.length;h++){var g=o[h];if(!(g[qs]||g[Lt]||r==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var x=g.getAttribute(s)||"";x=r+x;var w=c.get(x);w?w.push(g):c.set(x,[g])}}return c}function C_(r,s,o){r=r.ownerDocument||r,r.head.insertBefore(o,s==="title"?r.querySelector("head > title"):null)}function rS(r,s,o){if(o===1||s.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return r=s.disabled,typeof s.precedence=="string"&&r==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function R_(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}var uc=null;function aS(){}function sS(r,s,o){if(uc===null)throw Error(a(475));var c=uc;if(s.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var h=No(o.href),g=r.querySelector(lc(h));if(g){r=g._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(c.count++,c=Sd.bind(c),r.then(c,c)),s.state.loading|=4,s.instance=g,Nt(g);return}g=r.ownerDocument||r,o=A_(o),(h=or.get(h))&&ip(o,h),g=g.createElement("link"),Nt(g);var x=g;x._p=new Promise(function(w,D){x.onload=w,x.onerror=D}),an(g,"link",o),s.instance=g}c.stylesheets===null&&(c.stylesheets=new Map),c.stylesheets.set(s,r),(r=s.state.preload)&&(s.state.loading&3)===0&&(c.count++,s=Sd.bind(c),r.addEventListener("load",s),r.addEventListener("error",s))}}function iS(){if(uc===null)throw Error(a(475));var r=uc;return r.stylesheets&&r.count===0&&lp(r,r.stylesheets),0<r.count?function(s){var o=setTimeout(function(){if(r.stylesheets&&lp(r,r.stylesheets),r.unsuspend){var c=r.unsuspend;r.unsuspend=null,c()}},6e4);return r.unsuspend=s,function(){r.unsuspend=null,clearTimeout(o)}}:null}function Sd(){if(this.count--,this.count===0){if(this.stylesheets)lp(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var Nd=null;function lp(r,s){r.stylesheets=null,r.unsuspend!==null&&(r.count++,Nd=new Map,s.forEach(oS,r),Nd=null,Sd.call(r))}function oS(r,s){if(!(s.state.loading&4)){var o=Nd.get(r);if(o)var c=o.get(null);else{o=new Map,Nd.set(r,o);for(var h=r.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<h.length;g++){var x=h[g];(x.nodeName==="LINK"||x.getAttribute("media")!=="not all")&&(o.set(x.dataset.precedence,x),c=x)}c&&o.set(null,c)}h=s.instance,x=h.getAttribute("data-precedence"),g=o.get(x)||c,g===c&&o.set(null,h),o.set(x,h),this.count++,c=Sd.bind(this),h.addEventListener("load",c),h.addEventListener("error",c),g?g.parentNode.insertBefore(h,g.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(h,r.firstChild)),s.state.loading|=4}}var dc={$$typeof:q,Provider:null,Consumer:null,_currentValue:ve,_currentValue2:ve,_threadCount:0};function lS(r,s,o,c,h,g,x,w){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Jr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Jr(0),this.hiddenUpdates=Jr(null),this.identifierPrefix=c,this.onUncaughtError=h,this.onCaughtError=g,this.onRecoverableError=x,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=w,this.incompleteTransitions=new Map}function I_(r,s,o,c,h,g,x,w,D,G,ee,re){return r=new lS(r,s,o,x,w,D,G,re),s=1,g===!0&&(s|=24),g=zn(3,null,null,s),r.current=g,g.stateNode=r,s=Ff(),s.refCount++,r.pooledCache=s,s.refCount++,g.memoizedState={element:c,isDehydrated:o,cache:s},Yf(g),r}function O_(r){return r?(r=ao,r):ao}function D_(r,s,o,c,h,g){h=O_(h),c.context===null?c.context=h:c.pendingContext=h,c=Ka(s),c.payload={element:o},g=g===void 0?null:g,g!==null&&(c.callback=g),o=Qa(r,c,s),o!==null&&($n(o,r,s),Bl(o,r,s))}function j_(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var o=r.retryLane;r.retryLane=o!==0&&o<s?o:s}}function cp(r,s){j_(r,s),(r=r.alternate)&&j_(r,s)}function P_(r){if(r.tag===13){var s=ro(r,67108864);s!==null&&$n(s,r,67108864),cp(r,67108864)}}var Cd=!0;function cS(r,s,o,c){var h=J.T;J.T=null;var g=ue.p;try{ue.p=2,up(r,s,o,c)}finally{ue.p=g,J.T=h}}function uS(r,s,o,c){var h=J.T;J.T=null;var g=ue.p;try{ue.p=8,up(r,s,o,c)}finally{ue.p=g,J.T=h}}function up(r,s,o,c){if(Cd){var h=dp(c);if(h===null)Xm(r,s,c,Rd,o),k_(r,c);else if(hS(h,r,s,o,c))c.stopPropagation();else if(k_(r,c),s&4&&-1<dS.indexOf(r)){for(;h!==null;){var g=Cr(h);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var x=fr(g.pendingLanes);if(x!==0){var w=g;for(w.pendingLanes|=2,w.entangledLanes|=2;x;){var D=1<<31-dn(x);w.entanglements[1]|=D,x&=~D}qr(g),(nt&6)===0&&(hd=ye()+500,ac(0))}}break;case 13:w=ro(g,2),w!==null&&$n(w,g,2),md(),cp(g,2)}if(g=dp(c),g===null&&Xm(r,s,c,Rd,o),g===h)break;h=g}h!==null&&c.stopPropagation()}else Xm(r,s,c,null,o)}}function dp(r){return r=Zn(r),hp(r)}var Rd=null;function hp(r){if(Rd=null,r=ta(r),r!==null){var s=l(r);if(s===null)r=null;else{var o=s.tag;if(o===13){if(r=u(s),r!==null)return r;r=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null)}}return Rd=r,null}function M_(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(kn()){case Qn:return 2;case Tt:return 8;case Zr:case cl:return 32;case Li:return 268435456;default:return 32}default:return 32}}var fp=!1,ls=null,cs=null,us=null,hc=new Map,fc=new Map,ds=[],dS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function k_(r,s){switch(r){case"focusin":case"focusout":ls=null;break;case"dragenter":case"dragleave":cs=null;break;case"mouseover":case"mouseout":us=null;break;case"pointerover":case"pointerout":hc.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":fc.delete(s.pointerId)}}function mc(r,s,o,c,h,g){return r===null||r.nativeEvent!==g?(r={blockedOn:s,domEventName:o,eventSystemFlags:c,nativeEvent:g,targetContainers:[h]},s!==null&&(s=Cr(s),s!==null&&P_(s)),r):(r.eventSystemFlags|=c,s=r.targetContainers,h!==null&&s.indexOf(h)===-1&&s.push(h),r)}function hS(r,s,o,c,h){switch(s){case"focusin":return ls=mc(ls,r,s,o,c,h),!0;case"dragenter":return cs=mc(cs,r,s,o,c,h),!0;case"mouseover":return us=mc(us,r,s,o,c,h),!0;case"pointerover":var g=h.pointerId;return hc.set(g,mc(hc.get(g)||null,r,s,o,c,h)),!0;case"gotpointercapture":return g=h.pointerId,fc.set(g,mc(fc.get(g)||null,r,s,o,c,h)),!0}return!1}function L_(r){var s=ta(r.target);if(s!==null){var o=l(s);if(o!==null){if(s=o.tag,s===13){if(s=u(o),s!==null){r.blockedOn=s,mu(r.priority,function(){if(o.tag===13){var c=Hn();c=Ua(c);var h=ro(o,c);h!==null&&$n(h,o,c),cp(o,c)}});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){r.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Id(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var o=dp(r.nativeEvent);if(o===null){o=r.nativeEvent;var c=new o.constructor(o.type,o);sa=c,o.target.dispatchEvent(c),sa=null}else return s=Cr(o),s!==null&&P_(s),r.blockedOn=o,!1;s.shift()}return!0}function V_(r,s,o){Id(r)&&o.delete(s)}function fS(){fp=!1,ls!==null&&Id(ls)&&(ls=null),cs!==null&&Id(cs)&&(cs=null),us!==null&&Id(us)&&(us=null),hc.forEach(V_),fc.forEach(V_)}function Od(r,s){r.blockedOn===s&&(r.blockedOn=null,fp||(fp=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,fS)))}var Dd=null;function U_(r){Dd!==r&&(Dd=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Dd===r&&(Dd=null);for(var s=0;s<r.length;s+=3){var o=r[s],c=r[s+1],h=r[s+2];if(typeof c!="function"){if(hp(c||o)===null)continue;break}var g=Cr(o);g!==null&&(r.splice(s,3),s-=3,hm(g,{pending:!0,data:h,method:o.method,action:c},c,h))}}))}function pc(r){function s(D){return Od(D,r)}ls!==null&&Od(ls,r),cs!==null&&Od(cs,r),us!==null&&Od(us,r),hc.forEach(s),fc.forEach(s);for(var o=0;o<ds.length;o++){var c=ds[o];c.blockedOn===r&&(c.blockedOn=null)}for(;0<ds.length&&(o=ds[0],o.blockedOn===null);)L_(o),o.blockedOn===null&&ds.shift();if(o=(r.ownerDocument||r).$$reactFormReplay,o!=null)for(c=0;c<o.length;c+=3){var h=o[c],g=o[c+1],x=h[Ot]||null;if(typeof g=="function")x||U_(o);else if(x){var w=null;if(g&&g.hasAttribute("formAction")){if(h=g,x=g[Ot]||null)w=x.formAction;else if(hp(h)!==null)continue}else w=x.action;typeof w=="function"?o[c+1]=w:(o.splice(c,3),c-=3),U_(o)}}}function mp(r){this._internalRoot=r}jd.prototype.render=mp.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(a(409));var o=s.current,c=Hn();D_(o,c,r,s,null,null)},jd.prototype.unmount=mp.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;D_(r.current,2,null,r,null,null),md(),s[Wn]=null}};function jd(r){this._internalRoot=r}jd.prototype.unstable_scheduleHydration=function(r){if(r){var s=za();r={blockedOn:null,target:r,priority:s};for(var o=0;o<ds.length&&s!==0&&s<ds[o].priority;o++);ds.splice(o,0,r),o===0&&L_(r)}};var z_=e.version;if(z_!=="19.1.0")throw Error(a(527,z_,"19.1.0"));ue.findDOMNode=function(r){var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(a(188)):(r=Object.keys(r).join(","),Error(a(268,r)));return r=p(s),r=r!==null?y(r):null,r=r===null?null:r.stateNode,r};var mS={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:J,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Pd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Pd.isDisabled&&Pd.supportsFiber)try{wt=Pd.inject(mS),tt=Pd}catch{}}return yc.createRoot=function(r,s){if(!i(r))throw Error(a(299));var o=!1,c="",h=nv,g=rv,x=av,w=null;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onUncaughtError!==void 0&&(h=s.onUncaughtError),s.onCaughtError!==void 0&&(g=s.onCaughtError),s.onRecoverableError!==void 0&&(x=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(w=s.unstable_transitionCallbacks)),s=I_(r,1,!1,null,null,o,c,h,g,x,w,null),r[Wn]=s.current,Wm(r),new mp(s)},yc.hydrateRoot=function(r,s,o){if(!i(r))throw Error(a(299));var c=!1,h="",g=nv,x=rv,w=av,D=null,G=null;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(h=o.identifierPrefix),o.onUncaughtError!==void 0&&(g=o.onUncaughtError),o.onCaughtError!==void 0&&(x=o.onCaughtError),o.onRecoverableError!==void 0&&(w=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(D=o.unstable_transitionCallbacks),o.formState!==void 0&&(G=o.formState)),s=I_(r,1,!0,s,o??null,c,h,g,x,w,D,G),s.context=O_(null),o=s.current,c=Hn(),c=Ua(c),h=Ka(c),h.callback=null,Qa(o,h,c),o=c,s.current.lanes=o,ea(s,o),qr(s),r[Wn]=s.current,Wm(r),new jd(s)},yc.version="19.1.0",yc}var W_;function AS(){if(W_)return yp.exports;W_=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),yp.exports=wS(),yp.exports}var SS=AS(),vc={},X_;function NS(){if(X_)return vc;X_=1,Object.defineProperty(vc,"__esModule",{value:!0}),vc.parse=u,vc.serialize=y;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,a=/^[\u0020-\u003A\u003D-\u007E]*$/,i=Object.prototype.toString,l=(()=>{const T=function(){};return T.prototype=Object.create(null),T})();function u(T,C){const A=new l,M=T.length;if(M<2)return A;const I=(C==null?void 0:C.decode)||v;let H=0;do{const W=T.indexOf("=",H);if(W===-1)break;const q=T.indexOf(";",H),ie=q===-1?M:q;if(W>ie){H=T.lastIndexOf(";",W-1)+1;continue}const le=m(T,H,W),pe=p(T,W,le),k=T.slice(le,pe);if(A[k]===void 0){let R=m(T,W+1,ie),N=p(T,ie,R);const j=I(T.slice(R,N));A[k]=j}H=ie+1}while(H<M);return A}function m(T,C,A){do{const M=T.charCodeAt(C);if(M!==32&&M!==9)return C}while(++C<A);return A}function p(T,C,A){for(;C>A;){const M=T.charCodeAt(--C);if(M!==32&&M!==9)return C+1}return A}function y(T,C,A){const M=(A==null?void 0:A.encode)||encodeURIComponent;if(!n.test(T))throw new TypeError(`argument name is invalid: ${T}`);const I=M(C);if(!e.test(I))throw new TypeError(`argument val is invalid: ${C}`);let H=T+"="+I;if(!A)return H;if(A.maxAge!==void 0){if(!Number.isInteger(A.maxAge))throw new TypeError(`option maxAge is invalid: ${A.maxAge}`);H+="; Max-Age="+A.maxAge}if(A.domain){if(!t.test(A.domain))throw new TypeError(`option domain is invalid: ${A.domain}`);H+="; Domain="+A.domain}if(A.path){if(!a.test(A.path))throw new TypeError(`option path is invalid: ${A.path}`);H+="; Path="+A.path}if(A.expires){if(!b(A.expires)||!Number.isFinite(A.expires.valueOf()))throw new TypeError(`option expires is invalid: ${A.expires}`);H+="; Expires="+A.expires.toUTCString()}if(A.httpOnly&&(H+="; HttpOnly"),A.secure&&(H+="; Secure"),A.partitioned&&(H+="; Partitioned"),A.priority)switch(typeof A.priority=="string"?A.priority.toLowerCase():void 0){case"low":H+="; Priority=Low";break;case"medium":H+="; Priority=Medium";break;case"high":H+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${A.priority}`)}if(A.sameSite)switch(typeof A.sameSite=="string"?A.sameSite.toLowerCase():A.sameSite){case!0:case"strict":H+="; SameSite=Strict";break;case"lax":H+="; SameSite=Lax";break;case"none":H+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${A.sameSite}`)}return H}function v(T){if(T.indexOf("%")===-1)return T;try{return decodeURIComponent(T)}catch{return T}}function b(T){return i.call(T)==="[object Date]"}return vc}NS();var Z_="popstate";function CS(n={}){function e(i,l){let{pathname:u="/",search:m="",hash:p=""}=Di(i.location.hash.substring(1));return!u.startsWith("/")&&!u.startsWith(".")&&(u="/"+u),zp("",{pathname:u,search:m,hash:p},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function t(i,l){let u=i.document.querySelector("base"),m="";if(u&&u.getAttribute("href")){let p=i.location.href,y=p.indexOf("#");m=y===-1?p:p.slice(0,y)}return m+"#"+(typeof l=="string"?l:jc(l))}function a(i,l){ur(i.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(l)})`)}return IS(e,t,a,n)}function vt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function ur(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function RS(){return Math.random().toString(36).substring(2,10)}function J_(n,e){return{usr:n.state,key:n.key,idx:e}}function zp(n,e,t=null,a){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Di(e):e,state:t,key:e&&e.key||a||RS()}}function jc({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Di(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let a=n.indexOf("?");a>=0&&(e.search=n.substring(a),n=n.substring(0,a)),n&&(e.pathname=n)}return e}function IS(n,e,t,a={}){let{window:i=document.defaultView,v5Compat:l=!1}=a,u=i.history,m="POP",p=null,y=v();y==null&&(y=0,u.replaceState({...u.state,idx:y},""));function v(){return(u.state||{idx:null}).idx}function b(){m="POP";let I=v(),H=I==null?null:I-y;y=I,p&&p({action:m,location:M.location,delta:H})}function T(I,H){m="PUSH";let W=zp(M.location,I,H);t&&t(W,I),y=v()+1;let q=J_(W,y),ie=M.createHref(W);try{u.pushState(q,"",ie)}catch(le){if(le instanceof DOMException&&le.name==="DataCloneError")throw le;i.location.assign(ie)}l&&p&&p({action:m,location:M.location,delta:1})}function C(I,H){m="REPLACE";let W=zp(M.location,I,H);t&&t(W,I),y=v();let q=J_(W,y),ie=M.createHref(W);u.replaceState(q,"",ie),l&&p&&p({action:m,location:M.location,delta:0})}function A(I){return OS(I)}let M={get action(){return m},get location(){return n(i,u)},listen(I){if(p)throw new Error("A history only accepts one active listener");return i.addEventListener(Z_,b),p=I,()=>{i.removeEventListener(Z_,b),p=null}},createHref(I){return e(i,I)},createURL:A,encodeLocation(I){let H=A(I);return{pathname:H.pathname,search:H.search,hash:H.hash}},push:T,replace:C,go(I){return u.go(I)}};return M}function OS(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),vt(t,"No window.location.(origin|href) available to create URL");let a=typeof n=="string"?n:jc(n);return a=a.replace(/ $/,"%20"),!e&&a.startsWith("//")&&(a=t+a),new URL(a,t)}function c1(n,e,t="/"){return DS(n,e,t,!1)}function DS(n,e,t,a){let i=typeof e=="string"?Di(e):e,l=Ra(i.pathname||"/",t);if(l==null)return null;let u=u1(n);jS(u);let m=null;for(let p=0;m==null&&p<u.length;++p){let y=HS(l);m=qS(u[p],y,a)}return m}function u1(n,e=[],t=[],a=""){let i=(l,u,m)=>{let p={relativePath:m===void 0?l.path||"":m,caseSensitive:l.caseSensitive===!0,childrenIndex:u,route:l};p.relativePath.startsWith("/")&&(vt(p.relativePath.startsWith(a),`Absolute route path "${p.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(a.length));let y=Sa([a,p.relativePath]),v=t.concat(p);l.children&&l.children.length>0&&(vt(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${y}".`),u1(l.children,e,v,y)),!(l.path==null&&!l.index)&&e.push({path:y,score:zS(y,l.index),routesMeta:v})};return n.forEach((l,u)=>{var m;if(l.path===""||!((m=l.path)!=null&&m.includes("?")))i(l,u);else for(let p of d1(l.path))i(l,u,p)}),e}function d1(n){let e=n.split("/");if(e.length===0)return[];let[t,...a]=e,i=t.endsWith("?"),l=t.replace(/\?$/,"");if(a.length===0)return i?[l,""]:[l];let u=d1(a.join("/")),m=[];return m.push(...u.map(p=>p===""?l:[l,p].join("/"))),i&&m.push(...u),m.map(p=>n.startsWith("/")&&p===""?"/":p)}function jS(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:BS(e.routesMeta.map(a=>a.childrenIndex),t.routesMeta.map(a=>a.childrenIndex)))}var PS=/^:[\w-]+$/,MS=3,kS=2,LS=1,VS=10,US=-2,eb=n=>n==="*";function zS(n,e){let t=n.split("/"),a=t.length;return t.some(eb)&&(a+=US),e&&(a+=kS),t.filter(i=>!eb(i)).reduce((i,l)=>i+(PS.test(l)?MS:l===""?LS:VS),a)}function BS(n,e){return n.length===e.length&&n.slice(0,-1).every((a,i)=>a===e[i])?n[n.length-1]-e[e.length-1]:0}function qS(n,e,t=!1){let{routesMeta:a}=n,i={},l="/",u=[];for(let m=0;m<a.length;++m){let p=a[m],y=m===a.length-1,v=l==="/"?e:e.slice(l.length)||"/",b=ih({path:p.relativePath,caseSensitive:p.caseSensitive,end:y},v),T=p.route;if(!b&&y&&t&&!a[a.length-1].route.index&&(b=ih({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},v)),!b)return null;Object.assign(i,b.params),u.push({params:i,pathname:Sa([l,b.pathname]),pathnameBase:KS(Sa([l,b.pathnameBase])),route:T}),b.pathnameBase!=="/"&&(l=Sa([l,b.pathnameBase]))}return u}function ih(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,a]=FS(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let l=i[0],u=l.replace(/(.)\/+$/,"$1"),m=i.slice(1);return{params:a.reduce((y,{paramName:v,isOptional:b},T)=>{if(v==="*"){let A=m[T]||"";u=l.slice(0,l.length-A.length).replace(/(.)\/+$/,"$1")}const C=m[T];return b&&!C?y[v]=void 0:y[v]=(C||"").replace(/%2F/g,"/"),y},{}),pathname:l,pathnameBase:u,pattern:n}}function FS(n,e=!1,t=!0){ur(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let a=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,m,p)=>(a.push({paramName:m,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(a.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),a]}function HS(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ur(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Ra(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,a=n.charAt(t);return a&&a!=="/"?null:n.slice(t)||"/"}function $S(n,e="/"){let{pathname:t,search:a="",hash:i=""}=typeof n=="string"?Di(n):n;return{pathname:t?t.startsWith("/")?t:GS(t,e):e,search:QS(a),hash:WS(i)}}function GS(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function Ep(n,e,t,a){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function YS(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function xg(n){let e=YS(n);return e.map((t,a)=>a===e.length-1?t.pathname:t.pathnameBase)}function Tg(n,e,t,a=!1){let i;typeof n=="string"?i=Di(n):(i={...n},vt(!i.pathname||!i.pathname.includes("?"),Ep("?","pathname","search",i)),vt(!i.pathname||!i.pathname.includes("#"),Ep("#","pathname","hash",i)),vt(!i.search||!i.search.includes("#"),Ep("#","search","hash",i)));let l=n===""||i.pathname==="",u=l?"/":i.pathname,m;if(u==null)m=t;else{let b=e.length-1;if(!a&&u.startsWith("..")){let T=u.split("/");for(;T[0]==="..";)T.shift(),b-=1;i.pathname=T.join("/")}m=b>=0?e[b]:"/"}let p=$S(i,m),y=u&&u!=="/"&&u.endsWith("/"),v=(l||u===".")&&t.endsWith("/");return!p.pathname.endsWith("/")&&(y||v)&&(p.pathname+="/"),p}var Sa=n=>n.join("/").replace(/\/\/+/g,"/"),KS=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),QS=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,WS=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function XS(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var h1=["POST","PUT","PATCH","DELETE"];new Set(h1);var ZS=["GET",...h1];new Set(ZS);var Zo=P.createContext(null);Zo.displayName="DataRouter";var Dh=P.createContext(null);Dh.displayName="DataRouterState";var f1=P.createContext({isTransitioning:!1});f1.displayName="ViewTransition";var JS=P.createContext(new Map);JS.displayName="Fetchers";var eN=P.createContext(null);eN.displayName="Await";var Ar=P.createContext(null);Ar.displayName="Navigation";var Yc=P.createContext(null);Yc.displayName="Location";var hr=P.createContext({outlet:null,matches:[],isDataRoute:!1});hr.displayName="Route";var wg=P.createContext(null);wg.displayName="RouteError";function tN(n,{relative:e}={}){vt(Jo(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:a}=P.useContext(Ar),{hash:i,pathname:l,search:u}=Kc(n,{relative:e}),m=l;return t!=="/"&&(m=l==="/"?t:Sa([t,l])),a.createHref({pathname:m,search:u,hash:i})}function Jo(){return P.useContext(Yc)!=null}function js(){return vt(Jo(),"useLocation() may be used only in the context of a <Router> component."),P.useContext(Yc).location}var m1="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function p1(n){P.useContext(Ar).static||P.useLayoutEffect(n)}function An(){let{isDataRoute:n}=P.useContext(hr);return n?gN():nN()}function nN(){vt(Jo(),"useNavigate() may be used only in the context of a <Router> component.");let n=P.useContext(Zo),{basename:e,navigator:t}=P.useContext(Ar),{matches:a}=P.useContext(hr),{pathname:i}=js(),l=JSON.stringify(xg(a)),u=P.useRef(!1);return p1(()=>{u.current=!0}),P.useCallback((p,y={})=>{if(ur(u.current,m1),!u.current)return;if(typeof p=="number"){t.go(p);return}let v=Tg(p,JSON.parse(l),i,y.relative==="path");n==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:Sa([e,v.pathname])),(y.replace?t.replace:t.push)(v,y.state,y)},[e,t,l,i,n])}var rN=P.createContext(null);function aN(n){let e=P.useContext(hr).outlet;return e&&P.createElement(rN.Provider,{value:n},e)}function Ag(){let{matches:n}=P.useContext(hr),e=n[n.length-1];return e?e.params:{}}function Kc(n,{relative:e}={}){let{matches:t}=P.useContext(hr),{pathname:a}=js(),i=JSON.stringify(xg(t));return P.useMemo(()=>Tg(n,JSON.parse(i),a,e==="path"),[n,i,a,e])}function sN(n,e){return g1(n,e)}function g1(n,e,t,a){var W;vt(Jo(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i,static:l}=P.useContext(Ar),{matches:u}=P.useContext(hr),m=u[u.length-1],p=m?m.params:{},y=m?m.pathname:"/",v=m?m.pathnameBase:"/",b=m&&m.route;{let q=b&&b.path||"";y1(y,!b||q.endsWith("*")||q.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${y}" (under <Route path="${q}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${q}"> to <Route path="${q==="/"?"*":`${q}/*`}">.`)}let T=js(),C;if(e){let q=typeof e=="string"?Di(e):e;vt(v==="/"||((W=q.pathname)==null?void 0:W.startsWith(v)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${v}" but pathname "${q.pathname}" was given in the \`location\` prop.`),C=q}else C=T;let A=C.pathname||"/",M=A;if(v!=="/"){let q=v.replace(/^\//,"").split("/");M="/"+A.replace(/^\//,"").split("/").slice(q.length).join("/")}let I=!l&&t&&t.matches&&t.matches.length>0?t.matches:c1(n,{pathname:M});ur(b||I!=null,`No routes matched location "${C.pathname}${C.search}${C.hash}" `),ur(I==null||I[I.length-1].route.element!==void 0||I[I.length-1].route.Component!==void 0||I[I.length-1].route.lazy!==void 0,`Matched leaf route at location "${C.pathname}${C.search}${C.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let H=uN(I&&I.map(q=>Object.assign({},q,{params:Object.assign({},p,q.params),pathname:Sa([v,i.encodeLocation?i.encodeLocation(q.pathname).pathname:q.pathname]),pathnameBase:q.pathnameBase==="/"?v:Sa([v,i.encodeLocation?i.encodeLocation(q.pathnameBase).pathname:q.pathnameBase])})),u,t,a);return e&&H?P.createElement(Yc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...C},navigationType:"POP"}},H):H}function iN(){let n=pN(),e=XS(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,a="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:a},l={padding:"2px 4px",backgroundColor:a},u=null;return console.error("Error handled by React Router default ErrorBoundary:",n),u=P.createElement(P.Fragment,null,P.createElement("p",null,"💿 Hey developer 👋"),P.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",P.createElement("code",{style:l},"ErrorBoundary")," or"," ",P.createElement("code",{style:l},"errorElement")," prop on your route.")),P.createElement(P.Fragment,null,P.createElement("h2",null,"Unexpected Application Error!"),P.createElement("h3",{style:{fontStyle:"italic"}},e),t?P.createElement("pre",{style:i},t):null,u)}var oN=P.createElement(iN,null),lN=class extends P.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?P.createElement(hr.Provider,{value:this.props.routeContext},P.createElement(wg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function cN({routeContext:n,match:e,children:t}){let a=P.useContext(Zo);return a&&a.static&&a.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=e.route.id),P.createElement(hr.Provider,{value:n},t)}function uN(n,e=[],t=null,a=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let i=n,l=t==null?void 0:t.errors;if(l!=null){let p=i.findIndex(y=>y.route.id&&(l==null?void 0:l[y.route.id])!==void 0);vt(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),i=i.slice(0,Math.min(i.length,p+1))}let u=!1,m=-1;if(t)for(let p=0;p<i.length;p++){let y=i[p];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(m=p),y.route.id){let{loaderData:v,errors:b}=t,T=y.route.loader&&!v.hasOwnProperty(y.route.id)&&(!b||b[y.route.id]===void 0);if(y.route.lazy||T){u=!0,m>=0?i=i.slice(0,m+1):i=[i[0]];break}}}return i.reduceRight((p,y,v)=>{let b,T=!1,C=null,A=null;t&&(b=l&&y.route.id?l[y.route.id]:void 0,C=y.route.errorElement||oN,u&&(m<0&&v===0?(y1("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),T=!0,A=null):m===v&&(T=!0,A=y.route.hydrateFallbackElement||null)));let M=e.concat(i.slice(0,v+1)),I=()=>{let H;return b?H=C:T?H=A:y.route.Component?H=P.createElement(y.route.Component,null):y.route.element?H=y.route.element:H=p,P.createElement(cN,{match:y,routeContext:{outlet:p,matches:M,isDataRoute:t!=null},children:H})};return t&&(y.route.ErrorBoundary||y.route.errorElement||v===0)?P.createElement(lN,{location:t.location,revalidation:t.revalidation,component:C,error:b,children:I(),routeContext:{outlet:null,matches:M,isDataRoute:!0}}):I()},null)}function Sg(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function dN(n){let e=P.useContext(Zo);return vt(e,Sg(n)),e}function hN(n){let e=P.useContext(Dh);return vt(e,Sg(n)),e}function fN(n){let e=P.useContext(hr);return vt(e,Sg(n)),e}function Ng(n){let e=fN(n),t=e.matches[e.matches.length-1];return vt(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function mN(){return Ng("useRouteId")}function pN(){var a;let n=P.useContext(wg),e=hN("useRouteError"),t=Ng("useRouteError");return n!==void 0?n:(a=e.errors)==null?void 0:a[t]}function gN(){let{router:n}=dN("useNavigate"),e=Ng("useNavigate"),t=P.useRef(!1);return p1(()=>{t.current=!0}),P.useCallback(async(i,l={})=>{ur(t.current,m1),t.current&&(typeof i=="number"?n.navigate(i):await n.navigate(i,{fromRouteId:e,...l}))},[n,e])}var tb={};function y1(n,e,t){!e&&!tb[n]&&(tb[n]=!0,ur(!1,t))}P.memo(yN);function yN({routes:n,future:e,state:t}){return g1(n,void 0,t,e)}function v1({to:n,replace:e,state:t,relative:a}){vt(Jo(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=P.useContext(Ar);ur(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=P.useContext(hr),{pathname:u}=js(),m=An(),p=Tg(n,xg(l),u,a==="path"),y=JSON.stringify(p);return P.useEffect(()=>{m(JSON.parse(y),{replace:e,state:t,relative:a})},[m,y,a,e,t]),null}function vN(n){return aN(n.context)}function Tn(n){vt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function _N({basename:n="/",children:e=null,location:t,navigationType:a="POP",navigator:i,static:l=!1}){vt(!Jo(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=n.replace(/^\/*/,"/"),m=P.useMemo(()=>({basename:u,navigator:i,static:l,future:{}}),[u,i,l]);typeof t=="string"&&(t=Di(t));let{pathname:p="/",search:y="",hash:v="",state:b=null,key:T="default"}=t,C=P.useMemo(()=>{let A=Ra(p,u);return A==null?null:{location:{pathname:A,search:y,hash:v,state:b,key:T},navigationType:a}},[u,p,y,v,b,T,a]);return ur(C!=null,`<Router basename="${u}"> is not able to match the URL "${p}${y}${v}" because it does not start with the basename, so the <Router> won't render anything.`),C==null?null:P.createElement(Ar.Provider,{value:m},P.createElement(Yc.Provider,{children:e,value:C}))}function bN({children:n,location:e}){return sN(Bp(n),e)}function Bp(n,e=[]){let t=[];return P.Children.forEach(n,(a,i)=>{if(!P.isValidElement(a))return;let l=[...e,i];if(a.type===P.Fragment){t.push.apply(t,Bp(a.props.children,l));return}vt(a.type===Tn,`[${typeof a.type=="string"?a.type:a.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),vt(!a.props.index||!a.props.children,"An index route cannot have child routes.");let u={id:a.props.id||l.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,hydrateFallbackElement:a.props.hydrateFallbackElement,HydrateFallback:a.props.HydrateFallback,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.hasErrorBoundary===!0||a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(u.children=Bp(a.props.children,l)),t.push(u)}),t}var Fd="get",Hd="application/x-www-form-urlencoded";function jh(n){return n!=null&&typeof n.tagName=="string"}function EN(n){return jh(n)&&n.tagName.toLowerCase()==="button"}function xN(n){return jh(n)&&n.tagName.toLowerCase()==="form"}function TN(n){return jh(n)&&n.tagName.toLowerCase()==="input"}function wN(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function AN(n,e){return n.button===0&&(!e||e==="_self")&&!wN(n)}var Md=null;function SN(){if(Md===null)try{new FormData(document.createElement("form"),0),Md=!1}catch{Md=!0}return Md}var NN=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function xp(n){return n!=null&&!NN.has(n)?(ur(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Hd}"`),null):n}function CN(n,e){let t,a,i,l,u;if(xN(n)){let m=n.getAttribute("action");a=m?Ra(m,e):null,t=n.getAttribute("method")||Fd,i=xp(n.getAttribute("enctype"))||Hd,l=new FormData(n)}else if(EN(n)||TN(n)&&(n.type==="submit"||n.type==="image")){let m=n.form;if(m==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=n.getAttribute("formaction")||m.getAttribute("action");if(a=p?Ra(p,e):null,t=n.getAttribute("formmethod")||m.getAttribute("method")||Fd,i=xp(n.getAttribute("formenctype"))||xp(m.getAttribute("enctype"))||Hd,l=new FormData(m,n),!SN()){let{name:y,type:v,value:b}=n;if(v==="image"){let T=y?`${y}.`:"";l.append(`${T}x`,"0"),l.append(`${T}y`,"0")}else y&&l.append(y,b)}}else{if(jh(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Fd,a=null,i=Hd,u=n}return l&&i==="text/plain"&&(u=l,l=void 0),{action:a,method:t.toLowerCase(),encType:i,formData:l,body:u}}function Cg(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function RN(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function IN(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function ON(n,e,t){let a=await Promise.all(n.map(async i=>{let l=e.routes[i.route.id];if(l){let u=await RN(l,t);return u.links?u.links():[]}return[]}));return MN(a.flat(1).filter(IN).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function nb(n,e,t,a,i,l){let u=(p,y)=>t[y]?p.route.id!==t[y].route.id:!0,m=(p,y)=>{var v;return t[y].pathname!==p.pathname||((v=t[y].route.path)==null?void 0:v.endsWith("*"))&&t[y].params["*"]!==p.params["*"]};return l==="assets"?e.filter((p,y)=>u(p,y)||m(p,y)):l==="data"?e.filter((p,y)=>{var b;let v=a.routes[p.route.id];if(!v||!v.hasLoader)return!1;if(u(p,y)||m(p,y))return!0;if(p.route.shouldRevalidate){let T=p.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((b=t[0])==null?void 0:b.params)||{},nextUrl:new URL(n,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof T=="boolean")return T}return!0}):[]}function DN(n,e,{includeHydrateFallback:t}={}){return jN(n.map(a=>{let i=e.routes[a.route.id];if(!i)return[];let l=[i.module];return i.clientActionModule&&(l=l.concat(i.clientActionModule)),i.clientLoaderModule&&(l=l.concat(i.clientLoaderModule)),t&&i.hydrateFallbackModule&&(l=l.concat(i.hydrateFallbackModule)),i.imports&&(l=l.concat(i.imports)),l}).flat(1))}function jN(n){return[...new Set(n)]}function PN(n){let e={},t=Object.keys(n).sort();for(let a of t)e[a]=n[a];return e}function MN(n,e){let t=new Set;return new Set(e),n.reduce((a,i)=>{let l=JSON.stringify(PN(i));return t.has(l)||(t.add(l),a.push({key:l,link:i})),a},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var kN=new Set([100,101,204,205]);function LN(n,e){let t=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t.pathname==="/"?t.pathname="_root.data":e&&Ra(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function _1(){let n=P.useContext(Zo);return Cg(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function VN(){let n=P.useContext(Dh);return Cg(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Rg=P.createContext(void 0);Rg.displayName="FrameworkContext";function b1(){let n=P.useContext(Rg);return Cg(n,"You must render this element inside a <HydratedRouter> element"),n}function UN(n,e){let t=P.useContext(Rg),[a,i]=P.useState(!1),[l,u]=P.useState(!1),{onFocus:m,onBlur:p,onMouseEnter:y,onMouseLeave:v,onTouchStart:b}=e,T=P.useRef(null);P.useEffect(()=>{if(n==="render"&&u(!0),n==="viewport"){let M=H=>{H.forEach(W=>{u(W.isIntersecting)})},I=new IntersectionObserver(M,{threshold:.5});return T.current&&I.observe(T.current),()=>{I.disconnect()}}},[n]),P.useEffect(()=>{if(a){let M=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(M)}}},[a]);let C=()=>{i(!0)},A=()=>{i(!1),u(!1)};return t?n!=="intent"?[l,T,{}]:[l,T,{onFocus:_c(m,C),onBlur:_c(p,A),onMouseEnter:_c(y,C),onMouseLeave:_c(v,A),onTouchStart:_c(b,C)}]:[!1,T,{}]}function _c(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function zN({page:n,...e}){let{router:t}=_1(),a=P.useMemo(()=>c1(t.routes,n,t.basename),[t.routes,n,t.basename]);return a?P.createElement(qN,{page:n,matches:a,...e}):null}function BN(n){let{manifest:e,routeModules:t}=b1(),[a,i]=P.useState([]);return P.useEffect(()=>{let l=!1;return ON(n,e,t).then(u=>{l||i(u)}),()=>{l=!0}},[n,e,t]),a}function qN({page:n,matches:e,...t}){let a=js(),{manifest:i,routeModules:l}=b1(),{basename:u}=_1(),{loaderData:m,matches:p}=VN(),y=P.useMemo(()=>nb(n,e,p,i,a,"data"),[n,e,p,i,a]),v=P.useMemo(()=>nb(n,e,p,i,a,"assets"),[n,e,p,i,a]),b=P.useMemo(()=>{if(n===a.pathname+a.search+a.hash)return[];let A=new Set,M=!1;if(e.forEach(H=>{var q;let W=i.routes[H.route.id];!W||!W.hasLoader||(!y.some(ie=>ie.route.id===H.route.id)&&H.route.id in m&&((q=l[H.route.id])!=null&&q.shouldRevalidate)||W.hasClientLoader?M=!0:A.add(H.route.id))}),A.size===0)return[];let I=LN(n,u);return M&&A.size>0&&I.searchParams.set("_routes",e.filter(H=>A.has(H.route.id)).map(H=>H.route.id).join(",")),[I.pathname+I.search]},[u,m,a,i,y,e,n,l]),T=P.useMemo(()=>DN(v,i),[v,i]),C=BN(v);return P.createElement(P.Fragment,null,b.map(A=>P.createElement("link",{key:A,rel:"prefetch",as:"fetch",href:A,...t})),T.map(A=>P.createElement("link",{key:A,rel:"modulepreload",href:A,...t})),C.map(({key:A,link:M})=>P.createElement("link",{key:A,...M})))}function FN(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var E1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{E1&&(window.__reactRouterVersion="7.6.0")}catch{}function HN({basename:n,children:e,window:t}){let a=P.useRef();a.current==null&&(a.current=CS({window:t,v5Compat:!0}));let i=a.current,[l,u]=P.useState({action:i.action,location:i.location}),m=P.useCallback(p=>{P.startTransition(()=>u(p))},[u]);return P.useLayoutEffect(()=>i.listen(m),[i,m]),P.createElement(_N,{basename:n,children:e,location:l.location,navigationType:l.action,navigator:i})}var x1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ph=P.forwardRef(function({onClick:e,discover:t="render",prefetch:a="none",relative:i,reloadDocument:l,replace:u,state:m,target:p,to:y,preventScrollReset:v,viewTransition:b,...T},C){let{basename:A}=P.useContext(Ar),M=typeof y=="string"&&x1.test(y),I,H=!1;if(typeof y=="string"&&M&&(I=y,E1))try{let N=new URL(window.location.href),j=y.startsWith("//")?new URL(N.protocol+y):new URL(y),V=Ra(j.pathname,A);j.origin===N.origin&&V!=null?y=V+j.search+j.hash:H=!0}catch{ur(!1,`<Link to="${y}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let W=tN(y,{relative:i}),[q,ie,le]=UN(a,T),pe=YN(y,{replace:u,state:m,target:p,preventScrollReset:v,relative:i,viewTransition:b});function k(N){e&&e(N),N.defaultPrevented||pe(N)}let R=P.createElement("a",{...T,...le,href:I||W,onClick:H||l?e:k,ref:FN(C,ie),target:p,"data-discover":!M&&t==="render"?"true":void 0});return q&&!M?P.createElement(P.Fragment,null,R,P.createElement(zN,{page:W})):R});Ph.displayName="Link";var vi=P.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:a="",end:i=!1,style:l,to:u,viewTransition:m,children:p,...y},v){let b=Kc(u,{relative:y.relative}),T=js(),C=P.useContext(Dh),{navigator:A,basename:M}=P.useContext(Ar),I=C!=null&&ZN(b)&&m===!0,H=A.encodeLocation?A.encodeLocation(b).pathname:b.pathname,W=T.pathname,q=C&&C.navigation&&C.navigation.location?C.navigation.location.pathname:null;t||(W=W.toLowerCase(),q=q?q.toLowerCase():null,H=H.toLowerCase()),q&&M&&(q=Ra(q,M)||q);const ie=H!=="/"&&H.endsWith("/")?H.length-1:H.length;let le=W===H||!i&&W.startsWith(H)&&W.charAt(ie)==="/",pe=q!=null&&(q===H||!i&&q.startsWith(H)&&q.charAt(H.length)==="/"),k={isActive:le,isPending:pe,isTransitioning:I},R=le?e:void 0,N;typeof a=="function"?N=a(k):N=[a,le?"active":null,pe?"pending":null,I?"transitioning":null].filter(Boolean).join(" ");let j=typeof l=="function"?l(k):l;return P.createElement(Ph,{...y,"aria-current":R,className:N,ref:v,style:j,to:u,viewTransition:m},typeof p=="function"?p(k):p)});vi.displayName="NavLink";var $N=P.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:a,replace:i,state:l,method:u=Fd,action:m,onSubmit:p,relative:y,preventScrollReset:v,viewTransition:b,...T},C)=>{let A=WN(),M=XN(m,{relative:y}),I=u.toLowerCase()==="get"?"get":"post",H=typeof m=="string"&&x1.test(m),W=q=>{if(p&&p(q),q.defaultPrevented)return;q.preventDefault();let ie=q.nativeEvent.submitter,le=(ie==null?void 0:ie.getAttribute("formmethod"))||u;A(ie||q.currentTarget,{fetcherKey:e,method:le,navigate:t,replace:i,state:l,relative:y,preventScrollReset:v,viewTransition:b})};return P.createElement("form",{ref:C,method:I,action:M,onSubmit:a?p:W,...T,"data-discover":!H&&n==="render"?"true":void 0})});$N.displayName="Form";function GN(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function T1(n){let e=P.useContext(Zo);return vt(e,GN(n)),e}function YN(n,{target:e,replace:t,state:a,preventScrollReset:i,relative:l,viewTransition:u}={}){let m=An(),p=js(),y=Kc(n,{relative:l});return P.useCallback(v=>{if(AN(v,e)){v.preventDefault();let b=t!==void 0?t:jc(p)===jc(y);m(n,{replace:b,state:a,preventScrollReset:i,relative:l,viewTransition:u})}},[p,m,y,t,a,e,n,i,l,u])}var KN=0,QN=()=>`__${String(++KN)}__`;function WN(){let{router:n}=T1("useSubmit"),{basename:e}=P.useContext(Ar),t=mN();return P.useCallback(async(a,i={})=>{let{action:l,method:u,encType:m,formData:p,body:y}=CN(a,e);if(i.navigate===!1){let v=i.fetcherKey||QN();await n.fetch(v,t,i.action||l,{preventScrollReset:i.preventScrollReset,formData:p,body:y,formMethod:i.method||u,formEncType:i.encType||m,flushSync:i.flushSync})}else await n.navigate(i.action||l,{preventScrollReset:i.preventScrollReset,formData:p,body:y,formMethod:i.method||u,formEncType:i.encType||m,replace:i.replace,state:i.state,fromRouteId:t,flushSync:i.flushSync,viewTransition:i.viewTransition})},[n,e,t])}function XN(n,{relative:e}={}){let{basename:t}=P.useContext(Ar),a=P.useContext(hr);vt(a,"useFormAction must be used inside a RouteContext");let[i]=a.matches.slice(-1),l={...Kc(n||".",{relative:e})},u=js();if(n==null){l.search=u.search;let m=new URLSearchParams(l.search),p=m.getAll("index");if(p.some(v=>v==="")){m.delete("index"),p.filter(b=>b).forEach(b=>m.append("index",b));let v=m.toString();l.search=v?`?${v}`:""}}return(!n||n===".")&&i.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:Sa([t,l.pathname])),jc(l)}function ZN(n,e={}){let t=P.useContext(f1);vt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=T1("useViewTransitionState"),i=Kc(n,{relative:e.relative});if(!t.isTransitioning)return!1;let l=Ra(t.currentLocation.pathname,a)||t.currentLocation.pathname,u=Ra(t.nextLocation.pathname,a)||t.nextLocation.pathname;return ih(i.pathname,u)!=null||ih(i.pathname,l)!=null}[...kN];const JN=()=>{};var rb={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w1=function(n){const e=[];let t=0;for(let a=0;a<n.length;a++){let i=n.charCodeAt(a);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&a+1<n.length&&(n.charCodeAt(a+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++a)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},eC=function(n){const e=[];let t=0,a=0;for(;t<n.length;){const i=n[t++];if(i<128)e[a++]=String.fromCharCode(i);else if(i>191&&i<224){const l=n[t++];e[a++]=String.fromCharCode((i&31)<<6|l&63)}else if(i>239&&i<365){const l=n[t++],u=n[t++],m=n[t++],p=((i&7)<<18|(l&63)<<12|(u&63)<<6|m&63)-65536;e[a++]=String.fromCharCode(55296+(p>>10)),e[a++]=String.fromCharCode(56320+(p&1023))}else{const l=n[t++],u=n[t++];e[a++]=String.fromCharCode((i&15)<<12|(l&63)<<6|u&63)}}return e.join("")},A1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,a=[];for(let i=0;i<n.length;i+=3){const l=n[i],u=i+1<n.length,m=u?n[i+1]:0,p=i+2<n.length,y=p?n[i+2]:0,v=l>>2,b=(l&3)<<4|m>>4;let T=(m&15)<<2|y>>6,C=y&63;p||(C=64,u||(T=64)),a.push(t[v],t[b],t[T],t[C])}return a.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(w1(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):eC(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,a=[];for(let i=0;i<n.length;){const l=t[n.charAt(i++)],m=i<n.length?t[n.charAt(i)]:0;++i;const y=i<n.length?t[n.charAt(i)]:64;++i;const b=i<n.length?t[n.charAt(i)]:64;if(++i,l==null||m==null||y==null||b==null)throw new tC;const T=l<<2|m>>4;if(a.push(T),y!==64){const C=m<<4&240|y>>2;if(a.push(C),b!==64){const A=y<<6&192|b;a.push(A)}}}return a},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class tC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const nC=function(n){const e=w1(n);return A1.encodeByteArray(e,!0)},oh=function(n){return nC(n).replace(/\./g,"")},S1=function(n){try{return A1.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aC=()=>rC().__FIREBASE_DEFAULTS__,sC=()=>{if(typeof process>"u"||typeof rb>"u")return;const n=rb.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},iC=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&S1(n[1]);return e&&JSON.parse(e)},Mh=()=>{try{return JN()||aC()||sC()||iC()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},N1=n=>{var e,t;return(t=(e=Mh())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},oC=n=>{const e=N1(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const a=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),a]:[e.substring(0,t),a]},C1=()=>{var n;return(n=Mh())===null||n===void 0?void 0:n.config},R1=n=>{var e;return(e=Mh())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,a)=>{t?this.reject(t):this.resolve(a),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,a))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qc(n){return n.endsWith(".cloudworkstations.dev")}async function I1(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cC(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},a=e||"demo-project",i=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${a}`,aud:a,iat:i,exp:i+3600,auth_time:i,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},n);return[oh(JSON.stringify(t)),oh(JSON.stringify(u)),""].join(".")}const Nc={};function uC(){const n={prod:[],emulator:[]};for(const e of Object.keys(Nc))Nc[e]?n.emulator.push(e):n.prod.push(e);return n}function dC(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let ab=!1;function kh(n,e){if(typeof window>"u"||typeof document>"u"||!Qc(window.location.host)||Nc[n]===e||Nc[n]||ab)return;Nc[n]=e;function t(T){return`__firebase__banner__${T}`}const a="__firebase__banner",l=uC().prod.length>0;function u(){const T=document.getElementById(a);T&&T.remove()}function m(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function p(T,C){T.setAttribute("width","24"),T.setAttribute("id",C),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function y(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{ab=!0,u()},T}function v(T,C){T.setAttribute("id",C),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function b(){const T=dC(a),C=t("text"),A=document.getElementById(C)||document.createElement("span"),M=t("learnmore"),I=document.getElementById(M)||document.createElement("a"),H=t("preprendIcon"),W=document.getElementById(H)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const q=T.element;m(q),v(I,M);const ie=y();p(W,H),q.append(W,A,I,ie),document.body.appendChild(q)}l?(A.innerText="Preview backend disconnected.",W.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(W.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,A.innerText="Preview backend running in this workspace."),A.setAttribute("id",C)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",b):b()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function hC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(vn())}function fC(){var n;const e=(n=Mh())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function mC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function pC(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function gC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function yC(){const n=vn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function vC(){return!fC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function _C(){try{return typeof indexedDB=="object"}catch{return!1}}function bC(){return new Promise((n,e)=>{try{let t=!0;const a="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(a);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(a),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var l;e(((l=i.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EC="FirebaseError";class Ma extends Error{constructor(e,t,a){super(t),this.code=e,this.customData=a,this.name=EC,Object.setPrototypeOf(this,Ma.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Wc.prototype.create)}}class Wc{constructor(e,t,a){this.service=e,this.serviceName=t,this.errors=a}create(e,...t){const a=t[0]||{},i=`${this.service}/${e}`,l=this.errors[e],u=l?xC(l,a):"Error",m=`${this.serviceName}: ${u} (${i}).`;return new Ma(i,m,a)}}function xC(n,e){return n.replace(TC,(t,a)=>{const i=e[a];return i!=null?String(i):`<${a}?>`})}const TC=/\{\$([^}]+)}/g;function wC(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Ai(n,e){if(n===e)return!0;const t=Object.keys(n),a=Object.keys(e);for(const i of t){if(!a.includes(i))return!1;const l=n[i],u=e[i];if(sb(l)&&sb(u)){if(!Ai(l,u))return!1}else if(l!==u)return!1}for(const i of a)if(!t.includes(i))return!1;return!0}function sb(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xc(n){const e=[];for(const[t,a]of Object.entries(n))Array.isArray(a)?a.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(a));return e.length?"&"+e.join("&"):""}function Ec(n){const e={};return n.replace(/^\?/,"").split("&").forEach(a=>{if(a){const[i,l]=a.split("=");e[decodeURIComponent(i)]=decodeURIComponent(l)}}),e}function xc(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function AC(n,e){const t=new SC(n,e);return t.subscribe.bind(t)}class SC{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(a=>{this.error(a)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,a){let i;if(e===void 0&&t===void 0&&a===void 0)throw new Error("Missing Observer.");NC(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:a},i.next===void 0&&(i.next=Tp),i.error===void 0&&(i.error=Tp),i.complete===void 0&&(i.complete=Tp);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(a){typeof console<"u"&&console.error&&console.error(a)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function NC(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Tp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ht(n){return n&&n._delegate?n._delegate:n}class Si{constructor(e,t,a){this.name=e,this.instanceFactory=t,this.type=a,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _i="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CC{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const a=new lC;if(this.instancesDeferred.set(t,a),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&a.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const a=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(a)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:a})}catch(l){if(i)return null;throw l}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(IC(e))try{this.getOrInitializeService({instanceIdentifier:_i})}catch{}for(const[t,a]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:i});a.resolve(l)}catch{}}}}clearInstance(e=_i){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=_i){return this.instances.has(e)}getOptions(e=_i){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,a=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(a))throw Error(`${this.name}(${a}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:a,options:t});for(const[l,u]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(l);a===m&&u.resolve(i)}return i}onInit(e,t){var a;const i=this.normalizeInstanceIdentifier(t),l=(a=this.onInitCallbacks.get(i))!==null&&a!==void 0?a:new Set;l.add(e),this.onInitCallbacks.set(i,l);const u=this.instances.get(i);return u&&e(u,i),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const a=this.onInitCallbacks.get(t);if(a)for(const i of a)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let a=this.instances.get(e);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:RC(e),options:t}),this.instances.set(e,a),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(a,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,a)}catch{}return a||null}normalizeInstanceIdentifier(e=_i){return this.component?this.component.multipleInstances?e:_i:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function RC(n){return n===_i?void 0:n}function IC(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new CC(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var He;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(He||(He={}));const DC={debug:He.DEBUG,verbose:He.VERBOSE,info:He.INFO,warn:He.WARN,error:He.ERROR,silent:He.SILENT},jC=He.INFO,PC={[He.DEBUG]:"log",[He.VERBOSE]:"log",[He.INFO]:"info",[He.WARN]:"warn",[He.ERROR]:"error"},MC=(n,e,...t)=>{if(e<n.logLevel)return;const a=new Date().toISOString(),i=PC[e];if(i)console[i](`[${a}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ig{constructor(e){this.name=e,this._logLevel=jC,this._logHandler=MC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in He))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?DC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,He.DEBUG,...e),this._logHandler(this,He.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,He.VERBOSE,...e),this._logHandler(this,He.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,He.INFO,...e),this._logHandler(this,He.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,He.WARN,...e),this._logHandler(this,He.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,He.ERROR,...e),this._logHandler(this,He.ERROR,...e)}}const kC=(n,e)=>e.some(t=>n instanceof t);let ib,ob;function LC(){return ib||(ib=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function VC(){return ob||(ob=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const O1=new WeakMap,qp=new WeakMap,D1=new WeakMap,wp=new WeakMap,Og=new WeakMap;function UC(n){const e=new Promise((t,a)=>{const i=()=>{n.removeEventListener("success",l),n.removeEventListener("error",u)},l=()=>{t(bs(n.result)),i()},u=()=>{a(n.error),i()};n.addEventListener("success",l),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&O1.set(t,n)}).catch(()=>{}),Og.set(e,n),e}function zC(n){if(qp.has(n))return;const e=new Promise((t,a)=>{const i=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",u),n.removeEventListener("abort",u)},l=()=>{t(),i()},u=()=>{a(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",l),n.addEventListener("error",u),n.addEventListener("abort",u)});qp.set(n,e)}let Fp={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return qp.get(n);if(e==="objectStoreNames")return n.objectStoreNames||D1.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return bs(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function BC(n){Fp=n(Fp)}function qC(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const a=n.call(Ap(this),e,...t);return D1.set(a,e.sort?e.sort():[e]),bs(a)}:VC().includes(n)?function(...e){return n.apply(Ap(this),e),bs(O1.get(this))}:function(...e){return bs(n.apply(Ap(this),e))}}function FC(n){return typeof n=="function"?qC(n):(n instanceof IDBTransaction&&zC(n),kC(n,LC())?new Proxy(n,Fp):n)}function bs(n){if(n instanceof IDBRequest)return UC(n);if(wp.has(n))return wp.get(n);const e=FC(n);return e!==n&&(wp.set(n,e),Og.set(e,n)),e}const Ap=n=>Og.get(n);function HC(n,e,{blocked:t,upgrade:a,blocking:i,terminated:l}={}){const u=indexedDB.open(n,e),m=bs(u);return a&&u.addEventListener("upgradeneeded",p=>{a(bs(u.result),p.oldVersion,p.newVersion,bs(u.transaction),p)}),t&&u.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),m.then(p=>{l&&p.addEventListener("close",()=>l()),i&&p.addEventListener("versionchange",y=>i(y.oldVersion,y.newVersion,y))}).catch(()=>{}),m}const $C=["get","getKey","getAll","getAllKeys","count"],GC=["put","add","delete","clear"],Sp=new Map;function lb(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Sp.get(e))return Sp.get(e);const t=e.replace(/FromIndex$/,""),a=e!==t,i=GC.includes(t);if(!(t in(a?IDBIndex:IDBObjectStore).prototype)||!(i||$C.includes(t)))return;const l=async function(u,...m){const p=this.transaction(u,i?"readwrite":"readonly");let y=p.store;return a&&(y=y.index(m.shift())),(await Promise.all([y[t](...m),i&&p.done]))[0]};return Sp.set(e,l),l}BC(n=>({...n,get:(e,t,a)=>lb(e,t)||n.get(e,t,a),has:(e,t)=>!!lb(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(KC(t)){const a=t.getImmediate();return`${a.library}/${a.version}`}else return null}).filter(t=>t).join(" ")}}function KC(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Hp="@firebase/app",cb="0.12.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ia=new Ig("@firebase/app"),QC="@firebase/app-compat",WC="@firebase/analytics-compat",XC="@firebase/analytics",ZC="@firebase/app-check-compat",JC="@firebase/app-check",e2="@firebase/auth",t2="@firebase/auth-compat",n2="@firebase/database",r2="@firebase/data-connect",a2="@firebase/database-compat",s2="@firebase/functions",i2="@firebase/functions-compat",o2="@firebase/installations",l2="@firebase/installations-compat",c2="@firebase/messaging",u2="@firebase/messaging-compat",d2="@firebase/performance",h2="@firebase/performance-compat",f2="@firebase/remote-config",m2="@firebase/remote-config-compat",p2="@firebase/storage",g2="@firebase/storage-compat",y2="@firebase/firestore",v2="@firebase/vertexai",_2="@firebase/firestore-compat",b2="firebase",E2="11.7.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $p="[DEFAULT]",x2={[Hp]:"fire-core",[QC]:"fire-core-compat",[XC]:"fire-analytics",[WC]:"fire-analytics-compat",[JC]:"fire-app-check",[ZC]:"fire-app-check-compat",[e2]:"fire-auth",[t2]:"fire-auth-compat",[n2]:"fire-rtdb",[r2]:"fire-data-connect",[a2]:"fire-rtdb-compat",[s2]:"fire-fn",[i2]:"fire-fn-compat",[o2]:"fire-iid",[l2]:"fire-iid-compat",[c2]:"fire-fcm",[u2]:"fire-fcm-compat",[d2]:"fire-perf",[h2]:"fire-perf-compat",[f2]:"fire-rc",[m2]:"fire-rc-compat",[p2]:"fire-gcs",[g2]:"fire-gcs-compat",[y2]:"fire-fst",[_2]:"fire-fst-compat",[v2]:"fire-vertex","fire-js":"fire-js",[b2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lh=new Map,T2=new Map,Gp=new Map;function ub(n,e){try{n.container.addComponent(e)}catch(t){Ia.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Bo(n){const e=n.name;if(Gp.has(e))return Ia.debug(`There were multiple attempts to register component ${e}.`),!1;Gp.set(e,n);for(const t of lh.values())ub(t,n);for(const t of T2.values())ub(t,n);return!0}function Dg(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function lr(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Es=new Wc("app","Firebase",w2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A2{constructor(e,t,a){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=a,this.container.addComponent(new Si("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Es.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const el=E2;function j1(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const a=Object.assign({name:$p,automaticDataCollectionEnabled:!1},e),i=a.name;if(typeof i!="string"||!i)throw Es.create("bad-app-name",{appName:String(i)});if(t||(t=C1()),!t)throw Es.create("no-options");const l=lh.get(i);if(l){if(Ai(t,l.options)&&Ai(a,l.config))return l;throw Es.create("duplicate-app",{appName:i})}const u=new OC(i);for(const p of Gp.values())u.addComponent(p);const m=new A2(t,a,u);return lh.set(i,m),m}function P1(n=$p){const e=lh.get(n);if(!e&&n===$p&&C1())return j1();if(!e)throw Es.create("no-app",{appName:n});return e}function xs(n,e,t){var a;let i=(a=x2[n])!==null&&a!==void 0?a:n;t&&(i+=`-${t}`);const l=i.match(/\s|\//),u=e.match(/\s|\//);if(l||u){const m=[`Unable to register library "${i}" with version "${e}":`];l&&m.push(`library name "${i}" contains illegal characters (whitespace or "/")`),l&&u&&m.push("and"),u&&m.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ia.warn(m.join(" "));return}Bo(new Si(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S2="firebase-heartbeat-database",N2=1,Pc="firebase-heartbeat-store";let Np=null;function M1(){return Np||(Np=HC(S2,N2,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Pc)}catch(t){console.warn(t)}}}}).catch(n=>{throw Es.create("idb-open",{originalErrorMessage:n.message})})),Np}async function C2(n){try{const t=(await M1()).transaction(Pc),a=await t.objectStore(Pc).get(k1(n));return await t.done,a}catch(e){if(e instanceof Ma)Ia.warn(e.message);else{const t=Es.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ia.warn(t.message)}}}async function db(n,e){try{const a=(await M1()).transaction(Pc,"readwrite");await a.objectStore(Pc).put(e,k1(n)),await a.done}catch(t){if(t instanceof Ma)Ia.warn(t.message);else{const a=Es.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Ia.warn(a.message)}}}function k1(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R2=1024,I2=30;class O2{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new j2(t),this._heartbeatsCachePromise=this._storage.read().then(a=>(this._heartbeatsCache=a,a))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=hb();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(u=>u.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:i}),this._heartbeatsCache.heartbeats.length>I2){const u=P2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(a){Ia.warn(a)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=hb(),{heartbeatsToSend:a,unsentEntries:i}=D2(this._heartbeatsCache.heartbeats),l=oh(JSON.stringify({version:2,heartbeats:a}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Ia.warn(t),""}}}function hb(){return new Date().toISOString().substring(0,10)}function D2(n,e=R2){const t=[];let a=n.slice();for(const i of n){const l=t.find(u=>u.agent===i.agent);if(l){if(l.dates.push(i.date),fb(t)>e){l.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),fb(t)>e){t.pop();break}a=a.slice(1)}return{heartbeatsToSend:t,unsentEntries:a}}class j2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return _C()?bC().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await C2(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return db(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return db(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function fb(n){return oh(JSON.stringify({version:2,heartbeats:n})).length}function P2(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let a=1;a<n.length;a++)n[a].date<t&&(t=n[a].date,e=a);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M2(n){Bo(new Si("platform-logger",e=>new YC(e),"PRIVATE")),Bo(new Si("heartbeat",e=>new O2(e),"PRIVATE")),xs(Hp,cb,n),xs(Hp,cb,"esm2017"),xs("fire-js","")}M2("");function jg(n,e){var t={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&e.indexOf(a)<0&&(t[a]=n[a]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,a=Object.getOwnPropertySymbols(n);i<a.length;i++)e.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(n,a[i])&&(t[a[i]]=n[a[i]]);return t}function L1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const k2=L1,V1=new Wc("auth","Firebase",L1());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ch=new Ig("@firebase/auth");function L2(n,...e){ch.logLevel<=He.WARN&&ch.warn(`Auth (${el}): ${n}`,...e)}function $d(n,...e){ch.logLevel<=He.ERROR&&ch.error(`Auth (${el}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function br(n,...e){throw Pg(n,...e)}function Yr(n,...e){return Pg(n,...e)}function U1(n,e,t){const a=Object.assign(Object.assign({},k2()),{[e]:t});return new Wc("auth","Firebase",a).create(e,{appName:n.name})}function Na(n){return U1(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Pg(n,...e){if(typeof n!="string"){const t=e[0],a=[...e.slice(1)];return a[0]&&(a[0].appName=n.name),n._errorFactory.create(t,...a)}return V1.create(n,...e)}function Ne(n,e,...t){if(!n)throw Pg(e,...t)}function wa(n){const e="INTERNAL ASSERTION FAILED: "+n;throw $d(e),new Error(e)}function Oa(n,e){n||wa(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yp(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function V2(){return mb()==="http:"||mb()==="https:"}function mb(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U2(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(V2()||pC()||"connection"in navigator)?navigator.onLine:!0}function z2(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(e,t){this.shortDelay=e,this.longDelay=t,Oa(t>e,"Short delay should be less than long delay!"),this.isMobile=hC()||gC()}get(){return U2()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mg(n,e){Oa(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z1{static initialize(e,t,a){this.fetchImpl=e,t&&(this.headersImpl=t),a&&(this.responseImpl=a)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;wa("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;wa("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;wa("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B2={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q2=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],F2=new Zc(3e4,6e4);function Ps(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function ka(n,e,t,a,i={}){return B1(n,i,async()=>{let l={},u={};a&&(e==="GET"?u=a:l={body:JSON.stringify(a)});const m=Xc(Object.assign({key:n.config.apiKey},u)).slice(1),p=await n._getAdditionalHeaders();p["Content-Type"]="application/json",n.languageCode&&(p["X-Firebase-Locale"]=n.languageCode);const y=Object.assign({method:e,headers:p},l);return mC()||(y.referrerPolicy="no-referrer"),n.emulatorConfig&&Qc(n.emulatorConfig.host)&&(y.credentials="include"),z1.fetch()(await q1(n,n.config.apiHost,t,m),y)})}async function B1(n,e,t){n._canInitEmulator=!1;const a=Object.assign(Object.assign({},B2),e);try{const i=new $2(n),l=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const u=await l.json();if("needConfirmation"in u)throw kd(n,"account-exists-with-different-credential",u);if(l.ok&&!("errorMessage"in u))return u;{const m=l.ok?u.errorMessage:u.error.message,[p,y]=m.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw kd(n,"credential-already-in-use",u);if(p==="EMAIL_EXISTS")throw kd(n,"email-already-in-use",u);if(p==="USER_DISABLED")throw kd(n,"user-disabled",u);const v=a[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw U1(n,v,y);br(n,v)}}catch(i){if(i instanceof Ma)throw i;br(n,"network-request-failed",{message:String(i)})}}async function Jc(n,e,t,a,i={}){const l=await ka(n,e,t,a,i);return"mfaPendingCredential"in l&&br(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function q1(n,e,t,a){const i=`${e}${t}?${a}`,l=n,u=l.config.emulator?Mg(n.config,i):`${n.config.apiScheme}://${i}`;return q2.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(u).toString():u}function H2(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class $2{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,a)=>{this.timer=setTimeout(()=>a(Yr(this.auth,"network-request-failed")),F2.get())})}}function kd(n,e,t){const a={appName:n.name};t.email&&(a.email=t.email),t.phoneNumber&&(a.phoneNumber=t.phoneNumber);const i=Yr(n,e,a);return i.customData._tokenResponse=t,i}function pb(n){return n!==void 0&&n.enterprise!==void 0}class G2{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return H2(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Y2(n,e){return ka(n,"GET","/v2/recaptchaConfig",Ps(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K2(n,e){return ka(n,"POST","/v1/accounts:delete",e)}async function uh(n,e){return ka(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cc(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Q2(n,e=!1){const t=Ht(n),a=await t.getIdToken(e),i=kg(a);Ne(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const l=typeof i.firebase=="object"?i.firebase:void 0,u=l==null?void 0:l.sign_in_provider;return{claims:i,token:a,authTime:Cc(Cp(i.auth_time)),issuedAtTime:Cc(Cp(i.iat)),expirationTime:Cc(Cp(i.exp)),signInProvider:u||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Cp(n){return Number(n)*1e3}function kg(n){const[e,t,a]=n.split(".");if(e===void 0||t===void 0||a===void 0)return $d("JWT malformed, contained fewer than 3 sections"),null;try{const i=S1(t);return i?JSON.parse(i):($d("Failed to decode base64 JWT payload"),null)}catch(i){return $d("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function gb(n){const e=kg(n);return Ne(e,"internal-error"),Ne(typeof e.exp<"u","internal-error"),Ne(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qo(n,e,t=!1){if(t)return e;try{return await e}catch(a){throw a instanceof Ma&&W2(a)&&n.auth.currentUser===n&&await n.auth.signOut(),a}}function W2({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X2{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const a=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),a}else{this.errorBackoff=3e4;const i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Cc(this.lastLoginAt),this.creationTime=Cc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dh(n){var e;const t=n.auth,a=await n.getIdToken(),i=await qo(n,uh(t,{idToken:a}));Ne(i==null?void 0:i.users.length,t,"internal-error");const l=i.users[0];n._notifyReloadListener(l);const u=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?F1(l.providerUserInfo):[],m=J2(n.providerData,u),p=n.isAnonymous,y=!(n.email&&l.passwordHash)&&!(m!=null&&m.length),v=p?y:!1,b={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:m,metadata:new Kp(l.createdAt,l.lastLoginAt),isAnonymous:v};Object.assign(n,b)}async function Z2(n){const e=Ht(n);await dh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function J2(n,e){return[...n.filter(a=>!e.some(i=>i.providerId===a.providerId)),...e]}function F1(n){return n.map(e=>{var{providerId:t}=e,a=jg(e,["providerId"]);return{providerId:t,uid:a.rawId||"",displayName:a.displayName||null,email:a.email||null,phoneNumber:a.phoneNumber||null,photoURL:a.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eR(n,e){const t=await B1(n,{},async()=>{const a=Xc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:l}=n.config,u=await q1(n,i,"/v1/token",`key=${l}`),m=await n._getAdditionalHeaders();return m["Content-Type"]="application/x-www-form-urlencoded",z1.fetch()(u,{method:"POST",headers:m,body:a})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function tR(n,e){return ka(n,"POST","/v2/accounts:revokeToken",Ps(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ne(e.idToken,"internal-error"),Ne(typeof e.idToken<"u","internal-error"),Ne(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):gb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ne(e.length!==0,"internal-error");const t=gb(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ne(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:a,refreshToken:i,expiresIn:l}=await eR(e,t);this.updateTokensAndExpiration(a,i,Number(l))}updateTokensAndExpiration(e,t,a){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+a*1e3}static fromJSON(e,t){const{refreshToken:a,accessToken:i,expirationTime:l}=t,u=new Mo;return a&&(Ne(typeof a=="string","internal-error",{appName:e}),u.refreshToken=a),i&&(Ne(typeof i=="string","internal-error",{appName:e}),u.accessToken=i),l&&(Ne(typeof l=="number","internal-error",{appName:e}),u.expirationTime=l),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Mo,this.toJSON())}_performRefresh(){return wa("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fs(n,e){Ne(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class _r{constructor(e){var{uid:t,auth:a,stsTokenManager:i}=e,l=jg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new X2(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=a,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Kp(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await qo(this,this.stsTokenManager.getToken(this.auth,e));return Ne(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return Q2(this,e)}reload(){return Z2(this)}_assign(e){this!==e&&(Ne(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new _r(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let a=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),a=!0),t&&await dh(this),await this.auth._persistUserIfCurrent(this),a&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(lr(this.auth.app))return Promise.reject(Na(this.auth));const e=await this.getIdToken();return await qo(this,K2(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var a,i,l,u,m,p,y,v;const b=(a=t.displayName)!==null&&a!==void 0?a:void 0,T=(i=t.email)!==null&&i!==void 0?i:void 0,C=(l=t.phoneNumber)!==null&&l!==void 0?l:void 0,A=(u=t.photoURL)!==null&&u!==void 0?u:void 0,M=(m=t.tenantId)!==null&&m!==void 0?m:void 0,I=(p=t._redirectEventId)!==null&&p!==void 0?p:void 0,H=(y=t.createdAt)!==null&&y!==void 0?y:void 0,W=(v=t.lastLoginAt)!==null&&v!==void 0?v:void 0,{uid:q,emailVerified:ie,isAnonymous:le,providerData:pe,stsTokenManager:k}=t;Ne(q&&k,e,"internal-error");const R=Mo.fromJSON(this.name,k);Ne(typeof q=="string",e,"internal-error"),fs(b,e.name),fs(T,e.name),Ne(typeof ie=="boolean",e,"internal-error"),Ne(typeof le=="boolean",e,"internal-error"),fs(C,e.name),fs(A,e.name),fs(M,e.name),fs(I,e.name),fs(H,e.name),fs(W,e.name);const N=new _r({uid:q,auth:e,email:T,emailVerified:ie,displayName:b,isAnonymous:le,photoURL:A,phoneNumber:C,tenantId:M,stsTokenManager:R,createdAt:H,lastLoginAt:W});return pe&&Array.isArray(pe)&&(N.providerData=pe.map(j=>Object.assign({},j))),I&&(N._redirectEventId=I),N}static async _fromIdTokenResponse(e,t,a=!1){const i=new Mo;i.updateFromServerResponse(t);const l=new _r({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:a});return await dh(l),l}static async _fromGetAccountInfoResponse(e,t,a){const i=t.users[0];Ne(i.localId!==void 0,"internal-error");const l=i.providerUserInfo!==void 0?F1(i.providerUserInfo):[],u=!(i.email&&i.passwordHash)&&!(l!=null&&l.length),m=new Mo;m.updateFromIdToken(a);const p=new _r({uid:i.localId,auth:e,stsTokenManager:m,isAnonymous:u}),y={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new Kp(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(l!=null&&l.length)};return Object.assign(p,y),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yb=new Map;function Aa(n){Oa(n instanceof Function,"Expected a class definition");let e=yb.get(n);return e?(Oa(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,yb.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}H1.type="NONE";const vb=H1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gd(n,e,t){return`firebase:${n}:${e}:${t}`}class ko{constructor(e,t,a){this.persistence=e,this.auth=t,this.userKey=a;const{config:i,name:l}=this.auth;this.fullUserKey=Gd(this.userKey,i.apiKey,l),this.fullPersistenceKey=Gd("persistence",i.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await uh(this.auth,{idToken:e}).catch(()=>{});return t?_r._fromGetAccountInfoResponse(this.auth,t,e):null}return _r._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,a="authUser"){if(!t.length)return new ko(Aa(vb),e,a);const i=(await Promise.all(t.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let l=i[0]||Aa(vb);const u=Gd(a,e.config.apiKey,e.name);let m=null;for(const y of t)try{const v=await y._get(u);if(v){let b;if(typeof v=="string"){const T=await uh(e,{idToken:v}).catch(()=>{});if(!T)break;b=await _r._fromGetAccountInfoResponse(e,T,v)}else b=_r._fromJSON(e,v);y!==l&&(m=b),l=y;break}}catch{}const p=i.filter(y=>y._shouldAllowMigration);return!l._shouldAllowMigration||!p.length?new ko(l,e,a):(l=p[0],m&&await l._set(u,m.toJSON()),await Promise.all(t.map(async y=>{if(y!==l)try{await y._remove(u)}catch{}})),new ko(l,e,a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _b(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(K1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if($1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(W1(e))return"Blackberry";if(X1(e))return"Webos";if(G1(e))return"Safari";if((e.includes("chrome/")||Y1(e))&&!e.includes("edge/"))return"Chrome";if(Q1(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,a=n.match(t);if((a==null?void 0:a.length)===2)return a[1]}return"Other"}function $1(n=vn()){return/firefox\//i.test(n)}function G1(n=vn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Y1(n=vn()){return/crios\//i.test(n)}function K1(n=vn()){return/iemobile/i.test(n)}function Q1(n=vn()){return/android/i.test(n)}function W1(n=vn()){return/blackberry/i.test(n)}function X1(n=vn()){return/webos/i.test(n)}function Lg(n=vn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function nR(n=vn()){var e;return Lg(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function rR(){return yC()&&document.documentMode===10}function Z1(n=vn()){return Lg(n)||Q1(n)||X1(n)||W1(n)||/windows phone/i.test(n)||K1(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J1(n,e=[]){let t;switch(n){case"Browser":t=_b(vn());break;case"Worker":t=`${_b(vn())}-${n}`;break;default:t=n}const a=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${el}/${a}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const a=l=>new Promise((u,m)=>{try{const p=e(l);u(p)}catch(p){m(p)}});a.onAbort=t,this.queue.push(a);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const a of this.queue)await a(e),a.onAbort&&t.push(a.onAbort)}catch(a){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:a==null?void 0:a.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sR(n,e={}){return ka(n,"GET","/v2/passwordPolicy",Ps(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iR=6;class oR{constructor(e){var t,a,i,l;const u=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=u.minPasswordLength)!==null&&t!==void 0?t:iR,u.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=u.maxPasswordLength),u.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=u.containsLowercaseCharacter),u.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=u.containsUppercaseCharacter),u.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=u.containsNumericCharacter),u.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=u.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(a=e.allowedNonAlphanumericCharacters)===null||a===void 0?void 0:a.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,a,i,l,u,m;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=(t=p.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),p.isValid&&(p.isValid=(a=p.meetsMaxPasswordLength)!==null&&a!==void 0?a:!0),p.isValid&&(p.isValid=(i=p.containsLowercaseLetter)!==null&&i!==void 0?i:!0),p.isValid&&(p.isValid=(l=p.containsUppercaseLetter)!==null&&l!==void 0?l:!0),p.isValid&&(p.isValid=(u=p.containsNumericCharacter)!==null&&u!==void 0?u:!0),p.isValid&&(p.isValid=(m=p.containsNonAlphanumericCharacter)!==null&&m!==void 0?m:!0),p}validatePasswordLengthOptions(e,t){const a=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;a&&(t.meetsMinPasswordLength=e.length>=a),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let a;for(let i=0;i<e.length;i++)a=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,a>="a"&&a<="z",a>="A"&&a<="Z",a>="0"&&a<="9",this.allowedNonAlphanumericCharacters.includes(a))}updatePasswordCharacterOptionsStatuses(e,t,a,i,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=a)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR{constructor(e,t,a,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=a,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new bb(this),this.idTokenSubscription=new bb(this),this.beforeStateQueue=new aR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=V1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Aa(t)),this._initializationPromise=this.queue(async()=>{var a,i,l;if(!this._deleted&&(this.persistenceManager=await ko.create(this,e),(a=this._resolvePersistenceManagerAvailable)===null||a===void 0||a.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)===null||l===void 0?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await uh(this,{idToken:e}),a=await _r._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(a)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(lr(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(m=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(m,m))}):this.directlySetCurrentUser(null)}const a=await this.assertedPersistence.getCurrentUser();let i=a,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,m=i==null?void 0:i._redirectEventId,p=await this.tryRedirectSignIn(e);(!u||u===m)&&(p!=null&&p.user)&&(i=p.user,l=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(i)}catch(u){i=a,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ne(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await dh(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=z2()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(lr(this.app))return Promise.reject(Na(this));const t=e?Ht(e):null;return t&&Ne(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ne(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return lr(this.app)?Promise.reject(Na(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return lr(this.app)?Promise.reject(Na(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Aa(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await sR(this),t=new oR(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Wc("auth","Firebase",e())}onAuthStateChanged(e,t,a){return this.registerStateListener(this.authStateSubscription,e,t,a)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,a){return this.registerStateListener(this.idTokenSubscription,e,t,a)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const a=this.onAuthStateChanged(()=>{a(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),a={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(a.tenantId=this.tenantId),await tR(this,a)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const a=await this.getOrInitRedirectPersistenceManager(t);return e===null?a.removeCurrentUser():a.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Aa(e)||this._popupRedirectResolver;Ne(t,this,"argument-error"),this.redirectPersistenceManager=await ko.create(this,[Aa(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,a;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((a=this.redirectUser)===null||a===void 0?void 0:a._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const a=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==a&&(this.lastNotifiedUid=a,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,a,i){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let u=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ne(m,this,"internal-error"),m.then(()=>{u||l(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,a,i);return()=>{u=!0,p()}}else{const p=e.addObserver(t);return()=>{u=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=J1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const a=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());a&&(t["X-Firebase-Client"]=a);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;if(lr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&L2(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function ji(n){return Ht(n)}class bb{constructor(e){this.auth=e,this.observer=null,this.addObserver=AC(t=>this.observer=t)}get next(){return Ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function cR(n){Lh=n}function ex(n){return Lh.loadJS(n)}function uR(){return Lh.recaptchaEnterpriseScript}function dR(){return Lh.gapiScript}function hR(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class fR{constructor(){this.enterprise=new mR}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class mR{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const pR="recaptcha-enterprise",tx="NO_RECAPTCHA";class gR{constructor(e){this.type=pR,this.auth=ji(e)}async verify(e="verify",t=!1){async function a(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(u,m)=>{Y2(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const y=new G2(p);return l.tenantId==null?l._agentRecaptchaConfig=y:l._tenantRecaptchaConfigs[l.tenantId]=y,u(y.siteKey)}}).catch(p=>{m(p)})})}function i(l,u,m){const p=window.grecaptcha;pb(p)?p.enterprise.ready(()=>{p.enterprise.execute(l,{action:e}).then(y=>{u(y)}).catch(()=>{u(tx)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new fR().execute("siteKey",{action:"verify"}):new Promise((l,u)=>{a(this.auth).then(m=>{if(!t&&pb(window.grecaptcha))i(m,l,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let p=uR();p.length!==0&&(p+=m),ex(p).then(()=>{i(m,l,u)}).catch(y=>{u(y)})}}).catch(m=>{u(m)})})}}async function Eb(n,e,t,a=!1,i=!1){const l=new gR(n);let u;if(i)u=tx;else try{u=await l.verify(t)}catch{u=await l.verify(t,!0)}const m=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const p=m.phoneEnrollmentInfo.phoneNumber,y=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:y,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const p=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return a?Object.assign(m,{captchaResp:u}):Object.assign(m,{captchaResponse:u}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function Qp(n,e,t,a,i){var l;if(!((l=n._getRecaptchaConfig())===null||l===void 0)&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await Eb(n,e,t,t==="getOobCode");return a(n,u)}else return a(n,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const m=await Eb(n,e,t,t==="getOobCode");return a(n,m)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yR(n,e){const t=Dg(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),l=t.getOptions();if(Ai(l,e??{}))return i;br(i,"already-initialized")}return t.initialize({options:e})}function vR(n,e){const t=(e==null?void 0:e.persistence)||[],a=(Array.isArray(t)?t:[t]).map(Aa);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(a,e==null?void 0:e.popupRedirectResolver)}function _R(n,e,t){const a=ji(n);Ne(/^https?:\/\//.test(e),a,"invalid-emulator-scheme");const i=!1,l=nx(e),{host:u,port:m}=bR(e),p=m===null?"":`:${m}`,y={url:`${l}//${u}${p}/`},v=Object.freeze({host:u,port:m,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!a._canInitEmulator){Ne(a.config.emulator&&a.emulatorConfig,a,"emulator-config-failed"),Ne(Ai(y,a.config.emulator)&&Ai(v,a.emulatorConfig),a,"emulator-config-failed");return}a.config.emulator=y,a.emulatorConfig=v,a.settings.appVerificationDisabledForTesting=!0,Qc(u)?(kh("Auth",!0),I1(`${l}//${u}${p}`)):ER()}function nx(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function bR(n){const e=nx(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const a=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(a);if(i){const l=i[1];return{host:l,port:xb(a.substr(l.length+1))}}else{const[l,u]=a.split(":");return{host:l,port:xb(u)}}}function xb(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function ER(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vg{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return wa("not implemented")}_getIdTokenResponse(e){return wa("not implemented")}_linkToIdToken(e,t){return wa("not implemented")}_getReauthenticationResolver(e){return wa("not implemented")}}async function xR(n,e){return ka(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TR(n,e){return Jc(n,"POST","/v1/accounts:signInWithPassword",Ps(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wR(n,e){return Jc(n,"POST","/v1/accounts:signInWithEmailLink",Ps(n,e))}async function AR(n,e){return Jc(n,"POST","/v1/accounts:signInWithEmailLink",Ps(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc extends Vg{constructor(e,t,a,i=null){super("password",a),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new Mc(e,t,"password")}static _fromEmailAndCode(e,t,a=null){return new Mc(e,t,"emailLink",a)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Qp(e,t,"signInWithPassword",TR);case"emailLink":return wR(e,{email:this._email,oobCode:this._password});default:br(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const a={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Qp(e,a,"signUpPassword",xR);case"emailLink":return AR(e,{idToken:t,email:this._email,oobCode:this._password});default:br(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lo(n,e){return Jc(n,"POST","/v1/accounts:signInWithIdp",Ps(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SR="http://localhost";class Ni extends Vg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ni(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):br("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:a,signInMethod:i}=t,l=jg(t,["providerId","signInMethod"]);if(!a||!i)return null;const u=new Ni(a,i);return u.idToken=l.idToken||void 0,u.accessToken=l.accessToken||void 0,u.secret=l.secret,u.nonce=l.nonce,u.pendingToken=l.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return Lo(e,t)}_linkToIdToken(e,t){const a=this.buildRequest();return a.idToken=t,Lo(e,a)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Lo(e,t)}buildRequest(){const e={requestUri:SR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Xc(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NR(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function CR(n){const e=Ec(xc(n)).link,t=e?Ec(xc(e)).deep_link_id:null,a=Ec(xc(n)).deep_link_id;return(a?Ec(xc(a)).link:null)||a||t||e||n}class Ug{constructor(e){var t,a,i,l,u,m;const p=Ec(xc(e)),y=(t=p.apiKey)!==null&&t!==void 0?t:null,v=(a=p.oobCode)!==null&&a!==void 0?a:null,b=NR((i=p.mode)!==null&&i!==void 0?i:null);Ne(y&&v&&b,"argument-error"),this.apiKey=y,this.operation=b,this.code=v,this.continueUrl=(l=p.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(u=p.lang)!==null&&u!==void 0?u:null,this.tenantId=(m=p.tenantId)!==null&&m!==void 0?m:null}static parseLink(e){const t=CR(e);try{return new Ug(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(){this.providerId=tl.PROVIDER_ID}static credential(e,t){return Mc._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const a=Ug.parseLink(t);return Ne(a,"argument-error"),Mc._fromEmailAndCode(e,a.code,a.tenantId)}}tl.PROVIDER_ID="password";tl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";tl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rx{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu extends rx{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps extends eu{constructor(){super("facebook.com")}static credential(e){return Ni._fromParams({providerId:ps.PROVIDER_ID,signInMethod:ps.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ps.credentialFromTaggedObject(e)}static credentialFromError(e){return ps.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ps.credential(e.oauthAccessToken)}catch{return null}}}ps.FACEBOOK_SIGN_IN_METHOD="facebook.com";ps.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs extends eu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ni._fromParams({providerId:gs.PROVIDER_ID,signInMethod:gs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return gs.credentialFromTaggedObject(e)}static credentialFromError(e){return gs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:a}=e;if(!t&&!a)return null;try{return gs.credential(t,a)}catch{return null}}}gs.GOOGLE_SIGN_IN_METHOD="google.com";gs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys extends eu{constructor(){super("github.com")}static credential(e){return Ni._fromParams({providerId:ys.PROVIDER_ID,signInMethod:ys.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ys.credentialFromTaggedObject(e)}static credentialFromError(e){return ys.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ys.credential(e.oauthAccessToken)}catch{return null}}}ys.GITHUB_SIGN_IN_METHOD="github.com";ys.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs extends eu{constructor(){super("twitter.com")}static credential(e,t){return Ni._fromParams({providerId:vs.PROVIDER_ID,signInMethod:vs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return vs.credentialFromTaggedObject(e)}static credentialFromError(e){return vs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:a}=e;if(!t||!a)return null;try{return vs.credential(t,a)}catch{return null}}}vs.TWITTER_SIGN_IN_METHOD="twitter.com";vs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RR(n,e){return Jc(n,"POST","/v1/accounts:signUp",Ps(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,a,i=!1){const l=await _r._fromIdTokenResponse(e,a,i),u=Tb(a);return new Ci({user:l,providerId:u,_tokenResponse:a,operationType:t})}static async _forOperation(e,t,a){await e._updateTokensIfNecessary(a,!0);const i=Tb(a);return new Ci({user:e,providerId:i,_tokenResponse:a,operationType:t})}}function Tb(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hh extends Ma{constructor(e,t,a,i){var l;super(t.code,t.message),this.operationType=a,this.user=i,Object.setPrototypeOf(this,hh.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:t.customData._serverResponse,operationType:a}}static _fromErrorAndOperation(e,t,a,i){return new hh(e,t,a,i)}}function ax(n,e,t,a){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?hh._fromErrorAndOperation(n,l,e,a):l})}async function IR(n,e,t=!1){const a=await qo(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Ci._forOperation(n,"link",a)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OR(n,e,t=!1){const{auth:a}=n;if(lr(a.app))return Promise.reject(Na(a));const i="reauthenticate";try{const l=await qo(n,ax(a,i,e,n),t);Ne(l.idToken,a,"internal-error");const u=kg(l.idToken);Ne(u,a,"internal-error");const{sub:m}=u;return Ne(n.uid===m,a,"user-mismatch"),Ci._forOperation(n,i,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&br(a,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sx(n,e,t=!1){if(lr(n.app))return Promise.reject(Na(n));const a="signIn",i=await ax(n,a,e),l=await Ci._fromIdTokenResponse(n,a,i);return t||await n._updateCurrentUser(l.user),l}async function DR(n,e){return sx(ji(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ix(n){const e=ji(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function jR(n,e,t){if(lr(n.app))return Promise.reject(Na(n));const a=ji(n),u=await Qp(a,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",RR).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&ix(n),p}),m=await Ci._fromIdTokenResponse(a,"signIn",u);return await a._updateCurrentUser(m.user),m}function PR(n,e,t){return lr(n.app)?Promise.reject(Na(n)):DR(Ht(n),tl.credential(e,t)).catch(async a=>{throw a.code==="auth/password-does-not-meet-requirements"&&ix(n),a})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MR(n,e){return ka(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kR(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const a=Ht(n),l={idToken:await a.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},u=await qo(a,MR(a.auth,l));a.displayName=u.displayName||null,a.photoURL=u.photoUrl||null;const m=a.providerData.find(({providerId:p})=>p==="password");m&&(m.displayName=a.displayName,m.photoURL=a.photoURL),await a._updateTokensIfNecessary(u)}function LR(n,e,t,a){return Ht(n).onIdTokenChanged(e,t,a)}function VR(n,e,t){return Ht(n).beforeAuthStateChanged(e,t)}function UR(n,e,t,a){return Ht(n).onAuthStateChanged(e,t,a)}function zR(n){return Ht(n).signOut()}const fh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ox{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(fh,"1"),this.storage.removeItem(fh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BR=1e3,qR=10;class lx extends ox{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Z1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const a=this.storage.getItem(t),i=this.localCache[t];a!==i&&e(t,i,a)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,m,p)=>{this.notifyListeners(u,p)});return}const a=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const u=this.storage.getItem(a);!t&&this.localCache[a]===u||this.notifyListeners(a,u)},l=this.storage.getItem(a);rR()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,qR):i()}notifyListeners(e,t){this.localCache[e]=t;const a=this.listeners[e];if(a)for(const i of Array.from(a))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,a)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:a}),!0)})},BR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}lx.type="LOCAL";const FR=lx;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cx extends ox{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}cx.type="SESSION";const ux=cx;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HR(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const a=new Vh(e);return this.receivers.push(a),a}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:a,eventType:i,data:l}=t.data,u=this.handlersMap[i];if(!(u!=null&&u.size))return;t.ports[0].postMessage({status:"ack",eventId:a,eventType:i});const m=Array.from(u).map(async y=>y(t.origin,l)),p=await HR(m);t.ports[0].postMessage({status:"done",eventId:a,eventType:i,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Vh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zg(n="",e=10){let t="";for(let a=0;a<e;a++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $R{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,a=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let l,u;return new Promise((m,p)=>{const y=zg("",20);i.port1.start();const v=setTimeout(()=>{p(new Error("unsupported_event"))},a);u={messageChannel:i,onMessage(b){const T=b;if(T.data.eventId===y)switch(T.data.status){case"ack":clearTimeout(v),l=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),m(T.data.response);break;default:clearTimeout(v),clearTimeout(l),p(new Error("invalid_response"));break}}},this.handlers.add(u),i.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:y,data:t},[i.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kr(){return window}function GR(n){Kr().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dx(){return typeof Kr().WorkerGlobalScope<"u"&&typeof Kr().importScripts=="function"}async function YR(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function KR(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function QR(){return dx()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hx="firebaseLocalStorageDb",WR=1,mh="firebaseLocalStorage",fx="fbase_key";class tu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Uh(n,e){return n.transaction([mh],e?"readwrite":"readonly").objectStore(mh)}function XR(){const n=indexedDB.deleteDatabase(hx);return new tu(n).toPromise()}function Wp(){const n=indexedDB.open(hx,WR);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const a=n.result;try{a.createObjectStore(mh,{keyPath:fx})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const a=n.result;a.objectStoreNames.contains(mh)?e(a):(a.close(),await XR(),e(await Wp()))})})}async function wb(n,e,t){const a=Uh(n,!0).put({[fx]:e,value:t});return new tu(a).toPromise()}async function ZR(n,e){const t=Uh(n,!1).get(e),a=await new tu(t).toPromise();return a===void 0?null:a.value}function Ab(n,e){const t=Uh(n,!0).delete(e);return new tu(t).toPromise()}const JR=800,eI=3;class mx{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Wp(),this.db)}async _withRetries(e){let t=0;for(;;)try{const a=await this._openDb();return await e(a)}catch(a){if(t++>eI)throw a;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return dx()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Vh._getInstance(QR()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await YR(),!this.activeServiceWorker)return;this.sender=new $R(this.activeServiceWorker);const a=await this.sender._send("ping",{},800);a&&!((e=a[0])===null||e===void 0)&&e.fulfilled&&!((t=a[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||KR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Wp();return await wb(e,fh,"1"),await Ab(e,fh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(a=>wb(a,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(a=>ZR(a,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Ab(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const l=Uh(i,!1).getAll();return new tu(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],a=new Set;if(e.length!==0)for(const{fbase_key:i,value:l}of e)a.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(l)&&(this.notifyListeners(i,l),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!a.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const a=this.listeners[e];if(a)for(const i of Array.from(a))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),JR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}mx.type="LOCAL";const tI=mx;new Zc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nI(n,e){return e?Aa(e):(Ne(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bg extends Vg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Lo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Lo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Lo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function rI(n){return sx(n.auth,new Bg(n),n.bypassAuthState)}function aI(n){const{auth:e,user:t}=n;return Ne(t,e,"internal-error"),OR(t,new Bg(n),n.bypassAuthState)}async function sI(n){const{auth:e,user:t}=n;return Ne(t,e,"internal-error"),IR(t,new Bg(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class px{constructor(e,t,a,i,l=!1){this.auth=e,this.resolver=a,this.user=i,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(a){this.reject(a)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:a,postBody:i,tenantId:l,error:u,type:m}=e;if(u){this.reject(u);return}const p={auth:this.auth,requestUri:t,sessionId:a,tenantId:l||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(p))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return rI;case"linkViaPopup":case"linkViaRedirect":return sI;case"reauthViaPopup":case"reauthViaRedirect":return aI;default:br(this.auth,"internal-error")}}resolve(e){Oa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Oa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iI=new Zc(2e3,1e4);class Po extends px{constructor(e,t,a,i,l){super(e,t,i,l),this.provider=a,this.authWindow=null,this.pollId=null,Po.currentPopupAction&&Po.currentPopupAction.cancel(),Po.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ne(e,this.auth,"internal-error"),e}async onExecution(){Oa(this.filter.length===1,"Popup operations only handle one event");const e=zg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Yr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Yr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Po.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,a;if(!((a=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||a===void 0)&&a.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Yr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,iI.get())};e()}}Po.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oI="pendingRedirect",Yd=new Map;class lI extends px{constructor(e,t,a=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,a),this.eventId=null}async execute(){let e=Yd.get(this.auth._key());if(!e){try{const a=await cI(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(a)}catch(t){e=()=>Promise.reject(t)}Yd.set(this.auth._key(),e)}return this.bypassAuthState||Yd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function cI(n,e){const t=hI(e),a=dI(n);if(!await a._isAvailable())return!1;const i=await a._get(t)==="true";return await a._remove(t),i}function uI(n,e){Yd.set(n._key(),e)}function dI(n){return Aa(n._redirectPersistence)}function hI(n){return Gd(oI,n.config.apiKey,n.name)}async function fI(n,e,t=!1){if(lr(n.app))return Promise.reject(Na(n));const a=ji(n),i=nI(a,e),u=await new lI(a,i,t).execute();return u&&!t&&(delete u.user._redirectEventId,await a._persistUserIfCurrent(u.user),await a._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mI=10*60*1e3;class pI{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(a=>{this.isEventForConsumer(e,a)&&(t=!0,this.sendToConsumer(e,a),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!gI(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var a;if(e.error&&!gx(e)){const i=((a=e.error.code)===null||a===void 0?void 0:a.split("auth/")[1])||"internal-error";t.onError(Yr(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const a=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&a}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=mI&&this.cachedEventUids.clear(),this.cachedEventUids.has(Sb(e))}saveEventToCache(e){this.cachedEventUids.add(Sb(e)),this.lastProcessedEventTime=Date.now()}}function Sb(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function gx({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function gI(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return gx(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yI(n,e={}){return ka(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vI=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,_I=/^https?/;async function bI(n){if(n.config.emulator)return;const{authorizedDomains:e}=await yI(n);for(const t of e)try{if(EI(t))return}catch{}br(n,"unauthorized-domain")}function EI(n){const e=Yp(),{protocol:t,hostname:a}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&a===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===a}if(!_I.test(t))return!1;if(vI.test(n))return a===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(a)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xI=new Zc(3e4,6e4);function Nb(){const n=Kr().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function TI(n){return new Promise((e,t)=>{var a,i,l;function u(){Nb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Nb(),t(Yr(n,"network-request-failed"))},timeout:xI.get()})}if(!((i=(a=Kr().gapi)===null||a===void 0?void 0:a.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((l=Kr().gapi)===null||l===void 0)&&l.load)u();else{const m=hR("iframefcb");return Kr()[m]=()=>{gapi.load?u():t(Yr(n,"network-request-failed"))},ex(`${dR()}?onload=${m}`).catch(p=>t(p))}}).catch(e=>{throw Kd=null,e})}let Kd=null;function wI(n){return Kd=Kd||TI(n),Kd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AI=new Zc(5e3,15e3),SI="__/auth/iframe",NI="emulator/auth/iframe",CI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},RI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function II(n){const e=n.config;Ne(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Mg(e,NI):`https://${n.config.authDomain}/${SI}`,a={apiKey:e.apiKey,appName:n.name,v:el},i=RI.get(n.config.apiHost);i&&(a.eid=i);const l=n._getFrameworks();return l.length&&(a.fw=l.join(",")),`${t}?${Xc(a).slice(1)}`}async function OI(n){const e=await wI(n),t=Kr().gapi;return Ne(t,n,"internal-error"),e.open({where:document.body,url:II(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:CI,dontclear:!0},a=>new Promise(async(i,l)=>{await a.restyle({setHideOnLeave:!1});const u=Yr(n,"network-request-failed"),m=Kr().setTimeout(()=>{l(u)},AI.get());function p(){Kr().clearTimeout(m),i(a)}a.ping(p).then(p,()=>{l(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},jI=500,PI=600,MI="_blank",kI="http://localhost";class Cb{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function LI(n,e,t,a=jI,i=PI){const l=Math.max((window.screen.availHeight-i)/2,0).toString(),u=Math.max((window.screen.availWidth-a)/2,0).toString();let m="";const p=Object.assign(Object.assign({},DI),{width:a.toString(),height:i.toString(),top:l,left:u}),y=vn().toLowerCase();t&&(m=Y1(y)?MI:t),$1(y)&&(e=e||kI,p.scrollbars="yes");const v=Object.entries(p).reduce((T,[C,A])=>`${T}${C}=${A},`,"");if(nR(y)&&m!=="_self")return VI(e||"",m),new Cb(null);const b=window.open(e||"",m,v);Ne(b,n,"popup-blocked");try{b.focus()}catch{}return new Cb(b)}function VI(n,e){const t=document.createElement("a");t.href=n,t.target=e;const a=document.createEvent("MouseEvent");a.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(a)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UI="__/auth/handler",zI="emulator/auth/handler",BI=encodeURIComponent("fac");async function Rb(n,e,t,a,i,l){Ne(n.config.authDomain,n,"auth-domain-config-required"),Ne(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:a,v:el,eventId:i};if(e instanceof rx){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",wC(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,b]of Object.entries({}))u[v]=b}if(e instanceof eu){const v=e.getScopes().filter(b=>b!=="");v.length>0&&(u.scopes=v.join(","))}n.tenantId&&(u.tid=n.tenantId);const m=u;for(const v of Object.keys(m))m[v]===void 0&&delete m[v];const p=await n._getAppCheckToken(),y=p?`#${BI}=${encodeURIComponent(p)}`:"";return`${qI(n)}?${Xc(m).slice(1)}${y}`}function qI({config:n}){return n.emulator?Mg(n,zI):`https://${n.authDomain}/${UI}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rp="webStorageSupport";class FI{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ux,this._completeRedirectFn=fI,this._overrideRedirectResult=uI}async _openPopup(e,t,a,i){var l;Oa((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const u=await Rb(e,t,a,Yp(),i);return LI(e,u,zg())}async _openRedirect(e,t,a,i){await this._originValidation(e);const l=await Rb(e,t,a,Yp(),i);return GR(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:l}=this.eventManagers[t];return i?Promise.resolve(i):(Oa(l,"If manager is not set, promise should be"),l)}const a=this.initAndGetManager(e);return this.eventManagers[t]={promise:a},a.catch(()=>{delete this.eventManagers[t]}),a}async initAndGetManager(e){const t=await OI(e),a=new pI(e);return t.register("authEvent",i=>(Ne(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:a.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:a},this.iframes[e._key()]=t,a}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Rp,{type:Rp},i=>{var l;const u=(l=i==null?void 0:i[0])===null||l===void 0?void 0:l[Rp];u!==void 0&&t(!!u),br(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=bI(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Z1()||G1()||Lg()}}const HI=FI;var Ib="@firebase/auth",Ob="1.10.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $I{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(a=>{e((a==null?void 0:a.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GI(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function YI(n){Bo(new Si("auth",(e,{options:t})=>{const a=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:u,authDomain:m}=a.options;Ne(u&&!u.includes(":"),"invalid-api-key",{appName:a.name});const p={apiKey:u,authDomain:m,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:J1(n)},y=new lR(a,i,l,p);return vR(y,t),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,a)=>{e.getProvider("auth-internal").initialize()})),Bo(new Si("auth-internal",e=>{const t=ji(e.getProvider("auth").getImmediate());return(a=>new $I(a))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),xs(Ib,Ob,GI(n)),xs(Ib,Ob,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KI=5*60,QI=R1("authIdTokenMaxAge")||KI;let Db=null;const WI=n=>async e=>{const t=e&&await e.getIdTokenResult(),a=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(a&&a>QI)return;const i=t==null?void 0:t.token;Db!==i&&(Db=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function XI(n=P1()){const e=Dg(n,"auth");if(e.isInitialized())return e.getImmediate();const t=yR(n,{popupRedirectResolver:HI,persistence:[tI,FR,ux]}),a=R1("authTokenSyncURL");if(a&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(a,location.origin);if(location.origin===l.origin){const u=WI(l.toString());VR(t,u,()=>u(t.currentUser)),LR(t,m=>u(m))}}const i=N1("auth");return i?_R(t,`http://${i}`):kh("Auth",!1),t}function ZI(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}cR({loadJS(n){return new Promise((e,t)=>{const a=document.createElement("script");a.setAttribute("src",n),a.onload=e,a.onerror=i=>{const l=Yr("internal-error");l.customData=i,t(l)},a.type="text/javascript",a.charset="UTF-8",ZI().appendChild(a)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});YI("Browser");var JI="firebase",e4="11.7.3";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */xs(JI,e4,"app");var jb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ts,yx;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,R){function N(){}N.prototype=R.prototype,k.D=R.prototype,k.prototype=new N,k.prototype.constructor=k,k.C=function(j,V,z){for(var O=Array(arguments.length-2),dt=2;dt<arguments.length;dt++)O[dt-2]=arguments[dt];return R.prototype[V].apply(j,O)}}function t(){this.blockSize=-1}function a(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(a,t),a.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(k,R,N){N||(N=0);var j=Array(16);if(typeof R=="string")for(var V=0;16>V;++V)j[V]=R.charCodeAt(N++)|R.charCodeAt(N++)<<8|R.charCodeAt(N++)<<16|R.charCodeAt(N++)<<24;else for(V=0;16>V;++V)j[V]=R[N++]|R[N++]<<8|R[N++]<<16|R[N++]<<24;R=k.g[0],N=k.g[1],V=k.g[2];var z=k.g[3],O=R+(z^N&(V^z))+j[0]+3614090360&4294967295;R=N+(O<<7&4294967295|O>>>25),O=z+(V^R&(N^V))+j[1]+3905402710&4294967295,z=R+(O<<12&4294967295|O>>>20),O=V+(N^z&(R^N))+j[2]+606105819&4294967295,V=z+(O<<17&4294967295|O>>>15),O=N+(R^V&(z^R))+j[3]+3250441966&4294967295,N=V+(O<<22&4294967295|O>>>10),O=R+(z^N&(V^z))+j[4]+4118548399&4294967295,R=N+(O<<7&4294967295|O>>>25),O=z+(V^R&(N^V))+j[5]+1200080426&4294967295,z=R+(O<<12&4294967295|O>>>20),O=V+(N^z&(R^N))+j[6]+2821735955&4294967295,V=z+(O<<17&4294967295|O>>>15),O=N+(R^V&(z^R))+j[7]+4249261313&4294967295,N=V+(O<<22&4294967295|O>>>10),O=R+(z^N&(V^z))+j[8]+1770035416&4294967295,R=N+(O<<7&4294967295|O>>>25),O=z+(V^R&(N^V))+j[9]+2336552879&4294967295,z=R+(O<<12&4294967295|O>>>20),O=V+(N^z&(R^N))+j[10]+4294925233&4294967295,V=z+(O<<17&4294967295|O>>>15),O=N+(R^V&(z^R))+j[11]+2304563134&4294967295,N=V+(O<<22&4294967295|O>>>10),O=R+(z^N&(V^z))+j[12]+1804603682&4294967295,R=N+(O<<7&4294967295|O>>>25),O=z+(V^R&(N^V))+j[13]+4254626195&4294967295,z=R+(O<<12&4294967295|O>>>20),O=V+(N^z&(R^N))+j[14]+2792965006&4294967295,V=z+(O<<17&4294967295|O>>>15),O=N+(R^V&(z^R))+j[15]+1236535329&4294967295,N=V+(O<<22&4294967295|O>>>10),O=R+(V^z&(N^V))+j[1]+4129170786&4294967295,R=N+(O<<5&4294967295|O>>>27),O=z+(N^V&(R^N))+j[6]+3225465664&4294967295,z=R+(O<<9&4294967295|O>>>23),O=V+(R^N&(z^R))+j[11]+643717713&4294967295,V=z+(O<<14&4294967295|O>>>18),O=N+(z^R&(V^z))+j[0]+3921069994&4294967295,N=V+(O<<20&4294967295|O>>>12),O=R+(V^z&(N^V))+j[5]+3593408605&4294967295,R=N+(O<<5&4294967295|O>>>27),O=z+(N^V&(R^N))+j[10]+38016083&4294967295,z=R+(O<<9&4294967295|O>>>23),O=V+(R^N&(z^R))+j[15]+3634488961&4294967295,V=z+(O<<14&4294967295|O>>>18),O=N+(z^R&(V^z))+j[4]+3889429448&4294967295,N=V+(O<<20&4294967295|O>>>12),O=R+(V^z&(N^V))+j[9]+568446438&4294967295,R=N+(O<<5&4294967295|O>>>27),O=z+(N^V&(R^N))+j[14]+3275163606&4294967295,z=R+(O<<9&4294967295|O>>>23),O=V+(R^N&(z^R))+j[3]+4107603335&4294967295,V=z+(O<<14&4294967295|O>>>18),O=N+(z^R&(V^z))+j[8]+1163531501&4294967295,N=V+(O<<20&4294967295|O>>>12),O=R+(V^z&(N^V))+j[13]+2850285829&4294967295,R=N+(O<<5&4294967295|O>>>27),O=z+(N^V&(R^N))+j[2]+4243563512&4294967295,z=R+(O<<9&4294967295|O>>>23),O=V+(R^N&(z^R))+j[7]+1735328473&4294967295,V=z+(O<<14&4294967295|O>>>18),O=N+(z^R&(V^z))+j[12]+2368359562&4294967295,N=V+(O<<20&4294967295|O>>>12),O=R+(N^V^z)+j[5]+4294588738&4294967295,R=N+(O<<4&4294967295|O>>>28),O=z+(R^N^V)+j[8]+2272392833&4294967295,z=R+(O<<11&4294967295|O>>>21),O=V+(z^R^N)+j[11]+1839030562&4294967295,V=z+(O<<16&4294967295|O>>>16),O=N+(V^z^R)+j[14]+4259657740&4294967295,N=V+(O<<23&4294967295|O>>>9),O=R+(N^V^z)+j[1]+2763975236&4294967295,R=N+(O<<4&4294967295|O>>>28),O=z+(R^N^V)+j[4]+1272893353&4294967295,z=R+(O<<11&4294967295|O>>>21),O=V+(z^R^N)+j[7]+4139469664&4294967295,V=z+(O<<16&4294967295|O>>>16),O=N+(V^z^R)+j[10]+3200236656&4294967295,N=V+(O<<23&4294967295|O>>>9),O=R+(N^V^z)+j[13]+681279174&4294967295,R=N+(O<<4&4294967295|O>>>28),O=z+(R^N^V)+j[0]+3936430074&4294967295,z=R+(O<<11&4294967295|O>>>21),O=V+(z^R^N)+j[3]+3572445317&4294967295,V=z+(O<<16&4294967295|O>>>16),O=N+(V^z^R)+j[6]+76029189&4294967295,N=V+(O<<23&4294967295|O>>>9),O=R+(N^V^z)+j[9]+3654602809&4294967295,R=N+(O<<4&4294967295|O>>>28),O=z+(R^N^V)+j[12]+3873151461&4294967295,z=R+(O<<11&4294967295|O>>>21),O=V+(z^R^N)+j[15]+530742520&4294967295,V=z+(O<<16&4294967295|O>>>16),O=N+(V^z^R)+j[2]+3299628645&4294967295,N=V+(O<<23&4294967295|O>>>9),O=R+(V^(N|~z))+j[0]+4096336452&4294967295,R=N+(O<<6&4294967295|O>>>26),O=z+(N^(R|~V))+j[7]+1126891415&4294967295,z=R+(O<<10&4294967295|O>>>22),O=V+(R^(z|~N))+j[14]+2878612391&4294967295,V=z+(O<<15&4294967295|O>>>17),O=N+(z^(V|~R))+j[5]+4237533241&4294967295,N=V+(O<<21&4294967295|O>>>11),O=R+(V^(N|~z))+j[12]+1700485571&4294967295,R=N+(O<<6&4294967295|O>>>26),O=z+(N^(R|~V))+j[3]+2399980690&4294967295,z=R+(O<<10&4294967295|O>>>22),O=V+(R^(z|~N))+j[10]+4293915773&4294967295,V=z+(O<<15&4294967295|O>>>17),O=N+(z^(V|~R))+j[1]+2240044497&4294967295,N=V+(O<<21&4294967295|O>>>11),O=R+(V^(N|~z))+j[8]+1873313359&4294967295,R=N+(O<<6&4294967295|O>>>26),O=z+(N^(R|~V))+j[15]+4264355552&4294967295,z=R+(O<<10&4294967295|O>>>22),O=V+(R^(z|~N))+j[6]+2734768916&4294967295,V=z+(O<<15&4294967295|O>>>17),O=N+(z^(V|~R))+j[13]+1309151649&4294967295,N=V+(O<<21&4294967295|O>>>11),O=R+(V^(N|~z))+j[4]+4149444226&4294967295,R=N+(O<<6&4294967295|O>>>26),O=z+(N^(R|~V))+j[11]+3174756917&4294967295,z=R+(O<<10&4294967295|O>>>22),O=V+(R^(z|~N))+j[2]+718787259&4294967295,V=z+(O<<15&4294967295|O>>>17),O=N+(z^(V|~R))+j[9]+3951481745&4294967295,k.g[0]=k.g[0]+R&4294967295,k.g[1]=k.g[1]+(V+(O<<21&4294967295|O>>>11))&4294967295,k.g[2]=k.g[2]+V&4294967295,k.g[3]=k.g[3]+z&4294967295}a.prototype.u=function(k,R){R===void 0&&(R=k.length);for(var N=R-this.blockSize,j=this.B,V=this.h,z=0;z<R;){if(V==0)for(;z<=N;)i(this,k,z),z+=this.blockSize;if(typeof k=="string"){for(;z<R;)if(j[V++]=k.charCodeAt(z++),V==this.blockSize){i(this,j),V=0;break}}else for(;z<R;)if(j[V++]=k[z++],V==this.blockSize){i(this,j),V=0;break}}this.h=V,this.o+=R},a.prototype.v=function(){var k=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);k[0]=128;for(var R=1;R<k.length-8;++R)k[R]=0;var N=8*this.o;for(R=k.length-8;R<k.length;++R)k[R]=N&255,N/=256;for(this.u(k),k=Array(16),R=N=0;4>R;++R)for(var j=0;32>j;j+=8)k[N++]=this.g[R]>>>j&255;return k};function l(k,R){var N=m;return Object.prototype.hasOwnProperty.call(N,k)?N[k]:N[k]=R(k)}function u(k,R){this.h=R;for(var N=[],j=!0,V=k.length-1;0<=V;V--){var z=k[V]|0;j&&z==R||(N[V]=z,j=!1)}this.g=N}var m={};function p(k){return-128<=k&&128>k?l(k,function(R){return new u([R|0],0>R?-1:0)}):new u([k|0],0>k?-1:0)}function y(k){if(isNaN(k)||!isFinite(k))return b;if(0>k)return I(y(-k));for(var R=[],N=1,j=0;k>=N;j++)R[j]=k/N|0,N*=4294967296;return new u(R,0)}function v(k,R){if(k.length==0)throw Error("number format error: empty string");if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(k.charAt(0)=="-")return I(v(k.substring(1),R));if(0<=k.indexOf("-"))throw Error('number format error: interior "-" character');for(var N=y(Math.pow(R,8)),j=b,V=0;V<k.length;V+=8){var z=Math.min(8,k.length-V),O=parseInt(k.substring(V,V+z),R);8>z?(z=y(Math.pow(R,z)),j=j.j(z).add(y(O))):(j=j.j(N),j=j.add(y(O)))}return j}var b=p(0),T=p(1),C=p(16777216);n=u.prototype,n.m=function(){if(M(this))return-I(this).m();for(var k=0,R=1,N=0;N<this.g.length;N++){var j=this.i(N);k+=(0<=j?j:4294967296+j)*R,R*=4294967296}return k},n.toString=function(k){if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(A(this))return"0";if(M(this))return"-"+I(this).toString(k);for(var R=y(Math.pow(k,6)),N=this,j="";;){var V=ie(N,R).g;N=H(N,V.j(R));var z=((0<N.g.length?N.g[0]:N.h)>>>0).toString(k);if(N=V,A(N))return z+j;for(;6>z.length;)z="0"+z;j=z+j}},n.i=function(k){return 0>k?0:k<this.g.length?this.g[k]:this.h};function A(k){if(k.h!=0)return!1;for(var R=0;R<k.g.length;R++)if(k.g[R]!=0)return!1;return!0}function M(k){return k.h==-1}n.l=function(k){return k=H(this,k),M(k)?-1:A(k)?0:1};function I(k){for(var R=k.g.length,N=[],j=0;j<R;j++)N[j]=~k.g[j];return new u(N,~k.h).add(T)}n.abs=function(){return M(this)?I(this):this},n.add=function(k){for(var R=Math.max(this.g.length,k.g.length),N=[],j=0,V=0;V<=R;V++){var z=j+(this.i(V)&65535)+(k.i(V)&65535),O=(z>>>16)+(this.i(V)>>>16)+(k.i(V)>>>16);j=O>>>16,z&=65535,O&=65535,N[V]=O<<16|z}return new u(N,N[N.length-1]&-2147483648?-1:0)};function H(k,R){return k.add(I(R))}n.j=function(k){if(A(this)||A(k))return b;if(M(this))return M(k)?I(this).j(I(k)):I(I(this).j(k));if(M(k))return I(this.j(I(k)));if(0>this.l(C)&&0>k.l(C))return y(this.m()*k.m());for(var R=this.g.length+k.g.length,N=[],j=0;j<2*R;j++)N[j]=0;for(j=0;j<this.g.length;j++)for(var V=0;V<k.g.length;V++){var z=this.i(j)>>>16,O=this.i(j)&65535,dt=k.i(V)>>>16,Me=k.i(V)&65535;N[2*j+2*V]+=O*Me,W(N,2*j+2*V),N[2*j+2*V+1]+=z*Me,W(N,2*j+2*V+1),N[2*j+2*V+1]+=O*dt,W(N,2*j+2*V+1),N[2*j+2*V+2]+=z*dt,W(N,2*j+2*V+2)}for(j=0;j<R;j++)N[j]=N[2*j+1]<<16|N[2*j];for(j=R;j<2*R;j++)N[j]=0;return new u(N,0)};function W(k,R){for(;(k[R]&65535)!=k[R];)k[R+1]+=k[R]>>>16,k[R]&=65535,R++}function q(k,R){this.g=k,this.h=R}function ie(k,R){if(A(R))throw Error("division by zero");if(A(k))return new q(b,b);if(M(k))return R=ie(I(k),R),new q(I(R.g),I(R.h));if(M(R))return R=ie(k,I(R)),new q(I(R.g),R.h);if(30<k.g.length){if(M(k)||M(R))throw Error("slowDivide_ only works with positive integers.");for(var N=T,j=R;0>=j.l(k);)N=le(N),j=le(j);var V=pe(N,1),z=pe(j,1);for(j=pe(j,2),N=pe(N,2);!A(j);){var O=z.add(j);0>=O.l(k)&&(V=V.add(N),z=O),j=pe(j,1),N=pe(N,1)}return R=H(k,V.j(R)),new q(V,R)}for(V=b;0<=k.l(R);){for(N=Math.max(1,Math.floor(k.m()/R.m())),j=Math.ceil(Math.log(N)/Math.LN2),j=48>=j?1:Math.pow(2,j-48),z=y(N),O=z.j(R);M(O)||0<O.l(k);)N-=j,z=y(N),O=z.j(R);A(z)&&(z=T),V=V.add(z),k=H(k,O)}return new q(V,k)}n.A=function(k){return ie(this,k).h},n.and=function(k){for(var R=Math.max(this.g.length,k.g.length),N=[],j=0;j<R;j++)N[j]=this.i(j)&k.i(j);return new u(N,this.h&k.h)},n.or=function(k){for(var R=Math.max(this.g.length,k.g.length),N=[],j=0;j<R;j++)N[j]=this.i(j)|k.i(j);return new u(N,this.h|k.h)},n.xor=function(k){for(var R=Math.max(this.g.length,k.g.length),N=[],j=0;j<R;j++)N[j]=this.i(j)^k.i(j);return new u(N,this.h^k.h)};function le(k){for(var R=k.g.length+1,N=[],j=0;j<R;j++)N[j]=k.i(j)<<1|k.i(j-1)>>>31;return new u(N,k.h)}function pe(k,R){var N=R>>5;R%=32;for(var j=k.g.length-N,V=[],z=0;z<j;z++)V[z]=0<R?k.i(z+N)>>>R|k.i(z+N+1)<<32-R:k.i(z+N);return new u(V,k.h)}a.prototype.digest=a.prototype.v,a.prototype.reset=a.prototype.s,a.prototype.update=a.prototype.u,yx=a,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=y,u.fromString=v,Ts=u}).apply(typeof jb<"u"?jb:typeof self<"u"?self:typeof window<"u"?window:{});var Ld=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var vx,Tc,_x,Qd,Xp,bx,Ex,xx;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,_,E){return d==Array.prototype||d==Object.prototype||(d[_]=E.value),d};function t(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ld=="object"&&Ld];for(var _=0;_<d.length;++_){var E=d[_];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var a=t(this);function i(d,_){if(_)e:{var E=a;d=d.split(".");for(var S=0;S<d.length-1;S++){var F=d[S];if(!(F in E))break e;E=E[F]}d=d[d.length-1],S=E[d],_=_(S),_!=S&&_!=null&&e(E,d,{configurable:!0,writable:!0,value:_})}}function l(d,_){d instanceof String&&(d+="");var E=0,S=!1,F={next:function(){if(!S&&E<d.length){var X=E++;return{value:_(X,d[X]),done:!1}}return S=!0,{done:!0,value:void 0}}};return F[Symbol.iterator]=function(){return F},F}i("Array.prototype.values",function(d){return d||function(){return l(this,function(_,E){return E})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},m=this||self;function p(d){var _=typeof d;return _=_!="object"?_:d?Array.isArray(d)?"array":_:"null",_=="array"||_=="object"&&typeof d.length=="number"}function y(d){var _=typeof d;return _=="object"&&d!=null||_=="function"}function v(d,_,E){return d.call.apply(d.bind,arguments)}function b(d,_,E){if(!d)throw Error();if(2<arguments.length){var S=Array.prototype.slice.call(arguments,2);return function(){var F=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(F,S),d.apply(_,F)}}return function(){return d.apply(_,arguments)}}function T(d,_,E){return T=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?v:b,T.apply(null,arguments)}function C(d,_){var E=Array.prototype.slice.call(arguments,1);return function(){var S=E.slice();return S.push.apply(S,arguments),d.apply(this,S)}}function A(d,_){function E(){}E.prototype=_.prototype,d.aa=_.prototype,d.prototype=new E,d.prototype.constructor=d,d.Qb=function(S,F,X){for(var de=Array(arguments.length-2),Ge=2;Ge<arguments.length;Ge++)de[Ge-2]=arguments[Ge];return _.prototype[F].apply(S,de)}}function M(d){const _=d.length;if(0<_){const E=Array(_);for(let S=0;S<_;S++)E[S]=d[S];return E}return[]}function I(d,_){for(let E=1;E<arguments.length;E++){const S=arguments[E];if(p(S)){const F=d.length||0,X=S.length||0;d.length=F+X;for(let de=0;de<X;de++)d[F+de]=S[de]}else d.push(S)}}class H{constructor(_,E){this.i=_,this.j=E,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function W(d){return/^[\s\xa0]*$/.test(d)}function q(){var d=m.navigator;return d&&(d=d.userAgent)?d:""}function ie(d){return ie[" "](d),d}ie[" "]=function(){};var le=q().indexOf("Gecko")!=-1&&!(q().toLowerCase().indexOf("webkit")!=-1&&q().indexOf("Edge")==-1)&&!(q().indexOf("Trident")!=-1||q().indexOf("MSIE")!=-1)&&q().indexOf("Edge")==-1;function pe(d,_,E){for(const S in d)_.call(E,d[S],S,d)}function k(d,_){for(const E in d)_.call(void 0,d[E],E,d)}function R(d){const _={};for(const E in d)_[E]=d[E];return _}const N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function j(d,_){let E,S;for(let F=1;F<arguments.length;F++){S=arguments[F];for(E in S)d[E]=S[E];for(let X=0;X<N.length;X++)E=N[X],Object.prototype.hasOwnProperty.call(S,E)&&(d[E]=S[E])}}function V(d){var _=1;d=d.split(":");const E=[];for(;0<_&&d.length;)E.push(d.shift()),_--;return d.length&&E.push(d.join(":")),E}function z(d){m.setTimeout(()=>{throw d},0)}function O(){var d=Fe;let _=null;return d.g&&(_=d.g,d.g=d.g.next,d.g||(d.h=null),_.next=null),_}class dt{constructor(){this.h=this.g=null}add(_,E){const S=Me.get();S.set(_,E),this.h?this.h.next=S:this.g=S,this.h=S}}var Me=new H(()=>new J,d=>d.reset());class J{constructor(){this.next=this.g=this.h=null}set(_,E){this.h=_,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let ue,ve=!1,Fe=new dt,L=()=>{const d=m.Promise.resolve(void 0);ue=()=>{d.then(se)}};var se=()=>{for(var d;d=O();){try{d.h.call(d.g)}catch(E){z(E)}var _=Me;_.j(d),100>_.h&&(_.h++,d.next=_.g,_.g=d)}ve=!1};function he(){this.s=this.s,this.C=this.C}he.prototype.s=!1,he.prototype.ma=function(){this.s||(this.s=!0,this.N())},he.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function oe(d,_){this.type=d,this.g=this.target=_,this.defaultPrevented=!1}oe.prototype.h=function(){this.defaultPrevented=!0};var be=function(){if(!m.addEventListener||!Object.defineProperty)return!1;var d=!1,_=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const E=()=>{};m.addEventListener("test",E,_),m.removeEventListener("test",E,_)}catch{}return d}();function je(d,_){if(oe.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var E=this.type=d.type,S=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=_,_=d.relatedTarget){if(le){e:{try{ie(_.nodeName);var F=!0;break e}catch{}F=!1}F||(_=null)}}else E=="mouseover"?_=d.fromElement:E=="mouseout"&&(_=d.toElement);this.relatedTarget=_,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:Te[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&je.aa.h.call(this)}}A(je,oe);var Te={2:"touch",3:"pen",4:"mouse"};je.prototype.h=function(){je.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var xt="closure_listenable_"+(1e6*Math.random()|0),Ze=0;function Sn(d,_,E,S,F){this.listener=d,this.proxy=null,this.src=_,this.type=E,this.capture=!!S,this.ha=F,this.key=++Ze,this.da=this.fa=!1}function Yn(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function Nn(d){this.src=d,this.g={},this.h=0}Nn.prototype.add=function(d,_,E,S,F){var X=d.toString();d=this.g[X],d||(d=this.g[X]=[],this.h++);var de=ce(d,_,S,F);return-1<de?(_=d[de],E||(_.fa=!1)):(_=new Sn(_,this.src,X,!!S,F),_.fa=E,d.push(_)),_};function Kn(d,_){var E=_.type;if(E in d.g){var S=d.g[E],F=Array.prototype.indexOf.call(S,_,void 0),X;(X=0<=F)&&Array.prototype.splice.call(S,F,1),X&&(Yn(_),d.g[E].length==0&&(delete d.g[E],d.h--))}}function ce(d,_,E,S){for(var F=0;F<d.length;++F){var X=d[F];if(!X.da&&X.listener==_&&X.capture==!!E&&X.ha==S)return F}return-1}var we="closure_lm_"+(1e6*Math.random()|0),Q={};function _e(d,_,E,S,F){if(Array.isArray(_)){for(var X=0;X<_.length;X++)_e(d,_[X],E,S,F);return null}return E=hu(E),d&&d[xt]?d.K(_,E,y(S)?!!S.capture:!1,F):ye(d,_,E,!1,S,F)}function ye(d,_,E,S,F,X){if(!_)throw Error("Invalid event type");var de=y(F)?!!F.capture:!!F,Ge=Li(d);if(Ge||(d[we]=Ge=new Nn(d)),E=Ge.add(_,E,S,de,X),E.proxy)return E;if(S=kn(),E.proxy=S,S.src=d,S.listener=E,d.addEventListener)be||(F=de),F===void 0&&(F=!1),d.addEventListener(_.toString(),S,F);else if(d.attachEvent)d.attachEvent(Zr(_.toString()),S);else if(d.addListener&&d.removeListener)d.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return E}function kn(){function d(E){return _.call(d.src,d.listener,E)}const _=cl;return d}function Qn(d,_,E,S,F){if(Array.isArray(_))for(var X=0;X<_.length;X++)Qn(d,_[X],E,S,F);else S=y(S)?!!S.capture:!!S,E=hu(E),d&&d[xt]?(d=d.i,_=String(_).toString(),_ in d.g&&(X=d.g[_],E=ce(X,E,S,F),-1<E&&(Yn(X[E]),Array.prototype.splice.call(X,E,1),X.length==0&&(delete d.g[_],d.h--)))):d&&(d=Li(d))&&(_=d.g[_.toString()],d=-1,_&&(d=ce(_,E,S,F)),(E=-1<d?_[d]:null)&&Tt(E))}function Tt(d){if(typeof d!="number"&&d&&!d.da){var _=d.src;if(_&&_[xt])Kn(_.i,d);else{var E=d.type,S=d.proxy;_.removeEventListener?_.removeEventListener(E,S,d.capture):_.detachEvent?_.detachEvent(Zr(E),S):_.addListener&&_.removeListener&&_.removeListener(S),(E=Li(_))?(Kn(E,d),E.h==0&&(E.src=null,_[we]=null)):Yn(d)}}}function Zr(d){return d in Q?Q[d]:Q[d]="on"+d}function cl(d,_){if(d.da)d=!0;else{_=new je(_,this);var E=d.listener,S=d.ha||d.src;d.fa&&Tt(d),d=E.call(S,_)}return d}function Li(d){return d=d[we],d instanceof Nn?d:null}var ul="__closure_events_fn_"+(1e9*Math.random()>>>0);function hu(d){return typeof d=="function"?d:(d[ul]||(d[ul]=function(_){return d.handleEvent(_)}),d[ul])}function wt(){he.call(this),this.i=new Nn(this),this.M=this,this.F=null}A(wt,he),wt.prototype[xt]=!0,wt.prototype.removeEventListener=function(d,_,E,S){Qn(this,d,_,E,S)};function tt(d,_){var E,S=d.F;if(S)for(E=[];S;S=S.F)E.push(S);if(d=d.M,S=_.type||_,typeof _=="string")_=new oe(_,d);else if(_ instanceof oe)_.target=_.target||d;else{var F=_;_=new oe(S,d),j(_,F)}if(F=!0,E)for(var X=E.length-1;0<=X;X--){var de=_.g=E[X];F=Ln(de,S,!0,_)&&F}if(de=_.g=d,F=Ln(de,S,!0,_)&&F,F=Ln(de,S,!1,_)&&F,E)for(X=0;X<E.length;X++)de=_.g=E[X],F=Ln(de,S,!1,_)&&F}wt.prototype.N=function(){if(wt.aa.N.call(this),this.i){var d=this.i,_;for(_ in d.g){for(var E=d.g[_],S=0;S<E.length;S++)Yn(E[S]);delete d.g[_],d.h--}}this.F=null},wt.prototype.K=function(d,_,E,S){return this.i.add(String(d),_,!1,E,S)},wt.prototype.L=function(d,_,E,S){return this.i.add(String(d),_,!0,E,S)};function Ln(d,_,E,S){if(_=d.i.g[String(_)],!_)return!0;_=_.concat();for(var F=!0,X=0;X<_.length;++X){var de=_[X];if(de&&!de.da&&de.capture==E){var Ge=de.listener,Vt=de.ha||de.src;de.fa&&Kn(d.i,de),F=Ge.call(Vt,S)!==!1&&F}}return F&&!S.defaultPrevented}function dn(d,_,E){if(typeof d=="function")E&&(d=T(d,E));else if(d&&typeof d.handleEvent=="function")d=T(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(_)?-1:m.setTimeout(d,_||0)}function fu(d){d.g=dn(()=>{d.g=null,d.i&&(d.i=!1,fu(d))},d.l);const _=d.h;d.h=null,d.m.apply(null,_)}class yf extends he{constructor(_,E){super(),this.m=_,this.l=E,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:fu(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Vs(d){he.call(this),this.h=d,this.g={}}A(Vs,he);var Us=[];function zs(d){pe(d.g,function(_,E){this.g.hasOwnProperty(E)&&Tt(_)},d),d.g={}}Vs.prototype.N=function(){Vs.aa.N.call(this),zs(this)},Vs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var fr=m.JSON.stringify,Vi=m.JSON.parse,Bs=class{stringify(d){return m.JSON.stringify(d,void 0)}parse(d){return m.JSON.parse(d,void 0)}};function dl(){}dl.prototype.h=null;function hl(d){return d.h||(d.h=d.i())}function fl(){}var Jr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ea(){oe.call(this,"d")}A(ea,oe);function ml(){oe.call(this,"c")}A(ml,oe);var Nr={},pl=null;function Ua(){return pl=pl||new wt}Nr.La="serverreachability";function Ui(d){oe.call(this,Nr.La,d)}A(Ui,oe);function za(d){const _=Ua();tt(_,new Ui(_))}Nr.STAT_EVENT="statevent";function mu(d,_){oe.call(this,Nr.STAT_EVENT,d),this.stat=_}A(mu,oe);function pt(d){const _=Ua();tt(_,new mu(_,d))}Nr.Ma="timingevent";function Lt(d,_){oe.call(this,Nr.Ma,d),this.size=_}A(Lt,oe);function Ot(d,_){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){d()},_)}function Wn(){this.g=!0}Wn.prototype.xa=function(){this.g=!1};function gl(d,_,E,S,F,X){d.info(function(){if(d.g)if(X)for(var de="",Ge=X.split("&"),Vt=0;Vt<Ge.length;Vt++){var Ye=Ge[Vt].split("=");if(1<Ye.length){var Gt=Ye[0];Ye=Ye[1];var Ut=Gt.split("_");de=2<=Ut.length&&Ut[1]=="type"?de+(Gt+"="+Ye+"&"):de+(Gt+"=redacted&")}}else de=null;else de=X;return"XMLHTTP REQ ("+S+") [attempt "+F+"]: "+_+`
`+E+`
`+de})}function vf(d,_,E,S,F,X,de){d.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+F+"]: "+_+`
`+E+`
`+X+" "+de})}function Ba(d,_,E,S){d.info(function(){return"XMLHTTP TEXT ("+_+"): "+qs(d,E)+(S?" "+S:"")})}function pu(d,_){d.info(function(){return"TIMEOUT: "+_})}Wn.prototype.info=function(){};function qs(d,_){if(!d.g)return _;if(!_)return null;try{var E=JSON.parse(_);if(E){for(d=0;d<E.length;d++)if(Array.isArray(E[d])){var S=E[d];if(!(2>S.length)){var F=S[1];if(Array.isArray(F)&&!(1>F.length)){var X=F[0];if(X!="noop"&&X!="stop"&&X!="close")for(var de=1;de<F.length;de++)F[de]=""}}}}return fr(E)}catch{return _}}var qa={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ta={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Cr;function Rr(){}A(Rr,dl),Rr.prototype.g=function(){return new XMLHttpRequest},Rr.prototype.i=function(){return{}},Cr=new Rr;function _n(d,_,E,S){this.j=d,this.i=_,this.l=E,this.R=S||1,this.U=new Vs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Nt}function Nt(){this.i=null,this.g="",this.h=!1}var yl={},zi={};function mr(d,_,E){d.L=1,d.v=Ys(Vn(_)),d.m=E,d.P=!0,na(d,null)}function na(d,_){d.F=Date.now(),Fs(d),d.A=Vn(d.v);var E=d.A,S=d.R;Array.isArray(S)||(S=[String(S)]),Tl(E.i,"t",S),d.C=0,E=d.j.J,d.h=new Nt,d.g=Ou(d.j,E?_:null,!d.m),0<d.O&&(d.M=new yf(T(d.Y,d,d.g),d.O)),_=d.U,E=d.g,S=d.ca;var F="readystatechange";Array.isArray(F)||(F&&(Us[0]=F.toString()),F=Us);for(var X=0;X<F.length;X++){var de=_e(E,F[X],S||_.handleEvent,!1,_.h||_);if(!de)break;_.g[de.key]=de}_=d.H?R(d.H):{},d.m?(d.u||(d.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,_)):(d.u="GET",d.g.ea(d.A,d.u,null,_)),za(),gl(d.i,d.u,d.A,d.l,d.R,d.m)}_n.prototype.ca=function(d){d=d.target;const _=this.M;_&&er(d)==3?_.j():this.Y(d)},_n.prototype.Y=function(d){try{if(d==this.g)e:{const Ut=er(this.g);var _=this.g.Ba();const ua=this.g.Z();if(!(3>Ut)&&(Ut!=3||this.g&&(this.h.h||this.g.oa()||Tu(this.g)))){this.J||Ut!=4||_==7||(_==8||0>=ua?za(3):za(2)),Fa(this);var E=this.g.Z();this.X=E;t:if(gu(this)){var S=Tu(this.g);d="";var F=S.length,X=er(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){en(this),Ir(this);var de="";break t}this.h.i=new m.TextDecoder}for(_=0;_<F;_++)this.h.h=!0,d+=this.h.i.decode(S[_],{stream:!(X&&_==F-1)});S.length=0,this.h.g+=d,this.C=0,de=this.h.g}else de=this.g.oa();if(this.o=E==200,vf(this.i,this.u,this.A,this.l,this.R,Ut,E),this.o){if(this.T&&!this.K){t:{if(this.g){var Ge,Vt=this.g;if((Ge=Vt.g?Vt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!W(Ge)){var Ye=Ge;break t}}Ye=null}if(E=Ye)Ba(this.i,this.l,E,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Hs(this,E);else{this.o=!1,this.s=3,pt(12),en(this),Ir(this);break e}}if(this.P){E=!0;let tn;for(;!this.J&&this.C<de.length;)if(tn=yu(this,de),tn==zi){Ut==4&&(this.s=4,pt(14),E=!1),Ba(this.i,this.l,null,"[Incomplete Response]");break}else if(tn==yl){this.s=4,pt(15),Ba(this.i,this.l,de,"[Invalid Chunk]"),E=!1;break}else Ba(this.i,this.l,tn,null),Hs(this,tn);if(gu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ut!=4||de.length!=0||this.h.h||(this.s=1,pt(16),E=!1),this.o=this.o&&E,!E)Ba(this.i,this.l,de,"[Invalid Chunked Response]"),en(this),Ir(this);else if(0<de.length&&!this.W){this.W=!0;var Gt=this.j;Gt.g==this&&Gt.ba&&!Gt.M&&(Gt.j.info("Great, no buffering proxy detected. Bytes received: "+de.length),ti(Gt),Gt.M=!0,pt(11))}}else Ba(this.i,this.l,de,null),Hs(this,de);Ut==4&&en(this),this.o&&!this.J&&(Ut==4?Cu(this.j,this):(this.o=!1,Fs(this)))}else Tf(this.g),E==400&&0<de.indexOf("Unknown SID")?(this.s=3,pt(12)):(this.s=0,pt(13)),en(this),Ir(this)}}}catch{}finally{}};function gu(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function yu(d,_){var E=d.C,S=_.indexOf(`
`,E);return S==-1?zi:(E=Number(_.substring(E,S)),isNaN(E)?yl:(S+=1,S+E>_.length?zi:(_=_.slice(S,S+E),d.C=S+E,_)))}_n.prototype.cancel=function(){this.J=!0,en(this)};function Fs(d){d.S=Date.now()+d.I,vu(d,d.I)}function vu(d,_){if(d.B!=null)throw Error("WatchDog timer not null");d.B=Ot(T(d.ba,d),_)}function Fa(d){d.B&&(m.clearTimeout(d.B),d.B=null)}_n.prototype.ba=function(){this.B=null;const d=Date.now();0<=d-this.S?(pu(this.i,this.A),this.L!=2&&(za(),pt(17)),en(this),this.s=2,Ir(this)):vu(this,this.S-d)};function Ir(d){d.j.G==0||d.J||Cu(d.j,d)}function en(d){Fa(d);var _=d.M;_&&typeof _.ma=="function"&&_.ma(),d.M=null,zs(d.U),d.g&&(_=d.g,d.g=null,_.abort(),_.ma())}function Hs(d,_){try{var E=d.j;if(E.G!=0&&(E.g==d||vl(E.h,d))){if(!d.K&&vl(E.h,d)&&E.G==3){try{var S=E.Da.g.parse(_)}catch{S=null}if(Array.isArray(S)&&S.length==3){var F=S;if(F[0]==0){e:if(!E.u){if(E.g)if(E.g.F+3e3<d.F)Zi(E),Wi(E);else break e;Cl(E),pt(18)}}else E.za=F[1],0<E.za-E.T&&37500>F[2]&&E.F&&E.v==0&&!E.C&&(E.C=Ot(T(E.Za,E),6e3));if(1>=qi(E.h)&&E.ca){try{E.ca()}catch{}E.ca=void 0}}else ca(E,11)}else if((d.K||E.g==d)&&Zi(E),!W(_))for(F=E.Da.g.parse(_),_=0;_<F.length;_++){let Ye=F[_];if(E.T=Ye[0],Ye=Ye[1],E.G==2)if(Ye[0]=="c"){E.K=Ye[1],E.ia=Ye[2];const Gt=Ye[3];Gt!=null&&(E.la=Gt,E.j.info("VER="+E.la));const Ut=Ye[4];Ut!=null&&(E.Aa=Ut,E.j.info("SVER="+E.Aa));const ua=Ye[5];ua!=null&&typeof ua=="number"&&0<ua&&(S=1.5*ua,E.L=S,E.j.info("backChannelRequestTimeoutMs_="+S)),S=E;const tn=d.g;if(tn){const Lr=tn.g?tn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Lr){var X=S.h;X.g||Lr.indexOf("spdy")==-1&&Lr.indexOf("quic")==-1&&Lr.indexOf("h2")==-1||(X.j=X.l,X.g=new Set,X.h&&(Fi(X,X.h),X.h=null))}if(S.D){const Il=tn.g?tn.g.getResponseHeader("X-HTTP-Session-Id"):null;Il&&(S.ya=Il,st(S.I,S.D,Il))}}E.G=3,E.l&&E.l.ua(),E.ba&&(E.R=Date.now()-d.F,E.j.info("Handshake RTT: "+E.R+"ms")),S=E;var de=d;if(S.qa=Iu(S,S.J?S.ia:null,S.W),de.K){bn(S.h,de);var Ge=de,Vt=S.L;Vt&&(Ge.I=Vt),Ge.B&&(Fa(Ge),Fs(Ge)),S.g=de}else Su(S);0<E.i.length&&Xi(E)}else Ye[0]!="stop"&&Ye[0]!="close"||ca(E,7);else E.G==3&&(Ye[0]=="stop"||Ye[0]=="close"?Ye[0]=="stop"?ca(E,7):Sl(E):Ye[0]!="noop"&&E.l&&E.l.ta(Ye),E.v=0)}}za(4)}catch{}}var _u=class{constructor(d,_){this.g=d,this.map=_}};function ra(d){this.l=d||10,m.PerformanceNavigationTiming?(d=m.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Bi(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function qi(d){return d.h?1:d.g?d.g.size:0}function vl(d,_){return d.h?d.h==_:d.g?d.g.has(_):!1}function Fi(d,_){d.g?d.g.add(_):d.h=_}function bn(d,_){d.h&&d.h==_?d.h=null:d.g&&d.g.has(_)&&d.g.delete(_)}ra.prototype.cancel=function(){if(this.i=_l(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function _l(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let _=d.i;for(const E of d.g.values())_=_.concat(E.D);return _}return M(d.i)}function _f(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(p(d)){for(var _=[],E=d.length,S=0;S<E;S++)_.push(d[S]);return _}_=[],E=0;for(S in d)_[E++]=d[S];return _}function Hi(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(p(d)||typeof d=="string"){var _=[];d=d.length;for(var E=0;E<d;E++)_.push(E);return _}_=[],E=0;for(const S in d)_[E++]=S;return _}}}function bl(d,_){if(d.forEach&&typeof d.forEach=="function")d.forEach(_,void 0);else if(p(d)||typeof d=="string")Array.prototype.forEach.call(d,_,void 0);else for(var E=Hi(d),S=_f(d),F=S.length,X=0;X<F;X++)_.call(void 0,S[X],E&&E[X],d)}var $s=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function bf(d,_){if(d){d=d.split("&");for(var E=0;E<d.length;E++){var S=d[E].indexOf("="),F=null;if(0<=S){var X=d[E].substring(0,S);F=d[E].substring(S+1)}else X=d[E];_(X,F?decodeURIComponent(F.replace(/\+/g," ")):"")}}}function Dt(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof Dt){this.h=d.h,Gs(this,d.j),this.o=d.o,this.g=d.g,Ha(this,d.s),this.l=d.l;var _=d.i,E=new sa;E.i=_.i,_.g&&(E.g=new Map(_.g),E.h=_.h),aa(this,E),this.m=d.m}else d&&(_=String(d).match($s))?(this.h=!1,Gs(this,_[1]||"",!0),this.o=Xn(_[2]||""),this.g=Xn(_[3]||"",!0),Ha(this,_[4]),this.l=Xn(_[5]||"",!0),aa(this,_[6]||"",!0),this.m=Xn(_[7]||"")):(this.h=!1,this.i=new sa(null,this.h))}Dt.prototype.toString=function(){var d=[],_=this.j;_&&d.push(Ks(_,El,!0),":");var E=this.g;return(E||_=="file")&&(d.push("//"),(_=this.o)&&d.push(Ks(_,El,!0),"@"),d.push(encodeURIComponent(String(E)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.s,E!=null&&d.push(":",String(E))),(E=this.l)&&(this.g&&E.charAt(0)!="/"&&d.push("/"),d.push(Ks(E,E.charAt(0)=="/"?Ef:xl,!0))),(E=this.i.toString())&&d.push("?",E),(E=this.m)&&d.push("#",Ks(E,$i)),d.join("")};function Vn(d){return new Dt(d)}function Gs(d,_,E){d.j=E?Xn(_,!0):_,d.j&&(d.j=d.j.replace(/:$/,""))}function Ha(d,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);d.s=_}else d.s=null}function aa(d,_,E){_ instanceof sa?(d.i=_,Eu(d.i,d.h)):(E||(_=Ks(_,xf)),d.i=new sa(_,d.h))}function st(d,_,E){d.i.set(_,E)}function Ys(d){return st(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function Xn(d,_){return d?_?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Ks(d,_,E){return typeof d=="string"?(d=encodeURI(d).replace(_,bu),E&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function bu(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var El=/[#\/\?@]/g,xl=/[#\?:]/g,Ef=/[#\?]/g,xf=/[#\?@]/g,$i=/#/g;function sa(d,_){this.h=this.g=null,this.i=d||null,this.j=!!_}function Zn(d){d.g||(d.g=new Map,d.h=0,d.i&&bf(d.i,function(_,E){d.add(decodeURIComponent(_.replace(/\+/g," ")),E)}))}n=sa.prototype,n.add=function(d,_){Zn(this),this.i=null,d=Or(this,d);var E=this.g.get(d);return E||this.g.set(d,E=[]),E.push(_),this.h+=1,this};function ia(d,_){Zn(d),_=Or(d,_),d.g.has(_)&&(d.i=null,d.h-=d.g.get(_).length,d.g.delete(_))}function oa(d,_){return Zn(d),_=Or(d,_),d.g.has(_)}n.forEach=function(d,_){Zn(this),this.g.forEach(function(E,S){E.forEach(function(F){d.call(_,F,S,this)},this)},this)},n.na=function(){Zn(this);const d=Array.from(this.g.values()),_=Array.from(this.g.keys()),E=[];for(let S=0;S<_.length;S++){const F=d[S];for(let X=0;X<F.length;X++)E.push(_[S])}return E},n.V=function(d){Zn(this);let _=[];if(typeof d=="string")oa(this,d)&&(_=_.concat(this.g.get(Or(this,d))));else{d=Array.from(this.g.values());for(let E=0;E<d.length;E++)_=_.concat(d[E])}return _},n.set=function(d,_){return Zn(this),this.i=null,d=Or(this,d),oa(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[_]),this.h+=1,this},n.get=function(d,_){return d?(d=this.V(d),0<d.length?String(d[0]):_):_};function Tl(d,_,E){ia(d,_),0<E.length&&(d.i=null,d.g.set(Or(d,_),M(E)),d.h+=E.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],_=Array.from(this.g.keys());for(var E=0;E<_.length;E++){var S=_[E];const X=encodeURIComponent(String(S)),de=this.V(S);for(S=0;S<de.length;S++){var F=X;de[S]!==""&&(F+="="+encodeURIComponent(String(de[S]))),d.push(F)}}return this.i=d.join("&")};function Or(d,_){return _=String(_),d.j&&(_=_.toLowerCase()),_}function Eu(d,_){_&&!d.j&&(Zn(d),d.i=null,d.g.forEach(function(E,S){var F=S.toLowerCase();S!=F&&(ia(this,S),Tl(this,F,E))},d)),d.j=_}function Qs(d,_){const E=new Wn;if(m.Image){const S=new Image;S.onload=C(Jn,E,"TestLoadImage: loaded",!0,_,S),S.onerror=C(Jn,E,"TestLoadImage: error",!1,_,S),S.onabort=C(Jn,E,"TestLoadImage: abort",!1,_,S),S.ontimeout=C(Jn,E,"TestLoadImage: timeout",!1,_,S),m.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=d}else _(!1)}function pr(d,_){const E=new Wn,S=new AbortController,F=setTimeout(()=>{S.abort(),Jn(E,"TestPingServer: timeout",!1,_)},1e4);fetch(d,{signal:S.signal}).then(X=>{clearTimeout(F),X.ok?Jn(E,"TestPingServer: ok",!0,_):Jn(E,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(F),Jn(E,"TestPingServer: error",!1,_)})}function Jn(d,_,E,S,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),S(E)}catch{}}function Ws(){this.g=new Bs}function Dr(d,_,E){const S=E||"";try{bl(d,function(F,X){let de=F;y(F)&&(de=fr(F)),_.push(S+X+"="+encodeURIComponent(de))})}catch(F){throw _.push(S+"type="+encodeURIComponent("_badmap")),F}}function $a(d){this.l=d.Ub||null,this.j=d.eb||!1}A($a,dl),$a.prototype.g=function(){return new la(this.l,this.j)},$a.prototype.i=function(d){return function(){return d}}({});function la(d,_){wt.call(this),this.D=d,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}A(la,wt),n=la.prototype,n.open=function(d,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=_,this.readyState=1,Pr(this)},n.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(_.body=d),(this.D||m).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,jr(this)),this.readyState=0},n.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,Pr(this)),this.g&&(this.readyState=3,Pr(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;wl(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function wl(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}n.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var _=d.value?d.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!d.done}))&&(this.response=this.responseText+=_)}d.done?jr(this):Pr(this),this.readyState==3&&wl(this)}},n.Ra=function(d){this.g&&(this.response=this.responseText=d,jr(this))},n.Qa=function(d){this.g&&(this.response=d,jr(this))},n.ga=function(){this.g&&jr(this)};function jr(d){d.readyState=4,d.l=null,d.j=null,d.v=null,Pr(d)}n.setRequestHeader=function(d,_){this.u.append(d,_)},n.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],_=this.h.entries();for(var E=_.next();!E.done;)E=E.value,d.push(E[0]+": "+E[1]),E=_.next();return d.join(`\r
`)};function Pr(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(la.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function Al(d){let _="";return pe(d,function(E,S){_+=S,_+=":",_+=E,_+=`\r
`}),_}function $t(d,_,E){e:{for(S in E){var S=!1;break e}S=!0}S||(E=Al(E),typeof d=="string"?E!=null&&encodeURIComponent(String(E)):st(d,_,E))}function Je(d){wt.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}A(Je,wt);var Gi=/^https?$/i,Xs=["POST","PUT"];n=Je.prototype,n.Ha=function(d){this.J=d},n.ea=function(d,_,E,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);_=_?_.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Cr.g(),this.v=this.o?hl(this.o):hl(Cr),this.g.onreadystatechange=T(this.Ea,this);try{this.B=!0,this.g.open(_,String(d),!0),this.B=!1}catch(X){xu(this,X);return}if(d=E||"",E=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var F in S)E.set(F,S[F]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const X of S.keys())E.set(X,S.get(X));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(E.keys()).find(X=>X.toLowerCase()=="content-type"),F=m.FormData&&d instanceof m.FormData,!(0<=Array.prototype.indexOf.call(Xs,_,void 0))||S||F||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[X,de]of E)this.g.setRequestHeader(X,de);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Zs(this),this.u=!0,this.g.send(d),this.u=!1}catch(X){xu(this,X)}};function xu(d,_){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=_,d.m=5,Yi(d),Mr(d)}function Yi(d){d.A||(d.A=!0,tt(d,"complete"),tt(d,"error"))}n.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,tt(this,"complete"),tt(this,"abort"),Mr(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Mr(this,!0)),Je.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Ki(this):this.bb())},n.bb=function(){Ki(this)};function Ki(d){if(d.h&&typeof u<"u"&&(!d.v[1]||er(d)!=4||d.Z()!=2)){if(d.u&&er(d)==4)dn(d.Ea,0,d);else if(tt(d,"readystatechange"),er(d)==4){d.h=!1;try{const de=d.Z();e:switch(de){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var E;if(!(E=_)){var S;if(S=de===0){var F=String(d.D).match($s)[1]||null;!F&&m.self&&m.self.location&&(F=m.self.location.protocol.slice(0,-1)),S=!Gi.test(F?F.toLowerCase():"")}E=S}if(E)tt(d,"complete"),tt(d,"success");else{d.m=6;try{var X=2<er(d)?d.g.statusText:""}catch{X=""}d.l=X+" ["+d.Z()+"]",Yi(d)}}finally{Mr(d)}}}}function Mr(d,_){if(d.g){Zs(d);const E=d.g,S=d.v[0]?()=>{}:null;d.g=null,d.v=null,_||tt(d,"ready");try{E.onreadystatechange=S}catch{}}}function Zs(d){d.I&&(m.clearTimeout(d.I),d.I=null)}n.isActive=function(){return!!this.g};function er(d){return d.g?d.g.readyState:0}n.Z=function(){try{return 2<er(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(d){if(this.g){var _=this.g.responseText;return d&&_.indexOf(d)==0&&(_=_.substring(d.length)),Vi(_)}};function Tu(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function Tf(d){const _={};d=(d.g&&2<=er(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<d.length;S++){if(W(d[S]))continue;var E=V(d[S]);const F=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const X=_[F]||[];_[F]=X,X.push(E)}k(_,function(S){return S.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Js(d,_,E){return E&&E.internalChannelParams&&E.internalChannelParams[d]||_}function Qi(d){this.Aa=0,this.i=[],this.j=new Wn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Js("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Js("baseRetryDelayMs",5e3,d),this.cb=Js("retryDelaySeedMs",1e4,d),this.Wa=Js("forwardChannelMaxRetries",2,d),this.wa=Js("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new ra(d&&d.concurrentRequestLimit),this.Da=new Ws,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Qi.prototype,n.la=8,n.G=1,n.connect=function(d,_,E,S){pt(0),this.W=d,this.H=_||{},E&&S!==void 0&&(this.H.OSID=E,this.H.OAID=S),this.F=this.X,this.I=Iu(this,null,this.W),Xi(this)};function Sl(d){if(wu(d),d.G==3){var _=d.U++,E=Vn(d.I);if(st(E,"SID",d.K),st(E,"RID",_),st(E,"TYPE","terminate"),ei(d,E),_=new _n(d,d.j,_),_.L=2,_.v=Ys(Vn(E)),E=!1,m.navigator&&m.navigator.sendBeacon)try{E=m.navigator.sendBeacon(_.v.toString(),"")}catch{}!E&&m.Image&&(new Image().src=_.v,E=!0),E||(_.g=Ou(_.j,null),_.g.ea(_.v)),_.F=Date.now(),Fs(_)}Ru(d)}function Wi(d){d.g&&(ti(d),d.g.cancel(),d.g=null)}function wu(d){Wi(d),d.u&&(m.clearTimeout(d.u),d.u=null),Zi(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&m.clearTimeout(d.s),d.s=null)}function Xi(d){if(!Bi(d.h)&&!d.s){d.s=!0;var _=d.Ga;ue||L(),ve||(ue(),ve=!0),Fe.add(_,d),d.B=0}}function wf(d,_){return qi(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=_.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=Ot(T(d.Ga,d,_),Rl(d,d.B)),d.B++,!0)}n.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;const F=new _n(this,this.j,d);let X=this.o;if(this.S&&(X?(X=R(X),j(X,this.S)):X=this.S),this.m!==null||this.O||(F.H=X,X=null),this.P)e:{for(var _=0,E=0;E<this.i.length;E++){t:{var S=this.i[E];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(_+=S,4096<_){_=E;break e}if(_===4096||E===this.i.length-1){_=E+1;break e}}_=1e3}else _=1e3;_=Au(this,F,_),E=Vn(this.I),st(E,"RID",d),st(E,"CVER",22),this.D&&st(E,"X-HTTP-Session-Id",this.D),ei(this,E),X&&(this.O?_="headers="+encodeURIComponent(String(Al(X)))+"&"+_:this.m&&$t(E,this.m,X)),Fi(this.h,F),this.Ua&&st(E,"TYPE","init"),this.P?(st(E,"$req",_),st(E,"SID","null"),F.T=!0,mr(F,E,null)):mr(F,E,_),this.G=2}}else this.G==3&&(d?Nl(this,d):this.i.length==0||Bi(this.h)||Nl(this))};function Nl(d,_){var E;_?E=_.l:E=d.U++;const S=Vn(d.I);st(S,"SID",d.K),st(S,"RID",E),st(S,"AID",d.T),ei(d,S),d.m&&d.o&&$t(S,d.m,d.o),E=new _n(d,d.j,E,d.B+1),d.m===null&&(E.H=d.o),_&&(d.i=_.D.concat(d.i)),_=Au(d,E,1e3),E.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),Fi(d.h,E),mr(E,S,_)}function ei(d,_){d.H&&pe(d.H,function(E,S){st(_,S,E)}),d.l&&bl({},function(E,S){st(_,S,E)})}function Au(d,_,E){E=Math.min(d.i.length,E);var S=d.l?T(d.l.Na,d.l,d):null;e:{var F=d.i;let X=-1;for(;;){const de=["count="+E];X==-1?0<E?(X=F[0].g,de.push("ofs="+X)):X=0:de.push("ofs="+X);let Ge=!0;for(let Vt=0;Vt<E;Vt++){let Ye=F[Vt].g;const Gt=F[Vt].map;if(Ye-=X,0>Ye)X=Math.max(0,F[Vt].g-100),Ge=!1;else try{Dr(Gt,de,"req"+Ye+"_")}catch{S&&S(Gt)}}if(Ge){S=de.join("&");break e}}}return d=d.i.splice(0,E),_.D=d,S}function Su(d){if(!d.g&&!d.u){d.Y=1;var _=d.Fa;ue||L(),ve||(ue(),ve=!0),Fe.add(_,d),d.v=0}}function Cl(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=Ot(T(d.Fa,d),Rl(d,d.v)),d.v++,!0)}n.Fa=function(){if(this.u=null,Nu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=Ot(T(this.ab,this),d)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,pt(10),Wi(this),Nu(this))};function ti(d){d.A!=null&&(m.clearTimeout(d.A),d.A=null)}function Nu(d){d.g=new _n(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var _=Vn(d.qa);st(_,"RID","rpc"),st(_,"SID",d.K),st(_,"AID",d.T),st(_,"CI",d.F?"0":"1"),!d.F&&d.ja&&st(_,"TO",d.ja),st(_,"TYPE","xmlhttp"),ei(d,_),d.m&&d.o&&$t(_,d.m,d.o),d.L&&(d.g.I=d.L);var E=d.g;d=d.ia,E.L=1,E.v=Ys(Vn(_)),E.m=null,E.P=!0,na(E,d)}n.Za=function(){this.C!=null&&(this.C=null,Wi(this),Cl(this),pt(19))};function Zi(d){d.C!=null&&(m.clearTimeout(d.C),d.C=null)}function Cu(d,_){var E=null;if(d.g==_){Zi(d),ti(d),d.g=null;var S=2}else if(vl(d.h,_))E=_.D,bn(d.h,_),S=1;else return;if(d.G!=0){if(_.o)if(S==1){E=_.m?_.m.length:0,_=Date.now()-_.F;var F=d.B;S=Ua(),tt(S,new Lt(S,E)),Xi(d)}else Su(d);else if(F=_.s,F==3||F==0&&0<_.X||!(S==1&&wf(d,_)||S==2&&Cl(d)))switch(E&&0<E.length&&(_=d.h,_.i=_.i.concat(E)),F){case 1:ca(d,5);break;case 4:ca(d,10);break;case 3:ca(d,6);break;default:ca(d,2)}}}function Rl(d,_){let E=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(E*=2),E*_}function ca(d,_){if(d.j.info("Error code "+_),_==2){var E=T(d.fb,d),S=d.Xa;const F=!S;S=new Dt(S||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||Gs(S,"https"),Ys(S),F?Qs(S.toString(),E):pr(S.toString(),E)}else pt(2);d.G=0,d.l&&d.l.sa(_),Ru(d),wu(d)}n.fb=function(d){d?(this.j.info("Successfully pinged google.com"),pt(2)):(this.j.info("Failed to ping google.com"),pt(1))};function Ru(d){if(d.G=0,d.ka=[],d.l){const _=_l(d.h);(_.length!=0||d.i.length!=0)&&(I(d.ka,_),I(d.ka,d.i),d.h.i.length=0,M(d.i),d.i.length=0),d.l.ra()}}function Iu(d,_,E){var S=E instanceof Dt?Vn(E):new Dt(E);if(S.g!="")_&&(S.g=_+"."+S.g),Ha(S,S.s);else{var F=m.location;S=F.protocol,_=_?_+"."+F.hostname:F.hostname,F=+F.port;var X=new Dt(null);S&&Gs(X,S),_&&(X.g=_),F&&Ha(X,F),E&&(X.l=E),S=X}return E=d.D,_=d.ya,E&&_&&st(S,E,_),st(S,"VER",d.la),ei(d,S),S}function Ou(d,_,E){if(_&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return _=d.Ca&&!d.pa?new Je(new $a({eb:E})):new Je(d.pa),_.Ha(d.J),_}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Du(){}n=Du.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Ji(){}Ji.prototype.g=function(d,_){return new En(d,_)};function En(d,_){wt.call(this),this.g=new Qi(_),this.l=d,this.h=_&&_.messageUrlParams||null,d=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(d?d["X-WebChannel-Content-Type"]=_.messageContentType:d={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(d?d["X-WebChannel-Client-Profile"]=_.va:d={"X-WebChannel-Client-Profile":_.va}),this.g.S=d,(d=_&&_.Sb)&&!W(d)&&(this.g.m=d),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!W(_)&&(this.g.D=_,d=this.h,d!==null&&_ in d&&(d=this.h,_ in d&&delete d[_])),this.j=new kr(this)}A(En,wt),En.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},En.prototype.close=function(){Sl(this.g)},En.prototype.o=function(d){var _=this.g;if(typeof d=="string"){var E={};E.__data__=d,d=E}else this.u&&(E={},E.__data__=fr(d),d=E);_.i.push(new _u(_.Ya++,d)),_.G==3&&Xi(_)},En.prototype.N=function(){this.g.l=null,delete this.j,Sl(this.g),delete this.g,En.aa.N.call(this)};function ju(d){ea.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var _=d.__sm__;if(_){e:{for(const E in _){d=E;break e}d=void 0}(this.i=d)&&(d=this.i,_=_!==null&&d in _?_[d]:void 0),this.data=_}else this.data=d}A(ju,ea);function Pu(){ml.call(this),this.status=1}A(Pu,ml);function kr(d){this.g=d}A(kr,Du),kr.prototype.ua=function(){tt(this.g,"a")},kr.prototype.ta=function(d){tt(this.g,new ju(d))},kr.prototype.sa=function(d){tt(this.g,new Pu)},kr.prototype.ra=function(){tt(this.g,"b")},Ji.prototype.createWebChannel=Ji.prototype.g,En.prototype.send=En.prototype.o,En.prototype.open=En.prototype.m,En.prototype.close=En.prototype.close,xx=function(){return new Ji},Ex=function(){return Ua()},bx=Nr,Xp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},qa.NO_ERROR=0,qa.TIMEOUT=8,qa.HTTP_ERROR=6,Qd=qa,ta.COMPLETE="complete",_x=ta,fl.EventType=Jr,Jr.OPEN="a",Jr.CLOSE="b",Jr.ERROR="c",Jr.MESSAGE="d",wt.prototype.listen=wt.prototype.K,Tc=fl,Je.prototype.listenOnce=Je.prototype.L,Je.prototype.getLastError=Je.prototype.Ka,Je.prototype.getLastErrorCode=Je.prototype.Ba,Je.prototype.getStatus=Je.prototype.Z,Je.prototype.getResponseJson=Je.prototype.Oa,Je.prototype.getResponseText=Je.prototype.oa,Je.prototype.send=Je.prototype.ea,Je.prototype.setWithCredentials=Je.prototype.Ha,vx=Je}).apply(typeof Ld<"u"?Ld:typeof self<"u"?self:typeof window<"u"?window:{});const Pb="@firebase/firestore",Mb="4.7.14";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}pn.UNAUTHENTICATED=new pn(null),pn.GOOGLE_CREDENTIALS=new pn("google-credentials-uid"),pn.FIRST_PARTY=new pn("first-party-uid"),pn.MOCK_USER=new pn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nl="11.7.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ri=new Ig("@firebase/firestore");function Io(){return Ri.logLevel}function me(n,...e){if(Ri.logLevel<=He.DEBUG){const t=e.map(qg);Ri.debug(`Firestore (${nl}): ${n}`,...t)}}function Da(n,...e){if(Ri.logLevel<=He.ERROR){const t=e.map(qg);Ri.error(`Firestore (${nl}): ${n}`,...t)}}function Fo(n,...e){if(Ri.logLevel<=He.WARN){const t=e.map(qg);Ri.warn(`Firestore (${nl}): ${n}`,...t)}}function qg(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ce(n,e,t){let a="Unexpected state";typeof e=="string"?a=e:t=e,Tx(n,a,t)}function Tx(n,e,t){let a=`FIRESTORE (${nl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{a+=" CONTEXT: "+JSON.stringify(t)}catch{a+=" CONTEXT: "+t}throw Da(a),new Error(a)}function et(n,e,t,a){let i="Unexpected state";typeof t=="string"?i=t:a=t,n||Tx(e,i,a)}function De(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ne={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class fe extends Ma{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class t4{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(pn.UNAUTHENTICATED))}shutdown(){}}class n4{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class r4{constructor(e){this.t=e,this.currentUser=pn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){et(this.o===void 0,42304);let a=this.i;const i=p=>this.i!==a?(a=this.i,t(p)):Promise.resolve();let l=new Ca;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Ca,e.enqueueRetryable(()=>i(this.currentUser))};const u=()=>{const p=l;e.enqueueRetryable(async()=>{await p.promise,await i(this.currentUser)})},m=p=>{me("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit(p=>m(p)),setTimeout(()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?m(p):(me("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Ca)}},0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(a=>this.i!==e?(me("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(et(typeof a.accessToken=="string",31837,{l:a}),new wx(a.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return et(e===null||typeof e=="string",2055,{h:e}),new pn(e)}}class a4{constructor(e,t,a){this.P=e,this.T=t,this.I=a,this.type="FirstParty",this.user=pn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class s4{constructor(e,t,a){this.P=e,this.T=t,this.I=a}getToken(){return Promise.resolve(new a4(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(pn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class kb{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class i4{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,lr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){et(this.o===void 0,3512);const a=l=>{l.error!=null&&me("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const u=l.token!==this.m;return this.m=l.token,me("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>a(l))};const i=l=>{me("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(l=>i(l)),setTimeout(()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?i(l):me("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new kb(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(et(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new kb(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o4(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let a=0;a<n;a++)t[a]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ax(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sx{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let a="";for(;a.length<20;){const i=o4(40);for(let l=0;l<i.length;++l)a.length<20&&i[l]<t&&(a+=e.charAt(i[l]%62))}return a}}function Ve(n,e){return n<e?-1:n>e?1:0}function Zp(n,e){let t=0;for(;t<n.length&&t<e.length;){const a=n.codePointAt(t),i=e.codePointAt(t);if(a!==i){if(a<128&&i<128)return Ve(a,i);{const l=Ax(),u=l4(l.encode(Lb(n,t)),l.encode(Lb(e,t)));return u!==0?u:Ve(a,i)}}t+=a>65535?2:1}return Ve(n.length,e.length)}function Lb(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function l4(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return Ve(n[t],e[t]);return Ve(n.length,e.length)}function Ho(n,e,t){return n.length===e.length&&n.every((a,i)=>t(a,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vb=-62135596800,Ub=1e6;class qt{static now(){return qt.fromMillis(Date.now())}static fromDate(e){return qt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),a=Math.floor((e-1e3*t)*Ub);return new qt(t,a)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new fe(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new fe(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Vb)throw new fe(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new fe(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ub}_compareTo(e){return this.seconds===e.seconds?Ve(this.nanoseconds,e.nanoseconds):Ve(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-Vb;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{static fromTimestamp(e){return new Oe(e)}static min(){return new Oe(new qt(0,0))}static max(){return new Oe(new qt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zb="__name__";class Hr{constructor(e,t,a){t===void 0?t=0:t>e.length&&Ce(637,{offset:t,range:e.length}),a===void 0?a=e.length-t:a>e.length-t&&Ce(1746,{length:a,range:e.length-t}),this.segments=e,this.offset=t,this.len=a}get length(){return this.len}isEqual(e){return Hr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Hr?e.forEach(a=>{t.push(a)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,a=this.limit();t<a;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const a=Math.min(e.length,t.length);for(let i=0;i<a;i++){const l=Hr.compareSegments(e.get(i),t.get(i));if(l!==0)return l}return Ve(e.length,t.length)}static compareSegments(e,t){const a=Hr.isNumericId(e),i=Hr.isNumericId(t);return a&&!i?-1:!a&&i?1:a&&i?Hr.extractNumericId(e).compare(Hr.extractNumericId(t)):Zp(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ts.fromString(e.substring(4,e.length-2))}}class mt extends Hr{construct(e,t,a){return new mt(e,t,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const a of e){if(a.indexOf("//")>=0)throw new fe(ne.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);t.push(...a.split("/").filter(i=>i.length>0))}return new mt(t)}static emptyPath(){return new mt([])}}const c4=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ln extends Hr{construct(e,t,a){return new ln(e,t,a)}static isValidIdentifier(e){return c4.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ln.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===zb}static keyField(){return new ln([zb])}static fromServerFormat(e){const t=[];let a="",i=0;const l=()=>{if(a.length===0)throw new fe(ne.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(a),a=""};let u=!1;for(;i<e.length;){const m=e[i];if(m==="\\"){if(i+1===e.length)throw new fe(ne.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[i+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new fe(ne.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);a+=p,i+=2}else m==="`"?(u=!u,i++):m!=="."||u?(a+=m,i++):(l(),i++)}if(l(),u)throw new fe(ne.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ln(t)}static emptyPath(){return new ln([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{constructor(e){this.path=e}static fromPath(e){return new xe(mt.fromString(e))}static fromName(e){return new xe(mt.fromString(e).popFirst(5))}static empty(){return new xe(mt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&mt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return mt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new xe(new mt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kc=-1;function u4(n,e){const t=n.toTimestamp().seconds,a=n.toTimestamp().nanoseconds+1,i=Oe.fromTimestamp(a===1e9?new qt(t+1,0):new qt(t,a));return new Ss(i,xe.empty(),e)}function d4(n){return new Ss(n.readTime,n.key,kc)}class Ss{constructor(e,t,a){this.readTime=e,this.documentKey=t,this.largestBatchId=a}static min(){return new Ss(Oe.min(),xe.empty(),kc)}static max(){return new Ss(Oe.max(),xe.empty(),kc)}}function h4(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=xe.comparator(n.documentKey,e.documentKey),t!==0?t:Ve(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f4="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class m4{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rl(n){if(n.code!==ne.FAILED_PRECONDITION||n.message!==f4)throw n;me("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ce(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ae((a,i)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(a,i)},this.catchCallback=l=>{this.wrapFailure(t,l).next(a,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ae?t:ae.resolve(t)}catch(t){return ae.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ae.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ae.reject(t)}static resolve(e){return new ae((t,a)=>{t(e)})}static reject(e){return new ae((t,a)=>{a(e)})}static waitFor(e){return new ae((t,a)=>{let i=0,l=0,u=!1;e.forEach(m=>{++i,m.next(()=>{++l,u&&l===i&&t()},p=>a(p))}),u=!0,l===i&&t()})}static or(e){let t=ae.resolve(!1);for(const a of e)t=t.next(i=>i?ae.resolve(i):a());return t}static forEach(e,t){const a=[];return e.forEach((i,l)=>{a.push(t.call(this,i,l))}),this.waitFor(a)}static mapArray(e,t){return new ae((a,i)=>{const l=e.length,u=new Array(l);let m=0;for(let p=0;p<l;p++){const y=p;t(e[y]).next(v=>{u[y]=v,++m,m===l&&a(u)},v=>i(v))}})}static doWhile(e,t){return new ae((a,i)=>{const l=()=>{e()===!0?t().next(()=>{l()},i):a()};l()})}}function p4(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function al(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zh{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=a=>this.ue(a),this.ce=a=>t.writeSequenceNumber(a))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}zh.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fg=-1;function Bh(n){return n==null}function ph(n){return n===0&&1/n==-1/0}function g4(n){return typeof n=="number"&&Number.isInteger(n)&&!ph(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nx="";function y4(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Bb(e)),e=v4(n.get(t),e);return Bb(e)}function v4(n,e){let t=e;const a=n.length;for(let i=0;i<a;i++){const l=n.charAt(i);switch(l){case"\0":t+="";break;case Nx:t+="";break;default:t+=l}}return t}function Bb(n){return n+Nx+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qb(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ms(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Cx(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e,t){this.comparator=e,this.root=t||on.EMPTY}insert(e,t){return new Et(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,on.BLACK,null,null))}remove(e){return new Et(this.comparator,this.root.remove(e,this.comparator).copy(null,null,on.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const a=this.comparator(e,t.key);if(a===0)return t.value;a<0?t=t.left:a>0&&(t=t.right)}return null}indexOf(e){let t=0,a=this.root;for(;!a.isEmpty();){const i=this.comparator(e,a.key);if(i===0)return t+a.left.size;i<0?a=a.left:(t+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,a)=>(e(t,a),!1))}toString(){const e=[];return this.inorderTraversal((t,a)=>(e.push(`${t}:${a}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Vd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Vd(this.root,e,this.comparator,!1)}getReverseIterator(){return new Vd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Vd(this.root,e,this.comparator,!0)}}class Vd{constructor(e,t,a,i){this.isReverse=i,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?a(e.key,t):1,t&&i&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class on{constructor(e,t,a,i,l){this.key=e,this.value=t,this.color=a??on.RED,this.left=i??on.EMPTY,this.right=l??on.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,a,i,l){return new on(e??this.key,t??this.value,a??this.color,i??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,a){let i=this;const l=a(e,i.key);return i=l<0?i.copy(null,null,null,i.left.insert(e,t,a),null):l===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,a)),i.fixUp()}removeMin(){if(this.left.isEmpty())return on.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let a,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return on.EMPTY;a=i.right.min(),i=i.copy(a.key,a.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,on.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,on.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ce(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ce(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ce(27949);return e+(this.isRed()?0:1)}}on.EMPTY=null,on.RED=!0,on.BLACK=!1;on.EMPTY=new class{constructor(){this.size=0}get key(){throw Ce(57766)}get value(){throw Ce(16141)}get color(){throw Ce(16727)}get left(){throw Ce(29726)}get right(){throw Ce(36894)}copy(e,t,a,i,l){return this}insert(e,t,a){return new on(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e){this.comparator=e,this.data=new Et(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,a)=>(e(t),!1))}forEachInRange(e,t){const a=this.data.getIteratorFrom(e[0]);for(;a.hasNext();){const i=a.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let a;for(a=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();a.hasNext();)if(!e(a.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Fb(this.data.getIterator())}getIteratorFrom(e){return new Fb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(a=>{t=t.add(a)}),t}isEqual(e){if(!(e instanceof Ft)||this.size!==e.size)return!1;const t=this.data.getIterator(),a=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,l=a.getNext().key;if(this.comparator(i,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Ft(this.comparator);return t.data=e,t}}class Fb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(e){this.fields=e,e.sort(ln.comparator)}static empty(){return new Gn([])}unionWith(e){let t=new Ft(ln.comparator);for(const a of this.fields)t=t.add(a);for(const a of e)t=t.add(a);return new Gn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ho(this.fields,e.fields,(t,a)=>t.isEqual(a))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rx extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new Rx("Invalid base64 string: "+l):l}}(e);return new cn(t)}static fromUint8Array(e){const t=function(i){let l="";for(let u=0;u<i.length;++u)l+=String.fromCharCode(i[u]);return l}(e);return new cn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const a=new Uint8Array(t.length);for(let i=0;i<t.length;i++)a[i]=t.charCodeAt(i);return a}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ve(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}cn.EMPTY_BYTE_STRING=new cn("");const _4=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ns(n){if(et(!!n,39018),typeof n=="string"){let e=0;const t=_4.exec(n);if(et(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const a=new Date(n);return{seconds:Math.floor(a.getTime()/1e3),nanos:e}}return{seconds:It(n.seconds),nanos:It(n.nanos)}}function It(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Cs(n){return typeof n=="string"?cn.fromBase64String(n):cn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ix="server_timestamp",Ox="__type__",Dx="__previous_value__",jx="__local_write_time__";function Hg(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[Ox])===null||t===void 0?void 0:t.stringValue)===Ix}function qh(n){const e=n.mapValue.fields[Dx];return Hg(e)?qh(e):e}function Lc(n){const e=Ns(n.mapValue.fields[jx].timestampValue);return new qt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b4{constructor(e,t,a,i,l,u,m,p,y,v){this.databaseId=e,this.appId=t,this.persistenceKey=a,this.host=i,this.ssl=l,this.forceLongPolling=u,this.autoDetectLongPolling=m,this.longPollingOptions=p,this.useFetchStreams=y,this.isUsingEmulator=v}}const gh="(default)";class Vc{constructor(e,t){this.projectId=e,this.database=t||gh}static empty(){return new Vc("","")}get isDefaultDatabase(){return this.database===gh}isEqual(e){return e instanceof Vc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Px="__type__",E4="__max__",Ud={mapValue:{}},Mx="__vector__",yh="value";function Rs(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Hg(n)?4:T4(n)?9007199254740991:x4(n)?10:11:Ce(28295,{value:n})}function Xr(n,e){if(n===e)return!0;const t=Rs(n);if(t!==Rs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Lc(n).isEqual(Lc(e));case 3:return function(i,l){if(typeof i.timestampValue=="string"&&typeof l.timestampValue=="string"&&i.timestampValue.length===l.timestampValue.length)return i.timestampValue===l.timestampValue;const u=Ns(i.timestampValue),m=Ns(l.timestampValue);return u.seconds===m.seconds&&u.nanos===m.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,l){return Cs(i.bytesValue).isEqual(Cs(l.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,l){return It(i.geoPointValue.latitude)===It(l.geoPointValue.latitude)&&It(i.geoPointValue.longitude)===It(l.geoPointValue.longitude)}(n,e);case 2:return function(i,l){if("integerValue"in i&&"integerValue"in l)return It(i.integerValue)===It(l.integerValue);if("doubleValue"in i&&"doubleValue"in l){const u=It(i.doubleValue),m=It(l.doubleValue);return u===m?ph(u)===ph(m):isNaN(u)&&isNaN(m)}return!1}(n,e);case 9:return Ho(n.arrayValue.values||[],e.arrayValue.values||[],Xr);case 10:case 11:return function(i,l){const u=i.mapValue.fields||{},m=l.mapValue.fields||{};if(qb(u)!==qb(m))return!1;for(const p in u)if(u.hasOwnProperty(p)&&(m[p]===void 0||!Xr(u[p],m[p])))return!1;return!0}(n,e);default:return Ce(52216,{left:n})}}function Uc(n,e){return(n.values||[]).find(t=>Xr(t,e))!==void 0}function $o(n,e){if(n===e)return 0;const t=Rs(n),a=Rs(e);if(t!==a)return Ve(t,a);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ve(n.booleanValue,e.booleanValue);case 2:return function(l,u){const m=It(l.integerValue||l.doubleValue),p=It(u.integerValue||u.doubleValue);return m<p?-1:m>p?1:m===p?0:isNaN(m)?isNaN(p)?0:-1:1}(n,e);case 3:return Hb(n.timestampValue,e.timestampValue);case 4:return Hb(Lc(n),Lc(e));case 5:return Zp(n.stringValue,e.stringValue);case 6:return function(l,u){const m=Cs(l),p=Cs(u);return m.compareTo(p)}(n.bytesValue,e.bytesValue);case 7:return function(l,u){const m=l.split("/"),p=u.split("/");for(let y=0;y<m.length&&y<p.length;y++){const v=Ve(m[y],p[y]);if(v!==0)return v}return Ve(m.length,p.length)}(n.referenceValue,e.referenceValue);case 8:return function(l,u){const m=Ve(It(l.latitude),It(u.latitude));return m!==0?m:Ve(It(l.longitude),It(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return $b(n.arrayValue,e.arrayValue);case 10:return function(l,u){var m,p,y,v;const b=l.fields||{},T=u.fields||{},C=(m=b[yh])===null||m===void 0?void 0:m.arrayValue,A=(p=T[yh])===null||p===void 0?void 0:p.arrayValue,M=Ve(((y=C==null?void 0:C.values)===null||y===void 0?void 0:y.length)||0,((v=A==null?void 0:A.values)===null||v===void 0?void 0:v.length)||0);return M!==0?M:$b(C,A)}(n.mapValue,e.mapValue);case 11:return function(l,u){if(l===Ud.mapValue&&u===Ud.mapValue)return 0;if(l===Ud.mapValue)return 1;if(u===Ud.mapValue)return-1;const m=l.fields||{},p=Object.keys(m),y=u.fields||{},v=Object.keys(y);p.sort(),v.sort();for(let b=0;b<p.length&&b<v.length;++b){const T=Zp(p[b],v[b]);if(T!==0)return T;const C=$o(m[p[b]],y[v[b]]);if(C!==0)return C}return Ve(p.length,v.length)}(n.mapValue,e.mapValue);default:throw Ce(23264,{Pe:t})}}function Hb(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ve(n,e);const t=Ns(n),a=Ns(e),i=Ve(t.seconds,a.seconds);return i!==0?i:Ve(t.nanos,a.nanos)}function $b(n,e){const t=n.values||[],a=e.values||[];for(let i=0;i<t.length&&i<a.length;++i){const l=$o(t[i],a[i]);if(l)return l}return Ve(t.length,a.length)}function Go(n){return Jp(n)}function Jp(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const a=Ns(t);return`time(${a.seconds},${a.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Cs(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return xe.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let a="[",i=!0;for(const l of t.values||[])i?i=!1:a+=",",a+=Jp(l);return a+"]"}(n.arrayValue):"mapValue"in n?function(t){const a=Object.keys(t.fields||{}).sort();let i="{",l=!0;for(const u of a)l?l=!1:i+=",",i+=`${u}:${Jp(t.fields[u])}`;return i+"}"}(n.mapValue):Ce(61005,{value:n})}function Wd(n){switch(Rs(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=qh(n);return e?16+Wd(e):16;case 5:return 2*n.stringValue.length;case 6:return Cs(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(a){return(a.values||[]).reduce((i,l)=>i+Wd(l),0)}(n.arrayValue);case 10:case 11:return function(a){let i=0;return Ms(a.fields,(l,u)=>{i+=l.length+Wd(u)}),i}(n.mapValue);default:throw Ce(13486,{value:n})}}function Gb(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function eg(n){return!!n&&"integerValue"in n}function $g(n){return!!n&&"arrayValue"in n}function Yb(n){return!!n&&"nullValue"in n}function Kb(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Xd(n){return!!n&&"mapValue"in n}function x4(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[Px])===null||t===void 0?void 0:t.stringValue)===Mx}function Rc(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Ms(n.mapValue.fields,(t,a)=>e.mapValue.fields[t]=Rc(a)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Rc(n.arrayValue.values[t]);return e}return Object.assign({},n)}function T4(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===E4}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e){this.value=e}static empty(){return new Dn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let a=0;a<e.length-1;++a)if(t=(t.mapValue.fields||{})[e.get(a)],!Xd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Rc(t)}setAll(e){let t=ln.emptyPath(),a={},i=[];e.forEach((u,m)=>{if(!t.isImmediateParentOf(m)){const p=this.getFieldsMap(t);this.applyChanges(p,a,i),a={},i=[],t=m.popLast()}u?a[m.lastSegment()]=Rc(u):i.push(m.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,a,i)}delete(e){const t=this.field(e.popLast());Xd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Xr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let a=0;a<e.length;++a){let i=t.mapValue.fields[e.get(a)];Xd(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(a)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,a){Ms(t,(i,l)=>e[i]=l);for(const i of a)delete e[i]}clone(){return new Dn(Rc(this.value))}}function kx(n){const e=[];return Ms(n.fields,(t,a)=>{const i=new ln([t]);if(Xd(a)){const l=kx(a.mapValue).fields;if(l.length===0)e.push(i);else for(const u of l)e.push(i.child(u))}else e.push(i)}),new Gn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e,t,a,i,l,u,m){this.key=e,this.documentType=t,this.version=a,this.readTime=i,this.createTime=l,this.data=u,this.documentState=m}static newInvalidDocument(e){return new gn(e,0,Oe.min(),Oe.min(),Oe.min(),Dn.empty(),0)}static newFoundDocument(e,t,a,i){return new gn(e,1,t,Oe.min(),a,i,0)}static newNoDocument(e,t){return new gn(e,2,t,Oe.min(),Oe.min(),Dn.empty(),0)}static newUnknownDocument(e,t){return new gn(e,3,t,Oe.min(),Oe.min(),Dn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Oe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Dn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Dn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Oe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof gn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new gn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vh{constructor(e,t){this.position=e,this.inclusive=t}}function Qb(n,e,t){let a=0;for(let i=0;i<n.position.length;i++){const l=e[i],u=n.position[i];if(l.field.isKeyField()?a=xe.comparator(xe.fromName(u.referenceValue),t.key):a=$o(u,t.data.field(l.field)),l.dir==="desc"&&(a*=-1),a!==0)break}return a}function Wb(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Xr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc{constructor(e,t="asc"){this.field=e,this.dir=t}}function w4(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lx{}class kt extends Lx{constructor(e,t,a){super(),this.field=e,this.op=t,this.value=a}static create(e,t,a){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,a):new S4(e,t,a):t==="array-contains"?new R4(e,a):t==="in"?new I4(e,a):t==="not-in"?new O4(e,a):t==="array-contains-any"?new D4(e,a):new kt(e,t,a)}static createKeyFieldInFilter(e,t,a){return t==="in"?new N4(e,a):new C4(e,a)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison($o(t,this.value)):t!==null&&Rs(this.value)===Rs(t)&&this.matchesComparison($o(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ce(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Er extends Lx{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new Er(e,t)}matches(e){return Vx(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function Vx(n){return n.op==="and"}function Ux(n){return A4(n)&&Vx(n)}function A4(n){for(const e of n.filters)if(e instanceof Er)return!1;return!0}function tg(n){if(n instanceof kt)return n.field.canonicalString()+n.op.toString()+Go(n.value);if(Ux(n))return n.filters.map(e=>tg(e)).join(",");{const e=n.filters.map(t=>tg(t)).join(",");return`${n.op}(${e})`}}function zx(n,e){return n instanceof kt?function(a,i){return i instanceof kt&&a.op===i.op&&a.field.isEqual(i.field)&&Xr(a.value,i.value)}(n,e):n instanceof Er?function(a,i){return i instanceof Er&&a.op===i.op&&a.filters.length===i.filters.length?a.filters.reduce((l,u,m)=>l&&zx(u,i.filters[m]),!0):!1}(n,e):void Ce(19439)}function Bx(n){return n instanceof kt?function(t){return`${t.field.canonicalString()} ${t.op} ${Go(t.value)}`}(n):n instanceof Er?function(t){return t.op.toString()+" {"+t.getFilters().map(Bx).join(" ,")+"}"}(n):"Filter"}class S4 extends kt{constructor(e,t,a){super(e,t,a),this.key=xe.fromName(a.referenceValue)}matches(e){const t=xe.comparator(e.key,this.key);return this.matchesComparison(t)}}class N4 extends kt{constructor(e,t){super(e,"in",t),this.keys=qx("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class C4 extends kt{constructor(e,t){super(e,"not-in",t),this.keys=qx("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function qx(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(a=>xe.fromName(a.referenceValue))}class R4 extends kt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return $g(t)&&Uc(t.arrayValue,this.value)}}class I4 extends kt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Uc(this.value.arrayValue,t)}}class O4 extends kt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Uc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Uc(this.value.arrayValue,t)}}class D4 extends kt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!$g(t)||!t.arrayValue.values)&&t.arrayValue.values.some(a=>Uc(this.value.arrayValue,a))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j4{constructor(e,t=null,a=[],i=[],l=null,u=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=a,this.filters=i,this.limit=l,this.startAt=u,this.endAt=m,this.Ie=null}}function Xb(n,e=null,t=[],a=[],i=null,l=null,u=null){return new j4(n,e,t,a,i,l,u)}function Gg(n){const e=De(n);if(e.Ie===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(a=>tg(a)).join(","),t+="|ob:",t+=e.orderBy.map(a=>function(l){return l.field.canonicalString()+l.dir}(a)).join(","),Bh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(a=>Go(a)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(a=>Go(a)).join(",")),e.Ie=t}return e.Ie}function Yg(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!w4(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!zx(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Wb(n.startAt,e.startAt)&&Wb(n.endAt,e.endAt)}function ng(n){return xe.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sl{constructor(e,t=null,a=[],i=[],l=null,u="F",m=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=a,this.filters=i,this.limit=l,this.limitType=u,this.startAt=m,this.endAt=p,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function P4(n,e,t,a,i,l,u,m){return new sl(n,e,t,a,i,l,u,m)}function Kg(n){return new sl(n)}function Zb(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Fx(n){return n.collectionGroup!==null}function Ic(n){const e=De(n);if(e.Ee===null){e.Ee=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ee.push(l),t.add(l.field.canonicalString());const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let m=new Ft(ln.comparator);return u.filters.forEach(p=>{p.getFlattenedFilters().forEach(y=>{y.isInequality()&&(m=m.add(y.field))})}),m})(e).forEach(l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ee.push(new zc(l,a))}),t.has(ln.keyField().canonicalString())||e.Ee.push(new zc(ln.keyField(),a))}return e.Ee}function Qr(n){const e=De(n);return e.de||(e.de=M4(e,Ic(n))),e.de}function M4(n,e){if(n.limitType==="F")return Xb(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{const l=i.dir==="desc"?"asc":"desc";return new zc(i.field,l)});const t=n.endAt?new vh(n.endAt.position,n.endAt.inclusive):null,a=n.startAt?new vh(n.startAt.position,n.startAt.inclusive):null;return Xb(n.path,n.collectionGroup,e,n.filters,n.limit,t,a)}}function rg(n,e){const t=n.filters.concat([e]);return new sl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function _h(n,e,t){return new sl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Fh(n,e){return Yg(Qr(n),Qr(e))&&n.limitType===e.limitType}function Hx(n){return`${Gg(Qr(n))}|lt:${n.limitType}`}function Oo(n){return`Query(target=${function(t){let a=t.path.canonicalString();return t.collectionGroup!==null&&(a+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(a+=`, filters: [${t.filters.map(i=>Bx(i)).join(", ")}]`),Bh(t.limit)||(a+=", limit: "+t.limit),t.orderBy.length>0&&(a+=`, orderBy: [${t.orderBy.map(i=>function(u){return`${u.field.canonicalString()} (${u.dir})`}(i)).join(", ")}]`),t.startAt&&(a+=", startAt: ",a+=t.startAt.inclusive?"b:":"a:",a+=t.startAt.position.map(i=>Go(i)).join(",")),t.endAt&&(a+=", endAt: ",a+=t.endAt.inclusive?"a:":"b:",a+=t.endAt.position.map(i=>Go(i)).join(",")),`Target(${a})`}(Qr(n))}; limitType=${n.limitType})`}function Hh(n,e){return e.isFoundDocument()&&function(a,i){const l=i.key.path;return a.collectionGroup!==null?i.key.hasCollectionId(a.collectionGroup)&&a.path.isPrefixOf(l):xe.isDocumentKey(a.path)?a.path.isEqual(l):a.path.isImmediateParentOf(l)}(n,e)&&function(a,i){for(const l of Ic(a))if(!l.field.isKeyField()&&i.data.field(l.field)===null)return!1;return!0}(n,e)&&function(a,i){for(const l of a.filters)if(!l.matches(i))return!1;return!0}(n,e)&&function(a,i){return!(a.startAt&&!function(u,m,p){const y=Qb(u,m,p);return u.inclusive?y<=0:y<0}(a.startAt,Ic(a),i)||a.endAt&&!function(u,m,p){const y=Qb(u,m,p);return u.inclusive?y>=0:y>0}(a.endAt,Ic(a),i))}(n,e)}function k4(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function $x(n){return(e,t)=>{let a=!1;for(const i of Ic(n)){const l=L4(i,e,t);if(l!==0)return l;a=a||i.field.isKeyField()}return 0}}function L4(n,e,t){const a=n.field.isKeyField()?xe.comparator(e.key,t.key):function(l,u,m){const p=u.data.field(l),y=m.data.field(l);return p!==null&&y!==null?$o(p,y):Ce(42886)}(n.field,e,t);switch(n.dir){case"asc":return a;case"desc":return-1*a;default:return Ce(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),a=this.inner[t];if(a!==void 0){for(const[i,l]of a)if(this.equalsFn(i,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const a=this.mapKeyFn(e),i=this.inner[a];if(i===void 0)return this.inner[a]=[[e,t]],void this.innerSize++;for(let l=0;l<i.length;l++)if(this.equalsFn(i[l][0],e))return void(i[l]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),a=this.inner[t];if(a===void 0)return!1;for(let i=0;i<a.length;i++)if(this.equalsFn(a[i][0],e))return a.length===1?delete this.inner[t]:a.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ms(this.inner,(t,a)=>{for(const[i,l]of a)e(i,l)})}isEmpty(){return Cx(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V4=new Et(xe.comparator);function ja(){return V4}const Gx=new Et(xe.comparator);function wc(...n){let e=Gx;for(const t of n)e=e.insert(t.key,t);return e}function Yx(n){let e=Gx;return n.forEach((t,a)=>e=e.insert(t,a.overlayedDocument)),e}function Ei(){return Oc()}function Kx(){return Oc()}function Oc(){return new Pi(n=>n.toString(),(n,e)=>n.isEqual(e))}const U4=new Et(xe.comparator),z4=new Ft(xe.comparator);function $e(...n){let e=z4;for(const t of n)e=e.add(t);return e}const B4=new Ft(Ve);function q4(){return B4}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qg(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ph(e)?"-0":e}}function Qx(n){return{integerValue:""+n}}function F4(n,e){return g4(e)?Qx(e):Qg(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h{constructor(){this._=void 0}}function H4(n,e,t){return n instanceof Bc?function(i,l){const u={fields:{[Ox]:{stringValue:Ix},[jx]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return l&&Hg(l)&&(l=qh(l)),l&&(u.fields[Dx]=l),{mapValue:u}}(t,e):n instanceof qc?Xx(n,e):n instanceof Fc?Zx(n,e):function(i,l){const u=Wx(i,l),m=Jb(u)+Jb(i.Re);return eg(u)&&eg(i.Re)?Qx(m):Qg(i.serializer,m)}(n,e)}function $4(n,e,t){return n instanceof qc?Xx(n,e):n instanceof Fc?Zx(n,e):t}function Wx(n,e){return n instanceof bh?function(a){return eg(a)||function(l){return!!l&&"doubleValue"in l}(a)}(e)?e:{integerValue:0}:null}class Bc extends $h{}class qc extends $h{constructor(e){super(),this.elements=e}}function Xx(n,e){const t=Jx(e);for(const a of n.elements)t.some(i=>Xr(i,a))||t.push(a);return{arrayValue:{values:t}}}class Fc extends $h{constructor(e){super(),this.elements=e}}function Zx(n,e){let t=Jx(e);for(const a of n.elements)t=t.filter(i=>!Xr(i,a));return{arrayValue:{values:t}}}class bh extends $h{constructor(e,t){super(),this.serializer=e,this.Re=t}}function Jb(n){return It(n.integerValue||n.doubleValue)}function Jx(n){return $g(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G4{constructor(e,t){this.field=e,this.transform=t}}function Y4(n,e){return n.field.isEqual(e.field)&&function(a,i){return a instanceof qc&&i instanceof qc||a instanceof Fc&&i instanceof Fc?Ho(a.elements,i.elements,Xr):a instanceof bh&&i instanceof bh?Xr(a.Re,i.Re):a instanceof Bc&&i instanceof Bc}(n.transform,e.transform)}class K4{constructor(e,t){this.version=e,this.transformResults=t}}class cr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new cr}static exists(e){return new cr(void 0,e)}static updateTime(e){return new cr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Zd(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Gh{}function eT(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Wg(n.key,cr.none()):new nu(n.key,n.data,cr.none());{const t=n.data,a=Dn.empty();let i=new Ft(ln.comparator);for(let l of e.fields)if(!i.has(l)){let u=t.field(l);u===null&&l.length>1&&(l=l.popLast(),u=t.field(l)),u===null?a.delete(l):a.set(l,u),i=i.add(l)}return new ks(n.key,a,new Gn(i.toArray()),cr.none())}}function Q4(n,e,t){n instanceof nu?function(i,l,u){const m=i.value.clone(),p=tE(i.fieldTransforms,l,u.transformResults);m.setAll(p),l.convertToFoundDocument(u.version,m).setHasCommittedMutations()}(n,e,t):n instanceof ks?function(i,l,u){if(!Zd(i.precondition,l))return void l.convertToUnknownDocument(u.version);const m=tE(i.fieldTransforms,l,u.transformResults),p=l.data;p.setAll(tT(i)),p.setAll(m),l.convertToFoundDocument(u.version,p).setHasCommittedMutations()}(n,e,t):function(i,l,u){l.convertToNoDocument(u.version).setHasCommittedMutations()}(0,e,t)}function Dc(n,e,t,a){return n instanceof nu?function(l,u,m,p){if(!Zd(l.precondition,u))return m;const y=l.value.clone(),v=nE(l.fieldTransforms,p,u);return y.setAll(v),u.convertToFoundDocument(u.version,y).setHasLocalMutations(),null}(n,e,t,a):n instanceof ks?function(l,u,m,p){if(!Zd(l.precondition,u))return m;const y=nE(l.fieldTransforms,p,u),v=u.data;return v.setAll(tT(l)),v.setAll(y),u.convertToFoundDocument(u.version,v).setHasLocalMutations(),m===null?null:m.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(b=>b.field))}(n,e,t,a):function(l,u,m){return Zd(l.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):m}(n,e,t)}function W4(n,e){let t=null;for(const a of n.fieldTransforms){const i=e.data.field(a.field),l=Wx(a.transform,i||null);l!=null&&(t===null&&(t=Dn.empty()),t.set(a.field,l))}return t||null}function eE(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(a,i){return a===void 0&&i===void 0||!(!a||!i)&&Ho(a,i,(l,u)=>Y4(l,u))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class nu extends Gh{constructor(e,t,a,i=[]){super(),this.key=e,this.value=t,this.precondition=a,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ks extends Gh{constructor(e,t,a,i,l=[]){super(),this.key=e,this.data=t,this.fieldMask=a,this.precondition=i,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function tT(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const a=n.data.field(t);e.set(t,a)}}),e}function tE(n,e,t){const a=new Map;et(n.length===t.length,32656,{Ve:t.length,me:n.length});for(let i=0;i<t.length;i++){const l=n[i],u=l.transform,m=e.data.field(l.field);a.set(l.field,$4(u,m,t[i]))}return a}function nE(n,e,t){const a=new Map;for(const i of n){const l=i.transform,u=t.data.field(i.field);a.set(i.field,H4(l,u,e))}return a}class Wg extends Gh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class X4 extends Gh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z4{constructor(e,t,a,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=a,this.mutations=i}applyToRemoteDocument(e,t){const a=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const l=this.mutations[i];l.key.isEqual(e.key)&&Q4(l,e,a[i])}}applyToLocalView(e,t){for(const a of this.baseMutations)a.key.isEqual(e.key)&&(t=Dc(a,e,t,this.localWriteTime));for(const a of this.mutations)a.key.isEqual(e.key)&&(t=Dc(a,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const a=Kx();return this.mutations.forEach(i=>{const l=e.get(i.key),u=l.overlayedDocument;let m=this.applyToLocalView(u,l.mutatedFields);m=t.has(i.key)?null:m;const p=eT(u,m);p!==null&&a.set(i.key,p),u.isValidDocument()||u.convertToNoDocument(Oe.min())}),a}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),$e())}isEqual(e){return this.batchId===e.batchId&&Ho(this.mutations,e.mutations,(t,a)=>eE(t,a))&&Ho(this.baseMutations,e.baseMutations,(t,a)=>eE(t,a))}}class Xg{constructor(e,t,a,i){this.batch=e,this.commitVersion=t,this.mutationResults=a,this.docVersions=i}static from(e,t,a){et(e.mutations.length===a.length,58842,{fe:e.mutations.length,ge:a.length});let i=function(){return U4}();const l=e.mutations;for(let u=0;u<l.length;u++)i=i.insert(l[u].key,a[u].version);return new Xg(e,t,a,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J4{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eO{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mt,Qe;function tO(n){switch(n){case ne.OK:return Ce(64938);case ne.CANCELLED:case ne.UNKNOWN:case ne.DEADLINE_EXCEEDED:case ne.RESOURCE_EXHAUSTED:case ne.INTERNAL:case ne.UNAVAILABLE:case ne.UNAUTHENTICATED:return!1;case ne.INVALID_ARGUMENT:case ne.NOT_FOUND:case ne.ALREADY_EXISTS:case ne.PERMISSION_DENIED:case ne.FAILED_PRECONDITION:case ne.ABORTED:case ne.OUT_OF_RANGE:case ne.UNIMPLEMENTED:case ne.DATA_LOSS:return!0;default:return Ce(15467,{code:n})}}function nT(n){if(n===void 0)return Da("GRPC error has no .code"),ne.UNKNOWN;switch(n){case Mt.OK:return ne.OK;case Mt.CANCELLED:return ne.CANCELLED;case Mt.UNKNOWN:return ne.UNKNOWN;case Mt.DEADLINE_EXCEEDED:return ne.DEADLINE_EXCEEDED;case Mt.RESOURCE_EXHAUSTED:return ne.RESOURCE_EXHAUSTED;case Mt.INTERNAL:return ne.INTERNAL;case Mt.UNAVAILABLE:return ne.UNAVAILABLE;case Mt.UNAUTHENTICATED:return ne.UNAUTHENTICATED;case Mt.INVALID_ARGUMENT:return ne.INVALID_ARGUMENT;case Mt.NOT_FOUND:return ne.NOT_FOUND;case Mt.ALREADY_EXISTS:return ne.ALREADY_EXISTS;case Mt.PERMISSION_DENIED:return ne.PERMISSION_DENIED;case Mt.FAILED_PRECONDITION:return ne.FAILED_PRECONDITION;case Mt.ABORTED:return ne.ABORTED;case Mt.OUT_OF_RANGE:return ne.OUT_OF_RANGE;case Mt.UNIMPLEMENTED:return ne.UNIMPLEMENTED;case Mt.DATA_LOSS:return ne.DATA_LOSS;default:return Ce(39323,{code:n})}}(Qe=Mt||(Mt={}))[Qe.OK=0]="OK",Qe[Qe.CANCELLED=1]="CANCELLED",Qe[Qe.UNKNOWN=2]="UNKNOWN",Qe[Qe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Qe[Qe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Qe[Qe.NOT_FOUND=5]="NOT_FOUND",Qe[Qe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Qe[Qe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Qe[Qe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Qe[Qe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Qe[Qe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Qe[Qe.ABORTED=10]="ABORTED",Qe[Qe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Qe[Qe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Qe[Qe.INTERNAL=13]="INTERNAL",Qe[Qe.UNAVAILABLE=14]="UNAVAILABLE",Qe[Qe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nO=new Ts([4294967295,4294967295],0);function rE(n){const e=Ax().encode(n),t=new yx;return t.update(e),new Uint8Array(t.digest())}function aE(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),a=e.getUint32(4,!0),i=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Ts([t,a],0),new Ts([i,l],0)]}class Zg{constructor(e,t,a){if(this.bitmap=e,this.padding=t,this.hashCount=a,t<0||t>=8)throw new Ac(`Invalid padding: ${t}`);if(a<0)throw new Ac(`Invalid hash count: ${a}`);if(e.length>0&&this.hashCount===0)throw new Ac(`Invalid hash count: ${a}`);if(e.length===0&&t!==0)throw new Ac(`Invalid padding when bitmap length is 0: ${t}`);this.pe=8*e.length-t,this.ye=Ts.fromNumber(this.pe)}we(e,t,a){let i=e.add(t.multiply(Ts.fromNumber(a)));return i.compare(nO)===1&&(i=new Ts([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const t=rE(e),[a,i]=aE(t);for(let l=0;l<this.hashCount;l++){const u=this.we(a,i,l);if(!this.be(u))return!1}return!0}static create(e,t,a){const i=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),u=new Zg(l,i,t);return a.forEach(m=>u.insert(m)),u}insert(e){if(this.pe===0)return;const t=rE(e),[a,i]=aE(t);for(let l=0;l<this.hashCount;l++){const u=this.we(a,i,l);this.Se(u)}}Se(e){const t=Math.floor(e/8),a=e%8;this.bitmap[t]|=1<<a}}class Ac extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(e,t,a,i,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=a,this.documentUpdates=i,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,a){const i=new Map;return i.set(e,ru.createSynthesizedTargetChangeForCurrentChange(e,t,a)),new Yh(Oe.min(),i,new Et(Ve),ja(),$e())}}class ru{constructor(e,t,a,i,l){this.resumeToken=e,this.current=t,this.addedDocuments=a,this.modifiedDocuments=i,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,a){return new ru(a,t,$e(),$e(),$e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jd{constructor(e,t,a,i){this.De=e,this.removedTargetIds=t,this.key=a,this.ve=i}}class rT{constructor(e,t){this.targetId=e,this.Ce=t}}class aT{constructor(e,t,a=cn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=a,this.cause=i}}class sE{constructor(){this.Fe=0,this.Me=iE(),this.xe=cn.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=$e(),t=$e(),a=$e();return this.Me.forEach((i,l)=>{switch(l){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:a=a.add(i);break;default:Ce(38017,{changeType:l})}}),new ru(this.xe,this.Oe,e,t,a)}Qe(){this.Ne=!1,this.Me=iE()}$e(e,t){this.Ne=!0,this.Me=this.Me.insert(e,t)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,et(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class rO{constructor(e){this.ze=e,this.je=new Map,this.He=ja(),this.Je=zd(),this.Ye=zd(),this.Ze=new Et(Ve)}Xe(e){for(const t of e.De)e.ve&&e.ve.isFoundDocument()?this.et(t,e.ve):this.tt(t,e.key,e.ve);for(const t of e.removedTargetIds)this.tt(t,e.key,e.ve)}nt(e){this.forEachTarget(e,t=>{const a=this.rt(t);switch(e.state){case 0:this.it(t)&&a.ke(e.resumeToken);break;case 1:a.We(),a.Be||a.Qe(),a.ke(e.resumeToken);break;case 2:a.We(),a.Be||this.removeTarget(t);break;case 3:this.it(t)&&(a.Ge(),a.ke(e.resumeToken));break;case 4:this.it(t)&&(this.st(t),a.ke(e.resumeToken));break;default:Ce(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.je.forEach((a,i)=>{this.it(i)&&t(i)})}ot(e){const t=e.targetId,a=e.Ce.count,i=this._t(t);if(i){const l=i.target;if(ng(l))if(a===0){const u=new xe(l.path);this.tt(t,u,gn.newNoDocument(u,Oe.min()))}else et(a===1,20013,{expectedCount:a});else{const u=this.ut(t);if(u!==a){const m=this.ct(e),p=m?this.lt(m,e,u):1;if(p!==0){this.st(t);const y=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,y)}}}}}ct(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:a="",padding:i=0},hashCount:l=0}=t;let u,m;try{u=Cs(a).toUint8Array()}catch(p){if(p instanceof Rx)return Fo("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{m=new Zg(u,i,l)}catch(p){return Fo(p instanceof Ac?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return m.pe===0?null:m}lt(e,t,a){return t.Ce.count===a-this.Tt(e,t.targetId)?0:2}Tt(e,t){const a=this.ze.getRemoteKeysForTarget(t);let i=0;return a.forEach(l=>{const u=this.ze.Pt(),m=`projects/${u.projectId}/databases/${u.database}/documents/${l.path.canonicalString()}`;e.mightContain(m)||(this.tt(t,l,null),i++)}),i}It(e){const t=new Map;this.je.forEach((l,u)=>{const m=this._t(u);if(m){if(l.current&&ng(m.target)){const p=new xe(m.target.path);this.Et(p).has(u)||this.dt(u,p)||this.tt(u,p,gn.newNoDocument(p,e))}l.Le&&(t.set(u,l.qe()),l.Qe())}});let a=$e();this.Ye.forEach((l,u)=>{let m=!0;u.forEachWhile(p=>{const y=this._t(p);return!y||y.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)}),m&&(a=a.add(l))}),this.He.forEach((l,u)=>u.setReadTime(e));const i=new Yh(e,t,this.Ze,this.He,a);return this.He=ja(),this.Je=zd(),this.Ye=zd(),this.Ze=new Et(Ve),i}et(e,t){if(!this.it(e))return;const a=this.dt(e,t.key)?2:0;this.rt(e).$e(t.key,a),this.He=this.He.insert(t.key,t),this.Je=this.Je.insert(t.key,this.Et(t.key).add(e)),this.Ye=this.Ye.insert(t.key,this.At(t.key).add(e))}tt(e,t,a){if(!this.it(e))return;const i=this.rt(e);this.dt(e,t)?i.$e(t,1):i.Ue(t),this.Ye=this.Ye.insert(t,this.At(t).delete(e)),this.Ye=this.Ye.insert(t,this.At(t).add(e)),a&&(this.He=this.He.insert(t,a))}removeTarget(e){this.je.delete(e)}ut(e){const t=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let t=this.je.get(e);return t||(t=new sE,this.je.set(e,t)),t}At(e){let t=this.Ye.get(e);return t||(t=new Ft(Ve),this.Ye=this.Ye.insert(e,t)),t}Et(e){let t=this.Je.get(e);return t||(t=new Ft(Ve),this.Je=this.Je.insert(e,t)),t}it(e){const t=this._t(e)!==null;return t||me("WatchChangeAggregator","Detected inactive target",e),t}_t(e){const t=this.je.get(e);return t&&t.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new sE),this.ze.getRemoteKeysForTarget(e).forEach(t=>{this.tt(e,t,null)})}dt(e,t){return this.ze.getRemoteKeysForTarget(e).has(t)}}function zd(){return new Et(xe.comparator)}function iE(){return new Et(xe.comparator)}const aO={asc:"ASCENDING",desc:"DESCENDING"},sO={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},iO={and:"AND",or:"OR"};class oO{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function ag(n,e){return n.useProto3Json||Bh(e)?e:{value:e}}function Eh(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function sT(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function lO(n,e){return Eh(n,e.toTimestamp())}function Wr(n){return et(!!n,49232),Oe.fromTimestamp(function(t){const a=Ns(t);return new qt(a.seconds,a.nanos)}(n))}function Jg(n,e){return sg(n,e).canonicalString()}function sg(n,e){const t=function(i){return new mt(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function iT(n){const e=mt.fromString(n);return et(dT(e),10190,{key:e.toString()}),e}function ig(n,e){return Jg(n.databaseId,e.path)}function Ip(n,e){const t=iT(e);if(t.get(1)!==n.databaseId.projectId)throw new fe(ne.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new fe(ne.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new xe(lT(t))}function oT(n,e){return Jg(n.databaseId,e)}function cO(n){const e=iT(n);return e.length===4?mt.emptyPath():lT(e)}function og(n){return new mt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function lT(n){return et(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function oE(n,e,t){return{name:ig(n,e),fields:t.value.mapValue.fields}}function uO(n,e){let t;if("targetChange"in e){e.targetChange;const a=function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Ce(39313,{state:y})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],l=function(y,v){return y.useProto3Json?(et(v===void 0||typeof v=="string",58123),cn.fromBase64String(v||"")):(et(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),cn.fromUint8Array(v||new Uint8Array))}(n,e.targetChange.resumeToken),u=e.targetChange.cause,m=u&&function(y){const v=y.code===void 0?ne.UNKNOWN:nT(y.code);return new fe(v,y.message||"")}(u);t=new aT(a,i,l,m||null)}else if("documentChange"in e){e.documentChange;const a=e.documentChange;a.document,a.document.name,a.document.updateTime;const i=Ip(n,a.document.name),l=Wr(a.document.updateTime),u=a.document.createTime?Wr(a.document.createTime):Oe.min(),m=new Dn({mapValue:{fields:a.document.fields}}),p=gn.newFoundDocument(i,l,u,m),y=a.targetIds||[],v=a.removedTargetIds||[];t=new Jd(y,v,p.key,p)}else if("documentDelete"in e){e.documentDelete;const a=e.documentDelete;a.document;const i=Ip(n,a.document),l=a.readTime?Wr(a.readTime):Oe.min(),u=gn.newNoDocument(i,l),m=a.removedTargetIds||[];t=new Jd([],m,u.key,u)}else if("documentRemove"in e){e.documentRemove;const a=e.documentRemove;a.document;const i=Ip(n,a.document),l=a.removedTargetIds||[];t=new Jd([],l,i,null)}else{if(!("filter"in e))return Ce(11601,{Vt:e});{e.filter;const a=e.filter;a.targetId;const{count:i=0,unchangedNames:l}=a,u=new eO(i,l),m=a.targetId;t=new rT(m,u)}}return t}function dO(n,e){let t;if(e instanceof nu)t={update:oE(n,e.key,e.value)};else if(e instanceof Wg)t={delete:ig(n,e.key)};else if(e instanceof ks)t={update:oE(n,e.key,e.data),updateMask:bO(e.fieldMask)};else{if(!(e instanceof X4))return Ce(16599,{ft:e.type});t={verify:ig(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(a=>function(l,u){const m=u.transform;if(m instanceof Bc)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof qc)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof Fc)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof bh)return{fieldPath:u.field.canonicalString(),increment:m.Re};throw Ce(20930,{transform:u.transform})}(0,a))),e.precondition.isNone||(t.currentDocument=function(i,l){return l.updateTime!==void 0?{updateTime:lO(i,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Ce(27497)}(n,e.precondition)),t}function hO(n,e){return n&&n.length>0?(et(e!==void 0,14353),n.map(t=>function(i,l){let u=i.updateTime?Wr(i.updateTime):Wr(l);return u.isEqual(Oe.min())&&(u=Wr(l)),new K4(u,i.transformResults||[])}(t,e))):[]}function fO(n,e){return{documents:[oT(n,e.path)]}}function mO(n,e){const t={structuredQuery:{}},a=e.path;let i;e.collectionGroup!==null?(i=a,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=a.popLast(),t.structuredQuery.from=[{collectionId:a.lastSegment()}]),t.parent=oT(n,i);const l=function(y){if(y.length!==0)return uT(Er.create(y,"and"))}(e.filters);l&&(t.structuredQuery.where=l);const u=function(y){if(y.length!==0)return y.map(v=>function(T){return{field:Do(T.field),direction:yO(T.dir)}}(v))}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const m=ag(n,e.limit);return m!==null&&(t.structuredQuery.limit=m),e.startAt&&(t.structuredQuery.startAt=function(y){return{before:y.inclusive,values:y.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(y){return{before:!y.inclusive,values:y.position}}(e.endAt)),{gt:t,parent:i}}function pO(n){let e=cO(n.parent);const t=n.structuredQuery,a=t.from?t.from.length:0;let i=null;if(a>0){et(a===1,65062);const v=t.from[0];v.allDescendants?i=v.collectionId:e=e.child(v.collectionId)}let l=[];t.where&&(l=function(b){const T=cT(b);return T instanceof Er&&Ux(T)?T.getFilters():[T]}(t.where));let u=[];t.orderBy&&(u=function(b){return b.map(T=>function(A){return new zc(jo(A.field),function(I){switch(I){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(A.direction))}(T))}(t.orderBy));let m=null;t.limit&&(m=function(b){let T;return T=typeof b=="object"?b.value:b,Bh(T)?null:T}(t.limit));let p=null;t.startAt&&(p=function(b){const T=!!b.before,C=b.values||[];return new vh(C,T)}(t.startAt));let y=null;return t.endAt&&(y=function(b){const T=!b.before,C=b.values||[];return new vh(C,T)}(t.endAt)),P4(e,i,u,l,m,"F",p,y)}function gO(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ce(28987,{purpose:i})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function cT(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const a=jo(t.unaryFilter.field);return kt.create(a,"==",{doubleValue:NaN});case"IS_NULL":const i=jo(t.unaryFilter.field);return kt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=jo(t.unaryFilter.field);return kt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=jo(t.unaryFilter.field);return kt.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ce(61313);default:return Ce(60726)}}(n):n.fieldFilter!==void 0?function(t){return kt.create(jo(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ce(58110);default:return Ce(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Er.create(t.compositeFilter.filters.map(a=>cT(a)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Ce(1026)}}(t.compositeFilter.op))}(n):Ce(30097,{filter:n})}function yO(n){return aO[n]}function vO(n){return sO[n]}function _O(n){return iO[n]}function Do(n){return{fieldPath:n.canonicalString()}}function jo(n){return ln.fromServerFormat(n.fieldPath)}function uT(n){return n instanceof kt?function(t){if(t.op==="=="){if(Kb(t.value))return{unaryFilter:{field:Do(t.field),op:"IS_NAN"}};if(Yb(t.value))return{unaryFilter:{field:Do(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Kb(t.value))return{unaryFilter:{field:Do(t.field),op:"IS_NOT_NAN"}};if(Yb(t.value))return{unaryFilter:{field:Do(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Do(t.field),op:vO(t.op),value:t.value}}}(n):n instanceof Er?function(t){const a=t.getFilters().map(i=>uT(i));return a.length===1?a[0]:{compositeFilter:{op:_O(t.op),filters:a}}}(n):Ce(54877,{filter:n})}function bO(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function dT(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s{constructor(e,t,a,i,l=Oe.min(),u=Oe.min(),m=cn.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=a,this.sequenceNumber=i,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=m,this.expectedCount=p}withSequenceNumber(e){return new _s(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new _s(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new _s(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new _s(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EO{constructor(e){this.wt=e}}function xO(n){const e=pO({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?_h(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TO{constructor(){this.yn=new wO}addToCollectionParentIndex(e,t){return this.yn.add(t),ae.resolve()}getCollectionParents(e,t){return ae.resolve(this.yn.getEntries(t))}addFieldIndex(e,t){return ae.resolve()}deleteFieldIndex(e,t){return ae.resolve()}deleteAllFieldIndexes(e){return ae.resolve()}createTargetIndexes(e,t){return ae.resolve()}getDocumentsMatchingTarget(e,t){return ae.resolve(null)}getIndexType(e,t){return ae.resolve(0)}getFieldIndexes(e,t){return ae.resolve([])}getNextCollectionGroupToUpdate(e){return ae.resolve(null)}getMinOffset(e,t){return ae.resolve(Ss.min())}getMinOffsetFromCollectionGroup(e,t){return ae.resolve(Ss.min())}updateCollectionGroup(e,t,a){return ae.resolve()}updateIndexEntries(e,t){return ae.resolve()}}class wO{constructor(){this.index={}}add(e){const t=e.lastSegment(),a=e.popLast(),i=this.index[t]||new Ft(mt.comparator),l=!i.has(a);return this.index[t]=i.add(a),l}has(e){const t=e.lastSegment(),a=e.popLast(),i=this.index[t];return i&&i.has(a)}getEntries(e){return(this.index[e]||new Ft(mt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},hT=41943040;class On{static withCacheSize(e){return new On(e,On.DEFAULT_COLLECTION_PERCENTILE,On.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,a){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */On.DEFAULT_COLLECTION_PERCENTILE=10,On.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,On.DEFAULT=new On(hT,On.DEFAULT_COLLECTION_PERCENTILE,On.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),On.DISABLED=new On(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{constructor(e){this.nr=e}next(){return this.nr+=2,this.nr}static rr(){return new Yo(0)}static ir(){return new Yo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cE="LruGarbageCollector",AO=1048576;function uE([n,e],[t,a]){const i=Ve(n,t);return i===0?Ve(e,a):i}class SO{constructor(e){this.cr=e,this.buffer=new Ft(uE),this.lr=0}hr(){return++this.lr}Pr(e){const t=[e,this.hr()];if(this.buffer.size<this.cr)this.buffer=this.buffer.add(t);else{const a=this.buffer.last();uE(t,a)<0&&(this.buffer=this.buffer.delete(a).add(t))}}get maxValue(){return this.buffer.last()[0]}}class NO{constructor(e,t,a){this.garbageCollector=e,this.asyncQueue=t,this.localStore=a,this.Tr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ir(6e4)}stop(){this.Tr&&(this.Tr.cancel(),this.Tr=null)}get started(){return this.Tr!==null}Ir(e){me(cE,`Garbage collection scheduled in ${e}ms`),this.Tr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Tr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){al(t)?me(cE,"Ignoring IndexedDB error during garbage collection: ",t):await rl(t)}await this.Ir(3e5)})}}class CO{constructor(e,t){this.Er=e,this.params=t}calculateTargetCount(e,t){return this.Er.dr(e).next(a=>Math.floor(t/100*a))}nthSequenceNumber(e,t){if(t===0)return ae.resolve(zh.le);const a=new SO(t);return this.Er.forEachTarget(e,i=>a.Pr(i.sequenceNumber)).next(()=>this.Er.Ar(e,i=>a.Pr(i))).next(()=>a.maxValue)}removeTargets(e,t,a){return this.Er.removeTargets(e,t,a)}removeOrphanedDocuments(e,t){return this.Er.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(me("LruGarbageCollector","Garbage collection skipped; disabled"),ae.resolve(lE)):this.getCacheSize(e).next(a=>a<this.params.cacheSizeCollectionThreshold?(me("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),lE):this.Rr(e,t))}getCacheSize(e){return this.Er.getCacheSize(e)}Rr(e,t){let a,i,l,u,m,p,y;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(b=>(b>this.params.maximumSequenceNumbersToCollect?(me("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${b}`),i=this.params.maximumSequenceNumbersToCollect):i=b,u=Date.now(),this.nthSequenceNumber(e,i))).next(b=>(a=b,m=Date.now(),this.removeTargets(e,a,t))).next(b=>(l=b,p=Date.now(),this.removeOrphanedDocuments(e,a))).next(b=>(y=Date.now(),Io()<=He.DEBUG&&me("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-v}ms
	Determined least recently used ${i} in `+(m-u)+`ms
	Removed ${l} targets in `+(p-m)+`ms
	Removed ${b} documents in `+(y-p)+`ms
Total Duration: ${y-v}ms`),ae.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:l,documentsRemoved:b})))}}function RO(n,e){return new CO(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IO{constructor(){this.changes=new Pi(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,gn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const a=this.changes.get(t);return a!==void 0?ae.resolve(a):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OO{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DO{constructor(e,t,a,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=a,this.indexManager=i}getDocument(e,t){let a=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(a=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(a!==null&&Dc(a.mutation,i,Gn.empty(),qt.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(a=>this.getLocalViewOfDocuments(e,a,$e()).next(()=>a))}getLocalViewOfDocuments(e,t,a=$e()){const i=Ei();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,a).next(l=>{let u=wc();return l.forEach((m,p)=>{u=u.insert(m,p.overlayedDocument)}),u}))}getOverlayedDocuments(e,t){const a=Ei();return this.populateOverlays(e,a,t).next(()=>this.computeViews(e,t,a,$e()))}populateOverlays(e,t,a){const i=[];return a.forEach(l=>{t.has(l)||i.push(l)}),this.documentOverlayCache.getOverlays(e,i).next(l=>{l.forEach((u,m)=>{t.set(u,m)})})}computeViews(e,t,a,i){let l=ja();const u=Oc(),m=function(){return Oc()}();return t.forEach((p,y)=>{const v=a.get(y.key);i.has(y.key)&&(v===void 0||v.mutation instanceof ks)?l=l.insert(y.key,y):v!==void 0?(u.set(y.key,v.mutation.getFieldMask()),Dc(v.mutation,y,v.mutation.getFieldMask(),qt.now())):u.set(y.key,Gn.empty())}),this.recalculateAndSaveOverlays(e,l).next(p=>(p.forEach((y,v)=>u.set(y,v)),t.forEach((y,v)=>{var b;return m.set(y,new OO(v,(b=u.get(y))!==null&&b!==void 0?b:null))}),m))}recalculateAndSaveOverlays(e,t){const a=Oc();let i=new Et((u,m)=>u-m),l=$e();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(u=>{for(const m of u)m.keys().forEach(p=>{const y=t.get(p);if(y===null)return;let v=a.get(p)||Gn.empty();v=m.applyToLocalView(y,v),a.set(p,v);const b=(i.get(m.batchId)||$e()).add(p);i=i.insert(m.batchId,b)})}).next(()=>{const u=[],m=i.getReverseIterator();for(;m.hasNext();){const p=m.getNext(),y=p.key,v=p.value,b=Kx();v.forEach(T=>{if(!l.has(T)){const C=eT(t.get(T),a.get(T));C!==null&&b.set(T,C),l=l.add(T)}}),u.push(this.documentOverlayCache.saveOverlays(e,y,b))}return ae.waitFor(u)}).next(()=>a)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(a=>this.recalculateAndSaveOverlays(e,a))}getDocumentsMatchingQuery(e,t,a,i){return function(u){return xe.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Fx(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,a,i):this.getDocumentsMatchingCollectionQuery(e,t,a,i)}getNextDocuments(e,t,a,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,a,i).next(l=>{const u=i-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,a.largestBatchId,i-l.size):ae.resolve(Ei());let m=kc,p=l;return u.next(y=>ae.forEach(y,(v,b)=>(m<b.largestBatchId&&(m=b.largestBatchId),l.get(v)?ae.resolve():this.remoteDocumentCache.getEntry(e,v).next(T=>{p=p.insert(v,T)}))).next(()=>this.populateOverlays(e,y,l)).next(()=>this.computeViews(e,p,y,$e())).next(v=>({batchId:m,changes:Yx(v)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new xe(t)).next(a=>{let i=wc();return a.isFoundDocument()&&(i=i.insert(a.key,a)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,a,i){const l=t.collectionGroup;let u=wc();return this.indexManager.getCollectionParents(e,l).next(m=>ae.forEach(m,p=>{const y=function(b,T){return new sl(T,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt)}(t,p.child(l));return this.getDocumentsMatchingCollectionQuery(e,y,a,i).next(v=>{v.forEach((b,T)=>{u=u.insert(b,T)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,a,i){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,a.largestBatchId).next(u=>(l=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,a,l,i))).next(u=>{l.forEach((p,y)=>{const v=y.getKey();u.get(v)===null&&(u=u.insert(v,gn.newInvalidDocument(v)))});let m=wc();return u.forEach((p,y)=>{const v=l.get(p);v!==void 0&&Dc(v.mutation,y,Gn.empty(),qt.now()),Hh(t,y)&&(m=m.insert(p,y))}),m})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jO{constructor(e){this.serializer=e,this.Fr=new Map,this.Mr=new Map}getBundleMetadata(e,t){return ae.resolve(this.Fr.get(t))}saveBundleMetadata(e,t){return this.Fr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Wr(i.createTime)}}(t)),ae.resolve()}getNamedQuery(e,t){return ae.resolve(this.Mr.get(t))}saveNamedQuery(e,t){return this.Mr.set(t.name,function(i){return{name:i.name,query:xO(i.bundledQuery),readTime:Wr(i.readTime)}}(t)),ae.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PO{constructor(){this.overlays=new Et(xe.comparator),this.Or=new Map}getOverlay(e,t){return ae.resolve(this.overlays.get(t))}getOverlays(e,t){const a=Ei();return ae.forEach(t,i=>this.getOverlay(e,i).next(l=>{l!==null&&a.set(i,l)})).next(()=>a)}saveOverlays(e,t,a){return a.forEach((i,l)=>{this.St(e,t,l)}),ae.resolve()}removeOverlaysForBatchId(e,t,a){const i=this.Or.get(a);return i!==void 0&&(i.forEach(l=>this.overlays=this.overlays.remove(l)),this.Or.delete(a)),ae.resolve()}getOverlaysForCollection(e,t,a){const i=Ei(),l=t.length+1,u=new xe(t.child("")),m=this.overlays.getIteratorFrom(u);for(;m.hasNext();){const p=m.getNext().value,y=p.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===l&&p.largestBatchId>a&&i.set(p.getKey(),p)}return ae.resolve(i)}getOverlaysForCollectionGroup(e,t,a,i){let l=new Et((y,v)=>y-v);const u=this.overlays.getIterator();for(;u.hasNext();){const y=u.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>a){let v=l.get(y.largestBatchId);v===null&&(v=Ei(),l=l.insert(y.largestBatchId,v)),v.set(y.getKey(),y)}}const m=Ei(),p=l.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((y,v)=>m.set(y,v)),!(m.size()>=i)););return ae.resolve(m)}St(e,t,a){const i=this.overlays.get(a.key);if(i!==null){const u=this.Or.get(i.largestBatchId).delete(a.key);this.Or.set(i.largestBatchId,u)}this.overlays=this.overlays.insert(a.key,new J4(t,a));let l=this.Or.get(t);l===void 0&&(l=$e(),this.Or.set(t,l)),this.Or.set(t,l.add(a.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MO{constructor(){this.sessionToken=cn.EMPTY_BYTE_STRING}getSessionToken(e){return ae.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ae.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ey{constructor(){this.Nr=new Ft(Wt.Br),this.Lr=new Ft(Wt.kr)}isEmpty(){return this.Nr.isEmpty()}addReference(e,t){const a=new Wt(e,t);this.Nr=this.Nr.add(a),this.Lr=this.Lr.add(a)}qr(e,t){e.forEach(a=>this.addReference(a,t))}removeReference(e,t){this.Qr(new Wt(e,t))}$r(e,t){e.forEach(a=>this.removeReference(a,t))}Ur(e){const t=new xe(new mt([])),a=new Wt(t,e),i=new Wt(t,e+1),l=[];return this.Lr.forEachInRange([a,i],u=>{this.Qr(u),l.push(u.key)}),l}Kr(){this.Nr.forEach(e=>this.Qr(e))}Qr(e){this.Nr=this.Nr.delete(e),this.Lr=this.Lr.delete(e)}Wr(e){const t=new xe(new mt([])),a=new Wt(t,e),i=new Wt(t,e+1);let l=$e();return this.Lr.forEachInRange([a,i],u=>{l=l.add(u.key)}),l}containsKey(e){const t=new Wt(e,0),a=this.Nr.firstAfterOrEqual(t);return a!==null&&e.isEqual(a.key)}}class Wt{constructor(e,t){this.key=e,this.Gr=t}static Br(e,t){return xe.comparator(e.key,t.key)||Ve(e.Gr,t.Gr)}static kr(e,t){return Ve(e.Gr,t.Gr)||xe.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kO{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Jn=1,this.zr=new Ft(Wt.Br)}checkEmpty(e){return ae.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,a,i){const l=this.Jn;this.Jn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new Z4(l,t,a,i);this.mutationQueue.push(u);for(const m of i)this.zr=this.zr.add(new Wt(m.key,l)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return ae.resolve(u)}lookupMutationBatch(e,t){return ae.resolve(this.jr(t))}getNextMutationBatchAfterBatchId(e,t){const a=t+1,i=this.Hr(a),l=i<0?0:i;return ae.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return ae.resolve(this.mutationQueue.length===0?Fg:this.Jn-1)}getAllMutationBatches(e){return ae.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const a=new Wt(t,0),i=new Wt(t,Number.POSITIVE_INFINITY),l=[];return this.zr.forEachInRange([a,i],u=>{const m=this.jr(u.Gr);l.push(m)}),ae.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let a=new Ft(Ve);return t.forEach(i=>{const l=new Wt(i,0),u=new Wt(i,Number.POSITIVE_INFINITY);this.zr.forEachInRange([l,u],m=>{a=a.add(m.Gr)})}),ae.resolve(this.Jr(a))}getAllMutationBatchesAffectingQuery(e,t){const a=t.path,i=a.length+1;let l=a;xe.isDocumentKey(l)||(l=l.child(""));const u=new Wt(new xe(l),0);let m=new Ft(Ve);return this.zr.forEachWhile(p=>{const y=p.key.path;return!!a.isPrefixOf(y)&&(y.length===i&&(m=m.add(p.Gr)),!0)},u),ae.resolve(this.Jr(m))}Jr(e){const t=[];return e.forEach(a=>{const i=this.jr(a);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){et(this.Yr(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let a=this.zr;return ae.forEach(t.mutations,i=>{const l=new Wt(i.key,t.batchId);return a=a.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.zr=a})}Xn(e){}containsKey(e,t){const a=new Wt(t,0),i=this.zr.firstAfterOrEqual(a);return ae.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,ae.resolve()}Yr(e,t){return this.Hr(e)}Hr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}jr(e){const t=this.Hr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LO{constructor(e){this.Zr=e,this.docs=function(){return new Et(xe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const a=t.key,i=this.docs.get(a),l=i?i.size:0,u=this.Zr(t);return this.docs=this.docs.insert(a,{document:t.mutableCopy(),size:u}),this.size+=u-l,this.indexManager.addToCollectionParentIndex(e,a.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const a=this.docs.get(t);return ae.resolve(a?a.document.mutableCopy():gn.newInvalidDocument(t))}getEntries(e,t){let a=ja();return t.forEach(i=>{const l=this.docs.get(i);a=a.insert(i,l?l.document.mutableCopy():gn.newInvalidDocument(i))}),ae.resolve(a)}getDocumentsMatchingQuery(e,t,a,i){let l=ja();const u=t.path,m=new xe(u.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(m);for(;p.hasNext();){const{key:y,value:{document:v}}=p.getNext();if(!u.isPrefixOf(y.path))break;y.path.length>u.length+1||h4(d4(v),a)<=0||(i.has(v.key)||Hh(t,v))&&(l=l.insert(v.key,v.mutableCopy()))}return ae.resolve(l)}getAllFromCollectionGroup(e,t,a,i){Ce(9500)}Xr(e,t){return ae.forEach(this.docs,a=>t(a))}newChangeBuffer(e){return new VO(this)}getSize(e){return ae.resolve(this.size)}}class VO extends IO{constructor(e){super(),this.vr=e}applyChanges(e){const t=[];return this.changes.forEach((a,i)=>{i.isValidDocument()?t.push(this.vr.addEntry(e,i)):this.vr.removeEntry(a)}),ae.waitFor(t)}getFromCache(e,t){return this.vr.getEntry(e,t)}getAllFromCache(e,t){return this.vr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UO{constructor(e){this.persistence=e,this.ei=new Pi(t=>Gg(t),Yg),this.lastRemoteSnapshotVersion=Oe.min(),this.highestTargetId=0,this.ti=0,this.ni=new ey,this.targetCount=0,this.ri=Yo.rr()}forEachTarget(e,t){return this.ei.forEach((a,i)=>t(i)),ae.resolve()}getLastRemoteSnapshotVersion(e){return ae.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ae.resolve(this.ti)}allocateTargetId(e){return this.highestTargetId=this.ri.next(),ae.resolve(this.highestTargetId)}setTargetsMetadata(e,t,a){return a&&(this.lastRemoteSnapshotVersion=a),t>this.ti&&(this.ti=t),ae.resolve()}ar(e){this.ei.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ri=new Yo(t),this.highestTargetId=t),e.sequenceNumber>this.ti&&(this.ti=e.sequenceNumber)}addTargetData(e,t){return this.ar(t),this.targetCount+=1,ae.resolve()}updateTargetData(e,t){return this.ar(t),ae.resolve()}removeTargetData(e,t){return this.ei.delete(t.target),this.ni.Ur(t.targetId),this.targetCount-=1,ae.resolve()}removeTargets(e,t,a){let i=0;const l=[];return this.ei.forEach((u,m)=>{m.sequenceNumber<=t&&a.get(m.targetId)===null&&(this.ei.delete(u),l.push(this.removeMatchingKeysForTargetId(e,m.targetId)),i++)}),ae.waitFor(l).next(()=>i)}getTargetCount(e){return ae.resolve(this.targetCount)}getTargetData(e,t){const a=this.ei.get(t)||null;return ae.resolve(a)}addMatchingKeys(e,t,a){return this.ni.qr(t,a),ae.resolve()}removeMatchingKeys(e,t,a){this.ni.$r(t,a);const i=this.persistence.referenceDelegate,l=[];return i&&t.forEach(u=>{l.push(i.markPotentiallyOrphaned(e,u))}),ae.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.ni.Ur(t),ae.resolve()}getMatchingKeysForTargetId(e,t){const a=this.ni.Wr(t);return ae.resolve(a)}containsKey(e,t){return ae.resolve(this.ni.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fT{constructor(e,t){this.ii={},this.overlays={},this.si=new zh(0),this.oi=!1,this.oi=!0,this._i=new MO,this.referenceDelegate=e(this),this.ai=new UO(this),this.indexManager=new TO,this.remoteDocumentCache=function(i){return new LO(i)}(a=>this.referenceDelegate.ui(a)),this.serializer=new EO(t),this.ci=new jO(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.oi=!1,Promise.resolve()}get started(){return this.oi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new PO,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let a=this.ii[e.toKey()];return a||(a=new kO(t,this.referenceDelegate),this.ii[e.toKey()]=a),a}getGlobalsCache(){return this._i}getTargetCache(){return this.ai}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.ci}runTransaction(e,t,a){me("MemoryPersistence","Starting transaction:",e);const i=new zO(this.si.next());return this.referenceDelegate.li(),a(i).next(l=>this.referenceDelegate.hi(i).next(()=>l)).toPromise().then(l=>(i.raiseOnCommittedEvent(),l))}Pi(e,t){return ae.or(Object.values(this.ii).map(a=>()=>a.containsKey(e,t)))}}class zO extends m4{constructor(e){super(),this.currentSequenceNumber=e}}class ty{constructor(e){this.persistence=e,this.Ti=new ey,this.Ii=null}static Ei(e){return new ty(e)}get di(){if(this.Ii)return this.Ii;throw Ce(60996)}addReference(e,t,a){return this.Ti.addReference(a,t),this.di.delete(a.toString()),ae.resolve()}removeReference(e,t,a){return this.Ti.removeReference(a,t),this.di.add(a.toString()),ae.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),ae.resolve()}removeTarget(e,t){this.Ti.Ur(t.targetId).forEach(i=>this.di.add(i.toString()));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(l=>this.di.add(l.toString()))}).next(()=>a.removeTargetData(e,t))}li(){this.Ii=new Set}hi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ae.forEach(this.di,a=>{const i=xe.fromPath(a);return this.Ai(e,i).next(l=>{l||t.removeEntry(i,Oe.min())})}).next(()=>(this.Ii=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ai(e,t).next(a=>{a?this.di.delete(t.toString()):this.di.add(t.toString())})}ui(e){return 0}Ai(e,t){return ae.or([()=>ae.resolve(this.Ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Pi(e,t)])}}class xh{constructor(e,t){this.persistence=e,this.Ri=new Pi(a=>y4(a.path),(a,i)=>a.isEqual(i)),this.garbageCollector=RO(this,t)}static Ei(e,t){return new xh(e,t)}li(){}hi(e){return ae.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.Vr(e);return this.persistence.getTargetCache().getTargetCount(e).next(a=>t.next(i=>a+i))}Vr(e){let t=0;return this.Ar(e,a=>{t++}).next(()=>t)}Ar(e,t){return ae.forEach(this.Ri,(a,i)=>this.gr(e,a,i).next(l=>l?ae.resolve():t(i)))}removeTargets(e,t,a){return this.persistence.getTargetCache().removeTargets(e,t,a)}removeOrphanedDocuments(e,t){let a=0;const i=this.persistence.getRemoteDocumentCache(),l=i.newChangeBuffer();return i.Xr(e,u=>this.gr(e,u,t).next(m=>{m||(a++,l.removeEntry(u,Oe.min()))})).next(()=>l.apply(e)).next(()=>a)}markPotentiallyOrphaned(e,t){return this.Ri.set(t,e.currentSequenceNumber),ae.resolve()}removeTarget(e,t){const a=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,a)}addReference(e,t,a){return this.Ri.set(a,e.currentSequenceNumber),ae.resolve()}removeReference(e,t,a){return this.Ri.set(a,e.currentSequenceNumber),ae.resolve()}updateLimboDocument(e,t){return this.Ri.set(t,e.currentSequenceNumber),ae.resolve()}ui(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Wd(e.data.value)),t}gr(e,t,a){return ae.or([()=>this.persistence.Pi(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.Ri.get(t);return ae.resolve(i!==void 0&&i>a)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ny{constructor(e,t,a,i){this.targetId=e,this.fromCache=t,this.ls=a,this.hs=i}static Ps(e,t){let a=$e(),i=$e();for(const l of t.docChanges)switch(l.type){case 0:a=a.add(l.doc.key);break;case 1:i=i.add(l.doc.key)}return new ny(e,t.fromCache,a,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BO{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qO{constructor(){this.Ts=!1,this.Is=!1,this.Es=100,this.ds=function(){return vC()?8:p4(vn())>0?6:4}()}initialize(e,t){this.As=e,this.indexManager=t,this.Ts=!0}getDocumentsMatchingQuery(e,t,a,i){const l={result:null};return this.Rs(e,t).next(u=>{l.result=u}).next(()=>{if(!l.result)return this.Vs(e,t,i,a).next(u=>{l.result=u})}).next(()=>{if(l.result)return;const u=new BO;return this.fs(e,t,u).next(m=>{if(l.result=m,this.Is)return this.gs(e,t,u,m.size)})}).next(()=>l.result)}gs(e,t,a,i){return a.documentReadCount<this.Es?(Io()<=He.DEBUG&&me("QueryEngine","SDK will not create cache indexes for query:",Oo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Es,"documents"),ae.resolve()):(Io()<=He.DEBUG&&me("QueryEngine","Query:",Oo(t),"scans",a.documentReadCount,"local documents and returns",i,"documents as results."),a.documentReadCount>this.ds*i?(Io()<=He.DEBUG&&me("QueryEngine","The SDK decides to create cache indexes for query:",Oo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Qr(t))):ae.resolve())}Rs(e,t){if(Zb(t))return ae.resolve(null);let a=Qr(t);return this.indexManager.getIndexType(e,a).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=_h(t,null,"F"),a=Qr(t)),this.indexManager.getDocumentsMatchingTarget(e,a).next(l=>{const u=$e(...l);return this.As.getDocuments(e,u).next(m=>this.indexManager.getMinOffset(e,a).next(p=>{const y=this.ps(t,m);return this.ys(t,y,u,p.readTime)?this.Rs(e,_h(t,null,"F")):this.ws(e,y,t,p)}))})))}Vs(e,t,a,i){return Zb(t)||i.isEqual(Oe.min())?ae.resolve(null):this.As.getDocuments(e,a).next(l=>{const u=this.ps(t,l);return this.ys(t,u,a,i)?ae.resolve(null):(Io()<=He.DEBUG&&me("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Oo(t)),this.ws(e,u,t,u4(i,kc)).next(m=>m))})}ps(e,t){let a=new Ft($x(e));return t.forEach((i,l)=>{Hh(e,l)&&(a=a.add(l))}),a}ys(e,t,a,i){if(e.limit===null)return!1;if(a.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(i)>0)}fs(e,t,a){return Io()<=He.DEBUG&&me("QueryEngine","Using full collection scan to execute query:",Oo(t)),this.As.getDocumentsMatchingQuery(e,t,Ss.min(),a)}ws(e,t,a,i){return this.As.getDocumentsMatchingQuery(e,a,i).next(l=>(t.forEach(u=>{l=l.insert(u.key,u)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ry="LocalStore",FO=3e8;class HO{constructor(e,t,a,i){this.persistence=e,this.bs=t,this.serializer=i,this.Ss=new Et(Ve),this.Ds=new Pi(l=>Gg(l),Yg),this.vs=new Map,this.Cs=e.getRemoteDocumentCache(),this.ai=e.getTargetCache(),this.ci=e.getBundleCache(),this.Fs(a)}Fs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new DO(this.Cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Cs.setIndexManager(this.indexManager),this.bs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ss))}}function $O(n,e,t,a){return new HO(n,e,t,a)}async function mT(n,e){const t=De(n);return await t.persistence.runTransaction("Handle user change","readonly",a=>{let i;return t.mutationQueue.getAllMutationBatches(a).next(l=>(i=l,t.Fs(e),t.mutationQueue.getAllMutationBatches(a))).next(l=>{const u=[],m=[];let p=$e();for(const y of i){u.push(y.batchId);for(const v of y.mutations)p=p.add(v.key)}for(const y of l){m.push(y.batchId);for(const v of y.mutations)p=p.add(v.key)}return t.localDocuments.getDocuments(a,p).next(y=>({Ms:y,removedBatchIds:u,addedBatchIds:m}))})})}function GO(n,e){const t=De(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",a=>{const i=e.batch.keys(),l=t.Cs.newChangeBuffer({trackRemovals:!0});return function(m,p,y,v){const b=y.batch,T=b.keys();let C=ae.resolve();return T.forEach(A=>{C=C.next(()=>v.getEntry(p,A)).next(M=>{const I=y.docVersions.get(A);et(I!==null,48541),M.version.compareTo(I)<0&&(b.applyToRemoteDocument(M,y),M.isValidDocument()&&(M.setReadTime(y.commitVersion),v.addEntry(M)))})}),C.next(()=>m.mutationQueue.removeMutationBatch(p,b))}(t,a,e,l).next(()=>l.apply(a)).next(()=>t.mutationQueue.performConsistencyCheck(a)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(a,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,function(m){let p=$e();for(let y=0;y<m.mutationResults.length;++y)m.mutationResults[y].transformResults.length>0&&(p=p.add(m.batch.mutations[y].key));return p}(e))).next(()=>t.localDocuments.getDocuments(a,i))})}function pT(n){const e=De(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.ai.getLastRemoteSnapshotVersion(t))}function YO(n,e){const t=De(n),a=e.snapshotVersion;let i=t.Ss;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const u=t.Cs.newChangeBuffer({trackRemovals:!0});i=t.Ss;const m=[];e.targetChanges.forEach((v,b)=>{const T=i.get(b);if(!T)return;m.push(t.ai.removeMatchingKeys(l,v.removedDocuments,b).next(()=>t.ai.addMatchingKeys(l,v.addedDocuments,b)));let C=T.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(b)!==null?C=C.withResumeToken(cn.EMPTY_BYTE_STRING,Oe.min()).withLastLimboFreeSnapshotVersion(Oe.min()):v.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(v.resumeToken,a)),i=i.insert(b,C),function(M,I,H){return M.resumeToken.approximateByteSize()===0||I.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=FO?!0:H.addedDocuments.size+H.modifiedDocuments.size+H.removedDocuments.size>0}(T,C,v)&&m.push(t.ai.updateTargetData(l,C))});let p=ja(),y=$e();if(e.documentUpdates.forEach(v=>{e.resolvedLimboDocuments.has(v)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(l,v))}),m.push(KO(l,u,e.documentUpdates).next(v=>{p=v.xs,y=v.Os})),!a.isEqual(Oe.min())){const v=t.ai.getLastRemoteSnapshotVersion(l).next(b=>t.ai.setTargetsMetadata(l,l.currentSequenceNumber,a));m.push(v)}return ae.waitFor(m).next(()=>u.apply(l)).next(()=>t.localDocuments.getLocalViewOfDocuments(l,p,y)).next(()=>p)}).then(l=>(t.Ss=i,l))}function KO(n,e,t){let a=$e(),i=$e();return t.forEach(l=>a=a.add(l)),e.getEntries(n,a).next(l=>{let u=ja();return t.forEach((m,p)=>{const y=l.get(m);p.isFoundDocument()!==y.isFoundDocument()&&(i=i.add(m)),p.isNoDocument()&&p.version.isEqual(Oe.min())?(e.removeEntry(m,p.readTime),u=u.insert(m,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||p.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(p),u=u.insert(m,p)):me(ry,"Ignoring outdated watch update for ",m,". Current version:",y.version," Watch version:",p.version)}),{xs:u,Os:i}})}function QO(n,e){const t=De(n);return t.persistence.runTransaction("Get next mutation batch","readonly",a=>(e===void 0&&(e=Fg),t.mutationQueue.getNextMutationBatchAfterBatchId(a,e)))}function WO(n,e){const t=De(n);return t.persistence.runTransaction("Allocate target","readwrite",a=>{let i;return t.ai.getTargetData(a,e).next(l=>l?(i=l,ae.resolve(i)):t.ai.allocateTargetId(a).next(u=>(i=new _s(e,u,"TargetPurposeListen",a.currentSequenceNumber),t.ai.addTargetData(a,i).next(()=>i))))}).then(a=>{const i=t.Ss.get(a.targetId);return(i===null||a.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ss=t.Ss.insert(a.targetId,a),t.Ds.set(e,a.targetId)),a})}async function lg(n,e,t){const a=De(n),i=a.Ss.get(e),l=t?"readwrite":"readwrite-primary";try{t||await a.persistence.runTransaction("Release target",l,u=>a.persistence.referenceDelegate.removeTarget(u,i))}catch(u){if(!al(u))throw u;me(ry,`Failed to update sequence numbers for target ${e}: ${u}`)}a.Ss=a.Ss.remove(e),a.Ds.delete(i.target)}function dE(n,e,t){const a=De(n);let i=Oe.min(),l=$e();return a.persistence.runTransaction("Execute query","readwrite",u=>function(p,y,v){const b=De(p),T=b.Ds.get(v);return T!==void 0?ae.resolve(b.Ss.get(T)):b.ai.getTargetData(y,v)}(a,u,Qr(e)).next(m=>{if(m)return i=m.lastLimboFreeSnapshotVersion,a.ai.getMatchingKeysForTargetId(u,m.targetId).next(p=>{l=p})}).next(()=>a.bs.getDocumentsMatchingQuery(u,e,t?i:Oe.min(),t?l:$e())).next(m=>(XO(a,k4(e),m),{documents:m,Ns:l})))}function XO(n,e,t){let a=n.vs.get(e)||Oe.min();t.forEach((i,l)=>{l.readTime.compareTo(a)>0&&(a=l.readTime)}),n.vs.set(e,a)}class hE{constructor(){this.activeTargetIds=q4()}$s(e){this.activeTargetIds=this.activeTargetIds.add(e)}Us(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Qs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ZO{constructor(){this.So=new hE,this.Do={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,a){}addLocalQueryTarget(e,t=!0){return t&&this.So.$s(e),this.Do[e]||"not-current"}updateQueryState(e,t,a){this.Do[e]=t}removeLocalQueryTarget(e){this.So.Us(e)}isLocalQueryTarget(e){return this.So.activeTargetIds.has(e)}clearQueryState(e){delete this.Do[e]}getAllActiveQueryTargets(){return this.So.activeTargetIds}isActiveQueryTarget(e){return this.So.activeTargetIds.has(e)}start(){return this.So=new hE,Promise.resolve()}handleUserChange(e,t,a){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JO{vo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fE="ConnectivityMonitor";class mE{constructor(){this.Co=()=>this.Fo(),this.Mo=()=>this.xo(),this.Oo=[],this.No()}vo(e){this.Oo.push(e)}shutdown(){window.removeEventListener("online",this.Co),window.removeEventListener("offline",this.Mo)}No(){window.addEventListener("online",this.Co),window.addEventListener("offline",this.Mo)}Fo(){me(fE,"Network connectivity changed: AVAILABLE");for(const e of this.Oo)e(0)}xo(){me(fE,"Network connectivity changed: UNAVAILABLE");for(const e of this.Oo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bd=null;function cg(){return Bd===null?Bd=function(){return 268435456+Math.round(2147483648*Math.random())}():Bd++,"0x"+Bd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Op="RestConnection",eD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class tD{get Bo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Lo=t+"://"+e.host,this.ko=`projects/${a}/databases/${i}`,this.qo=this.databaseId.database===gh?`project_id=${a}`:`project_id=${a}&database_id=${i}`}Qo(e,t,a,i,l){const u=cg(),m=this.$o(e,t.toUriEncodedString());me(Op,`Sending RPC '${e}' ${u}:`,m,a);const p={"google-cloud-resource-prefix":this.ko,"x-goog-request-params":this.qo};this.Uo(p,i,l);const{host:y}=new URL(m),v=Qc(y);return this.Ko(e,m,p,a,v).then(b=>(me(Op,`Received RPC '${e}' ${u}: `,b),b),b=>{throw Fo(Op,`RPC '${e}' ${u} failed with error: `,b,"url: ",m,"request:",a),b})}Wo(e,t,a,i,l,u){return this.Qo(e,t,a,i,l)}Uo(e,t,a){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+nl}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,l)=>e[l]=i),a&&a.headers.forEach((i,l)=>e[l]=i)}$o(e,t){const a=eD[e];return`${this.Lo}/v1/${t}:${a}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nD{constructor(e){this.Go=e.Go,this.zo=e.zo}jo(e){this.Ho=e}Jo(e){this.Yo=e}Zo(e){this.Xo=e}onMessage(e){this.e_=e}close(){this.zo()}send(e){this.Go(e)}t_(){this.Ho()}n_(){this.Yo()}r_(e){this.Xo(e)}i_(e){this.e_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mn="WebChannelConnection";class rD extends tD{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ko(e,t,a,i,l){const u=cg();return new Promise((m,p)=>{const y=new vx;y.setWithCredentials(!0),y.listenOnce(_x.COMPLETE,()=>{try{switch(y.getLastErrorCode()){case Qd.NO_ERROR:const b=y.getResponseJson();me(mn,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(b)),m(b);break;case Qd.TIMEOUT:me(mn,`RPC '${e}' ${u} timed out`),p(new fe(ne.DEADLINE_EXCEEDED,"Request time out"));break;case Qd.HTTP_ERROR:const T=y.getStatus();if(me(mn,`RPC '${e}' ${u} failed with status:`,T,"response text:",y.getResponseText()),T>0){let C=y.getResponseJson();Array.isArray(C)&&(C=C[0]);const A=C==null?void 0:C.error;if(A&&A.status&&A.message){const M=function(H){const W=H.toLowerCase().replace(/_/g,"-");return Object.values(ne).indexOf(W)>=0?W:ne.UNKNOWN}(A.status);p(new fe(M,A.message))}else p(new fe(ne.UNKNOWN,"Server responded with status "+y.getStatus()))}else p(new fe(ne.UNAVAILABLE,"Connection failed."));break;default:Ce(9055,{s_:e,streamId:u,o_:y.getLastErrorCode(),__:y.getLastError()})}}finally{me(mn,`RPC '${e}' ${u} completed.`)}});const v=JSON.stringify(i);me(mn,`RPC '${e}' ${u} sending request:`,i),y.send(t,"POST",v,a,15)})}a_(e,t,a){const i=cg(),l=[this.Lo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=xx(),m=Ex(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(p.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Uo(p.initMessageHeaders,t,a),p.encodeInitMessageHeaders=!0;const v=l.join("");me(mn,`Creating RPC '${e}' stream ${i}: ${v}`,p);const b=u.createWebChannel(v,p);let T=!1,C=!1;const A=new nD({Go:I=>{C?me(mn,`Not sending because RPC '${e}' stream ${i} is closed:`,I):(T||(me(mn,`Opening RPC '${e}' stream ${i} transport.`),b.open(),T=!0),me(mn,`RPC '${e}' stream ${i} sending:`,I),b.send(I))},zo:()=>b.close()}),M=(I,H,W)=>{I.listen(H,q=>{try{W(q)}catch(ie){setTimeout(()=>{throw ie},0)}})};return M(b,Tc.EventType.OPEN,()=>{C||(me(mn,`RPC '${e}' stream ${i} transport opened.`),A.t_())}),M(b,Tc.EventType.CLOSE,()=>{C||(C=!0,me(mn,`RPC '${e}' stream ${i} transport closed`),A.r_())}),M(b,Tc.EventType.ERROR,I=>{C||(C=!0,Fo(mn,`RPC '${e}' stream ${i} transport errored. Name:`,I.name,"Message:",I.message),A.r_(new fe(ne.UNAVAILABLE,"The operation could not be completed")))}),M(b,Tc.EventType.MESSAGE,I=>{var H;if(!C){const W=I.data[0];et(!!W,16349);const q=W,ie=(q==null?void 0:q.error)||((H=q[0])===null||H===void 0?void 0:H.error);if(ie){me(mn,`RPC '${e}' stream ${i} received error:`,ie);const le=ie.status;let pe=function(N){const j=Mt[N];if(j!==void 0)return nT(j)}(le),k=ie.message;pe===void 0&&(pe=ne.INTERNAL,k="Unknown error status: "+le+" with message "+ie.message),C=!0,A.r_(new fe(pe,k)),b.close()}else me(mn,`RPC '${e}' stream ${i} received:`,W),A.i_(W)}}),M(m,bx.STAT_EVENT,I=>{I.stat===Xp.PROXY?me(mn,`RPC '${e}' stream ${i} detected buffering proxy`):I.stat===Xp.NOPROXY&&me(mn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{A.n_()},0),A}}function Dp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kh(n){return new oO(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gT{constructor(e,t,a=1e3,i=1.5,l=6e4){this.bi=e,this.timerId=t,this.u_=a,this.c_=i,this.l_=l,this.h_=0,this.P_=null,this.T_=Date.now(),this.reset()}reset(){this.h_=0}I_(){this.h_=this.l_}E_(e){this.cancel();const t=Math.floor(this.h_+this.d_()),a=Math.max(0,Date.now()-this.T_),i=Math.max(0,t-a);i>0&&me("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.h_} ms, delay with jitter: ${t} ms, last attempt: ${a} ms ago)`),this.P_=this.bi.enqueueAfterDelay(this.timerId,i,()=>(this.T_=Date.now(),e())),this.h_*=this.c_,this.h_<this.u_&&(this.h_=this.u_),this.h_>this.l_&&(this.h_=this.l_)}A_(){this.P_!==null&&(this.P_.skipDelay(),this.P_=null)}cancel(){this.P_!==null&&(this.P_.cancel(),this.P_=null)}d_(){return(Math.random()-.5)*this.h_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pE="PersistentStream";class yT{constructor(e,t,a,i,l,u,m,p){this.bi=e,this.R_=a,this.V_=i,this.connection=l,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=m,this.listener=p,this.state=0,this.m_=0,this.f_=null,this.g_=null,this.stream=null,this.p_=0,this.y_=new gT(e,t)}w_(){return this.state===1||this.state===5||this.b_()}b_(){return this.state===2||this.state===3}start(){this.p_=0,this.state!==4?this.auth():this.S_()}async stop(){this.w_()&&await this.close(0)}D_(){this.state=0,this.y_.reset()}v_(){this.b_()&&this.f_===null&&(this.f_=this.bi.enqueueAfterDelay(this.R_,6e4,()=>this.C_()))}F_(e){this.M_(),this.stream.send(e)}async C_(){if(this.b_())return this.close(0)}M_(){this.f_&&(this.f_.cancel(),this.f_=null)}x_(){this.g_&&(this.g_.cancel(),this.g_=null)}async close(e,t){this.M_(),this.x_(),this.y_.cancel(),this.m_++,e!==4?this.y_.reset():t&&t.code===ne.RESOURCE_EXHAUSTED?(Da(t.toString()),Da("Using maximum backoff delay to prevent overloading the backend."),this.y_.I_()):t&&t.code===ne.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.O_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Zo(t)}O_(){}auth(){this.state=1;const e=this.N_(this.m_),t=this.m_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([a,i])=>{this.m_===t&&this.B_(a,i)},a=>{e(()=>{const i=new fe(ne.UNKNOWN,"Fetching auth token failed: "+a.message);return this.L_(i)})})}B_(e,t){const a=this.N_(this.m_);this.stream=this.k_(e,t),this.stream.jo(()=>{a(()=>this.listener.jo())}),this.stream.Jo(()=>{a(()=>(this.state=2,this.g_=this.bi.enqueueAfterDelay(this.V_,1e4,()=>(this.b_()&&(this.state=3),Promise.resolve())),this.listener.Jo()))}),this.stream.Zo(i=>{a(()=>this.L_(i))}),this.stream.onMessage(i=>{a(()=>++this.p_==1?this.q_(i):this.onNext(i))})}S_(){this.state=5,this.y_.E_(async()=>{this.state=0,this.start()})}L_(e){return me(pE,`close with error: ${e}`),this.stream=null,this.close(4,e)}N_(e){return t=>{this.bi.enqueueAndForget(()=>this.m_===e?t():(me(pE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class aD extends yT{constructor(e,t,a,i,l,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,a,i,u),this.serializer=l}k_(e,t){return this.connection.a_("Listen",e,t)}q_(e){return this.onNext(e)}onNext(e){this.y_.reset();const t=uO(this.serializer,e),a=function(l){if(!("targetChange"in l))return Oe.min();const u=l.targetChange;return u.targetIds&&u.targetIds.length?Oe.min():u.readTime?Wr(u.readTime):Oe.min()}(e);return this.listener.Q_(t,a)}U_(e){const t={};t.database=og(this.serializer),t.addTarget=function(l,u){let m;const p=u.target;if(m=ng(p)?{documents:fO(l,p)}:{query:mO(l,p).gt},m.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){m.resumeToken=sT(l,u.resumeToken);const y=ag(l,u.expectedCount);y!==null&&(m.expectedCount=y)}else if(u.snapshotVersion.compareTo(Oe.min())>0){m.readTime=Eh(l,u.snapshotVersion.toTimestamp());const y=ag(l,u.expectedCount);y!==null&&(m.expectedCount=y)}return m}(this.serializer,e);const a=gO(this.serializer,e);a&&(t.labels=a),this.F_(t)}K_(e){const t={};t.database=og(this.serializer),t.removeTarget=e,this.F_(t)}}class sD extends yT{constructor(e,t,a,i,l,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,a,i,u),this.serializer=l}get W_(){return this.p_>0}start(){this.lastStreamToken=void 0,super.start()}O_(){this.W_&&this.G_([])}k_(e,t){return this.connection.a_("Write",e,t)}q_(e){return et(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,et(!e.writeResults||e.writeResults.length===0,55816),this.listener.z_()}onNext(e){et(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.y_.reset();const t=hO(e.writeResults,e.commitTime),a=Wr(e.commitTime);return this.listener.j_(a,t)}H_(){const e={};e.database=og(this.serializer),this.F_(e)}G_(e){const t={streamToken:this.lastStreamToken,writes:e.map(a=>dO(this.serializer,a))};this.F_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iD{}class oD extends iD{constructor(e,t,a,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=a,this.serializer=i,this.J_=!1}Y_(){if(this.J_)throw new fe(ne.FAILED_PRECONDITION,"The client has already been terminated.")}Qo(e,t,a,i){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,u])=>this.connection.Qo(e,sg(t,a),i,l,u)).catch(l=>{throw l.name==="FirebaseError"?(l.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new fe(ne.UNKNOWN,l.toString())})}Wo(e,t,a,i,l){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,m])=>this.connection.Wo(e,sg(t,a),i,u,m,l)).catch(u=>{throw u.name==="FirebaseError"?(u.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new fe(ne.UNKNOWN,u.toString())})}terminate(){this.J_=!0,this.connection.terminate()}}class lD{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.Z_=0,this.X_=null,this.ea=!0}ta(){this.Z_===0&&(this.na("Unknown"),this.X_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.X_=null,this.ra("Backend didn't respond within 10 seconds."),this.na("Offline"),Promise.resolve())))}ia(e){this.state==="Online"?this.na("Unknown"):(this.Z_++,this.Z_>=1&&(this.sa(),this.ra(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.na("Offline")))}set(e){this.sa(),this.Z_=0,e==="Online"&&(this.ea=!1),this.na(e)}na(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ra(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ea?(Da(t),this.ea=!1):me("OnlineStateTracker",t)}sa(){this.X_!==null&&(this.X_.cancel(),this.X_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ii="RemoteStore";class cD{constructor(e,t,a,i,l){this.localStore=e,this.datastore=t,this.asyncQueue=a,this.remoteSyncer={},this.oa=[],this._a=new Map,this.aa=new Set,this.ua=[],this.ca=l,this.ca.vo(u=>{a.enqueueAndForget(async()=>{Mi(this)&&(me(Ii,"Restarting streams for network reachability change."),await async function(p){const y=De(p);y.aa.add(4),await au(y),y.la.set("Unknown"),y.aa.delete(4),await Qh(y)}(this))})}),this.la=new lD(a,i)}}async function Qh(n){if(Mi(n))for(const e of n.ua)await e(!0)}async function au(n){for(const e of n.ua)await e(!1)}function vT(n,e){const t=De(n);t._a.has(e.targetId)||(t._a.set(e.targetId,e),oy(t)?iy(t):il(t).b_()&&sy(t,e))}function ay(n,e){const t=De(n),a=il(t);t._a.delete(e),a.b_()&&_T(t,e),t._a.size===0&&(a.b_()?a.v_():Mi(t)&&t.la.set("Unknown"))}function sy(n,e){if(n.ha.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Oe.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}il(n).U_(e)}function _T(n,e){n.ha.Ke(e),il(n).K_(e)}function iy(n){n.ha=new rO({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>n._a.get(e)||null,Pt:()=>n.datastore.serializer.databaseId}),il(n).start(),n.la.ta()}function oy(n){return Mi(n)&&!il(n).w_()&&n._a.size>0}function Mi(n){return De(n).aa.size===0}function bT(n){n.ha=void 0}async function uD(n){n.la.set("Online")}async function dD(n){n._a.forEach((e,t)=>{sy(n,e)})}async function hD(n,e){bT(n),oy(n)?(n.la.ia(e),iy(n)):n.la.set("Unknown")}async function fD(n,e,t){if(n.la.set("Online"),e instanceof aT&&e.state===2&&e.cause)try{await async function(i,l){const u=l.cause;for(const m of l.targetIds)i._a.has(m)&&(await i.remoteSyncer.rejectListen(m,u),i._a.delete(m),i.ha.removeTarget(m))}(n,e)}catch(a){me(Ii,"Failed to remove targets %s: %s ",e.targetIds.join(","),a),await Th(n,a)}else if(e instanceof Jd?n.ha.Xe(e):e instanceof rT?n.ha.ot(e):n.ha.nt(e),!t.isEqual(Oe.min()))try{const a=await pT(n.localStore);t.compareTo(a)>=0&&await function(l,u){const m=l.ha.It(u);return m.targetChanges.forEach((p,y)=>{if(p.resumeToken.approximateByteSize()>0){const v=l._a.get(y);v&&l._a.set(y,v.withResumeToken(p.resumeToken,u))}}),m.targetMismatches.forEach((p,y)=>{const v=l._a.get(p);if(!v)return;l._a.set(p,v.withResumeToken(cn.EMPTY_BYTE_STRING,v.snapshotVersion)),_T(l,p);const b=new _s(v.target,p,y,v.sequenceNumber);sy(l,b)}),l.remoteSyncer.applyRemoteEvent(m)}(n,t)}catch(a){me(Ii,"Failed to raise snapshot:",a),await Th(n,a)}}async function Th(n,e,t){if(!al(e))throw e;n.aa.add(1),await au(n),n.la.set("Offline"),t||(t=()=>pT(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{me(Ii,"Retrying IndexedDB access"),await t(),n.aa.delete(1),await Qh(n)})}function ET(n,e){return e().catch(t=>Th(n,t,e))}async function Wh(n){const e=De(n),t=Is(e);let a=e.oa.length>0?e.oa[e.oa.length-1].batchId:Fg;for(;mD(e);)try{const i=await QO(e.localStore,a);if(i===null){e.oa.length===0&&t.v_();break}a=i.batchId,pD(e,i)}catch(i){await Th(e,i)}xT(e)&&TT(e)}function mD(n){return Mi(n)&&n.oa.length<10}function pD(n,e){n.oa.push(e);const t=Is(n);t.b_()&&t.W_&&t.G_(e.mutations)}function xT(n){return Mi(n)&&!Is(n).w_()&&n.oa.length>0}function TT(n){Is(n).start()}async function gD(n){Is(n).H_()}async function yD(n){const e=Is(n);for(const t of n.oa)e.G_(t.mutations)}async function vD(n,e,t){const a=n.oa.shift(),i=Xg.from(a,e,t);await ET(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await Wh(n)}async function _D(n,e){e&&Is(n).W_&&await async function(a,i){if(function(u){return tO(u)&&u!==ne.ABORTED}(i.code)){const l=a.oa.shift();Is(a).D_(),await ET(a,()=>a.remoteSyncer.rejectFailedWrite(l.batchId,i)),await Wh(a)}}(n,e),xT(n)&&TT(n)}async function gE(n,e){const t=De(n);t.asyncQueue.verifyOperationInProgress(),me(Ii,"RemoteStore received new credentials");const a=Mi(t);t.aa.add(3),await au(t),a&&t.la.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.aa.delete(3),await Qh(t)}async function bD(n,e){const t=De(n);e?(t.aa.delete(2),await Qh(t)):e||(t.aa.add(2),await au(t),t.la.set("Unknown"))}function il(n){return n.Pa||(n.Pa=function(t,a,i){const l=De(t);return l.Y_(),new aD(a,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,i)}(n.datastore,n.asyncQueue,{jo:uD.bind(null,n),Jo:dD.bind(null,n),Zo:hD.bind(null,n),Q_:fD.bind(null,n)}),n.ua.push(async e=>{e?(n.Pa.D_(),oy(n)?iy(n):n.la.set("Unknown")):(await n.Pa.stop(),bT(n))})),n.Pa}function Is(n){return n.Ta||(n.Ta=function(t,a,i){const l=De(t);return l.Y_(),new sD(a,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,i)}(n.datastore,n.asyncQueue,{jo:()=>Promise.resolve(),Jo:gD.bind(null,n),Zo:_D.bind(null,n),z_:yD.bind(null,n),j_:vD.bind(null,n)}),n.ua.push(async e=>{e?(n.Ta.D_(),await Wh(n)):(await n.Ta.stop(),n.oa.length>0&&(me(Ii,`Stopping write stream with ${n.oa.length} pending writes`),n.oa=[]))})),n.Ta}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ly{constructor(e,t,a,i,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=a,this.op=i,this.removalCallback=l,this.deferred=new Ca,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,a,i,l){const u=Date.now()+a,m=new ly(e,t,u,i,l);return m.start(a),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new fe(ne.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function cy(n,e){if(Da("AsyncQueue",`${e}: ${n}`),al(n))return new fe(ne.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{static emptySet(e){return new Vo(e.comparator)}constructor(e){this.comparator=e?(t,a)=>e(t,a)||xe.comparator(t.key,a.key):(t,a)=>xe.comparator(t.key,a.key),this.keyedMap=wc(),this.sortedSet=new Et(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,a)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Vo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),a=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,l=a.getNext().key;if(!i.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const a=new Vo;return a.comparator=this.comparator,a.keyedMap=e,a.sortedSet=t,a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yE{constructor(){this.Ia=new Et(xe.comparator)}track(e){const t=e.doc.key,a=this.Ia.get(t);a?e.type!==0&&a.type===3?this.Ia=this.Ia.insert(t,e):e.type===3&&a.type!==1?this.Ia=this.Ia.insert(t,{type:a.type,doc:e.doc}):e.type===2&&a.type===2?this.Ia=this.Ia.insert(t,{type:2,doc:e.doc}):e.type===2&&a.type===0?this.Ia=this.Ia.insert(t,{type:0,doc:e.doc}):e.type===1&&a.type===0?this.Ia=this.Ia.remove(t):e.type===1&&a.type===2?this.Ia=this.Ia.insert(t,{type:1,doc:a.doc}):e.type===0&&a.type===1?this.Ia=this.Ia.insert(t,{type:2,doc:e.doc}):Ce(63341,{Vt:e,Ea:a}):this.Ia=this.Ia.insert(t,e)}da(){const e=[];return this.Ia.inorderTraversal((t,a)=>{e.push(a)}),e}}class Ko{constructor(e,t,a,i,l,u,m,p,y){this.query=e,this.docs=t,this.oldDocs=a,this.docChanges=i,this.mutatedKeys=l,this.fromCache=u,this.syncStateChanged=m,this.excludesMetadataChanges=p,this.hasCachedResults=y}static fromInitialDocuments(e,t,a,i,l){const u=[];return t.forEach(m=>{u.push({type:0,doc:m})}),new Ko(e,t,Vo.emptySet(t),u,a,i,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Fh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,a=e.docChanges;if(t.length!==a.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==a[i].type||!t[i].doc.isEqual(a[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ED{constructor(){this.Aa=void 0,this.Ra=[]}Va(){return this.Ra.some(e=>e.ma())}}class xD{constructor(){this.queries=vE(),this.onlineState="Unknown",this.fa=new Set}terminate(){(function(t,a){const i=De(t),l=i.queries;i.queries=vE(),l.forEach((u,m)=>{for(const p of m.Ra)p.onError(a)})})(this,new fe(ne.ABORTED,"Firestore shutting down"))}}function vE(){return new Pi(n=>Hx(n),Fh)}async function wT(n,e){const t=De(n);let a=3;const i=e.query;let l=t.queries.get(i);l?!l.Va()&&e.ma()&&(a=2):(l=new ED,a=e.ma()?0:1);try{switch(a){case 0:l.Aa=await t.onListen(i,!0);break;case 1:l.Aa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(u){const m=cy(u,`Initialization of query '${Oo(e.query)}' failed`);return void e.onError(m)}t.queries.set(i,l),l.Ra.push(e),e.ga(t.onlineState),l.Aa&&e.pa(l.Aa)&&uy(t)}async function AT(n,e){const t=De(n),a=e.query;let i=3;const l=t.queries.get(a);if(l){const u=l.Ra.indexOf(e);u>=0&&(l.Ra.splice(u,1),l.Ra.length===0?i=e.ma()?0:1:!l.Va()&&e.ma()&&(i=2))}switch(i){case 0:return t.queries.delete(a),t.onUnlisten(a,!0);case 1:return t.queries.delete(a),t.onUnlisten(a,!1);case 2:return t.onLastRemoteStoreUnlisten(a);default:return}}function TD(n,e){const t=De(n);let a=!1;for(const i of e){const l=i.query,u=t.queries.get(l);if(u){for(const m of u.Ra)m.pa(i)&&(a=!0);u.Aa=i}}a&&uy(t)}function wD(n,e,t){const a=De(n),i=a.queries.get(e);if(i)for(const l of i.Ra)l.onError(t);a.queries.delete(e)}function uy(n){n.fa.forEach(e=>{e.next()})}var ug,_E;(_E=ug||(ug={})).ya="default",_E.Cache="cache";class ST{constructor(e,t,a){this.query=e,this.wa=t,this.ba=!1,this.Sa=null,this.onlineState="Unknown",this.options=a||{}}pa(e){if(!this.options.includeMetadataChanges){const a=[];for(const i of e.docChanges)i.type!==3&&a.push(i);e=new Ko(e.query,e.docs,e.oldDocs,a,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ba?this.Da(e)&&(this.wa.next(e),t=!0):this.va(e,this.onlineState)&&(this.Ca(e),t=!0),this.Sa=e,t}onError(e){this.wa.error(e)}ga(e){this.onlineState=e;let t=!1;return this.Sa&&!this.ba&&this.va(this.Sa,e)&&(this.Ca(this.Sa),t=!0),t}va(e,t){if(!e.fromCache||!this.ma())return!0;const a=t!=="Offline";return(!this.options.Fa||!a)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Da(e){if(e.docChanges.length>0)return!0;const t=this.Sa&&this.Sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Ca(e){e=Ko.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ba=!0,this.wa.next(e)}ma(){return this.options.source!==ug.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NT{constructor(e){this.key=e}}class CT{constructor(e){this.key=e}}class AD{constructor(e,t){this.query=e,this.qa=t,this.Qa=null,this.hasCachedResults=!1,this.current=!1,this.$a=$e(),this.mutatedKeys=$e(),this.Ua=$x(e),this.Ka=new Vo(this.Ua)}get Wa(){return this.qa}Ga(e,t){const a=t?t.za:new yE,i=t?t.Ka:this.Ka;let l=t?t.mutatedKeys:this.mutatedKeys,u=i,m=!1;const p=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,y=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((v,b)=>{const T=i.get(v),C=Hh(this.query,b)?b:null,A=!!T&&this.mutatedKeys.has(T.key),M=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations);let I=!1;T&&C?T.data.isEqual(C.data)?A!==M&&(a.track({type:3,doc:C}),I=!0):this.ja(T,C)||(a.track({type:2,doc:C}),I=!0,(p&&this.Ua(C,p)>0||y&&this.Ua(C,y)<0)&&(m=!0)):!T&&C?(a.track({type:0,doc:C}),I=!0):T&&!C&&(a.track({type:1,doc:T}),I=!0,(p||y)&&(m=!0)),I&&(C?(u=u.add(C),l=M?l.add(v):l.delete(v)):(u=u.delete(v),l=l.delete(v)))}),this.query.limit!==null)for(;u.size>this.query.limit;){const v=this.query.limitType==="F"?u.last():u.first();u=u.delete(v.key),l=l.delete(v.key),a.track({type:1,doc:v})}return{Ka:u,za:a,ys:m,mutatedKeys:l}}ja(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,a,i){const l=this.Ka;this.Ka=e.Ka,this.mutatedKeys=e.mutatedKeys;const u=e.za.da();u.sort((v,b)=>function(C,A){const M=I=>{switch(I){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ce(20277,{Vt:I})}};return M(C)-M(A)}(v.type,b.type)||this.Ua(v.doc,b.doc)),this.Ha(a),i=i!=null&&i;const m=t&&!i?this.Ja():[],p=this.$a.size===0&&this.current&&!i?1:0,y=p!==this.Qa;return this.Qa=p,u.length!==0||y?{snapshot:new Ko(this.query,e.Ka,l,u,e.mutatedKeys,p===0,y,!1,!!a&&a.resumeToken.approximateByteSize()>0),Ya:m}:{Ya:m}}ga(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ka:this.Ka,za:new yE,mutatedKeys:this.mutatedKeys,ys:!1},!1)):{Ya:[]}}Za(e){return!this.qa.has(e)&&!!this.Ka.has(e)&&!this.Ka.get(e).hasLocalMutations}Ha(e){e&&(e.addedDocuments.forEach(t=>this.qa=this.qa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.qa=this.qa.delete(t)),this.current=e.current)}Ja(){if(!this.current)return[];const e=this.$a;this.$a=$e(),this.Ka.forEach(a=>{this.Za(a.key)&&(this.$a=this.$a.add(a.key))});const t=[];return e.forEach(a=>{this.$a.has(a)||t.push(new CT(a))}),this.$a.forEach(a=>{e.has(a)||t.push(new NT(a))}),t}Xa(e){this.qa=e.Ns,this.$a=$e();const t=this.Ga(e.documents);return this.applyChanges(t,!0)}eu(){return Ko.fromInitialDocuments(this.query,this.Ka,this.mutatedKeys,this.Qa===0,this.hasCachedResults)}}const dy="SyncEngine";class SD{constructor(e,t,a){this.query=e,this.targetId=t,this.view=a}}class ND{constructor(e){this.key=e,this.tu=!1}}class CD{constructor(e,t,a,i,l,u){this.localStore=e,this.remoteStore=t,this.eventManager=a,this.sharedClientState=i,this.currentUser=l,this.maxConcurrentLimboResolutions=u,this.nu={},this.ru=new Pi(m=>Hx(m),Fh),this.iu=new Map,this.su=new Set,this.ou=new Et(xe.comparator),this._u=new Map,this.au=new ey,this.uu={},this.cu=new Map,this.lu=Yo.ir(),this.onlineState="Unknown",this.hu=void 0}get isPrimaryClient(){return this.hu===!0}}async function RD(n,e,t=!0){const a=PT(n);let i;const l=a.ru.get(e);return l?(a.sharedClientState.addLocalQueryTarget(l.targetId),i=l.view.eu()):i=await RT(a,e,t,!0),i}async function ID(n,e){const t=PT(n);await RT(t,e,!0,!1)}async function RT(n,e,t,a){const i=await WO(n.localStore,Qr(e)),l=i.targetId,u=n.sharedClientState.addLocalQueryTarget(l,t);let m;return a&&(m=await OD(n,e,l,u==="current",i.resumeToken)),n.isPrimaryClient&&t&&vT(n.remoteStore,i),m}async function OD(n,e,t,a,i){n.Pu=(b,T,C)=>async function(M,I,H,W){let q=I.view.Ga(H);q.ys&&(q=await dE(M.localStore,I.query,!1).then(({documents:k})=>I.view.Ga(k,q)));const ie=W&&W.targetChanges.get(I.targetId),le=W&&W.targetMismatches.get(I.targetId)!=null,pe=I.view.applyChanges(q,M.isPrimaryClient,ie,le);return EE(M,I.targetId,pe.Ya),pe.snapshot}(n,b,T,C);const l=await dE(n.localStore,e,!0),u=new AD(e,l.Ns),m=u.Ga(l.documents),p=ru.createSynthesizedTargetChangeForCurrentChange(t,a&&n.onlineState!=="Offline",i),y=u.applyChanges(m,n.isPrimaryClient,p);EE(n,t,y.Ya);const v=new SD(e,t,u);return n.ru.set(e,v),n.iu.has(t)?n.iu.get(t).push(e):n.iu.set(t,[e]),y.snapshot}async function DD(n,e,t){const a=De(n),i=a.ru.get(e),l=a.iu.get(i.targetId);if(l.length>1)return a.iu.set(i.targetId,l.filter(u=>!Fh(u,e))),void a.ru.delete(e);a.isPrimaryClient?(a.sharedClientState.removeLocalQueryTarget(i.targetId),a.sharedClientState.isActiveQueryTarget(i.targetId)||await lg(a.localStore,i.targetId,!1).then(()=>{a.sharedClientState.clearQueryState(i.targetId),t&&ay(a.remoteStore,i.targetId),dg(a,i.targetId)}).catch(rl)):(dg(a,i.targetId),await lg(a.localStore,i.targetId,!0))}async function jD(n,e){const t=De(n),a=t.ru.get(e),i=t.iu.get(a.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(a.targetId),ay(t.remoteStore,a.targetId))}async function PD(n,e,t){const a=BD(n);try{const i=await function(u,m){const p=De(u),y=qt.now(),v=m.reduce((C,A)=>C.add(A.key),$e());let b,T;return p.persistence.runTransaction("Locally write mutations","readwrite",C=>{let A=ja(),M=$e();return p.Cs.getEntries(C,v).next(I=>{A=I,A.forEach((H,W)=>{W.isValidDocument()||(M=M.add(H))})}).next(()=>p.localDocuments.getOverlayedDocuments(C,A)).next(I=>{b=I;const H=[];for(const W of m){const q=W4(W,b.get(W.key).overlayedDocument);q!=null&&H.push(new ks(W.key,q,kx(q.value.mapValue),cr.exists(!0)))}return p.mutationQueue.addMutationBatch(C,y,H,m)}).next(I=>{T=I;const H=I.applyToLocalDocumentSet(b,M);return p.documentOverlayCache.saveOverlays(C,I.batchId,H)})}).then(()=>({batchId:T.batchId,changes:Yx(b)}))}(a.localStore,e);a.sharedClientState.addPendingMutation(i.batchId),function(u,m,p){let y=u.uu[u.currentUser.toKey()];y||(y=new Et(Ve)),y=y.insert(m,p),u.uu[u.currentUser.toKey()]=y}(a,i.batchId,t),await su(a,i.changes),await Wh(a.remoteStore)}catch(i){const l=cy(i,"Failed to persist write");t.reject(l)}}async function IT(n,e){const t=De(n);try{const a=await YO(t.localStore,e);e.targetChanges.forEach((i,l)=>{const u=t._u.get(l);u&&(et(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?u.tu=!0:i.modifiedDocuments.size>0?et(u.tu,14607):i.removedDocuments.size>0&&(et(u.tu,42227),u.tu=!1))}),await su(t,a,e)}catch(a){await rl(a)}}function bE(n,e,t){const a=De(n);if(a.isPrimaryClient&&t===0||!a.isPrimaryClient&&t===1){const i=[];a.ru.forEach((l,u)=>{const m=u.view.ga(e);m.snapshot&&i.push(m.snapshot)}),function(u,m){const p=De(u);p.onlineState=m;let y=!1;p.queries.forEach((v,b)=>{for(const T of b.Ra)T.ga(m)&&(y=!0)}),y&&uy(p)}(a.eventManager,e),i.length&&a.nu.Q_(i),a.onlineState=e,a.isPrimaryClient&&a.sharedClientState.setOnlineState(e)}}async function MD(n,e,t){const a=De(n);a.sharedClientState.updateQueryState(e,"rejected",t);const i=a._u.get(e),l=i&&i.key;if(l){let u=new Et(xe.comparator);u=u.insert(l,gn.newNoDocument(l,Oe.min()));const m=$e().add(l),p=new Yh(Oe.min(),new Map,new Et(Ve),u,m);await IT(a,p),a.ou=a.ou.remove(l),a._u.delete(e),hy(a)}else await lg(a.localStore,e,!1).then(()=>dg(a,e,t)).catch(rl)}async function kD(n,e){const t=De(n),a=e.batch.batchId;try{const i=await GO(t.localStore,e);DT(t,a,null),OT(t,a),t.sharedClientState.updateMutationState(a,"acknowledged"),await su(t,i)}catch(i){await rl(i)}}async function LD(n,e,t){const a=De(n);try{const i=await function(u,m){const p=De(u);return p.persistence.runTransaction("Reject batch","readwrite-primary",y=>{let v;return p.mutationQueue.lookupMutationBatch(y,m).next(b=>(et(b!==null,37113),v=b.keys(),p.mutationQueue.removeMutationBatch(y,b))).next(()=>p.mutationQueue.performConsistencyCheck(y)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(y,v,m)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,v)).next(()=>p.localDocuments.getDocuments(y,v))})}(a.localStore,e);DT(a,e,t),OT(a,e),a.sharedClientState.updateMutationState(e,"rejected",t),await su(a,i)}catch(i){await rl(i)}}function OT(n,e){(n.cu.get(e)||[]).forEach(t=>{t.resolve()}),n.cu.delete(e)}function DT(n,e,t){const a=De(n);let i=a.uu[a.currentUser.toKey()];if(i){const l=i.get(e);l&&(t?l.reject(t):l.resolve(),i=i.remove(e)),a.uu[a.currentUser.toKey()]=i}}function dg(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const a of n.iu.get(e))n.ru.delete(a),t&&n.nu.Tu(a,t);n.iu.delete(e),n.isPrimaryClient&&n.au.Ur(e).forEach(a=>{n.au.containsKey(a)||jT(n,a)})}function jT(n,e){n.su.delete(e.path.canonicalString());const t=n.ou.get(e);t!==null&&(ay(n.remoteStore,t),n.ou=n.ou.remove(e),n._u.delete(t),hy(n))}function EE(n,e,t){for(const a of t)a instanceof NT?(n.au.addReference(a.key,e),VD(n,a)):a instanceof CT?(me(dy,"Document no longer in limbo: "+a.key),n.au.removeReference(a.key,e),n.au.containsKey(a.key)||jT(n,a.key)):Ce(19791,{Iu:a})}function VD(n,e){const t=e.key,a=t.path.canonicalString();n.ou.get(t)||n.su.has(a)||(me(dy,"New document in limbo: "+t),n.su.add(a),hy(n))}function hy(n){for(;n.su.size>0&&n.ou.size<n.maxConcurrentLimboResolutions;){const e=n.su.values().next().value;n.su.delete(e);const t=new xe(mt.fromString(e)),a=n.lu.next();n._u.set(a,new ND(t)),n.ou=n.ou.insert(t,a),vT(n.remoteStore,new _s(Qr(Kg(t.path)),a,"TargetPurposeLimboResolution",zh.le))}}async function su(n,e,t){const a=De(n),i=[],l=[],u=[];a.ru.isEmpty()||(a.ru.forEach((m,p)=>{u.push(a.Pu(p,e,t).then(y=>{var v;if((y||t)&&a.isPrimaryClient){const b=y?!y.fromCache:(v=t==null?void 0:t.targetChanges.get(p.targetId))===null||v===void 0?void 0:v.current;a.sharedClientState.updateQueryState(p.targetId,b?"current":"not-current")}if(y){i.push(y);const b=ny.Ps(p.targetId,y);l.push(b)}}))}),await Promise.all(u),a.nu.Q_(i),await async function(p,y){const v=De(p);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",b=>ae.forEach(y,T=>ae.forEach(T.ls,C=>v.persistence.referenceDelegate.addReference(b,T.targetId,C)).next(()=>ae.forEach(T.hs,C=>v.persistence.referenceDelegate.removeReference(b,T.targetId,C)))))}catch(b){if(!al(b))throw b;me(ry,"Failed to update sequence numbers: "+b)}for(const b of y){const T=b.targetId;if(!b.fromCache){const C=v.Ss.get(T),A=C.snapshotVersion,M=C.withLastLimboFreeSnapshotVersion(A);v.Ss=v.Ss.insert(T,M)}}}(a.localStore,l))}async function UD(n,e){const t=De(n);if(!t.currentUser.isEqual(e)){me(dy,"User change. New user:",e.toKey());const a=await mT(t.localStore,e);t.currentUser=e,function(l,u){l.cu.forEach(m=>{m.forEach(p=>{p.reject(new fe(ne.CANCELLED,u))})}),l.cu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,a.removedBatchIds,a.addedBatchIds),await su(t,a.Ms)}}function zD(n,e){const t=De(n),a=t._u.get(e);if(a&&a.tu)return $e().add(a.key);{let i=$e();const l=t.iu.get(e);if(!l)return i;for(const u of l){const m=t.ru.get(u);i=i.unionWith(m.view.Wa)}return i}}function PT(n){const e=De(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=IT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=zD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=MD.bind(null,e),e.nu.Q_=TD.bind(null,e.eventManager),e.nu.Tu=wD.bind(null,e.eventManager),e}function BD(n){const e=De(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=kD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=LD.bind(null,e),e}class wh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Kh(e.databaseInfo.databaseId),this.sharedClientState=this.Au(e),this.persistence=this.Ru(e),await this.persistence.start(),this.localStore=this.Vu(e),this.gcScheduler=this.mu(e,this.localStore),this.indexBackfillerScheduler=this.fu(e,this.localStore)}mu(e,t){return null}fu(e,t){return null}Vu(e){return $O(this.persistence,new qO,e.initialUser,this.serializer)}Ru(e){return new fT(ty.Ei,this.serializer)}Au(e){return new ZO}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}wh.provider={build:()=>new wh};class qD extends wh{constructor(e){super(),this.cacheSizeBytes=e}mu(e,t){et(this.persistence.referenceDelegate instanceof xh,46915);const a=this.persistence.referenceDelegate.garbageCollector;return new NO(a,e.asyncQueue,t)}Ru(e){const t=this.cacheSizeBytes!==void 0?On.withCacheSize(this.cacheSizeBytes):On.DEFAULT;return new fT(a=>xh.Ei(a,t),this.serializer)}}class hg{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=a=>bE(this.syncEngine,a,1),this.remoteStore.remoteSyncer.handleCredentialChange=UD.bind(null,this.syncEngine),await bD(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new xD}()}createDatastore(e){const t=Kh(e.databaseInfo.databaseId),a=function(l){return new rD(l)}(e.databaseInfo);return function(l,u,m,p){return new oD(l,u,m,p)}(e.authCredentials,e.appCheckCredentials,a,t)}createRemoteStore(e){return function(a,i,l,u,m){return new cD(a,i,l,u,m)}(this.localStore,this.datastore,e.asyncQueue,t=>bE(this.syncEngine,t,0),function(){return mE.C()?new mE:new JO}())}createSyncEngine(e,t){return function(i,l,u,m,p,y,v){const b=new CD(i,l,u,m,p,y);return v&&(b.hu=!0),b}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(i){const l=De(i);me(Ii,"RemoteStore shutting down."),l.aa.add(5),await au(l),l.ca.shutdown(),l.la.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}hg.provider={build:()=>new hg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MT{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.pu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.pu(this.observer.error,e):Da("Uncaught Error in snapshot listener:",e.toString()))}yu(){this.muted=!0}pu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Os="FirestoreClient";class FD{constructor(e,t,a,i,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=a,this.databaseInfo=i,this.user=pn.UNAUTHENTICATED,this.clientId=Sx.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(a,async u=>{me(Os,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u}),this.appCheckCredentials.start(a,u=>(me(Os,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ca;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const a=cy(t,"Failed to shutdown persistence");e.reject(a)}}),e.promise}}async function jp(n,e){n.asyncQueue.verifyOperationInProgress(),me(Os,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let a=t.initialUser;n.setCredentialChangeListener(async i=>{a.isEqual(i)||(await mT(e.localStore,i),a=i)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function xE(n,e){n.asyncQueue.verifyOperationInProgress();const t=await HD(n);me(Os,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(a=>gE(e.remoteStore,a)),n.setAppCheckTokenChangeListener((a,i)=>gE(e.remoteStore,i)),n._onlineComponents=e}async function HD(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){me(Os,"Using user provided OfflineComponentProvider");try{await jp(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(i){return i.name==="FirebaseError"?i.code===ne.FAILED_PRECONDITION||i.code===ne.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Fo("Error using user provided cache. Falling back to memory cache: "+t),await jp(n,new wh)}}else me(Os,"Using default OfflineComponentProvider"),await jp(n,new qD(void 0));return n._offlineComponents}async function kT(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(me(Os,"Using user provided OnlineComponentProvider"),await xE(n,n._uninitializedComponentsProvider._online)):(me(Os,"Using default OnlineComponentProvider"),await xE(n,new hg))),n._onlineComponents}function $D(n){return kT(n).then(e=>e.syncEngine)}async function LT(n){const e=await kT(n),t=e.eventManager;return t.onListen=RD.bind(null,e.syncEngine),t.onUnlisten=DD.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=ID.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=jD.bind(null,e.syncEngine),t}function GD(n,e,t={}){const a=new Ca;return n.asyncQueue.enqueueAndForget(async()=>function(l,u,m,p,y){const v=new MT({next:T=>{v.yu(),u.enqueueAndForget(()=>AT(l,b));const C=T.docs.has(m);!C&&T.fromCache?y.reject(new fe(ne.UNAVAILABLE,"Failed to get document because the client is offline.")):C&&T.fromCache&&p&&p.source==="server"?y.reject(new fe(ne.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(T)},error:T=>y.reject(T)}),b=new ST(Kg(m.path),v,{includeMetadataChanges:!0,Fa:!0});return wT(l,b)}(await LT(n),n.asyncQueue,e,t,a)),a.promise}function YD(n,e,t={}){const a=new Ca;return n.asyncQueue.enqueueAndForget(async()=>function(l,u,m,p,y){const v=new MT({next:T=>{v.yu(),u.enqueueAndForget(()=>AT(l,b)),T.fromCache&&p.source==="server"?y.reject(new fe(ne.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(T)},error:T=>y.reject(T)}),b=new ST(m,v,{includeMetadataChanges:!0,Fa:!0});return wT(l,b)}(await LT(n),n.asyncQueue,e,t,a)),a.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VT(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TE=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UT(n,e,t){if(!t)throw new fe(ne.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function KD(n,e,t,a){if(e===!0&&a===!0)throw new fe(ne.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function wE(n){if(!xe.isDocumentKey(n))throw new fe(ne.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function AE(n){if(xe.isDocumentKey(n))throw new fe(ne.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Xh(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(a){return a.constructor?a.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ce(12329,{type:typeof n})}function xr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new fe(ne.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Xh(n);throw new fe(ne.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function QD(n,e){if(e<=0)throw new fe(ne.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zT="firestore.googleapis.com",SE=!0;class NE{constructor(e){var t,a;if(e.host===void 0){if(e.ssl!==void 0)throw new fe(ne.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=zT,this.ssl=SE}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:SE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=hT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<AO)throw new fe(ne.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}KD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=VT((a=e.experimentalLongPollingOptions)!==null&&a!==void 0?a:{}),function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new fe(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new fe(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new fe(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(a,i){return a.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Zh{constructor(e,t,a,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=a,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new NE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new fe(ne.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new fe(ne.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new NE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(a){if(!a)return new t4;switch(a.type){case"firstParty":return new s4(a.sessionIndex||"0",a.iamToken||null,a.authTokenFactory||null);case"provider":return a.client;default:throw new fe(ne.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,kh("Firestore",this._settings.isUsingEmulator),this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const a=TE.get(t);a&&(me("ComponentProvider","Removing Datastore"),TE.delete(t),a.terminate())}(this),Promise.resolve()}}function WD(n,e,t,a={}){var i;n=xr(n,Zh);const l=Qc(e),u=n._getSettings(),m=Object.assign(Object.assign({},u),{emulatorOptions:n._getEmulatorOptions()}),p=`${e}:${t}`;u.host!==zT&&u.host!==p&&Fo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const y=Object.assign(Object.assign({},u),{host:p,ssl:l,emulatorOptions:a});if(!Ai(y,m)&&(n._setSettings(y),l&&(I1(`https://${p}`),kh("Firestore",!0)),a.mockUserToken)){let v,b;if(typeof a.mockUserToken=="string")v=a.mockUserToken,b=pn.MOCK_USER;else{v=cC(a.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);const T=a.mockUserToken.sub||a.mockUserToken.user_id;if(!T)throw new fe(ne.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");b=new pn(T)}n._authCredentials=new n4(new wx(v,b))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(e,t,a){this.converter=t,this._query=a,this.type="query",this.firestore=e}withConverter(e){return new Ls(this.firestore,e,this._query)}}class wn{constructor(e,t,a){this.converter=t,this._key=a,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ws(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new wn(this.firestore,e,this._key)}}class ws extends Ls{constructor(e,t,a){super(e,t,Kg(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new wn(this.firestore,null,new xe(e))}withConverter(e){return new ws(this.firestore,e,this._path)}}function dr(n,e,...t){if(n=Ht(n),UT("collection","path",e),n instanceof Zh){const a=mt.fromString(e,...t);return AE(a),new ws(n,null,a)}{if(!(n instanceof wn||n instanceof ws))throw new fe(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=n._path.child(mt.fromString(e,...t));return AE(a),new ws(n.firestore,null,a)}}function ft(n,e,...t){if(n=Ht(n),arguments.length===1&&(e=Sx.newId()),UT("doc","path",e),n instanceof Zh){const a=mt.fromString(e,...t);return wE(a),new wn(n,null,new xe(a))}{if(!(n instanceof wn||n instanceof ws))throw new fe(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=n._path.child(mt.fromString(e,...t));return wE(a),new wn(n.firestore,n instanceof ws?n.converter:null,new xe(a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CE="AsyncQueue";class RE{constructor(e=Promise.resolve()){this.Qu=[],this.$u=!1,this.Uu=[],this.Ku=null,this.Wu=!1,this.Gu=!1,this.zu=[],this.y_=new gT(this,"async_queue_retry"),this.ju=()=>{const a=Dp();a&&me(CE,"Visibility state changed to "+a.visibilityState),this.y_.A_()},this.Hu=e;const t=Dp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.ju)}get isShuttingDown(){return this.$u}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ju(),this.Yu(e)}enterRestrictedMode(e){if(!this.$u){this.$u=!0,this.Gu=e||!1;const t=Dp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.ju)}}enqueue(e){if(this.Ju(),this.$u)return new Promise(()=>{});const t=new Ca;return this.Yu(()=>this.$u&&this.Gu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qu.push(e),this.Zu()))}async Zu(){if(this.Qu.length!==0){try{await this.Qu[0](),this.Qu.shift(),this.y_.reset()}catch(e){if(!al(e))throw e;me(CE,"Operation failed with retryable error: "+e)}this.Qu.length>0&&this.y_.E_(()=>this.Zu())}}Yu(e){const t=this.Hu.then(()=>(this.Wu=!0,e().catch(a=>{throw this.Ku=a,this.Wu=!1,Da("INTERNAL UNHANDLED ERROR: ",IE(a)),a}).then(a=>(this.Wu=!1,a))));return this.Hu=t,t}enqueueAfterDelay(e,t,a){this.Ju(),this.zu.indexOf(e)>-1&&(t=0);const i=ly.createAndSchedule(this,e,t,a,l=>this.Xu(l));return this.Uu.push(i),i}Ju(){this.Ku&&Ce(47125,{ec:IE(this.Ku)})}verifyOperationInProgress(){}async tc(){let e;do e=this.Hu,await e;while(e!==this.Hu)}nc(e){for(const t of this.Uu)if(t.timerId===e)return!0;return!1}rc(e){return this.tc().then(()=>{this.Uu.sort((t,a)=>t.targetTimeMs-a.targetTimeMs);for(const t of this.Uu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.tc()})}sc(e){this.zu.push(e)}Xu(e){const t=this.Uu.indexOf(e);this.Uu.splice(t,1)}}function IE(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class ki extends Zh{constructor(e,t,a,i){super(e,t,a,i),this.type="firestore",this._queue=new RE,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new RE(e),this._firestoreClient=void 0,await e}}}function XD(n,e){const t=typeof n=="object"?n:P1(),a=typeof n=="string"?n:gh,i=Dg(t,"firestore").getImmediate({identifier:a});if(!i._initialized){const l=oC("firestore");l&&WD(i,...l)}return i}function fy(n){if(n._terminated)throw new fe(ne.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||ZD(n),n._firestoreClient}function ZD(n){var e,t,a;const i=n._freezeSettings(),l=function(m,p,y,v){return new b4(m,p,y,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,VT(v.experimentalLongPollingOptions),v.useFetchStreams,v.isUsingEmulator)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((a=i.localCache)===null||a===void 0)&&a._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new FD(n._authCredentials,n._appCheckCredentials,n._queue,l,n._componentsProvider&&function(m){const p=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(p),_online:p}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Qo(cn.fromBase64String(e))}catch(t){throw new fe(ne.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Qo(cn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jh{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new fe(ne.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ln(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ef{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class my{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new fe(ne.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new fe(ne.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ve(this._lat,e._lat)||Ve(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class py{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(a,i){if(a.length!==i.length)return!1;for(let l=0;l<a.length;++l)if(a[l]!==i[l])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JD=/^__.*__$/;class ej{constructor(e,t,a){this.data=e,this.fieldMask=t,this.fieldTransforms=a}toMutation(e,t){return this.fieldMask!==null?new ks(e,this.data,this.fieldMask,t,this.fieldTransforms):new nu(e,this.data,t,this.fieldTransforms)}}class BT{constructor(e,t,a){this.data=e,this.fieldMask=t,this.fieldTransforms=a}toMutation(e,t){return new ks(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function qT(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ce(40011,{oc:n})}}class gy{constructor(e,t,a,i,l,u){this.settings=e,this.databaseId=t,this.serializer=a,this.ignoreUndefinedProperties=i,l===void 0&&this._c(),this.fieldTransforms=l||[],this.fieldMask=u||[]}get path(){return this.settings.path}get oc(){return this.settings.oc}ac(e){return new gy(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}uc(e){var t;const a=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.ac({path:a,cc:!1});return i.lc(e),i}hc(e){var t;const a=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.ac({path:a,cc:!1});return i._c(),i}Pc(e){return this.ac({path:void 0,cc:!0})}Tc(e){return Ah(e,this.settings.methodName,this.settings.Ic||!1,this.path,this.settings.Ec)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}_c(){if(this.path)for(let e=0;e<this.path.length;e++)this.lc(this.path.get(e))}lc(e){if(e.length===0)throw this.Tc("Document fields must not be empty");if(qT(this.oc)&&JD.test(e))throw this.Tc('Document fields cannot begin and end with "__"')}}class tj{constructor(e,t,a){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=a||Kh(e)}dc(e,t,a,i=!1){return new gy({oc:e,methodName:t,Ec:a,path:ln.emptyPath(),cc:!1,Ic:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function tf(n){const e=n._freezeSettings(),t=Kh(n._databaseId);return new tj(n._databaseId,!!e.ignoreUndefinedProperties,t)}function FT(n,e,t,a,i,l={}){const u=n.dc(l.merge||l.mergeFields?2:0,e,t,i);vy("Data must be an object, but it was:",u,a);const m=HT(a,u);let p,y;if(l.merge)p=new Gn(u.fieldMask),y=u.fieldTransforms;else if(l.mergeFields){const v=[];for(const b of l.mergeFields){const T=fg(e,b,t);if(!u.contains(T))throw new fe(ne.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);GT(v,T)||v.push(T)}p=new Gn(v),y=u.fieldTransforms.filter(b=>p.covers(b.field))}else p=null,y=u.fieldTransforms;return new ej(new Dn(m),p,y)}class nf extends ef{_toFieldTransform(e){if(e.oc!==2)throw e.oc===1?e.Tc(`${this._methodName}() can only appear at the top level of your update data`):e.Tc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof nf}}class yy extends ef{_toFieldTransform(e){return new G4(e.path,new Bc)}isEqual(e){return e instanceof yy}}function nj(n,e,t,a){const i=n.dc(1,e,t);vy("Data must be an object, but it was:",i,a);const l=[],u=Dn.empty();Ms(a,(p,y)=>{const v=_y(e,p,t);y=Ht(y);const b=i.hc(v);if(y instanceof nf)l.push(v);else{const T=iu(y,b);T!=null&&(l.push(v),u.set(v,T))}});const m=new Gn(l);return new BT(u,m,i.fieldTransforms)}function rj(n,e,t,a,i,l){const u=n.dc(1,e,t),m=[fg(e,a,t)],p=[i];if(l.length%2!=0)throw new fe(ne.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<l.length;T+=2)m.push(fg(e,l[T])),p.push(l[T+1]);const y=[],v=Dn.empty();for(let T=m.length-1;T>=0;--T)if(!GT(y,m[T])){const C=m[T];let A=p[T];A=Ht(A);const M=u.hc(C);if(A instanceof nf)y.push(C);else{const I=iu(A,M);I!=null&&(y.push(C),v.set(C,I))}}const b=new Gn(y);return new BT(v,b,u.fieldTransforms)}function aj(n,e,t,a=!1){return iu(t,n.dc(a?4:3,e))}function iu(n,e){if($T(n=Ht(n)))return vy("Unsupported field value:",e,n),HT(n,e);if(n instanceof ef)return function(a,i){if(!qT(i.oc))throw i.Tc(`${a._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Tc(`${a._methodName}() is not currently supported inside arrays`);const l=a._toFieldTransform(i);l&&i.fieldTransforms.push(l)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.cc&&e.oc!==4)throw e.Tc("Nested arrays are not supported");return function(a,i){const l=[];let u=0;for(const m of a){let p=iu(m,i.Pc(u));p==null&&(p={nullValue:"NULL_VALUE"}),l.push(p),u++}return{arrayValue:{values:l}}}(n,e)}return function(a,i){if((a=Ht(a))===null)return{nullValue:"NULL_VALUE"};if(typeof a=="number")return F4(i.serializer,a);if(typeof a=="boolean")return{booleanValue:a};if(typeof a=="string")return{stringValue:a};if(a instanceof Date){const l=qt.fromDate(a);return{timestampValue:Eh(i.serializer,l)}}if(a instanceof qt){const l=new qt(a.seconds,1e3*Math.floor(a.nanoseconds/1e3));return{timestampValue:Eh(i.serializer,l)}}if(a instanceof my)return{geoPointValue:{latitude:a.latitude,longitude:a.longitude}};if(a instanceof Qo)return{bytesValue:sT(i.serializer,a._byteString)};if(a instanceof wn){const l=i.databaseId,u=a.firestore._databaseId;if(!u.isEqual(l))throw i.Tc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Jg(a.firestore._databaseId||i.databaseId,a._key.path)}}if(a instanceof py)return function(u,m){return{mapValue:{fields:{[Px]:{stringValue:Mx},[yh]:{arrayValue:{values:u.toArray().map(y=>{if(typeof y!="number")throw m.Tc("VectorValues must only contain numeric values.");return Qg(m.serializer,y)})}}}}}}(a,i);throw i.Tc(`Unsupported field value: ${Xh(a)}`)}(n,e)}function HT(n,e){const t={};return Cx(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ms(n,(a,i)=>{const l=iu(i,e.uc(a));l!=null&&(t[a]=l)}),{mapValue:{fields:t}}}function $T(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof qt||n instanceof my||n instanceof Qo||n instanceof wn||n instanceof ef||n instanceof py)}function vy(n,e,t){if(!$T(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){const a=Xh(t);throw a==="an object"?e.Tc(n+" a custom object"):e.Tc(n+" "+a)}}function fg(n,e,t){if((e=Ht(e))instanceof Jh)return e._internalPath;if(typeof e=="string")return _y(n,e);throw Ah("Field path arguments must be of type string or ",n,!1,void 0,t)}const sj=new RegExp("[~\\*/\\[\\]]");function _y(n,e,t){if(e.search(sj)>=0)throw Ah(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Jh(...e.split("."))._internalPath}catch{throw Ah(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Ah(n,e,t,a,i){const l=a&&!a.isEmpty(),u=i!==void 0;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let p="";return(l||u)&&(p+=" (found",l&&(p+=` in field ${a}`),u&&(p+=` in document ${i}`),p+=")"),new fe(ne.INVALID_ARGUMENT,m+n+p)}function GT(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YT{constructor(e,t,a,i,l){this._firestore=e,this._userDataWriter=t,this._key=a,this._document=i,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new wn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new ij(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(rf("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class ij extends YT{data(){return super.data()}}function rf(n,e){return typeof e=="string"?_y(n,e):e instanceof Jh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oj(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new fe(ne.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class by{}class Ey extends by{}function Tr(n,e,...t){let a=[];e instanceof by&&a.push(e),a=a.concat(t),function(l){const u=l.filter(p=>p instanceof xy).length,m=l.filter(p=>p instanceof af).length;if(u>1||u>0&&m>0)throw new fe(ne.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(a);for(const i of a)n=i._apply(n);return n}class af extends Ey{constructor(e,t,a){super(),this._field=e,this._op=t,this._value=a,this.type="where"}static _create(e,t,a){return new af(e,t,a)}_apply(e){const t=this._parse(e);return KT(e._query,t),new Ls(e.firestore,e.converter,rg(e._query,t))}_parse(e){const t=tf(e.firestore);return function(l,u,m,p,y,v,b){let T;if(y.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new fe(ne.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){DE(b,v);const A=[];for(const M of b)A.push(OE(p,l,M));T={arrayValue:{values:A}}}else T=OE(p,l,b)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||DE(b,v),T=aj(m,u,b,v==="in"||v==="not-in");return kt.create(y,v,T)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Xt(n,e,t){const a=e,i=rf("where",n);return af._create(i,a,t)}class xy extends by{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new xy(e,t)}_parse(e){const t=this._queryConstraints.map(a=>a._parse(e)).filter(a=>a.getFilters().length>0);return t.length===1?t[0]:Er.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(i,l){let u=i;const m=l.getFlattenedFilters();for(const p of m)KT(u,p),u=rg(u,p)}(e._query,t),new Ls(e.firestore,e.converter,rg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Ty extends Ey{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Ty(e,t)}_apply(e){const t=function(i,l,u){if(i.startAt!==null)throw new fe(ne.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new fe(ne.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new zc(l,u)}(e._query,this._field,this._direction);return new Ls(e.firestore,e.converter,function(i,l){const u=i.explicitOrderBy.concat([l]);return new sl(i.path,i.collectionGroup,u,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}function wr(n,e="asc"){const t=e,a=rf("orderBy",n);return Ty._create(a,t)}class wy extends Ey{constructor(e,t,a){super(),this.type=e,this._limit=t,this._limitType=a}static _create(e,t,a){return new wy(e,t,a)}_apply(e){return new Ls(e.firestore,e.converter,_h(e._query,this._limit,this._limitType))}}function Ds(n){return QD("limit",n),wy._create("limit",n,"F")}function OE(n,e,t){if(typeof(t=Ht(t))=="string"){if(t==="")throw new fe(ne.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Fx(e)&&t.indexOf("/")!==-1)throw new fe(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const a=e.path.child(mt.fromString(t));if(!xe.isDocumentKey(a))throw new fe(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${a}' is not because it has an odd number of segments (${a.length}).`);return Gb(n,new xe(a))}if(t instanceof wn)return Gb(n,t._key);throw new fe(ne.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Xh(t)}.`)}function DE(n,e){if(!Array.isArray(n)||n.length===0)throw new fe(ne.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function KT(n,e){const t=function(i,l){for(const u of i)for(const m of u.getFlattenedFilters())if(l.indexOf(m.op)>=0)return m.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new fe(ne.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new fe(ne.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class lj{convertValue(e,t="none"){switch(Rs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return It(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Cs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ce(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const a={};return Ms(e,(i,l)=>{a[i]=this.convertValue(l,t)}),a}convertVectorValue(e){var t,a,i;const l=(i=(a=(t=e.fields)===null||t===void 0?void 0:t[yh].arrayValue)===null||a===void 0?void 0:a.values)===null||i===void 0?void 0:i.map(u=>It(u.doubleValue));return new py(l)}convertGeoPoint(e){return new my(It(e.latitude),It(e.longitude))}convertArray(e,t){return(e.values||[]).map(a=>this.convertValue(a,t))}convertServerTimestamp(e,t){switch(t){case"previous":const a=qh(e);return a==null?null:this.convertValue(a,t);case"estimate":return this.convertTimestamp(Lc(e));default:return null}}convertTimestamp(e){const t=Ns(e);return new qt(t.seconds,t.nanos)}convertDocumentKey(e,t){const a=mt.fromString(e);et(dT(a),9688,{name:e});const i=new Vc(a.get(1),a.get(3)),l=new xe(a.popFirst(5));return i.isEqual(t)||Da(`Document ${l} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QT(n,e,t){let a;return a=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class WT extends YT{constructor(e,t,a,i,l,u){super(e,t,a,i,u),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new eh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const a=this._document.data.field(rf("DocumentSnapshot.get",e));if(a!==null)return this._userDataWriter.convertValue(a,t.serverTimestamps)}}}class eh extends WT{data(e={}){return super.data(e)}}class cj{constructor(e,t,a,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Sc(i.hasPendingWrites,i.fromCache),this.query=a}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(a=>{e.call(t,new eh(this._firestore,this._userDataWriter,a.key,a,new Sc(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new fe(ne.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,l){if(i._snapshot.oldDocs.isEmpty()){let u=0;return i._snapshot.docChanges.map(m=>{const p=new eh(i._firestore,i._userDataWriter,m.doc.key,m.doc,new Sc(i._snapshot.mutatedKeys.has(m.doc.key),i._snapshot.fromCache),i.query.converter);return m.doc,{type:"added",doc:p,oldIndex:-1,newIndex:u++}})}{let u=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(m=>l||m.type!==3).map(m=>{const p=new eh(i._firestore,i._userDataWriter,m.doc.key,m.doc,new Sc(i._snapshot.mutatedKeys.has(m.doc.key),i._snapshot.fromCache),i.query.converter);let y=-1,v=-1;return m.type!==0&&(y=u.indexOf(m.doc.key),u=u.delete(m.doc.key)),m.type!==1&&(u=u.add(m.doc),v=u.indexOf(m.doc.key)),{type:uj(m.type),doc:p,oldIndex:y,newIndex:v}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function uj(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ce(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function un(n){n=xr(n,wn);const e=xr(n.firestore,ki);return GD(fy(e),n._key).then(t=>fj(e,n,t))}class XT extends lj{constructor(e){super(),this.firestore=e}convertBytes(e){return new Qo(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new wn(this.firestore,null,t)}}function La(n){n=xr(n,Ls);const e=xr(n.firestore,ki),t=fy(e),a=new XT(e);return oj(n._query),YD(t,n._query).then(i=>new cj(e,a,n,i))}function Ay(n,e,t){n=xr(n,wn);const a=xr(n.firestore,ki),i=QT(n.converter,e,t);return sf(a,[FT(tf(a),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,cr.none())])}function Mn(n,e,t,...a){n=xr(n,wn);const i=xr(n.firestore,ki),l=tf(i);let u;return u=typeof(e=Ht(e))=="string"||e instanceof Jh?rj(l,"updateDoc",n._key,e,t,a):nj(l,"updateDoc",n._key,e),sf(i,[u.toMutation(n._key,cr.exists(!0))])}function dj(n){return sf(xr(n.firestore,ki),[new Wg(n._key,cr.none())])}function hj(n,e){const t=xr(n.firestore,ki),a=ft(n),i=QT(n.converter,e);return sf(t,[FT(tf(n.firestore),"addDoc",a._key,i,n.converter!==null,{}).toMutation(a._key,cr.exists(!1))]).then(()=>a)}function sf(n,e){return function(a,i){const l=new Ca;return a.asyncQueue.enqueueAndForget(async()=>PD(await $D(a),i,l)),l.promise}(fy(n),e)}function fj(n,e,t){const a=t.docs.get(e._key),i=new XT(n);return new WT(n,i,e._key,a,new Sc(t.hasPendingWrites,t.fromCache),e.converter)}function ct(){return new yy("serverTimestamp")}(function(e,t=!0){(function(i){nl=i})(el),Bo(new Si("firestore",(a,{instanceIdentifier:i,options:l})=>{const u=a.getProvider("app").getImmediate(),m=new ki(new r4(a.getProvider("auth-internal")),new i4(u,a.getProvider("app-check-internal")),function(y,v){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new fe(ne.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Vc(y.options.projectId,v)}(u,i),u);return l=Object.assign({useFetchStreams:t},l),m._setSettings(l),m},"PUBLIC").setMultipleInstances(!0)),xs(Pb,Mb,e),xs(Pb,Mb,"esm2017")})();const mj={apiKey:"AIzaSyApEi7CgbADU0urEtkdRBheJubnyEA-qnw",authDomain:"acriventas-poc.firebaseapp.com",databaseURL:"https://acriventas-poc-default-rtdb.firebaseio.com",projectId:"acriventas-poc",storageBucket:"acriventas-poc.firebasestorage.app",messagingSenderId:"718850780341",appId:"1:718850780341:web:aec07ccdad37235dece2fc",measurementId:"G-0DGH1RQX2G"},ZT=j1(mj),of=XI(ZT),qe=XD(ZT),pj=async(n,e,t,a="agent",i="")=>{try{if(!i.trim())throw new Error("La dirección de residencia es obligatoria");const u=(await jR(of,n,e)).user;return await kR(u,{displayName:t}),await Ay(ft(qe,"users",u.uid),{uid:u.uid,email:n,displayName:t,role:a,address:i.trim(),createdAt:ct(),lastLogin:ct(),updatedAt:ct()}),console.log("Usuario registrado exitosamente con dirección:",i.trim()),u}catch(l){throw console.error("Error al registrar usuario:",l),l}},gj=async(n,e)=>{try{const t=await PR(of,n,e);return await Ay(ft(qe,"users",t.user.uid),{lastLogin:ct(),updatedAt:ct()},{merge:!0}),t.user}catch(t){throw console.error("Error al iniciar sesión:",t),t}},yj=async()=>zR(of),vj=async n=>{try{const e=await un(ft(qe,"users",n));return e.exists()?e.data():null}catch(e){throw console.error("Error al obtener datos del usuario:",e),e}},JT=P.createContext(),ou=()=>P.useContext(JT),_j=({children:n})=>{const[e,t]=P.useState(null),[a,i]=P.useState(null),[l,u]=P.useState(!0);P.useEffect(()=>UR(of,async y=>{if(t(y),y)try{const v=await vj(y.uid);i(v)}catch(v){console.error("Error al cargar detalles del usuario:",v)}else i(null);u(!1)}),[]);const m={currentUser:e,userDetails:a,isAdmin:(a==null?void 0:a.role)==="admin",isAgent:(a==null?void 0:a.role)==="agent",loading:l};return f.jsx(JT.Provider,{value:m,children:!l&&n})},bj=()=>{const[n,e]=P.useState(""),[t,a]=P.useState(""),[i,l]=P.useState(""),[u,m]=P.useState(!1),p=An(),y=async v=>{v.preventDefault();try{l(""),m(!0),await gj(n,t),p("/")}catch(b){l("Credenciales incorrectas. Intente nuevamente."),console.error(b)}finally{m(!1)}};return f.jsx("div",{className:"min-h-screen bg-gradient-to-b from-gray-800 to-gray-900 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:f.jsxs("div",{className:"max-w-md w-full space-y-8 bg-white p-10 rounded-xl shadow-2xl",children:[f.jsxs("div",{children:[f.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Sistema de Cobranza Adaptativa"}),f.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Inicie sesión para continuar"})]}),i&&f.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-md",role:"alert",children:f.jsx("span",{className:"block sm:inline",children:i})}),f.jsxs("form",{className:"mt-8 space-y-6",onSubmit:y,children:[f.jsxs("div",{className:"rounded-md space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{htmlFor:"email-address",className:"block text-sm font-medium text-gray-700",children:"Email"}),f.jsx("input",{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,className:"appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Correo electrónico",value:n,onChange:v=>e(v.target.value)})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Contraseña"}),f.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,className:"appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Contraseña",value:t,onChange:v=>a(v.target.value)})]})]}),f.jsx("div",{children:f.jsx("button",{type:"submit",disabled:u,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:u?"Iniciando sesión...":"Iniciar sesión"})}),f.jsx("div",{className:"text-center text-sm",children:f.jsx(Ph,{to:"/register",className:"font-medium text-primary-600 hover:text-primary-500",children:"¿No tiene cuenta? Regístrese aquí"})})]})]})})},Ej=()=>{const[n,e]=P.useState({displayName:"",email:"",password:"",passwordConfirm:"",address:""}),[t,a]=P.useState(""),[i,l]=P.useState(!1),u=An(),m=y=>{const{name:v,value:b}=y.target;e(T=>({...T,[v]:b}))},p=async y=>{if(y.preventDefault(),n.password!==n.passwordConfirm)return a("Las contraseñas no coinciden");if(n.password.length<6)return a("La contraseña debe tener al menos 6 caracteres");if(!n.displayName.trim())return a("El nombre completo es obligatorio");if(!n.address.trim())return a("La dirección de residencia es obligatoria");try{a(""),l(!0),await pj(n.email,n.password,n.displayName,"agent",n.address),u("/")}catch(v){console.error("Error al registrar:",v),a(v.code==="auth/email-already-in-use"?"Este correo ya está registrado":v.message||"Error al crear la cuenta. Intente nuevamente.")}finally{l(!1)}};return f.jsx("div",{className:"min-h-screen bg-gradient-to-b from-gray-800 to-gray-900 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:f.jsxs("div",{className:"max-w-md w-full space-y-8 bg-white p-10 rounded-xl shadow-2xl",children:[f.jsxs("div",{children:[f.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Crear nueva cuenta"}),f.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Complete el formulario para registrarse"})]}),t&&f.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:f.jsx("span",{className:"block sm:inline",children:t})}),f.jsxs("form",{className:"mt-8 space-y-6",onSubmit:p,children:[f.jsxs("div",{className:"rounded-md shadow-sm space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{htmlFor:"displayName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre completo *"}),f.jsx("input",{id:"displayName",name:"displayName",type:"text",required:!0,className:"appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-primary-500 focus:border-primary-500 focus:z-10 sm:text-sm",placeholder:"Nombre completo",value:n.displayName,onChange:m})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"email-address",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email *"}),f.jsx("input",{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,className:"appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-primary-500 focus:border-primary-500 focus:z-10 sm:text-sm",placeholder:"Correo electrónico",value:n.email,onChange:m})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"address",className:"block text-sm font-medium text-gray-700 mb-1",children:"Dirección de residencia *"}),f.jsx("textarea",{id:"address",name:"address",rows:"3",required:!0,className:"appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-primary-500 focus:border-primary-500 focus:z-10 sm:text-sm resize-none",placeholder:"Ingrese su dirección completa de residencia",value:n.address,onChange:m}),f.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Incluya dirección completa: calle, número, barrio, ciudad"})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Contraseña *"}),f.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"new-password",required:!0,className:"appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-primary-500 focus:border-primary-500 focus:z-10 sm:text-sm",placeholder:"Contraseña (mínimo 6 caracteres)",value:n.password,onChange:m})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"passwordConfirm",className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirmar contraseña *"}),f.jsx("input",{id:"passwordConfirm",name:"passwordConfirm",type:"password",autoComplete:"new-password",required:!0,className:"appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-primary-500 focus:border-primary-500 focus:z-10 sm:text-sm",placeholder:"Confirmar contraseña",value:n.passwordConfirm,onChange:m})]})]}),f.jsx("div",{children:f.jsx("button",{type:"submit",disabled:i,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed",children:i?f.jsxs("span",{className:"flex items-center",children:[f.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[f.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),f.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Creando cuenta..."]}):"Registrarse"})}),f.jsx("div",{className:"text-center",children:f.jsx(Ph,{to:"/login",className:"text-sm text-primary-600 hover:text-primary-500",children:"¿Ya tiene una cuenta? Inicie sesión"})})]}),f.jsxs("div",{className:"mt-4 text-xs text-gray-500 text-center",children:[f.jsx("p",{className:"mb-2",children:"Al registrarse, usted acepta nuestros términos y condiciones."}),f.jsx("p",{children:"Los campos marcados con * son obligatorios."})]})]})})};var ew={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},jE=Ti.createContext&&Ti.createContext(ew),xj=["attr","size","title"];function Tj(n,e){if(n==null)return{};var t=wj(n,e),a,i;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(n);for(i=0;i<l.length;i++)a=l[i],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(n,a)&&(t[a]=n[a])}return t}function wj(n,e){if(n==null)return{};var t={};for(var a in n)if(Object.prototype.hasOwnProperty.call(n,a)){if(e.indexOf(a)>=0)continue;t[a]=n[a]}return t}function Sh(){return Sh=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(n[a]=t[a])}return n},Sh.apply(this,arguments)}function PE(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,a)}return t}function Nh(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?PE(Object(t),!0).forEach(function(a){Aj(n,a,t[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):PE(Object(t)).forEach(function(a){Object.defineProperty(n,a,Object.getOwnPropertyDescriptor(t,a))})}return n}function Aj(n,e,t){return e=Sj(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Sj(n){var e=Nj(n,"string");return typeof e=="symbol"?e:e+""}function Nj(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var a=t.call(n,e);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function tw(n){return n&&n.map((e,t)=>Ti.createElement(e.tag,Nh({key:t},e.attr),tw(e.child)))}function Va(n){return e=>Ti.createElement(Cj,Sh({attr:Nh({},n.attr)},e),tw(n.child))}function Cj(n){var e=t=>{var{attr:a,size:i,title:l}=n,u=Tj(n,xj),m=i||t.size||"1em",p;return t.className&&(p=t.className),n.className&&(p=(p?p+" ":"")+n.className),Ti.createElement("svg",Sh({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,a,u,{className:p,style:Nh(Nh({color:n.color||t.color},t.style),n.style),height:m,width:m,xmlns:"http://www.w3.org/2000/svg"}),l&&Ti.createElement("title",null,l),n.children)};return jE!==void 0?Ti.createElement(jE.Consumer,null,t=>e(t)):e(ew)}function Rj(n){return Va({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M496 384H64V80c0-8.84-7.16-16-16-16H16C7.16 64 0 71.16 0 80v336c0 17.67 14.33 32 32 32h464c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16zM464 96H345.94c-21.38 0-32.09 25.85-16.97 40.97l32.4 32.4L288 242.75l-73.37-73.37c-12.5-12.5-32.76-12.5-45.25 0l-68.69 68.69c-6.25 6.25-6.25 16.38 0 22.63l22.62 22.62c6.25 6.25 16.38 6.25 22.63 0L192 237.25l73.37 73.37c12.5 12.5 32.76 12.5 45.25 0l96-96 32.4 32.4c15.12 15.12 40.97 4.41 40.97-16.97V112c.01-8.84-7.15-16-15.99-16z"},child:[]}]})(n)}function Ij(n){return Va({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14-11.1-35.6-30-67.8-54.7-94.6-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7-36.7-8.2-74.3-7.8-109.2 0-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3-24.7 26.7-43.6 58.9-54.7 94.6-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14 11.1 35.6 30 67.8 54.7 94.6 3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7 36.7 8.2 74.3 7.8 109.2 0 5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3 24.7-26.7 43.6-58.9 54.7-94.6 1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z"},child:[]}]})(n)}function Oj(n){return Va({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M416 192c0-88.4-93.1-160-208-160S0 103.6 0 192c0 34.3 14.1 65.9 38 92-13.4 30.2-35.5 54.2-35.8 54.5-2.2 2.3-2.8 5.7-1.5 8.7S4.8 352 8 352c36.6 0 66.9-12.3 88.7-25 32.2 15.7 70.3 25 111.3 25 114.9 0 208-71.6 208-160zm122 220c23.9-26 38-57.7 38-92 0-66.9-53.5-124.2-129.3-148.1.9 6.6 1.3 13.3 1.3 20.1 0 105.9-107.7 192-240 192-10.8 0-21.3-.8-31.7-1.9C207.8 439.6 281.8 480 368 480c41 0 79.1-9.2 111.3-25 21.8 12.7 52.1 25 88.7 25 3.2 0 6.1-1.9 7.3-4.8 1.3-2.9.7-6.3-1.5-8.7-.3-.3-22.4-24.2-35.8-54.5z"},child:[]}]})(n)}function Dj(n){return Va({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"},child:[]}]})(n)}function nw(n){return Va({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(n)}function jj(n){return Va({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M32,224H64V416H32A31.96166,31.96166,0,0,1,0,384V256A31.96166,31.96166,0,0,1,32,224Zm512-48V448a64.06328,64.06328,0,0,1-64,64H160a64.06328,64.06328,0,0,1-64-64V176a79.974,79.974,0,0,1,80-80H288V32a32,32,0,0,1,64,0V96H464A79.974,79.974,0,0,1,544,176ZM264,256a40,40,0,1,0-40,40A39.997,39.997,0,0,0,264,256Zm-8,128H192v32h64Zm96,0H288v32h64ZM456,256a40,40,0,1,0-40,40A39.997,39.997,0,0,0,456,256Zm-8,128H384v32h64ZM640,256V384a31.96166,31.96166,0,0,1-32,32H576V224h32A31.96166,31.96166,0,0,1,640,256Z"},child:[]}]})(n)}function rw(n){return Va({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"},child:[]}]})(n)}function Pj(n){return Va({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M192 256c61.9 0 112-50.1 112-112S253.9 32 192 32 80 82.1 80 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C51.6 288 0 339.6 0 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zM480 256c53 0 96-43 96-96s-43-96-96-96-96 43-96 96 43 96 96 96zm48 32h-3.8c-13.9 4.8-28.6 8-44.2 8s-30.3-3.2-44.2-8H432c-20.4 0-39.2 5.9-55.7 15.4 24.4 26.3 39.7 61.2 39.7 99.8v38.4c0 2.2-.5 4.3-.6 6.4H592c26.5 0 48-21.5 48-48 0-61.9-50.1-112-112-112z"},child:[]}]})(n)}function Mj(n){return Va({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M624 208h-64v-64c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v64h-64c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h64v64c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-64h64c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zm-400 48c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(n)}const kj=()=>{const n=An();return f.jsxs("div",{className:"flex flex-wrap gap-4 mb-8",children:[f.jsxs("button",{onClick:()=>n("/conversation/new"),className:"btn-primary flex items-center gap-2",children:[f.jsx(nw,{})," Iniciar Conversación"]}),f.jsxs("button",{onClick:()=>n("/clients/search"),className:"btn-secondary flex items-center gap-2",children:[f.jsx(rw,{})," Buscar Cliente"]}),f.jsxs("button",{onClick:()=>n("/clients/new"),className:"btn-secondary flex items-center gap-2",children:[f.jsx(Mj,{})," Agregar Cliente"]})]})},aw=6048e5,Lj=864e5,qd=43200,ME=1440,kE=Symbol.for("constructDateFrom");function Pa(n,e){return typeof n=="function"?n(e):n&&typeof n=="object"&&kE in n?n[kE](e):n instanceof Date?new n.constructor(e):new Date(e)}function Jt(n,e){return Pa(e||n,n)}let Vj={};function lu(){return Vj}function Hc(n,e){var m,p,y,v;const t=lu(),a=(e==null?void 0:e.weekStartsOn)??((p=(m=e==null?void 0:e.locale)==null?void 0:m.options)==null?void 0:p.weekStartsOn)??t.weekStartsOn??((v=(y=t.locale)==null?void 0:y.options)==null?void 0:v.weekStartsOn)??0,i=Jt(n,e==null?void 0:e.in),l=i.getDay(),u=(l<a?7:0)+l-a;return i.setDate(i.getDate()-u),i.setHours(0,0,0,0),i}function Ch(n,e){return Hc(n,{...e,weekStartsOn:1})}function sw(n,e){const t=Jt(n,e==null?void 0:e.in),a=t.getFullYear(),i=Pa(t,0);i.setFullYear(a+1,0,4),i.setHours(0,0,0,0);const l=Ch(i),u=Pa(t,0);u.setFullYear(a,0,4),u.setHours(0,0,0,0);const m=Ch(u);return t.getTime()>=l.getTime()?a+1:t.getTime()>=m.getTime()?a:a-1}function Rh(n){const e=Jt(n),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+n-+t}function lf(n,...e){const t=Pa.bind(null,n||e.find(a=>typeof a=="object"));return e.map(t)}function LE(n,e){const t=Jt(n,e==null?void 0:e.in);return t.setHours(0,0,0,0),t}function Uj(n,e,t){const[a,i]=lf(t==null?void 0:t.in,n,e),l=LE(a),u=LE(i),m=+l-Rh(l),p=+u-Rh(u);return Math.round((m-p)/Lj)}function zj(n,e){const t=sw(n,e),a=Pa(n,0);return a.setFullYear(t,0,4),a.setHours(0,0,0,0),Ch(a)}function th(n,e){const t=+Jt(n)-+Jt(e);return t<0?-1:t>0?1:t}function Bj(n){return Pa(n,Date.now())}function qj(n){return n instanceof Date||typeof n=="object"&&Object.prototype.toString.call(n)==="[object Date]"}function Fj(n){return!(!qj(n)&&typeof n!="number"||isNaN(+Jt(n)))}function Hj(n,e,t){const[a,i]=lf(t==null?void 0:t.in,n,e),l=a.getFullYear()-i.getFullYear(),u=a.getMonth()-i.getMonth();return l*12+u}function $j(n){return e=>{const a=(n?Math[n]:Math.trunc)(e);return a===0?0:a}}function Gj(n,e){return+Jt(n)-+Jt(e)}function Yj(n,e){const t=Jt(n,e==null?void 0:e.in);return t.setHours(23,59,59,999),t}function Kj(n,e){const t=Jt(n,e==null?void 0:e.in),a=t.getMonth();return t.setFullYear(t.getFullYear(),a+1,0),t.setHours(23,59,59,999),t}function Qj(n,e){const t=Jt(n,e==null?void 0:e.in);return+Yj(t,e)==+Kj(t,e)}function Wj(n,e,t){const[a,i,l]=lf(t==null?void 0:t.in,n,n,e),u=th(i,l),m=Math.abs(Hj(i,l));if(m<1)return 0;i.getMonth()===1&&i.getDate()>27&&i.setDate(30),i.setMonth(i.getMonth()-u*m);let p=th(i,l)===-u;Qj(a)&&m===1&&th(a,l)===1&&(p=!1);const y=u*(m-+p);return y===0?0:y}function Xj(n,e,t){const a=Gj(n,e)/1e3;return $j(t==null?void 0:t.roundingMethod)(a)}function Zj(n,e){const t=Jt(n,e==null?void 0:e.in);return t.setFullYear(t.getFullYear(),0,1),t.setHours(0,0,0,0),t}const Jj={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},eP=(n,e,t)=>{let a;const i=Jj[n];return typeof i=="string"?a=i:e===1?a=i.one:a=i.other.replace("{{count}}",e.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+a:a+" ago":a};function Uo(n){return(e={})=>{const t=e.width?String(e.width):n.defaultWidth;return n.formats[t]||n.formats[n.defaultWidth]}}const tP={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},nP={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},rP={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},aP={date:Uo({formats:tP,defaultWidth:"full"}),time:Uo({formats:nP,defaultWidth:"full"}),dateTime:Uo({formats:rP,defaultWidth:"full"})},sP={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},iP=(n,e,t,a)=>sP[n];function $r(n){return(e,t)=>{const a=t!=null&&t.context?String(t.context):"standalone";let i;if(a==="formatting"&&n.formattingValues){const u=n.defaultFormattingWidth||n.defaultWidth,m=t!=null&&t.width?String(t.width):u;i=n.formattingValues[m]||n.formattingValues[u]}else{const u=n.defaultWidth,m=t!=null&&t.width?String(t.width):n.defaultWidth;i=n.values[m]||n.values[u]}const l=n.argumentCallback?n.argumentCallback(e):e;return i[l]}}const oP={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},lP={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},cP={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},uP={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},dP={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},hP={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},fP=(n,e)=>{const t=Number(n),a=t%100;if(a>20||a<10)switch(a%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},mP={ordinalNumber:fP,era:$r({values:oP,defaultWidth:"wide"}),quarter:$r({values:lP,defaultWidth:"wide",argumentCallback:n=>n-1}),month:$r({values:cP,defaultWidth:"wide"}),day:$r({values:uP,defaultWidth:"wide"}),dayPeriod:$r({values:dP,defaultWidth:"wide",formattingValues:hP,defaultFormattingWidth:"wide"})};function Gr(n){return(e,t={})=>{const a=t.width,i=a&&n.matchPatterns[a]||n.matchPatterns[n.defaultMatchWidth],l=e.match(i);if(!l)return null;const u=l[0],m=a&&n.parsePatterns[a]||n.parsePatterns[n.defaultParseWidth],p=Array.isArray(m)?gP(m,b=>b.test(u)):pP(m,b=>b.test(u));let y;y=n.valueCallback?n.valueCallback(p):p,y=t.valueCallback?t.valueCallback(y):y;const v=e.slice(u.length);return{value:y,rest:v}}}function pP(n,e){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&e(n[t]))return t}function gP(n,e){for(let t=0;t<n.length;t++)if(e(n[t]))return t}function iw(n){return(e,t={})=>{const a=e.match(n.matchPattern);if(!a)return null;const i=a[0],l=e.match(n.parsePattern);if(!l)return null;let u=n.valueCallback?n.valueCallback(l[0]):l[0];u=t.valueCallback?t.valueCallback(u):u;const m=e.slice(i.length);return{value:u,rest:m}}}const yP=/^(\d+)(th|st|nd|rd)?/i,vP=/\d+/i,_P={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},bP={any:[/^b/i,/^(a|c)/i]},EP={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},xP={any:[/1/i,/2/i,/3/i,/4/i]},TP={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},wP={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},AP={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},SP={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},NP={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},CP={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},RP={ordinalNumber:iw({matchPattern:yP,parsePattern:vP,valueCallback:n=>parseInt(n,10)}),era:Gr({matchPatterns:_P,defaultMatchWidth:"wide",parsePatterns:bP,defaultParseWidth:"any"}),quarter:Gr({matchPatterns:EP,defaultMatchWidth:"wide",parsePatterns:xP,defaultParseWidth:"any",valueCallback:n=>n+1}),month:Gr({matchPatterns:TP,defaultMatchWidth:"wide",parsePatterns:wP,defaultParseWidth:"any"}),day:Gr({matchPatterns:AP,defaultMatchWidth:"wide",parsePatterns:SP,defaultParseWidth:"any"}),dayPeriod:Gr({matchPatterns:NP,defaultMatchWidth:"any",parsePatterns:CP,defaultParseWidth:"any"})},ow={code:"en-US",formatDistance:eP,formatLong:aP,formatRelative:iP,localize:mP,match:RP,options:{weekStartsOn:0,firstWeekContainsDate:1}};function IP(n,e){const t=Jt(n,e==null?void 0:e.in);return Uj(t,Zj(t))+1}function OP(n,e){const t=Jt(n,e==null?void 0:e.in),a=+Ch(t)-+zj(t);return Math.round(a/aw)+1}function lw(n,e){var v,b,T,C;const t=Jt(n,e==null?void 0:e.in),a=t.getFullYear(),i=lu(),l=(e==null?void 0:e.firstWeekContainsDate)??((b=(v=e==null?void 0:e.locale)==null?void 0:v.options)==null?void 0:b.firstWeekContainsDate)??i.firstWeekContainsDate??((C=(T=i.locale)==null?void 0:T.options)==null?void 0:C.firstWeekContainsDate)??1,u=Pa((e==null?void 0:e.in)||n,0);u.setFullYear(a+1,0,l),u.setHours(0,0,0,0);const m=Hc(u,e),p=Pa((e==null?void 0:e.in)||n,0);p.setFullYear(a,0,l),p.setHours(0,0,0,0);const y=Hc(p,e);return+t>=+m?a+1:+t>=+y?a:a-1}function DP(n,e){var m,p,y,v;const t=lu(),a=(e==null?void 0:e.firstWeekContainsDate)??((p=(m=e==null?void 0:e.locale)==null?void 0:m.options)==null?void 0:p.firstWeekContainsDate)??t.firstWeekContainsDate??((v=(y=t.locale)==null?void 0:y.options)==null?void 0:v.firstWeekContainsDate)??1,i=lw(n,e),l=Pa((e==null?void 0:e.in)||n,0);return l.setFullYear(i,0,a),l.setHours(0,0,0,0),Hc(l,e)}function jP(n,e){const t=Jt(n,e==null?void 0:e.in),a=+Hc(t,e)-+DP(t,e);return Math.round(a/aw)+1}function at(n,e){const t=n<0?"-":"",a=Math.abs(n).toString().padStart(e,"0");return t+a}const ms={y(n,e){const t=n.getFullYear(),a=t>0?t:1-t;return at(e==="yy"?a%100:a,e.length)},M(n,e){const t=n.getMonth();return e==="M"?String(t+1):at(t+1,2)},d(n,e){return at(n.getDate(),e.length)},a(n,e){const t=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(n,e){return at(n.getHours()%12||12,e.length)},H(n,e){return at(n.getHours(),e.length)},m(n,e){return at(n.getMinutes(),e.length)},s(n,e){return at(n.getSeconds(),e.length)},S(n,e){const t=e.length,a=n.getMilliseconds(),i=Math.trunc(a*Math.pow(10,t-3));return at(i,e.length)}},Ro={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},VE={G:function(n,e,t){const a=n.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(a,{width:"abbreviated"});case"GGGGG":return t.era(a,{width:"narrow"});case"GGGG":default:return t.era(a,{width:"wide"})}},y:function(n,e,t){if(e==="yo"){const a=n.getFullYear(),i=a>0?a:1-a;return t.ordinalNumber(i,{unit:"year"})}return ms.y(n,e)},Y:function(n,e,t,a){const i=lw(n,a),l=i>0?i:1-i;if(e==="YY"){const u=l%100;return at(u,2)}return e==="Yo"?t.ordinalNumber(l,{unit:"year"}):at(l,e.length)},R:function(n,e){const t=sw(n);return at(t,e.length)},u:function(n,e){const t=n.getFullYear();return at(t,e.length)},Q:function(n,e,t){const a=Math.ceil((n.getMonth()+1)/3);switch(e){case"Q":return String(a);case"QQ":return at(a,2);case"Qo":return t.ordinalNumber(a,{unit:"quarter"});case"QQQ":return t.quarter(a,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(a,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(a,{width:"wide",context:"formatting"})}},q:function(n,e,t){const a=Math.ceil((n.getMonth()+1)/3);switch(e){case"q":return String(a);case"qq":return at(a,2);case"qo":return t.ordinalNumber(a,{unit:"quarter"});case"qqq":return t.quarter(a,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(a,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(a,{width:"wide",context:"standalone"})}},M:function(n,e,t){const a=n.getMonth();switch(e){case"M":case"MM":return ms.M(n,e);case"Mo":return t.ordinalNumber(a+1,{unit:"month"});case"MMM":return t.month(a,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(a,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(a,{width:"wide",context:"formatting"})}},L:function(n,e,t){const a=n.getMonth();switch(e){case"L":return String(a+1);case"LL":return at(a+1,2);case"Lo":return t.ordinalNumber(a+1,{unit:"month"});case"LLL":return t.month(a,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(a,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(a,{width:"wide",context:"standalone"})}},w:function(n,e,t,a){const i=jP(n,a);return e==="wo"?t.ordinalNumber(i,{unit:"week"}):at(i,e.length)},I:function(n,e,t){const a=OP(n);return e==="Io"?t.ordinalNumber(a,{unit:"week"}):at(a,e.length)},d:function(n,e,t){return e==="do"?t.ordinalNumber(n.getDate(),{unit:"date"}):ms.d(n,e)},D:function(n,e,t){const a=IP(n);return e==="Do"?t.ordinalNumber(a,{unit:"dayOfYear"}):at(a,e.length)},E:function(n,e,t){const a=n.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(a,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(a,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(a,{width:"short",context:"formatting"});case"EEEE":default:return t.day(a,{width:"wide",context:"formatting"})}},e:function(n,e,t,a){const i=n.getDay(),l=(i-a.weekStartsOn+8)%7||7;switch(e){case"e":return String(l);case"ee":return at(l,2);case"eo":return t.ordinalNumber(l,{unit:"day"});case"eee":return t.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(i,{width:"short",context:"formatting"});case"eeee":default:return t.day(i,{width:"wide",context:"formatting"})}},c:function(n,e,t,a){const i=n.getDay(),l=(i-a.weekStartsOn+8)%7||7;switch(e){case"c":return String(l);case"cc":return at(l,e.length);case"co":return t.ordinalNumber(l,{unit:"day"});case"ccc":return t.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(i,{width:"narrow",context:"standalone"});case"cccccc":return t.day(i,{width:"short",context:"standalone"});case"cccc":default:return t.day(i,{width:"wide",context:"standalone"})}},i:function(n,e,t){const a=n.getDay(),i=a===0?7:a;switch(e){case"i":return String(i);case"ii":return at(i,e.length);case"io":return t.ordinalNumber(i,{unit:"day"});case"iii":return t.day(a,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(a,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(a,{width:"short",context:"formatting"});case"iiii":default:return t.day(a,{width:"wide",context:"formatting"})}},a:function(n,e,t){const i=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(n,e,t){const a=n.getHours();let i;switch(a===12?i=Ro.noon:a===0?i=Ro.midnight:i=a/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(n,e,t){const a=n.getHours();let i;switch(a>=17?i=Ro.evening:a>=12?i=Ro.afternoon:a>=4?i=Ro.morning:i=Ro.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(n,e,t){if(e==="ho"){let a=n.getHours()%12;return a===0&&(a=12),t.ordinalNumber(a,{unit:"hour"})}return ms.h(n,e)},H:function(n,e,t){return e==="Ho"?t.ordinalNumber(n.getHours(),{unit:"hour"}):ms.H(n,e)},K:function(n,e,t){const a=n.getHours()%12;return e==="Ko"?t.ordinalNumber(a,{unit:"hour"}):at(a,e.length)},k:function(n,e,t){let a=n.getHours();return a===0&&(a=24),e==="ko"?t.ordinalNumber(a,{unit:"hour"}):at(a,e.length)},m:function(n,e,t){return e==="mo"?t.ordinalNumber(n.getMinutes(),{unit:"minute"}):ms.m(n,e)},s:function(n,e,t){return e==="so"?t.ordinalNumber(n.getSeconds(),{unit:"second"}):ms.s(n,e)},S:function(n,e){return ms.S(n,e)},X:function(n,e,t){const a=n.getTimezoneOffset();if(a===0)return"Z";switch(e){case"X":return zE(a);case"XXXX":case"XX":return bi(a);case"XXXXX":case"XXX":default:return bi(a,":")}},x:function(n,e,t){const a=n.getTimezoneOffset();switch(e){case"x":return zE(a);case"xxxx":case"xx":return bi(a);case"xxxxx":case"xxx":default:return bi(a,":")}},O:function(n,e,t){const a=n.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+UE(a,":");case"OOOO":default:return"GMT"+bi(a,":")}},z:function(n,e,t){const a=n.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+UE(a,":");case"zzzz":default:return"GMT"+bi(a,":")}},t:function(n,e,t){const a=Math.trunc(+n/1e3);return at(a,e.length)},T:function(n,e,t){return at(+n,e.length)}};function UE(n,e=""){const t=n>0?"-":"+",a=Math.abs(n),i=Math.trunc(a/60),l=a%60;return l===0?t+String(i):t+String(i)+e+at(l,2)}function zE(n,e){return n%60===0?(n>0?"-":"+")+at(Math.abs(n)/60,2):bi(n,e)}function bi(n,e=""){const t=n>0?"-":"+",a=Math.abs(n),i=at(Math.trunc(a/60),2),l=at(a%60,2);return t+i+e+l}const BE=(n,e)=>{switch(n){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},cw=(n,e)=>{switch(n){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},PP=(n,e)=>{const t=n.match(/(P+)(p+)?/)||[],a=t[1],i=t[2];if(!i)return BE(n,e);let l;switch(a){case"P":l=e.dateTime({width:"short"});break;case"PP":l=e.dateTime({width:"medium"});break;case"PPP":l=e.dateTime({width:"long"});break;case"PPPP":default:l=e.dateTime({width:"full"});break}return l.replace("{{date}}",BE(a,e)).replace("{{time}}",cw(i,e))},MP={p:cw,P:PP},kP=/^D+$/,LP=/^Y+$/,VP=["D","DD","YY","YYYY"];function UP(n){return kP.test(n)}function zP(n){return LP.test(n)}function BP(n,e,t){const a=qP(n,e,t);if(console.warn(a),VP.includes(n))throw new RangeError(a)}function qP(n,e,t){const a=n[0]==="Y"?"years":"days of the month";return`Use \`${n.toLowerCase()}\` instead of \`${n}\` (in \`${e}\`) for formatting ${a} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const FP=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,HP=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,$P=/^'([^]*?)'?$/,GP=/''/g,YP=/[a-zA-Z]/;function zo(n,e,t){var v,b,T,C,A,M,I,H;const a=lu(),i=(t==null?void 0:t.locale)??a.locale??ow,l=(t==null?void 0:t.firstWeekContainsDate)??((b=(v=t==null?void 0:t.locale)==null?void 0:v.options)==null?void 0:b.firstWeekContainsDate)??a.firstWeekContainsDate??((C=(T=a.locale)==null?void 0:T.options)==null?void 0:C.firstWeekContainsDate)??1,u=(t==null?void 0:t.weekStartsOn)??((M=(A=t==null?void 0:t.locale)==null?void 0:A.options)==null?void 0:M.weekStartsOn)??a.weekStartsOn??((H=(I=a.locale)==null?void 0:I.options)==null?void 0:H.weekStartsOn)??0,m=Jt(n,t==null?void 0:t.in);if(!Fj(m))throw new RangeError("Invalid time value");let p=e.match(HP).map(W=>{const q=W[0];if(q==="p"||q==="P"){const ie=MP[q];return ie(W,i.formatLong)}return W}).join("").match(FP).map(W=>{if(W==="''")return{isToken:!1,value:"'"};const q=W[0];if(q==="'")return{isToken:!1,value:KP(W)};if(VE[q])return{isToken:!0,value:W};if(q.match(YP))throw new RangeError("Format string contains an unescaped latin alphabet character `"+q+"`");return{isToken:!1,value:W}});i.localize.preprocessor&&(p=i.localize.preprocessor(m,p));const y={firstWeekContainsDate:l,weekStartsOn:u,locale:i};return p.map(W=>{if(!W.isToken)return W.value;const q=W.value;(!(t!=null&&t.useAdditionalWeekYearTokens)&&zP(q)||!(t!=null&&t.useAdditionalDayOfYearTokens)&&UP(q))&&BP(q,e,String(n));const ie=VE[q[0]];return ie(m,q,i.localize,y)}).join("")}function KP(n){const e=n.match($P);return e?e[1].replace(GP,"'"):n}function QP(n,e,t){const a=lu(),i=(t==null?void 0:t.locale)??a.locale??ow,l=2520,u=th(n,e);if(isNaN(u))throw new RangeError("Invalid time value");const m=Object.assign({},t,{addSuffix:t==null?void 0:t.addSuffix,comparison:u}),[p,y]=lf(t==null?void 0:t.in,...u>0?[e,n]:[n,e]),v=Xj(y,p),b=(Rh(y)-Rh(p))/1e3,T=Math.round((v-b)/60);let C;if(T<2)return t!=null&&t.includeSeconds?v<5?i.formatDistance("lessThanXSeconds",5,m):v<10?i.formatDistance("lessThanXSeconds",10,m):v<20?i.formatDistance("lessThanXSeconds",20,m):v<40?i.formatDistance("halfAMinute",0,m):v<60?i.formatDistance("lessThanXMinutes",1,m):i.formatDistance("xMinutes",1,m):T===0?i.formatDistance("lessThanXMinutes",1,m):i.formatDistance("xMinutes",T,m);if(T<45)return i.formatDistance("xMinutes",T,m);if(T<90)return i.formatDistance("aboutXHours",1,m);if(T<ME){const A=Math.round(T/60);return i.formatDistance("aboutXHours",A,m)}else{if(T<l)return i.formatDistance("xDays",1,m);if(T<qd){const A=Math.round(T/ME);return i.formatDistance("xDays",A,m)}else if(T<qd*2)return C=Math.round(T/qd),i.formatDistance("aboutXMonths",C,m)}if(C=Wj(y,p),C<12){const A=Math.round(T/qd);return i.formatDistance("xMonths",A,m)}else{const A=C%12,M=Math.trunc(C/12);return A<3?i.formatDistance("aboutXYears",M,m):A<9?i.formatDistance("overXYears",M,m):i.formatDistance("almostXYears",M+1,m)}}function qE(n,e){return QP(n,Bj(n),e)}const WP={lessThanXSeconds:{one:"menos de un segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"medio minuto",lessThanXMinutes:{one:"menos de un minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"alrededor de 1 hora",other:"alrededor de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 día",other:"{{count}} días"},aboutXWeeks:{one:"alrededor de 1 semana",other:"alrededor de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"alrededor de 1 mes",other:"alrededor de {{count}} meses"},xMonths:{one:"1 mes",other:"{{count}} meses"},aboutXYears:{one:"alrededor de 1 año",other:"alrededor de {{count}} años"},xYears:{one:"1 año",other:"{{count}} años"},overXYears:{one:"más de 1 año",other:"más de {{count}} años"},almostXYears:{one:"casi 1 año",other:"casi {{count}} años"}},XP=(n,e,t)=>{let a;const i=WP[n];return typeof i=="string"?a=i:e===1?a=i.one:a=i.other.replace("{{count}}",e.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"en "+a:"hace "+a:a},ZP={full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/y"},JP={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},e6={full:"{{date}} 'a las' {{time}}",long:"{{date}} 'a las' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},t6={date:Uo({formats:ZP,defaultWidth:"full"}),time:Uo({formats:JP,defaultWidth:"full"}),dateTime:Uo({formats:e6,defaultWidth:"full"})},n6={lastWeek:"'el' eeee 'pasado a la' p",yesterday:"'ayer a la' p",today:"'hoy a la' p",tomorrow:"'mañana a la' p",nextWeek:"eeee 'a la' p",other:"P"},r6={lastWeek:"'el' eeee 'pasado a las' p",yesterday:"'ayer a las' p",today:"'hoy a las' p",tomorrow:"'mañana a las' p",nextWeek:"eeee 'a las' p",other:"P"},a6=(n,e,t,a)=>e.getHours()!==1?r6[n]:n6[n],s6={narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","después de cristo"]},i6={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1º trimestre","2º trimestre","3º trimestre","4º trimestre"]},o6={narrow:["e","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],wide:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]},l6={narrow:["d","l","m","m","j","v","s"],short:["do","lu","ma","mi","ju","vi","sá"],abbreviated:["dom","lun","mar","mié","jue","vie","sáb"],wide:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"]},c6={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"}},u6={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"}},d6=(n,e)=>Number(n)+"º",h6={ordinalNumber:d6,era:$r({values:s6,defaultWidth:"wide"}),quarter:$r({values:i6,defaultWidth:"wide",argumentCallback:n=>Number(n)-1}),month:$r({values:o6,defaultWidth:"wide"}),day:$r({values:l6,defaultWidth:"wide"}),dayPeriod:$r({values:c6,defaultWidth:"wide",formattingValues:u6,defaultFormattingWidth:"wide"})},f6=/^(\d+)(º)?/i,m6=/\d+/i,p6={narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|a\.?\s?e\.?\s?c\.?|d\.?\s?c\.?|e\.?\s?c\.?)/i,wide:/^(antes de cristo|antes de la era com[uú]n|despu[eé]s de cristo|era com[uú]n)/i},g6={any:[/^ac/i,/^dc/i],wide:[/^(antes de cristo|antes de la era com[uú]n)/i,/^(despu[eé]s de cristo|era com[uú]n)/i]},y6={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234](º)? trimestre/i},v6={any:[/1/i,/2/i,/3/i,/4/i]},_6={narrow:/^[efmajsond]/i,abbreviated:/^(ene|feb|mar|abr|may|jun|jul|ago|sep|oct|nov|dic)/i,wide:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i},b6={narrow:[/^e/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^en/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i]},E6={narrow:/^[dlmjvs]/i,short:/^(do|lu|ma|mi|ju|vi|s[áa])/i,abbreviated:/^(dom|lun|mar|mi[ée]|jue|vie|s[áa]b)/i,wide:/^(domingo|lunes|martes|mi[ée]rcoles|jueves|viernes|s[áa]bado)/i},x6={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^do/i,/^lu/i,/^ma/i,/^mi/i,/^ju/i,/^vi/i,/^sa/i]},T6={narrow:/^(a|p|mn|md|(de la|a las) (mañana|tarde|noche))/i,any:/^([ap]\.?\s?m\.?|medianoche|mediodia|(de la|a las) (mañana|tarde|noche))/i},w6={any:{am:/^a/i,pm:/^p/i,midnight:/^mn/i,noon:/^md/i,morning:/mañana/i,afternoon:/tarde/i,evening:/tarde/i,night:/noche/i}},A6={ordinalNumber:iw({matchPattern:f6,parsePattern:m6,valueCallback:function(n){return parseInt(n,10)}}),era:Gr({matchPatterns:p6,defaultMatchWidth:"wide",parsePatterns:g6,defaultParseWidth:"any"}),quarter:Gr({matchPatterns:y6,defaultMatchWidth:"wide",parsePatterns:v6,defaultParseWidth:"any",valueCallback:n=>n+1}),month:Gr({matchPatterns:_6,defaultMatchWidth:"wide",parsePatterns:b6,defaultParseWidth:"any"}),day:Gr({matchPatterns:E6,defaultMatchWidth:"wide",parsePatterns:x6,defaultParseWidth:"any"}),dayPeriod:Gr({matchPatterns:T6,defaultMatchWidth:"any",parsePatterns:w6,defaultParseWidth:"any"})},As={code:"es",formatDistance:XP,formatLong:t6,formatRelative:a6,localize:h6,match:A6,options:{weekStartsOn:1,firstWeekContainsDate:1}},sn=[];for(let n=0;n<256;++n)sn.push((n+256).toString(16).slice(1));function S6(n,e=0){return(sn[n[e+0]]+sn[n[e+1]]+sn[n[e+2]]+sn[n[e+3]]+"-"+sn[n[e+4]]+sn[n[e+5]]+"-"+sn[n[e+6]]+sn[n[e+7]]+"-"+sn[n[e+8]]+sn[n[e+9]]+"-"+sn[n[e+10]]+sn[n[e+11]]+sn[n[e+12]]+sn[n[e+13]]+sn[n[e+14]]+sn[n[e+15]]).toLowerCase()}let Pp;const N6=new Uint8Array(16);function C6(){if(!Pp){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Pp=crypto.getRandomValues.bind(crypto)}return Pp(N6)}const R6=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),FE={randomUUID:R6};function Sy(n,e,t){var i;if(FE.randomUUID&&!n)return FE.randomUUID();n=n||{};const a=n.random??((i=n.rng)==null?void 0:i.call(n))??C6();if(a.length<16)throw new Error("Random bytes length must be >= 16");return a[6]=a[6]&15|64,a[8]=a[8]&63|128,S6(a)}const uw=dr(qe,"clients"),I6=async n=>{const e=Sy(),t=ft(qe,"clients",e),a={relationship:n.relationship||50,history:n.history||50,attitude:n.attitude||50,sensitivity:n.sensitivity||50,probability:n.probability||50};return await Ay(t,{id:e,name:n.name,email:n.email||"",phone:n.phone||"",debt:Number(n.debt)||0,createdAt:ct(),updatedAt:ct(),soul:a,status:"active",tags:n.tags||[],notes:n.notes||"",lastContact:null,paymentHistory:[],provider_id:n.provider_id||""}),e},cf=async n=>{const e=await un(ft(qe,"clients",n));return e.exists()?{id:e.id,...e.data()}:null},cu=async()=>(await La(Tr(uw,wr("name","asc")))).docs.map(e=>({id:e.id,...e.data()})),O6=async n=>{if(!n||n.trim()==="")return cu();const e=n.toLowerCase().trim();return(await La(uw)).docs.map(i=>({id:i.id,...i.data()})).filter(i=>i.name.toLowerCase().includes(e)||i.email&&i.email.toLowerCase().includes(e)||i.phone&&i.phone.includes(e))},D6=async(n,e)=>{const t=ft(qe,"clients",n);if(!(await un(t)).exists())throw new Error("Cliente no encontrado");return delete e.id,delete e.createdAt,await Mn(t,{...e,updatedAt:ct()}),n},dw=async(n,e,t=null)=>{const a=ft(qe,"clients",n),i=await un(a);if(!i.exists())throw new Error("Cliente no encontrado");const l=i.data(),u={debt:Number(e),updatedAt:ct()};if(t){const m={id:`payment-${Date.now()}`,date:new Date(new Date().toLocaleString("en-US",{timeZone:"America/Bogota"})),amount:Number(t.amount),type:t.type||"payment",notes:t.notes||"",previousDebt:Number(t.previousDebt||l.debt||0),remainingDebt:Number(e),processedBy:t.processedBy||null};u.paymentHistory=[...l.paymentHistory||[],m],u.lastPayment=ct(),Number(e)===0&&(u.status="paid",u.paidAt=ct())}return await Mn(a,u),{clientId:n,newDebt:Number(e),paymentProcessed:!!t}},j6=async n=>{const e=ft(qe,"clients",n);await Mn(e,{lastContact:ct(),updatedAt:ct()})},Ie={GREETING:"greeting",DEBT_NOTIFICATION:"debt_notification",NEGOTIATION:"negotiation",PAYMENT_CONFIRMATION:"payment_confirmation",FAREWELL:"farewell"},Zt={NEW:"new",ACTIVE:"active",INACTIVE:"inactive",CLOSED:"closed"},P6={neutral:{relationship:0,history:0,attitude:0,sensitivity:0,probability:0},accepts_payment:{relationship:5,history:10,attitude:10,sensitivity:-5,probability:20},offers_partial:{relationship:5,history:5,attitude:10,sensitivity:-5,probability:15},reschedule:{relationship:2,history:-5,attitude:5,sensitivity:0,probability:-5},evades:{relationship:-5,history:-5,attitude:-10,sensitivity:5,probability:-10},annoyed:{relationship:-10,history:-5,attitude:-15,sensitivity:10,probability:-15},refuses:{relationship:-20,history:-20,attitude:-20,sensitivity:20,probability:-30},thanks:{relationship:5,history:0,attitude:10,sensitivity:-5,probability:10},no_answer:{relationship:-5,history:-10,attitude:-5,sensitivity:0,probability:-10},confirms_payment:{relationship:10,history:20,attitude:20,sensitivity:-10,probability:30}},M6=async(n,e,t)=>{const a=ft(qe,"clients",n),i=await un(a);if(!i.exists())throw new Error("Cliente no encontrado");const l=i.data();await j6(n);const u={clientId:n,clientName:l.name,agentId:e,startedAt:ct(),updatedAt:ct(),status:Zt.NEW,isActive:!0,initialSoul:t||l.soul,currentSoul:t||l.soul,turns:[],nextActionDate:null,summary:null};return(await hj(dr(qe,"conversations"),u)).id},Mp=async(n,e)=>{const t=ft(qe,"conversations",n),a=await un(t);if(!a.exists())throw new Error("Conversación no encontrada");const i=a.data();let l={...i.currentSoul},u={relationship:0,history:0,attitude:0,sensitivity:0,probability:0};if(e.event&&e.event!=="neutral"){u=P6[e.event]||u;const b=T=>Math.min(Math.max(T,0),100);l={relationship:b(l.relationship+(u.relationship||0)),history:b(l.history+(u.history||0)),attitude:b(l.attitude+(u.attitude||0)),sensitivity:b(l.sensitivity+(u.sensitivity||0)),probability:b(l.probability+(u.probability||0))}}const m=new Date,p={id:Sy(),timestamp:m,timestampMillis:m.getTime(),...e,phase:e.phase||Ie.NEGOTIATION,deltas:u,currentSoul:l},y=[...i.turns,p],v=i.status===Zt.NEW?Zt.ACTIVE:i.status;if(await Mn(t,{turns:y,currentSoul:l,status:v,isActive:!0,updatedAt:ct()}),e.sender==="client"&&e.event!=="neutral"){const b=ft(qe,"clients",i.clientId);await Mn(b,{soul:l,updatedAt:ct()})}return{turns:y,currentSoul:l}},yi=async n=>{const e=await un(ft(qe,"conversations",n));if(!e.exists())return null;const t={id:e.id,...e.data()};if(t.clientId)try{const a=await un(ft(qe,"clients",t.clientId));a.exists()&&(t.client={id:a.id,...a.data()})}catch(a){console.error("Error al cargar datos del cliente:",a)}return t},Ny=async(n,e=5)=>{const t=Tr(dr(qe,"conversations"),Xt("clientId","==",n),wr("startedAt","desc"),Ds(e));return(await La(t)).docs.map(i=>({id:i.id,...i.data()}))},k6=async(n,e)=>{const t=ft(qe,"conversations",n),a=await un(t);if(!a.exists())throw new Error("Conversación no encontrada");const i=a.data();if(await Mn(t,{status:Zt.CLOSED,isActive:!1,closedAt:ct(),updatedAt:ct(),summary:{...e,createdAt:ct()}}),i.clientId){const l=ft(qe,"clients",i.clientId);await Mn(l,{soul:i.currentSoul,updatedAt:ct()})}return n},L6=async(n=null,e=10)=>{let t;return n?t=Tr(dr(qe,"conversations"),Xt("status","==",Zt.NEW),Xt("agentId","==",n),wr("startedAt","desc"),Ds(e)):t=Tr(dr(qe,"conversations"),Xt("status","==",Zt.NEW),wr("startedAt","desc"),Ds(e)),(await La(t)).docs.map(i=>({id:i.id,...i.data()}))},hw=async(n=null,e=10)=>{let t;return n?t=Tr(dr(qe,"conversations"),Xt("status","==",Zt.ACTIVE),Xt("isActive","==",!0),Xt("agentId","==",n),wr("startedAt","desc"),Ds(e)):t=Tr(dr(qe,"conversations"),Xt("status","==",Zt.ACTIVE),Xt("isActive","==",!0),wr("startedAt","desc"),Ds(e)),(await La(t)).docs.map(i=>({id:i.id,...i.data()}))},V6=async n=>{const e=Tr(dr(qe,"conversations"),Xt("clientId","==",n),Xt("isActive","==",!0),Xt("status","in",[Zt.NEW,Zt.ACTIVE]),wr("updatedAt","desc"));return(await La(e)).docs.map(a=>({id:a.id,...a.data()}))},fw=async(n=null,e=100)=>{let t;return n?t=Tr(dr(qe,"conversations"),Xt("status","==",Zt.CLOSED),Xt("agentId","==",n),wr("closedAt","desc"),Ds(e)):t=Tr(dr(qe,"conversations"),Xt("status","==",Zt.CLOSED),wr("closedAt","desc"),Ds(e)),(await La(t)).docs.map(i=>({id:i.id,...i.data()}))},U6=async(n=10)=>{const e=new Date,t=Tr(dr(qe,"conversations"),Xt("status","==",Zt.ACTIVE),Xt("isActive","==",!0),Xt("nextActionDate",">=",e),wr("nextActionDate","asc"),Ds(n));return(await La(t)).docs.map(i=>({id:i.id,...i.data()}))},z6=async(n,e)=>{try{const t=ft(qe,"conversations",n),a=await un(t);if(!a.exists())throw new Error("Conversación no encontrada");const i=a.data();if(await Mn(t,{currentSoul:e,updatedAt:ct()}),i.clientId){const l=ft(qe,"clients",i.clientId);await Mn(l,{soul:e,updatedAt:ct()})}return e}catch(t){throw console.error("Error al actualizar valores del alma:",t),t}},mw=async n=>{const e=ft(qe,"conversations",n);if(!(await un(e)).exists())throw new Error("Conversación no encontrada");return await dj(e),n},HE=async(n,e,t=!0)=>{const a=ft(qe,"conversations",n);if(!(await un(a)).exists())throw new Error("Conversación no encontrada");if(!Object.values(Zt).includes(e))throw new Error("Estado de conversación no válido");return await Mn(a,{status:e,isActive:t,updatedAt:ct()}),n},B6=async(n,e,t)=>{const a=ft(qe,"conversations",n),i=await un(a);if(!i.exists())throw new Error("Conversación no encontrada");const u=i.data().turns.map(m=>m.id===e?{...m,...t,phase:t.phase||m.phase,isEdited:!0,editedAt:new Date}:m);return await Mn(a,{turns:u,updatedAt:ct()}),u},q6=async(n,e)=>{const t=ft(qe,"conversations",n),a=await un(t);if(!a.exists())throw new Error("Conversación no encontrada");const l=a.data().turns.filter(u=>u.id!==e);return await Mn(t,{turns:l,updatedAt:ct()}),l},$E=async(n,e)=>{const t=ft(qe,"conversations",n),a=await un(t);if(!a.exists())throw new Error("Conversación no encontrada");const i=a.data(),l=e.deltas||{relationship:0,history:0,attitude:0,sensitivity:0,probability:0};let u={...i.currentSoul};if(e.event&&e.event!=="neutral"&&e.deltas){const v=b=>Math.min(Math.max(b,0),100);u={relationship:v(u.relationship+(l.relationship||0)),history:v(u.history+(l.history||0)),attitude:v(u.attitude+(l.attitude||0)),sensitivity:v(u.sensitivity+(l.sensitivity||0)),probability:v(u.probability+(l.probability||0))}}const m=new Date,p={id:Sy(),timestamp:m,timestampMillis:m.getTime(),...e,phase:e.phase||Ie.NEGOTIATION,deltas:l,currentSoul:u,isManual:!0},y=[...i.turns,p];if(await Mn(t,{turns:y,currentSoul:u,updatedAt:ct()}),e.updateClientSoul&&e.sender==="client"&&e.event!=="neutral"){const v=ft(qe,"clients",i.clientId);await Mn(v,{soul:u,updatedAt:ct()})}return{turns:y,currentSoul:u}},kp=({title:n,conversations:e,isLoading:t,emptyMessage:a="No hay conversaciones disponibles",showClientInfo:i=!0,onConversationDeleted:l=null})=>{const u=An(),[m,p]=P.useState(e),y=async(b,T)=>{if(T.stopPropagation(),window.confirm("¿Está seguro que desea eliminar esta conversación? Esta acción es permanente y no se puede deshacer."))try{await mw(b),l?l(b):p(C=>C.filter(A=>A.id!==b))}catch(C){console.error("Error al eliminar conversación:",C),alert("Error al eliminar la conversación: "+C.message)}};if(t)return f.jsxs("div",{className:"bg-white p-4 rounded-lg shadow mb-6",children:[f.jsx("h2",{className:"text-lg font-semibold mb-4",children:n}),f.jsx("div",{className:"animate-pulse flex space-x-4",children:f.jsxs("div",{className:"flex-1 space-y-4 py-1",children:[f.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),f.jsxs("div",{className:"space-y-2",children:[f.jsx("div",{className:"h-4 bg-gray-200 rounded"}),f.jsx("div",{className:"h-4 bg-gray-200 rounded w-5/6"})]})]})})]});const v=l?e:m;return f.jsxs("div",{className:"bg-white p-4 rounded-lg shadow mb-6",children:[f.jsx("h2",{className:"text-lg font-semibold mb-4",children:n}),v.length===0?f.jsx("p",{className:"text-gray-500 text-center py-4",children:a}):f.jsx("ul",{className:"divide-y divide-gray-200",children:v.map(b=>{const C=(b.turns&&b.turns.length>0?b.turns[b.turns.length-1].sender:null)==="client"?"border-l-4 border-green-500":"border-l-4 border-gray-300",A=b.startedAt?qE(new Date(b.startedAt.seconds*1e3),{addSuffix:!0,locale:As}):"Fecha desconocida";return f.jsxs("li",{className:`p-3 hover:bg-gray-50 cursor-pointer ${C}`,onClick:()=>u(`/conversation/${b.id}`),children:[f.jsxs("div",{className:"flex justify-between",children:[f.jsxs("span",{className:"font-medium",children:[i?b.clientName||"Cliente":"",b.isActive&&f.jsx("span",{className:"ml-2 px-1.5 py-0.5 bg-green-100 text-green-800 text-xs rounded-full",children:"Activa"})]}),f.jsxs("div",{className:"flex items-center space-x-2",children:[f.jsx("span",{className:"text-sm text-gray-500",children:A}),f.jsx("button",{className:"text-red-500 hover:text-red-700",onClick:M=>y(b.id,M),title:"Eliminar conversación",children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),b.turns&&b.turns.length>0&&f.jsx("p",{className:"text-sm text-gray-600 mt-1 truncate",children:b.turns[b.turns.length-1].message}),b.nextActionDate&&f.jsxs("div",{className:"mt-2 text-xs text-blue-600",children:["Próxima acción: ",qE(new Date(b.nextActionDate.seconds*1e3),{addSuffix:!0,locale:As})]})]},b.id)})})]})},F6=({onFilterChange:n})=>{const[e,t]=P.useState("newest"),a=i=>{t(i),n(i)};return f.jsxs("div",{className:"flex space-x-2 mb-4",children:[f.jsx("button",{className:`px-3 py-1 text-sm rounded-full ${e==="newest"?"bg-primary-100 text-primary-800":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,onClick:()=>a("newest"),children:"Más recientes"}),f.jsx("button",{className:`px-3 py-1 text-sm rounded-full ${e==="upcoming"?"bg-primary-100 text-primary-800":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,onClick:()=>a("upcoming"),children:"Próxima fecha"})]})},H6=()=>{const{currentUser:n}=ou(),[e,t]=P.useState([]),[a,i]=P.useState([]),[l,u]=P.useState([]),[m,p]=P.useState(!0),[y,v]=P.useState("newest");P.useEffect(()=>{(async()=>{p(!0);try{let A;y==="newest"?A=await L6(n.uid):A=await U6();const M=await hw(n.uid),I=await fw(n.uid);t(A),i(M),u(I)}catch(A){console.error("Error al cargar conversaciones:",A)}finally{p(!1)}})()},[n,y]);const b=C=>{v(C)},T=C=>{t(A=>A.filter(M=>M.id!==C)),i(A=>A.filter(M=>M.id!==C)),u(A=>A.filter(M=>M.id!==C))};return f.jsxs("div",{className:"container mx-auto px-4 py-6",children:[f.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Dashboard"}),f.jsx(kj,{}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[f.jsxs("div",{children:[f.jsxs("div",{className:"mb-2",children:[f.jsx("h2",{className:"text-lg font-semibold",children:"Nuevas Conversaciones"}),f.jsx(F6,{onFilterChange:b})]}),f.jsx(kp,{title:"",conversations:e,isLoading:m,emptyMessage:"No hay nuevas conversaciones",onConversationDeleted:T}),f.jsx(kp,{title:"Conversaciones Activas",conversations:a,isLoading:m,emptyMessage:"No hay conversaciones activas",onConversationDeleted:T})]}),f.jsx("div",{children:f.jsx(kp,{title:"Historial de Conversaciones",conversations:l,isLoading:m,emptyMessage:"No hay conversaciones en el historial",onConversationDeleted:T})})]})]})},$6=dr(qe,"providers"),$c=async n=>{if(!n)return await mg("39gNkqv2h1P9O1FLBjLf");const e=ft(qe,"providers",n),t=await un(e);return t.exists()?{id:t.id,...t.data()}:await mg("39gNkqv2h1P9O1FLBjLf")},mg=async n=>{if(!n)return null;const e=ft(qe,"providers",n),t=await un(e);return t.exists()?{id:t.id,...t.data()}:null},pw=async()=>(await La(Tr($6,wr("name","asc")))).docs.map(e=>({id:e.id,...e.data()})),Wo=({initialValues:n,onChange:e,readOnly:t=!1})=>{const[a,i]=P.useState({relationship:50,history:50,attitude:50,sensitivity:50,probability:50,...n});P.useEffect(()=>{n&&i({relationship:50,history:50,attitude:50,sensitivity:50,probability:50,...n})},[n]);const l=(p,y)=>{const v={...a,[p]:parseInt(y,10)};i(v),e&&e(v)},u=p=>p<30?"bg-red-500":p<50?"bg-orange-500":p<70?"bg-yellow-500":"bg-green-500",m=(p,y,v)=>f.jsxs("div",{className:"mb-6",children:[f.jsxs("div",{className:"flex justify-between items-center mb-2",children:[f.jsx("label",{className:"text-sm font-medium text-gray-700",children:p}),f.jsx("span",{className:`px-2 py-1 rounded-full text-white text-xs font-medium ${u(a[y])}`,children:a[y]})]}),f.jsx("input",{type:"range",min:"0",max:"100",step:"1",value:a[y],onChange:b=>l(y,b.target.value),disabled:t,className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"}),f.jsx("p",{className:"mt-1 text-sm text-gray-500",children:v})]});return f.jsxs("div",{className:"space-y-2",children:[m("Relación/Cercanía","relationship","Indica cuán cercana es la relación con el cliente."),m("Historial de Pago","history","Nivel de cumplimiento de pagos en el pasado."),m("Actitud en la Llamada","attitude","Disposición emocional del cliente en la conversación."),m("Sensibilidad a Presión","sensitivity","Nivel de reacción negativa a la insistencia o tono de urgencia."),m("Probabilidad de Pago","probability","Estimación de si pagará pronto.")]})},G6=()=>{const{clientId:n}=Ag(),e=An(),[t,a]=P.useState(null),[i,l]=P.useState(""),[u,m]=P.useState([]),[p,y]=P.useState([]),[v,b]=P.useState([]),[T,C]=P.useState(!0),[A,M]=P.useState(!1),[I,H]=P.useState(null);P.useEffect(()=>{(async()=>{try{C(!0);const j=await cf(n);a(j),H(j);const V=await V6(n),z=await Ny(n,10);y(V);const O=z.filter(dt=>!dt.isActive);b(O)}catch(j){console.error("Error al cargar datos del cliente:",j)}finally{C(!1)}})()},[n]);const W=async N=>{const j=await mg(N),V=j?j.name:"Sin proveedor";l(V)};P.useEffect(()=>{t!=null&&t.provider_id&&W(t.provider_id)},[t]);const q=async()=>{try{const N=await pw();m(N)}catch(N){console.error("Error al cargar proveedores:",N)}};P.useEffect(()=>{q()},[A]);const ie=N=>{const{name:j,value:V}=N.target;H(z=>({...z,[j]:j==="debt"?parseFloat(V)||0:V}))},le=N=>{H(j=>({...j,soul:N}))},pe=async N=>{N.preventDefault();try{C(!0),await D6(n,{name:I.name,email:I.email,phone:I.phone,notes:I.notes,soul:I.soul,provider_id:I.provider_id?I.provider_id:""}),t.debt!==I.debt&&await dw(n,I.debt),a(I),M(!1)}catch(j){console.error("Error al actualizar cliente:",j)}finally{C(!1)}},k=()=>{e(`/conversation/new/${n}`)},R=N=>{if(!N)return"N/A";const j=new Date(N.seconds*1e3);return zo(j,"PPP",{locale:As})};return T&&!t?f.jsx("div",{className:"container mx-auto px-4 py-6",children:f.jsxs("div",{className:"animate-pulse",children:[f.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-6"}),f.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-4"}),f.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-4"}),f.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/3 mb-4"})]})}):t?f.jsxs("div",{className:"container mx-auto px-4 py-6",children:[f.jsxs("div",{className:"flex justify-between items-center mb-6",children:[f.jsx("h1",{className:"text-2xl font-bold",children:t.name}),f.jsx("div",{className:"flex gap-2",children:A?f.jsx("button",{className:"btn-secondary",onClick:()=>{H(t),M(!1)},children:"Cancelar Edición"}):f.jsxs(f.Fragment,{children:[f.jsx("button",{className:"btn-secondary",onClick:()=>M(!0),children:"Editar"}),f.jsx("button",{className:"btn-primary",onClick:k,children:"Nueva Conversación"})]})})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[f.jsxs("div",{className:"md:col-span-2",children:[A?f.jsxs("form",{onSubmit:pe,className:"bg-white rounded-lg shadow p-6",children:[f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"name",className:"label",children:"Nombre completo"}),f.jsx("input",{type:"text",id:"name",name:"name",className:"input",value:I.name,onChange:ie,required:!0})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"email",className:"label",children:"Email"}),f.jsx("input",{type:"email",id:"email",name:"email",className:"input",value:I.email,onChange:ie})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"phone",className:"label",children:"Teléfono"}),f.jsx("input",{type:"text",id:"phone",name:"phone",className:"input",value:I.phone,onChange:ie,required:!0})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"debt",className:"label",children:"Monto de deuda"}),f.jsx("input",{type:"number",id:"debt",name:"debt",className:"input",value:I.debt,onChange:ie,required:!0})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"provider",className:"label",children:"Proveedor"}),f.jsxs("select",{id:"provider",name:"provider_id",className:"input",value:I.provider_id||"",onChange:ie,children:[f.jsx("option",{value:"",children:"Seleccionar proveedor"}),u.map(N=>f.jsx("option",{value:N.id,children:N.name},N.id))]})]}),f.jsxs("div",{className:"form-group md:col-span-2",children:[f.jsx("label",{htmlFor:"notes",className:"label",children:"Notas"}),f.jsx("textarea",{id:"notes",name:"notes",rows:"3",className:"input",value:I.notes,onChange:ie})]})]}),f.jsxs("div",{className:"mt-6",children:[f.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Variables del Alma"}),f.jsx(Wo,{initialValues:I.soul,onChange:le,readOnly:!1}),f.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Ajuste las variables de relación con el cliente según su conocimiento actual."})]}),f.jsx("div",{className:"flex justify-end mt-6",children:f.jsx("button",{type:"submit",className:"btn-primary",disabled:T,children:T?"Guardando...":"Guardar Cambios"})})]}):f.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-y-4",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Email"}),f.jsx("p",{children:t.email||"No disponible"})]}),f.jsxs("div",{children:[f.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Teléfono"}),f.jsx("p",{children:t.phone||"No disponible"})]}),f.jsxs("div",{children:[f.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Monto de deuda"}),f.jsxs("p",{className:"text-xl font-semibold text-red-600",children:["$",t.debt.toLocaleString("es-CO")]})]}),f.jsxs("div",{children:[f.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Último contacto"}),f.jsx("p",{children:t.lastContact?R(t.lastContact):"Sin contacto reciente"})]}),f.jsxs("div",{children:[f.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Proveedor"}),f.jsx("p",{children:t.provider_id?i:"Sin proveedor"})]}),t.notes&&f.jsxs("div",{className:"md:col-span-2 mt-4",children:[f.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"Notas"}),f.jsx("p",{className:"text-gray-700 whitespace-pre-line",children:t.notes})]})]})}),f.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mt-6",children:[f.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Conversaciones Activas"}),p.length===0?f.jsx("p",{className:"text-gray-500 text-center py-4",children:"No hay conversaciones activas con este cliente."}):f.jsx("ul",{className:"divide-y divide-gray-200",children:p.map(N=>{const j=N.startedAt?zo(new Date(N.startedAt.seconds*1e3),"PPp",{locale:As}):"Fecha desconocida",V=N.turns&&N.turns.length>0?N.turns[N.turns.length-1]:null;return f.jsxs("li",{className:"py-3 cursor-pointer hover:bg-gray-50",onClick:()=>e(`/conversation/${N.id}`),children:[f.jsxs("div",{className:"flex justify-between",children:[f.jsxs("span",{className:"font-medium",children:["Conversación del ",j]}),f.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Activa"})]}),V&&f.jsxs("p",{className:"text-sm text-gray-600 mt-1 truncate",children:[f.jsx("span",{className:"font-medium",children:V.sender==="agent"?"Agente: ":"Cliente: "}),V.message]})]},N.id)})}),f.jsx("div",{className:"mt-4",children:f.jsx("button",{className:"btn-primary",onClick:k,children:"Iniciar Nueva Conversación"})})]}),f.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mt-6",children:[f.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Historial de Conversaciones"}),v.length===0?f.jsx("p",{className:"text-gray-500 text-center py-4",children:"No hay conversaciones en el historial."}):f.jsx("ul",{className:"divide-y divide-gray-200",children:v.map(N=>{const j=N.startedAt?zo(new Date(N.startedAt.seconds*1e3),"PPp",{locale:As}):"Fecha desconocida",V=N.turns&&N.turns.length>0?N.turns[N.turns.length-1]:null;return f.jsxs("li",{className:"py-3 cursor-pointer hover:bg-gray-50",onClick:()=>e(`/conversation/${N.id}`),children:[f.jsxs("div",{className:"flex justify-between",children:[f.jsxs("span",{className:"font-medium",children:["Conversación del ",j]}),f.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${N.status==="closed"?"bg-gray-100 text-gray-800":"bg-blue-100 text-blue-800"}`,children:N.status==="closed"?"Finalizada":"Inactiva"})]}),V&&f.jsxs("p",{className:"text-sm text-gray-600 mt-1 truncate",children:[f.jsx("span",{className:"font-medium",children:V.sender==="agent"?"Agente: ":"Cliente: "}),V.message]}),N.summary&&f.jsxs("div",{className:"mt-1 text-xs",children:[f.jsx("span",{className:"text-gray-500",children:"Resultado: "}),f.jsx("span",{className:"font-medium",children:N.summary.result})]})]},N.id)})})]})]}),f.jsx("div",{children:f.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[f.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Variables del Alma"}),f.jsx(Wo,{initialValues:A?I.soul:t.soul,onChange:A?le:null,readOnly:!A}),f.jsxs("div",{className:"mt-4 text-sm text-gray-500",children:[f.jsx("p",{children:"Estas variables representan la disposición y relación del cliente, y se ajustan automáticamente durante las conversaciones."}),f.jsx("p",{className:"mt-2",children:'Para modificar estos valores, utilice el botón "Editar" en la parte superior.'})]})]})})]})]}):f.jsxs("div",{className:"container mx-auto px-4 py-6",children:[f.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:[f.jsx("strong",{className:"font-bold",children:"Error:"}),f.jsxs("span",{className:"block sm:inline",children:[" ","No se pudo encontrar el cliente."]})]}),f.jsx("button",{className:"btn-secondary mt-4",onClick:()=>e(-1),children:"Volver"})]})},Y6=()=>{const n=An(),[e,t]=P.useState(""),[a,i]=P.useState([]),[l,u]=P.useState(!1),[m,p]=P.useState(!1),y=async v=>{if(v.preventDefault(),!!e.trim()){u(!0),p(!0);try{const b=await O6(e);i(b)}catch(b){console.error("Error al buscar clientes:",b)}finally{u(!1)}}};return f.jsxs("div",{className:"container mx-auto px-4 py-6",children:[f.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Buscar Cliente"}),f.jsx("form",{onSubmit:y,className:"mb-6",children:f.jsxs("div",{className:"flex gap-2",children:[f.jsx("input",{type:"text",className:"input flex-grow",placeholder:"Nombre, teléfono o email del cliente",value:e,onChange:v=>t(v.target.value)}),f.jsx("button",{type:"submit",className:"btn-primary",disabled:l,children:l?"Buscando...":"Buscar"})]})}),f.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[f.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Resultados"}),l?f.jsxs("div",{className:"animate-pulse space-y-4 py-4",children:[f.jsx("div",{className:"h-5 bg-gray-200 rounded w-3/4"}),f.jsx("div",{className:"h-5 bg-gray-200 rounded w-1/2"}),f.jsx("div",{className:"h-5 bg-gray-200 rounded w-5/6"})]}):a.length===0?f.jsx("p",{className:"text-gray-500 text-center py-4",children:m?"No se encontraron resultados. Intente con otros términos de búsqueda.":"Ingrese un término de búsqueda para encontrar clientes."}):f.jsx("ul",{className:"divide-y divide-gray-200",children:a.map(v=>f.jsxs("li",{className:"py-3 hover:bg-gray-50 cursor-pointer",onClick:()=>n(`/clients/${v.id}`),children:[f.jsxs("div",{className:"flex justify-between",children:[f.jsx("span",{className:"font-medium",children:v.name}),f.jsxs("span",{className:"text-red-600 font-medium",children:["$",v.debt.toLocaleString("es-CO")]})]}),f.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:[v.phone," ",v.email&&`| ${v.email}`]}),f.jsxs("div",{className:"flex mt-2 space-x-2",children:[f.jsx("button",{className:"text-sm text-primary-600 hover:text-primary-800",onClick:b=>{b.stopPropagation(),n(`/clients/${v.id}`)},children:"Ver detalles"}),f.jsx("button",{className:"text-sm text-primary-600 hover:text-primary-800",onClick:b=>{b.stopPropagation(),n(`/conversation/new/${v.id}`)},children:"Iniciar conversación"})]})]},v.id))})]}),f.jsx("div",{className:"mt-6",children:f.jsx("button",{className:"btn-secondary",onClick:()=>n(-1),children:"Volver"})})]})},K6=()=>{const n=An(),[e,t]=P.useState({name:"",email:"",phone:"",debt:"",notes:"",provider_id:""}),[a,i]=P.useState({relationship:50,history:50,attitude:50,sensitivity:50,probability:50}),[l,u]=P.useState(!1),[m,p]=P.useState(""),[y,v]=P.useState([]),b=async()=>{try{const A=await pw();v(A)}catch(A){console.error("Error al cargar proveedores:",A)}};P.useEffect(()=>{b()},[]);const T=A=>{const{name:M,value:I}=A.target;t(H=>({...H,[M]:M==="debt"?parseFloat(I)||"":I}))},C=async A=>{if(A.preventDefault(),p(""),!e.name.trim()){p("El nombre del cliente es obligatorio");return}if(!e.phone.trim()){p("El teléfono es obligatorio");return}if(isNaN(e.debt)||e.debt===""){p("Debe ingresar un monto de deuda válido");return}try{u(!0);const M={...e,...a},I=await I6(M);console.log("Cliente creado con ID:",I),n(`/clients/${I}`)}catch(M){console.error("Error al crear el cliente:",M),p("Ocurrió un error al crear el cliente. Por favor, intente nuevamente.")}finally{u(!1)}};return f.jsxs("div",{className:"container mx-auto px-4 py-6",children:[f.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Agregar Nuevo Cliente"}),m&&f.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-6",role:"alert",children:f.jsx("span",{className:"block sm:inline",children:m})}),f.jsxs("form",{onSubmit:C,className:"bg-white rounded-lg shadow p-6",children:[f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"name",className:"label",children:"Nombre completo *"}),f.jsx("input",{type:"text",id:"name",name:"name",className:"input",value:e.name,onChange:T,required:!0})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"email",className:"label",children:"Email"}),f.jsx("input",{type:"email",id:"email",name:"email",className:"input",value:e.email,onChange:T})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"phone",className:"label",children:"Teléfono *"}),f.jsx("input",{type:"text",id:"phone",name:"phone",className:"input",value:e.phone,onChange:T,required:!0})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"debt",className:"label",children:"Monto de deuda *"}),f.jsx("input",{type:"number",id:"debt",name:"debt",className:"input",value:e.debt,onChange:T,required:!0})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"provider",className:"label",children:"Proveedor"}),f.jsxs("select",{id:"provider",name:"provider_id",className:"input",value:e.provider_id,onChange:T,children:[f.jsx("option",{value:"",children:"Seleccionar proveedor"}),y.map(A=>f.jsx("option",{value:A.id,children:A.name},A.id))]})]}),f.jsxs("div",{className:"form-group md:col-span-2",children:[f.jsx("label",{htmlFor:"notes",className:"label",children:"Notas"}),f.jsx("textarea",{id:"notes",name:"notes",rows:"3",className:"input",value:e.notes,onChange:T})]})]}),f.jsx("h3",{className:"text-lg font-semibold mt-8 mb-4",children:"Variables del Alma del Cliente"}),f.jsx(Wo,{initialValues:a,onChange:i}),f.jsxs("div",{className:"flex justify-end gap-4 mt-8",children:[f.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>n(-1),disabled:l,children:"Cancelar"}),f.jsx("button",{type:"submit",className:"btn-primary",disabled:l,children:l?"Guardando...":"Guardar Cliente"})]})]})]})},Q6=()=>{const n=An(),[e,t]=P.useState([]),[a,i]=P.useState(!0),[l,u]=P.useState("");P.useEffect(()=>{(async()=>{try{const y=await cu();t(y)}catch(y){console.error("Error al cargar clientes:",y)}finally{i(!1)}})()},[]);const m=e.filter(p=>p.name.toLowerCase().includes(l.toLowerCase())||p.email.toLowerCase().includes(l.toLowerCase())||p.phone.includes(l));return f.jsxs("div",{className:"container mx-auto px-4 py-6",children:[f.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Seleccionar Cliente para Conversación"}),f.jsx("div",{className:"mb-6",children:f.jsx("input",{type:"text",className:"input",placeholder:"Buscar cliente...",value:l,onChange:p=>u(p.target.value)})}),f.jsx("div",{className:"bg-white rounded-lg shadow",children:a?f.jsx("div",{className:"p-4",children:"Cargando clientes..."}):m.length===0?f.jsxs("div",{className:"p-4 text-center",children:[f.jsx("p",{className:"text-gray-500",children:"No se encontraron clientes."}),f.jsx("button",{className:"btn-primary mt-4",onClick:()=>n("/clients/new"),children:"Agregar Nuevo Cliente"})]}):f.jsx("ul",{className:"divide-y divide-gray-200",children:m.map(p=>f.jsxs("li",{className:"p-4 hover:bg-gray-50 cursor-pointer",onClick:()=>n(`/conversation/new/${p.id}`),children:[f.jsxs("div",{className:"flex justify-between",children:[f.jsx("span",{className:"font-medium",children:p.name}),f.jsxs("span",{className:"text-primary-600 font-semibold",children:["$",p.debt.toLocaleString()]})]}),f.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:[p.phone," | ",p.email]})]},p.id))})}),f.jsx("div",{className:"mt-6",children:f.jsx("button",{className:"btn-secondary",onClick:()=>n(-1),children:"Volver"})})]})},W6=()=>{const n=An(),[e,t]=P.useState([]),[a,i]=P.useState(!0),[l,u]=P.useState("");P.useEffect(()=>{(async()=>{try{i(!0);const y=await cu();t(y)}catch(y){console.error("Error al cargar clientes:",y)}finally{i(!1)}})()},[]);const m=e.filter(p=>p.name.toLowerCase().includes(l.toLowerCase())||p.email&&p.email.toLowerCase().includes(l.toLowerCase())||p.phone&&p.phone.includes(l));return f.jsxs("div",{className:"container mx-auto px-4 py-6",children:[f.jsxs("div",{className:"flex justify-between items-center mb-6",children:[f.jsx("h1",{className:"text-2xl font-bold",children:"Clientes"}),f.jsxs("div",{className:"flex space-x-2",children:[f.jsxs("button",{className:"btn-primary flex items-center gap-2",onClick:()=>n("/clients/new"),children:[f.jsx(nw,{})," Agregar Cliente"]}),f.jsxs("button",{className:"btn-secondary flex items-center gap-2",onClick:()=>n("/clients/search"),children:[f.jsx(rw,{})," Búsqueda Avanzada"]})]})]}),f.jsx("div",{className:"mb-6",children:f.jsx("input",{type:"text",className:"input",placeholder:"Buscar cliente por nombre, email o teléfono...",value:l,onChange:p=>u(p.target.value)})}),f.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:a?f.jsx("div",{className:"p-4",children:f.jsxs("div",{className:"animate-pulse space-y-4",children:[f.jsx("div",{className:"h-5 bg-gray-200 rounded"}),f.jsx("div",{className:"h-5 bg-gray-200 rounded"}),f.jsx("div",{className:"h-5 bg-gray-200 rounded"})]})}):m.length===0?f.jsxs("div",{className:"p-8 text-center",children:[f.jsx("p",{className:"text-gray-500 mb-4",children:"No se encontraron clientes."}),f.jsx("button",{className:"btn-primary",onClick:()=>n("/clients/new"),children:"Agregar Nuevo Cliente"})]}):f.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[f.jsx("thead",{className:"bg-gray-50",children:f.jsxs("tr",{children:[f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nombre"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contacto"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Deuda"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado del Alma"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),f.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:m.map(p=>f.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>n(`/clients/${p.id}`),children:[f.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:f.jsx("div",{className:"font-medium text-gray-900",children:p.name})}),f.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[f.jsx("div",{className:"text-sm text-gray-500",children:p.phone}),f.jsx("div",{className:"text-sm text-gray-500",children:p.email})]}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:f.jsxs("div",{className:"text-sm font-medium text-red-600",children:["$",p.debt.toLocaleString("es-CO")]})}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:f.jsx("div",{className:"flex space-x-1",children:p.soul&&f.jsxs(f.Fragment,{children:[f.jsxs("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${p.soul.relationship>70?"bg-green-100 text-green-800":p.soul.relationship>40?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:["R:",p.soul.relationship]}),f.jsxs("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${p.soul.probability>70?"bg-green-100 text-green-800":p.soul.probability>40?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:["P:",p.soul.probability]})]})})}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:f.jsx("button",{className:"text-primary-600 hover:text-primary-900 mr-3",onClick:y=>{y.stopPropagation(),n(`/conversation/new/${p.id}`)},children:"Iniciar Conversación"})})]},p.id))})]})})]})},X6=async(n,e,t)=>{const a=n.toLowerCase();let i="neutral";a.includes("pagar")||a.includes("transferir")||a.includes("depositar")?a.includes("completo")||a.includes("todo")?i="accepts_payment":a.includes("parte")||a.includes("parcial")||a.includes("algo")?i="offers_partial":(a.includes("próxima")||a.includes("después")||a.includes("luego"))&&(i="reschedule"):a.includes("gracias")||a.includes("agradezco")?i="thanks":a.includes("ya pagué")||a.includes("realicé el pago")||a.includes("transferí")?i="confirms_payment":a.includes("no puedo")||a.includes("imposible")?i="evades":a.includes("molesto")||a.includes("harto")||a.includes("fastidio")?i="annoyed":(a.includes("no voy a pagar")||a.includes("no pagaré")||a.includes("olvídate"))&&(i="refuses");const l={neutral:{relationship:0,history:0,attitude:0,sensitivity:0,probability:0},accepts_payment:{relationship:5,history:10,attitude:10,sensitivity:-5,probability:20},offers_partial:{relationship:5,history:5,attitude:10,sensitivity:-5,probability:15},reschedule:{relationship:2,history:-5,attitude:5,sensitivity:0,probability:-5},evades:{relationship:-5,history:-5,attitude:-10,sensitivity:5,probability:-10},annoyed:{relationship:-10,history:-5,attitude:-15,sensitivity:10,probability:-15},refuses:{relationship:-20,history:-20,attitude:-20,sensitivity:20,probability:-30},thanks:{relationship:5,history:0,attitude:10,sensitivity:-5,probability:10},no_answer:{relationship:-5,history:-10,attitude:-5,sensitivity:0,probability:-10},confirms_payment:{relationship:10,history:20,attitude:20,sensitivity:-10,probability:30}},u=l[i]||l.neutral;return{eventType:i,deltas:u,explanation:`Evento detectado "${i}" basado en palabras clave como "${a.split(" ").slice(0,3).join(" ")}..."`,confidence:.7}},Z6=async(n,e,t,a)=>{let i="neutral";e.relationship>70?e.sensitivity>70?i="friendly_no_pressure":i="friendly":e.relationship<40&&(e.sensitivity<40?i="formal_direct":i="formal_soft");const l={accepts_payment:{friendly_no_pressure:"¡Excelente noticia! Gracias por tu disposición. Cuando puedas hacer el pago, solo avísame.",friendly:"¡Perfecto! Muchas gracias por tu colaboración. ¿Te envío los datos para el pago?",formal_direct:"Muy bien. Le agradecemos su decisión. Necesitamos que realice el pago antes del fin de semana.",formal_soft:"Gracias por su confirmación. ¿Prefiere que le enviemos los datos bancarios por este medio?",neutral:"Entendido. ¿Desea que le enviemos la información para realizar el pago?"},offers_partial:{friendly_no_pressure:"Agradezco mucho tu esfuerzo por pagar una parte. Cualquier aporte es bienvenido.",friendly:"Gracias por tu disposición. Un pago parcial nos ayuda mucho. ¿Cuándo podrías realizar este abono?",formal_direct:"Tomamos nota de su oferta de pago parcial. ¿Cuándo podríamos esperar el resto del monto?",formal_soft:"Entendemos su situación. El pago parcial es un buen primer paso. ¿Cuándo sería posible?",neutral:"De acuerdo con el pago parcial. ¿Qué monto podría transferir y cuándo?"},default:{friendly_no_pressure:"Entiendo perfectamente. No te preocupes, cuando puedas realizar el pago me avisas.",friendly:"Agradezco que estemos en contacto. ¿Hay algo en lo que pueda ayudarte para facilitar el proceso?",formal_direct:"Necesitamos regularizar su situación. ¿Podría por favor indicarnos una fecha concreta de pago?",formal_soft:"Entendemos que pueden surgir contratiempos. ¿Podría comentarnos cuándo le sería posible realizar el pago?",neutral:"¿Podría por favor indicarnos cuándo podríamos esperar el pago?"}},u=l[a]||l.default;return{responseText:u[i]||u.neutral,explanation:`Respuesta generada usando tono "${i}" basado en Relación: ${e.relationship}, Sensibilidad: ${e.sensitivity}`,confidence:.8}};function gw(n,e){return function(){return n.apply(e,arguments)}}const{toString:J6}=Object.prototype,{getPrototypeOf:Cy}=Object,{iterator:uf,toStringTag:yw}=Symbol,df=(n=>e=>{const t=J6.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),Sr=n=>(n=n.toLowerCase(),e=>df(e)===n),hf=n=>e=>typeof e===n,{isArray:ol}=Array,Gc=hf("undefined");function e3(n){return n!==null&&!Gc(n)&&n.constructor!==null&&!Gc(n.constructor)&&jn(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const vw=Sr("ArrayBuffer");function t3(n){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&vw(n.buffer),e}const n3=hf("string"),jn=hf("function"),_w=hf("number"),ff=n=>n!==null&&typeof n=="object",r3=n=>n===!0||n===!1,nh=n=>{if(df(n)!=="object")return!1;const e=Cy(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(yw in n)&&!(uf in n)},a3=Sr("Date"),s3=Sr("File"),i3=Sr("Blob"),o3=Sr("FileList"),l3=n=>ff(n)&&jn(n.pipe),c3=n=>{let e;return n&&(typeof FormData=="function"&&n instanceof FormData||jn(n.append)&&((e=df(n))==="formdata"||e==="object"&&jn(n.toString)&&n.toString()==="[object FormData]"))},u3=Sr("URLSearchParams"),[d3,h3,f3,m3]=["ReadableStream","Request","Response","Headers"].map(Sr),p3=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function uu(n,e,{allOwnKeys:t=!1}={}){if(n===null||typeof n>"u")return;let a,i;if(typeof n!="object"&&(n=[n]),ol(n))for(a=0,i=n.length;a<i;a++)e.call(null,n[a],a,n);else{const l=t?Object.getOwnPropertyNames(n):Object.keys(n),u=l.length;let m;for(a=0;a<u;a++)m=l[a],e.call(null,n[m],m,n)}}function bw(n,e){e=e.toLowerCase();const t=Object.keys(n);let a=t.length,i;for(;a-- >0;)if(i=t[a],e===i.toLowerCase())return i;return null}const xi=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Ew=n=>!Gc(n)&&n!==xi;function pg(){const{caseless:n}=Ew(this)&&this||{},e={},t=(a,i)=>{const l=n&&bw(e,i)||i;nh(e[l])&&nh(a)?e[l]=pg(e[l],a):nh(a)?e[l]=pg({},a):ol(a)?e[l]=a.slice():e[l]=a};for(let a=0,i=arguments.length;a<i;a++)arguments[a]&&uu(arguments[a],t);return e}const g3=(n,e,t,{allOwnKeys:a}={})=>(uu(e,(i,l)=>{t&&jn(i)?n[l]=gw(i,t):n[l]=i},{allOwnKeys:a}),n),y3=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),v3=(n,e,t,a)=>{n.prototype=Object.create(e.prototype,a),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:e.prototype}),t&&Object.assign(n.prototype,t)},_3=(n,e,t,a)=>{let i,l,u;const m={};if(e=e||{},n==null)return e;do{for(i=Object.getOwnPropertyNames(n),l=i.length;l-- >0;)u=i[l],(!a||a(u,n,e))&&!m[u]&&(e[u]=n[u],m[u]=!0);n=t!==!1&&Cy(n)}while(n&&(!t||t(n,e))&&n!==Object.prototype);return e},b3=(n,e,t)=>{n=String(n),(t===void 0||t>n.length)&&(t=n.length),t-=e.length;const a=n.indexOf(e,t);return a!==-1&&a===t},E3=n=>{if(!n)return null;if(ol(n))return n;let e=n.length;if(!_w(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=n[e];return t},x3=(n=>e=>n&&e instanceof n)(typeof Uint8Array<"u"&&Cy(Uint8Array)),T3=(n,e)=>{const a=(n&&n[uf]).call(n);let i;for(;(i=a.next())&&!i.done;){const l=i.value;e.call(n,l[0],l[1])}},w3=(n,e)=>{let t;const a=[];for(;(t=n.exec(e))!==null;)a.push(t);return a},A3=Sr("HTMLFormElement"),S3=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,a,i){return a.toUpperCase()+i}),GE=(({hasOwnProperty:n})=>(e,t)=>n.call(e,t))(Object.prototype),N3=Sr("RegExp"),xw=(n,e)=>{const t=Object.getOwnPropertyDescriptors(n),a={};uu(t,(i,l)=>{let u;(u=e(i,l,n))!==!1&&(a[l]=u||i)}),Object.defineProperties(n,a)},C3=n=>{xw(n,(e,t)=>{if(jn(n)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const a=n[t];if(jn(a)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},R3=(n,e)=>{const t={},a=i=>{i.forEach(l=>{t[l]=!0})};return ol(n)?a(n):a(String(n).split(e)),t},I3=()=>{},O3=(n,e)=>n!=null&&Number.isFinite(n=+n)?n:e;function D3(n){return!!(n&&jn(n.append)&&n[yw]==="FormData"&&n[uf])}const j3=n=>{const e=new Array(10),t=(a,i)=>{if(ff(a)){if(e.indexOf(a)>=0)return;if(!("toJSON"in a)){e[i]=a;const l=ol(a)?[]:{};return uu(a,(u,m)=>{const p=t(u,i+1);!Gc(p)&&(l[m]=p)}),e[i]=void 0,l}}return a};return t(n,0)},P3=Sr("AsyncFunction"),M3=n=>n&&(ff(n)||jn(n))&&jn(n.then)&&jn(n.catch),Tw=((n,e)=>n?setImmediate:e?((t,a)=>(xi.addEventListener("message",({source:i,data:l})=>{i===xi&&l===t&&a.length&&a.shift()()},!1),i=>{a.push(i),xi.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",jn(xi.postMessage)),k3=typeof queueMicrotask<"u"?queueMicrotask.bind(xi):typeof process<"u"&&process.nextTick||Tw,L3=n=>n!=null&&jn(n[uf]),Z={isArray:ol,isArrayBuffer:vw,isBuffer:e3,isFormData:c3,isArrayBufferView:t3,isString:n3,isNumber:_w,isBoolean:r3,isObject:ff,isPlainObject:nh,isReadableStream:d3,isRequest:h3,isResponse:f3,isHeaders:m3,isUndefined:Gc,isDate:a3,isFile:s3,isBlob:i3,isRegExp:N3,isFunction:jn,isStream:l3,isURLSearchParams:u3,isTypedArray:x3,isFileList:o3,forEach:uu,merge:pg,extend:g3,trim:p3,stripBOM:y3,inherits:v3,toFlatObject:_3,kindOf:df,kindOfTest:Sr,endsWith:b3,toArray:E3,forEachEntry:T3,matchAll:w3,isHTMLForm:A3,hasOwnProperty:GE,hasOwnProp:GE,reduceDescriptors:xw,freezeMethods:C3,toObjectSet:R3,toCamelCase:S3,noop:I3,toFiniteNumber:O3,findKey:bw,global:xi,isContextDefined:Ew,isSpecCompliantForm:D3,toJSONObject:j3,isAsyncFn:P3,isThenable:M3,setImmediate:Tw,asap:k3,isIterable:L3};function Pe(n,e,t,a,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),a&&(this.request=a),i&&(this.response=i,this.status=i.status?i.status:null)}Z.inherits(Pe,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Z.toJSONObject(this.config),code:this.code,status:this.status}}});const ww=Pe.prototype,Aw={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{Aw[n]={value:n}});Object.defineProperties(Pe,Aw);Object.defineProperty(ww,"isAxiosError",{value:!0});Pe.from=(n,e,t,a,i,l)=>{const u=Object.create(ww);return Z.toFlatObject(n,u,function(p){return p!==Error.prototype},m=>m!=="isAxiosError"),Pe.call(u,n.message,e,t,a,i),u.cause=n,u.name=n.name,l&&Object.assign(u,l),u};const V3=null;function gg(n){return Z.isPlainObject(n)||Z.isArray(n)}function Sw(n){return Z.endsWith(n,"[]")?n.slice(0,-2):n}function YE(n,e,t){return n?n.concat(e).map(function(i,l){return i=Sw(i),!t&&l?"["+i+"]":i}).join(t?".":""):e}function U3(n){return Z.isArray(n)&&!n.some(gg)}const z3=Z.toFlatObject(Z,{},null,function(e){return/^is[A-Z]/.test(e)});function mf(n,e,t){if(!Z.isObject(n))throw new TypeError("target must be an object");e=e||new FormData,t=Z.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(M,I){return!Z.isUndefined(I[M])});const a=t.metaTokens,i=t.visitor||v,l=t.dots,u=t.indexes,p=(t.Blob||typeof Blob<"u"&&Blob)&&Z.isSpecCompliantForm(e);if(!Z.isFunction(i))throw new TypeError("visitor must be a function");function y(A){if(A===null)return"";if(Z.isDate(A))return A.toISOString();if(!p&&Z.isBlob(A))throw new Pe("Blob is not supported. Use a Buffer instead.");return Z.isArrayBuffer(A)||Z.isTypedArray(A)?p&&typeof Blob=="function"?new Blob([A]):Buffer.from(A):A}function v(A,M,I){let H=A;if(A&&!I&&typeof A=="object"){if(Z.endsWith(M,"{}"))M=a?M:M.slice(0,-2),A=JSON.stringify(A);else if(Z.isArray(A)&&U3(A)||(Z.isFileList(A)||Z.endsWith(M,"[]"))&&(H=Z.toArray(A)))return M=Sw(M),H.forEach(function(q,ie){!(Z.isUndefined(q)||q===null)&&e.append(u===!0?YE([M],ie,l):u===null?M:M+"[]",y(q))}),!1}return gg(A)?!0:(e.append(YE(I,M,l),y(A)),!1)}const b=[],T=Object.assign(z3,{defaultVisitor:v,convertValue:y,isVisitable:gg});function C(A,M){if(!Z.isUndefined(A)){if(b.indexOf(A)!==-1)throw Error("Circular reference detected in "+M.join("."));b.push(A),Z.forEach(A,function(H,W){(!(Z.isUndefined(H)||H===null)&&i.call(e,H,Z.isString(W)?W.trim():W,M,T))===!0&&C(H,M?M.concat(W):[W])}),b.pop()}}if(!Z.isObject(n))throw new TypeError("data must be an object");return C(n),e}function KE(n){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(a){return e[a]})}function Ry(n,e){this._pairs=[],n&&mf(n,this,e)}const Nw=Ry.prototype;Nw.append=function(e,t){this._pairs.push([e,t])};Nw.toString=function(e){const t=e?function(a){return e.call(this,a,KE)}:KE;return this._pairs.map(function(i){return t(i[0])+"="+t(i[1])},"").join("&")};function B3(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Cw(n,e,t){if(!e)return n;const a=t&&t.encode||B3;Z.isFunction(t)&&(t={serialize:t});const i=t&&t.serialize;let l;if(i?l=i(e,t):l=Z.isURLSearchParams(e)?e.toString():new Ry(e,t).toString(a),l){const u=n.indexOf("#");u!==-1&&(n=n.slice(0,u)),n+=(n.indexOf("?")===-1?"?":"&")+l}return n}class QE{constructor(){this.handlers=[]}use(e,t,a){return this.handlers.push({fulfilled:e,rejected:t,synchronous:a?a.synchronous:!1,runWhen:a?a.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Z.forEach(this.handlers,function(a){a!==null&&e(a)})}}const Rw={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},q3=typeof URLSearchParams<"u"?URLSearchParams:Ry,F3=typeof FormData<"u"?FormData:null,H3=typeof Blob<"u"?Blob:null,$3={isBrowser:!0,classes:{URLSearchParams:q3,FormData:F3,Blob:H3},protocols:["http","https","file","blob","url","data"]},Iy=typeof window<"u"&&typeof document<"u",yg=typeof navigator=="object"&&navigator||void 0,G3=Iy&&(!yg||["ReactNative","NativeScript","NS"].indexOf(yg.product)<0),Y3=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",K3=Iy&&window.location.href||"http://localhost",Q3=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Iy,hasStandardBrowserEnv:G3,hasStandardBrowserWebWorkerEnv:Y3,navigator:yg,origin:K3},Symbol.toStringTag,{value:"Module"})),yn={...Q3,...$3};function W3(n,e){return mf(n,new yn.classes.URLSearchParams,Object.assign({visitor:function(t,a,i,l){return yn.isNode&&Z.isBuffer(t)?(this.append(a,t.toString("base64")),!1):l.defaultVisitor.apply(this,arguments)}},e))}function X3(n){return Z.matchAll(/\w+|\[(\w*)]/g,n).map(e=>e[0]==="[]"?"":e[1]||e[0])}function Z3(n){const e={},t=Object.keys(n);let a;const i=t.length;let l;for(a=0;a<i;a++)l=t[a],e[l]=n[l];return e}function Iw(n){function e(t,a,i,l){let u=t[l++];if(u==="__proto__")return!0;const m=Number.isFinite(+u),p=l>=t.length;return u=!u&&Z.isArray(i)?i.length:u,p?(Z.hasOwnProp(i,u)?i[u]=[i[u],a]:i[u]=a,!m):((!i[u]||!Z.isObject(i[u]))&&(i[u]=[]),e(t,a,i[u],l)&&Z.isArray(i[u])&&(i[u]=Z3(i[u])),!m)}if(Z.isFormData(n)&&Z.isFunction(n.entries)){const t={};return Z.forEachEntry(n,(a,i)=>{e(X3(a),i,t,0)}),t}return null}function J3(n,e,t){if(Z.isString(n))try{return(e||JSON.parse)(n),Z.trim(n)}catch(a){if(a.name!=="SyntaxError")throw a}return(t||JSON.stringify)(n)}const du={transitional:Rw,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const a=t.getContentType()||"",i=a.indexOf("application/json")>-1,l=Z.isObject(e);if(l&&Z.isHTMLForm(e)&&(e=new FormData(e)),Z.isFormData(e))return i?JSON.stringify(Iw(e)):e;if(Z.isArrayBuffer(e)||Z.isBuffer(e)||Z.isStream(e)||Z.isFile(e)||Z.isBlob(e)||Z.isReadableStream(e))return e;if(Z.isArrayBufferView(e))return e.buffer;if(Z.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let m;if(l){if(a.indexOf("application/x-www-form-urlencoded")>-1)return W3(e,this.formSerializer).toString();if((m=Z.isFileList(e))||a.indexOf("multipart/form-data")>-1){const p=this.env&&this.env.FormData;return mf(m?{"files[]":e}:e,p&&new p,this.formSerializer)}}return l||i?(t.setContentType("application/json",!1),J3(e)):e}],transformResponse:[function(e){const t=this.transitional||du.transitional,a=t&&t.forcedJSONParsing,i=this.responseType==="json";if(Z.isResponse(e)||Z.isReadableStream(e))return e;if(e&&Z.isString(e)&&(a&&!this.responseType||i)){const u=!(t&&t.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(m){if(u)throw m.name==="SyntaxError"?Pe.from(m,Pe.ERR_BAD_RESPONSE,this,null,this.response):m}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:yn.classes.FormData,Blob:yn.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Z.forEach(["delete","get","head","post","put","patch"],n=>{du.headers[n]={}});const eM=Z.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),tM=n=>{const e={};let t,a,i;return n&&n.split(`
`).forEach(function(u){i=u.indexOf(":"),t=u.substring(0,i).trim().toLowerCase(),a=u.substring(i+1).trim(),!(!t||e[t]&&eM[t])&&(t==="set-cookie"?e[t]?e[t].push(a):e[t]=[a]:e[t]=e[t]?e[t]+", "+a:a)}),e},WE=Symbol("internals");function bc(n){return n&&String(n).trim().toLowerCase()}function rh(n){return n===!1||n==null?n:Z.isArray(n)?n.map(rh):String(n)}function nM(n){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let a;for(;a=t.exec(n);)e[a[1]]=a[2];return e}const rM=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function Lp(n,e,t,a,i){if(Z.isFunction(a))return a.call(this,e,t);if(i&&(e=t),!!Z.isString(e)){if(Z.isString(a))return e.indexOf(a)!==-1;if(Z.isRegExp(a))return a.test(e)}}function aM(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,a)=>t.toUpperCase()+a)}function sM(n,e){const t=Z.toCamelCase(" "+e);["get","set","has"].forEach(a=>{Object.defineProperty(n,a+t,{value:function(i,l,u){return this[a].call(this,e,i,l,u)},configurable:!0})})}let Pn=class{constructor(e){e&&this.set(e)}set(e,t,a){const i=this;function l(m,p,y){const v=bc(p);if(!v)throw new Error("header name must be a non-empty string");const b=Z.findKey(i,v);(!b||i[b]===void 0||y===!0||y===void 0&&i[b]!==!1)&&(i[b||p]=rh(m))}const u=(m,p)=>Z.forEach(m,(y,v)=>l(y,v,p));if(Z.isPlainObject(e)||e instanceof this.constructor)u(e,t);else if(Z.isString(e)&&(e=e.trim())&&!rM(e))u(tM(e),t);else if(Z.isObject(e)&&Z.isIterable(e)){let m={},p,y;for(const v of e){if(!Z.isArray(v))throw TypeError("Object iterator must return a key-value pair");m[y=v[0]]=(p=m[y])?Z.isArray(p)?[...p,v[1]]:[p,v[1]]:v[1]}u(m,t)}else e!=null&&l(t,e,a);return this}get(e,t){if(e=bc(e),e){const a=Z.findKey(this,e);if(a){const i=this[a];if(!t)return i;if(t===!0)return nM(i);if(Z.isFunction(t))return t.call(this,i,a);if(Z.isRegExp(t))return t.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=bc(e),e){const a=Z.findKey(this,e);return!!(a&&this[a]!==void 0&&(!t||Lp(this,this[a],a,t)))}return!1}delete(e,t){const a=this;let i=!1;function l(u){if(u=bc(u),u){const m=Z.findKey(a,u);m&&(!t||Lp(a,a[m],m,t))&&(delete a[m],i=!0)}}return Z.isArray(e)?e.forEach(l):l(e),i}clear(e){const t=Object.keys(this);let a=t.length,i=!1;for(;a--;){const l=t[a];(!e||Lp(this,this[l],l,e,!0))&&(delete this[l],i=!0)}return i}normalize(e){const t=this,a={};return Z.forEach(this,(i,l)=>{const u=Z.findKey(a,l);if(u){t[u]=rh(i),delete t[l];return}const m=e?aM(l):String(l).trim();m!==l&&delete t[l],t[m]=rh(i),a[m]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return Z.forEach(this,(a,i)=>{a!=null&&a!==!1&&(t[i]=e&&Z.isArray(a)?a.join(", "):a)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const a=new this(e);return t.forEach(i=>a.set(i)),a}static accessor(e){const a=(this[WE]=this[WE]={accessors:{}}).accessors,i=this.prototype;function l(u){const m=bc(u);a[m]||(sM(i,u),a[m]=!0)}return Z.isArray(e)?e.forEach(l):l(e),this}};Pn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Z.reduceDescriptors(Pn.prototype,({value:n},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(a){this[t]=a}}});Z.freezeMethods(Pn);function Vp(n,e){const t=this||du,a=e||t,i=Pn.from(a.headers);let l=a.data;return Z.forEach(n,function(m){l=m.call(t,l,i.normalize(),e?e.status:void 0)}),i.normalize(),l}function Ow(n){return!!(n&&n.__CANCEL__)}function ll(n,e,t){Pe.call(this,n??"canceled",Pe.ERR_CANCELED,e,t),this.name="CanceledError"}Z.inherits(ll,Pe,{__CANCEL__:!0});function Dw(n,e,t){const a=t.config.validateStatus;!t.status||!a||a(t.status)?n(t):e(new Pe("Request failed with status code "+t.status,[Pe.ERR_BAD_REQUEST,Pe.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function iM(n){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return e&&e[1]||""}function oM(n,e){n=n||10;const t=new Array(n),a=new Array(n);let i=0,l=0,u;return e=e!==void 0?e:1e3,function(p){const y=Date.now(),v=a[l];u||(u=y),t[i]=p,a[i]=y;let b=l,T=0;for(;b!==i;)T+=t[b++],b=b%n;if(i=(i+1)%n,i===l&&(l=(l+1)%n),y-u<e)return;const C=v&&y-v;return C?Math.round(T*1e3/C):void 0}}function lM(n,e){let t=0,a=1e3/e,i,l;const u=(y,v=Date.now())=>{t=v,i=null,l&&(clearTimeout(l),l=null),n.apply(null,y)};return[(...y)=>{const v=Date.now(),b=v-t;b>=a?u(y,v):(i=y,l||(l=setTimeout(()=>{l=null,u(i)},a-b)))},()=>i&&u(i)]}const Ih=(n,e,t=3)=>{let a=0;const i=oM(50,250);return lM(l=>{const u=l.loaded,m=l.lengthComputable?l.total:void 0,p=u-a,y=i(p),v=u<=m;a=u;const b={loaded:u,total:m,progress:m?u/m:void 0,bytes:p,rate:y||void 0,estimated:y&&m&&v?(m-u)/y:void 0,event:l,lengthComputable:m!=null,[e?"download":"upload"]:!0};n(b)},t)},XE=(n,e)=>{const t=n!=null;return[a=>e[0]({lengthComputable:t,total:n,loaded:a}),e[1]]},ZE=n=>(...e)=>Z.asap(()=>n(...e)),cM=yn.hasStandardBrowserEnv?((n,e)=>t=>(t=new URL(t,yn.origin),n.protocol===t.protocol&&n.host===t.host&&(e||n.port===t.port)))(new URL(yn.origin),yn.navigator&&/(msie|trident)/i.test(yn.navigator.userAgent)):()=>!0,uM=yn.hasStandardBrowserEnv?{write(n,e,t,a,i,l){const u=[n+"="+encodeURIComponent(e)];Z.isNumber(t)&&u.push("expires="+new Date(t).toGMTString()),Z.isString(a)&&u.push("path="+a),Z.isString(i)&&u.push("domain="+i),l===!0&&u.push("secure"),document.cookie=u.join("; ")},read(n){const e=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(n){this.write(n,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function dM(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function hM(n,e){return e?n.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):n}function jw(n,e,t){let a=!dM(e);return n&&(a||t==!1)?hM(n,e):e}const JE=n=>n instanceof Pn?{...n}:n;function Oi(n,e){e=e||{};const t={};function a(y,v,b,T){return Z.isPlainObject(y)&&Z.isPlainObject(v)?Z.merge.call({caseless:T},y,v):Z.isPlainObject(v)?Z.merge({},v):Z.isArray(v)?v.slice():v}function i(y,v,b,T){if(Z.isUndefined(v)){if(!Z.isUndefined(y))return a(void 0,y,b,T)}else return a(y,v,b,T)}function l(y,v){if(!Z.isUndefined(v))return a(void 0,v)}function u(y,v){if(Z.isUndefined(v)){if(!Z.isUndefined(y))return a(void 0,y)}else return a(void 0,v)}function m(y,v,b){if(b in e)return a(y,v);if(b in n)return a(void 0,y)}const p={url:l,method:l,data:l,baseURL:u,transformRequest:u,transformResponse:u,paramsSerializer:u,timeout:u,timeoutMessage:u,withCredentials:u,withXSRFToken:u,adapter:u,responseType:u,xsrfCookieName:u,xsrfHeaderName:u,onUploadProgress:u,onDownloadProgress:u,decompress:u,maxContentLength:u,maxBodyLength:u,beforeRedirect:u,transport:u,httpAgent:u,httpsAgent:u,cancelToken:u,socketPath:u,responseEncoding:u,validateStatus:m,headers:(y,v,b)=>i(JE(y),JE(v),b,!0)};return Z.forEach(Object.keys(Object.assign({},n,e)),function(v){const b=p[v]||i,T=b(n[v],e[v],v);Z.isUndefined(T)&&b!==m||(t[v]=T)}),t}const Pw=n=>{const e=Oi({},n);let{data:t,withXSRFToken:a,xsrfHeaderName:i,xsrfCookieName:l,headers:u,auth:m}=e;e.headers=u=Pn.from(u),e.url=Cw(jw(e.baseURL,e.url,e.allowAbsoluteUrls),n.params,n.paramsSerializer),m&&u.set("Authorization","Basic "+btoa((m.username||"")+":"+(m.password?unescape(encodeURIComponent(m.password)):"")));let p;if(Z.isFormData(t)){if(yn.hasStandardBrowserEnv||yn.hasStandardBrowserWebWorkerEnv)u.setContentType(void 0);else if((p=u.getContentType())!==!1){const[y,...v]=p?p.split(";").map(b=>b.trim()).filter(Boolean):[];u.setContentType([y||"multipart/form-data",...v].join("; "))}}if(yn.hasStandardBrowserEnv&&(a&&Z.isFunction(a)&&(a=a(e)),a||a!==!1&&cM(e.url))){const y=i&&l&&uM.read(l);y&&u.set(i,y)}return e},fM=typeof XMLHttpRequest<"u",mM=fM&&function(n){return new Promise(function(t,a){const i=Pw(n);let l=i.data;const u=Pn.from(i.headers).normalize();let{responseType:m,onUploadProgress:p,onDownloadProgress:y}=i,v,b,T,C,A;function M(){C&&C(),A&&A(),i.cancelToken&&i.cancelToken.unsubscribe(v),i.signal&&i.signal.removeEventListener("abort",v)}let I=new XMLHttpRequest;I.open(i.method.toUpperCase(),i.url,!0),I.timeout=i.timeout;function H(){if(!I)return;const q=Pn.from("getAllResponseHeaders"in I&&I.getAllResponseHeaders()),le={data:!m||m==="text"||m==="json"?I.responseText:I.response,status:I.status,statusText:I.statusText,headers:q,config:n,request:I};Dw(function(k){t(k),M()},function(k){a(k),M()},le),I=null}"onloadend"in I?I.onloadend=H:I.onreadystatechange=function(){!I||I.readyState!==4||I.status===0&&!(I.responseURL&&I.responseURL.indexOf("file:")===0)||setTimeout(H)},I.onabort=function(){I&&(a(new Pe("Request aborted",Pe.ECONNABORTED,n,I)),I=null)},I.onerror=function(){a(new Pe("Network Error",Pe.ERR_NETWORK,n,I)),I=null},I.ontimeout=function(){let ie=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const le=i.transitional||Rw;i.timeoutErrorMessage&&(ie=i.timeoutErrorMessage),a(new Pe(ie,le.clarifyTimeoutError?Pe.ETIMEDOUT:Pe.ECONNABORTED,n,I)),I=null},l===void 0&&u.setContentType(null),"setRequestHeader"in I&&Z.forEach(u.toJSON(),function(ie,le){I.setRequestHeader(le,ie)}),Z.isUndefined(i.withCredentials)||(I.withCredentials=!!i.withCredentials),m&&m!=="json"&&(I.responseType=i.responseType),y&&([T,A]=Ih(y,!0),I.addEventListener("progress",T)),p&&I.upload&&([b,C]=Ih(p),I.upload.addEventListener("progress",b),I.upload.addEventListener("loadend",C)),(i.cancelToken||i.signal)&&(v=q=>{I&&(a(!q||q.type?new ll(null,n,I):q),I.abort(),I=null)},i.cancelToken&&i.cancelToken.subscribe(v),i.signal&&(i.signal.aborted?v():i.signal.addEventListener("abort",v)));const W=iM(i.url);if(W&&yn.protocols.indexOf(W)===-1){a(new Pe("Unsupported protocol "+W+":",Pe.ERR_BAD_REQUEST,n));return}I.send(l||null)})},pM=(n,e)=>{const{length:t}=n=n?n.filter(Boolean):[];if(e||t){let a=new AbortController,i;const l=function(y){if(!i){i=!0,m();const v=y instanceof Error?y:this.reason;a.abort(v instanceof Pe?v:new ll(v instanceof Error?v.message:v))}};let u=e&&setTimeout(()=>{u=null,l(new Pe(`timeout ${e} of ms exceeded`,Pe.ETIMEDOUT))},e);const m=()=>{n&&(u&&clearTimeout(u),u=null,n.forEach(y=>{y.unsubscribe?y.unsubscribe(l):y.removeEventListener("abort",l)}),n=null)};n.forEach(y=>y.addEventListener("abort",l));const{signal:p}=a;return p.unsubscribe=()=>Z.asap(m),p}},gM=function*(n,e){let t=n.byteLength;if(t<e){yield n;return}let a=0,i;for(;a<t;)i=a+e,yield n.slice(a,i),a=i},yM=async function*(n,e){for await(const t of vM(n))yield*gM(t,e)},vM=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const e=n.getReader();try{for(;;){const{done:t,value:a}=await e.read();if(t)break;yield a}}finally{await e.cancel()}},e1=(n,e,t,a)=>{const i=yM(n,e);let l=0,u,m=p=>{u||(u=!0,a&&a(p))};return new ReadableStream({async pull(p){try{const{done:y,value:v}=await i.next();if(y){m(),p.close();return}let b=v.byteLength;if(t){let T=l+=b;t(T)}p.enqueue(new Uint8Array(v))}catch(y){throw m(y),y}},cancel(p){return m(p),i.return()}},{highWaterMark:2})},pf=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Mw=pf&&typeof ReadableStream=="function",_M=pf&&(typeof TextEncoder=="function"?(n=>e=>n.encode(e))(new TextEncoder):async n=>new Uint8Array(await new Response(n).arrayBuffer())),kw=(n,...e)=>{try{return!!n(...e)}catch{return!1}},bM=Mw&&kw(()=>{let n=!1;const e=new Request(yn.origin,{body:new ReadableStream,method:"POST",get duplex(){return n=!0,"half"}}).headers.has("Content-Type");return n&&!e}),t1=64*1024,vg=Mw&&kw(()=>Z.isReadableStream(new Response("").body)),Oh={stream:vg&&(n=>n.body)};pf&&(n=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Oh[e]&&(Oh[e]=Z.isFunction(n[e])?t=>t[e]():(t,a)=>{throw new Pe(`Response type '${e}' is not supported`,Pe.ERR_NOT_SUPPORT,a)})})})(new Response);const EM=async n=>{if(n==null)return 0;if(Z.isBlob(n))return n.size;if(Z.isSpecCompliantForm(n))return(await new Request(yn.origin,{method:"POST",body:n}).arrayBuffer()).byteLength;if(Z.isArrayBufferView(n)||Z.isArrayBuffer(n))return n.byteLength;if(Z.isURLSearchParams(n)&&(n=n+""),Z.isString(n))return(await _M(n)).byteLength},xM=async(n,e)=>{const t=Z.toFiniteNumber(n.getContentLength());return t??EM(e)},TM=pf&&(async n=>{let{url:e,method:t,data:a,signal:i,cancelToken:l,timeout:u,onDownloadProgress:m,onUploadProgress:p,responseType:y,headers:v,withCredentials:b="same-origin",fetchOptions:T}=Pw(n);y=y?(y+"").toLowerCase():"text";let C=pM([i,l&&l.toAbortSignal()],u),A;const M=C&&C.unsubscribe&&(()=>{C.unsubscribe()});let I;try{if(p&&bM&&t!=="get"&&t!=="head"&&(I=await xM(v,a))!==0){let le=new Request(e,{method:"POST",body:a,duplex:"half"}),pe;if(Z.isFormData(a)&&(pe=le.headers.get("content-type"))&&v.setContentType(pe),le.body){const[k,R]=XE(I,Ih(ZE(p)));a=e1(le.body,t1,k,R)}}Z.isString(b)||(b=b?"include":"omit");const H="credentials"in Request.prototype;A=new Request(e,{...T,signal:C,method:t.toUpperCase(),headers:v.normalize().toJSON(),body:a,duplex:"half",credentials:H?b:void 0});let W=await fetch(A);const q=vg&&(y==="stream"||y==="response");if(vg&&(m||q&&M)){const le={};["status","statusText","headers"].forEach(N=>{le[N]=W[N]});const pe=Z.toFiniteNumber(W.headers.get("content-length")),[k,R]=m&&XE(pe,Ih(ZE(m),!0))||[];W=new Response(e1(W.body,t1,k,()=>{R&&R(),M&&M()}),le)}y=y||"text";let ie=await Oh[Z.findKey(Oh,y)||"text"](W,n);return!q&&M&&M(),await new Promise((le,pe)=>{Dw(le,pe,{data:ie,headers:Pn.from(W.headers),status:W.status,statusText:W.statusText,config:n,request:A})})}catch(H){throw M&&M(),H&&H.name==="TypeError"&&/Load failed|fetch/i.test(H.message)?Object.assign(new Pe("Network Error",Pe.ERR_NETWORK,n,A),{cause:H.cause||H}):Pe.from(H,H&&H.code,n,A)}}),_g={http:V3,xhr:mM,fetch:TM};Z.forEach(_g,(n,e)=>{if(n){try{Object.defineProperty(n,"name",{value:e})}catch{}Object.defineProperty(n,"adapterName",{value:e})}});const n1=n=>`- ${n}`,wM=n=>Z.isFunction(n)||n===null||n===!1,Lw={getAdapter:n=>{n=Z.isArray(n)?n:[n];const{length:e}=n;let t,a;const i={};for(let l=0;l<e;l++){t=n[l];let u;if(a=t,!wM(t)&&(a=_g[(u=String(t)).toLowerCase()],a===void 0))throw new Pe(`Unknown adapter '${u}'`);if(a)break;i[u||"#"+l]=a}if(!a){const l=Object.entries(i).map(([m,p])=>`adapter ${m} `+(p===!1?"is not supported by the environment":"is not available in the build"));let u=e?l.length>1?`since :
`+l.map(n1).join(`
`):" "+n1(l[0]):"as no adapter specified";throw new Pe("There is no suitable adapter to dispatch the request "+u,"ERR_NOT_SUPPORT")}return a},adapters:_g};function Up(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new ll(null,n)}function r1(n){return Up(n),n.headers=Pn.from(n.headers),n.data=Vp.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),Lw.getAdapter(n.adapter||du.adapter)(n).then(function(a){return Up(n),a.data=Vp.call(n,n.transformResponse,a),a.headers=Pn.from(a.headers),a},function(a){return Ow(a)||(Up(n),a&&a.response&&(a.response.data=Vp.call(n,n.transformResponse,a.response),a.response.headers=Pn.from(a.response.headers))),Promise.reject(a)})}const Vw="1.9.0",gf={};["object","boolean","number","function","string","symbol"].forEach((n,e)=>{gf[n]=function(a){return typeof a===n||"a"+(e<1?"n ":" ")+n}});const a1={};gf.transitional=function(e,t,a){function i(l,u){return"[Axios v"+Vw+"] Transitional option '"+l+"'"+u+(a?". "+a:"")}return(l,u,m)=>{if(e===!1)throw new Pe(i(u," has been removed"+(t?" in "+t:"")),Pe.ERR_DEPRECATED);return t&&!a1[u]&&(a1[u]=!0,console.warn(i(u," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(l,u,m):!0}};gf.spelling=function(e){return(t,a)=>(console.warn(`${a} is likely a misspelling of ${e}`),!0)};function AM(n,e,t){if(typeof n!="object")throw new Pe("options must be an object",Pe.ERR_BAD_OPTION_VALUE);const a=Object.keys(n);let i=a.length;for(;i-- >0;){const l=a[i],u=e[l];if(u){const m=n[l],p=m===void 0||u(m,l,n);if(p!==!0)throw new Pe("option "+l+" must be "+p,Pe.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new Pe("Unknown option "+l,Pe.ERR_BAD_OPTION)}}const ah={assertOptions:AM,validators:gf},Fr=ah.validators;let wi=class{constructor(e){this.defaults=e||{},this.interceptors={request:new QE,response:new QE}}async request(e,t){try{return await this._request(e,t)}catch(a){if(a instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const l=i.stack?i.stack.replace(/^.+\n/,""):"";try{a.stack?l&&!String(a.stack).endsWith(l.replace(/^.+\n.+\n/,""))&&(a.stack+=`
`+l):a.stack=l}catch{}}throw a}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=Oi(this.defaults,t);const{transitional:a,paramsSerializer:i,headers:l}=t;a!==void 0&&ah.assertOptions(a,{silentJSONParsing:Fr.transitional(Fr.boolean),forcedJSONParsing:Fr.transitional(Fr.boolean),clarifyTimeoutError:Fr.transitional(Fr.boolean)},!1),i!=null&&(Z.isFunction(i)?t.paramsSerializer={serialize:i}:ah.assertOptions(i,{encode:Fr.function,serialize:Fr.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),ah.assertOptions(t,{baseUrl:Fr.spelling("baseURL"),withXsrfToken:Fr.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let u=l&&Z.merge(l.common,l[t.method]);l&&Z.forEach(["delete","get","head","post","put","patch","common"],A=>{delete l[A]}),t.headers=Pn.concat(u,l);const m=[];let p=!0;this.interceptors.request.forEach(function(M){typeof M.runWhen=="function"&&M.runWhen(t)===!1||(p=p&&M.synchronous,m.unshift(M.fulfilled,M.rejected))});const y=[];this.interceptors.response.forEach(function(M){y.push(M.fulfilled,M.rejected)});let v,b=0,T;if(!p){const A=[r1.bind(this),void 0];for(A.unshift.apply(A,m),A.push.apply(A,y),T=A.length,v=Promise.resolve(t);b<T;)v=v.then(A[b++],A[b++]);return v}T=m.length;let C=t;for(b=0;b<T;){const A=m[b++],M=m[b++];try{C=A(C)}catch(I){M.call(this,I);break}}try{v=r1.call(this,C)}catch(A){return Promise.reject(A)}for(b=0,T=y.length;b<T;)v=v.then(y[b++],y[b++]);return v}getUri(e){e=Oi(this.defaults,e);const t=jw(e.baseURL,e.url,e.allowAbsoluteUrls);return Cw(t,e.params,e.paramsSerializer)}};Z.forEach(["delete","get","head","options"],function(e){wi.prototype[e]=function(t,a){return this.request(Oi(a||{},{method:e,url:t,data:(a||{}).data}))}});Z.forEach(["post","put","patch"],function(e){function t(a){return function(l,u,m){return this.request(Oi(m||{},{method:e,headers:a?{"Content-Type":"multipart/form-data"}:{},url:l,data:u}))}}wi.prototype[e]=t(),wi.prototype[e+"Form"]=t(!0)});let SM=class Uw{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(l){t=l});const a=this;this.promise.then(i=>{if(!a._listeners)return;let l=a._listeners.length;for(;l-- >0;)a._listeners[l](i);a._listeners=null}),this.promise.then=i=>{let l;const u=new Promise(m=>{a.subscribe(m),l=m}).then(i);return u.cancel=function(){a.unsubscribe(l)},u},e(function(l,u,m){a.reason||(a.reason=new ll(l,u,m),t(a.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=a=>{e.abort(a)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new Uw(function(i){e=i}),cancel:e}}};function NM(n){return function(t){return n.apply(null,t)}}function CM(n){return Z.isObject(n)&&n.isAxiosError===!0}const bg={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(bg).forEach(([n,e])=>{bg[e]=n});function zw(n){const e=new wi(n),t=gw(wi.prototype.request,e);return Z.extend(t,wi.prototype,e,{allOwnKeys:!0}),Z.extend(t,e,null,{allOwnKeys:!0}),t.create=function(i){return zw(Oi(n,i))},t}const _t=zw(du);_t.Axios=wi;_t.CanceledError=ll;_t.CancelToken=SM;_t.isCancel=Ow;_t.VERSION=Vw;_t.toFormData=mf;_t.AxiosError=Pe;_t.Cancel=_t.CanceledError;_t.all=function(e){return Promise.all(e)};_t.spread=NM;_t.isAxiosError=CM;_t.mergeConfig=Oi;_t.AxiosHeaders=Pn;_t.formToJSON=n=>Iw(Z.isHTMLForm(n)?new FormData(n):n);_t.getAdapter=Lw.getAdapter;_t.HttpStatusCode=bg;_t.default=_t;const{Axios:ZM,AxiosError:JM,CanceledError:ek,isCancel:tk,CancelToken:nk,VERSION:rk,all:ak,Cancel:sk,isAxiosError:ik,spread:ok,toFormData:lk,AxiosHeaders:ck,HttpStatusCode:uk,formToJSON:dk,getAdapter:hk,mergeConfig:fk}=_t,Bw=()=>localStorage.getItem("huggingface_api_key")||".",RM=async(n,e,t)=>{var a;try{const i=Bw();if(!i||i.trim()==="")return console.log("No hay API key configurada para Hugging Face, usando fallback local"),s1(n,e,t);const u=_t.create({baseURL:"https://api-inference.huggingface.co/models/HuggingFaceH4/zephyr-7b-beta",headers:{Authorization:`Bearer ${i}`,"Content-Type":"application/json"}});let m="";const p=e.slice(-5);for(const I of p)I.sender==="agent"?m+=`Agente: ${I.message}
`:m+=`Cliente: ${I.message}
`;const y=`<|system|>
Eres un asistente especializado en analizar mensajes en un contexto de cobranza. Tu tarea es categorizar la respuesta del cliente.

IMPORTANTE: NUNCA debes mencionar montos específicos de deuda. Habla siempre en términos de "deuda pendiente" o porcentajes, nunca valores monetarios exactos.

El cliente tiene las siguientes características:
- Relación/Cercanía: ${t.relationship}/100
- Historial de Pago: ${t.history}/100
- Actitud: ${t.attitude}/100
- Sensibilidad a Presión: ${t.sensitivity}/100
- Probabilidad de Pago: ${t.probability}/100

Historial reciente de la conversación: 
${m}
<|user|>
Clasifica este mensaje del cliente: "${n}"

Elige UNA de estas categorías EXACTAS sin explicación:
- neutral
- accepts_payment
- offers_partial
- reschedule
- evades
- annoyed
- refuses
- thanks
- no_answer
- confirms_payment
<|assistant|>`;console.log("Enviando solicitud a Hugging Face API para análisis...");const v=await u.post("",{inputs:y,parameters:{max_new_tokens:20,temperature:.1,top_p:.95,do_sample:!0,return_full_text:!1}});console.log("Respuesta de Hugging Face:",v.data);let b="";Array.isArray(v.data)?b=((a=v.data[0])==null?void 0:a.generated_text)||"":b=v.data.generated_text||"";let T="neutral";const C=["neutral","accepts_payment","offers_partial","reschedule","evades","annoyed","refuses","thanks","no_answer","confirms_payment"];for(const I of C)if(b.toLowerCase().includes(I)){T=I;break}const A={neutral:{relationship:0,history:0,attitude:0,sensitivity:0,probability:0},accepts_payment:{relationship:5,history:10,attitude:10,sensitivity:-5,probability:20},offers_partial:{relationship:5,history:5,attitude:10,sensitivity:-5,probability:15},reschedule:{relationship:2,history:-5,attitude:5,sensitivity:0,probability:-5},evades:{relationship:-5,history:-5,attitude:-10,sensitivity:5,probability:-10},annoyed:{relationship:-10,history:-5,attitude:-15,sensitivity:10,probability:-15},refuses:{relationship:-20,history:-20,attitude:-20,sensitivity:20,probability:-30},thanks:{relationship:5,history:0,attitude:10,sensitivity:-5,probability:10},no_answer:{relationship:-5,history:-10,attitude:-5,sensitivity:0,probability:-10},confirms_payment:{relationship:10,history:20,attitude:20,sensitivity:-10,probability:30}},M=A[T]||A.neutral;return console.log(`Evento detectado por Zephyr: "${T}" con deltas:`,M),{eventType:T,deltas:M,explanation:`Evento detectado por Zephyr: "${T}"`,confidence:.8}}catch(i){return console.error("Error al analizar mensaje con Zephyr:",i),console.log("Usando fallback local debido al error"),s1(n)}},IM=async(n,e,t,a)=>{var i;try{const l=Bw();if(!l||l.trim()==="")return console.log("No hay API key configurada para Hugging Face, usando fallback local"),i1(n,e,t,a);const m=_t.create({baseURL:"https://api-inference.huggingface.co/models/HuggingFaceH4/zephyr-7b-beta",headers:{Authorization:`Bearer ${l}`,"Content-Type":"application/json"}});let p="";const y=n.slice(-6);for(const A of y)A.sender==="agent"?p+=`Agente: ${A.message}
`:p+=`Cliente: ${A.message}
`;let v="neutral";e.relationship>70?v=e.sensitivity>70?"amistoso sin presión":"amistoso directo":e.relationship<40&&(v=e.sensitivity<40?"formal directo":"formal suave");const b=`<|system|>
Eres un agente de cobranza de la empresa Acriventas. Tu objetivo es obtener el pago de una deuda pendiente mientras mantienes una buena relación con el cliente.

INSTRUCCIONES IMPORTANTES: 
1. NUNCA menciones montos específicos de dinero o deuda en tus respuestas.
2. Siempre habla en términos de "deuda pendiente" o usando porcentajes, no valores exactos.
3. No repitas los montos que el cliente mencione en sus mensajes.
4. Sé siempre respetuoso y profesional.

Debes usar un tono "${v}" basado en el perfil del cliente:
- Relación/Cercanía: ${e.relationship}/100
- Historial de Pago: ${e.history}/100
- Actitud: ${e.attitude}/100
- Sensibilidad a Presión: ${e.sensitivity}/100
- Probabilidad de Pago: ${e.probability}/100

Historial reciente de la conversación:
${p}

El último mensaje del cliente fue: "${t}"
El tipo de evento detectado es: "${a}"
<|user|>
Genera una respuesta empática y efectiva como agente de cobranza. La respuesta debe ser concisa (máximo 2 frases), adaptada al perfil del cliente, enfocada en lograr el pago de la deuda, y NUNCA debe mencionar montos específicos de dinero.
<|assistant|>`;console.log("Enviando solicitud para generar respuesta a Hugging Face API...");const T=await m.post("",{inputs:b,parameters:{max_new_tokens:100,temperature:.7,top_p:.95,do_sample:!0,return_full_text:!1}});console.log("Respuesta de Hugging Face para generación:",T.data);let C="";return Array.isArray(T.data)?C=((i=T.data[0])==null?void 0:i.generated_text)||"":C=T.data.generated_text||"",C=C.trim(),C||(C="Entiendo. ¿Podría por favor indicarnos cuándo podríamos esperar el pago de su deuda pendiente?"),console.log(`Respuesta generada por Zephyr usando tono "${v}": ${C}`),{responseText:C,explanation:`Respuesta generada por Zephyr usando tono "${v}"`,confidence:.8}}catch(l){return console.error("Error al generar respuesta con Zephyr:",l),console.log("Usando fallback local para respuesta debido al error"),i1(n,e,t,a)}},s1=(n,e,t)=>{const a=n.toLowerCase();let i="neutral";a.includes("pagar")||a.includes("transferir")||a.includes("depositar")?a.includes("completo")||a.includes("todo")?i="accepts_payment":a.includes("parte")||a.includes("parcial")||a.includes("algo")?i="offers_partial":(a.includes("próxima")||a.includes("después")||a.includes("luego"))&&(i="reschedule"):a.includes("gracias")||a.includes("agradezco")?i="thanks":a.includes("ya pagué")||a.includes("realicé el pago")||a.includes("transferí")?i="confirms_payment":a.includes("no puedo")||a.includes("imposible")?i="evades":a.includes("molesto")||a.includes("harto")||a.includes("fastidio")?i="annoyed":(a.includes("no voy a pagar")||a.includes("no pagaré")||a.includes("olvídate"))&&(i="refuses");const l={neutral:{relationship:0,history:0,attitude:0,sensitivity:0,probability:0},accepts_payment:{relationship:5,history:10,attitude:10,sensitivity:-5,probability:20},offers_partial:{relationship:5,history:5,attitude:10,sensitivity:-5,probability:15},reschedule:{relationship:2,history:-5,attitude:5,sensitivity:0,probability:-5},evades:{relationship:-5,history:-5,attitude:-10,sensitivity:5,probability:-10},annoyed:{relationship:-10,history:-5,attitude:-15,sensitivity:10,probability:-15},refuses:{relationship:-20,history:-20,attitude:-20,sensitivity:20,probability:-30},thanks:{relationship:5,history:0,attitude:10,sensitivity:-5,probability:10},no_answer:{relationship:-5,history:-10,attitude:-5,sensitivity:0,probability:-10},confirms_payment:{relationship:10,history:20,attitude:20,sensitivity:-10,probability:30}},u=l[i]||l.neutral;return console.log(`Evento detectado por fallback: "${i}" con deltas:`,u),{eventType:i,deltas:u,explanation:`Evento detectado por fallback: "${i}" basado en palabras clave.`,confidence:.6}},i1=(n,e,t,a)=>{let i="neutral";e.relationship>70?e.sensitivity>70?i="friendly_no_pressure":i="friendly":e.relationship<40&&(e.sensitivity<40?i="formal_direct":i="formal_soft");const l={accepts_payment:{friendly_no_pressure:"¡Excelente noticia! Gracias por tu disposición. Cuando puedas hacer el pago, solo avísame.",friendly:"¡Perfecto! Muchas gracias por tu colaboración. ¿Te envío los datos para el pago?",formal_direct:"Muy bien. Le agradecemos su decisión. Necesitamos que realice el pago antes del fin de semana.",formal_soft:"Gracias por su confirmación. ¿Prefiere que le enviemos los datos bancarios por este medio?",neutral:"Entendido. ¿Desea que le enviemos la información para realizar el pago?"},offers_partial:{friendly_no_pressure:"Agradezco mucho tu esfuerzo por pagar una parte. Cualquier aporte es bienvenido.",friendly:"Gracias por tu disposición. Un pago parcial nos ayuda mucho. ¿Cuándo podrías realizar este abono?",formal_direct:"Tomamos nota de su oferta de pago parcial. ¿Cuándo podríamos esperar el resto del monto pendiente?",formal_soft:"Entendemos su situación. El pago parcial es un buen primer paso. ¿Cuándo sería posible?",neutral:"De acuerdo con el pago parcial. ¿Qué porcentaje de la deuda podría transferir y cuándo?"},reschedule:{friendly_no_pressure:"No hay problema, entiendo que necesitas reprogramar. ¿Qué fecha te resultaría más conveniente?",friendly:"Claro que podemos ajustar la fecha. ¿Cuál sería el mejor momento para ti?",formal_direct:"Podemos considerar una nueva fecha. ¿Cuál es su propuesta concreta para el pago?",formal_soft:"Entendemos la necesidad de reprogramar. ¿Qué fecha le resultaría adecuada para realizar el pago?",neutral:"De acuerdo. ¿Cuál sería la nueva fecha propuesta para el pago?"},evades:{friendly_no_pressure:"Entiendo que quizás no es el mejor momento para hablar de esto. ¿Te parece si retomamos la conversación en otro momento?",friendly:"Noto que es un tema delicado. ¿Hay algo específico que podamos resolver para facilitar el pago?",formal_direct:"Necesitamos una respuesta concreta respecto al pago pendiente. ¿Podría indicarnos su plan de acción?",formal_soft:"Entendemos que pueda ser un tema complicado. ¿Podríamos concretar cuándo sería posible abordar el pago?",neutral:"¿Podría por favor indicarnos cuál es su situación respecto al pago pendiente?"},annoyed:{friendly_no_pressure:"Lamento si te he incomodado. No es mi intención molestar, solo buscamos encontrar una solución que funcione para ambos.",friendly:"Disculpa si te he molestado. ¿Qué podríamos hacer para resolver esta situación de la mejor manera?",formal_direct:"Entendemos su molestia. Sin embargo, necesitamos resolver el tema del pago pendiente. ¿Qué solución propone?",formal_soft:"Lamentamos si esta comunicación le resulta incómoda. ¿Habría un mejor momento o forma para abordar el tema?",neutral:"Entiendo. ¿Cómo preferiría que manejemos esta situación para llegar a una solución?"},refuses:{friendly_no_pressure:"Entiendo tu posición. Quizás podríamos explorar algunas alternativas que se ajusten mejor a tu situación actual.",friendly:"Comprendo que sea difícil en este momento. ¿Podríamos considerar opciones de pago más flexibles?",formal_direct:"Tomamos nota de su negativa. Sin embargo, la deuda permanece vigente. ¿Podríamos discutir alternativas de pago?",formal_soft:"Entendemos que pueda tener dificultades. ¿Le interesaría conocer otras opciones disponibles para resolver esta situación?",neutral:"¿Podríamos explorar alternativas que faciliten el pago de la deuda pendiente?"},thanks:{friendly_no_pressure:"¡No hay de qué! Estamos aquí para ayudarte. Si necesitas cualquier cosa, no dudes en hacérmelo saber.",friendly:"Es un placer poder ser de ayuda. ¿Hay algo más en lo que pueda asistirte?",formal_direct:"De nada. ¿Podríamos entonces confirmar cuándo realizará el pago?",formal_soft:"Nos alegra poder serle de utilidad. ¿Necesita alguna otra información para proceder?",neutral:"De nada. ¿Tiene alguna otra consulta respecto al pago?"},confirms_payment:{friendly_no_pressure:"¡Excelente noticia! Muchas gracias por tu pago. Verificaremos y te confirmaremos en cuanto se refleje en nuestro sistema.",friendly:"¡Genial! Gracias por confirmar tu pago. Lo verificaremos a la brevedad y te daremos el comprobante.",formal_direct:"Gracias por su confirmación. Procederemos a verificar el pago y le notificaremos cuando esté procesado.",formal_soft:"Agradecemos su pago. Realizaremos la verificación correspondiente y le informaremos una vez completado el proceso.",neutral:"Gracias por informarnos. Verificaremos el pago y actualizaremos el estado de su cuenta."},default:{friendly_no_pressure:"Entiendo perfectamente. No te preocupes, cuando puedas realizar el pago me avisas.",friendly:"Agradezco que estemos en contacto. ¿Hay algo en lo que pueda ayudarte para facilitar el proceso?",formal_direct:"Necesitamos regularizar su situación. ¿Podría por favor indicarnos una fecha concreta de pago?",formal_soft:"Entendemos que pueden surgir contratiempos. ¿Podría comentarnos cuándo le sería posible realizar el pago?",neutral:"¿Podría por favor indicarnos cuándo podríamos esperar el pago de la deuda pendiente?"}},u=l[a]||l.default,m=u[i]||u.neutral;return console.log(`Respuesta generada por fallback usando tono "${i}": ${m}`),{responseText:m,explanation:`Respuesta generada por fallback usando tono "${i}"`,confidence:.7}},qw=()=>localStorage.getItem("openai_api_key")||"",OM=n=>{if(!n)return"estimado cliente";const e=["maria","ana","carmen","rosa","lucia","elena","patricia","laura","sandra","monica","claudia","alejandra","diana","beatriz","martha","gloria","adriana","paola","carolina","andrea","liliana","marcela","angela","catalina","esperanza"],t=n.toLowerCase().split(" ")[0];return e.includes(t)?`Doña ${n.split(" ")[0]}`:`Don ${n.split(" ")[0]}`},DM=async n=>{try{if(!n)return console.log("ClientId no válido para obtener contexto previo"),null;const e=await Ny(n,3);if(e.length===0)return null;let t=`=== HISTORIAL PREVIO CON ESTE CLIENTE ===
`;return e.forEach((a,i)=>{a.turns&&a.turns.length>0&&(t+=`
--- Conversación ${i+1} ---
`,a.turns.slice(-6).forEach(u=>{const m=u.sender==="agent"?"Agente":"Cliente";t+=`${m}: ${u.message}
`}),a.summary&&a.summary.result&&(t+=`Resultado: ${a.summary.result}
`,a.summary.notes&&(t+=`Notas: ${a.summary.notes}
`)))}),t}catch(e){return console.error("Error obteniendo contexto previo:",e),null}},jM=async(n,e=0)=>{try{if(!n||typeof e!="number")return console.log("Datos insuficientes para obtener contexto de clientes similares"),null;const t=await cu(),a=e||1e6,i=a*.3,l=t.filter(p=>p.id!==n.id&&p.debt>=a-i&&p.debt<=a+i);if(l.length===0)return null;const u=l.map(p=>{if(!p.soul)return null;const y=Math.abs(p.soul.relationship-n.relationship)+Math.abs(p.soul.attitude-n.attitude)+Math.abs(p.soul.sensitivity-n.sensitivity)+Math.abs(p.soul.probability-n.probability);return{client:p,similarity:y}}).filter(p=>p!==null).sort((p,y)=>p.similarity-y.similarity).slice(0,2);if(u.length===0)return null;let m=`=== CONTEXTO DE CLIENTES SIMILARES ===
`;m+=`(Clientes con perfil similar: deuda parecida, características del alma similares)

`;for(const{client:p}of u){const y=await Ny(p.id,2);y.length>0&&(m+=`--- Estilo conversacional de cliente similar ---
`,m+=`Perfil del alma: R:${p.soul.relationship} A:${p.soul.attitude} S:${p.soul.sensitivity} P:${p.soul.probability}
`,y.forEach(v=>{v.turns&&v.turns.length>0&&(v.turns.slice(-4).forEach(T=>{const C=T.sender==="agent"?"Agente":"Cliente";m+=`${C}: ${T.message}
`}),v.summary&&(m+=`Resultado: ${v.summary.result}
`),m+=`
`)}))}return m}catch(t){return console.error("Error obteniendo contexto de clientes similares:",t),null}},Fw=async(n,e,t,a=!1)=>{if(!n)return{contextSection:`=== SIN CONTEXTO PREVIO ===
Esta es la primera interacción registrada.
`,currentConversation:"",currentPhase:"greeting",phaseDescription:"FASE 1 - SALUDO: Establecer contacto inicial, identificarse y crear rapport usando tratamiento formal",clientInfo:null};let i=null;try{i=await cf(n)}catch(T){console.error("Error obteniendo información del cliente:",T)}const l=await $c(i==null?void 0:i.provider_id),u=await DM(n),m=u?null:await jM(e,(i==null?void 0:i.debt)||0);let p="";u?p=u:m?p=m:p=`=== SIN CONTEXTO PREVIO ===
Esta es la primera interacción registrada con este tipo de perfil.
`;let y="";t&&t.length>0&&(y=`
=== CONVERSACIÓN ACTUAL ===
`,t.slice(-8).forEach(T=>{const C=T.sender==="agent"?"Agente":"Cliente";y+=`${C}: ${T.message}
`,T.event&&T.event!=="neutral"&&(y+=`[Evento detectado: ${T.event}]
`)}));const v=t&&t.length>0?t[t.length-1].phase||"negotiation":"greeting",b={greeting:"FASE 1 - SALUDO: Establecer contacto inicial, identificarse y crear rapport usando tratamiento formal",debt_notification:"FASE 2 - COMUNICACIÓN DE DEUDA: Informar sobre la deuda pendiente de manera clara, usando montos específicos si el cliente pregunta",negotiation:"FASE 3 - NEGOCIACIÓN: Buscar acuerdo de pago, manejar objeciones con respeto",payment_confirmation:"FASE 4 - CONCRETAR PAGO: Facilitar los datos de pago y confirmar compromisos",farewell:"FASE 5 - DESPEDIDA: Cerrar la conversación de manera cordial y profesional"};return{contextSection:p,currentConversation:y,currentPhase:v,phaseDescription:b[v]||b.negotiation,clientInfo:i,providerInfo:l}},PM=async(n,e,t,a=null)=>{var i,l,u;try{const m=qw();if(!m||m.trim()==="")return o1(n,e,t);const y=_t.create({baseURL:"https://api.openai.com/v1/chat/completions".replace("/chat/completions",""),headers:{Authorization:`Bearer ${m}`,"Content-Type":"application/json"}}),v=await Fw(a,t,e,!0),b=`Eres un especialista en análisis de comunicaciones para cobranza. Tu tarea es categorizar respuestas de clientes.

IMPORTANTE: 
- Siempre usar tratamiento formal (usted, nunca tutear)
- Usar Don/Doña según corresponda
- En fase de comunicación de deuda, mencionar montos específicos si el cliente pregunta

${v.contextSection}

PERFIL ACTUAL DEL CLIENTE:
- Relación/Cercanía: ${t.relationship}/100
- Historial de Pago: ${t.history}/100  
- Actitud: ${t.attitude}/100
- Sensibilidad a Presión: ${t.sensitivity}/100
- Probabilidad de Pago: ${t.probability}/100

FASE ACTUAL: ${v.phaseDescription}

${v.currentConversation}

INSTRUCCIONES:
Analiza el siguiente mensaje del cliente y clasifícalo en UNA de estas categorías EXACTAS:
- neutral
- accepts_payment
- offers_partial  
- reschedule
- evades
- annoyed
- refuses
- thanks
- no_answer
- confirms_payment
- asks_bank_info

Responde SOLO con la categoría, sin explicaciones adicionales.`,T=`Mensaje del cliente a analizar: "${n}"`;let A=((u=(l=(i=(await y.post("/chat/completions",{model:"gpt-3.5-turbo",messages:[{role:"system",content:b},{role:"user",content:T}],max_tokens:20,temperature:.1})).data.choices[0])==null?void 0:i.message)==null?void 0:l.content)==null?void 0:u.trim())||"",M="neutral";const I=["neutral","accepts_payment","offers_partial","reschedule","evades","annoyed","refuses","thanks","no_answer","confirms_payment","asks_bank_info"];for(const q of I)if(A.toLowerCase().includes(q)){M=q;break}const H={neutral:{relationship:0,history:0,attitude:0,sensitivity:0,probability:0},accepts_payment:{relationship:5,history:10,attitude:10,sensitivity:-5,probability:20},offers_partial:{relationship:5,history:5,attitude:10,sensitivity:-5,probability:15},reschedule:{relationship:2,history:-5,attitude:5,sensitivity:0,probability:-5},evades:{relationship:-5,history:-5,attitude:-10,sensitivity:5,probability:-10},annoyed:{relationship:-10,history:-5,attitude:-15,sensitivity:10,probability:-15},refuses:{relationship:-20,history:-20,attitude:-20,sensitivity:20,probability:-30},thanks:{relationship:5,history:0,attitude:10,sensitivity:-5,probability:10},no_answer:{relationship:-5,history:-10,attitude:-5,sensitivity:0,probability:-10},confirms_payment:{relationship:10,history:20,attitude:20,sensitivity:-10,probability:30},asks_bank_info:{relationship:8,history:5,attitude:15,sensitivity:-5,probability:25}},W=H[M]||H.neutral;return{eventType:M,deltas:W,explanation:`Evento detectado por OpenAI: "${M}" con contexto de conversaciones previas`,confidence:.9}}catch(m){return console.error("Error al analizar mensaje con OpenAI:",m),o1(n)}},MM=async(n,e,t,a,i=null)=>{var l,u,m;try{const p=qw();if(!p||p.trim()===""){const q=await cf(i),ie=await $c(q==null?void 0:q.provider_id);return l1(n,e,t,a,ie,q)}const v=_t.create({baseURL:"https://api.openai.com/v1/chat/completions".replace("/chat/completions",""),headers:{Authorization:`Bearer ${p}`,"Content-Type":"application/json"}}),b=await Fw(i,e,n,!1),T=b.clientInfo?OM(b.clientInfo.name):"estimado cliente";let C="";e.relationship>70?C=e.sensitivity>70?"cordial y comprensivo, evitando presión excesiva":"cordial pero directo, manteniendo profesionalismo":e.relationship<40?C=e.sensitivity<40?"formal y directo, profesional pero firme":"formal y considerado, profesional y respetuoso":C="profesional equilibrado, manteniendo cortesía";const A=b.clientInfo&&b.currentPhase==="debt_notification"?`
INFORMACIÓN DE DEUDA: $${b.clientInfo.debt.toLocaleString("es-CO")} COP`:"",M=`Eres un agente de cobranza profesional de ${b.providerInfo.name}. Tu objetivo es recuperar pagos pendientes manteniendo buenas relaciones con los clientes.

REGLAS FUNDAMENTALES DE COMUNICACIÓN:
1. SIEMPRE usar tratamiento formal (usted, nunca tutear)
2. SIEMPRE dirigirse al cliente como "${T}"
3. En FASE DE COMUNICACIÓN DE DEUDA: Si el cliente pregunta por el monto, proporcionar la cifra específica
4. Mantener tono profesional, empático y orientado a soluciones
5. Adaptar el tono al perfil del cliente
6. Si el cliente pregunta por los datos bancarios, proporcionar la información bancaria

${a==="asks_bank_info"?`
  INFORMACIÓN BANCARIA:
  ${b.providerInfo.bank_information}
  `:""}

${b.contextSection}

INFORMACIÓN DEL CLIENTE:${A}

PERFIL ACTUAL DEL CLIENTE:
- Relación/Cercanía: ${e.relationship}/100
- Historial de Pago: ${e.history}/100
- Actitud: ${e.attitude}/100  
- Sensibilidad a Presión: ${e.sensitivity}/100
- Probabilidad de Pago: ${e.probability}/100

TONO RECOMENDADO: ${C}

FASE ACTUAL: ${b.phaseDescription}

${b.currentConversation}

ÚLTIMO MENSAJE DEL CLIENTE: "${t}"
EVENTO DETECTADO: "${a}"

INSTRUCCIONES ESPECÍFICAS POR FASE:
- SALUDO: Preséntese cordialmente usando "Don/Doña", identifique al cliente, establezca el motivo de la llamada
- COMUNICACIÓN DE DEUDA: Informe sobre la deuda. Si pregunta por el monto, mencione la cifra específica
- NEGOCIACIÓN: Busque acuerdos, maneje objeciones con respeto, ofrezca alternativas
- CONCRETAR PAGO: Facilite el proceso, confirme fechas y métodos
- DESPEDIDA: Cierre cordialmente, confirme acuerdos, agradezca

Genere UNA respuesta concisa (máximo 2 oraciones) usando tratamiento formal y dirigiéndose como "${T}".`,I=`Basándose en el contexto y el evento "${a}", genere una respuesta apropiada como agente de cobranza usando tratamiento formal.`;let W=((m=(u=(l=(await v.post("/chat/completions",{model:"gpt-3.5-turbo",messages:[{role:"system",content:M},{role:"user",content:I}],max_tokens:150,temperature:.7})).data.choices[0])==null?void 0:l.message)==null?void 0:u.content)==null?void 0:m.trim())||"";return W||(W=`${T}, entiendo su situación. ¿Podríamos coordinar una fecha para el pago de su deuda pendiente?`),{responseText:W,explanation:`Respuesta generada por OpenAI con tratamiento formal "${T}" y tono "${C}"`,confidence:.9}}catch(p){return console.error("Error al generar respuesta con OpenAI:",p),l1(n,e,t,a,context.providerInfo,context.clientInfo)}},o1=(n,e,t)=>{const a=n.toLowerCase();let i="neutral";a.includes("datos bancarios")||a.includes("información bancaria")||a.includes("número de cuenta")||a.includes("cuenta bancaria")||a.includes("banco")&&(a.includes("cuál")||a.includes("cual")||a.includes("dónde")||a.includes("donde"))||a.includes("cuenta")&&(a.includes("cuál")||a.includes("cual")||a.includes("número"))||a.includes("transferir")&&(a.includes("dónde")||a.includes("donde")||a.includes("cuál")||a.includes("cual"))||a.includes("pagar")&&(a.includes("dónde")||a.includes("donde")||a.includes("cuál")||a.includes("cual"))||a.includes("datos para pagar")||a.includes("información para pagar")?i="asks_bank_info":a.includes("pagar")||a.includes("transferir")||a.includes("depositar")?a.includes("completo")||a.includes("todo")||a.includes("total")?i="accepts_payment":a.includes("parte")||a.includes("parcial")||a.includes("algo")||a.includes("abono")?i="offers_partial":a.includes("próxima")||a.includes("después")||a.includes("luego")||a.includes("semana")?i="reschedule":i="accepts_payment":a.includes("gracias")||a.includes("agradezco")||a.includes("agradecida")?i="thanks":a.includes("ya pagué")||a.includes("realicé el pago")||a.includes("transferí")||a.includes("consigné")?i="confirms_payment":a.includes("no puedo")||a.includes("imposible")||a.includes("difícil")?i="evades":a.includes("molesto")||a.includes("harto")||a.includes("fastidio")||a.includes("joder")?i="annoyed":(a.includes("no voy a pagar")||a.includes("no pagaré")||a.includes("olvídate")||a.includes("no pienso"))&&(i="refuses");const l={neutral:{relationship:0,history:0,attitude:0,sensitivity:0,probability:0},accepts_payment:{relationship:5,history:10,attitude:10,sensitivity:-5,probability:20},offers_partial:{relationship:5,history:5,attitude:10,sensitivity:-5,probability:15},reschedule:{relationship:2,history:-5,attitude:5,sensitivity:0,probability:-5},evades:{relationship:-5,history:-5,attitude:-10,sensitivity:5,probability:-10},annoyed:{relationship:-10,history:-5,attitude:-15,sensitivity:10,probability:-15},refuses:{relationship:-20,history:-20,attitude:-20,sensitivity:20,probability:-30},thanks:{relationship:5,history:0,attitude:10,sensitivity:-5,probability:10},no_answer:{relationship:-5,history:-10,attitude:-5,sensitivity:0,probability:-10},confirms_payment:{relationship:10,history:20,attitude:20,sensitivity:-10,probability:30},asks_bank_info:{relationship:8,history:5,attitude:15,sensitivity:-5,probability:25}},u=l[i]||l.neutral;return{eventType:i,deltas:u,explanation:`Evento detectado por análisis local mejorado: "${i}" basado en patrones de lenguaje.`,confidence:.7}},l1=(n,e,t,a,i=null,l=null)=>{let u="neutral";e.relationship>70?e.sensitivity>70?u="friendly_no_pressure":u="friendly":e.relationship<40&&(e.sensitivity<40?u="formal_direct":u="formal_soft");const m={accepts_payment:{friendly_no_pressure:"Excelente, me alegra mucho escuchar eso. Cuando usted pueda realizar el pago, solo avíseme y le envío toda la información necesaria.",friendly:"Perfecto, muchas gracias por su disposición. ¿Le parece bien que le envíe los datos bancarios ahora mismo?",formal_direct:"Muy bien, agradecemos su decisión. Le voy a proporcionar los datos para que pueda realizar el pago antes del viernes.",formal_soft:"Gracias por su confirmación. ¿Prefiere que le envíe la información de pago por WhatsApp o por correo?",neutral:"Entendido. ¿Desea que le proporcione los datos bancarios para realizar el pago?"},offers_partial:{friendly_no_pressure:"Agradezco mucho su esfuerzo por hacer este abono. Cualquier pago nos ayuda bastante y valoramos su compromiso.",friendly:"Gracias por ofrecerse a hacer un abono. Eso nos ayuda mucho. ¿Cuándo podría usted realizar esta transferencia?",formal_direct:"Tomamos nota de su propuesta de pago parcial. ¿Podría indicarnos cuándo haría este abono y cuándo el saldo restante?",formal_soft:"Entendemos su situación y agradecemos su disposición. ¿Qué porcentaje de la deuda podría usted cubrir inicialmente?",neutral:"De acuerdo con el pago parcial. ¿Podríamos coordinar cuándo haría usted este primer abono?"},reschedule:{friendly_no_pressure:"No hay ningún problema, entiendo que usted necesita más tiempo. ¿Qué fecha le resultaría más cómoda?",friendly:"Claro que podemos ajustar la fecha. ¿Cuál sería el mejor momento para usted realizar el pago?",formal_direct:"Podemos considerar una nueva fecha. ¿Cuál es su propuesta concreta y definitiva para el pago?",formal_soft:"Entendemos la necesidad de reprogramar. ¿Qué fecha le resultaría más conveniente para realizar el pago?",neutral:"De acuerdo. ¿Cuál sería la nueva fecha propuesta para efectuar el pago?"},evades:{friendly_no_pressure:"Entiendo que puede ser un tema delicado. No se preocupe, podemos buscar juntos la mejor solución para su situación.",friendly:"Comprendo que es una situación compleja. ¿Hay algo específico que podamos resolver para facilitar el pago?",formal_direct:"Necesitamos una respuesta concreta sobre el pago pendiente. ¿Podría indicarnos cuál es su situación actual?",formal_soft:"Entendemos que pueda ser un tema complicado. ¿Podríamos programar una fecha para hablar con más tranquilidad?",neutral:"¿Podría por favor ayudarnos a entender cuál es su situación respecto al pago pendiente?"},annoyed:{friendly_no_pressure:"Lamento mucho si le he causado alguna molestia. No es mi intención incomodarle, solo buscamos encontrar una solución que funcione para ambas partes.",friendly:"Disculpe si le he generado alguna molestia. ¿Qué podríamos hacer diferente para resolver esta situación de la mejor manera?",formal_direct:"Entendemos su molestia, sin embargo necesitamos resolver el tema del pago pendiente. ¿Qué alternativa propone usted?",formal_soft:"Lamentamos si esta comunicación le resulta incómoda. ¿Habría un mejor momento o forma para abordar este tema?",neutral:"Comprendo su posición. ¿Cómo preferiría usted que manejáramos esta situación para llegar a una solución?"},refuses:{friendly_no_pressure:"Entiendo su posición actual. Quizás podríamos explorar algunas alternativas de pago que se ajusten mejor a su situación.",friendly:"Comprendo que sea difícil en este momento. ¿Podríamos considerar un plan de pagos más flexible?",formal_direct:"Tomamos nota de su respuesta. Sin embargo, la deuda permanece vigente. ¿Podríamos discutir alternativas viables?",formal_soft:"Entendemos que pueda tener dificultades. ¿Le interesaría conocer otras opciones de pago disponibles?",neutral:"¿Podríamos explorar alternativas que faciliten el pago de la deuda pendiente?"},thanks:{friendly_no_pressure:"No hay de qué. Es un placer poder ayudarle. Si necesita cualquier cosa adicional, no dude en contactarme.",friendly:"Es un gusto poder ser de ayuda. ¿Hay algo más en lo que pueda asistirle para facilitar el proceso?",formal_direct:"De nada. ¿Podríamos entonces confirmar cuándo realizará el pago de la deuda pendiente?",formal_soft:"Nos alegra poder serle de utilidad. ¿Necesita alguna información adicional para proceder con el pago?",neutral:"De nada. ¿Tiene alguna otra consulta respecto al proceso de pago?"},confirms_payment:{friendly_no_pressure:"Excelente noticia. Muchas gracias por realizar el pago. Vamos a verificarlo y le confirmaremos en cuanto se refleje en el sistema.",friendly:"Genial. Gracias por confirmar su pago. Lo verificaremos inmediatamente y le daremos el comprobante correspondiente.",formal_direct:"Gracias por su confirmación. Procederemos a verificar el pago y le notificaremos una vez esté procesado en el sistema.",formal_soft:"Agradecemos mucho su pago. Realizaremos la verificación correspondiente y le informaremos cuando esté todo listo.",neutral:"Gracias por informarnos. Verificaremos el pago y actualizaremos el estado de su cuenta."},asks_bank_info:{friendly_no_pressure:`Señor@ ${(l==null?void 0:l.name)||""}, esta es la información de las cuentas bancarias para ${(i==null?void 0:i.name)||"nuestra empresa"}: ${(i==null?void 0:i.bank_information)||"Le enviaré la información bancaria por separado."}`,friendly:`Don/Doña ${(l==null?void 0:l.name)||""}, le adjunto las cuentas de ${(i==null?void 0:i.name)||"nuestra empresa"}: ${(i==null?void 0:i.bank_information)||"Le enviaré la información bancaria completa."}`,formal_direct:`Señor@ ${(l==null?void 0:l.name)||""}, esta es la información de las cuentas bancarias para ${(i==null?void 0:i.name)||"nuestra empresa"}: ${(i==null?void 0:i.bank_information)||"Recibirá la información bancaria detallada."}`,formal_soft:`Don/Doña ${(l==null?void 0:l.name)||""}, le adjunto las cuentas de ${(i==null?void 0:i.name)||"nuestra empresa"}: ${(i==null?void 0:i.bank_information)||"Le haré llegar todos los datos bancarios necesarios."}`,neutral:`Señor@ ${(l==null?void 0:l.name)||""}, esta es la información de las cuentas bancarias para ${(i==null?void 0:i.name)||"nuestra empresa"}: ${(i==null?void 0:i.bank_information)||"Le proporcionaré la información bancaria completa."}`},default:{friendly_no_pressure:"Entiendo perfectamente su situación. No se preocupe, cuando pueda realizar el pago solo avíseme.",friendly:"Agradezco que mantengamos esta comunicación. ¿Hay algo en lo que pueda ayudarle para facilitar el proceso de pago?",formal_direct:"Necesitamos regularizar su situación de deuda pendiente. ¿Podría indicarnos una fecha específica de pago?",formal_soft:"Entendemos que pueden surgir inconvenientes. ¿Podría comentarnos cuándo le sería posible realizar el pago?",neutral:"¿Podría por favor indicarnos cuándo podríamos esperar el pago de la deuda pendiente?"}},p=m[a]||m.default;return{responseText:p[u]||p.neutral,explanation:`Respuesta generada con tratamiento formal y tono "${u}" adaptado al perfil del cliente`,confidence:.8}},yt={GEMINI:"gemini",ZEPHYR:"zephyr",OPENAI:"openai"};let Xo=yt.OPENAI;const kM=n=>Object.values(yt).includes(n)?(Xo=n,!0):!1,LM=()=>Xo,VM=async(n,e,t,a=null)=>{switch(Xo){case yt.GEMINI:return X6(n);case yt.ZEPHYR:return RM(n,e,t);case yt.OPENAI:return PM(n,e,t,a);default:throw new Error(`Servicio de IA no reconocido: ${Xo}`)}},sh=async(n,e,t,a,i=null)=>{switch(Xo){case yt.GEMINI:return Z6(n,e,t,a);case yt.ZEPHYR:return IM(n,e,t,a);case yt.OPENAI:return MM(n,e,t,a,i);default:throw new Error(`Servicio de IA no reconocido: ${Xo}`)}},Hw=({phase:n,onChange:e})=>{const t=a=>{e(a.target.value)};return f.jsxs("div",{className:"form-group",children:[f.jsx("label",{className:"label",children:"Fase de la conversación"}),f.jsxs("select",{className:"input w-full",value:n,onChange:t,children:[f.jsx("option",{value:Ie.GREETING,children:"Fase 1: Saludo"}),f.jsx("option",{value:Ie.DEBT_NOTIFICATION,children:"Fase 2: Comunicación de deuda"}),f.jsx("option",{value:Ie.NEGOTIATION,children:"Fase 3: Negociación"}),f.jsx("option",{value:Ie.PAYMENT_CONFIRMATION,children:"Fase 4: Concretar pago"}),f.jsx("option",{value:Ie.FAREWELL,children:"Fase 5: Despedida"})]})]})},$w=({isOpen:n,onClose:e,clientId:t,clientName:a,currentDebt:i,onPaymentConfirmed:l})=>{const[u,m]=P.useState({amountPaid:"",paymentType:"complete",notes:""}),[p,y]=P.useState(!1),[v,b]=P.useState(""),T=parseFloat(u.amountPaid)||0,C=Math.max(0,i-T),A=q=>{const{name:ie,value:le}=q.target;m(pe=>({...pe,[ie]:le})),b("")},M=q=>{const ie=q.target.value;m(le=>({...le,paymentType:ie,amountPaid:ie==="complete"?i.toString():le.amountPaid}))},I=()=>!u.amountPaid||T<=0?(b("El monto pagado debe ser mayor a 0"),!1):T>i?(b("El monto pagado no puede ser mayor a la deuda actual"),!1):!0,H=async q=>{if(q.preventDefault(),!!I()){y(!0),b("");try{const ie={amount:T,type:u.paymentType,notes:u.notes,previousDebt:i,remainingDebt:C};await dw(t,C,ie),l&&l({amountPaid:T,remainingDebt:C,paymentType:u.paymentType,notes:u.notes}),m({amountPaid:"",paymentType:"complete",notes:""}),e()}catch(ie){console.error("Error al procesar el pago:",ie),b(`Error al procesar el pago: ${ie.message}`)}finally{y(!1)}}},W=()=>{m({amountPaid:"",paymentType:"complete",notes:""}),b(""),e()};return n?f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:f.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[f.jsxs("div",{className:"flex justify-between items-center mb-4",children:[f.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Confirmar Pago"}),f.jsx("button",{onClick:W,className:"text-gray-400 hover:text-gray-600",disabled:p,children:f.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),f.jsxs("form",{onSubmit:H,className:"space-y-4",children:[f.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[f.jsxs("h3",{className:"font-medium text-gray-800",children:["Cliente: ",a]}),f.jsxs("p",{className:"text-sm text-gray-600",children:["Deuda actual: $",i.toLocaleString("es-CO")," COP"]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipo de Pago"}),f.jsxs("select",{name:"paymentType",value:u.paymentType,onChange:M,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:p,children:[f.jsx("option",{value:"complete",children:"Pago Completo"}),f.jsx("option",{value:"partial",children:"Pago Parcial"})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Monto Pagado (COP)"}),f.jsx("input",{type:"number",name:"amountPaid",value:u.amountPaid,onChange:A,placeholder:"Ingrese el monto pagado",min:"0",max:i,step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:p,required:!0})]}),u.amountPaid&&f.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg",children:[f.jsxs("div",{className:"flex justify-between text-sm",children:[f.jsx("span",{children:"Deuda actual:"}),f.jsxs("span",{children:["$",i.toLocaleString("es-CO")," COP"]})]}),f.jsxs("div",{className:"flex justify-between text-sm",children:[f.jsx("span",{children:"Monto a pagar:"}),f.jsxs("span",{children:["-$",T.toLocaleString("es-CO")," COP"]})]}),f.jsx("div",{className:"border-t border-blue-200 mt-2 pt-2",children:f.jsxs("div",{className:"flex justify-between font-medium",children:[f.jsx("span",{children:"Deuda restante:"}),f.jsxs("span",{className:C===0?"text-green-600":"text-gray-800",children:["$",C.toLocaleString("es-CO")," COP"]})]})})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notas Adicionales (Opcional)"}),f.jsx("textarea",{name:"notes",value:u.notes,onChange:A,placeholder:"Ej: Pago realizado por transferencia bancaria, fecha de próximo abono...",rows:"3",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:p})]}),v&&f.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:v}),f.jsxs("div",{className:"flex gap-3 pt-4",children:[f.jsx("button",{type:"button",onClick:W,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-500",disabled:p,children:"Cancelar"}),f.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 disabled:opacity-50",disabled:p||!u.amountPaid,children:p?"Procesando...":"Confirmar Pago"})]})]})]})}):null},UM=()=>{const{clientId:n}=Ag(),{currentUser:e}=ou(),t=An(),a=Q=>{if(!Q)return"estimado cliente";const _e=["maria","ana","carmen","rosa","lucia","elena","patricia","laura","sandra","monica","claudia","alejandra","diana","beatriz","martha","gloria","adriana","paola","carolina","andrea","liliana","marcela","angela","catalina","esperanza"],ye=Q.toLowerCase().split(" ")[0];return _e.includes(ye)?`Doña ${Q.split(" ")[0]}`:`Don ${Q.split(" ")[0]}`},l=(()=>{if(n)return n;const _e=window.location.hash.match(/\/conversation\/new\/([^\/\?#]+)/);return _e&&_e[1]?_e[1]:null})(),[u,m]=P.useState(null),[p,y]=P.useState(null),[v,b]=P.useState(null),[T,C]=P.useState([]),[A,M]=P.useState(""),[I,H]=P.useState(!0),[W,q]=P.useState(!1),[ie,le]=P.useState(""),[pe,k]=P.useState(""),[R,N]=P.useState("neutral"),[j,V]=P.useState(""),[z,O]=P.useState(Ie.GREETING),[dt,Me]=P.useState(""),[J,ue]=P.useState({relationship:0,history:0,attitude:0,sensitivity:0,probability:0}),[ve,Fe]=P.useState(!1),[L,se]=P.useState(!1),he=P.useRef(null);P.useEffect(()=>{l&&e&&(async()=>{var _e;if(!l){Me("Error: No se pudo identificar el cliente desde la URL. Por favor, vuelva a la lista de clientes e intente nuevamente."),H(!1);return}if(!e){Me("Error: Usuario no autenticado. Por favor, inicie sesión nuevamente."),H(!1);return}try{H(!0),Me("");const ye=await cf(l);if(!ye){Me(`Error: No se encontró el cliente con ID "${l}". Es posible que haya sido eliminado o que el enlace sea incorrecto.`),H(!1);return}if(!ye.name||!ye.soul){Me("Error: Los datos del cliente están incompletos. Por favor, verifique la información del cliente."),H(!1);return}m(ye),b(ye.soul);const kn=await M6(l,e.uid,ye.soul);if(!kn){Me("Error: No se pudo crear la conversación. Por favor, intente nuevamente."),H(!1);return}y(kn);const Qn=await $c(ye.provider_id),Tt=`Buenos días señor@ ${ye.name}, le saluda Juan Pablo de Danta Labs, la empresa que esta apoyando a ${Qn.name?Qn.name:"Acriventas"} en la gestión de su cartera. ¿Cómo ha estado? `;V(Tt),le(Tt)}catch(ye){console.error("Error al iniciar conversación:",ye),ye.code==="permission-denied"?Me("Error: No tiene permisos para acceder a este cliente o crear conversaciones."):ye.code==="not-found"?Me("Error: El cliente especificado no existe o ha sido eliminado."):(_e=ye.message)!=null&&_e.includes("Firebase")?Me("Error de conexión con la base de datos. Por favor, verifique su conexión a internet e intente nuevamente."):Me(`Error inesperado al iniciar la conversación: ${ye.message||"Error desconocido"}`),m(null),b(null),y(null)}finally{H(!1)}})()},[l,e]),P.useEffect(()=>{var Q;(Q=he.current)==null||Q.scrollIntoView({behavior:"smooth"})},[T]);const oe=async Q=>{try{if(m(_e=>({..._e,debt:Q.remainingDebt})),se(!0),Q.remainingDebt===0&&O(Ie.FAREWELL),p)try{const _e=a(u.name);let ye="Acriventas";if(u.provider_id)try{const Tt=await $c(u.provider_id);Tt&&Tt.name&&(ye=Tt.name)}catch(Tt){console.error("Error al obtener proveedor:",Tt)}const kn=`Buenos días ${_e}, le habla Juan Pablo de Danta Labs, la empresa que esta apoyando a ${ye} en la gestión de su cartera. Hemos recibido su soporte de pago. Esperamos poder seguir atendiéndolo próximamente`,Qn={id:`agent-thanks-${Date.now()}`,sender:"agent",message:kn,phase:Ie.PAYMENT_CONFIRMATION,timestamp:new Date,event:"payment_thanks"};C(Tt=>[...Tt,Qn]),await Mp(p,{sender:"agent",message:kn,phase:Ie.PAYMENT_CONFIRMATION,event:"payment_thanks"})}catch(_e){console.error("Error al enviar mensaje de agradecimiento:",_e)}console.log("Pago procesado exitosamente:",Q)}catch(_e){console.error("Error al procesar confirmación de pago:",_e)}},be=async()=>{if(!(!A.trim()||W))try{q(!0);const Q={id:`agent-${Date.now()}`,sender:"agent",message:A,phase:z,timestamp:new Date};C(_e=>[..._e,Q]),await Mp(p,{sender:"agent",message:A,phase:z,event:"neutral"}),M(""),z===Ie.GREETING&&O(Ie.DEBT_NOTIFICATION)}catch(Q){console.error("Error al enviar mensaje:",Q)}finally{q(!1)}},je=async Q=>{const _e=Q.target.value;if(k(_e),!(!l||!v)&&_e.trim().split(/\s+/).length>3)try{const ye=await VM(_e,T,v,l);N(ye.eventType),ue(ye.deltas)}catch(ye){console.error("Error al analizar mensaje:",ye),N("neutral"),ue({relationship:0,history:0,attitude:0,sensitivity:0,probability:0})}},Te=async()=>{if(!(!pe.trim()||W)){if(!p||!l||!v){Me("Error: Datos de conversación incompletos. Por favor, recargue la página.");return}try{q(!0);const Q={id:`client-${Date.now()}`,sender:"client",message:pe,phase:z,timestamp:new Date,event:R};C(kn=>[...kn,Q]);const _e=await Mp(p,{sender:"client",message:pe,phase:z,event:R});b(_e.currentSoul);const ye=await sh(T,_e.currentSoul,pe,R,l);le(ye.responseText),k(""),N("neutral"),ue({relationship:0,history:0,attitude:0,sensitivity:0,probability:0}),R==="accepts_payment"&&z===Ie.NEGOTIATION&&O(Ie.PAYMENT_CONFIRMATION),R==="confirms_payment"&&z===Ie.PAYMENT_CONFIRMATION&&O(Ie.FAREWELL)}catch(Q){console.error("Error al agregar mensaje del cliente:",Q),Me(`Error al procesar el mensaje: ${Q.message||"Error desconocido"}`)}finally{q(!1)}}},xt=Q=>{const _e=Q.target.value;N(_e);const ye={neutral:{relationship:0,history:0,attitude:0,sensitivity:0,probability:0},accepts_payment:{relationship:5,history:10,attitude:10,sensitivity:-5,probability:20},offers_partial:{relationship:5,history:5,attitude:10,sensitivity:-5,probability:15},reschedule:{relationship:2,history:-5,attitude:5,sensitivity:0,probability:-5},evades:{relationship:-5,history:-5,attitude:-10,sensitivity:5,probability:-10},annoyed:{relationship:-10,history:-5,attitude:-15,sensitivity:10,probability:-15},refuses:{relationship:-20,history:-20,attitude:-20,sensitivity:20,probability:-30},thanks:{relationship:5,history:0,attitude:10,sensitivity:-5,probability:10},no_answer:{relationship:-5,history:-10,attitude:-5,sensitivity:0,probability:-10},confirms_payment:{relationship:10,history:20,attitude:20,sensitivity:-10,probability:30},asks_bank_info:{relationship:8,history:5,attitude:15,sensitivity:-5,probability:25}};ue(ye[_e]||ye.neutral)},Ze=Q=>{O(Q)},Sn=()=>{ie&&(M(ie),le(""))},Yn=async Q=>{b(Q);try{await z6(p,Q)}catch(_e){console.error("Error al actualizar valores del alma:",_e)}},Nn=()=>{t(`/conversation/${p}`)};if(I)return f.jsx("div",{className:"container mx-auto px-4 py-6",children:f.jsxs("div",{className:"text-center",children:[f.jsxs("div",{className:"animate-pulse space-y-4",children:[f.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3 mx-auto"}),f.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mx-auto"}),f.jsx("div",{className:"h-64 bg-gray-200 rounded"})]}),f.jsx("p",{className:"mt-4 text-gray-600",children:l?u?p?"Preparando interfaz...":"Creando conversación...":"Validando cliente...":"Obteniendo información del cliente..."})]})});if(dt)return f.jsx("div",{className:"container mx-auto px-4 py-6",children:f.jsxs("div",{className:"max-w-md mx-auto",children:[f.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-6 py-4 rounded-lg shadow",role:"alert",children:f.jsxs("div",{className:"flex",children:[f.jsx("div",{className:"flex-shrink-0",children:f.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:f.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),f.jsxs("div",{className:"ml-3",children:[f.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error al iniciar conversación"}),f.jsx("div",{className:"mt-2 text-sm text-red-700",children:f.jsx("p",{children:dt})})]})]})}),f.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row gap-3",children:[f.jsx("button",{className:"btn-primary flex-1",onClick:()=>{Me(""),H(!0),window.location.reload()},children:"Reintentar"}),f.jsx("button",{className:"btn-secondary flex-1",onClick:()=>t("/clients"),children:"Volver a Clientes"})]}),!1]})});if(!u||!p||!v)return f.jsx("div",{className:"container mx-auto px-4 py-6",children:f.jsxs("div",{className:"bg-yellow-100 border border-yellow-400 text-yellow-700 px-4 py-3 rounded relative",role:"alert",children:[f.jsx("strong",{className:"font-bold",children:"Advertencia:"}),f.jsx("span",{className:"block sm:inline",children:" Los datos de la conversación no están completamente cargados."}),f.jsxs("div",{className:"mt-2",children:[f.jsx("button",{className:"btn-secondary mr-2",onClick:()=>window.location.reload(),children:"Recargar"}),f.jsx("button",{className:"btn-secondary",onClick:()=>t("/clients"),children:"Volver a Clientes"})]})]})});const Kn=T.reduce((Q,_e)=>{const ye=_e.phase||Ie.NEGOTIATION;return Q[ye]||(Q[ye]=[]),Q[ye].push(_e),Q},{}),ce=[Ie.GREETING,Ie.DEBT_NOTIFICATION,Ie.NEGOTIATION,Ie.PAYMENT_CONFIRMATION,Ie.FAREWELL],we=Q=>{switch(Q){case Ie.GREETING:return"Fase 1: Saludo";case Ie.DEBT_NOTIFICATION:return"Fase 2: Comunicación de deuda";case Ie.NEGOTIATION:return"Fase 3: Negociación";case Ie.PAYMENT_CONFIRMATION:return"Fase 4: Concretar pago";case Ie.FAREWELL:return"Fase 5: Despedida";default:return"Fase desconocida"}};return f.jsxs("div",{className:"container mx-auto px-4 py-6",children:[f.jsxs("div",{className:"mb-6 flex justify-between items-center",children:[f.jsxs("h1",{className:"text-2xl font-bold",children:["Conversación con ",a(u.name)]}),f.jsxs("div",{className:"flex gap-2",children:[f.jsxs("button",{className:"btn-primary flex flex-row items-center justify-center gap-1",onClick:()=>Fe(!0),disabled:!u,children:[f.jsx("svg",{className:"w-8 h-8 -mx-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})}),"Confirmar Pago"]}),f.jsx("button",{className:"btn-primary",onClick:Nn,children:"Finalizar Conversación"})]})]}),L&&f.jsx("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-6",children:f.jsxs("div",{className:"flex items-center",children:[f.jsx("svg",{className:"w-5 h-5 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:f.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),f.jsx("span",{className:"font-medium",children:"Pago procesado exitosamente. La deuda del cliente ha sido actualizada."}),f.jsx("button",{onClick:()=>se(!1),className:"ml-auto text-green-600 hover:text-green-800",children:"×"})]})}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[f.jsxs("div",{className:"md:col-span-2",children:[dt&&f.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",role:"alert",children:f.jsxs("div",{className:"flex",children:[f.jsx("div",{className:"flex-shrink-0",children:f.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:f.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),f.jsx("div",{className:"ml-3",children:f.jsx("p",{className:"text-sm",children:dt})}),f.jsx("div",{className:"ml-auto pl-3",children:f.jsxs("button",{onClick:()=>Me(""),className:"text-red-400 hover:text-red-600",children:[f.jsx("span",{className:"sr-only",children:"Cerrar"}),f.jsx("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:f.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})]})})]})}),f.jsxs("div",{className:"bg-white rounded-lg shadow p-4 mb-4",children:[f.jsxs("div",{className:"h-96 overflow-y-auto mb-4",children:[ce.map(Q=>{const _e=Kn[Q]||[];return _e.length===0?null:f.jsxs("div",{className:"mb-6",children:[f.jsx("h3",{className:"text-md font-semibold mb-2 bg-gray-100 p-2 rounded",children:we(Q)}),f.jsx("div",{className:"space-y-4",children:_e.map(ye=>f.jsxs("div",{className:`mb-4 ${ye.sender==="agent"?"text-right":"text-left"}`,children:[f.jsxs("div",{className:`inline-block rounded-lg px-4 py-2 max-w-[80%] ${ye.sender==="agent"?"bg-primary-100 text-primary-800":"bg-gray-100 text-gray-800"}`,children:[f.jsx("p",{className:"whitespace-pre-line",children:ye.message}),f.jsx("p",{className:"text-xs text-gray-500 mt-1",children:ye.timestamp.toLocaleTimeString()})]}),ye.event&&ye.event!=="neutral"&&f.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Evento: ",ye.event]})]},ye.id))})]},Q)}),T.length===0&&f.jsxs("div",{className:"text-center p-4",children:[f.jsx("p",{className:"text-gray-500",children:"No hay mensajes aún. Comience la conversación."}),j&&f.jsxs("div",{className:"mt-4 p-3 bg-blue-50 rounded-md",children:[f.jsx("p",{className:"text-sm text-blue-600 mb-1",children:"Saludo inicial sugerido:"}),f.jsx("p",{className:"text-sm",children:j}),f.jsx("button",{className:"text-xs text-blue-600 mt-1 underline",onClick:()=>M(j),children:"Usar este saludo"})]})]}),f.jsx("div",{ref:he})]}),f.jsxs("div",{className:"mb-4",children:[f.jsx(Hw,{phase:z,onChange:Ze}),f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1 mt-4",children:"Mensaje del Agente"}),f.jsxs("div",{className:"flex",children:[f.jsx("input",{type:"text",className:"input flex-grow",placeholder:"Escriba su mensaje...",value:A,onChange:Q=>M(Q.target.value)}),f.jsx("button",{className:"btn-primary ml-2",onClick:be,disabled:W||!A.trim(),children:"Enviar"})]}),ie&&f.jsxs("div",{className:"mt-2 p-2 bg-blue-50 rounded-md",children:[f.jsx("p",{className:"text-sm text-blue-600 mb-1",children:"Respuesta sugerida:"}),f.jsx("p",{className:"text-sm",children:ie}),f.jsx("button",{className:"text-xs text-blue-600 mt-1 underline",onClick:Sn,children:"Usar esta respuesta"})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mensaje del Cliente"}),f.jsx("textarea",{className:"input w-full mb-2",rows:"3",placeholder:"Escriba lo que dijo el cliente...",value:pe,onChange:je}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-2",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de Evento"}),f.jsxs("select",{className:"input w-full",value:R,onChange:xt,children:[f.jsx("option",{value:"neutral",children:"Evento Neutro"}),f.jsx("option",{value:"accepts_payment",children:"Acepta pagar en fecha acordada"}),f.jsx("option",{value:"offers_partial",children:"Ofrece pago parcial"}),f.jsx("option",{value:"reschedule",children:"Propone nueva fecha"}),f.jsx("option",{value:"evades",children:"Evade o no da respuesta clara"}),f.jsx("option",{value:"annoyed",children:"Se muestra molesto"}),f.jsx("option",{value:"refuses",children:"Se niega a pagar"}),f.jsx("option",{value:"thanks",children:"Agradece recordatorio"}),f.jsx("option",{value:"no_answer",children:"No contesta la llamada"}),f.jsx("option",{value:"confirms_payment",children:"Confirma pago realizado"}),f.jsx("option",{value:"asks_bank_info",children:"Solicita información bancaria"})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Modificaciones Sugeridas"}),f.jsxs("div",{className:"text-sm",children:[f.jsxs("p",{children:["Relación: ",J.relationship>0?"+":"",J.relationship]}),f.jsxs("p",{children:["Historial: ",J.history>0?"+":"",J.history]}),f.jsxs("p",{children:["Actitud: ",J.attitude>0?"+":"",J.attitude]}),f.jsxs("p",{children:["Sensibilidad: ",J.sensitivity>0?"+":"",J.sensitivity]}),f.jsxs("p",{children:["Probabilidad: ",J.probability>0?"+":"",J.probability]})]})]})]}),f.jsx("button",{className:"btn-secondary w-full",onClick:Te,disabled:W||!pe.trim(),children:"Agregar Mensaje del Cliente"})]})]})]}),f.jsxs("div",{children:[f.jsxs("div",{className:"bg-white rounded-lg shadow p-4 mb-4",children:[f.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Información del Cliente"}),f.jsxs("div",{className:"space-y-2",children:[f.jsxs("p",{children:[f.jsx("span",{className:"font-medium",children:"Nombre:"})," ",u.name]}),f.jsxs("p",{children:[f.jsx("span",{className:"font-medium",children:"Tratamiento:"})," ",a(u.name)]}),f.jsxs("p",{children:[f.jsx("span",{className:"font-medium",children:"Teléfono:"})," ",u.phone]}),f.jsxs("p",{children:[f.jsx("span",{className:"font-medium",children:"Email:"})," ",u.email||"No disponible"]}),f.jsxs("p",{children:[f.jsx("span",{className:"font-medium",children:"Deuda:"})," $",(u.debt||0).toLocaleString("es-CO")," COP"]}),!1]})]}),f.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[f.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Variables del Alma"}),f.jsx(Wo,{initialValues:v,readOnly:!1,onChange:Yn}),f.jsx("p",{className:"mt-3 text-xs text-gray-500",children:"Puede ajustar manualmente las variables según su percepción de la conversación."})]})]})]}),f.jsx($w,{isOpen:ve,onClose:()=>Fe(!1),clientId:l,clientName:(u==null?void 0:u.name)||"Cliente",currentDebt:(u==null?void 0:u.debt)||0,onPaymentConfirmed:oe})]})},zM=()=>{var Nn,Kn;const{conversationId:n}=Ag(),e=An(),[t,a]=P.useState(null),[i,l]=P.useState(!0),[u,m]=P.useState(!1),[p,y]=P.useState(!1),[v,b]=P.useState(null),[T,C]=P.useState(""),[A,M]=P.useState(!1),[I,H]=P.useState(Ie.NEGOTIATION),[W,q]=P.useState(""),[ie,le]=P.useState(!1),[pe,k]=P.useState(!1),[R,N]=P.useState({sender:"agent",message:"",event:"neutral",phase:Ie.NEGOTIATION,deltas:{relationship:0,history:0,attitude:0,sensitivity:0,probability:0},updateClientSoul:!1}),[j,V]=P.useState({result:"pending",notes:"",nextActionDate:""});P.useEffect(()=>{(async()=>{var we;if(!n){q("Error: ID de conversación no válido."),l(!1);return}try{l(!0),q("");const Q=await yi(n);if(!Q){q("Error: No se encontró la conversación especificada. Es posible que haya sido eliminada."),l(!1);return}if(!Q.clientId||!Q.clientName){q("Error: Los datos de la conversación están incompletos."),l(!1);return}if(a(Q),Q.summary&&V(Q.summary),Q.turns&&Q.turns.length>0){const _e=Q.turns[Q.turns.length-1];_e.phase&&(H(_e.phase),N(ye=>({...ye,phase:_e.phase})))}}catch(Q){console.error("Error al cargar conversación:",Q),Q.code==="permission-denied"?q("Error: No tiene permisos para acceder a esta conversación."):Q.code==="not-found"?q("Error: La conversación especificada no existe o ha sido eliminada."):(we=Q.message)!=null&&we.includes("Firebase")?q("Error de conexión con la base de datos. Por favor, verifique su conexión a internet."):q(`Error al cargar la conversación: ${Q.message||"Error desconocido"}`)}finally{l(!1)}})()},[n]);const z=async ce=>{var we;try{if(a(Q=>({...Q,clientDebt:ce.remainingDebt,client:Q.client?{...Q.client,debt:ce.remainingDebt}:null})),k(!0),V(Q=>({...Q,result:ce.remainingDebt===0?"payment":"partial_payment",notes:Q.notes?`${Q.notes}

Pago procesado: ${ce.amountPaid.toLocaleString("es-CO")} COP. ${ce.notes||""}`:`Pago procesado: ${ce.amountPaid.toLocaleString("es-CO")} COP. ${ce.notes||""}`})),t.isActive&&n)try{const _e=(Tt=>{if(!Tt)return"estimado cliente";const Zr=["maria","ana","carmen","rosa","lucia","elena","patricia","laura","sandra","monica","claudia","alejandra","diana","beatriz","martha","gloria","adriana","paola","carolina","andrea","liliana","marcela","angela","catalina","esperanza"],cl=Tt.toLowerCase().split(" ")[0];return Zr.includes(cl)?`Doña ${Tt.split(" ")[0]}`:`Don ${Tt.split(" ")[0]}`})(t.clientName),ye=await $c((we=t.client)==null?void 0:we.provider_id),kn=`Buenos días ${_e}, le habla Juan Pablo de Danta Labs, la empresa que esta apoyando a ${ye.name} en la gestión de su cartera. Hemos recibido su soporte de pago. Esperamos poder seguir atendiéndolo próximamente`;await $E(n,{sender:"agent",message:kn,phase:Ie.PAYMENT_CONFIRMATION,event:"payment_thanks"});const Qn=await yi(n);a(Qn)}catch(Q){console.error("Error al enviar mensaje de agradecimiento:",Q)}console.log("Pago procesado exitosamente:",ce)}catch(Q){console.error("Error al procesar confirmación de pago:",Q)}},O=ce=>{const{name:we,value:Q}=ce.target;V(_e=>({..._e,[we]:Q}))},dt=async()=>{if(t)try{m(!0),await k6(n,j);const ce=await yi(n);a(ce),m(!1)}catch(ce){console.error("Error al cerrar conversación:",ce),q(`Error al cerrar la conversación: ${ce.message||"Error desconocido"}`),m(!1)}},Me=ce=>{const{name:we,value:Q}=ce.target;N(_e=>({..._e,[we]:Q}))},J=ce=>{H(ce),N(we=>({...we,phase:ce}))},ue=(ce,we)=>{N(Q=>({...Q,deltas:{...Q.deltas,[ce]:parseInt(we,10)||0}}))},ve=async()=>{if(!(!R.message.trim()||!t))try{const ce={sender:R.sender,message:R.message,event:R.event,phase:R.phase||I,deltas:R.deltas,updateClientSoul:R.updateClientSoul};await $E(n,ce);const we=await yi(n);if(a(we),N({sender:"agent",message:"",event:"neutral",phase:I,deltas:{relationship:0,history:0,attitude:0,sensitivity:0,probability:0},updateClientSoul:!1}),ce.sender==="client"&&we.isActive&&t.clientId)try{const Q=await sh(we.turns,we.currentSoul,ce.message,ce.event,t.clientId);C(Q.responseText),M(!0)}catch(Q){console.error("Error al generar sugerencia de respuesta:",Q)}}catch(ce){console.error("Error al agregar mensaje:",ce),q(`Error al agregar el mensaje: ${ce.message||"Error desconocido"}`)}},Fe=async ce=>{var we;if(t&&t.isActive&&t.clientId)try{const Q=v?v.message:((we=t.turns.find(ye=>ye.sender==="client"))==null?void 0:we.message)||"Mensaje del cliente",_e=await sh(t.turns,t.currentSoul,Q,ce,t.clientId);C(_e.responseText),M(!0)}catch(Q){console.error("Error al generar sugerencia:",Q)}},L=async(ce,we)=>{if(t)try{await B6(n,ce,we);const Q=await yi(n);if(a(Q),v.sender==="client"&&t.isActive&&t.clientId)try{const _e=await sh(Q.turns,Q.currentSoul,we.message,we.event,t.clientId);C(_e.responseText),M(!0)}catch(_e){console.error("Error al generar sugerencia de respuesta:",_e)}b(null)}catch(Q){console.error("Error al editar mensaje:",Q),q(`Error al editar el mensaje: ${Q.message||"Error desconocido"}`)}},se=async ce=>{if(window.confirm("¿Está seguro de que desea eliminar este mensaje?"))try{await q6(n,ce);const we=await yi(n);a(we)}catch(we){console.error("Error al eliminar mensaje:",we),q(`Error al eliminar el mensaje: ${we.message||"Error desconocido"}`)}},he=async()=>{if(window.confirm("¿Está seguro que desea eliminar permanentemente esta conversación? Esta acción no se puede deshacer."))try{await mw(n),e("/")}catch(ce){console.error("Error al eliminar conversación:",ce),q(`Error al eliminar la conversación: ${ce.message||"Error desconocido"}`)}},oe=async()=>{if(t)try{t.isActive?await HE(n,Zt.INACTIVE,!1):await HE(n,Zt.ACTIVE,!0);const ce=await yi(n);a(ce)}catch(ce){console.error("Error al cambiar estado de actividad:",ce),q(`Error al cambiar el estado: ${ce.message||"Error desconocido"}`)}},be=()=>{T&&(N(ce=>({...ce,message:T,sender:"agent"})),C(""),M(!1))},je=()=>{var ce;t&&!t.isActive&&oe(),(ce=document.getElementById("message-input"))==null||ce.focus()},Te=ce=>{if(!ce)return"N/A";if(ce.seconds){const we=new Date(ce.seconds*1e3);return zo(we,"PPp",{locale:As})}else{if(ce instanceof Date)return zo(ce,"PPp",{locale:As});{const we=new Date(ce);return zo(we,"PPp",{locale:As})}}};if(i)return f.jsx("div",{className:"container mx-auto px-4 py-6",children:f.jsxs("div",{className:"text-center",children:[f.jsxs("div",{className:"animate-pulse space-y-4",children:[f.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3 mx-auto"}),f.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mx-auto"}),f.jsx("div",{className:"h-64 bg-gray-200 rounded"})]}),f.jsx("p",{className:"mt-4 text-gray-600",children:"Cargando conversación..."})]})});if(W&&!t)return f.jsx("div",{className:"container mx-auto px-4 py-6",children:f.jsxs("div",{className:"max-w-md mx-auto",children:[f.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-6 py-4 rounded-lg shadow",role:"alert",children:f.jsxs("div",{className:"flex",children:[f.jsx("div",{className:"flex-shrink-0",children:f.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:f.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),f.jsxs("div",{className:"ml-3",children:[f.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error al cargar conversación"}),f.jsx("div",{className:"mt-2 text-sm text-red-700",children:f.jsx("p",{children:W})})]})]})}),f.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row gap-3",children:[f.jsx("button",{className:"btn-primary flex-1",onClick:()=>window.location.reload(),children:"Reintentar"}),f.jsx("button",{className:"btn-secondary flex-1",onClick:()=>e("/"),children:"Volver al Dashboard"})]})]})});const xt=()=>!t||!t.turns?{}:t.turns.reduce((ce,we)=>{const Q=we.phase||Ie.NEGOTIATION;return ce[Q]||(ce[Q]=[]),ce[Q].push(we),ce},{}),Ze=[Ie.GREETING,Ie.DEBT_NOTIFICATION,Ie.NEGOTIATION,Ie.PAYMENT_CONFIRMATION,Ie.FAREWELL],Sn=ce=>{switch(ce){case Ie.GREETING:return"Fase 1: Saludo";case Ie.DEBT_NOTIFICATION:return"Fase 2: Comunicación de deuda";case Ie.NEGOTIATION:return"Fase 3: Negociación";case Ie.PAYMENT_CONFIRMATION:return"Fase 4: Concretar pago";case Ie.FAREWELL:return"Fase 5: Despedida";default:return"Fase desconocida"}},Yn=xt();return f.jsxs("div",{className:"container mx-auto px-4 py-6",children:[f.jsxs("div",{className:"flex justify-between items-center mb-6",children:[f.jsxs("div",{children:[f.jsxs("h1",{className:"text-2xl font-bold",children:["Conversación con ",t.clientName]}),f.jsxs("p",{className:"text-gray-500",children:["Iniciada el ",Te(t.startedAt),f.jsx("span",{className:`ml-2 px-2 py-1 rounded-full text-xs ${t.isActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:t.isActive?"Activa":"Inactiva"})]})]}),f.jsxs("div",{className:"flex gap-2",children:[t.isActive&&f.jsxs("button",{className:"btn-primary flex flex-row items-center justify-center gap-1",onClick:()=>le(!0),children:[f.jsx("svg",{className:"w-8 h-8 -mx-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})}),"Confirmar Pago"]}),f.jsx("button",{className:`btn-secondary ${p?"bg-blue-100 border-blue-300":""}`,onClick:()=>y(!p),children:p?"Salir de Edición":"Editar Conversación"}),f.jsx("button",{className:`btn-secondary ${t.isActive?"bg-amber-100 text-amber-800":"bg-green-100 text-green-800"}`,onClick:oe,children:t.isActive?"Desactivar":"Activar"}),!t.isActive&&f.jsx("button",{className:"btn-secondary",onClick:je,children:"Continuar Conversación"}),t.status!==Zt.CLOSED&&f.jsx("button",{className:"btn-primary",onClick:()=>m(!0),children:"Finalizar Conversación"}),f.jsx("button",{className:"btn-secondary bg-red-600 text-white hover:bg-red-700",onClick:he,children:"Eliminar"}),f.jsx("button",{className:"btn-secondary",onClick:()=>e(-1),children:"Volver"})]})]}),pe&&f.jsx("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-6",children:f.jsxs("div",{className:"flex items-center",children:[f.jsx("svg",{className:"w-5 h-5 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:f.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),f.jsx("span",{className:"font-medium",children:"Pago procesado exitosamente. La información de la deuda ha sido actualizada."}),f.jsx("button",{onClick:()=>k(!1),className:"ml-auto text-green-600 hover:text-green-800",children:f.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]})}),W&&f.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-6",role:"alert",children:f.jsxs("div",{className:"flex",children:[f.jsx("div",{className:"flex-shrink-0",children:f.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:f.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),f.jsx("div",{className:"ml-3",children:f.jsx("p",{className:"text-sm",children:W})}),f.jsx("div",{className:"ml-auto pl-3",children:f.jsxs("button",{onClick:()=>q(""),className:"text-red-400 hover:text-red-600",children:[f.jsx("span",{className:"sr-only",children:"Cerrar"}),f.jsx("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:f.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})]})})]})}),p&&f.jsxs("div",{className:"bg-amber-50 border border-amber-200 text-amber-800 p-4 rounded mb-6",children:[f.jsx("h3",{className:"font-semibold mb-2",children:"Modo de edición activo"}),f.jsx("p",{children:"Puede modificar mensajes y eventos existentes. Si la conversación está activa, se generarán sugerencias de respuesta automáticamente basadas en los cambios realizados."})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[f.jsxs("div",{className:"md:col-span-2",children:[f.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[f.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Mensajes por Fases"}),Ze.map(ce=>{const we=Yn[ce]||[];return we.length===0?null:f.jsxs("div",{className:"mb-6",children:[f.jsx("h3",{className:"text-md font-semibold mb-2 bg-gray-100 p-2 rounded",children:Sn(ce)}),f.jsx("div",{className:"space-y-4",children:we.map(Q=>f.jsx("div",{className:`flex ${Q.sender==="agent"?"justify-end":"justify-start"}`,children:f.jsxs("div",{className:`rounded-lg px-4 py-2 max-w-[80%] relative ${Q.sender==="agent"?"bg-primary-100 text-primary-800":"bg-gray-100 text-gray-800"}`,children:[p&&f.jsxs("div",{className:"absolute top-1 right-1 flex gap-1",children:[f.jsx("button",{className:"text-xs text-blue-600 hover:text-blue-800",onClick:()=>b(Q),children:"✏️"}),f.jsx("button",{className:"text-xs text-red-600 hover:text-red-800",onClick:()=>se(Q.id),children:"🗑️"})]}),v&&v.id===Q.id?f.jsx(BM,{turn:Q,onSave:_e=>L(Q.id,_e),onCancel:()=>b(null),onEventChange:Fe}):f.jsxs(f.Fragment,{children:[f.jsx("p",{className:"whitespace-pre-line",children:Q.message}),f.jsxs("div",{className:"text-xs text-gray-500 mt-1 flex justify-between",children:[f.jsx("span",{children:Te(Q.timestamp)}),Q.isManual&&f.jsx("span",{className:"text-blue-500",children:"Manual"}),Q.isEdited&&f.jsx("span",{className:"text-orange-500",children:"Editado"})]}),Q.event&&Q.event!=="neutral"&&f.jsxs("div",{className:"mt-2 text-xs",children:[f.jsx("span",{className:"font-medium",children:"Evento: "}),f.jsx("span",{children:Q.event}),Q.deltas&&f.jsxs("div",{className:"mt-1 grid grid-cols-5 gap-1",children:[f.jsxs("span",{className:`${Q.deltas.relationship>0?"text-green-600":Q.deltas.relationship<0?"text-red-600":"text-gray-500"}`,children:["R: ",Q.deltas.relationship>0?"+":"",Q.deltas.relationship]}),f.jsxs("span",{className:`${Q.deltas.history>0?"text-green-600":Q.deltas.history<0?"text-red-600":"text-gray-500"}`,children:["H: ",Q.deltas.history>0?"+":"",Q.deltas.history]}),f.jsxs("span",{className:`${Q.deltas.attitude>0?"text-green-600":Q.deltas.attitude<0?"text-red-600":"text-gray-500"}`,children:["A: ",Q.deltas.attitude>0?"+":"",Q.deltas.attitude]}),f.jsxs("span",{className:`${Q.deltas.sensitivity>0?"text-green-600":Q.deltas.sensitivity<0?"text-red-600":"text-gray-500"}`,children:["S: ",Q.deltas.sensitivity>0?"+":"",Q.deltas.sensitivity]}),f.jsxs("span",{className:`${Q.deltas.probability>0?"text-green-600":Q.deltas.probability<0?"text-red-600":"text-gray-500"}`,children:["P: ",Q.deltas.probability>0?"+":"",Q.deltas.probability]})]})]})]})]})},Q.id))})]},ce)}),(!t.turns||t.turns.length===0)&&f.jsx("p",{className:"text-gray-500 text-center py-4",children:"No hay mensajes en esta conversación."}),T&&f.jsxs("div",{className:`mt-4 p-3 bg-blue-50 border border-blue-100 rounded-md transition-all duration-300 ${A?"opacity-100":"opacity-0"}`,children:[f.jsxs("div",{className:"flex justify-between items-start",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-sm font-medium text-blue-700 mb-1",children:"Sugerencia de respuesta:"}),f.jsx("p",{className:"text-sm text-blue-800",children:T})]}),f.jsx("button",{className:"text-xs bg-blue-600 text-white px-2 py-1 rounded hover:bg-blue-700",onClick:be,children:"Usar esta respuesta"})]}),f.jsx("p",{className:"text-xs text-blue-600 mt-2",children:"Esta sugerencia se generó automáticamente basada en el contexto y los cambios realizados."})]}),t.isActive&&f.jsxs("div",{className:"mt-6 p-4 border-t border-gray-200",children:[f.jsx("h3",{className:"text-md font-semibold mb-3",children:"Agregar Nuevo Mensaje"}),f.jsxs("div",{className:"space-y-4",children:[f.jsx(Hw,{phase:I,onChange:J}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Emisor"}),f.jsxs("select",{name:"sender",className:"input w-full",value:R.sender,onChange:Me,children:[f.jsx("option",{value:"agent",children:"Agente"}),f.jsx("option",{value:"client",children:"Cliente"})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de Evento"}),f.jsxs("select",{name:"event",className:"input w-full",value:R.event,onChange:Me,children:[f.jsx("option",{value:"neutral",children:"Evento Neutro"}),f.jsx("option",{value:"accepts_payment",children:"Acepta pagar"}),f.jsx("option",{value:"offers_partial",children:"Ofrece pago parcial"}),f.jsx("option",{value:"reschedule",children:"Propone nueva fecha"}),f.jsx("option",{value:"evades",children:"Evade"}),f.jsx("option",{value:"annoyed",children:"Se muestra molesto"}),f.jsx("option",{value:"refuses",children:"Se niega a pagar"}),f.jsx("option",{value:"thanks",children:"Agradece"}),f.jsx("option",{value:"no_answer",children:"No contesta"}),f.jsx("option",{value:"confirms_payment",children:"Confirma pago"}),f.jsx("option",{value:"asks_bank_info",children:"Solicita información bancaria"})]})]})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"message-input",className:"block text-sm font-medium text-gray-700 mb-1",children:"Mensaje"}),f.jsx("textarea",{id:"message-input",name:"message",rows:"3",className:"input w-full",value:R.message,onChange:Me,placeholder:"Escriba el mensaje..."})]}),R.event!=="neutral"&&f.jsxs(f.Fragment,{children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Deltas para Variables del Alma"}),f.jsxs("div",{className:"grid grid-cols-5 gap-2",children:[f.jsxs("div",{children:[f.jsx("label",{className:"text-xs text-gray-500",children:"Relación"}),f.jsx("input",{type:"number",min:"-100",max:"100",className:"input w-full text-sm",value:R.deltas.relationship,onChange:ce=>ue("relationship",ce.target.value)})]}),f.jsxs("div",{children:[f.jsx("label",{className:"text-xs text-gray-500",children:"Historial"}),f.jsx("input",{type:"number",min:"-100",max:"100",className:"input w-full text-sm",value:R.deltas.history,onChange:ce=>ue("history",ce.target.value)})]}),f.jsxs("div",{children:[f.jsx("label",{className:"text-xs text-gray-500",children:"Actitud"}),f.jsx("input",{type:"number",min:"-100",max:"100",className:"input w-full text-sm",value:R.deltas.attitude,onChange:ce=>ue("attitude",ce.target.value)})]}),f.jsxs("div",{children:[f.jsx("label",{className:"text-xs text-gray-500",children:"Sensibilidad"}),f.jsx("input",{type:"number",min:"-100",max:"100",className:"input w-full text-sm",value:R.deltas.sensitivity,onChange:ce=>ue("sensitivity",ce.target.value)})]}),f.jsxs("div",{children:[f.jsx("label",{className:"text-xs text-gray-500",children:"Probabilidad"}),f.jsx("input",{type:"number",min:"-100",max:"100",className:"input w-full text-sm",value:R.deltas.probability,onChange:ce=>ue("probability",ce.target.value)})]})]})]}),f.jsxs("div",{className:"flex items-center",children:[f.jsx("input",{type:"checkbox",id:"updateClientSoul",checked:R.updateClientSoul,onChange:ce=>N(we=>({...we,updateClientSoul:ce.target.checked})),className:"mr-2"}),f.jsx("label",{htmlFor:"updateClientSoul",className:"text-sm text-gray-700",children:"Actualizar alma del cliente en la base de datos"})]})]}),f.jsx("button",{className:"btn-primary",onClick:ve,disabled:!R.message.trim(),children:"Agregar Mensaje"})]})]}),!t.isActive&&f.jsx("div",{className:"mt-6 p-4 border-t border-gray-200",children:f.jsx("div",{className:"bg-gray-50 p-4 rounded-md text-center",children:f.jsx("p",{className:"text-gray-600",children:'Esta conversación no está activa. Pulse "Activar" si desea añadir más mensajes.'})})})]}),t.status===Zt.CLOSED&&t.summary&&f.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[f.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Resumen de la Conversación"}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Resultado"}),f.jsxs("p",{className:"font-medium",children:[t.summary.result==="payment"&&"Pago realizado",t.summary.result==="partial_payment"&&"Pago parcial",t.summary.result==="promise"&&"Promesa de pago",t.summary.result==="no_payment"&&"Sin pago",t.summary.result==="pending"&&"Pendiente"]})]}),t.summary.nextActionDate&&f.jsxs("div",{children:[f.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Próxima acción"}),f.jsx("p",{children:Te(t.summary.nextActionDate)})]}),t.summary.notes&&f.jsxs("div",{className:"md:col-span-2",children:[f.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Notas"}),f.jsx("p",{className:"whitespace-pre-line",children:t.summary.notes})]})]})]}),u&&f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:f.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-lg w-full mx-4",children:[f.jsx("h2",{className:"text-xl font-bold mb-4",children:"Cerrar Conversación"}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Resultado"}),f.jsxs("select",{name:"result",className:"input w-full",value:j.result,onChange:O,children:[f.jsx("option",{value:"payment",children:"Pago realizado"}),f.jsx("option",{value:"partial_payment",children:"Pago parcial"}),f.jsx("option",{value:"promise",children:"Promesa de pago"}),f.jsx("option",{value:"no_payment",children:"Sin pago"}),f.jsx("option",{value:"pending",children:"Pendiente"})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha de próxima acción"}),f.jsx("input",{type:"date",name:"nextActionDate",className:"input w-full",value:j.nextActionDate,onChange:O})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notas"}),f.jsx("textarea",{name:"notes",rows:"4",className:"input w-full",value:j.notes,onChange:O,placeholder:"Resumen de la conversación, acuerdos, observaciones..."})]})]}),f.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[f.jsx("button",{className:"btn-secondary",onClick:()=>m(!1),children:"Cancelar"}),f.jsx("button",{className:"btn-primary",onClick:dt,children:"Cerrar Conversación"})]})]})})]}),f.jsxs("div",{children:[f.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[f.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Información del Cliente"}),f.jsxs("p",{className:"mb-2",children:[f.jsx("span",{className:"font-medium",children:"Nombre:"})," ",t.clientName]}),t.client&&f.jsxs(f.Fragment,{children:[f.jsxs("p",{className:"mb-2",children:[f.jsx("span",{className:"font-medium",children:"Teléfono:"})," ",t.client.phone]}),f.jsxs("p",{className:"mb-2",children:[f.jsx("span",{className:"font-medium",children:"Email:"})," ",t.client.email||"No disponible"]}),f.jsxs("p",{className:"mb-2",children:[f.jsx("span",{className:"font-medium",children:"Estado:"})," Deuda pendiente"]}),f.jsxs("p",{className:"mb-2",children:[f.jsx("span",{className:"font-medium",children:"Deuda:"})," $",((t.clientDebt!==void 0?t.clientDebt:(Nn=t.client)==null?void 0:Nn.debt)||0).toLocaleString("es-CO")," COP"]}),f.jsx("p",{className:"text-sm text-gray-500 italic",children:"Nota: Por privacidad, no se muestran montos específicos."}),f.jsx("div",{className:"mt-4",children:f.jsx("button",{className:"text-primary-600 text-sm font-medium hover:text-primary-800",onClick:()=>e(`/clients/${t.clientId}`),children:"Ver perfil completo"})})]})]}),f.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[f.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Variables del Alma"}),t.initialSoul&&t.currentSoul&&f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-2",children:"Inicial"}),f.jsx(Wo,{initialValues:t.initialSoul,readOnly:!0})]}),f.jsxs("div",{children:[f.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-2",children:"Actual"}),f.jsx(Wo,{initialValues:t.currentSoul,readOnly:!0})]}),f.jsxs("div",{className:"mt-4 p-3 bg-gray-50 rounded-md",children:[f.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Cambios"}),f.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[f.jsxs("div",{children:[f.jsx("span",{className:"font-medium",children:"Relación:"})," ",f.jsxs("span",{className:t.currentSoul.relationship>t.initialSoul.relationship?"text-green-600":t.currentSoul.relationship<t.initialSoul.relationship?"text-red-600":"text-gray-500",children:[t.currentSoul.relationship-t.initialSoul.relationship>0?"+":"",t.currentSoul.relationship-t.initialSoul.relationship]})]}),f.jsxs("div",{children:[f.jsx("span",{className:"font-medium",children:"Historial:"})," ",f.jsxs("span",{className:t.currentSoul.history>t.initialSoul.history?"text-green-600":t.currentSoul.history<t.initialSoul.history?"text-red-600":"text-gray-500",children:[t.currentSoul.history-t.initialSoul.history>0?"+":"",t.currentSoul.history-t.initialSoul.history]})]}),f.jsxs("div",{children:[f.jsx("span",{className:"font-medium",children:"Actitud:"})," ",f.jsxs("span",{className:t.currentSoul.attitude>t.initialSoul.attitude?"text-green-600":t.currentSoul.attitude<t.initialSoul.attitude?"text-red-600":"text-gray-500",children:[t.currentSoul.attitude-t.initialSoul.attitude>0?"+":"",t.currentSoul.attitude-t.initialSoul.attitude]})]}),f.jsxs("div",{children:[f.jsx("span",{className:"font-medium",children:"Sensibilidad:"})," ",f.jsxs("span",{className:t.currentSoul.sensitivity<t.initialSoul.sensitivity?"text-green-600":t.currentSoul.sensitivity>t.initialSoul.sensitivity?"text-red-600":"text-gray-500",children:[t.currentSoul.sensitivity-t.initialSoul.sensitivity>0?"+":"",t.currentSoul.sensitivity-t.initialSoul.sensitivity]})]}),f.jsxs("div",{className:"col-span-2",children:[f.jsx("span",{className:"font-medium",children:"Probabilidad de pago:"})," ",f.jsxs("span",{className:t.currentSoul.probability>t.initialSoul.probability?"text-green-600":t.currentSoul.probability<t.initialSoul.probability?"text-red-600":"text-gray-500",children:[t.currentSoul.probability-t.initialSoul.probability>0?"+":"",t.currentSoul.probability-t.initialSoul.probability]})]})]})]})]})]})]})]}),f.jsx($w,{isOpen:ie,onClose:()=>le(!1),clientId:t.clientId,clientName:t.clientName,currentDebt:t.clientDebt!==void 0?t.clientDebt:((Kn=t.client)==null?void 0:Kn.debt)||0,onPaymentConfirmed:z})]})},BM=({turn:n,onSave:e,onCancel:t,onEventChange:a})=>{const[i,l]=P.useState({message:n.message,event:n.event||"neutral",phase:n.phase||Ie.NEGOTIATION,deltas:n.deltas||{relationship:0,history:0,attitude:0,sensitivity:0,probability:0}}),u=v=>{const{name:b,value:T}=v.target;b==="event"&&T!==i.event&&a&&a(T),l(C=>({...C,[b]:T}))},m=v=>{l(b=>({...b,phase:v}))},p=(v,b)=>{l(T=>({...T,deltas:{...T.deltas,[v]:parseInt(b,10)||0}}))},y=v=>{v.preventDefault(),e(i)};return f.jsxs("form",{onSubmit:y,className:"space-y-3",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Mensaje"}),f.jsx("textarea",{name:"message",rows:"2",className:"w-full text-sm border border-gray-300 rounded px-2 py-1",value:i.message,onChange:u})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Fase"}),f.jsxs("select",{name:"phase",className:"w-full text-sm border border-gray-300 rounded px-2 py-1",value:i.phase,onChange:v=>m(v.target.value),children:[f.jsx("option",{value:Ie.GREETING,children:"Fase 1: Saludo"}),f.jsx("option",{value:Ie.DEBT_NOTIFICATION,children:"Fase 2: Comunicación de deuda"}),f.jsx("option",{value:Ie.NEGOTIATION,children:"Fase 3: Negociación"}),f.jsx("option",{value:Ie.PAYMENT_CONFIRMATION,children:"Fase 4: Concretar pago"}),f.jsx("option",{value:Ie.FAREWELL,children:"Fase 5: Despedida"})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Evento"}),f.jsxs("select",{name:"event",className:"w-full text-sm border border-gray-300 rounded px-2 py-1",value:i.event,onChange:u,children:[f.jsx("option",{value:"neutral",children:"Neutral"}),f.jsx("option",{value:"accepts_payment",children:"Acepta pagar"}),f.jsx("option",{value:"offers_partial",children:"Pago parcial"}),f.jsx("option",{value:"reschedule",children:"Nueva fecha"}),f.jsx("option",{value:"evades",children:"Evade"}),f.jsx("option",{value:"annoyed",children:"Molesto"}),f.jsx("option",{value:"refuses",children:"Se niega"}),f.jsx("option",{value:"thanks",children:"Agradece"}),f.jsx("option",{value:"no_answer",children:"No contesta"}),f.jsx("option",{value:"confirms_payment",children:"Confirma pago"})]})]}),i.event!=="neutral"&&f.jsxs("div",{children:[f.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Deltas"}),f.jsxs("div",{className:"grid grid-cols-5 gap-1",children:[f.jsx("input",{type:"number",min:"-100",max:"100",className:"w-full text-xs border border-gray-300 rounded px-1 py-1",value:i.deltas.relationship,onChange:v=>p("relationship",v.target.value),placeholder:"R"}),f.jsx("input",{type:"number",min:"-100",max:"100",className:"w-full text-xs border border-gray-300 rounded px-1 py-1",value:i.deltas.history,onChange:v=>p("history",v.target.value),placeholder:"H"}),f.jsx("input",{type:"number",min:"-100",max:"100",className:"w-full text-xs border border-gray-300 rounded px-1 py-1",value:i.deltas.attitude,onChange:v=>p("attitude",v.target.value),placeholder:"A"}),f.jsx("input",{type:"number",min:"-100",max:"100",className:"w-full text-xs border border-gray-300 rounded px-1 py-1",value:i.deltas.sensitivity,onChange:v=>p("sensitivity",v.target.value),placeholder:"S"}),f.jsx("input",{type:"number",min:"-100",max:"100",className:"w-full text-xs border border-gray-300 rounded px-1 py-1",value:i.deltas.probability,onChange:v=>p("probability",v.target.value),placeholder:"P"})]})]}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx("button",{type:"submit",className:"text-xs bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600",children:"Guardar"}),f.jsx("button",{type:"button",onClick:t,className:"text-xs bg-gray-500 text-white px-2 py-1 rounded hover:bg-gray-600",children:"Cancelar"})]})]})},qM=()=>{const[n,e]=P.useState(""),[t,a]=P.useState(""),[i,l]=P.useState(""),[u,m]=P.useState(!1),[p,y]=P.useState(""),v=An();P.useEffect(()=>{e(LM());const A=localStorage.getItem("huggingface_api_key")||"",M=localStorage.getItem("openai_api_key")||"";a(A),l(M)},[]);const b=async()=>{m(!0),y("");try{if(n===yt.ZEPHYR&&!t.trim()){y("Error: Debe proporcionar una API Key válida para Hugging Face.");return}if(n===yt.OPENAI&&!i.trim()){y("Error: Debe proporcionar una API Key válida para OpenAI.");return}kM(n),localStorage.setItem("huggingface_api_key",t),localStorage.setItem("openai_api_key",i),y("Configuración guardada correctamente"),setTimeout(()=>v("/"),1500)}catch(A){console.error("Error al guardar configuración:",A),y("Error al guardar la configuración")}finally{m(!1)}},T=A=>{switch(A){case yt.GEMINI:return"Servicio básico con respuestas predefinidas (no requiere configuración externa)";case yt.ZEPHYR:return"Modelo Zephyr 7B Beta de Hugging Face - Buena calidad, requiere API key gratuita";case yt.OPENAI:return"GPT-3.5 Turbo de OpenAI - Máxima calidad con contexto avanzado, requiere API key de pago";default:return""}},C=A=>!A||A.length<8?A:A.substring(0,4)+"..."+A.substring(A.length-4);return f.jsxs("div",{className:"container mx-auto px-4 py-6",children:[f.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Configuración de IA"}),f.jsxs("div",{className:"bg-blue-50 border border-blue-200 text-blue-800 p-4 rounded mb-6",children:[f.jsx("h3",{className:"font-semibold mb-2",children:"💡 Acerca de los servicios de IA"}),f.jsx("p",{className:"text-sm mb-2",children:"El sistema utiliza diferentes servicios de IA para analizar las conversaciones y generar respuestas inteligentes adaptadas al perfil de cada cliente."}),f.jsxs("p",{className:"text-sm",children:[f.jsx("strong",{children:"Novedad:"})," El servicio OpenAI incluye contexto avanzado que utiliza conversaciones previas con el mismo cliente, o aprende del estilo conversacional de clientes similares si no existe historial previo."]})]}),f.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[f.jsxs("div",{className:"form-group mb-6",children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Servicio de IA"}),f.jsxs("div",{className:"space-y-3",children:[f.jsxs("label",{className:"flex items-start space-x-3 p-3 border rounded-lg cursor-pointer hover:bg-gray-50",children:[f.jsx("input",{type:"radio",name:"aiService",value:yt.GEMINI,checked:n===yt.GEMINI,onChange:A=>e(A.target.value),className:"mt-1"}),f.jsxs("div",{className:"flex-1",children:[f.jsx("div",{className:"font-medium text-gray-900",children:"Gemini (Básico)"}),f.jsx("div",{className:"text-sm text-gray-500",children:T(yt.GEMINI)})]}),f.jsx("span",{className:"px-2 py-1 text-xs bg-green-100 text-green-800 rounded",children:"GRATIS"})]}),f.jsxs("label",{className:"flex items-start space-x-3 p-3 border rounded-lg cursor-pointer hover:bg-gray-50",children:[f.jsx("input",{type:"radio",name:"aiService",value:yt.ZEPHYR,checked:n===yt.ZEPHYR,onChange:A=>e(A.target.value),className:"mt-1"}),f.jsxs("div",{className:"flex-1",children:[f.jsx("div",{className:"font-medium text-gray-900",children:"Zephyr 7B Beta (Hugging Face)"}),f.jsx("div",{className:"text-sm text-gray-500",children:T(yt.ZEPHYR)})]}),f.jsx("span",{className:"px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded",children:"API GRATUITA"})]}),f.jsxs("label",{className:"flex items-start space-x-3 p-3 border rounded-lg cursor-pointer hover:bg-gray-50",children:[f.jsx("input",{type:"radio",name:"aiService",value:yt.OPENAI,checked:n===yt.OPENAI,onChange:A=>e(A.target.value),className:"mt-1"}),f.jsxs("div",{className:"flex-1",children:[f.jsx("div",{className:"font-medium text-gray-900",children:"OpenAI GPT-3.5 Turbo"}),f.jsx("div",{className:"text-sm text-gray-500",children:T(yt.OPENAI)}),f.jsx("div",{className:"text-xs text-green-600 mt-1"})]}),f.jsx("span",{className:"px-2 py-1 text-xs bg-purple-100 text-purple-800 rounded",children:"PREMIUM"})]})]})]}),f.jsxs("div",{className:"space-y-6",children:[n===yt.ZEPHYR&&f.jsxs("div",{className:"form-group border-t pt-6",children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"API Key de Hugging Face"}),f.jsx("input",{type:"password",className:"input w-full mb-2",value:t,onChange:A=>a(A.target.value),placeholder:"Ingresa tu API Key de Hugging Face"}),t&&f.jsxs("p",{className:"text-xs text-gray-500 mb-2",children:["API Key configurada: ",C(t)]}),f.jsxs("p",{className:"text-sm text-gray-500",children:["Obtén una API Key gratuita desde tu cuenta de"," ",f.jsx("a",{href:"https://huggingface.co/settings/tokens",target:"_blank",rel:"noopener noreferrer",className:"text-primary-600 hover:text-primary-800 underline",children:"Hugging Face"}),"."]})]}),n===yt.OPENAI&&f.jsxs("div",{className:"form-group border-t pt-6",children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"API Key de OpenAI"}),f.jsx("input",{type:"password",className:"input w-full mb-2",value:i,onChange:A=>l(A.target.value),placeholder:"Ingresa tu API Key de OpenAI (sk-...)"}),i&&f.jsxs("p",{className:"text-xs text-gray-500 mb-2",children:["API Key configurada: ",C(i)]}),f.jsxs("div",{className:"bg-amber-50 border border-amber-200 p-3 rounded text-sm text-amber-800 mb-2",children:[f.jsx("strong",{children:"💰 Costo estimado:"})," ~$0.002 USD por conversación (muy económico)"]}),f.jsxs("p",{className:"text-sm text-gray-500",children:["Obtén tu API Key desde"," ",f.jsx("a",{href:"https://platform.openai.com/api-keys",target:"_blank",rel:"noopener noreferrer",className:"text-primary-600 hover:text-primary-800 underline",children:"OpenAI Platform"}),". Necesitarás añadir créditos a tu cuenta (mínimo $5 USD)."]})]})]}),p&&f.jsx("div",{className:`p-3 rounded mt-4 ${p.includes("Error")?"bg-red-100 text-red-800":"bg-green-100 text-green-800"}`,children:p}),f.jsxs("div",{className:"flex justify-end gap-2 mt-8",children:[f.jsx("button",{className:"btn-secondary",onClick:()=>v(-1),disabled:u,children:"Cancelar"}),f.jsx("button",{className:"btn-primary",onClick:b,disabled:u,children:u?"Guardando...":"Guardar configuración"})]})]})]})},FM=()=>{const[n,e]=P.useState([]),[t,a]=P.useState([]),[i,l]=P.useState([]),[u,m]=P.useState(!0);P.useEffect(()=>{(async()=>{try{m(!0);const[T,C,A]=await Promise.all([hw(null,100),fw(null,100),cu()]);e(T),a(C),l(A)}catch(T){console.error("Error al cargar datos para reportes:",T)}finally{m(!1)}})()},[]);const p=n.length+t.length,y={active:n.length,closed:t.length,payment:t.filter(b=>{var T;return((T=b.summary)==null?void 0:T.result)==="payment"}).length,partialPayment:t.filter(b=>{var T;return((T=b.summary)==null?void 0:T.result)==="partial_payment"}).length,promise:t.filter(b=>{var T;return((T=b.summary)==null?void 0:T.result)==="promise"}).length,noPayment:t.filter(b=>{var T;return((T=b.summary)==null?void 0:T.result)==="no_payment"}).length},v={total:i.length,withDebt:i.filter(b=>b.debt>0).length,totalDebt:i.reduce((b,T)=>b+(T.debt||0),0),highProbability:i.filter(b=>{var T;return((T=b.soul)==null?void 0:T.probability)>=70}).length,mediumProbability:i.filter(b=>{var T,C;return((T=b.soul)==null?void 0:T.probability)>=40&&((C=b.soul)==null?void 0:C.probability)<70}).length,lowProbability:i.filter(b=>{var T;return((T=b.soul)==null?void 0:T.probability)<40}).length};return u?f.jsxs("div",{className:"container mx-auto px-4 py-6",children:[f.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Reportes"}),f.jsxs("div",{className:"animate-pulse space-y-6",children:[f.jsx("div",{className:"h-40 bg-gray-200 rounded"}),f.jsx("div",{className:"h-40 bg-gray-200 rounded"}),f.jsx("div",{className:"h-60 bg-gray-200 rounded"})]})]}):f.jsxs("div",{className:"container mx-auto px-4 py-6",children:[f.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Reportes"}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[f.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[f.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Estadísticas de Conversaciones"}),f.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[f.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[f.jsx("h3",{className:"text-sm font-medium text-blue-800 mb-1",children:"Activas"}),f.jsx("p",{className:"text-2xl font-bold text-blue-600",children:y.active})]}),f.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[f.jsx("h3",{className:"text-sm font-medium text-green-800 mb-1",children:"Cerradas"}),f.jsx("p",{className:"text-2xl font-bold text-green-600",children:y.closed})]}),f.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[f.jsx("h3",{className:"text-sm font-medium text-green-800 mb-1",children:"Pagos completos"}),f.jsx("p",{className:"text-2xl font-bold text-green-600",children:y.payment}),f.jsxs("p",{className:"text-xs text-green-600",children:[p>0?Math.round(y.payment/p*100):0,"% del total"]})]}),f.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[f.jsx("h3",{className:"text-sm font-medium text-yellow-800 mb-1",children:"Pagos parciales"}),f.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:y.partialPayment}),f.jsxs("p",{className:"text-xs text-yellow-600",children:[p>0?Math.round(y.partialPayment/p*100):0,"% del total"]})]}),f.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[f.jsx("h3",{className:"text-sm font-medium text-yellow-800 mb-1",children:"Promesas de pago"}),f.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:y.promise}),f.jsxs("p",{className:"text-xs text-yellow-600",children:[p>0?Math.round(y.promise/p*100):0,"% del total"]})]}),f.jsxs("div",{className:"bg-red-50 p-4 rounded-lg",children:[f.jsx("h3",{className:"text-sm font-medium text-red-800 mb-1",children:"Sin pago"}),f.jsx("p",{className:"text-2xl font-bold text-red-600",children:y.noPayment}),f.jsxs("p",{className:"text-xs text-red-600",children:[p>0?Math.round(y.noPayment/p*100):0,"% del total"]})]})]})]}),f.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[f.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Estadísticas de Clientes"}),f.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[f.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[f.jsx("h3",{className:"text-sm font-medium text-blue-800 mb-1",children:"Total de clientes"}),f.jsx("p",{className:"text-2xl font-bold text-blue-600",children:v.total})]}),f.jsxs("div",{className:"bg-red-50 p-4 rounded-lg",children:[f.jsx("h3",{className:"text-sm font-medium text-red-800 mb-1",children:"Con deuda"}),f.jsx("p",{className:"text-2xl font-bold text-red-600",children:v.withDebt}),f.jsxs("p",{className:"text-xs text-red-600",children:[v.total>0?Math.round(v.withDebt/v.total*100):0,"% del total"]})]}),f.jsxs("div",{className:"bg-red-50 p-4 rounded-lg col-span-2",children:[f.jsx("h3",{className:"text-sm font-medium text-red-800 mb-1",children:"Deuda total"}),f.jsxs("p",{className:"text-2xl font-bold text-red-600",children:["$",v.totalDebt.toLocaleString("es-CO")]})]}),f.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[f.jsx("h3",{className:"text-sm font-medium text-green-800 mb-1",children:"Alta probabilidad de pago"}),f.jsx("p",{className:"text-2xl font-bold text-green-600",children:v.highProbability}),f.jsxs("p",{className:"text-xs text-green-600",children:[v.total>0?Math.round(v.highProbability/v.total*100):0,"% del total"]})]}),f.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[f.jsx("h3",{className:"text-sm font-medium text-yellow-800 mb-1",children:"Media probabilidad"}),f.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:v.mediumProbability}),f.jsxs("p",{className:"text-xs text-yellow-600",children:[v.total>0?Math.round(v.mediumProbability/v.total*100):0,"% del total"]})]})]})]})]}),f.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-8",children:[f.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Top 10 Clientes con Mayor Deuda"}),f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[f.jsx("thead",{className:"bg-gray-50",children:f.jsxs("tr",{children:[f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nombre"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Deuda"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Probabilidad de Pago"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Última Conversación"})]})}),f.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.sort((b,T)=>T.debt-b.debt).slice(0,10).map(b=>{var T,C,A;return f.jsxs("tr",{children:[f.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:f.jsx("div",{className:"font-medium text-gray-900",children:b.name})}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:f.jsxs("div",{className:"text-sm font-medium text-red-600",children:["$",b.debt.toLocaleString("es-CO")]})}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:f.jsxs("div",{className:`text-sm font-medium ${((T=b.soul)==null?void 0:T.probability)>=70?"text-green-600":((C=b.soul)==null?void 0:C.probability)>=40?"text-yellow-600":"text-red-600"}`,children:[((A=b.soul)==null?void 0:A.probability)||0,"%"]})}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:f.jsx("div",{className:"text-sm text-gray-500",children:b.lastContact?new Date(b.lastContact.seconds*1e3).toLocaleDateString():"Sin contacto"})})]},b.id)})})]})})]})]})},HM=()=>{const{currentUser:n,userDetails:e}=ou(),t=An(),a=async()=>{try{await yj(),t("/login")}catch(i){console.error("Error al cerrar sesión:",i)}};return f.jsx("nav",{className:"bg-white p-4 shadow",children:f.jsxs("div",{className:"container mx-auto flex justify-between items-center",children:[f.jsx("div",{className:"flex items-center",children:f.jsx("span",{className:"text-lg font-semibold text-gray-700",children:"Sistema de Cobranza Adaptativa"})}),f.jsx("div",{className:"flex items-center space-x-4",children:n&&f.jsxs(f.Fragment,{children:[f.jsx("span",{className:"text-sm text-gray-600",children:(e==null?void 0:e.displayName)||n.email}),f.jsx("button",{className:"text-sm text-gray-600 hover:text-gray-900",onClick:a,children:"Cerrar sesión"})]})})]})})},$M=()=>{const{isAdmin:n}=ou();return f.jsxs("div",{className:"bg-gray-800 text-white w-64 flex-shrink-0 hidden md:block",children:[f.jsx("div",{className:"p-4",children:f.jsx("h2",{className:"text-xl font-bold",children:"Acriventas"})}),f.jsxs("nav",{className:"mt-8",children:[f.jsxs(vi,{to:"/",className:({isActive:e})=>`flex items-center py-2 px-4 ${e?"bg-gray-700":"hover:bg-gray-700"}`,end:!0,children:[f.jsx(Dj,{className:"mr-3"}),"Dashboard"]}),f.jsxs(vi,{to:"/clients",className:({isActive:e})=>`flex items-center py-2 px-4 ${e?"bg-gray-700":"hover:bg-gray-700"}`,children:[f.jsx(Pj,{className:"mr-3"}),"Clientes"]}),f.jsxs(vi,{to:"/conversations",className:({isActive:e})=>`flex items-center py-2 px-4 ${e?"bg-gray-700":"hover:bg-gray-700"}`,children:[f.jsx(Oj,{className:"mr-3"}),"Conversaciones"]}),f.jsxs(vi,{to:"/reports",className:({isActive:e})=>`flex items-center py-2 px-4 ${e?"bg-gray-700":"hover:bg-gray-700"}`,children:[f.jsx(Rj,{className:"mr-3"}),"Reportes"]}),f.jsxs(vi,{to:"/settings/ai",className:({isActive:e})=>`flex items-center py-2 px-4 ${e?"bg-gray-700":"hover:bg-gray-700"}`,children:[f.jsx(jj,{className:"mr-3"}),"Configuración IA"]}),n&&f.jsxs(vi,{to:"/settings",className:({isActive:e})=>`flex items-center py-2 px-4 ${e?"bg-gray-700":"hover:bg-gray-700"}`,children:[f.jsx(Ij,{className:"mr-3"}),"Configuración"]})]})]})},GM=()=>f.jsxs("div",{className:"flex h-screen bg-gray-100",children:[f.jsx($M,{}),f.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[f.jsx(HM,{}),f.jsx("main",{className:"flex-1 overflow-y-auto p-4",children:f.jsx(vN,{})})]})]}),YM=({children:n})=>{const{currentUser:e,loading:t}=ou();return t?f.jsx("div",{className:"flex h-screen items-center justify-center",children:"Cargando..."}):e?n:f.jsx(v1,{to:"/login"})};function KM(){return f.jsx(HN,{children:f.jsx(_j,{children:f.jsxs(bN,{children:[f.jsx(Tn,{path:"/login",element:f.jsx(bj,{})}),f.jsx(Tn,{path:"/register",element:f.jsx(Ej,{})}),f.jsxs(Tn,{path:"/",element:f.jsx(YM,{children:f.jsx(GM,{})}),children:[f.jsx(Tn,{index:!0,element:f.jsx(H6,{})}),f.jsx(Tn,{path:"clients",element:f.jsx(W6,{})}),f.jsx(Tn,{path:"clients/:clientId",element:f.jsx(G6,{})}),f.jsx(Tn,{path:"clients/search",element:f.jsx(Y6,{})}),f.jsx(Tn,{path:"clients/new",element:f.jsx(K6,{})}),f.jsx(Tn,{path:"conversation/new",element:f.jsx(Q6,{})}),f.jsx(Tn,{path:"conversation/new/:clientId",element:f.jsx(UM,{})}),f.jsx(Tn,{path:"conversation/:conversationId",element:f.jsx(zM,{})}),f.jsx(Tn,{path:"reports",element:f.jsx(FM,{})}),f.jsx(Tn,{path:"settings/ai",element:f.jsx(qM,{})})]}),f.jsx(Tn,{path:"*",element:f.jsx(v1,{to:"/",replace:!0})})]})})})}SS.createRoot(document.getElementById("root")).render(f.jsx(P.StrictMode,{children:f.jsx(KM,{})}));
